(function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.vmv=e()}})(function(){var e=Math.sign,t=Math.tan,n=Math.atan,a=Math.exp,i=Math.acos,s=Math.sin,c=Math.cos,o=Math.PI,u=Math.sqrt,l=Math.round,S=Math.min,p=Math.ceil,r=Math.LN2,f=Math.log,T=Math.abs,g=Math.pow,N=Math.max,E=Math.floor,d=String.fromCharCode,m,_,y;return function d(p,e,t){function a(i,o){if(!e[i]){if(!p[i]){var r="function"==typeof require&&require;if(!o&&r)return r(i,!0);if(n)return n(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=e[i]={exports:{}};p[i][0].call(c.exports,function(t){var e=p[i][1][t];return a(e?e:t)},c,c.exports,d,p,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,i=0;i<t.length;i++)a(t[i]);return a}({1:[function(e,t){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":46}],2:[function(e,t){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":47}],3:[function(e,t){t.exports={default:e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":48}],4:[function(e,t){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":49}],5:[function(e,t){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":50}],6:[function(e,t){t.exports={default:e("core-js/library/fn/object/entries"),__esModule:!0}},{"core-js/library/fn/object/entries":51}],7:[function(e,t){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":52}],8:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../core-js/promise"),i=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default(function(e,n){function a(o,r){try{var s=t[o](r),l=s.value}catch(e){return void n(e)}return s.done?void e(l):i.default.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}},{"../core-js/promise":7}],9:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../core-js/object/assign"),i=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default=i.default||function(e){for(var t=1,n;t<arguments.length;t++)for(var a in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}},{"../core-js/object/assign":5}],10:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/is-iterable"),o=a(i),r=e("../core-js/get-iterator"),s=a(r);n.default=function(){function e(e,t){var n=[],a=!0,i=!1,o;try{for(var r=(0,s.default)(e),l;!(a=(l=r.next()).done)&&(n.push(l.value),!(t&&n.length===t));a=!0);}catch(e){i=!0,o=e}finally{try{!a&&r["return"]&&r["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},{"../core-js/get-iterator":2,"../core-js/is-iterable":3}],11:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../core-js/array/from"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},{"../core-js/array/from":1}],12:[function(e,t){t.exports=e("regenerator-runtime")},{"regenerator-runtime":457}],13:[function(e,t,n){"use strict";function a(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return s[63&e>>18]+s[63&e>>12]+s[63&e>>6]+s[63&e]}function r(e,t,n){for(var a=[],r=t,i;r<n;r+=3)i=(e[r]<<16)+(e[r+1]<<8)+e[r+2],a.push(o(i));return a.join("")}n.byteLength=function(e){return 3*e.length/4-a(e)},n.toByteArray=function(e){var t=e.length,n,i,o,r,s;r=a(e),s=new p(3*t/4-r),i=0<r?t-4:t;var l=0;for(n=0;n<i;n+=4)o=d[e.charCodeAt(n)]<<18|d[e.charCodeAt(n+1)]<<12|d[e.charCodeAt(n+2)]<<6|d[e.charCodeAt(n+3)],s[l++]=255&o>>16,s[l++]=255&o>>8,s[l++]=255&o;return 2===r?(o=d[e.charCodeAt(n)]<<2|d[e.charCodeAt(n+1)]>>4,s[l++]=255&o):1===r&&(o=d[e.charCodeAt(n)]<<10|d[e.charCodeAt(n+1)]<<4|d[e.charCodeAt(n+2)]>>2,s[l++]=255&o>>8,s[l++]=255&o),s},n.fromByteArray=function(e){for(var t=e.length,n=t%3,a="",o=[],l=16383,d=0,i=t-n,p;d<i;d+=l)o.push(r(e,d,d+l>i?i:d+l));return 1==n?(p=e[t-1],a+=s[p>>2],a+=s[63&p<<4],a+="=="):2==n&&(p=(e[t-2]<<8)+e[t-1],a+=s[p>>10],a+=s[63&p>>4],a+=s[63&p<<2],a+="="),o.push(a),o.join("")};for(var s=[],d=[],p="undefined"==typeof Uint8Array?Array:Uint8Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,i=l.length;c<i;++c)s[c]=l[c],d[l.charCodeAt(c)]=c;d[45]=62,d[95]=63},{}],14:[function(){},{}],15:[function(e,t,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],16:[function(e,t){(function(n){function a(e,t){if(!(this instanceof a))return new a(e,t);if(this._bsontype="Binary",e instanceof Number?(this.sub_type=e,this.position=0):(this.sub_type=null==t?i:t,this.position=0),null!=e&&!(e instanceof Number)){if("string"!=typeof e)this.buffer=e;else if("undefined"!=typeof o)this.buffer=new o(e);else if("undefined"!=typeof Uint8Array||"[object Array]"==Object.prototype.toString.call(e))this.buffer=r(e);else throw new Error("only String, Buffer, Uint8Array or Array accepted");this.position=e.length}else this.buffer="undefined"==typeof o?"undefined"==typeof Uint8Array?Array(a.BUFFER_SIZE):new Uint8Array(new ArrayBuffer(a.BUFFER_SIZE)):new o(a.BUFFER_SIZE),this.position=0}if("undefined"!=typeof n)var o=e("buffer").Buffer;a.prototype.put=function(e){if(null!=e.length&&"number"!=typeof e&&1!=e.length)throw new Error("only accepts single character String, Uint8Array or Array");if("number"!=typeof e&&0>e||255<e)throw new Error("only accepts number in a valid unsigned byte range 0-255");var t=null;if(t="string"==typeof e?e.charCodeAt(0):null==e.length?e:e[0],this.buffer.length>this.position)this.buffer[this.position++]=t;else if("undefined"!=typeof o&&o.isBuffer(this.buffer)){var n=new o(a.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=t}else{var n=null;n="[object Uint8Array]"==Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(a.BUFFER_SIZE+this.buffer.length)):Array(a.BUFFER_SIZE+this.buffer.length);for(var r=0;r<this.buffer.length;r++)n[r]=this.buffer[r];this.buffer=n,this.buffer[this.position++]=t}},a.prototype.write=function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if("undefined"!=typeof o&&o.isBuffer(this.buffer))n=new o(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if("[object Uint8Array]"==Object.prototype.toString.call(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var a=0;a<this.position;a++)n[a]=this.buffer[a]}this.buffer=n}if("undefined"!=typeof o&&o.isBuffer(e)&&o.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if("undefined"!=typeof o&&"string"==typeof e&&o.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if("[object Uint8Array]"==Object.prototype.toString.call(e)||"[object Array]"==Object.prototype.toString.call(e)&&"string"!=typeof e){for(var a=0;a<e.length;a++)this.buffer[t++]=e[a];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var a=0;a<e.length;a++)this.buffer[t++]=e.charCodeAt(a);this.position=t>this.position?t:this.position}},a.prototype.read=function(e,t){if(t=t&&0<t?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var n="undefined"==typeof Uint8Array?Array(t):new Uint8Array(new ArrayBuffer(t)),a=0;a<t;a++)n[a]=this.buffer[e++];return n},a.prototype.value=function(e){if(e=null!=e&&e,e&&"undefined"!=typeof o&&o.isBuffer(this.buffer)&&this.buffer.length==this.position)return this.buffer;if("undefined"!=typeof o&&o.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t="[object Uint8Array]"==Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return s(this.buffer,0,this.position)},a.prototype.length=function(){return this.position},a.prototype.toJSON=function(){return null==this.buffer?"":this.buffer.toString("base64")},a.prototype.toString=function(e){return null==this.buffer?"":this.buffer.slice(0,this.position).toString(e)};var i=0,r=function(e){for(var t="undefined"==typeof Uint8Array?Array(e.length):new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},s=function(e,t,n){for(var a="",o=t;o<n;o++)a+=d(e[o]);return a};a.BUFFER_SIZE=256,a.SUBTYPE_DEFAULT=0,a.SUBTYPE_FUNCTION=1,a.SUBTYPE_BYTE_ARRAY=2,a.SUBTYPE_UUID_OLD=3,a.SUBTYPE_UUID=4,a.SUBTYPE_MD5=5,a.SUBTYPE_USER_DEFINED=128,t.exports=a,t.exports.Binary=a}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{buffer:35}],17:[function(e,t){(function(n){"use strict";var a=e("./float_parser").writeIEEE754,i=e("./float_parser").readIEEE754,o=e("./map"),r=e("./long"),s=e("./double"),l=e("./timestamp"),d=e("./objectid"),p=e("./regexp"),c=e("./symbol"),u=e("./int_32"),m=e("./code"),f=e("./decimal128"),g=e("./min_key"),_=e("./max_key"),y=e("./db_ref"),h=e("./binary"),b=e("./parser/deserializer"),x=e("./parser/serializer"),v=e("./parser/calculate_size"),S=new n(17825792),T=function(){};T.prototype.serialize=function(e,t){t=t||{};var a="boolean"==typeof t.checkKeys&&t.checkKeys,i="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,o="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,r=x(S,e,a,0,0,i,o,[]),s=new n(r);return S.copy(s,0,0,s.length),s},T.prototype.serializeWithBufferAndIndex=function(e,t,n){n=n||{};var a="boolean"==typeof n.checkKeys&&n.checkKeys,i="boolean"==typeof n.serializeFunctions&&n.serializeFunctions,o="boolean"!=typeof n.ignoreUndefined||n.ignoreUndefined,r="number"==typeof n.index?n.index:0,s=x(S,e,a,r||0,0,i,o);return S.copy(t,r,0,s),s-1},T.prototype.deserialize=function(e,t){return b(e,t)},T.prototype.calculateObjectSize=function(e,t){t=t||{};var n=!("boolean"!=typeof t.serializeFunctions)&&t.serializeFunctions,a="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return v(e,n,a)},T.prototype.deserializeStream=function(e,t,n,a,o,r){r=null==r?{}:r;for(var s=t,l=0,i;l<n;l++)i=e[s]|e[s+1]<<8|e[s+2]<<16|e[s+3]<<24,r.index=s,a[o+l]=this.deserialize(e,r),s+=i;return s},T.BSON_INT32_MAX=2147483647,T.BSON_INT32_MIN=-2147483648,T.BSON_INT64_MAX=9223372036854776000,T.BSON_INT64_MIN=-9223372036854776000,T.JS_INT_MAX=9007199254740992,T.JS_INT_MIN=-9007199254740992;var k=r.fromNumber(9007199254740992),E=r.fromNumber(-9007199254740992);T.BSON_DATA_NUMBER=1,T.BSON_DATA_STRING=2,T.BSON_DATA_OBJECT=3,T.BSON_DATA_ARRAY=4,T.BSON_DATA_BINARY=5,T.BSON_DATA_OID=7,T.BSON_DATA_BOOLEAN=8,T.BSON_DATA_DATE=9,T.BSON_DATA_NULL=10,T.BSON_DATA_REGEXP=11,T.BSON_DATA_CODE=13,T.BSON_DATA_SYMBOL=14,T.BSON_DATA_CODE_W_SCOPE=15,T.BSON_DATA_INT=16,T.BSON_DATA_TIMESTAMP=17,T.BSON_DATA_LONG=18,T.BSON_DATA_MIN_KEY=255,T.BSON_DATA_MAX_KEY=127,T.BSON_BINARY_SUBTYPE_DEFAULT=0,T.BSON_BINARY_SUBTYPE_FUNCTION=1,T.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,T.BSON_BINARY_SUBTYPE_UUID=3,T.BSON_BINARY_SUBTYPE_MD5=4,T.BSON_BINARY_SUBTYPE_USER_DEFINED=128,t.exports=T,t.exports.Code=m,t.exports.Map=o,t.exports.Symbol=c,t.exports.BSON=T,t.exports.DBRef=y,t.exports.Binary=h,t.exports.ObjectID=d,t.exports.Long=r,t.exports.Timestamp=l,t.exports.Double=s,t.exports.Int32=u,t.exports.MinKey=g,t.exports.MaxKey=_,t.exports.BSONRegExp=p,t.exports.Decimal128=f}).call(this,e("buffer").Buffer)},{"./binary":16,"./code":18,"./db_ref":19,"./decimal128":20,"./double":21,"./float_parser":22,"./int_32":23,"./long":24,"./map":25,"./max_key":26,"./min_key":27,"./objectid":28,"./parser/calculate_size":29,"./parser/deserializer":30,"./parser/serializer":31,"./regexp":32,"./symbol":33,"./timestamp":34,buffer:35}],18:[function(e,t){var n=function e(t,n){return this instanceof e?void(this._bsontype="Code",this.code=t,this.scope=n):new e(t,n)};n.prototype.toJSON=function(){return{scope:this.scope,code:this.code}},t.exports=n,t.exports.Code=n},{}],19:[function(e,t){function n(e,t,a){return this instanceof n?void(this._bsontype="DBRef",this.namespace=e,this.oid=t,this.db=a):new n(e,t,a)}n.prototype.toJSON=function(){return{$ref:this.namespace,$id:this.oid,$db:null==this.db?"":this.db}},t.exports=n,t.exports.DBRef=n},{}],20:[function(e,t){(function(n){"use strict";var a=e("./long"),o=/^(\+|\-)?(\d+|(\d*\.\d*))?(E|e)?([\-\+])?(\d+)?$/,r=/^(\+|\-)?(Infinity|inf)$/i,s=/^(\+|\-)?NaN$/i,i=6111,l=-6176,d=6176,p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,124],c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,248],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,120],m=/^([\-\+])?(\d+)?$/,f=function(e){return!isNaN(parseInt(e,10))},g=function(e){var t=a.fromNumber(1000000000),n=a.fromNumber(0),o=0;if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:n};for(var o=0;3>=o;o++)n=n.shiftLeft(32),n=n.add(new a(e.parts[o],0)),e.parts[o]=n.div(t).low_,n=n.modulo(t);return{quotient:e,rem:n}},_=function(e,t){if(!e&&!t)return{high:a.fromNumber(0),low:a.fromNumber(0)};var n=e.shiftRightUnsigned(32),i=new a(e.getLowBits(),0),o=t.shiftRightUnsigned(32),r=new a(t.getLowBits(),0),s=n.multiply(o),l=n.multiply(r),d=i.multiply(o),p=i.multiply(r);return s=s.add(l.shiftRightUnsigned(32)),l=new a(l.getLowBits(),0).add(d).add(p.shiftRightUnsigned(32)),s=s.add(l.shiftRightUnsigned(32)),p=l.shiftLeft(32).add(new a(p.getLowBits(),0)),{high:s,low:p}},y=function(e,t){var n=e.high_>>>0,a=t.high_>>>0;if(n<a)return!0;if(n==a){var i=e.low_>>>0,o=t.low_>>>0;if(i<o)return!0}return!1},h=function(e){this._bsontype="Decimal128",this.bytes=e};h.fromString=function(e){var t=!1,g=!1,b=!1,x=0,v=0,S=0,T=0,k=0,E=[0],N=0,A=0,C=0,w=0,O=0,D=0,P=[0,0],R=[0,0],I=0,M=0;e=e.trim();var F=e.match(o),B=e.match(r),z=e.match(s);if(!F&&!B&&!z||0==e.length)throw new Error(""+e+" not a valid Decimal128 string");if(F&&F[4]&&void 0===F[2])throw new Error(""+e+" not a valid Decimal128 string");if(("+"==e[M]||"-"==e[M])&&(t="-"==e[M++]),!f(e[M])&&"."!=e[M]){if("i"==e[M]||"I"==e[M])return new h(new n(t?c:u));if("N"==e[M])return new h(new n(p))}for(;f(e[M])||"."==e[M];){if("."==e[M]){if(g)return new h(new n(p));g=!0,++M;continue}34>N&&("0"!=e[M]||b)&&(!b&&(k=v),b=!0,E[A++]=parseInt(e[M],10),++N),b&&++S,g&&++T,++v,++M}if(g&&!v)throw new Error(""+e+" not a valid Decimal128 string");if("e"==e[M]||"E"==e[M]){var j=e.substr(++M).match(m);if(!j||!j[2])return new h(new n(p));O=parseInt(j[0],10),M+=j[0].length}if(e[M])return new h(new n(p));if(C=0,!N)C=0,w=0,E[0]=0,S=1,N=1,x=0;else if(w=N-1,x=S,0!=O&&1!=x)for(;"0"==e[k+x-1];)--x;for(O<=T&&16384<T-O?O=l:O-=T;O>i;){if(++w,w-C>34){var U=E.join("");if(U.match(/^0+$/)){O=i;break}else return new h(new n(t?c:u))}--O}for(;O<l||N<S;){if(0==w){O=l,x=0;break}if(N<S?--S:--w,O<i)++O;else{var U=E.join("");if(U.match(/^0+$/)){O=i;break}else return new h(new n(t?c:u))}}if(w-C+1<x&&"0"!=e[x]){var $=v;g&&O==l&&(++k,++$);var W=parseInt(e[k+w+1],10),H=0;if(5<=W&&(H=1,5==W)){H=1==E[w]%2;for(var D=k+w+2;D<$;D++)if(parseInt(e[D],10)){H=1;break}}if(H)for(var q=w;0<=q&&!!(9<++E[q]);q--)if(E[q]=0,0==q)if(O<i)++O,E[q]=1;else return new h(new n(t?c:u))}if(P=a.fromNumber(0),R=a.fromNumber(0),0==x)P=a.fromNumber(0),R=a.fromNumber(0);else if(17>w-C){var q=C;for(R=a.fromNumber(E[q++]),P=new a(0,0);q<=w;q++)R=R.multiply(a.fromNumber(10)),R=R.add(a.fromNumber(E[q]))}else{var q=C;for(P=a.fromNumber(E[q++]);q<=w-17;q++)P=P.multiply(a.fromNumber(10)),P=P.add(a.fromNumber(E[q]));for(R=a.fromNumber(E[q++]);q<=w;q++)R=R.multiply(a.fromNumber(10)),R=R.add(a.fromNumber(E[q]))}var Y=_(P,a.fromString("100000000000000000"));Y.low=Y.low.add(R),y(Y.low,R)&&(Y.high=Y.high.add(a.fromNumber(1)));var I=O+d,V={low:a.fromNumber(0),high:a.fromNumber(0)};Y.high.shiftRightUnsigned(49).and(a.fromNumber(1)).equals(a.fromNumber)?(V.high=V.high.or(a.fromNumber(3).shiftLeft(61)),V.high=V.high.or(a.fromNumber(I).and(a.fromNumber(16383).shiftLeft(47))),V.high=V.high.or(Y.high.and(a.fromNumber(0x7fffffffffff)))):(V.high=V.high.or(a.fromNumber(16383&I).shiftLeft(49)),V.high=V.high.or(Y.high.and(a.fromNumber(562949953421311)))),V.low=Y.low,t&&(V.high=V.high.or(a.fromString("9223372036854775808")));var G=new n(16),M=0;return G[M++]=255&V.low.low_,G[M++]=255&V.low.low_>>8,G[M++]=255&V.low.low_>>16,G[M++]=255&V.low.low_>>24,G[M++]=255&V.low.high_,G[M++]=255&V.low.high_>>8,G[M++]=255&V.low.high_>>16,G[M++]=255&V.low.high_>>24,G[M++]=255&V.high.low_,G[M++]=255&V.high.low_>>8,G[M++]=255&V.high.low_>>16,G[M++]=255&V.high.low_>>24,G[M++]=255&V.high.high_,G[M++]=255&V.high.high_>>8,G[M++]=255&V.high.high_>>16,G[M++]=255&V.high.high_>>24,new h(G)};var b=16383,d=6176;h.prototype.toString=function(){for(var e=0,t=Array(36),n=0,i,o,r,s,l,p;n<t.length;n++)t[n]=0;var c=0,u=!1,m={parts:[,,,,]},f=[],c=0,_=this.bytes,y,h,x,n,v,S;s=_[c++]|_[c++]<<8|_[c++]<<16|_[c++]<<24,r=_[c++]|_[c++]<<8|_[c++]<<16|_[c++]<<24,o=_[c++]|_[c++]<<8|_[c++]<<16|_[c++]<<24,i=_[c++]|_[c++]<<8|_[c++]<<16|_[c++]<<24;var c=0,T={low:new a(s,r),high:new a(o,i)};if(T.high.lessThan(a.ZERO)&&f.push("-"),l=i>>26&31,3==l>>3){if(l==30)return f.join("")+"Infinity";if(l==31)return"NaN";p=i>>15&b,x=8+(1&i>>14)}else x=7&i>>14,p=i>>17&b;if(y=p-d,m.parts[0]=(16383&i)+((15&x)<<14),m.parts[1]=o,m.parts[2]=r,m.parts[3]=s,0==m.parts[0]&&0==m.parts[1]&&0==m.parts[2]&&0==m.parts[3])u=!0;else for(var S=3;0<=S;S--){var k=0,A=g(m);if(m=A.quotient,k=A.rem.low_,k)for(var v=8;0<=v;v--)t[9*S+v]=k%10,k=E(k/10)}if(u)e=1,t[c]=0;else{e=36;for(var n=0;!t[c];)n++,--e,++c}if(h=e-1+y,34<=h||-7>=h||0<y){f.push(t[c++]),--e,e&&f.push(".");for(var n=0;n<e;n++)f.push(t[c++]);f.push("E"),0<h?f.push("+"+h):f.push(h)}else if(0<=y)for(var n=0;n<e;n++)f.push(t[c++]);else{var C=e+y;if(0<C)for(var n=0;n<C;n++)f.push(t[c++]);else f.push("0");for(f.push(".");0>C++;)f.push("0");for(var n=0;n<e-N(C-1,0);n++)f.push(t[c++])}return f.join("")},h.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.exports=h,t.exports.Decimal128=h}).call(this,e("buffer").Buffer)},{"./long":24,buffer:35}],21:[function(e,t){function n(e){return this instanceof n?void(this._bsontype="Double",this.value=e):new n(e)}n.prototype.valueOf=function(){return this.value},n.prototype.toJSON=function(){return this.value},t.exports=n,t.exports.Double=n},{}],22:[function(e,t,n){n.readIEEE754=function(t,n,a,o,r){var l="big"===a,p=8*r-o-1,c=(1<<p)-1,u=c>>1,f=-7,_=l?0:r-1,i=l?1:-1,d=t[n+_],s,e;for(_+=i,s=d&(1<<-f)-1,d>>=-f,f+=p;0<f;s=256*s+t[n+_],_+=i,f-=8);for(e=s&(1<<-f)-1,s>>=-f,f+=o;0<f;e=256*e+t[n+_],_+=i,f-=8);if(0===s)s=1-u;else{if(s===c)return e?NaN:(d?-1:1)*Infinity;e+=g(2,o),s-=u}return(d?-1:1)*e*g(2,s-o)},n.writeIEEE754=function(t,n,a,o,l,p){var u="big"===o,_=8*p-l-1,y=(1<<_)-1,h=y>>1,b=23===l?5.960464477539063e-8-6.617444900424222e-24:0,x=u?p-1:0,i=u?-1:1,d=0>n||0===n&&0>1/n?1:0,s,v,m;for(n=T(n),isNaN(n)||n===Infinity?(v=isNaN(n)?1:0,s=y):(s=E(f(n)/r),1>n*(m=g(2,-s))&&(s--,m*=2),n+=1<=s+h?b/m:b*g(2,1-h),2<=n*m&&(s++,m/=2),s+h>=y?(v=0,s=y):1<=s+h?(v=(n*m-1)*g(2,l),s+=h):(v=n*g(2,h-1)*g(2,l),s=0));8<=l;t[a+x]=255&v,x+=i,v/=256,l-=8);for(s=s<<l|v,_+=l;0<_;t[a+x]=255&s,x+=i,s/=256,_-=8);t[a+x-i]|=128*d}},{}],23:[function(e,t){var n=function(e){return this instanceof n?void(this._bsontype="Int32",this.value=e):new n(e)};n.prototype.valueOf=function(){return this.value},n.prototype.toJSON=function(){return this.value},t.exports=n,t.exports.Int32=n},{}],24:[function(e,t){//     http://www.apache.org/licenses/LICENSE-2.0
function n(e,t){return this instanceof n?void(this._bsontype="Long",this.low_=0|e,this.high_=0|t):new n(e,t)}n.prototype.toInt=function(){return this.low_},n.prototype.toNumber=function(){return this.high_*n.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},n.prototype.toJSON=function(){return this.toString()},n.prototype.toString=function(e){var t=e||10;if(2>t||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(n.MIN_VALUE)){var a=n.fromNumber(t),i=this.div(a),o=i.multiply(a).subtract(this);return i.toString(t)+o.toInt().toString(t)}return"-"+this.negate().toString(t)}for(var r=n.fromNumber(g(t,6)),o=this,s="";;){var l=o.div(r),d=o.subtract(l.multiply(r)).toInt(),p=d.toString(t);if(o=l,o.isZero())return p+s;for(;6>p.length;)p="0"+p;s=""+p+s}},n.prototype.getHighBits=function(){return this.high_},n.prototype.getLowBits=function(){return this.low_},n.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:n.TWO_PWR_32_DBL_+this.low_},n.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(n.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0==this.high_?this.low_:this.high_,t=31;0<t&&0==(e&1<<t);t--);return 0==this.high_?t+1:t+33},n.prototype.isZero=function(){return 0==this.high_&&0==this.low_},n.prototype.isNegative=function(){return 0>this.high_},n.prototype.isOdd=function(){return 1==(1&this.low_)},n.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},n.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},n.prototype.lessThan=function(e){return 0>this.compare(e)},n.prototype.lessThanOrEqual=function(e){return 0>=this.compare(e)},n.prototype.greaterThan=function(e){return 0<this.compare(e)},n.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},n.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.subtract(e).isNegative()?-1:1},n.prototype.negate=function(){return this.equals(n.MIN_VALUE)?n.MIN_VALUE:this.not().add(n.ONE)},n.prototype.add=function(e){var t=this.high_>>>16,a=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,r=e.high_>>>16,s=65535&e.high_,l=e.low_>>>16,d=65535&e.low_,p=0,c=0,u=0,m=0;return m+=o+d,u+=m>>>16,m&=65535,u+=i+l,c+=u>>>16,u&=65535,c+=a+s,p+=c>>>16,c&=65535,p+=t+r,p&=65535,n.fromBits(u<<16|m,p<<16|c)},n.prototype.subtract=function(e){return this.add(e.negate())},n.prototype.multiply=function(e){if(this.isZero())return n.ZERO;if(e.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE))return e.isOdd()?n.MIN_VALUE:n.ZERO;if(e.equals(n.MIN_VALUE))return this.isOdd()?n.MIN_VALUE:n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(n.TWO_PWR_24_)&&e.lessThan(n.TWO_PWR_24_))return n.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,a=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,r=e.high_>>>16,s=65535&e.high_,l=e.low_>>>16,d=65535&e.low_,p=0,c=0,u=0,m=0;return m+=o*d,u+=m>>>16,m&=65535,u+=i*d,c+=u>>>16,u&=65535,u+=o*l,c+=u>>>16,u&=65535,c+=a*d,p+=c>>>16,c&=65535,c+=i*l,p+=c>>>16,c&=65535,c+=o*s,p+=c>>>16,c&=65535,p+=t*d+a*l+i*s+o*r,p&=65535,n.fromBits(u<<16|m,p<<16|c)},n.prototype.div=function(e){if(e.isZero())throw Error("division by zero");else if(this.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE)){if(e.equals(n.ONE)||e.equals(n.NEG_ONE))return n.MIN_VALUE;if(e.equals(n.MIN_VALUE))return n.ONE;var t=this.shiftRight(1),a=t.div(e).shiftLeft(1);if(a.equals(n.ZERO))return e.isNegative()?n.ONE:n.NEG_ONE;var i=this.subtract(e.multiply(a)),o=a.add(i.div(e));return o}if(e.equals(n.MIN_VALUE))return n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(var s=n.ZERO,i=this;i.greaterThanOrEqual(e);){for(var a=N(1,E(i.toNumber()/e.toNumber())),l=p(f(a)/r),d=48>=l?1:g(2,l-48),c=n.fromNumber(a),u=c.multiply(e);u.isNegative()||u.greaterThan(i);)a-=d,c=n.fromNumber(a),u=c.multiply(e);c.isZero()&&(c=n.ONE),s=s.add(c),i=i.subtract(u)}return s},n.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},n.prototype.not=function(){return n.fromBits(~this.low_,~this.high_)},n.prototype.and=function(e){return n.fromBits(this.low_&e.low_,this.high_&e.high_)},n.prototype.or=function(e){return n.fromBits(this.low_|e.low_,this.high_|e.high_)},n.prototype.xor=function(e){return n.fromBits(this.low_^e.low_,this.high_^e.high_)},n.prototype.shiftLeft=function(e){if(e&=63,0==e)return this;var t=this.low_;if(32>e){var a=this.high_;return n.fromBits(t<<e,a<<e|t>>>32-e)}return n.fromBits(0,t<<e-32)},n.prototype.shiftRight=function(e){if(e&=63,0==e)return this;var t=this.high_;if(32>e){var a=this.low_;return n.fromBits(a>>>e|t<<32-e,t>>e)}return n.fromBits(t>>e-32,0<=t?0:-1)},n.prototype.shiftRightUnsigned=function(e){if(e&=63,0==e)return this;var t=this.high_;if(32>e){var a=this.low_;return n.fromBits(a>>>e|t<<32-e,t>>>e)}return 32==e?n.fromBits(t,0):n.fromBits(t>>>e-32,0)},n.fromInt=function(e){if(-128<=e&&128>e){var t=n.INT_CACHE_[e];if(t)return t}var a=new n(0|e,0>e?-1:0);return-128<=e&&128>e&&(n.INT_CACHE_[e]=a),a},n.fromNumber=function(e){return isNaN(e)||!isFinite(e)?n.ZERO:e<=-n.TWO_PWR_63_DBL_?n.MIN_VALUE:e+1>=n.TWO_PWR_63_DBL_?n.MAX_VALUE:0>e?n.fromNumber(-e).negate():new n(0|e%n.TWO_PWR_32_DBL_,0|e/n.TWO_PWR_32_DBL_)},n.fromBits=function(e,t){return new n(e,t)},n.fromString=function(e,t){if(0==e.length)throw Error("number format error: empty string");var a=t||10;if(2>a||36<a)throw Error("radix out of range: "+a);if("-"==e.charAt(0))return n.fromString(e.substring(1),a).negate();if(0<=e.indexOf("-"))throw Error("number format error: interior \"-\" character: "+e);for(var o=n.fromNumber(g(a,8)),r=n.ZERO,s=0;s<e.length;s+=8){var i=S(8,e.length-s),l=parseInt(e.substring(s,s+i),a);if(8>i){var d=n.fromNumber(g(a,i));r=r.multiply(d).add(n.fromNumber(l))}else r=r.multiply(o),r=r.add(n.fromNumber(l))}return r},n.INT_CACHE_={},n.TWO_PWR_16_DBL_=65536,n.TWO_PWR_24_DBL_=16777216,n.TWO_PWR_32_DBL_=n.TWO_PWR_16_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_31_DBL_=n.TWO_PWR_32_DBL_/2,n.TWO_PWR_48_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_64_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_32_DBL_,n.TWO_PWR_63_DBL_=n.TWO_PWR_64_DBL_/2,n.ZERO=n.fromInt(0),n.ONE=n.fromInt(1),n.NEG_ONE=n.fromInt(-1),n.MAX_VALUE=n.fromBits(-1,2147483647),n.MIN_VALUE=n.fromBits(0,-2147483648),n.TWO_PWR_24_=n.fromInt(16777216),t.exports=n,t.exports.Long=n},{}],25:[function(e,t){(function(e){"use strict";if("undefined"!=typeof e.Map)t.exports=e.Map,t.exports.Map=e.Map;else{var n=function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var n=e[t],a=n[0],i=n[1];this._keys.push(a),this._values[a]={v:i,i:this._keys.length-1}}};n.prototype.clear=function(){this._keys=[],this._values={}},n.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},n.prototype.entries=function(){var e=this,t=0;return{next:function(){var n=e._keys[t++];return{value:n===void 0?void 0:[n,e._values[n].v],done:!(n!==void 0)}}}},n.prototype.forEach=function(e,t){t=t||this;for(var n=0,a;n<this._keys.length;n++)a=this._keys[n],e.call(t,this._values[a].v,a,t)},n.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},n.prototype.has=function(e){return null!=this._values[e]},n.prototype.keys=function(){var e=this,t=0;return{next:function(){var n=e._keys[t++];return{value:n===void 0?void 0:n,done:!(n!==void 0)}}}},n.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},n.prototype.values=function(){var e=this,t=0;return{next:function(){var n=e._keys[t++];return{value:n===void 0?void 0:e._values[n].v,done:!(n!==void 0)}}}},Object.defineProperty(n.prototype,"size",{enumerable:!0,get:function(){return this._keys.length}}),t.exports=n,t.exports.Map=n}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],26:[function(e,t){function n(){return this instanceof n?void(this._bsontype="MaxKey"):new n}t.exports=n,t.exports.MaxKey=n},{}],27:[function(e,t){function n(){return this instanceof n?void(this._bsontype="MinKey"):new n}t.exports=n,t.exports.MinKey=n},{}],28:[function(e,t){(function(e,a){var n=parseInt(16777215*Math.random(),10),o=/^[0-9a-fA-F]{24}$/,r=!1;try{a&&a.from&&(r=!0)}catch(e){}for(var s=function e(t){if(t instanceof e)return t;if(!(this instanceof e))return new e(t);if(this._bsontype="ObjectID",null==t||"number"==typeof t)return this.id=this.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var n=e.isValid(t);if(!n&&null!=t)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");else{if(n&&"string"==typeof t&&24==t.length&&r)return new e(new a(t,"hex"));if(n&&"string"==typeof t&&24==t.length)return e.createFromHexString(t);if(null!=t&&12===t.length)this.id=t;else{if(null!=t&&t.toHexString)return t;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}}e.cacheHexString&&(this.__id=this.toString("hex"))},l=[],d=0;256>d;d++)l[d]=(15>=d?"0":"")+d.toString(16);s.prototype.toHexString=function(){if(s.cacheHexString&&this.__id)return this.__id;var e="";if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof c)return e=u(this.id),s.cacheHexString&&(this.__id=e),e;for(var t=0;t<this.id.length;t++)e+=l[this.id.charCodeAt(t)];return s.cacheHexString&&(this.__id=e),e},s.prototype.get_inc=function(){return s.index=(s.index+1)%16777215},s.prototype.getInc=function(){return this.get_inc()},s.prototype.generate=function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var i=("undefined"==typeof e?E(1e5*Math.random()):e.pid)%65535,o=this.get_inc(),r=new a(12);return r[3]=255&t,r[2]=255&t>>8,r[1]=255&t>>16,r[0]=255&t>>24,r[6]=255&n,r[5]=255&n>>8,r[4]=255&n>>16,r[8]=255&i,r[7]=255&i>>8,r[11]=255&o,r[10]=255&o>>8,r[9]=255&o>>16,r},s.prototype.toString=function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()},s.prototype.inspect=s.prototype.toString,s.prototype.toJSON=function(){return this.toHexString()},s.prototype.equals=function(e){return e instanceof s?this.toString()==e.toString():"string"==typeof e&&s.isValid(e)&&12==e.length&&this.id instanceof c?e===this.id.toString("binary"):"string"==typeof e&&s.isValid(e)&&24==e.length?e.toLowerCase()===this.toHexString():"string"==typeof e&&s.isValid(e)&&12==e.length?e===this.id:null!=e&&(e instanceof s||e.toHexString)&&e.toHexString()===this.toHexString()},s.prototype.getTimestamp=function(){var e=new Date,t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return e.setTime(1e3*E(t)),e},s.index=~~(16777215*Math.random()),s.createPk=function(){return new s},s.createFromTime=function(e){var t=new a([0,0,0,0,0,0,0,0,0,0,0,0]);return t[3]=255&e,t[2]=255&e>>8,t[1]=255&e>>16,t[0]=255&e>>24,new s(t)};for(var p=[],d=0;10>d;)p[48+d]=d++;for(;16>d;)p[55+d]=p[87+d]=d++;var c=a,u=function(e){return e.toString("hex")};s.createFromHexString=function(e){if("undefined"==typeof e||null!=e&&24!=e.length)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(r)return new s(new a(e,"hex"));for(var t=new c(12),o=0,n=0;24>n;)t[o++]=p[e.charCodeAt(n++)]<<4|p[e.charCodeAt(n++)];return new s(t)},s.isValid=function(e){return null!=e&&(!("number"!=typeof e)||("string"==typeof e?12==e.length||24==e.length&&o.test(e):!!(e instanceof s)||!!(e instanceof c)||!!e.toHexString&&(12==e.id.length||24==e.id.length&&o.test(e.id))))},Object.defineProperty(s.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=255&e>>8,this.id[1]=255&e>>16,this.id[0]=255&e>>24}}),t.exports=s,t.exports.ObjectID=s,t.exports.ObjectId=s}).call(this,e("_process"),e("buffer").Buffer)},{_process:147,buffer:35}],29:[function(e,t){(function(n){"use strict";function a(e,t,a,i,o){switch(t&&t.toBSON&&(t=t.toBSON()),typeof t){case"string":return 1+n.byteLength(e,"utf8")+1+4+n.byteLength(t,"utf8")+1;case"number":return E(t)===t&&t>=x.JS_INT_MIN&&t<=x.JS_INT_MAX?t>=x.BSON_INT32_MIN&&t<=x.BSON_INT32_MAX?(null==e?0:n.byteLength(e,"utf8")+1)+5:(null==e?0:n.byteLength(e,"utf8")+1)+9:(null==e?0:n.byteLength(e,"utf8")+1)+9;case"undefined":return i||!o?(null==e?0:n.byteLength(e,"utf8")+1)+1:0;case"boolean":return(null==e?0:n.byteLength(e,"utf8")+1)+2;case"object":if(null==t||t instanceof f||t instanceof g||"MinKey"==t._bsontype||"MaxKey"==t._bsontype)return(null==e?0:n.byteLength(e,"utf8")+1)+1;if(t instanceof d||"ObjectID"==t._bsontype)return(null==e?0:n.byteLength(e,"utf8")+1)+13;if(t instanceof Date||h(t))return(null==e?0:n.byteLength(e,"utf8")+1)+9;if("undefined"!=typeof n&&n.isBuffer(t))return(null==e?0:n.byteLength(e,"utf8")+1)+6+t.length;if(t instanceof r||t instanceof s||t instanceof l||"Long"==t._bsontype||"Double"==t._bsontype||"Timestamp"==t._bsontype)return(null==e?0:n.byteLength(e,"utf8")+1)+9;if(t instanceof m||"Decimal128"==t._bsontype)return(null==e?0:n.byteLength(e,"utf8")+1)+17;if(t instanceof u||"Code"==t._bsontype)return null!=t.scope&&0<Object.keys(t.scope).length?(null==e?0:n.byteLength(e,"utf8")+1)+1+4+4+n.byteLength(t.code.toString(),"utf8")+1+b(t.scope,a,o):(null==e?0:n.byteLength(e,"utf8")+1)+1+4+n.byteLength(t.code.toString(),"utf8")+1;if(t instanceof y||"Binary"==t._bsontype)return t.sub_type==y.SUBTYPE_BYTE_ARRAY?(null==e?0:n.byteLength(e,"utf8")+1)+(t.position+1+4+1+4):(null==e?0:n.byteLength(e,"utf8")+1)+(t.position+1+4+1);if(t instanceof p||"Symbol"==t._bsontype)return(null==e?0:n.byteLength(e,"utf8")+1)+n.byteLength(t.value,"utf8")+4+1+1;if(t instanceof _||"DBRef"==t._bsontype){var v={$ref:t.namespace,$id:t.oid};return null!=t.db&&(v.$db=t.db),(null==e?0:n.byteLength(e,"utf8")+1)+1+b(v,a,o)}return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)?(null==e?0:n.byteLength(e,"utf8")+1)+1+n.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:t instanceof c||"BSONRegExp"==t._bsontype?(null==e?0:n.byteLength(e,"utf8")+1)+1+n.byteLength(t.pattern,"utf8")+1+n.byteLength(t.options,"utf8")+1:(null==e?0:n.byteLength(e,"utf8")+1)+b(t,a,o)+1;case"function":if(t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)||"[object RegExp]"==String.call(t))return(null==e?0:n.byteLength(e,"utf8")+1)+1+n.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(a&&null!=t.scope&&0<Object.keys(t.scope).length)return(null==e?0:n.byteLength(e,"utf8")+1)+1+4+4+n.byteLength(t.toString(),"utf8")+1+b(t.scope,a,o);if(a)return(null==e?0:n.byteLength(e,"utf8")+1)+1+4+n.byteLength(t.toString(),"utf8")+1;}return 0}var i=e("../float_parser").writeIEEE754,o=e("../float_parser").readIEEE754,r=e("../long").Long,s=e("../double").Double,l=e("../timestamp").Timestamp,d=e("../objectid").ObjectID,p=e("../symbol").Symbol,c=e("../regexp").BSONRegExp,u=e("../code").Code,m=e("../decimal128"),f=e("../min_key").MinKey,g=e("../max_key").MaxKey,_=e("../db_ref").DBRef,y=e("../binary").Binary,h=function(e){return"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)},b=function(e,t,n){var o=5;if(Array.isArray(e))for(var r=0;r<e.length;r++)o+=a(r.toString(),e[r],t,!0,n);else for(var i in e.toBSON&&(e=e.toBSON()),e)o+=a(i,e[i],t,!1,n);return o},x={};x.BSON_INT32_MAX=2147483647,x.BSON_INT32_MIN=-2147483648,x.JS_INT_MAX=9007199254740992,x.JS_INT_MIN=-9007199254740992,t.exports=b}).call(this,e("buffer").Buffer)},{"../binary":16,"../code":18,"../db_ref":19,"../decimal128":20,"../double":21,"../float_parser":22,"../long":24,"../max_key":26,"../min_key":27,"../objectid":28,"../regexp":32,"../symbol":33,"../timestamp":34,buffer:35}],30:[function(e,t,n){(function(n){"use strict";var a=e("../float_parser").readIEEE754,i=e("util").format,o=e("../long").Long,r=e("../double").Double,s=e("../timestamp").Timestamp,l=e("../objectid").ObjectID,d=e("../symbol").Symbol,p=e("../code").Code,c=e("../min_key").MinKey,u=e("../max_key").MaxKey,m=e("../decimal128"),f=e("../int_32"),g=e("../db_ref").DBRef,_=e("../regexp").BSONRegExp,y=e("../binary").Binary,h=function(e,t,n){t=null==t?{}:t;var a=t&&t.index?t.index:0,i=e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]<<24;if(5>i||e.length<i||i+a>e.length)throw new Error("corrupt bson message");if(0!=e[a+i-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return b(e,a,t,n)},b=function(e,t,a,h){var N=null!=a.evalFunctions&&a.evalFunctions,A=null!=a.cacheFunctions&&a.cacheFunctions,C=null!=a.cacheFunctionsCrc32&&a.cacheFunctionsCrc32,w=null==a.fieldsAsRaw?null:a.fieldsAsRaw,O=null!=a.raw&&a.raw,D="boolean"==typeof a.bsonRegExp&&a.bsonRegExp,P=null!=a.promoteBuffers&&a.promoteBuffers,R=null==a.promoteLongs||a.promoteLongs,I=null==a.promoteValues||a.promoteValues,M=t;if(5>e.length)throw new Error("corrupt bson message < 5 bytes long");var F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(5>F||F>e.length)throw new Error("corrupt bson message");for(var B=h?[]:{},z=0,j;j=e[t++],0!=j;){for(var U=t;0!==e[U]&&U<e.length;)U++;if(U>=e.length)throw new Error("Bad BSON Document: illegal CString");var i=h?z++:e.toString("utf8",t,U);if(t=U+1,j==S.BSON_DATA_STRING){var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(0>=$||$>e.length-t||0!=e[t+$-1])throw new Error("bad string length in bson");B[i]=e.toString("utf8",t,t+$-1),t+=$}else if(j==S.BSON_DATA_OID){var W=new n(12);e.copy(W,0,t,t+12),B[i]=new l(W),t+=12}else if(j==S.BSON_DATA_INT&&!1==I)B[i]=new f(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(j==S.BSON_DATA_INT)B[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(j==S.BSON_DATA_NUMBER&&!1==I)B[i]=new r(e.readDoubleLE(t)),t+=8;else if(j==S.BSON_DATA_NUMBER)B[i]=e.readDoubleLE(t),t+=8;else if(j==S.BSON_DATA_DATE){var H=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;B[i]=new Date(new o(H,q).toNumber())}else if(j==S.BSON_DATA_BOOLEAN){if(0!=e[t]&&1!=e[t])throw new Error("illegal boolean type value");B[i]=1==e[t++]}else if(j==S.BSON_DATA_OBJECT){var Y=t,V=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(0>=V||V>e.length-t)throw new Error("bad embedded document length in bson");B[i]=O?e.slice(t,t+V):b(e,Y,a,!1),t+=V}else if(j==S.BSON_DATA_ARRAY){var Y=t,V=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,G=a,Z=t+V;if(w&&w[i]){for(var X in G={},a)G[X]=a[X];G.raw=!0}if(B[i]=b(e,Y,G,!0),t+=V,0!=e[t-1])throw new Error("invalid array terminator byte");if(t!=Z)throw new Error("corrupted array bson")}else if(j==S.BSON_DATA_UNDEFINED)B[i]=void 0;else if(j==S.BSON_DATA_NULL)B[i]=null;else if(j==S.BSON_DATA_LONG){var H=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,K=new o(H,q);B[i]=R&&!0==I?K.lessThanOrEqual(k)&&K.greaterThanOrEqual(E)?K.toNumber():K:K}else if(j==S.BSON_DATA_DECIMAL128){var J=new n(16);e.copy(J,0,t,t+16),t+=16;var Q=new m(J);B[i]=Q.toObject?Q.toObject():Q}else if(j==S.BSON_DATA_BINARY){var ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,te=ee,ne=e[t++];if(0>ee)throw new Error("Negative binary type element size found");if(ee>e.length)throw new Error("Binary type size larger than document size");if(null!=e.slice){if(ne==y.SUBTYPE_BYTE_ARRAY){if(ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,0>ee)throw new Error("Negative binary type element size found for subtype 0x02");if(ee>te-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(ee<te-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}B[i]=P&&I?e.slice(t,t+ee):new y(e.slice(t,t+ee),ne)}else{var ae="undefined"==typeof Uint8Array?Array(ee):new Uint8Array(new ArrayBuffer(ee));if(ne==y.SUBTYPE_BYTE_ARRAY){if(ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,0>ee)throw new Error("Negative binary type element size found for subtype 0x02");if(ee>te-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(ee<te-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(var U=0;U<ee;U++)ae[U]=e[t+U];B[i]=P&&I?ae:new y(ae,ne)}t+=ee}else if(j==S.BSON_DATA_REGEXP&&!1==D){for(var U=t;0!==e[U]&&U<e.length;)U++;if(U>=e.length)throw new Error("Bad BSON Document: illegal CString");var ie=e.toString("utf8",t,U);t=U+1;for(var U=t;0!==e[U]&&U<e.length;)U++;if(U>=e.length)throw new Error("Bad BSON Document: illegal CString");var oe=e.toString("utf8",t,U);t=U+1;for(var re=Array(oe.length),U=0;U<oe.length;U++)switch(oe[U]){case"m":re[U]="m";break;case"s":re[U]="g";break;case"i":re[U]="i";}B[i]=new RegExp(ie,re.join(""))}else if(j==S.BSON_DATA_REGEXP&&!0==D){for(var U=t;0!==e[U]&&U<e.length;)U++;if(U>=e.length)throw new Error("Bad BSON Document: illegal CString");var ie=e.toString("utf8",t,U);t=U+1;for(var U=t;0!==e[U]&&U<e.length;)U++;if(U>=e.length)throw new Error("Bad BSON Document: illegal CString");var oe=e.toString("utf8",t,U);t=U+1,B[i]=new _(ie,oe)}else if(j==S.BSON_DATA_SYMBOL){var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(0>=$||$>e.length-t||0!=e[t+$-1])throw new Error("bad string length in bson");B[i]=new d(e.toString("utf8",t,t+$-1)),t+=$}else if(j==S.BSON_DATA_TIMESTAMP){var H=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;B[i]=new s(H,q)}else if(j==S.BSON_DATA_MIN_KEY)B[i]=new c;else if(j==S.BSON_DATA_MAX_KEY)B[i]=new u;else if(j==S.BSON_DATA_CODE){var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(0>=$||$>e.length-t||0!=e[t+$-1])throw new Error("bad string length in bson");var se=e.toString("utf8",t,t+$-1);if(N){var le=null;if(A){var de=C?crc32(se):se;B[i]=x(T,de,se,B)}else B[i]=v(se)}else B[i]=new p(se);t+=$}else if(j==S.BSON_DATA_CODE_W_SCOPE){var pe=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(13>pe)throw new Error("code_w_scope total size shorter minimum expected length");var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(0>=$||$>e.length-t||0!=e[t+$-1])throw new Error("bad string length in bson");var se=e.toString("utf8",t,t+$-1);t+=$;var Y=t,V=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,ce=b(e,Y,a,!1);if(t+=V,pe<8+V+$)throw new Error("code_w_scope total size is to short, truncating scope");if(pe>8+V+$)throw new Error("code_w_scope total size is to long, clips outer document");if(N){var le=null;if(A){var de=C?crc32(se):se;B[i]=x(T,de,se,B)}else B[i]=v(se);B[i].scope=ce}else B[i]=new p(se,ce)}else if(j==S.BSON_DATA_DBPOINTER){var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(0>=$||$>e.length-t||0!=e[t+$-1])throw new Error("bad string length in bson");var ue=e.toString("utf8",t,t+$-1);t+=$;var me=new n(12);e.copy(me,0,t,t+12);var W=new l(me);t+=12;var fe=ue.split("."),ge=fe.shift(),_e=fe.join(".");B[i]=new g(_e,W,ge)}else throw new Error("Detected unknown BSON type "+j.toString(16)+" for fieldname \""+i+"\", are you using the latest BSON parser")}if(F!=t-M){if(h)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}return null!=B.$id&&(B=new g(B.$ref,B.$id,B.$db)),B},x=function(e,t,n,a){var i=null;return null==e[t]&&(eval("value = "+n),e[t]=i),e[t].bind(a)},v=function(e){var t=null;return eval("value = "+e),t},S={},T=S.functionCache={};S.BSON_DATA_NUMBER=1,S.BSON_DATA_STRING=2,S.BSON_DATA_OBJECT=3,S.BSON_DATA_ARRAY=4,S.BSON_DATA_BINARY=5,S.BSON_DATA_UNDEFINED=6,S.BSON_DATA_OID=7,S.BSON_DATA_BOOLEAN=8,S.BSON_DATA_DATE=9,S.BSON_DATA_NULL=10,S.BSON_DATA_REGEXP=11,S.BSON_DATA_DBPOINTER=12,S.BSON_DATA_CODE=13,S.BSON_DATA_SYMBOL=14,S.BSON_DATA_CODE_W_SCOPE=15,S.BSON_DATA_INT=16,S.BSON_DATA_TIMESTAMP=17,S.BSON_DATA_LONG=18,S.BSON_DATA_DECIMAL128=19,S.BSON_DATA_MIN_KEY=255,S.BSON_DATA_MAX_KEY=127,S.BSON_BINARY_SUBTYPE_DEFAULT=0,S.BSON_BINARY_SUBTYPE_FUNCTION=1,S.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,S.BSON_BINARY_SUBTYPE_UUID=3,S.BSON_BINARY_SUBTYPE_MD5=4,S.BSON_BINARY_SUBTYPE_USER_DEFINED=128,S.BSON_INT32_MAX=2147483647,S.BSON_INT32_MIN=-2147483648,S.BSON_INT64_MAX=9223372036854776000,S.BSON_INT64_MIN=-9223372036854776000,S.JS_INT_MAX=9007199254740992,S.JS_INT_MIN=-9007199254740992;var k=o.fromNumber(9007199254740992),E=o.fromNumber(-9007199254740992);t.exports=h}).call(this,e("buffer").Buffer)},{"../binary":16,"../code":18,"../db_ref":19,"../decimal128":20,"../double":21,"../float_parser":22,"../int_32":23,"../long":24,"../max_key":26,"../min_key":27,"../objectid":28,"../regexp":32,"../symbol":33,"../timestamp":34,buffer:35,util:465}],31:[function(e,t){(function(n){"use strict";var a=e("../float_parser").writeIEEE754,i=e("../float_parser").readIEEE754,o=e("../long").Long,r=e("../map"),s=e("../double").Double,l=e("../timestamp").Timestamp,d=e("../objectid").ObjectID,p=e("../symbol").Symbol,c=e("../code").Code,u=e("../regexp").BSONRegExp,m=e("../int_32").Int32,f=e("../min_key").MinKey,g=e("../max_key").MaxKey,_=e("../decimal128"),y=e("../db_ref").DBRef,h=e("../binary").Binary;try{var b=Uint8Array}catch(t){var b=n}var x=/\x00/,v=function(e){return"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)},S=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},T=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_STRING;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a=a+o+1,e[a-1]=0;var r=e.write(n,a+4,"utf8");return e[a+3]=255&r+1>>24,e[a+2]=255&r+1>>16,e[a+1]=255&r+1>>8,e[a]=255&r+1,a=a+4+r,e[a++]=0,a},k=function(e,t,n,i,r){if(!(E(n)===n&&n>=Y.JS_INT_MIN&&n<=Y.JS_INT_MAX)){e[i++]=Y.BSON_DATA_NUMBER;var s=r?e.write(t,i,"ascii"):e.write(t,i,"utf8");i+=s,e[i++]=0,a(e,n,i,"little",52,8),i+=8}else if(n>=Y.BSON_INT32_MIN&&n<=Y.BSON_INT32_MAX){e[i++]=Y.BSON_DATA_INT;var s=r?e.write(t,i,"ascii"):e.write(t,i,"utf8");i+=s,e[i++]=0,e[i++]=255&n,e[i++]=255&n>>8,e[i++]=255&n>>16,e[i++]=255&n>>24}else if(n>=Y.JS_INT_MIN&&n<=Y.JS_INT_MAX){e[i++]=Y.BSON_DATA_NUMBER;var s=r?e.write(t,i,"ascii"):e.write(t,i,"utf8");i+=s,e[i++]=0,a(e,n,i,"little",52,8),i+=8}else{e[i++]=Y.BSON_DATA_LONG;var s=r?e.write(t,i,"ascii"):e.write(t,i,"utf8");i+=s,e[i++]=0;var l=o.fromNumber(n),d=l.getLowBits(),p=l.getHighBits();e[i++]=255&d,e[i++]=255&d>>8,e[i++]=255&d>>16,e[i++]=255&d>>24,e[i++]=255&p,e[i++]=255&p>>8,e[i++]=255&p>>16,e[i++]=255&p>>24}return i},N=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_NULL;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");return a+=o,e[a++]=0,a},A=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_BOOLEAN;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");return a+=o,e[a++]=0,e[a++]=n?1:0,a},C=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_DATE;var r=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=r,e[a++]=0;var s=o.fromNumber(n.getTime()),l=s.getLowBits(),d=s.getHighBits();return e[a++]=255&l,e[a++]=255&l>>8,e[a++]=255&l>>16,e[a++]=255&l>>24,e[a++]=255&d,e[a++]=255&d>>8,e[a++]=255&d>>16,e[a++]=255&d>>24,a},w=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_REGEXP;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");if(a+=o,e[a++]=0,n.source&&null!=n.source.match(x))throw Error("value "+n.source+" must not contain null bytes");return a+=e.write(n.source,a,"utf8"),e[a++]=0,n.global&&(e[a++]=115),n.ignoreCase&&(e[a++]=105),n.multiline&&(e[a++]=109),e[a++]=0,a},O=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_REGEXP;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");if(a+=o,e[a++]=0,null!=n.pattern.match(x))throw Error("pattern "+n.pattern+" must not contain null bytes");return a+=e.write(n.pattern,a,"utf8"),e[a++]=0,a+=e.write(n.options.split("").sort().join(""),a,"utf8"),e[a++]=0,a},D=function(e,t,n,a,i){e[a++]=null===n?Y.BSON_DATA_NULL:n instanceof f?Y.BSON_DATA_MIN_KEY:Y.BSON_DATA_MAX_KEY;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");return a+=o,e[a++]=0,a},P=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_OID;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");if(a+=o,e[a++]=0,"string"==typeof n.id)e.write(n.id,a,"binary");else if(n.id&&n.id.copy)n.id.copy(e,a,0,12);else throw new Error("object ["+JSON.stringify(n)+"] is not a valid ObjectId");return a+12},R=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_BINARY;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=o,e[a++]=0;var r=n.length;return e[a++]=255&r,e[a++]=255&r>>8,e[a++]=255&r>>16,e[a++]=255&r>>24,e[a++]=Y.BSON_BINARY_SUBTYPE_DEFAULT,n.copy(e,a,0,r),a+=r,a},I=function(e,t,n,a,o,r,s,l,d,p){for(var c=0;c<p.length;c++)if(p[c]===n)throw new Error("cyclic dependency detected");p.push(n),e[a++]=Array.isArray(n)?Y.BSON_DATA_ARRAY:Y.BSON_DATA_OBJECT;var i=d?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=i,e[a++]=0;var u=q(e,n,o,a,r+1,s,l,p);p.pop();return u},M=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_DECIMAL128;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");return a+=o,e[a++]=0,n.bytes.copy(e,a,0,16),a+16},F=function(e,t,n,a,i){e[a++]="Long"==n._bsontype?Y.BSON_DATA_LONG:Y.BSON_DATA_TIMESTAMP;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=o,e[a++]=0;var r=n.getLowBits(),s=n.getHighBits();return e[a++]=255&r,e[a++]=255&r>>8,e[a++]=255&r>>16,e[a++]=255&r>>24,e[a++]=255&s,e[a++]=255&s>>8,e[a++]=255&s>>16,e[a++]=255&s>>24,a},B=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_INT;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");return a+=o,e[a++]=0,e[a++]=255&n,e[a++]=255&n>>8,e[a++]=255&n>>16,e[a++]=255&n>>24,a},z=function(e,t,n,i,o){e[i++]=Y.BSON_DATA_NUMBER;var r=o?e.write(t,i,"ascii"):e.write(t,i,"utf8");return i+=r,e[i++]=0,a(e,n,i,"little",52,8),i+=8,i},j=function(e,t,n,a,i,o,r){e[a++]=Y.BSON_DATA_CODE;var s=r?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=s,e[a++]=0;var l=n.toString(),d=e.write(l,a+4,"utf8")+1;return e[a]=255&d,e[a+1]=255&d>>8,e[a+2]=255&d>>16,e[a+3]=255&d>>24,a=a+4+d-1,e[a++]=0,a},U=function(e,t,n,a,i,o,r,s,l){if(n.scope&&"object"==typeof n.scope){e[a++]=Y.BSON_DATA_CODE_W_SCOPE;var d=l?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=d,e[a++]=0;var p=a,c="string"==typeof n.code?n.code:n.code.toString();a+=4;var u=e.write(c,a+4,"utf8")+1;e[a]=255&u,e[a+1]=255&u>>8,e[a+2]=255&u>>16,e[a+3]=255&u>>24,e[a+4+u-1]=0,a=a+u+4;var m=q(e,n.scope,i,a,o+1,r,s);a=m-1;var f=m-p;e[p++]=255&f,e[p++]=255&f>>8,e[p++]=255&f>>16,e[p++]=255&f>>24,e[a++]=0}else{e[a++]=Y.BSON_DATA_CODE;var d=l?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=d,e[a++]=0;var c=n.code.toString(),g=e.write(c,a+4,"utf8")+1;e[a]=255&g,e[a+1]=255&g>>8,e[a+2]=255&g>>16,e[a+3]=255&g>>24,a=a+4+g-1,e[a++]=0}return a},$=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_BINARY;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=o,e[a++]=0;var r=n.value(!0),s=n.position;return n.sub_type==h.SUBTYPE_BYTE_ARRAY&&(s+=4),e[a++]=255&s,e[a++]=255&s>>8,e[a++]=255&s>>16,e[a++]=255&s>>24,e[a++]=n.sub_type,n.sub_type==h.SUBTYPE_BYTE_ARRAY&&(s-=4,e[a++]=255&s,e[a++]=255&s>>8,e[a++]=255&s>>16,e[a++]=255&s>>24),r.copy(e,a,0,n.position),a+=n.position,a},W=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_SYMBOL;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=o,e[a++]=0;var r=e.write(n.value,a+4,"utf8")+1;return e[a]=255&r,e[a+1]=255&r>>8,e[a+2]=255&r>>16,e[a+3]=255&r>>24,a=a+4+r-1,e[a++]=0,a},H=function(e,t,n,a,i,o,r){e[a++]=Y.BSON_DATA_OBJECT;var s=r?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=s,e[a++]=0;var l=a,d;d=null==n.db?q(e,{$ref:n.namespace,$id:n.oid},!1,a,i+1,o):q(e,{$ref:n.namespace,$id:n.oid,$db:n.db},!1,a,i+1,o);var p=d-l;return e[l++]=255&p,e[l++]=255&p>>8,e[l++]=255&p>>16,e[l++]=255&p>>24,d},q=function(e,t,a,o,s,l,d,p){o=o||0,p=p||[],p.push(t);var c=o+4,u=this;if(Array.isArray(t))for(var m=0;m<t.length;m++){var i=""+m,f=t[m];if(f&&f.toBSON){if("function"!=typeof f.toBSON)throw new Error("toBSON is not a function");f=f.toBSON()}var g=typeof f;"string"==g?c=T(e,i,f,c,!0):"number"==g?c=k(e,i,f,c,!0):"boolean"==g?c=A(e,i,f,c,!0):f instanceof Date||v(f)?c=C(e,i,f,c,!0):void 0===f?c=N(e,i,f,c,!0):null===f?c=N(e,i,f,c,!0):"ObjectID"==f._bsontype?c=P(e,i,f,c,!0):n.isBuffer(f)?c=R(e,i,f,c,!0):f instanceof RegExp||S(f)?c=w(e,i,f,c,!0):"object"==g&&null==f._bsontype?c=I(e,i,f,c,a,s,l,d,!0,p):"object"==g&&"Decimal128"==f._bsontype?c=M(e,i,f,c,!0):"Long"==f._bsontype||"Timestamp"==f._bsontype?c=F(e,i,f,c,!0):"Double"==f._bsontype?c=z(e,i,f,c,!0):"function"==typeof f&&l?c=j(e,i,f,c,a,s,l,!0):"Code"==f._bsontype?c=U(e,i,f,c,a,s,l,d,!0):"Binary"==f._bsontype?c=$(e,i,f,c,!0):"Symbol"==f._bsontype?c=W(e,i,f,c,!0):"DBRef"==f._bsontype?c=H(e,i,f,c,s,l,!0):"BSONRegExp"==f._bsontype?c=O(e,i,f,c,!0):"Int32"==f._bsontype?c=B(e,i,f,c,!0):("MinKey"==f._bsontype||"MaxKey"==f._bsontype)&&(c=D(e,i,f,c,!0))}else if(t instanceof r){for(var _=t.entries(),y=!1,h;!y;)if(h=_.next(),y=h.done,!y){var i=h.value[0],f=h.value[1],g=typeof f;if("$db"!=i&&"$ref"!=i&&"$id"!=i){if(null!=i.match(x))throw Error("key "+i+" must not contain null bytes");if(a)if("$"==i[0])throw Error("key "+i+" must not start with '$'");else if(!!~i.indexOf("."))throw Error("key "+i+" must not contain '.'")}"string"==g?c=T(e,i,f,c):"number"==g?c=k(e,i,f,c):"boolean"==g?c=A(e,i,f,c):f instanceof Date||v(f)?c=C(e,i,f,c):void 0===f&&!0==d||(null===f||void 0===f?c=N(e,i,f,c):"ObjectID"==f._bsontype?c=P(e,i,f,c):n.isBuffer(f)?c=R(e,i,f,c):f instanceof RegExp||S(f)?c=w(e,i,f,c):"object"==g&&null==f._bsontype?c=I(e,i,f,c,a,s,l,d,!1,p):"object"==g&&"Decimal128"==f._bsontype?c=M(e,i,f,c):"Long"==f._bsontype||"Timestamp"==f._bsontype?c=F(e,i,f,c):"Double"==f._bsontype?c=z(e,i,f,c):"Code"==f._bsontype?c=U(e,i,f,c,a,s,l,d):"function"==typeof f&&l?c=j(e,i,f,c,a,s,l):"Binary"==f._bsontype?c=$(e,i,f,c):"Symbol"==f._bsontype?c=W(e,i,f,c):"DBRef"==f._bsontype?c=H(e,i,f,c,s,l):"BSONRegExp"==f._bsontype?c=O(e,i,f,c):"Int32"==f._bsontype?c=B(e,i,f,c):("MinKey"==f._bsontype||"MaxKey"==f._bsontype)&&(c=D(e,i,f,c)))}}else{if(t.toBSON){if("function"!=typeof t.toBSON)throw new Error("toBSON is not a function");if(t=t.toBSON(),null!=t&&"object"!=typeof t)throw new Error("toBSON function did not return an object")}for(var i in t){var f=t[i];if(f&&f.toBSON){if("function"!=typeof f.toBSON)throw new Error("toBSON is not a function");f=f.toBSON()}var g=typeof f;if("$db"!=i&&"$ref"!=i&&"$id"!=i){if(null!=i.match(x))throw Error("key "+i+" must not contain null bytes");if(a)if("$"==i[0])throw Error("key "+i+" must not start with '$'");else if(!!~i.indexOf("."))throw Error("key "+i+" must not contain '.'")}"string"==g?c=T(e,i,f,c):"number"==g?c=k(e,i,f,c):"boolean"==g?c=A(e,i,f,c):f instanceof Date||v(f)?c=C(e,i,f,c):void 0===f&&!0==d||(null===f||void 0===f?c=N(e,i,f,c):"ObjectID"==f._bsontype?c=P(e,i,f,c):n.isBuffer(f)?c=R(e,i,f,c):f instanceof RegExp||S(f)?c=w(e,i,f,c):"object"==g&&null==f._bsontype?c=I(e,i,f,c,a,s,l,d,!1,p):"object"==g&&"Decimal128"==f._bsontype?c=M(e,i,f,c):"Long"==f._bsontype||"Timestamp"==f._bsontype?c=F(e,i,f,c):"Double"==f._bsontype?c=z(e,i,f,c):"Code"==f._bsontype?c=U(e,i,f,c,a,s,l,d):"function"==typeof f&&l?c=j(e,i,f,c,a,s,l):"Binary"==f._bsontype?c=$(e,i,f,c):"Symbol"==f._bsontype?c=W(e,i,f,c):"DBRef"==f._bsontype?c=H(e,i,f,c,s,l):"BSONRegExp"==f._bsontype?c=O(e,i,f,c):"Int32"==f._bsontype?c=B(e,i,f,c):("MinKey"==f._bsontype||"MaxKey"==f._bsontype)&&(c=D(e,i,f,c)))}}p.pop(),e[c++]=0;var b=c-o;return e[o++]=255&b,e[o++]=255&b>>8,e[o++]=255&b>>16,e[o++]=255&b>>24,c},Y={},V=Y.functionCache={};Y.BSON_DATA_NUMBER=1,Y.BSON_DATA_STRING=2,Y.BSON_DATA_OBJECT=3,Y.BSON_DATA_ARRAY=4,Y.BSON_DATA_BINARY=5,Y.BSON_DATA_UNDEFINED=6,Y.BSON_DATA_OID=7,Y.BSON_DATA_BOOLEAN=8,Y.BSON_DATA_DATE=9,Y.BSON_DATA_NULL=10,Y.BSON_DATA_REGEXP=11,Y.BSON_DATA_CODE=13,Y.BSON_DATA_SYMBOL=14,Y.BSON_DATA_CODE_W_SCOPE=15,Y.BSON_DATA_INT=16,Y.BSON_DATA_TIMESTAMP=17,Y.BSON_DATA_LONG=18,Y.BSON_DATA_DECIMAL128=19,Y.BSON_DATA_MIN_KEY=255,Y.BSON_DATA_MAX_KEY=127,Y.BSON_BINARY_SUBTYPE_DEFAULT=0,Y.BSON_BINARY_SUBTYPE_FUNCTION=1,Y.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,Y.BSON_BINARY_SUBTYPE_UUID=3,Y.BSON_BINARY_SUBTYPE_MD5=4,Y.BSON_BINARY_SUBTYPE_USER_DEFINED=128,Y.BSON_INT32_MAX=2147483647,Y.BSON_INT32_MIN=-2147483648,Y.BSON_INT64_MAX=9223372036854776000,Y.BSON_INT64_MIN=-9223372036854776000,Y.JS_INT_MAX=9007199254740992,Y.JS_INT_MIN=-9007199254740992;var G=o.fromNumber(9007199254740992),Z=o.fromNumber(-9007199254740992);t.exports=q}).call(this,e("buffer").Buffer)},{"../binary":16,"../code":18,"../db_ref":19,"../decimal128":20,"../double":21,"../float_parser":22,"../int_32":23,"../long":24,"../map":25,"../max_key":26,"../min_key":27,"../objectid":28,"../regexp":32,"../symbol":33,"../timestamp":34,buffer:35}],32:[function(e,t){function n(e,t){if(!(this instanceof n))return new n;this._bsontype="BSONRegExp",this.pattern=e||"",this.options=t||"";for(var a=0;a<this.options.length;a++)if("i"!=this.options[a]&&"m"!=this.options[a]&&"x"!=this.options[a]&&"l"!=this.options[a]&&"s"!=this.options[a]&&"u"!=this.options[a])throw new Error("the regular expression options ["+this.options[a]+"] is not supported")}t.exports=n,t.exports.BSONRegExp=n},{}],33:[function(e,t){function n(e){return this instanceof n?void(this._bsontype="Symbol",this.value=e):new n(e)}n.prototype.valueOf=function(){return this.value},n.prototype.toString=function(){return this.value},n.prototype.inspect=function(){return this.value},n.prototype.toJSON=function(){return this.value},t.exports=n,t.exports.Symbol=n},{}],34:[function(e,t){//     http://www.apache.org/licenses/LICENSE-2.0
function n(e,t){return this instanceof n?void(this._bsontype="Timestamp",this.low_=0|e,this.high_=0|t):new n(e,t)}n.prototype.toInt=function(){return this.low_},n.prototype.toNumber=function(){return this.high_*n.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},n.prototype.toJSON=function(){return this.toString()},n.prototype.toString=function(e){var t=e||10;if(2>t||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(n.MIN_VALUE)){var a=n.fromNumber(t),i=this.div(a),o=i.multiply(a).subtract(this);return i.toString(t)+o.toInt().toString(t)}return"-"+this.negate().toString(t)}for(var r=n.fromNumber(g(t,6)),o=this,s="";;){var l=o.div(r),d=o.subtract(l.multiply(r)).toInt(),p=d.toString(t);if(o=l,o.isZero())return p+s;for(;6>p.length;)p="0"+p;s=""+p+s}},n.prototype.getHighBits=function(){return this.high_},n.prototype.getLowBits=function(){return this.low_},n.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:n.TWO_PWR_32_DBL_+this.low_},n.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(n.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0==this.high_?this.low_:this.high_,t=31;0<t&&0==(e&1<<t);t--);return 0==this.high_?t+1:t+33},n.prototype.isZero=function(){return 0==this.high_&&0==this.low_},n.prototype.isNegative=function(){return 0>this.high_},n.prototype.isOdd=function(){return 1==(1&this.low_)},n.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},n.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},n.prototype.lessThan=function(e){return 0>this.compare(e)},n.prototype.lessThanOrEqual=function(e){return 0>=this.compare(e)},n.prototype.greaterThan=function(e){return 0<this.compare(e)},n.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},n.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.subtract(e).isNegative()?-1:1},n.prototype.negate=function(){return this.equals(n.MIN_VALUE)?n.MIN_VALUE:this.not().add(n.ONE)},n.prototype.add=function(e){var t=this.high_>>>16,a=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,r=e.high_>>>16,s=65535&e.high_,l=e.low_>>>16,d=65535&e.low_,p=0,c=0,u=0,m=0;return m+=o+d,u+=m>>>16,m&=65535,u+=i+l,c+=u>>>16,u&=65535,c+=a+s,p+=c>>>16,c&=65535,p+=t+r,p&=65535,n.fromBits(u<<16|m,p<<16|c)},n.prototype.subtract=function(e){return this.add(e.negate())},n.prototype.multiply=function(e){if(this.isZero())return n.ZERO;if(e.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE))return e.isOdd()?n.MIN_VALUE:n.ZERO;if(e.equals(n.MIN_VALUE))return this.isOdd()?n.MIN_VALUE:n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(n.TWO_PWR_24_)&&e.lessThan(n.TWO_PWR_24_))return n.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,a=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,r=e.high_>>>16,s=65535&e.high_,l=e.low_>>>16,d=65535&e.low_,p=0,c=0,u=0,m=0;return m+=o*d,u+=m>>>16,m&=65535,u+=i*d,c+=u>>>16,u&=65535,u+=o*l,c+=u>>>16,u&=65535,c+=a*d,p+=c>>>16,c&=65535,c+=i*l,p+=c>>>16,c&=65535,c+=o*s,p+=c>>>16,c&=65535,p+=t*d+a*l+i*s+o*r,p&=65535,n.fromBits(u<<16|m,p<<16|c)},n.prototype.div=function(e){if(e.isZero())throw Error("division by zero");else if(this.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE)){if(e.equals(n.ONE)||e.equals(n.NEG_ONE))return n.MIN_VALUE;if(e.equals(n.MIN_VALUE))return n.ONE;var t=this.shiftRight(1),a=t.div(e).shiftLeft(1);if(a.equals(n.ZERO))return e.isNegative()?n.ONE:n.NEG_ONE;var i=this.subtract(e.multiply(a)),o=a.add(i.div(e));return o}if(e.equals(n.MIN_VALUE))return n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(var s=n.ZERO,i=this;i.greaterThanOrEqual(e);){for(var a=N(1,E(i.toNumber()/e.toNumber())),l=p(f(a)/r),d=48>=l?1:g(2,l-48),c=n.fromNumber(a),u=c.multiply(e);u.isNegative()||u.greaterThan(i);)a-=d,c=n.fromNumber(a),u=c.multiply(e);c.isZero()&&(c=n.ONE),s=s.add(c),i=i.subtract(u)}return s},n.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},n.prototype.not=function(){return n.fromBits(~this.low_,~this.high_)},n.prototype.and=function(e){return n.fromBits(this.low_&e.low_,this.high_&e.high_)},n.prototype.or=function(e){return n.fromBits(this.low_|e.low_,this.high_|e.high_)},n.prototype.xor=function(e){return n.fromBits(this.low_^e.low_,this.high_^e.high_)},n.prototype.shiftLeft=function(e){if(e&=63,0==e)return this;var t=this.low_;if(32>e){var a=this.high_;return n.fromBits(t<<e,a<<e|t>>>32-e)}return n.fromBits(0,t<<e-32)},n.prototype.shiftRight=function(e){if(e&=63,0==e)return this;var t=this.high_;if(32>e){var a=this.low_;return n.fromBits(a>>>e|t<<32-e,t>>e)}return n.fromBits(t>>e-32,0<=t?0:-1)},n.prototype.shiftRightUnsigned=function(e){if(e&=63,0==e)return this;var t=this.high_;if(32>e){var a=this.low_;return n.fromBits(a>>>e|t<<32-e,t>>>e)}return 32==e?n.fromBits(t,0):n.fromBits(t>>>e-32,0)},n.fromInt=function(e){if(-128<=e&&128>e){var t=n.INT_CACHE_[e];if(t)return t}var a=new n(0|e,0>e?-1:0);return-128<=e&&128>e&&(n.INT_CACHE_[e]=a),a},n.fromNumber=function(e){return isNaN(e)||!isFinite(e)?n.ZERO:e<=-n.TWO_PWR_63_DBL_?n.MIN_VALUE:e+1>=n.TWO_PWR_63_DBL_?n.MAX_VALUE:0>e?n.fromNumber(-e).negate():new n(0|e%n.TWO_PWR_32_DBL_,0|e/n.TWO_PWR_32_DBL_)},n.fromBits=function(e,t){return new n(e,t)},n.fromString=function(e,t){if(0==e.length)throw Error("number format error: empty string");var a=t||10;if(2>a||36<a)throw Error("radix out of range: "+a);if("-"==e.charAt(0))return n.fromString(e.substring(1),a).negate();if(0<=e.indexOf("-"))throw Error("number format error: interior \"-\" character: "+e);for(var o=n.fromNumber(g(a,8)),r=n.ZERO,s=0;s<e.length;s+=8){var i=S(8,e.length-s),l=parseInt(e.substring(s,s+i),a);if(8>i){var d=n.fromNumber(g(a,i));r=r.multiply(d).add(n.fromNumber(l))}else r=r.multiply(o),r=r.add(n.fromNumber(l))}return r},n.INT_CACHE_={},n.TWO_PWR_16_DBL_=65536,n.TWO_PWR_24_DBL_=16777216,n.TWO_PWR_32_DBL_=n.TWO_PWR_16_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_31_DBL_=n.TWO_PWR_32_DBL_/2,n.TWO_PWR_48_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_64_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_32_DBL_,n.TWO_PWR_63_DBL_=n.TWO_PWR_64_DBL_/2,n.ZERO=n.fromInt(0),n.ONE=n.fromInt(1),n.NEG_ONE=n.fromInt(-1),n.MAX_VALUE=n.fromBits(-1,2147483647),n.MIN_VALUE=n.fromBits(0,-2147483648),n.TWO_PWR_24_=n.fromInt(16777216),t.exports=n,t.exports.Timestamp=n},{}],35:[function(e,t,n){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */"use strict";function a(e){if(e>Q)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(e)}return i(e,t,n)}function i(e,t,n){if("number"==typeof e)throw new TypeError("\"value\" argument must not be a number");return G(e)?u(e,t,n):"string"==typeof e?p(e,t):m(e)}function r(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");else if(0>e)throw new RangeError("\"size\" argument must not be negative")}function s(e,t,n){return r(e),0>=e?a(e):void 0===t?a(e):"string"==typeof n?a(e).fill(t,n):a(e).fill(t)}function l(e){return r(e),a(0>e?0:0|f(e))}function p(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw new TypeError("\"encoding\" must be a valid string encoding");var n=0|_(e,t),i=a(n),r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}function c(e){for(var t=0>e.length?0:0|f(e.length),n=a(t),o=0;o<t;o+=1)n[o]=255&e[o];return n}function u(e,t,n){if(0>t||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");var a;return a=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),a.__proto__=o.prototype,a}function m(e){if(o.isBuffer(e)){var t=0|f(e.length),n=a(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(e){if(Z(e)||"length"in e)return"number"!=typeof e.length||X(e.length)?a(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function f(e){if(e>=Q)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Q.toString(16)+" bytes");return 0|e}function _(e,t){if(o.isBuffer(e))return e.length;if(Z(e)||G(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(a)return W(e).length;t=(""+t).toLowerCase(),a=!0;}}function y(e,t,n){var a=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0;}}function h(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function b(e,t,n,a,i){if(0===e.length)return-1;if("string"==typeof n?(a=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,X(n)&&(n=i?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(0>n)if(i)n=0;else return-1;if("string"==typeof t&&(t=o.from(t,a)),o.isBuffer(t))return 0===t.length?-1:x(e,t,n,a,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):x(e,[t],n,a,i);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,a,o){function r(e,t){return 1==s?e[t]:e.readUInt16BE(t*s)}var s=1,l=e.length,d=t.length;if(void 0!==a&&(a=(a+"").toLowerCase(),"ucs2"===a||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(2>e.length||2>t.length)return-1;s=2,l/=2,d/=2,n/=2}var p;if(o){var i=-1;for(p=n;p<l;p++)if(r(e,p)!==r(t,-1==i?0:p-i))-1!=i&&(p-=p-i),i=-1;else if(-1==i&&(i=p),p-i+1===d)return i*s}else for(n+d>l&&(n=l-d),p=n;0<=p;p--){for(var c=!0,u=0;u<d;u++)if(r(e,p+u)!==r(t,u)){c=!1;break}if(c)return p}return-1}function v(e,t,n,a){n=+n||0;var o=e.length-n;a?(a=+a,a>o&&(a=o)):a=o;var r=t.length;if(0!=r%2)throw new TypeError("Invalid hex string");a>r/2&&(a=r/2);for(var s=0,i;s<a;++s){if(i=parseInt(t.substr(2*s,2),16),X(i))return s;e[n+s]=i}return s}function T(e,t,n,a){return V(W(t,e.length-n),e,n,a)}function k(e,t,n,a){return V(H(t),e,n,a)}function E(e,t,n,a){return k(e,t,n,a)}function N(e,t,n,a){return V(Y(t),e,n,a)}function A(e,t,n,a){return V(q(t,e.length-n),e,n,a)}function C(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function w(e,t,n){n=S(e.length,n);for(var a=[],o=t;o<n;){var i=e[o],r=null,s=239<i?4:223<i?3:191<i?2:1;if(o+s<=n){var l,d,p,c;1==s?128>i&&(r=i):2==s?(l=e[o+1],128==(192&l)&&(c=(31&i)<<6|63&l,127<c&&(r=c))):3==s?(l=e[o+1],d=e[o+2],128==(192&l)&&128==(192&d)&&(c=(15&i)<<12|(63&l)<<6|63&d,2047<c&&(55296>c||57343<c)&&(r=c))):4==s?(l=e[o+1],d=e[o+2],p=e[o+3],128==(192&l)&&128==(192&d)&&128==(192&p)&&(c=(15&i)<<18|(63&l)<<12|(63&d)<<6|63&p,65535<c&&1114112>c&&(r=c))):void 0}null===r?(r=65533,s=1):65535<r&&(r-=65536,a.push(55296|1023&r>>>10),r=56320|1023&r),a.push(r),o+=s}return O(a)}function O(e){var t=e.length;if(t<=ee)return d.apply(String,e);for(var n="",a=0;a<t;)n+=d.apply(String,e.slice(a,a+=ee));return n}function D(e,t,n){var a="";n=S(e.length,n);for(var o=t;o<n;++o)a+=d(127&e[o]);return a}function P(e,t,n){var a="";n=S(e.length,n);for(var o=t;o<n;++o)a+=d(e[o]);return a}function R(e,t,n){var a=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>a)&&(n=a);for(var o="",r=t;r<n;++r)o+=$(e[r]);return o}function I(e,t,n){for(var a=e.slice(t,n),o="",r=0;r<a.length;r+=2)o+=d(a[r]+256*a[r+1]);return o}function M(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,n,a,i,r){if(!o.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>i||t<r)throw new RangeError("\"value\" argument is out of bounds");if(n+a>e.length)throw new RangeError("Index out of range")}function B(e,t,n,a){if(n+a>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function z(e,t,n,a,i){return t=+t,n>>>=0,i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,a,23,4),n+4}function j(e,t,n,a,i){return t=+t,n>>>=0,i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,a,52,8),n+8}function U(e){if(e=e.trim().replace(te,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function $(e){return 16>e?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||Infinity;for(var n=e.length,a=null,o=[],r=0,i;r<n;++r){if(i=e.charCodeAt(r),55295<i&&57344>i){if(!a){if(56319<i){-1<(t-=3)&&o.push(239,191,189);continue}else if(r+1===n){-1<(t-=3)&&o.push(239,191,189);continue}a=i;continue}if(56320>i){-1<(t-=3)&&o.push(239,191,189),a=i;continue}i=(a-55296<<10|i-56320)+65536}else a&&-1<(t-=3)&&o.push(239,191,189);if(a=null,128>i){if(0>(t-=1))break;o.push(i)}else if(2048>i){if(0>(t-=2))break;o.push(192|i>>6,128|63&i)}else if(65536>i){if(0>(t-=3))break;o.push(224|i>>12,128|63&i>>6,128|63&i)}else if(1114112>i){if(0>(t-=4))break;o.push(240|i>>18,128|63&i>>12,128|63&i>>6,128|63&i)}else throw new Error("Invalid code point")}return o}function H(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n=[],a=0,i,o,r;a<e.length&&!(0>(t-=2));++a)i=e.charCodeAt(a),o=i>>8,r=i%256,n.push(r),n.push(o);return n}function Y(e){return K.toByteArray(U(e))}function V(e,t,n,a){for(var o=0;o<a&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function G(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function Z(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function X(e){return e!==e}var K=e("base64-js"),J=e("ieee754");n.Buffer=o,n.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},n.INSPECT_MAX_BYTES=50;var Q=2147483647;n.kMaxLength=Q,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,n){return i(e,t,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,n){return s(e,t,n)},o.allocUnsafe=function(e){return l(e)},o.allocUnsafeSlow=function(e){return l(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,r=0,i=S(n,a);r<i;++r)if(e[r]!==t[r]){n=e[r],a=t[r];break}return n<a?-1:a<n?1:0},o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return o.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var r=e[n];if(!o.isBuffer(r))throw new TypeError("\"list\" argument must be an Array of Buffers");r.copy(a,i),i+=r.length}return a},o.byteLength=_,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,a,r){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===a&&(a=0),void 0===r&&(r=this.length),0>t||n>e.length||0>a||r>this.length)throw new RangeError("out of range index");if(a>=r&&t>=n)return 0;if(a>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,a>>>=0,r>>>=0,this===e)return 0;for(var s=r-a,l=n-t,d=S(s,l),p=this.slice(a,r),c=e.slice(t,n),u=0;u<d;++u)if(p[u]!==c[u]){s=p[u],l=c[u];break}return s<l?-1:l<s?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,a){if(void 0===t)a="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)a=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===a&&(a="utf8")):(a=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-t;if((void 0===n||n>i)&&(n=i),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var o=!1;;)switch(a){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return N(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),o=!0;}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var a=this.subarray(e,t);return a.__proto__=o.prototype,a},o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var a=this[e],o=1,r=0;++r<t&&(o*=256);)a+=this[e+r]*o;return a},o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var a=this[e+--t],i=1;0<t&&(i*=256);)a+=this[e+--t]*i;return a},o.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var a=this[e],o=1,r=0;++r<t&&(o*=256);)a+=this[e+r]*o;return o*=128,a>=o&&(a-=g(2,8*t)),a},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var a=t,i=1,o=this[e+--a];0<a&&(i*=256);)o+=this[e+--a]*i;return i*=128,o>=i&&(o-=g(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,a){if(e=+e,t>>>=0,n>>>=0,!a){var o=g(2,8*n)-1;F(this,e,t,n,o,0)}var r=1,s=0;for(this[t]=255&e;++s<n&&(r*=256);)this[t+s]=255&e/r;return t+n},o.prototype.writeUIntBE=function(e,t,n,a){if(e=+e,t>>>=0,n>>>=0,!a){var o=g(2,8*n)-1;F(this,e,t,n,o,0)}var r=n-1,i=1;for(this[t+r]=255&e;0<=--r&&(i*=256);)this[t+r]=255&e/i;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t>>>=0,!a){var o=g(2,8*n-1);F(this,e,t,n,o-1,-o)}var r=0,i=1,s=0;for(this[t]=255&e;++r<n&&(i*=256);)0>e&&0==s&&0!==this[t+r-1]&&(s=1),this[t+r]=255&(e/i>>0)-s;return t+n},o.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t>>>=0,!a){var o=g(2,8*n-1);F(this,e,t,n,o-1,-o)}var r=n-1,i=1,s=0;for(this[t+r]=255&e;0<=--r&&(i*=256);)0>e&&0==s&&0!==this[t+r+1]&&(s=1),this[t+r]=255&(e/i>>0)-s;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),0<a&&a<n&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var o=a-n,r;if(this===e&&n<t&&t<a)for(r=o-1;0<=r;--r)e[r+t]=this[r+n];else if(1e3>o)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},o.prototype.fill=function(e,t,n,a){if("string"==typeof e){if("string"==typeof t?(a=t,t=0,n=this.length):"string"==typeof n&&(a=n,n=this.length),1===e.length){var r=e.charCodeAt(0);256>r&&(e=r)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!o.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var i=o.isBuffer(e)?e:new o(e,a),l=i.length;for(s=0;s<n-t;++s)this[s+t]=i[s%l]}return this};var te=/[^+/0-9A-Za-z-_]/g},{"base64-js":13,ieee754:139}],36:[function(e,t,n){(function(t,a,i){(function(){var r={}.hasOwnProperty,o,s,l,p,c,u,m,f,g,_,y,h,b,x,v,S,T,k,E,N,A;if(f=e("fs"),N=e("vm"),S=e("path"),o=e("./lexer").Lexer,v=e("./parser").parser,_=e("./helpers"),s=e("./sourcemap"),x=e("../../package.json"),n.VERSION=x.version,n.FILE_EXTENSIONS=[".coffee",".litcoffee",".coffee.md"],n.helpers=_,l=function(e){switch(!1){case"function"!=typeof i:return new i(e).toString("base64");case"function"!=typeof btoa:return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return d("0x"+t)}));default:throw new Error("Unable to base64 encode inline sourcemap.");}},A=function(e){return function(t,n){var a;null==n&&(n={});try{return e.call(this,t,n)}catch(e){if(a=e,"string"!=typeof t)throw a;throw _.updateSyntaxError(a,t,n.filename)}}},E={},k={},n.compile=p=A(function(e,t){var n,a,o,r,d,p,c,u,m,f,i,g,y,h,x,S,T,N,A,C,w,O,D,P;if(S=_.merge,r=_.extend,t=r({},t),u=t.sourceMap||t.inlineMap||null==t.filename,d=t.filename||"<anonymous>",E[d]=e,u&&(x=new s),D=b.tokenize(e,t),t.referencedVars=function(){var e,t,n;for(n=[],e=0,t=D.length;e<t;e++)O=D[e],"IDENTIFIER"===O[0]&&n.push(O[1]);return n}(),null==t.bare||!0!==t.bare)for(f=0,y=D.length;f<y;f++)if(O=D[f],"IMPORT"===(N=O[0])||"EXPORT"===N){t.bare=!0;break}for(c=v.parse(D).compileToFragments(t),a=0,t.header&&(a+=1),t.shiftLine&&(a+=1),n=0,g="",(i=0,h=c.length);i<h;i++)p=c[i],u&&(p.locationData&&!/^[;\s]*$/.test(p.code)&&x.add([p.locationData.first_line,p.locationData.first_column],[a,n],{noReplace:!0}),T=_.count(p.code,"\n"),a+=T,T?n=p.code.length-(p.code.lastIndexOf("\n")+1):n+=p.code.length),g+=p.code;return t.header&&(m="Generated by CoffeeScript "+this.VERSION,g="// "+m+"\n"+g),u&&(P=x.generate(t,e),k[d]=x),t.inlineMap&&(o=l(JSON.stringify(P)),C="//# sourceMappingURL=data:application/json;base64,"+o,w="//# sourceURL="+(null==(A=t.filename)?"coffeescript":A),g=g+"\n"+C+"\n"+w),t.sourceMap?{js:g,sourceMap:x,v3SourceMap:JSON.stringify(P,null,2)}:g}),n.tokens=A(function(e,t){return b.tokenize(e,t)}),n.nodes=A(function(e,t){return"string"==typeof e?v.parse(b.tokenize(e,t)):v.parse(e)}),n.run=function(n,a){var i,o,r,s;return null==a&&(a={}),r=e.main,r.filename=t.argv[1]=a.filename?f.realpathSync(a.filename):"<anonymous>",r.moduleCache&&(r.moduleCache={}),o=null==a.filename?f.realpathSync("."):S.dirname(f.realpathSync(a.filename)),r.paths=e("module")._nodeModulePaths(o),(!_.isCoffee(r.filename)||e.extensions)&&(i=p(n,a),n=null==(s=i.js)?i:s),r._compile(n,r.filename)},n.eval=function(n,s){var l,d,c,u,m,i,f,g,_,y,o,h,b,x,T,k,E;if(null==s&&(s={}),!!(n=n.trim())){if(u=null==(h=N.Script.createContext)?N.createContext:h,i=null==(b=N.isContext)?function(){return s.sandbox instanceof u().constructor}:b,u){if(null!=s.sandbox){if(i(s.sandbox))k=s.sandbox;else for(g in k=u(),x=s.sandbox,x)r.call(x,g)&&(E=x[g],k[g]=E);k.global=k.root=k.GLOBAL=k}else k=a;if(k.__filename=s.filename||"eval",k.__dirname=S.dirname(k.__filename),!(k!==a||k.module||k.require)){for(l=e("module"),k.module=d=new l(s.modulename||"eval"),k.require=c=function(e){return l._load(e,d,!0)},d.filename=k.__filename,T=Object.getOwnPropertyNames(e),(m=0,_=T.length);m<_;m++)o=T[m],"paths"!==o&&"arguments"!==o&&"caller"!==o&&(c[o]=e[o]);c.paths=d.paths=l._nodeModulePaths(t.cwd()),c.resolve=function(e){return l._resolveFilename(e,d)}}}for(g in y={},s)r.call(s,g)&&(E=s[g],y[g]=E);return y.bare=!0,f=p(n,y),k===a?N.runInThisContext(f):N.runInContext(f,k)}},n.register=function(){return e("./register")},e.extensions)for(T=this.FILE_EXTENSIONS,u=function(t){var n;return null==(n=e.extensions)[t]?n[t]=function(){throw new Error("Use CoffeeScript.register() or require the coffee-script/register module to require "+t+" files.")}:n[t]},(y=0,h=T.length);y<h;y++)c=T[y],u(c);n._compileFile=function(e,t,n){var a,i,o,r;null==t&&(t=!1),null==n&&(n=!1),o=f.readFileSync(e,"utf8"),r=65279===o.charCodeAt(0)?o.substring(1):o;try{a=p(r,{filename:e,sourceMap:t,inlineMap:n,sourceFiles:[e],literate:_.isLiterate(e)})}catch(t){throw i=t,_.updateSyntaxError(i,r,e)}return a},b=new o,v.lexer={lex:function(){var e,t;return t=v.tokens[this.pos++],t?(e=t[0],this.yytext=t[1],this.yylloc=t[2],v.errorToken=t.origin||t,this.yylineno=this.yylloc.first_line):e="",e},setInput:function(e){return v.tokens=e,this.pos=0},upcomingInput:function(){return""}},v.yy=e("./nodes"),v.yy.parseError=function(e,t){var n,a,i,o,r,s;return r=t.token,o=v.errorToken,s=v.tokens,a=o[0],i=o[1],n=o[2],i=function(){switch(!1){case o!==s[s.length-1]:return"end of input";case"INDENT"!==a&&"OUTDENT"!==a:return"indentation";case"IDENTIFIER"!==a&&"NUMBER"!==a&&"INFINITY"!==a&&"STRING"!==a&&"STRING_START"!==a&&"REGEX"!==a&&"REGEX_START"!==a:return a.replace(/_START$/,"").toLowerCase();default:return _.nameWhitespaceCharacter(i);}}(),_.throwSyntaxError("unexpected "+i,n)},m=function(e,t){var n,a,i,o,r,s,l,d,p,c,u,m;return o=void 0,i="",e.isNative()?i="native":(e.isEval()?(o=e.getScriptNameOrSourceURL(),!o&&(i=e.getEvalOrigin()+", ")):o=e.getFileName(),o||(o="<anonymous>"),d=e.getLineNumber(),a=e.getColumnNumber(),c=t(o,d,a),i=c?o+":"+c[0]+":"+c[1]:o+":"+d+":"+a),r=e.getFunctionName(),s=e.isConstructor(),l=!(e.isToplevel()||s),l?(p=e.getMethodName(),m=e.getTypeName(),r?(u=n="",m&&r.indexOf(m)&&(u=m+"."),p&&r.indexOf("."+p)!==r.length-p.length-1&&(n=" [as "+p+"]"),""+u+r+n+" ("+i+")"):m+"."+(p||"<anonymous>")+" ("+i+")"):s?"new "+(r||"<anonymous>")+" ("+i+")":r?r+" ("+i+")":i},g=function(e){var t;return null==k[e]?null==k["<anonymous>"]?null==E[e]?null:(t=p(E[e],{filename:e,sourceMap:!0,literate:_.isLiterate(e)}),t.sourceMap):k["<anonymous>"]:k[e]},Error.prepareStackTrace=function(e,t){var a,i,o;return o=function(e,t,n){var a,i;return i=g(e),null!=i&&(a=i.sourceLocation([t-1,n-1])),null==a?null:[a[0]+1,a[1]+1]},i=function(){var e,i,r;for(r=[],e=0,i=t.length;e<i&&(a=t[e],a.getFunction()!==n.run);e++)r.push("    at "+m(a,o));return r}(),e.toString()+"\n"+i.join("\n")+"\n"}}).call(this)}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e("buffer").Buffer)},{"../../package.json":45,"./helpers":37,"./lexer":38,"./nodes":39,"./parser":40,"./register":41,"./sourcemap":44,_process:147,buffer:35,fs:15,module:15,path:146,vm:590}],37:[function(e,t,n){(function(e){(function(){var t,a,o,i,r,s;n.starts=function(e,t,n){return t===e.substr(n,t.length)},n.ends=function(e,t,n){var a;return a=t.length,t===e.substr(e.length-a-(n||0),a)},n.repeat=r=function(e,t){var n;for(n="";0<t;)1&t&&(n+=e),t>>>=1,e+=e;return n},n.compact=function(e){var t,n,a,i;for(i=[],t=0,a=e.length;t<a;t++)n=e[t],n&&i.push(n);return i},n.count=function(e,t){var n,a;if(n=a=0,!t.length)return 1/0;for(;a=1+e.indexOf(t,a);)n++;return n},n.merge=function(e,t){return a(a({},e),t)},a=n.extend=function(e,t){var n,a;for(n in t)a=t[n],e[n]=a;return e},n.flatten=o=function(e){var t,n,a,i;for(n=[],a=0,i=e.length;a<i;a++)t=e[a],"[object Array]"===Object.prototype.toString.call(t)?n=n.concat(o(t)):n.push(t);return n},n.del=function(e,t){var n;return n=e[t],delete e[t],n},n.some=null==(i=Array.prototype.some)?function(t){var n,e,a,i;for(i=this,e=0,a=i.length;e<a;e++)if(n=i[e],t(n))return!0;return!1}:i,n.invertLiterate=function(e){var t,n,a;return a=!0,n=function(){var n,i,o,r;for(o=e.split("\n"),r=[],(n=0,i=o.length);n<i;n++)t=o[n],a&&/^([ ]{4}|[ ]{0,3}\t)/.test(t)?r.push(t):(a=/^\s*$/.test(t))?r.push(t):r.push("# "+t);return r}(),n.join("\n")},t=function(e,t){return t?{first_line:e.first_line,first_column:e.first_column,last_line:t.last_line,last_column:t.last_column}:e},n.addLocationDataFn=function(e,n){return function(a){return"object"!=typeof a||!a.updateLocationDataIfMissing||a.updateLocationDataIfMissing(t(e,n)),a}},n.locationDataToString=function(e){var t;return"2"in e&&"first_line"in e[2]?t=e[2]:"first_line"in e&&(t=e),t?t.first_line+1+":"+(t.first_column+1)+"-"+(t.last_line+1+":"+(t.last_column+1)):"No location data"},n.baseFileName=function(e,t,n){var a,i;return(null==t&&(t=!1),null==n&&(n=!1),i=n?/\\|\//:/\//,a=e.split(i),e=a[a.length-1],!(t&&0<=e.indexOf(".")))?e:(a=e.split("."),a.pop(),"coffee"===a[a.length-1]&&1<a.length&&a.pop(),a.join("."))},n.isCoffee=function(e){return /\.((lit)?coffee|coffee\.md)$/.test(e)},n.isLiterate=function(e){return /\.(litcoffee|coffee\.md)$/.test(e)},n.throwSyntaxError=function(e,t){var n;throw n=new SyntaxError(e),n.location=t,n.toString=s,n.stack=n.toString(),n},n.updateSyntaxError=function(e,t,n){return e.toString===s&&(e.code||(e.code=t),e.filename||(e.filename=n),e.stack=e.toString()),e},s=function(){var t,n,a,i,o,s,l,d,p,c,u,m,f,g,_;return this.code&&this.location?(u=this.location,l=u.first_line,s=u.first_column,p=u.last_line,d=u.last_column,null==p&&(p=l),null==d&&(d=s),o=this.filename||"[stdin]",t=this.code.split("\n")[l],_=s,i=l===p?d+1:t.length,c=t.slice(0,_).replace(/[^\s]/g," ")+r("^",i-_),"undefined"!=typeof e&&null!==e&&(a=(null==(m=e.stdout)?void 0:m.isTTY)&&(null==(f=e.env)||!f.NODE_DISABLE_COLORS)),(null==(g=this.colorful)?a:g)&&(n=function(e){return"\x1B[1;31m"+e+"\x1B[0m"},t=t.slice(0,_)+n(t.slice(_,i))+t.slice(i),c=n(c)),o+":"+(l+1)+":"+(s+1)+": error: "+this.message+"\n"+t+"\n"+c):Error.prototype.toString.call(this)},n.nameWhitespaceCharacter=function(e){return" "===e?"space":"\n"===e?"newline":"\r"===e?"carriage return":"\t"===e?"tab":e}}).call(this)}).call(this,e("_process"))},{_process:147}],38:[function(e,t,n){(function(){var t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},a=[].slice,i,o,r,s,l,d,c,u,m,f,g,_,y,h,b,x,v,S,T,k,N,A,C,w,O,D,P,R,I,M,F,B,z,j,U,$,W,H,q,Y,V,G,Z,X,K,J,Q,ee,te,ne,ae,ie,oe,re,se,le,de,pe,ce,ue,me,fe,ge,_e,ye,he,be,xe;_e=e("./rewriter"),Y=_e.Rewriter,N=_e.INVERSES,ye=e("./helpers"),pe=ye.count,be=ye.starts,de=ye.compact,he=ye.repeat,ce=ye.invertLiterate,ge=ye.locationDataToString,xe=ye.throwSyntaxError,n.Lexer=P=function(){function e(){}return e.prototype.tokenize=function(e,t){var n,a,o,r;for(null==t&&(t={}),this.literate=t.literate,this.indent=0,this.baseIndent=0,this.indebt=0,this.outdebt=0,this.indents=[],this.ends=[],this.tokens=[],this.seenFor=!1,this.seenImport=!1,this.seenExport=!1,this.importSpecifierList=!1,this.exportSpecifierList=!1,this.chunkLine=t.line||0,this.chunkColumn=t.column||0,e=this.clean(e),o=0;this.chunk=e.slice(o);)if(n=this.identifierToken()||this.commentToken()||this.whitespaceToken()||this.lineToken()||this.stringToken()||this.numberToken()||this.regexToken()||this.jsToken()||this.literalToken(),r=this.getLineAndColumnFromChunk(n),this.chunkLine=r[0],this.chunkColumn=r[1],o+=n,t.untilBalanced&&0===this.ends.length)return{tokens:this.tokens,index:o};return this.closeIndentation(),(a=this.ends.pop())&&this.error("missing "+a.tag,a.origin[2]),!1===t.rewrite?this.tokens:new Y().rewrite(this.tokens)},e.prototype.clean=function(e){return e.charCodeAt(0)===i&&(e=e.slice(1)),e=e.replace(/\r/g,"").replace(ne,""),le.test(e)&&(e="\n"+e,this.chunkLine--),this.literate&&(e=ce(e)),e},e.prototype.identifierToken=function(){var e,n,a,i,o,r,s,p,u,m,f,g,_,y,h,b,x,v,T;return(s=S.exec(this.chunk))?(r=s[0],i=s[1],n=s[2],o=i.length,p=void 0,"own"===i&&"FOR"===this.tag())?(this.token("OWN",i),i.length):"from"===i&&"YIELD"===this.tag()?(this.token("FROM",i),i.length):"as"===i&&this.seenImport&&("*"===this.value()?this.tokens[this.tokens.length-1][0]="IMPORT_ALL":(m=this.value(),0<=t.call(c,m))&&(this.tokens[this.tokens.length-1][0]="IDENTIFIER"),"DEFAULT"===(f=this.tag())||"IMPORT_ALL"===f||"IDENTIFIER"===f)?(this.token("AS",i),i.length):"as"===i&&this.seenExport&&("IDENTIFIER"===(g=this.tag())||"DEFAULT"===g)?(this.token("AS",i),i.length):"default"===i&&this.seenExport&&("EXPORT"===(_=this.tag())||"AS"===_)?(this.token("DEFAULT",i),i.length):(y=this.tokens,u=y[y.length-1],v=n||null!=u&&("."===(h=u[0])||"?."===h||"::"===h||"?::"===h||!u.spaced&&"@"===u[0])?"PROPERTY":"IDENTIFIER","IDENTIFIER"===v&&(0<=t.call(C,i)||0<=t.call(c,i))&&!(this.exportSpecifierList&&0<=t.call(c,i))?(v=i.toUpperCase(),"WHEN"===v&&(b=this.tag(),0<=t.call(O,b))?v="LEADING_WHEN":"FOR"===v?this.seenFor=!0:"UNLESS"===v?v="IF":"IMPORT"===v?this.seenImport=!0:"EXPORT"===v?this.seenExport=!0:0<=t.call(ae,v)?v="UNARY":0<=t.call(H,v)&&("INSTANCEOF"!==v&&this.seenFor?(v="FOR"+v,this.seenFor=!1):(v="RELATION","!"===this.value()&&(p=this.tokens.pop(),i="!"+i)))):"IDENTIFIER"===v&&this.seenFor&&"from"===i&&ue(u)&&(v="FORFROM",this.seenFor=!1),"IDENTIFIER"===v&&0<=t.call(q,i)&&this.error("reserved word '"+i+"'",{length:i.length}),"PROPERTY"!==v&&(0<=t.call(l,i)&&(e=i,i=d[i]),v=function(){return"!"===i?"UNARY":"=="===i||"!="===i?"COMPARE":"true"===i||"false"===i?"BOOL":"break"===i||"continue"===i||"debugger"===i?"STATEMENT":"&&"===i||"||"===i?i:v}()),T=this.token(v,i,0,o),e&&(T.origin=[v,e,T[2]]),p&&(x=[p[2].first_line,p[2].first_column],T[2].first_line=x[0],T[2].first_column=x[1]),n&&(a=r.lastIndexOf(":"),this.token(":",":",a,n.length)),r.length):0},e.prototype.numberToken=function(){var e,t,n,a,i,o,r;if(!(n=F.exec(this.chunk)))return 0;switch(a=n[0],t=a.length,!1){case!/^0[BOX]/.test(a):this.error("radix prefix in '"+a+"' must be lowercase",{offset:1});break;case!/^(?!0x).*E/.test(a):this.error("exponential notation in '"+a+"' must be indicated with a lowercase 'e'",{offset:a.indexOf("E")});break;case!/^0\d*[89]/.test(a):this.error("decimal literal '"+a+"' must not be prefixed with '0'",{length:t});break;case!/^0\d+/.test(a):this.error("octal literal '"+a+"' must be prefixed with '0o'",{length:t});}return e=function(){switch(a.charAt(1)){case"b":return 2;case"o":return 8;case"x":return 16;default:return null;}}(),i=null==e?parseFloat(a):parseInt(a.slice(2),e),("b"===(o=a.charAt(1))||"o"===o)&&(a="0x"+i.toString(16)),r=2e308===i?"INFINITY":"NUMBER",this.token(r,a,0,t),t},e.prototype.stringToken=function(){var e,t,n,a,o,r,s,i,l,d,p,c,u,m,f,g;if(p=(ee.exec(this.chunk)||[])[0],!p)return 0;if(this.tokens.length&&"from"===this.value()&&(this.seenImport||this.seenExport)&&(this.tokens[this.tokens.length-1][0]="FROM"),m=function(){return"'"===p?Q:"\""===p?X:"'''"===p?h:"\"\"\""===p?_:void 0}(),r=3===p.length,c=this.matchWithInterpolations(m,p),g=c.tokens,o=c.index,e=g.length-1,n=p.charAt(0),r){for(i=null,a=function(){var e,t,n;for(n=[],s=e=0,t=g.length;e<t;s=++e)f=g[s],"NEOSTRING"===f[0]&&n.push(f[1]);return n}().join("#{}");d=y.exec(a);)t=d[1],(null===i||0<(u=t.length)&&u<i.length)&&(i=t);i&&(l=RegExp("\\n"+i,"g")),this.mergeInterpolationTokens(g,{delimiter:n},function(t){return function(n,a){return n=t.formatString(n,{delimiter:p}),l&&(n=n.replace(l,"\n")),0===a&&(n=n.replace(w,"")),a===e&&(n=n.replace(te,"")),n}}(this))}else this.mergeInterpolationTokens(g,{delimiter:n},function(t){return function(n,a){return n=t.formatString(n,{delimiter:p}),n=n.replace(G,function(t,i){return 0===a&&0===i||a===e&&i+t.length===n.length?"":" "}),n}}(this));return o},e.prototype.commentToken=function(){var e,t,n;return(n=this.chunk.match(u))?(e=n[0],t=n[1],t&&((n=g.exec(e))&&this.error("block comments cannot contain "+n[0],{offset:n.index,length:n[0].length}),0<=t.indexOf("\n")&&(t=t.replace(RegExp("\\n"+he(" ",this.indent),"g"),"\n")),this.token("HERECOMMENT",t,0,e.length)),e.length):0},e.prototype.jsToken=function(){var e,t;return"`"===this.chunk.charAt(0)&&(e=v.exec(this.chunk)||A.exec(this.chunk))?(t=e[1].replace(/\\+(`|$)/g,function(e){return e.slice(-p(e.length/2))}),this.token("JS",t,0,e[0].length),e[0].length):0},e.prototype.regexToken=function(){var e,n,a,i,o,s,l,d,p,c,u,m,f;switch(!1){case!(s=$.exec(this.chunk)):this.error("regular expressions cannot begin with "+s[2],{offset:s.index+s[1].length});break;case!(s=this.matchWithInterpolations(b,"///")):f=s.tokens,o=s.index;break;case!(s=j.exec(this.chunk)):if(m=s[0],e=s[1],n=s[2],this.validateEscapes(e,{isRegex:!0,offsetInChunk:1}),e=this.formatRegex(e,{delimiter:"/"}),o=m.length,p=this.tokens,d=p[p.length-1],d)if(d.spaced&&(c=d[0],0<=t.call(r,c))){if(!n||z.test(m))return 0;}else if(u=d[0],0<=t.call(M,u))return 0;n||this.error("missing / (unclosed regex)");break;default:return 0;}switch(i=U.exec(this.chunk.slice(o))[0],a=o+i.length,l=this.makeToken("REGEX",null,0,a),!1){case!!se.test(i):this.error("invalid regular expression flags "+i,{offset:o,length:i.length});break;case!(m||1===f.length):null==e&&(e=this.formatHeregex(f[0][1])),this.token("REGEX",""+this.makeDelimitedLiteral(e,{delimiter:"/"})+i,0,a,l);break;default:this.token("REGEX_START","(",0,0,l),this.token("IDENTIFIER","RegExp",0,0),this.token("CALL_START","(",0,0),this.mergeInterpolationTokens(f,{delimiter:"\"",double:!0},this.formatHeregex),i&&(this.token(",",",",o-1,0),this.token("STRING","\""+i+"\"",o-1,i.length)),this.token(")",")",a-1,0),this.token("REGEX_END",")",a-1,0);}return a},e.prototype.lineToken=function(){var e,t,n,a,i;if(!(n=I.exec(this.chunk)))return 0;if(t=n[0],this.seenFor=!1,this.importSpecifierList||(this.seenImport=!1),this.exportSpecifierList||(this.seenExport=!1),i=t.length-1-t.lastIndexOf("\n"),a=this.unfinished(),i-this.indebt===this.indent)return a?this.suppressNewlines():this.newlineToken(0),t.length;if(i>this.indent){if(a)return this.indebt=i-this.indent,this.suppressNewlines(),t.length;if(!this.tokens.length)return this.baseIndent=this.indent=i,t.length;e=i-this.indent+this.outdebt,this.token("INDENT",e,t.length-i,i),this.indents.push(e),this.ends.push({tag:"OUTDENT"}),this.outdebt=this.indebt=0,this.indent=i}else i<this.baseIndent?this.error("missing indentation",{offset:t.length}):(this.indebt=0,this.outdentToken(this.indent-i,a,t.length));return t.length},e.prototype.outdentToken=function(e,n,a){var i,o,r,s;for(i=this.indent-e;0<e;)r=this.indents[this.indents.length-1],r?r===this.outdebt?(e-=this.outdebt,this.outdebt=0):r<this.outdebt?(this.outdebt-=r,e-=r):(o=this.indents.pop()+this.outdebt,a&&(s=this.chunk[a],0<=t.call(T,s))&&(i-=o-e,e=o),this.outdebt=0,this.pair("OUTDENT"),this.token("OUTDENT",e,0,a),e-=o):e=0;for(o&&(this.outdebt-=e);";"===this.value();)this.tokens.pop();return"TERMINATOR"===this.tag()||n||this.token("TERMINATOR","\n",a,0),this.indent=i,this},e.prototype.whitespaceToken=function(){var e,t,n,a;return(e=le.exec(this.chunk))||(t="\n"===this.chunk.charAt(0))?(a=this.tokens,n=a[a.length-1],n&&(n[e?"spaced":"newLine"]=!0),e?e[0].length:0):0},e.prototype.newlineToken=function(e){for(;";"===this.value();)this.tokens.pop();return"TERMINATOR"!==this.tag()&&this.token("TERMINATOR","\n",e,0),this},e.prototype.suppressNewlines=function(){return"\\"===this.value()&&this.tokens.pop(),this},e.prototype.literalToken=function(){var e,n,i,o,l,d,p,c,u,g,_,y,h;if((e=B.exec(this.chunk))?(h=e[0],s.test(h)&&this.tagParameters()):h=this.chunk.charAt(0),_=h,l=this.tokens,o=l[l.length-1],o&&0<=t.call(["="].concat(a.call(f)),h)&&(g=!1,"="!==h||"||"!==(d=o[1])&&"&&"!==d||o.spaced||(o[0]="COMPOUND_ASSIGN",o[1]+="=",o=this.tokens[this.tokens.length-2],g=!0),o&&"PROPERTY"!==o[0]&&(i=null==(p=o.origin)?o:p,n=me(o[1],i[1]),n&&this.error(n,i[2])),g))return h.length;if("{"===h&&this.seenImport?this.importSpecifierList=!0:this.importSpecifierList&&"}"===h?this.importSpecifierList=!1:"{"===h&&"EXPORT"===(null==o?void 0:o[0])?this.exportSpecifierList=!0:this.exportSpecifierList&&"}"===h&&(this.exportSpecifierList=!1),";"===h)this.seenFor=this.seenImport=this.seenExport=!1,_="TERMINATOR";else if("*"===h&&"EXPORT"===o[0])_="EXPORT_ALL";else if(0<=t.call(R,h))_="MATH";else if(0<=t.call(m,h))_="COMPARE";else if(0<=t.call(f,h))_="COMPOUND_ASSIGN";else if(0<=t.call(ae,h))_="UNARY";else if(0<=t.call(ie,h))_="UNARY_MATH";else if(0<=t.call(V,h))_="SHIFT";else if("?"===h&&(null==o?void 0:o.spaced))_="BIN?";else if(o&&!o.spaced)if("("===h&&(c=o[0],0<=t.call(r,c)))"?"===o[0]&&(o[0]="FUNC_EXIST"),_="CALL_START";else if("["===h&&(u=o[0],0<=t.call(k,u)))switch(_="INDEX_START",o[0]){case"?":o[0]="INDEX_SOAK";}return y=this.makeToken(_,h),"("===h||"{"===h||"["===h?this.ends.push({tag:N[h],origin:y}):")"===h||"}"===h||"]"===h?this.pair(h):void 0,(this.tokens.push(y),h.length)},e.prototype.tagParameters=function(){var e,t,n,a;if(")"!==this.tag())return this;for(t=[],a=this.tokens,e=a.length,a[--e][0]="PARAM_END";n=a[--e];)switch(n[0]){case")":t.push(n);break;case"(":case"CALL_START":if(t.length)t.pop();else return"("===n[0]?(n[0]="PARAM_START",this):this;}return this},e.prototype.closeIndentation=function(){return this.outdentToken(this.indent)},e.prototype.matchWithInterpolations=function(t,n){var a,i,o,r,s,l,d,p,c,u,m,f,g,_,y;if(y=[],p=n.length,this.chunk.slice(0,p)!==n)return null;for(g=this.chunk.slice(p);_=t.exec(g)[0],this.validateEscapes(_,{isRegex:"/"===n.charAt(0),offsetInChunk:p}),y.push(this.makeToken("NEOSTRING",_,p)),g=g.slice(_.length),p+=_.length,"#{"===g.slice(0,2);)u=this.getLineAndColumnFromChunk(p+1),l=u[0],i=u[1],m=new e().tokenize(g.slice(1),{line:l,column:i,untilBalanced:!0}),d=m.tokens,r=m.index,r+=1,c=d[0],a=d[d.length-1],c[0]=c[1]="(",a[0]=a[1]=")",a.origin=["","end of interpolation",a[2]],"TERMINATOR"===(null==(f=d[1])?void 0:f[0])&&d.splice(1,1),y.push(["TOKENS",d]),g=g.slice(r),p+=r;return g.slice(0,n.length)!==n&&this.error("missing "+n,{length:n.length}),o=y[0],s=y[y.length-1],o[2].first_column-=n.length,"\n"===s[1].substr(-1)?(s[2].last_line+=1,s[2].last_column=n.length-1):s[2].last_column+=n.length,0===s[1].length&&(s[2].last_column-=1),{tokens:y,index:p+n.length}},e.prototype.mergeInterpolationTokens=function(e,t,n){var a,o,r,s,i,l,d,p,c,u,m,f,g,_,y,h;for(1<e.length&&(c=this.token("STRING_START","(",0,0)),r=this.tokens.length,(s=i=0,d=e.length);i<d;s=++i){switch(_=e[s],g=_[0],h=_[1],g){case"TOKENS":if(2===h.length)continue;p=h[0],y=h;break;case"NEOSTRING":if(a=n.call(this,_[1],s),0===a.length)if(0===s)o=this.tokens.length;else continue;2===s&&null!=o&&this.tokens.splice(o,2),_[0]="STRING",_[1]=this.makeDelimitedLiteral(a,t),p=_,y=[_];}this.tokens.length>r&&(u=this.token("+","+"),u[2]={first_line:p[2].first_line,first_column:p[2].first_column,last_line:p[2].first_line,last_column:p[2].first_column}),(m=this.tokens).push.apply(m,y)}if(c)return l=e[e.length-1],c.origin=["STRING",null,{first_line:c[2].first_line,first_column:c[2].first_column,last_line:l[2].last_line,last_column:l[2].last_column}],f=this.token("STRING_END",")"),f[2]={first_line:l[2].last_line,first_column:l[2].last_column,last_line:l[2].last_line,last_column:l[2].last_column}},e.prototype.pair=function(e){var t,n,a,i,o;return a=this.ends,n=a[a.length-1],e===(o=null==n?void 0:n.tag)?this.ends.pop():("OUTDENT"!==o&&this.error("unmatched "+e),i=this.indents,t=i[i.length-1],this.outdentToken(t,!0),this.pair(e))},e.prototype.getLineAndColumnFromChunk=function(e){var t,n,a,i,o;return 0===e?[this.chunkLine,this.chunkColumn]:(o=e>=this.chunk.length?this.chunk:this.chunk.slice(0,+(e-1)+1||9e9),a=pe(o,"\n"),t=this.chunkColumn,0<a?(i=o.split("\n"),n=i[i.length-1],t=n.length):t+=o.length,[this.chunkLine+a,t])},e.prototype.makeToken=function(e,t,n,a){var i,o,r,s,l;return null==n&&(n=0),null==a&&(a=t.length),o={},r=this.getLineAndColumnFromChunk(n),o.first_line=r[0],o.first_column=r[1],i=0<a?a-1:0,s=this.getLineAndColumnFromChunk(n+i),o.last_line=s[0],o.last_column=s[1],l=[e,t,o],l},e.prototype.token=function(e,t,n,a,i){var o;return o=this.makeToken(e,t,n,a),i&&(o.origin=i),this.tokens.push(o),o},e.prototype.tag=function(){var e,t;return e=this.tokens,t=e[e.length-1],null==t?void 0:t[0]},e.prototype.value=function(){var e,t;return e=this.tokens,t=e[e.length-1],null==t?void 0:t[1]},e.prototype.unfinished=function(){var e;return D.test(this.chunk)||(e=this.tag(),0<=t.call(oe,e))},e.prototype.formatString=function(e,t){return this.replaceUnicodeCodePointEscapes(e.replace(J,"$1"),t)},e.prototype.formatHeregex=function(e){return this.formatRegex(e.replace(x,"$1$2"),{delimiter:"///"})},e.prototype.formatRegex=function(e,t){return this.replaceUnicodeCodePointEscapes(e,t)},e.prototype.unicodeCodePointToUnicodeEscapes=function(e){var t,n,a;return(a=function(e){var t;return t=e.toString(16),"\\u"+he("0",4-t.length)+t},65536>e)?a(e):(t=E((e-65536)/1024)+55296,n=(e-65536)%1024+56320,""+a(t)+a(n))},e.prototype.replaceUnicodeCodePointEscapes=function(e,t){return e.replace(re,function(e){return function(n,a,i,o){var r;return a?a:(r=parseInt(i,16),1114111<r&&e.error("unicode code point escapes greater than \\u{10ffff} are not allowed",{offset:o+t.delimiter.length,length:i.length+4}),e.unicodeCodePointToUnicodeEscapes(r))}}(this))},e.prototype.validateEscapes=function(e,t){var n,a,i,o,r,s,l,d,p,c;if(null==t&&(t={}),o=t.isRegex?W:K,r=o.exec(e),!!r)return r[0],n=r[1],l=r[2],a=r[3],c=r[4],p=r[5],s=l?"octal escape sequences are not allowed":"invalid escape sequence",i="\\"+(l||a||c||p),this.error(s+" "+i,{offset:(null==(d=t.offsetInChunk)?0:d)+r.index+n.length,length:i.length})},e.prototype.makeDelimitedLiteral=function(e,t){var n;return null==t&&(t={}),""===e&&"/"===t.delimiter&&(e="(?:)"),n=RegExp("(\\\\\\\\)|(\\\\0(?=[1-7]))|\\\\?("+t.delimiter+")|\\\\?(?:(\\n)|(\\r)|(\\u2028)|(\\u2029))|(\\\\.)","g"),e=e.replace(n,function(e,n,a,i,o,r,s,l,d){switch(!1){case!n:return t.double?n+n:n;case!a:return"\\x00";case!i:return"\\"+i;case!o:return"\\n";case!r:return"\\r";case!s:return"\\u2028";case!l:return"\\u2029";case!d:return t.double?"\\"+d:d;}}),""+t.delimiter+e+t.delimiter},e.prototype.error=function(e,t){var n,a,i,o,r,s;return null==t&&(t={}),i="first_line"in t?t:(r=this.getLineAndColumnFromChunk(null==(o=t.offset)?0:o),a=r[0],n=r[1],r,{first_line:a,first_column:n,last_column:n+(null==(s=t.length)?1:s)-1}),xe(e,i)},e}(),me=function(e,n){switch(null==n&&(n=e),!1){case 0>t.call(a.call(C).concat(a.call(c)),e):return"keyword '"+n+"' can't be assigned";case 0>t.call(Z,e):return"'"+n+"' can't be assigned";case 0>t.call(q,e):return"reserved word '"+n+"' can't be assigned";default:return!1;}},n.isUnassignable=me,ue=function(e){var t;return"IDENTIFIER"===e[0]?("from"===e[1]&&(e[1][0]="IDENTIFIER",!0),!0):"FOR"!==e[0]&&("{"===(t=e[1])||"["===t||","===t||":"===t?!1:!0)},C=["true","false","null","this","new","delete","typeof","in","instanceof","return","throw","break","continue","debugger","yield","if","else","switch","for","while","do","try","catch","finally","class","extends","super","import","export","default"],c=["undefined","Infinity","NaN","then","unless","until","loop","of","by","when"],d={and:"&&",or:"||",is:"==",isnt:"!=",not:"!",yes:"true",no:"false",on:"true",off:"false"},l=function(){var e;for(fe in e=[],d)e.push(fe);return e}(),c=c.concat(l),q=["case","function","var","void","with","const","let","enum","native","implements","interface","package","private","protected","public","static"],Z=["arguments","eval"],n.JS_FORBIDDEN=C.concat(q).concat(Z),i=65279,S=/^(?!\d)((?:(?!\s)[$\w\x7f-\uffff])+)([^\n\S]*:(?!:))?/,F=/^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i,B=/^(?:[-=]>|[-+*\/%<>&|^!?=]=|>>>=?|([-+:])\1|([&|<>*\/%])\2=?|\?(\.|::)|\.{2,3})/,le=/^[^\n\S]+/,u=/^###([^#][\s\S]*?)(?:###[^\n\S]*|###$)|^(?:\s*#(?!##[^#]).*)+/,s=/^[-=]>/,I=/^(?:\n[^\n\S]*)+/,A=/^`(?!``)((?:[^`\\]|\\[\s\S])*)`/,v=/^```((?:[^`\\]|\\[\s\S]|`(?!``))*)```/,ee=/^(?:'''|"""|'|")/,Q=/^(?:[^\\']|\\[\s\S])*/,X=/^(?:[^\\"#]|\\[\s\S]|\#(?!\{))*/,h=/^(?:[^\\']|\\[\s\S]|'(?!''))*/,_=/^(?:[^\\"#]|\\[\s\S]|"(?!"")|\#(?!\{))*/,J=/((?:\\\\)+)|\\[^\S\n]*\n\s*/g,G=/\s*\n\s*/g,y=/\n+([^\n\S]*)(?=\S)/g,j=/^\/(?!\/)((?:[^[\/\n\\]|\\[^\n]|\[(?:\\[^\n]|[^\]\n\\])*\])*)(\/)?/,U=/^\w*/,se=/^(?!.*(.).*\1)[imguy]*$/,b=/^(?:[^\\\/#]|\\[\s\S]|\/(?!\/\/)|\#(?!\{))*/,x=/((?:\\\\)+)|\\(\s)|\s+(?:#.*)?/g,$=/^(\/|\/{3}\s*)(\*)/,z=/^\/=?\s/,g=/\*\//,D=/^\s*(?:,|\??\.(?![.\d])|::)/,K=/((?:^|[^\\])(?:\\\\)*)\\(?:(0[0-7]|[1-7])|(x(?![\da-fA-F]{2}).{0,2})|(u\{(?![\da-fA-F]{1,}\})[^}]*\}?)|(u(?!\{|[\da-fA-F]{4}).{0,4}))/,W=/((?:^|[^\\])(?:\\\\)*)\\(?:(0[0-7])|(x(?![\da-fA-F]{2}).{0,2})|(u\{(?![\da-fA-F]{1,}\})[^}]*\}?)|(u(?!\{|[\da-fA-F]{4}).{0,4}))/,re=/(\\\\)|\\u\{([\da-fA-F]+)\}/g,w=/^[^\n\S]*\n/,te=/\n[^\n\S]*$/,ne=/\s+$/,f=["-=","+=","/=","*=","%=","||=","&&=","?=","<<=",">>=",">>>=","&=","^=","|=","**=","//=","%%="],ae=["NEW","TYPEOF","DELETE","DO"],ie=["!","~"],V=["<<",">>",">>>"],m=["==","!=","<",">","<=",">="],R=["*","/","%","//","%%"],H=["IN","OF","INSTANCEOF"],o=["TRUE","FALSE"],r=["IDENTIFIER","PROPERTY",")","]","?","@","THIS","SUPER"],k=r.concat(["NUMBER","INFINITY","NAN","STRING","STRING_END","REGEX","REGEX_END","BOOL","NULL","UNDEFINED","}","::"]),M=k.concat(["++","--"]),O=["INDENT","OUTDENT","TERMINATOR"],T=[")","}","]"],oe=["\\",".","?.","?::","UNARY","MATH","UNARY_MATH","+","-","**","SHIFT","RELATION","COMPARE","&","^","|","&&","||","BIN?","THROW","EXTENDS","DEFAULT"]}).call(this)},{"./helpers":37,"./rewriter":42}],39:[function(e,t,n){(function(){var t=function(e,t){function n(){this.constructor=e}for(var i in t)a.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},s=[].slice,r,d,c,o,u,l,f,p,m,g,_,y,h,b,x,v,S,k,E,N,A,C,w,O,D,P,R,I,M,F,B,z,U,$,j,W,H,q,Y,V,G,Z,X,K,J,Q,ee,te,ne,ae,ie,oe,re,se,le,de,pe,ce,ue,me,fe,ge,_e,ye,he,be,xe,ve,Se,Te,ke,Ee,Ne,Le,Ae,Ce,we,Oe,De,Pe,Re,Ie,Me,Fe,Be,ze,je,Ue,$e,We,He,qe,Ye,Ve,Ge,Ze,Xe,Ke,Je,Qe;Error.stackTraceLimit=2e308,me=e("./scope").Scope,Ve=e("./lexer"),We=Ve.isUnassignable,U=Ve.JS_FORBIDDEN,Ge=e("./helpers"),Re=Ge.compact,Be=Ge.flatten,Fe=Ge.extend,qe=Ge.merge,Ie=Ge.del,Xe=Ge.starts,Me=Ge.ends,Ze=Ge.some,Pe=Ge.addLocationDataFn,He=Ge.locationDataToString,Ke=Ge.throwSyntaxError,n.extend=Fe,n.addLocationDataFn=Pe,Oe=function(){return!0},J=function(){return!1},Se=function(){return this},K=function(){return this.negated=!this.negated,this},n.CodeFragment=g=function(){function e(e,t){var n;this.code=""+t,this.locationData=null==e?void 0:e.locationData,this.type=(null==e||null==(n=e.constructor)?void 0:n.name)||"unknown"}return e.prototype.toString=function(){return""+this.code+(this.locationData?": "+He(this.locationData):"")},e}(),ze=function(e){var t;return function(){var n,a,i;for(i=[],n=0,a=e.length;n<a;n++)t=e[n],i.push(t.code);return i}().join("")},n.Base=o=function(){function e(){}return e.prototype.compile=function(e,t){return ze(this.compileToFragments(e,t))},e.prototype.compileToFragments=function(e,t){var n;return e=Fe({},e),t&&(e.level=t),n=this.unfoldSoak(e)||this,n.tab=e.indent,e.level!==Y&&n.isStatement(e)?n.compileClosure(e):n.compileNode(e)},e.prototype.compileClosure=function(e){var t,n,a,i,o,s,l;return(i=this.jumps())&&i.error("cannot use a pure statement in an expression"),e.sharedScope=!0,a=new m([],u.wrap([this])),t=[],((n=this.contains(Ue))||this.contains($e))&&(t=[new ke],n?(o="apply",t.push(new C("arguments"))):o="call",a=new Ce(a,[new r(new se(o))])),s=new f(a,t).compileNode(e),(a.isGenerator||(null==(l=a.base)?void 0:l.isGenerator))&&(s.unshift(this.makeCode("(yield* ")),s.push(this.makeCode(")"))),s},e.prototype.cache=function(e,t,n){var a,i,o;return a=null==n?this.isComplex():n(this),a?(i=new C(e.scope.freeVariable("ref")),o=new c(i,this),t?[o.compileToFragments(e,t),[this.makeCode(i.value)]]:[o,i]):(i=t?this.compileToFragments(e,t):this,[i,i])},e.prototype.cacheToCodeFragments=function(e){return[ze(e[0]),ze(e[1])]},e.prototype.makeReturn=function(e){var t;return t=this.unwrapAll(),e?new f(new V(e+".push"),[t]):new ce(t)},e.prototype.contains=function(e){var t;return t=void 0,this.traverseChildren(!1,function(a){if(e(a))return t=a,!1}),t},e.prototype.lastNonComment=function(e){var t;for(t=e.length;t--;)if(!(e[t]instanceof _))return e[t];return null},e.prototype.toString=function(e,t){var n;return null==e&&(e=""),null==t&&(t=this.constructor.name),n="\n"+e+t,this.soak&&(n+="?"),this.eachChild(function(t){return n+=t.toString(e+ve)}),n},e.prototype.eachChild=function(e){var t,n,a,i,o,r,s,l;if(!this.children)return this;for(s=this.children,a=0,o=s.length;a<o;a++)if(t=s[a],this[t])for(l=Be([this[t]]),i=0,r=l.length;i<r;i++)if(n=l[i],!1===e(n))return this;return this},e.prototype.traverseChildren=function(e,t){return this.eachChild(function(n){var a;if(a=t(n),!1!==a)return n.traverseChildren(e,t)})},e.prototype.invert=function(){return new ae("!",this)},e.prototype.unwrapAll=function(){var e;for(e=this;e!==(e=e.unwrap());)continue;return e},e.prototype.children=[],e.prototype.isStatement=J,e.prototype.jumps=J,e.prototype.isComplex=Oe,e.prototype.isChainable=J,e.prototype.isAssignable=J,e.prototype.isNumber=J,e.prototype.unwrap=Se,e.prototype.unfoldSoak=J,e.prototype.assigns=J,e.prototype.updateLocationDataIfMissing=function(e){return this.locationData?this:(this.locationData=e,this.eachChild(function(t){return t.updateLocationDataIfMissing(e)}))},e.prototype.error=function(e){return Ke(e,this.locationData)},e.prototype.makeCode=function(e){return new g(this,e)},e.prototype.wrapInBraces=function(e){return[].concat(this.makeCode("("),e,this.makeCode(")"))},e.prototype.joinFragmentArrays=function(e,t){var n,a,o,i,r;for(n=[],o=i=0,r=e.length;i<r;o=++i)a=e[o],o&&n.push(this.makeCode(t)),n=n.concat(a);return n},e}(),n.Block=u=function(e){function n(e){this.expressions=Re(Be(e||[]))}return t(n,e),n.prototype.children=["expressions"],n.prototype.push=function(e){return this.expressions.push(e),this},n.prototype.pop=function(){return this.expressions.pop()},n.prototype.unshift=function(e){return this.expressions.unshift(e),this},n.prototype.unwrap=function(){return 1===this.expressions.length?this.expressions[0]:this},n.prototype.isEmpty=function(){return!this.expressions.length},n.prototype.isStatement=function(e){var t,n,a,i;for(i=this.expressions,n=0,a=i.length;n<a;n++)if(t=i[n],t.isStatement(e))return!0;return!1},n.prototype.jumps=function(e){var t,n,a,i,o;for(o=this.expressions,n=0,i=o.length;n<i;n++)if(t=o[n],a=t.jumps(e))return a},n.prototype.makeReturn=function(e){var t,n;for(n=this.expressions.length;n--;)if(t=this.expressions[n],!(t instanceof _)){this.expressions[n]=t.makeReturn(e),t instanceof ce&&!t.expression&&this.expressions.splice(n,1);break}return this},n.prototype.compileToFragments=function(e,t){return null==e&&(e={}),e.scope?n.__super__.compileToFragments.call(this,e,t):this.compileRoot(e)},n.prototype.compileNode=function(e){var t,a,i,o,r,s,l,d,p;for(this.tab=e.indent,p=e.level===Y,a=[],d=this.expressions,(o=r=0,s=d.length);r<s;o=++r)l=d[o],l=l.unwrapAll(),l=l.unfoldSoak(e)||l,l instanceof n?a.push(l.compileNode(e)):p?(l.front=!0,i=l.compileToFragments(e),!l.isStatement(e)&&(i.unshift(this.makeCode(""+this.tab)),i.push(this.makeCode(";"))),a.push(i)):a.push(l.compileToFragments(e,W));return p?this.spaced?[].concat(this.joinFragmentArrays(a,"\n\n"),this.makeCode("\n")):this.joinFragmentArrays(a,"\n"):(t=a.length?this.joinFragmentArrays(a,", "):[this.makeCode("void 0")],1<a.length&&e.level>=W?this.wrapInBraces(t):t)},n.prototype.compileRoot=function(e){var t,n,a,i,o,r,s,l,d,p,c;for(e.indent=e.bare?"":ve,e.level=Y,this.spaced=!0,e.scope=new me(null,this,null,null==(d=e.referencedVars)?[]:d),p=e.locals||[],(i=0,o=p.length);i<o;i++)r=p[i],e.scope.parameter(r);return s=[],e.bare||(l=function(){var e,n,i,o;for(i=this.expressions,o=[],(a=e=0,n=i.length);e<n&&(t=i[a],!!(t.unwrap()instanceof _));a=++e)o.push(t);return o}.call(this),c=this.expressions.slice(l.length),this.expressions=l,l.length&&(s=this.compileNode(qe(e,{indent:""})),s.push(this.makeCode("\n"))),this.expressions=c),n=this.compileWithDeclarations(e),e.bare?n:[].concat(s,this.makeCode("(function() {\n"),n,this.makeCode("\n}).call(this);\n"))},n.prototype.compileWithDeclarations=function(e){var t,n,a,o,r,i,s,l,d,p,c,u,m,f;for(o=[],l=[],d=this.expressions,(r=i=0,s=d.length);i<s&&(a=d[r],a=a.unwrap(),!!(a instanceof _||a instanceof V));r=++i);return e=qe(e,{level:Y}),r&&(u=this.expressions.splice(r,9e9),p=[this.spaced,!1],f=p[0],this.spaced=p[1],c=[this.compileNode(e),f],o=c[0],this.spaced=c[1],this.expressions=u),l=this.compileNode(e),m=e.scope,m.expressions===this&&(n=e.scope.hasDeclarations(),t=m.hasAssignments,n||t?(r&&o.push(this.makeCode("\n")),o.push(this.makeCode(this.tab+"var ")),n&&o.push(this.makeCode(m.declaredVariables().join(", "))),t&&(n&&o.push(this.makeCode(",\n"+(this.tab+ve))),o.push(this.makeCode(m.assignedVariables().join(",\n"+(this.tab+ve))))),o.push(this.makeCode(";\n"+(this.spaced?"\n":"")))):o.length&&l.length&&o.push(this.makeCode("\n"))),o.concat(l)},n.wrap=function(e){return 1===e.length&&e[0]instanceof n?e[0]:new n(e)},n}(o),n.Literal=V=function(e){function n(e){this.value=e}return t(n,e),n.prototype.isComplex=J,n.prototype.assigns=function(e){return e===this.value},n.prototype.compileNode=function(){return[this.makeCode(this.value)]},n.prototype.toString=function(){return" "+(this.isStatement()?n.__super__.toString.apply(this,arguments):this.constructor.name)+": "+this.value},n}(o),n.NumberLiteral=te=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(V),n.InfinityLiteral=z=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(){return[this.makeCode("2e308")]},n}(te),n.NaNLiteral=Q=function(e){function n(){n.__super__.constructor.call(this,"NaN")}return t(n,e),n.prototype.compileNode=function(e){var t;return t=[this.makeCode("0/0")],e.level>=H?this.wrapInBraces(t):t},n}(te),n.StringLiteral=ye=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(V),n.RegexLiteral=de=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(V),n.PassthroughLiteral=re=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(V),n.IdentifierLiteral=C=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isAssignable=Oe,n}(V),n.PropertyName=se=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isAssignable=Oe,n}(V),n.StatementLiteral=_e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isStatement=Oe,n.prototype.makeReturn=Se,n.prototype.jumps=function(e){return"break"!==this.value||(null==e?void 0:e.loop)||(null==e?void 0:e.block)?"continue"!==this.value||null!=e&&e.loop?void 0:this:this},n.prototype.compileNode=function(){return[this.makeCode(""+this.tab+this.value+";")]},n}(V),n.ThisLiteral=ke=function(e){function n(){n.__super__.constructor.call(this,"this")}return t(n,e),n.prototype.compileNode=function(e){var t,n;return t=(null==(n=e.scope.method)?void 0:n.bound)?e.scope.method.context:this.value,[this.makeCode(t)]},n}(V),n.UndefinedLiteral=Ae=function(e){function n(){n.__super__.constructor.call(this,"undefined")}return t(n,e),n.prototype.compileNode=function(e){return[this.makeCode(e.level>=$?"(void 0)":"void 0")]},n}(V),n.NullLiteral=ee=function(e){function n(){n.__super__.constructor.call(this,"null")}return t(n,e),n}(V),n.BooleanLiteral=l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(V),n.Return=ce=function(e){function n(e){this.expression=e}return t(n,e),n.prototype.children=["expression"],n.prototype.isStatement=Oe,n.prototype.makeReturn=Se,n.prototype.jumps=Se,n.prototype.compileToFragments=function(e,t){var a,i;return a=null==(i=this.expression)?void 0:i.makeReturn(),a&&!(a instanceof n)?a.compileToFragments(e,t):n.__super__.compileToFragments.call(this,e,t)},n.prototype.compileNode=function(e){var t;return t=[],t.push(this.makeCode(this.tab+("return"+(this.expression?" ":"")))),this.expression&&(t=t.concat(this.expression.compileToFragments(e,q))),t.push(this.makeCode(";")),t},n}(o),n.YieldReturn=De=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){return null==e.scope.parent&&this.error("yield can only occur inside functions"),n.__super__.compileNode.apply(this,arguments)},n}(ce),n.Value=Ce=function(e){function n(e,t,a){return!t&&e instanceof n?e:(this.base=e,this.properties=t||[],a&&(this[a]=!0),this)}return t(n,e),n.prototype.children=["base","properties"],n.prototype.add=function(e){return this.properties=this.properties.concat(e),this},n.prototype.hasProperties=function(){return!!this.properties.length},n.prototype.bareLiteral=function(e){return!this.properties.length&&this.base instanceof e},n.prototype.isArray=function(){return this.bareLiteral(d)},n.prototype.isRange=function(){return this.bareLiteral(le)},n.prototype.isComplex=function(){return this.hasProperties()||this.base.isComplex()},n.prototype.isAssignable=function(){return this.hasProperties()||this.base.isAssignable()},n.prototype.isNumber=function(){return this.bareLiteral(te)},n.prototype.isString=function(){return this.bareLiteral(ye)},n.prototype.isRegex=function(){return this.bareLiteral(de)},n.prototype.isUndefined=function(){return this.bareLiteral(Ae)},n.prototype.isNull=function(){return this.bareLiteral(ee)},n.prototype.isBoolean=function(){return this.bareLiteral(l)},n.prototype.isAtomic=function(){var e,t,n,a;for(a=this.properties.concat(this.base),e=0,t=a.length;e<t;e++)if(n=a[e],n.soak||n instanceof f)return!1;return!0},n.prototype.isNotCallable=function(){return this.isNumber()||this.isString()||this.isRegex()||this.isArray()||this.isRange()||this.isSplice()||this.isObject()||this.isUndefined()||this.isNull()||this.isBoolean()},n.prototype.isStatement=function(e){return!this.properties.length&&this.base.isStatement(e)},n.prototype.assigns=function(e){return!this.properties.length&&this.base.assigns(e)},n.prototype.jumps=function(e){return!this.properties.length&&this.base.jumps(e)},n.prototype.isObject=function(e){return!this.properties.length&&this.base instanceof ne&&(!e||this.base.generated)},n.prototype.isSplice=function(){var e,t;return t=this.properties,e=t[t.length-1],e instanceof fe},n.prototype.looksStatic=function(e){var t;return this.base.value===e&&1===this.properties.length&&"prototype"!==(null==(t=this.properties[0].name)?void 0:t.value)},n.prototype.unwrap=function(){return this.properties.length?this:this.base},n.prototype.cacheReference=function(e){var t,a,i,o,r;return(r=this.properties,i=r[r.length-1],2>this.properties.length&&!this.base.isComplex()&&(null==i||!i.isComplex()))?[this,this]:(t=new n(this.base,this.properties.slice(0,-1)),t.isComplex()&&(a=new C(e.scope.freeVariable("base")),t=new n(new oe(new c(a,t)))),!i)?[t,a]:(i.isComplex()&&(o=new C(e.scope.freeVariable("name")),i=new B(new c(o,i.index)),o=new B(o)),[t.add(i),new n(a||t.base,[o||i])])},n.prototype.compileNode=function(e){var t,n,a,i,o;for(this.base.front=this.front,o=this.properties,t=this.base.compileToFragments(e,o.length?$:null),o.length&&ue.test(ze(t))&&t.push(this.makeCode(".")),(n=0,a=o.length);n<a;n++)i=o[n],t.push.apply(t,i.compileToFragments(e));return t},n.prototype.unfoldSoak=function(e){return null==this.unfoldedSoak?this.unfoldedSoak=function(t){return function(){var a,o,i,r,s,l,d,p,u,m;if(i=t.base.unfoldSoak(e))return(p=i.body.properties).push.apply(p,t.properties),i;for(u=t.properties,o=r=0,s=u.length;r<s;o=++r)if(l=u[o],!!l.soak)return l.soak=!1,a=new n(t.base,t.properties.slice(0,o)),m=new n(t.base,t.properties.slice(o)),a.isComplex()&&(d=new C(e.scope.freeVariable("ref")),a=new oe(new c(d,a)),m.base=d),new w(new y(a),m,{soak:!0});return!1}}(this)():this.unfoldedSoak},n}(o),n.Comment=_=function(e){function n(e){this.comment=e}return t(n,e),n.prototype.isStatement=Oe,n.prototype.makeReturn=Se,n.prototype.compileNode=function(e,t){var n,a;return a=this.comment.replace(/^(\s*)#(?=\s)/gm,"$1 *"),n="/*"+Ye(a,this.tab)+(0<=i.call(a,"\n")?"\n"+this.tab:"")+" */",(t||e.level)===Y&&(n=e.indent+n),[this.makeCode("\n"),this.makeCode(n)]},n}(o),n.Call=f=function(e){function n(e,t,n){this.variable=e,this.args=null==t?[]:t,this.soak=n,this.isNew=!1,this.variable instanceof Ce&&this.variable.isNotCallable()&&this.variable.error("literal is not a function")}return t(n,e),n.prototype.children=["variable","args"],n.prototype.updateLocationDataIfMissing=function(e){var t,a;return this.locationData&&this.needsUpdatedStartLocation&&(this.locationData.first_line=e.first_line,this.locationData.first_column=e.first_column,t=(null==(a=this.variable)?void 0:a.base)||this.variable,t.needsUpdatedStartLocation&&(this.variable.locationData.first_line=e.first_line,this.variable.locationData.first_column=e.first_column,t.updateLocationDataIfMissing(e)),delete this.needsUpdatedStartLocation),n.__super__.updateLocationDataIfMissing.apply(this,arguments)},n.prototype.newInstance=function(){var e,t;return e=(null==(t=this.variable)?void 0:t.base)||this.variable,e instanceof n&&!e.isNew?e.newInstance():this.isNew=!0,this.needsUpdatedStartLocation=!0,this},n.prototype.unfoldSoak=function(e){var t,a,i,o,r,s,l,d,p;if(this.soak){if(this instanceof be)o=new V(this.superReference(e)),p=new Ce(o);else{if(a=Je(e,this,"variable"))return a;l=new Ce(this.variable).cacheReference(e),o=l[0],p=l[1]}return p=new n(p,this.args),p.isNew=this.isNew,o=new V("typeof "+o.compile(e)+" === \"function\""),new w(o,new Ce(p),{soak:!0})}for(t=this,s=[];;){if(t.variable instanceof n){s.push(t),t=t.variable;continue}if(!(t.variable instanceof Ce))break;if(s.push(t),!((t=t.variable.base)instanceof n))break}for(d=s.reverse(),i=0,r=d.length;i<r;i++)t=d[i],a&&(t.variable instanceof n?t.variable=a:t.variable.base=a),a=Je(e,t,"variable");return a},n.prototype.compileNode=function(e){var t,n,a,i,o,r,s,l,d,p;if(null!=(d=this.variable)&&(d.front=this.front),i=ge.compileSplattedArray(e,this.args,!0),i.length)return this.compileSplat(e,i);for(a=[],p=this.args,(n=r=0,s=p.length);r<s;n=++r)t=p[n],n&&a.push(this.makeCode(", ")),a.push.apply(a,t.compileToFragments(e,W));return o=[],this instanceof be?(l=this.superReference(e)+(".call("+this.superThis(e)),a.length&&(l+=", "),o.push(this.makeCode(l))):(this.isNew&&o.push(this.makeCode("new ")),o.push.apply(o,this.variable.compileToFragments(e,$)),o.push(this.makeCode("("))),o.push.apply(o,a),o.push(this.makeCode(")")),o},n.prototype.compileSplat=function(e,t){var n,a,i,o,r,s;return this instanceof be?[].concat(this.makeCode(this.superReference(e)+".apply("+this.superThis(e)+", "),t,this.makeCode(")")):this.isNew?(o=this.tab+ve,[].concat(this.makeCode("(function(func, args, ctor) {\n"+o+"ctor.prototype = func.prototype;\n"+o+"var child = new ctor, result = func.apply(child, args);\n"+o+"return Object(result) === result ? result : child;\n"+this.tab+"})("),this.variable.compileToFragments(e,W),this.makeCode(", "),t,this.makeCode(", function(){})"))):(n=[],a=new Ce(this.variable),(r=a.properties.pop())&&a.isComplex()?(s=e.scope.freeVariable("ref"),n=n.concat(this.makeCode("("+s+" = "),a.compileToFragments(e,W),this.makeCode(")"),r.compileToFragments(e))):(i=a.compileToFragments(e,$),ue.test(ze(i))&&(i=this.wrapInBraces(i)),r?(s=ze(i),i.push.apply(i,r.compileToFragments(e))):s="null",n=n.concat(i)),n=n.concat(this.makeCode(".apply("+s+", "),t,this.makeCode(")")))},n}(o),n.SuperCall=be=function(e){function n(e){n.__super__.constructor.call(this,null,null==e?[new ge(new C("arguments"))]:e),this.isBare=null!=e}return t(n,e),n.prototype.superReference=function(e){var t,n,a,i,o,s,l,d;return o=e.scope.namedMethod(),(null==o?void 0:o.klass)?(i=o.klass,s=o.name,d=o.variable,i.isComplex()&&(a=new C(e.scope.parent.freeVariable("base")),n=new Ce(new oe(new c(a,i))),d.base=n,d.properties.splice(0,i.properties.length)),(s.isComplex()||s instanceof B&&s.index.isAssignable())&&(l=new C(e.scope.parent.freeVariable("name")),s=new B(new c(l,s.index)),d.properties.pop(),d.properties.push(s)),t=[new r(new se("__super__"))],o["static"]&&t.push(new r(new se("constructor"))),t.push(null==l?s:new B(l)),new Ce(null==a?i:a,t).compile(e)):(null==o?void 0:o.ctor)?o.name+".__super__.constructor":this.error("cannot call super outside of an instance method.")},n.prototype.superThis=function(e){var t;return t=e.scope.method,t&&!t.klass&&t.context||"this"},n}(f),n.RegexWithInterpolations=pe=function(e){function n(e){null==e&&(e=[]),n.__super__.constructor.call(this,new Ce(new C("RegExp")),e,!1)}return t(n,e),n}(f),n.TaggedTemplateCall=Te=function(e){function n(e,t,a){t instanceof ye&&(t=new he(u.wrap([new Ce(t)]))),n.__super__.constructor.call(this,e,[t],a)}return t(n,e),n.prototype.compileNode=function(e){return e.inTaggedTemplateCall=!0,this.variable.compileToFragments(e,$).concat(this.args[0].compileToFragments(e,W))},n}(f),n.Extends=N=function(e){function n(e,t){this.child=e,this.parent=t}return t(n,e),n.prototype.children=["child","parent"],n.prototype.compileToFragments=function(e){return new f(new Ce(new V(Qe("extend",e))),[this.child,this.parent]).compileToFragments(e)},n}(o),n.Access=r=function(e){function n(e,t){this.name=e,this.soak="soak"===t}return t(n,e),n.prototype.children=["name"],n.prototype.compileToFragments=function(e){var t,n,a;return t=this.name.compileToFragments(e),n=this.name.unwrap(),n instanceof se?(a=n.value,0<=i.call(U,a))?[this.makeCode("[\"")].concat(s.call(t),[this.makeCode("\"]")]):[this.makeCode(".")].concat(s.call(t)):[this.makeCode("[")].concat(s.call(t),[this.makeCode("]")])},n.prototype.isComplex=J,n}(o),n.Index=B=function(e){function n(e){this.index=e}return t(n,e),n.prototype.children=["index"],n.prototype.compileToFragments=function(e){return[].concat(this.makeCode("["),this.index.compileToFragments(e,q),this.makeCode("]"))},n.prototype.isComplex=function(){return this.index.isComplex()},n}(o),n.Range=le=function(e){function n(e,t,n){this.from=e,this.to=t,this.exclusive="exclusive"===n,this.equals=this.exclusive?"":"="}return t(n,e),n.prototype.children=["from","to"],n.prototype.compileVariables=function(e){var t,n,a,i,o;return e=qe(e,{top:!0}),t=Ie(e,"isComplex"),n=this.cacheToCodeFragments(this.from.cache(e,W,t)),this.fromC=n[0],this.fromVar=n[1],a=this.cacheToCodeFragments(this.to.cache(e,W,t)),this.toC=a[0],this.toVar=a[1],(o=Ie(e,"step"))&&(i=this.cacheToCodeFragments(o.cache(e,W,t)),this.step=i[0],this.stepVar=i[1]),this.fromNum=this.from.isNumber()?+this.fromVar:null,this.toNum=this.to.isNumber()?+this.toVar:null,this.stepNum=(null==o?void 0:o.isNumber())?+this.stepVar:null},n.prototype.compileNode=function(e){var t,n,a,i,o,r,s,l,d,p,c,u,m,f;return(this.fromVar||this.compileVariables(e),!e.index)?this.compileArray(e):(s=null!=this.fromNum&&null!=this.toNum,o=Ie(e,"index"),r=Ie(e,"name"),d=r&&r!==o,f=o+" = "+this.fromC,this.toC!==this.toVar&&(f+=", "+this.toC),this.step!==this.stepVar&&(f+=", "+this.step),p=[o+" <"+this.equals,o+" >"+this.equals],l=p[0],i=p[1],n=null==this.stepNum?s?(c=[this.fromNum,this.toNum],a=c[0],m=c[1],c,a<=m?l+" "+m:i+" "+m):(t=this.stepVar?this.stepVar+" > 0":this.fromVar+" <= "+this.toVar,t+" ? "+l+" "+this.toVar+" : "+i+" "+this.toVar):0<this.stepNum?l+" "+this.toVar:i+" "+this.toVar,u=this.stepVar?o+" += "+this.stepVar:s?d?a<=m?"++"+o:"--"+o:a<=m?o+"++":o+"--":d?t+" ? ++"+o+" : --"+o:t+" ? "+o+"++ : "+o+"--",d&&(f=r+" = "+f),d&&(u=r+" = "+u),[this.makeCode(f+"; "+n+"; "+u)])},n.prototype.compileArray=function(e){var t,n,a,o,r,i,s,l,d,p,c,u,m,f;return(s=null!=this.fromNum&&null!=this.toNum,s&&20>=T(this.fromNum-this.toNum))?(p=function(){m=[];for(var e=c=this.fromNum,t=this.toNum;c<=t?e<=t:e>=t;c<=t?e++:e--)m.push(e);return m}.apply(this),this.exclusive&&p.pop(),[this.makeCode("["+p.join(", ")+"]")]):(i=this.tab+ve,r=e.scope.freeVariable("i",{single:!0}),u=e.scope.freeVariable("results"),d="\n"+i+u+" = [];",s?(e.index=r,n=ze(this.compileNode(e))):(f=r+" = "+this.fromC+(this.toC===this.toVar?"":", "+this.toC),a=this.fromVar+" <= "+this.toVar,n="var "+f+"; "+a+" ? "+r+" <"+this.equals+" "+this.toVar+" : "+r+" >"+this.equals+" "+this.toVar+"; "+a+" ? "+r+"++ : "+r+"--"),l="{ "+u+".push("+r+"); }\n"+i+"return "+u+";\n"+e.indent,o=function(e){return null==e?void 0:e.contains(Ue)},(o(this.from)||o(this.to))&&(t=", arguments"),[this.makeCode("(function() {"+d+"\n"+i+"for ("+n+")"+l+"}).apply(this"+(null==t?"":t)+")")])},n}(o),n.Slice=fe=function(e){function n(e){this.range=e,n.__super__.constructor.call(this)}return t(n,e),n.prototype.children=["range"],n.prototype.compileNode=function(e){var t,n,a,i,o,r,s;return o=this.range,r=o.to,a=o.from,i=a&&a.compileToFragments(e,q)||[this.makeCode("0")],r&&(t=r.compileToFragments(e,q),n=ze(t),(this.range.exclusive||-1!=+n)&&(s=", "+(this.range.exclusive?n:r.isNumber()?""+(+n+1):(t=r.compileToFragments(e,$),"+"+ze(t)+" + 1 || 9e9")))),[this.makeCode(".slice("+ze(i)+(s||"")+")")]},n}(o),n.Obj=ne=function(e){function n(e,t){this.generated=null!=t&&t,this.objects=this.properties=e||[]}return t(n,e),n.prototype.children=["properties"],n.prototype.compileNode=function(e){var t,n,a,o,i,s,d,p,u,m,f,l,g,y,h,b,x,v,S,T,k;if(S=this.properties,this.generated)for(d=0,g=S.length;d<g;d++)b=S[d],b instanceof Ce&&b.error("cannot have an implicit value in an implicit object");for(n=u=0,y=S.length;u<y&&(v=S[n],!((v.variable||v).base instanceof oe));n=++u);for(a=n<S.length,i=e.indent+=ve,l=this.lastNonComment(this.properties),t=[],a&&(x=e.scope.freeVariable("obj"),t.push(this.makeCode("(\n"+i+x+" = "))),t.push(this.makeCode("{"+(0===S.length||0===n?"}":"\n"))),(o=f=0,h=S.length);f<h;o=++f)v=S[o],o===n&&(0!==o&&t.push(this.makeCode("\n"+i+"}")),t.push(this.makeCode(",\n"))),p=o===S.length-1||o===n-1?"":v===l||v instanceof _?"\n":",\n",s=v instanceof _?"":i,a&&o<n&&(s+=ve),v instanceof c&&("object"!==v.context&&v.operatorToken.error("unexpected "+v.operatorToken.value),v.variable instanceof Ce&&v.variable.hasProperties()&&v.variable.error("invalid object key")),v instanceof Ce&&v["this"]&&(v=new c(v.properties[0].name,v,"object")),v instanceof _||(o<n?!(v instanceof c)&&(v=new c(v,v,"object")):(v instanceof c?(m=v.variable,k=v.value):(T=v.base.cache(e),m=T[0],k=T[1],m instanceof C&&(m=new se(m.value))),v=new c(new Ce(new C(x),[new r(m)]),k))),s&&t.push(this.makeCode(s)),t.push.apply(t,v.compileToFragments(e,Y)),p&&t.push(this.makeCode(p));return a?t.push(this.makeCode(",\n"+i+x+"\n"+this.tab+")")):0!==S.length&&t.push(this.makeCode("\n"+this.tab+"}")),this.front&&!a?this.wrapInBraces(t):t},n.prototype.assigns=function(e){var t,n,a,i;for(i=this.properties,t=0,n=i.length;t<n;t++)if(a=i[t],a.assigns(e))return!0;return!1},n}(o),n.Arr=d=function(e){function n(e){this.objects=e||[]}return t(n,e),n.prototype.children=["objects"],n.prototype.compileNode=function(e){var t,n,a,i,o,r,s;if(!this.objects.length)return[this.makeCode("[]")];if(e.indent+=ve,t=ge.compileSplattedArray(e,this.objects),t.length)return t;for(t=[],n=function(){var t,n,a,i;for(a=this.objects,i=[],(t=0,n=a.length);t<n;t++)s=a[t],i.push(s.compileToFragments(e,W));return i}.call(this),(i=o=0,r=n.length);o<r;i=++o)a=n[i],i&&t.push(this.makeCode(", ")),t.push.apply(t,a);return 0<=ze(t).indexOf("\n")?(t.unshift(this.makeCode("[\n"+e.indent)),t.push(this.makeCode("\n"+this.tab+"]"))):(t.unshift(this.makeCode("[")),t.push(this.makeCode("]"))),t},n.prototype.assigns=function(e){var t,n,a,i;for(i=this.objects,t=0,n=i.length;t<n;t++)if(a=i[t],a.assigns(e))return!0;return!1},n}(o),n.Class=p=function(e){function n(e,t,n){this.variable=e,this.parent=t,this.body=null==n?new u:n,this.boundFuncs=[],this.body.classBody=!0}return t(n,e),n.prototype.children=["variable","parent","body"],n.prototype.defaultClassVariableName="_Class",n.prototype.determineName=function(){var e,t,n,a,o;return this.variable?(a=this.variable.properties,o=a[a.length-1],n=o?o instanceof r&&o.name:this.variable.base,!(n instanceof C||n instanceof se))?this.defaultClassVariableName:(t=n.value,o||(e=We(t),e&&this.variable.error(e)),0<=i.call(U,t)?"_"+t:t):this.defaultClassVariableName},n.prototype.setContext=function(e){return this.body.traverseChildren(!1,function(t){return!t.classBody&&(t instanceof ke?t.value=e:t instanceof m&&t.bound?t.context=e:void 0)})},n.prototype.addBoundFunctions=function(e){var t,n,a,i,o;for(o=this.boundFuncs,n=0,a=o.length;n<a;n++)t=o[n],i=new Ce(new ke(),[new r(t)]).compile(e),this.ctor.body.unshift(new V(i+" = "+Qe("bind",e)+"("+i+", this)"))},n.prototype.addProperties=function(e,t,n){var a,i,o,s,l,d;return d=e.base.properties.slice(0),s=function(){var e;for(e=[];i=d.shift();)i instanceof c&&(o=i.variable.base,delete i.context,l=i.value,"constructor"===o.value?(this.ctor&&i.error("cannot define more than one constructor in a class"),l.bound&&i.error("cannot define a constructor as a bound function"),l instanceof m?i=this.ctor=l:(this.externalCtor=n.classScope.freeVariable("ctor"),i=new c(new C(this.externalCtor),l))):i.variable["this"]?l["static"]=!0:(a=o.isComplex()?new B(o):new r(o),i.variable=new Ce(new C(t),[new r(new se("prototype")),a]),l instanceof m&&l.bound&&(this.boundFuncs.push(o),l.bound=!1))),e.push(i);return e}.call(this),Re(s)},n.prototype.walkBody=function(e,t){return this.traverseChildren(!1,function(a){return function(o){var r,s,l,i,d,p,m;if(r=!0,o instanceof n)return!1;if(o instanceof u){for(m=s=o.expressions,l=i=0,d=m.length;i<d;l=++i)p=m[l],p instanceof c&&p.variable.looksStatic(e)?p.value["static"]=!0:p instanceof Ce&&p.isObject(!0)&&(r=!1,s[l]=a.addProperties(p,e,t));o.expressions=s=Be(s)}return r&&!(o instanceof n)}}(this))},n.prototype.hoistDirectivePrologue=function(){var e,t,n;for(t=0,e=this.body.expressions;(n=e[t])&&n instanceof _||n instanceof Ce&&n.isString();)++t;return this.directives=e.splice(0,t)},n.prototype.ensureConstructor=function(e){return this.ctor||(this.ctor=new m,this.externalCtor?this.ctor.body.push(new V(this.externalCtor+".apply(this, arguments)")):this.parent&&this.ctor.body.push(new V(e+".__super__.constructor.apply(this, arguments)")),this.ctor.body.makeReturn(),this.body.expressions.unshift(this.ctor)),this.ctor.ctor=this.ctor.name=e,this.ctor.klass=null,this.ctor.noReturn=!0},n.prototype.compileNode=function(e){var t,n,a,i,o,r,s,l,d;return(i=this.body.jumps())&&i.error("Class bodies cannot contain pure statements"),(n=this.body.contains(Ue))&&n.error("Class bodies shouldn't reference arguments"),s=this.determineName(),r=new C(s),a=new m([],u.wrap([this.body])),t=[],e.classScope=a.makeScope(e.scope),this.hoistDirectivePrologue(),this.setContext(s),this.walkBody(s,e),this.ensureConstructor(s),this.addBoundFunctions(e),this.body.spaced=!0,this.body.expressions.push(r),this.parent&&(d=new C(e.classScope.freeVariable("superClass",{reserve:!1})),this.body.expressions.unshift(new N(r,d)),a.params.push(new ie(d)),t.push(this.parent)),(l=this.body.expressions).unshift.apply(l,this.directives),o=new oe(new f(a,t)),this.variable&&(o=new c(this.variable,o,null,{moduleDeclaration:this.moduleDeclaration})),o.compileToFragments(e)},n}(o),n.ModuleDeclaration=G=function(e){function n(e,t){this.clause=e,this.source=t,this.checkSource()}return t(n,e),n.prototype.children=["clause","source"],n.prototype.isStatement=Oe,n.prototype.jumps=Se,n.prototype.makeReturn=Se,n.prototype.checkSource=function(){if(null!=this.source&&this.source instanceof he)return this.source.error("the name of the module to be imported from must be an uninterpolated string")},n.prototype.checkScope=function(e,t){if(0!==e.indent.length)return this.error(t+" statements must be at top-level scope")},n}(o),n.ImportDeclaration=D=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){var t,n;return this.checkScope(e,"import"),e.importedSymbols=[],t=[],t.push(this.makeCode(this.tab+"import ")),null!=this.clause&&t.push.apply(t,this.clause.compileNode(e)),null!=(null==(n=this.source)?void 0:n.value)&&(null!==this.clause&&t.push(this.makeCode(" from ")),t.push(this.makeCode(this.source.value))),t.push(this.makeCode(";")),t},n}(G),n.ImportClause=O=function(e){function n(e,t){this.defaultBinding=e,this.namedImports=t}return t(n,e),n.prototype.children=["defaultBinding","namedImports"],n.prototype.compileNode=function(e){var t;return t=[],null!=this.defaultBinding&&(t.push.apply(t,this.defaultBinding.compileNode(e)),null!=this.namedImports&&t.push(this.makeCode(", "))),null!=this.namedImports&&t.push.apply(t,this.namedImports.compileNode(e)),t},n}(o),n.ExportDeclaration=x=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){var t,n;return this.checkScope(e,"export"),t=[],t.push(this.makeCode(this.tab+"export ")),this instanceof v&&t.push(this.makeCode("default ")),!(this instanceof v)&&(this.clause instanceof c||this.clause instanceof p)&&(this.clause instanceof p&&!this.clause.variable&&this.clause.error("anonymous classes cannot be exported"),t.push(this.makeCode("var ")),this.clause.moduleDeclaration="export"),t=null!=this.clause.body&&this.clause.body instanceof u?t.concat(this.clause.compileToFragments(e,Y)):t.concat(this.clause.compileNode(e)),null!=(null==(n=this.source)?void 0:n.value)&&t.push(this.makeCode(" from "+this.source.value)),t.push(this.makeCode(";")),t},n}(G),n.ExportNamedDeclaration=S=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(x),n.ExportDefaultDeclaration=v=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(x),n.ExportAllDeclaration=b=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(x),n.ModuleSpecifierList=X=function(e){function n(e){this.specifiers=e}return t(n,e),n.prototype.children=["specifiers"],n.prototype.compileNode=function(e){var t,n,a,i,o,r,s;if(t=[],e.indent+=ve,n=function(){var t,n,a,i;for(a=this.specifiers,i=[],(t=0,n=a.length);t<n;t++)s=a[t],i.push(s.compileToFragments(e,W));return i}.call(this),0!==this.specifiers.length){for(t.push(this.makeCode("{\n"+e.indent)),i=o=0,r=n.length;o<r;i=++o)a=n[i],i&&t.push(this.makeCode(",\n"+e.indent)),t.push.apply(t,a);t.push(this.makeCode("\n}"))}else t.push(this.makeCode("{}"));return t},n}(o),n.ImportSpecifierList=M=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(X),n.ExportSpecifierList=E=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(X),n.ModuleSpecifier=Z=function(e){function n(e,t,n){this.original=e,this.alias=t,this.moduleDeclarationType=n,this.identifier=null==this.alias?this.original.value:this.alias.value}return t(n,e),n.prototype.children=["original","alias"],n.prototype.compileNode=function(e){var t;return e.scope.find(this.identifier,this.moduleDeclarationType),t=[],t.push(this.makeCode(this.original.value)),null!=this.alias&&t.push(this.makeCode(" as "+this.alias.value)),t},n}(o),n.ImportSpecifier=I=function(e){function n(e,t){n.__super__.constructor.call(this,e,t,"import")}return t(n,e),n.prototype.compileNode=function(e){var t;return(t=this.identifier,0<=i.call(e.importedSymbols,t))||e.scope.check(this.identifier)?this.error("'"+this.identifier+"' has already been declared"):e.importedSymbols.push(this.identifier),n.__super__.compileNode.call(this,e)},n}(Z),n.ImportDefaultSpecifier=P=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(I),n.ImportNamespaceSpecifier=R=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(I),n.ExportSpecifier=k=function(e){function n(e,t){n.__super__.constructor.call(this,e,t,"export")}return t(n,e),n}(Z),n.Assign=c=function(e){function n(e,t,n,a){this.variable=e,this.value=t,this.context=n,null==a&&(a={}),this.param=a.param,this.subpattern=a.subpattern,this.operatorToken=a.operatorToken,this.moduleDeclaration=a.moduleDeclaration}return t(n,e),n.prototype.children=["variable","value"],n.prototype.isStatement=function(e){return(null==e?void 0:e.level)===Y&&null!=this.context&&(this.moduleDeclaration||0<=i.call(this.context,"?"))},n.prototype.checkAssignability=function(e,t){if(Object.prototype.hasOwnProperty.call(e.scope.positions,t.value)&&"import"===e.scope.variables[e.scope.positions[t.value]].type)return t.error("'"+t.value+"' is read-only")},n.prototype.assigns=function(e){return this["object"===this.context?"value":"variable"].assigns(e)},n.prototype.unfoldSoak=function(e){return Je(e,this,"variable")},n.prototype.compileNode=function(e){var t,n,a,o,r,l,d,p,c,u,f,g,_,y,h;if(a=this.variable instanceof Ce){if(this.variable.isArray()||this.variable.isObject())return this.compilePatternMatch(e);if(this.variable.isSplice())return this.compileSplice(e);if("||="===(p=this.context)||"&&="===p||"?="===p)return this.compileConditional(e);if("**="===(c=this.context)||"//="===c||"%%="===c)return this.compileSpecialMath(e)}return(this.value instanceof m&&(this.value["static"]?(this.value.klass=this.variable.base,this.value.name=this.variable.properties[0],this.value.variable=this.variable):2<=(null==(u=this.variable.properties)?void 0:u.length)&&(f=this.variable.properties,l=3<=f.length?s.call(f,0,o=f.length-2):(o=0,[]),d=f[o++],r=f[o++],"prototype"===(null==(g=d.name)?void 0:g.value)&&(this.value.klass=new Ce(this.variable.base,l),this.value.name=r,this.value.variable=this.variable))),this.context||(h=this.variable.unwrapAll(),!h.isAssignable()&&this.variable.error("'"+this.variable.compile(e)+"' can't be assigned"),("function"!=typeof h.hasProperties||!h.hasProperties())&&(this.moduleDeclaration?(this.checkAssignability(e,h),e.scope.add(h.value,this.moduleDeclaration)):this.param?e.scope.add(h.value,"var"):(this.checkAssignability(e,h),e.scope.find(h.value)))),y=this.value.compileToFragments(e,W),a&&this.variable.base instanceof ne&&(this.variable.front=!0),n=this.variable.compileToFragments(e,W),"object"===this.context)?((_=ze(n),0<=i.call(U,_))&&(n.unshift(this.makeCode("\"")),n.push(this.makeCode("\""))),n.concat(this.makeCode(": "),y)):(t=n.concat(this.makeCode(" "+(this.context||"=")+" "),y),e.level<=W?t:this.wrapInBraces(t))},n.prototype.compilePatternMatch=function(e){var t,a,o,l,d,p,c,i,u,m,f,g,_,y,b,x,v,S,T,k,E,N,A,w,O,D,P,R;if(w=e.level===Y,D=this.value,x=this.variable.base.objects,!(v=x.length))return o=D.compileToFragments(e),e.level>=H?this.wrapInBraces(o):o;if(b=x[0],1===v&&b instanceof h&&b.error("Destructuring assignment has no target"),u=this.variable.isObject(),w&&1===v&&!(b instanceof ge))return l=null,b instanceof n&&"object"===b.context?(T=b,k=T.variable,i=k.base,b=T.value,b instanceof n&&(l=b.value,b=b.variable)):(b instanceof n&&(l=b.value,b=b.variable),i=u?b["this"]?b.properties[0].name:new se(b.unwrap().value):new te(0)),t=i.unwrap()instanceof se,D=new Ce(D),D.properties.push(new(t?r:B)(i)),_=We(b.unwrap().value),_&&b.error(_),l&&(D=new ae("?",D,l)),new n(b,D,null,{param:this.param}).compileToFragments(e,Y);for(P=D.compileToFragments(e,W),R=ze(P),a=[],d=!1,(!(D.unwrap()instanceof C)||this.variable.assigns(R))&&(a.push([this.makeCode((S=e.scope.freeVariable("ref"))+" = ")].concat(s.call(P))),P=[this.makeCode(S)],R=S),(c=f=0,g=x.length);f<g;c=++f){if(b=x[c],i=c,!d&&b instanceof ge)y=b.name.unwrap().value,b=b.unwrap(),O=v+" <= "+R+".length ? "+Qe("slice",e)+".call("+R+", "+c,(A=v-c-1)?(m=e.scope.freeVariable("i",{single:!0}),O+=", "+m+" = "+R+".length - "+A+") : ("+m+" = "+c+", [])"):O+=") : []",O=new V(O),d=m+"++";else if(!d&&b instanceof h){(A=v-c-1)&&(1===A?d=R+".length - 1":(m=e.scope.freeVariable("i",{single:!0}),O=new V(m+" = "+R+".length - "+A),d=m+"++",a.push(O.compileToFragments(e,W))));continue}else(b instanceof ge||b instanceof h)&&b.error("multiple splats/expansions are disallowed in an assignment"),l=null,b instanceof n&&"object"===b.context?(E=b,N=E.variable,i=N.base,b=E.value,b instanceof n&&(l=b.value,b=b.variable)):(b instanceof n&&(l=b.value,b=b.variable),i=u?b["this"]?b.properties[0].name:new se(b.unwrap().value):new V(d||i)),y=b.unwrap().value,t=i.unwrap()instanceof se,O=new Ce(new V(R),[new(t?r:B)(i)]),l&&(O=new ae("?",O,l));null!=y&&(_=We(y),_&&b.error(_)),a.push(new n(b,O,null,{param:this.param,subpattern:!0}).compileToFragments(e,W))}return w||this.subpattern||a.push(P),p=this.joinFragmentArrays(a,", "),e.level<W?p:this.wrapInBraces(p)},n.prototype.compileConditional=function(e){var t,a,o,r;return o=this.variable.cacheReference(e),a=o[0],r=o[1],a.properties.length||!(a.base instanceof V)||a.base instanceof ke||e.scope.check(a.base.value)||this.variable.error("the variable \""+a.base.value+"\" can't be assigned with "+this.context+" because it has not been declared before"),0<=i.call(this.context,"?")?(e.isExistentialEquals=!0,new w(new y(a),r,{type:"if"}).addElse(new n(r,this.value,"=")).compileToFragments(e)):(t=new ae(this.context.slice(0,-1),a,new n(r,this.value,"=")).compileToFragments(e),e.level<=W?t:this.wrapInBraces(t))},n.prototype.compileSpecialMath=function(e){var t,a,i;return a=this.variable.cacheReference(e),t=a[0],i=a[1],new n(t,new ae(this.context.slice(0,-1),i,this.value)).compileToFragments(e)},n.prototype.compileSplice=function(e){var t,n,a,i,o,r,s,l,d,p,c,u;return s=this.variable.properties.pop().range,a=s.from,p=s.to,n=s.exclusive,r=this.variable.compile(e),a?(l=this.cacheToCodeFragments(a.cache(e,H)),i=l[0],o=l[1]):i=o="0",p?(null==a?void 0:a.isNumber())&&p.isNumber()?(p=p.compile(e)-o,!n&&(p+=1)):(p=p.compile(e,$)+" - "+o,!n&&(p+=" + 1")):p="9e9",d=this.value.cache(e,W),c=d[0],u=d[1],t=[].concat(this.makeCode("[].splice.apply("+r+", ["+i+", "+p+"].concat("),c,this.makeCode(")), "),u),e.level>Y?this.wrapInBraces(t):t},n}(o),n.Code=m=function(e){function n(e,t,n){this.params=e||[],this.body=t||new u,this.bound="boundfunc"===n,this.isGenerator=!!this.body.contains(function(e){return e instanceof ae&&e.isYield()||e instanceof De})}return t(n,e),n.prototype.children=["params","body"],n.prototype.isStatement=function(){return!!this.ctor},n.prototype.jumps=J,n.prototype.makeScope=function(e){return new me(e,this.body,this)},n.prototype.compileNode=function(e){var t,a,o,g,_,y,b,x,l,v,S,T,k,E,N,A,O,p,m,D,P,r,R,I,M,F,B,z,j,U,W,H,q;if(this.bound&&(null==(R=e.scope.method)?void 0:R.bound)&&(this.context=e.scope.method.context),this.bound&&!this.context)return this.context="_this",q=new n([new ie(new C(this.context))],new u([this])),a=new f(q,[new ke]),a.updateLocationDataIfMissing(this.locationData),a.compileNode(e);for(e.scope=Ie(e,"classScope")||this.makeScope(e.scope),e.scope.shared=Ie(e,"sharedScope"),e.indent+=ve,delete e.bare,delete e.isExistentialEquals,m=[],g=[],I=this.params,(y=0,l=I.length);y<l;y++)p=I[y],p instanceof h||e.scope.parameter(p.asReference(e));for(M=this.params,b=0,v=M.length;b<v;b++)if(p=M[b],!!(p.splat||p instanceof h)){for(F=this.params,x=0,S=F.length;x<S;x++)O=F[x],!(O instanceof h)&&O.name.value&&e.scope.add(O.name.value,"var",!0);j=new c(new Ce(new d(function(){var t,n,a,i;for(a=this.params,i=[],(n=0,t=a.length);n<t;n++)O=a[n],i.push(O.asReference(e));return i}.call(this))),new Ce(new C("arguments")));break}for(B=this.params,A=0,T=B.length;A<T;A++)p=B[A],p.isComplex()?(W=r=p.asReference(e),p.value&&(W=new ae("?",r,p.value)),g.push(new c(new Ce(p.name),W,"=",{param:!0}))):(r=p,p.value&&(N=new V(r.name.value+" == null"),W=new c(new Ce(p.name),p.value,"="),g.push(new w(N,W)))),j||m.push(r);for(H=this.body.isEmpty(),j&&g.unshift(j),g.length&&(z=this.body.expressions).unshift.apply(z,g),(_=D=0,k=m.length);D<k;_=++D)O=m[_],m[_]=O.compileToFragments(e),e.scope.parameter(ze(m[_]));for(U=[],this.eachParamName(function(e,t){return 0<=i.call(U,e)&&t.error("multiple parameters named "+e),U.push(e)}),H||this.noReturn||this.body.makeReturn(),o="function",this.isGenerator&&(o+="*"),this.ctor&&(o+=" "+this.name),o+="(",t=[this.makeCode(o)],(_=P=0,E=m.length);P<E;_=++P)O=m[_],_&&t.push(this.makeCode(", ")),t.push.apply(t,O);return t.push(this.makeCode(") {")),this.body.isEmpty()||(t=t.concat(this.makeCode("\n"),this.body.compileWithDeclarations(e),this.makeCode("\n"+this.tab))),t.push(this.makeCode("}")),this.ctor?[this.makeCode(this.tab)].concat(s.call(t)):this.front||e.level>=$?this.wrapInBraces(t):t},n.prototype.eachParamName=function(e){var t,n,a,i,o;for(i=this.params,o=[],(t=0,n=i.length);t<n;t++)a=i[t],o.push(a.eachName(e));return o},n.prototype.traverseChildren=function(e,t){if(e)return n.__super__.traverseChildren.call(this,e,t)},n}(o),n.Param=ie=function(e){function n(e,t,n){var a,i;this.name=e,this.value=t,this.splat=n,a=We(this.name.unwrapAll().value),a&&this.name.error(a),this.name instanceof ne&&this.name.generated&&(i=this.name.objects[0].operatorToken,i.error("unexpected "+i.value))}return t(n,e),n.prototype.children=["name","value"],n.prototype.compileToFragments=function(e){return this.name.compileToFragments(e,W)},n.prototype.asReference=function(e){var t,n;return this.reference?this.reference:(n=this.name,n["this"]?(t=n.properties[0].name.value,0<=i.call(U,t)&&(t="_"+t),n=new C(e.scope.freeVariable(t))):n.isComplex()&&(n=new C(e.scope.freeVariable("arg"))),n=new Ce(n),this.splat&&(n=new ge(n)),n.updateLocationDataIfMissing(this.locationData),this.reference=n)},n.prototype.isComplex=function(){return this.name.isComplex()},n.prototype.eachName=function(e,t){var n,a,i,o,r,s,l;if(null==t&&(t=this.name),n=function(t){return e("@"+t.properties[0].name.value,t)},t instanceof V)return e(t.value,t);if(t instanceof Ce)return n(t);for(l=null==(s=t.objects)?[]:s,a=0,i=l.length;a<i;a++)r=l[a],r instanceof c&&null==r.context&&(r=r.variable),r instanceof c?(r.value instanceof c&&(r=r.value),this.eachName(e,r.value.unwrap())):r instanceof ge?(o=r.name.unwrap(),e(o.value,o)):r instanceof Ce?r.isArray()||r.isObject()?this.eachName(e,r.base):r["this"]?n(r):e(r.base.value,r.base):!(r instanceof h)&&r.error("illegal parameter "+r.compile())},n}(o),n.Splat=ge=function(e){function n(e){this.name=e.compile?e:new V(e)}return t(n,e),n.prototype.children=["name"],n.prototype.isAssignable=Oe,n.prototype.assigns=function(e){return this.name.assigns(e)},n.prototype.compileToFragments=function(e){return this.name.compileToFragments(e)},n.prototype.unwrap=function(){return this.name},n.compileSplattedArray=function(e,t,a){var o,r,s,l,d,p,i,c,u,m,f;for(i=-1;(f=t[++i])&&!(f instanceof n);)continue;if(i>=t.length)return[];if(1===t.length)return f=t[0],d=f.compileToFragments(e,W),a?d:[].concat(f.makeCode(Qe("slice",e)+".call("),d,f.makeCode(")"));for(o=t.slice(i),p=c=0,m=o.length;c<m;p=++c)f=o[p],s=f.compileToFragments(e,W),o[p]=f instanceof n?[].concat(f.makeCode(Qe("slice",e)+".call("),s,f.makeCode(")")):[].concat(f.makeCode("["),s,f.makeCode("]"));return 0===i?(f=t[0],l=f.joinFragmentArrays(o.slice(1),", "),o[0].concat(f.makeCode(".concat("),l,f.makeCode(")"))):(r=function(){var n,a,o,r;for(o=t.slice(0,i),r=[],(n=0,a=o.length);n<a;n++)f=o[n],r.push(f.compileToFragments(e,W));return r}(),r=t[0].joinFragmentArrays(r,", "),l=t[i].joinFragmentArrays(o,", "),u=t[t.length-1],[].concat(t[0].makeCode("["),r,t[i].makeCode("].concat("),l,u.makeCode(")")))},n}(o),n.Expansion=h=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isComplex=J,n.prototype.compileNode=function(){return this.error("Expansion must be used inside a destructuring assignment or parameter list")},n.prototype.asReference=function(){return this},n.prototype.eachName=function(){},n}(o),n.While=we=function(e){function n(e,t){this.condition=(null==t?void 0:t.invert)?e.invert():e,this.guard=null==t?void 0:t.guard}return t(n,e),n.prototype.children=["condition","guard","body"],n.prototype.isStatement=Oe,n.prototype.makeReturn=function(e){return e?n.__super__.makeReturn.apply(this,arguments):(this.returns=!this.jumps({loop:!0}),this)},n.prototype.addBody=function(e){return this.body=e,this},n.prototype.jumps=function(){var e,t,n,a,i;if(e=this.body.expressions,!e.length)return!1;for(t=0,a=e.length;t<a;t++)if(i=e[t],n=i.jumps({loop:!0}))return n;return!1},n.prototype.compileNode=function(e){var t,n,a,i;return e.indent+=ve,i="",n=this.body,n.isEmpty()?n=this.makeCode(""):(this.returns&&(n.makeReturn(a=e.scope.freeVariable("results")),i=""+this.tab+a+" = [];\n"),this.guard&&(1<n.expressions.length?n.expressions.unshift(new w(new oe(this.guard).invert(),new _e("continue"))):this.guard&&(n=u.wrap([new w(this.guard,n)]))),n=[].concat(this.makeCode("\n"),n.compileToFragments(e,Y),this.makeCode("\n"+this.tab))),t=[].concat(this.makeCode(i+this.tab+"while ("),this.condition.compileToFragments(e,q),this.makeCode(") {"),n,this.makeCode("}")),this.returns&&t.push(this.makeCode("\n"+this.tab+"return "+a+";")),t},n}(o),n.Op=ae=function(e){function n(e,t,n,i){if("in"===e)return new F(t,n);if("do"===e)return this.generateDo(t);if("new"===e){if(t instanceof f&&!t["do"]&&!t.isNew)return t.newInstance();(t instanceof m&&t.bound||t["do"])&&(t=new oe(t))}return this.operator=a[e]||e,this.first=t,this.second=n,this.flip=!!i,this}var a,o;return t(n,e),a={"==":"===","!=":"!==",of:"in",yieldfrom:"yield*"},o={"!==":"===","===":"!=="},n.prototype.children=["first","second"],n.prototype.isNumber=function(){var e;return this.isUnary()&&("+"===(e=this.operator)||"-"===e)&&this.first instanceof Ce&&this.first.isNumber()},n.prototype.isYield=function(){var e;return"yield"===(e=this.operator)||"yield*"===e},n.prototype.isUnary=function(){return!this.second},n.prototype.isComplex=function(){return!this.isNumber()},n.prototype.isChainable=function(){var e;return"<"===(e=this.operator)||">"===e||">="===e||"<="===e||"==="===e||"!=="===e},n.prototype.invert=function(){var e,t,a,i,r;if(this.isChainable()&&this.first.isChainable()){for(e=!0,t=this;t&&t.operator;)e&&(e=t.operator in o),t=t.first;if(!e)return new oe(this).invert();for(t=this;t&&t.operator;)t.invert=!t.invert,t.operator=o[t.operator],t=t.first;return this}return(i=o[this.operator])?(this.operator=i,this.first.unwrap()instanceof n&&this.first.invert(),this):this.second?new oe(this).invert():"!"===this.operator&&(a=this.first.unwrap())instanceof n&&("!"===(r=a.operator)||"in"===r||"instanceof"===r)?a:new n("!",this)},n.prototype.unfoldSoak=function(e){var t;return("++"===(t=this.operator)||"--"===t||"delete"===t)&&Je(e,this,"first")},n.prototype.generateDo=function(e){var t,n,a,i,o,r,s,l;for(r=[],n=e instanceof c&&(s=e.value.unwrap())instanceof m?s:e,l=n.params||[],(a=0,i=l.length);a<i;a++)o=l[a],o.value?(r.push(o.value),delete o.value):r.push(o);return t=new f(e,r),t["do"]=!0,t},n.prototype.compileNode=function(e){var t,n,a,i,o,r;if(n=this.isChainable()&&this.first.isChainable(),n||(this.first.front=this.front),"delete"===this.operator&&e.scope.check(this.first.unwrapAll().value)&&this.error("delete operand may not be argument or var"),("--"===(o=this.operator)||"++"===o)&&(i=We(this.first.unwrapAll().value),i&&this.first.error(i)),this.isYield())return this.compileYield(e);if(this.isUnary())return this.compileUnary(e);if(n)return this.compileChain(e);switch(this.operator){case"?":return this.compileExistence(e);case"**":return this.compilePower(e);case"//":return this.compileFloorDivision(e);case"%%":return this.compileModulo(e);default:return a=this.first.compileToFragments(e,H),r=this.second.compileToFragments(e,H),t=[].concat(a,this.makeCode(" "+this.operator+" "),r),e.level<=H?t:this.wrapInBraces(t);}},n.prototype.compileChain=function(e){var t,n,a,i;return a=this.first.second.cache(e),this.first.second=a[0],i=a[1],n=this.first.compileToFragments(e,H),t=n.concat(this.makeCode(" "+(this.invert?"&&":"||")+" "),i.compileToFragments(e),this.makeCode(" "+this.operator+" "),this.second.compileToFragments(e,H)),this.wrapInBraces(t)},n.prototype.compileExistence=function(e){var t,n;return this.first.isComplex()?(n=new C(e.scope.freeVariable("ref")),t=new oe(new c(n,this.first))):(t=this.first,n=t),new w(new y(t),n,{type:"if"}).addElse(this.second).compileToFragments(e)},n.prototype.compileUnary=function(e){var t,a,i;return(a=[],t=this.operator,a.push([this.makeCode(t)]),"!"===t&&this.first instanceof y)?(this.first.negated=!this.first.negated,this.first.compileToFragments(e)):e.level>=$?new oe(this).compileToFragments(e):(i="+"===t||"-"===t,("new"===t||"typeof"===t||"delete"===t||i&&this.first instanceof n&&this.first.operator===t)&&a.push([this.makeCode(" ")]),(i&&this.first instanceof n||"new"===t&&this.first.isStatement(e))&&(this.first=new oe(this.first)),a.push(this.first.compileToFragments(e,H)),this.flip&&a.reverse(),this.joinFragmentArrays(a,""))},n.prototype.compileYield=function(e){var t,n,a;return n=[],t=this.operator,null==e.scope.parent&&this.error("yield can only occur inside functions"),0<=i.call(Object.keys(this.first),"expression")&&!(this.first instanceof Ee)?null!=this.first.expression&&n.push(this.first.expression.compileToFragments(e,H)):(e.level>=q&&n.push([this.makeCode("(")]),n.push([this.makeCode(t)]),""!==(null==(a=this.first.base)?void 0:a.value)&&n.push([this.makeCode(" ")]),n.push(this.first.compileToFragments(e,H)),e.level>=q&&n.push([this.makeCode(")")])),this.joinFragmentArrays(n,"")},n.prototype.compilePower=function(e){var t;return t=new Ce(new C("Math"),[new r(new se("pow"))]),new f(t,[this.first,this.second]).compileToFragments(e)},n.prototype.compileFloorDivision=function(e){var t,a,i;return a=new Ce(new C("Math"),[new r(new se("floor"))]),i=this.second.isComplex()?new oe(this.second):this.second,t=new n("/",this.first,i),new f(a,[t]).compileToFragments(e)},n.prototype.compileModulo=function(e){var t;return t=new Ce(new V(Qe("modulo",e))),new f(t,[this.first,this.second]).compileToFragments(e)},n.prototype.toString=function(e){return n.__super__.toString.call(this,e,this.constructor.name+" "+this.operator)},n}(o),n.In=F=function(e){function n(e,t){this.object=e,this.array=t}return t(n,e),n.prototype.children=["object","array"],n.prototype.invert=K,n.prototype.compileNode=function(e){var t,n,a,i,o;if(this.array instanceof Ce&&this.array.isArray()&&this.array.base.objects.length){for(o=this.array.base.objects,n=0,a=o.length;n<a;n++)if(i=o[n],!!(i instanceof ge)){t=!0;break}if(!t)return this.compileOrTest(e)}return this.compileLoopTest(e)},n.prototype.compileOrTest=function(e){var t,n,a,i,o,r,s,l,d,p,c,u;for(l=this.object.cache(e,H),c=l[0],s=l[1],d=this.negated?[" !== "," && "]:[" === "," || "],t=d[0],n=d[1],u=[],p=this.array.base.objects,(a=o=0,r=p.length);o<r;a=++o)i=p[a],a&&u.push(this.makeCode(n)),u=u.concat(a?s:c,this.makeCode(t),i.compileToFragments(e,$));return e.level<H?u:this.wrapInBraces(u)},n.prototype.compileLoopTest=function(e){var t,n,a,i;return(a=this.object.cache(e,W),i=a[0],n=a[1],t=[].concat(this.makeCode(Qe("indexOf",e)+".call("),this.array.compileToFragments(e,W),this.makeCode(", "),n,this.makeCode(") "+(this.negated?"< 0":">= 0"))),ze(i)===ze(n))?t:(t=i.concat(this.makeCode(", "),t),e.level<W?t:this.wrapInBraces(t))},n.prototype.toString=function(e){return n.__super__.toString.call(this,e,this.constructor.name+(this.negated?"!":""))},n}(o),n.Try=Ne=function(e){function n(e,t,n,a){this.attempt=e,this.errorVariable=t,this.recovery=n,this.ensure=a}return t(n,e),n.prototype.children=["attempt","recovery","ensure"],n.prototype.isStatement=Oe,n.prototype.jumps=function(e){var t;return this.attempt.jumps(e)||(null==(t=this.recovery)?void 0:t.jumps(e))},n.prototype.makeReturn=function(e){return this.attempt&&(this.attempt=this.attempt.makeReturn(e)),this.recovery&&(this.recovery=this.recovery.makeReturn(e)),this},n.prototype.compileNode=function(e){var t,n,a,i,o,r;return e.indent+=ve,r=this.attempt.compileToFragments(e,Y),t=this.recovery?(a=e.scope.freeVariable("error",{reserve:!1}),o=new C(a),this.errorVariable?(i=We(this.errorVariable.unwrapAll().value),i?this.errorVariable.error(i):void 0,this.recovery.unshift(new c(this.errorVariable,o))):void 0,[].concat(this.makeCode(" catch ("),o.compileToFragments(e),this.makeCode(") {\n"),this.recovery.compileToFragments(e,Y),this.makeCode("\n"+this.tab+"}"))):this.ensure||this.recovery?[]:(a=e.scope.freeVariable("error",{reserve:!1}),[this.makeCode(" catch ("+a+") {}")]),n=this.ensure?[].concat(this.makeCode(" finally {\n"),this.ensure.compileToFragments(e,Y),this.makeCode("\n"+this.tab+"}")):[],[].concat(this.makeCode(this.tab+"try {\n"),r,this.makeCode("\n"+this.tab+"}"),t,n)},n}(o),n.Throw=Ee=function(e){function n(e){this.expression=e}return t(n,e),n.prototype.children=["expression"],n.prototype.isStatement=Oe,n.prototype.jumps=J,n.prototype.makeReturn=Se,n.prototype.compileNode=function(e){return[].concat(this.makeCode(this.tab+"throw "),this.expression.compileToFragments(e),this.makeCode(";"))},n}(o),n.Existence=y=function(e){function n(e){this.expression=e}return t(n,e),n.prototype.children=["expression"],n.prototype.invert=K,n.prototype.compileNode=function(e){var t,n,a,i;return this.expression.front=this.front,a=this.expression.compile(e,H),this.expression.unwrap()instanceof C&&!e.scope.check(a)?(i=this.negated?["===","||"]:["!==","&&"],t=i[0],n=i[1],a="typeof "+a+" "+t+" \"undefined\" "+n+" "+a+" "+t+" null"):a=a+" "+(this.negated?"==":"!=")+" null",[this.makeCode(e.level<=j?a:"("+a+")")]},n}(o),n.Parens=oe=function(e){function n(e){this.body=e}return t(n,e),n.prototype.children=["body"],n.prototype.unwrap=function(){return this.body},n.prototype.isComplex=function(){return this.body.isComplex()},n.prototype.compileNode=function(e){var t,n,a;return(n=this.body.unwrap(),n instanceof Ce&&n.isAtomic())?(n.front=this.front,n.compileToFragments(e)):(a=n.compileToFragments(e,q),t=e.level<H&&(n instanceof ae||n instanceof f||n instanceof A&&n.returns)&&(e.level<j||3>=a.length),t?a:this.wrapInBraces(a))},n}(o),n.StringWithInterpolations=he=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){var t,a,i,o,r,s,l;if(!e.inTaggedTemplateCall)return n.__super__.compileNode.apply(this,arguments);for(i=this.body.unwrap(),a=[],i.traverseChildren(!1,function(e){return e instanceof ye?(a.push(e),!0):!(e instanceof oe)||(a.push(e),!1)}),o=[],o.push(this.makeCode("`")),(r=0,s=a.length);r<s;r++)t=a[r],t instanceof ye?(l=t.value.slice(1,-1),l=l.replace(/(\\*)(`|\$\{)/g,function(e,t,n){return 0==t.length%2?t+"\\"+n:e}),o.push(this.makeCode(l))):(o.push(this.makeCode("${")),o.push.apply(o,t.compileToFragments(e,q)),o.push(this.makeCode("}")));return o.push(this.makeCode("`")),o},n}(oe),n.For=A=function(e){function n(e,t){var n;this.source=t.source,this.guard=t.guard,this.step=t.step,this.name=t.name,this.index=t.index,this.body=u.wrap([e]),this.own=!!t.own,this.object=!!t.object,this.from=!!t.from,this.from&&this.index&&this.index.error("cannot use index with for-from"),this.own&&!this.object&&t.ownTag.error("cannot use own with for-"+(this.from?"from":"in")),this.object&&(n=[this.index,this.name],this.name=n[0],this.index=n[1]),this.index instanceof Ce&&!this.index.isAssignable()&&this.index.error("index cannot be a pattern matching expression"),this.range=this.source instanceof Ce&&this.source.base instanceof le&&!this.source.properties.length&&!this.from,this.pattern=this.name instanceof Ce,this.range&&this.index&&this.index.error("indexes do not apply to range loops"),this.range&&this.pattern&&this.name.error("cannot pattern match over range loops"),this.returns=!1}return t(n,e),n.prototype.children=["body","source","guard","step"],n.prototype.compileNode=function(e){var t,n,a,i,o,r,s,l,d,p,m,f,g,_,y,h,b,x,v,S,T,k,E,N,A,O,D,P,R,I,M,F,B,z;return t=u.wrap([this.body]),E=t.expressions,x=E[E.length-1],(null==x?void 0:x.jumps())instanceof ce&&(this.returns=!1),R=this.range?this.source.base:this.source,P=e.scope,this.pattern||(S=this.name&&this.name.compile(e,W)),_=this.index&&this.index.compile(e,W),S&&!this.pattern&&P.find(S),_&&!(this.index instanceof Ce)&&P.find(_),this.returns&&(D=P.freeVariable("results")),this.from?this.pattern&&(y=P.freeVariable("x",{single:!0})):y=this.object&&_||P.freeVariable("i",{single:!0}),h=(this.range||this.from)&&S||_||y,b=h===y?"":h+" = ",this.step&&!this.range&&(N=this.cacheToCodeFragments(this.step.cache(e,W,je)),I=N[0],F=N[1],this.step.isNumber()&&(M=+F)),this.pattern&&(S=y),z="",m="",s="",f=this.tab+ve,this.range?p=R.compileToFragments(qe(e,{index:y,name:S,step:this.step,isComplex:je})):(B=this.source.compile(e,W),(S||this.own)&&!(this.source.unwrap()instanceof C)&&(s+=""+this.tab+(k=P.freeVariable("ref"))+" = "+B+";\n",B=k),S&&!this.pattern&&!this.from&&(T=S+" = "+B+"["+h+"]"),!this.object&&!this.from&&(I!==F&&(s+=""+this.tab+I+";\n"),d=0>M,!(this.step&&null!=M&&d)&&(v=P.freeVariable("len")),o=""+b+y+" = 0, "+v+" = "+B+".length",r=""+b+y+" = "+B+".length - 1",a=y+" < "+v,i=y+" >= 0",this.step?(null==M?(a=F+" > 0 ? "+a+" : "+i,o="("+F+" > 0 ? ("+o+") : "+r+")"):d&&(a=i,o=r),g=y+" += "+F):g=""+(h===y?y+"++":"++"+y),p=[this.makeCode(o+"; "+a+"; "+b+g)])),this.returns&&(A=""+this.tab+D+" = [];\n",O="\n"+this.tab+"return "+D+";",t.makeReturn(D)),this.guard&&(1<t.expressions.length?t.expressions.unshift(new w(new oe(this.guard).invert(),new _e("continue"))):this.guard&&(t=u.wrap([new w(this.guard,t)]))),this.pattern&&t.expressions.unshift(new c(this.name,this.from?new C(h):new V(B+"["+h+"]"))),l=[].concat(this.makeCode(s),this.pluckDirectCall(e,t)),T&&(z="\n"+f+T+";"),this.object?(p=[this.makeCode(h+" in "+B)],this.own&&(m="\n"+f+"if (!"+Qe("hasProp",e)+".call("+B+", "+h+")) continue;")):this.from&&(p=[this.makeCode(h+" of "+B)]),n=t.compileToFragments(qe(e,{indent:f}),Y),n&&0<n.length&&(n=[].concat(this.makeCode("\n"),n,this.makeCode("\n"))),[].concat(l,this.makeCode(""+(A||"")+this.tab+"for ("),p,this.makeCode(") {"+m+z),n,this.makeCode(this.tab+"}"+(O||"")))},n.prototype.pluckDirectCall=function(e,t){var n,a,i,o,r,s,l,d,p,u,g,_,y,h,b,x;for(a=[],p=t.expressions,(r=s=0,l=p.length);s<l;r=++s)(i=p[r],i=i.unwrapAll(),!!(i instanceof f))&&(x=null==(u=i.variable)?void 0:u.unwrapAll(),!!(x instanceof m||x instanceof Ce&&(null==(g=x.base)?void 0:g.unwrapAll())instanceof m&&1===x.properties.length&&("call"===(_=null==(y=x.properties[0].name)?void 0:y.value)||"apply"===_)))&&(o=(null==(h=x.base)?void 0:h.unwrapAll())||x,d=new C(e.scope.freeVariable("fn")),n=new Ce(d),x.base&&(b=[n,x],x.base=b[0],n=b[1]),t.expressions[r]=new f(n,i.args),a=a.concat(this.makeCode(this.tab),new c(d,o).compileToFragments(e,Y),this.makeCode(";\n")));return a},n}(we),n.Switch=xe=function(e){function n(e,t,n){this.subject=e,this.cases=t,this.otherwise=n}return t(n,e),n.prototype.children=["subject","cases","otherwise"],n.prototype.isStatement=Oe,n.prototype.jumps=function(e){var t,n,a,i,o,r,s,l;for(null==e&&(e={block:!0}),r=this.cases,(a=0,o=r.length);a<o;a++)if(s=r[a],n=s[0],t=s[1],i=t.jumps(e))return i;return null==(l=this.otherwise)?void 0:l.jumps(e)},n.prototype.makeReturn=function(e){var t,n,a,i,o;for(i=this.cases,t=0,n=i.length;t<n;t++)a=i[t],a[1].makeReturn(e);return e&&(this.otherwise||(this.otherwise=new u([new V("void 0")]))),null!=(o=this.otherwise)&&o.makeReturn(e),this},n.prototype.compileNode=function(e){var t,n,a,o,r,l,d,i,p,c,u,m,f,g,_,y;for(i=e.indent+ve,p=e.indent=i+ve,l=[].concat(this.makeCode(this.tab+"switch ("),this.subject?this.subject.compileToFragments(e,q):this.makeCode("false"),this.makeCode(") {\n")),g=this.cases,(d=c=0,m=g.length);c<m;d=++c){for(_=g[d],o=_[0],t=_[1],y=Be([o]),(u=0,f=y.length);u<f;u++)a=y[u],this.subject||(a=a.invert()),l=l.concat(this.makeCode(i+"case "),a.compileToFragments(e,q),this.makeCode(":\n"));if(0<(n=t.compileToFragments(e,Y)).length&&(l=l.concat(n,this.makeCode("\n"))),d===this.cases.length-1&&!this.otherwise)break;(r=this.lastNonComment(t.expressions),!(r instanceof ce||r instanceof V&&r.jumps()&&"debugger"!==r.value))&&l.push(a.makeCode(p+"break;\n"))}return this.otherwise&&this.otherwise.expressions.length&&l.push.apply(l,[this.makeCode(i+"default:\n")].concat(s.call(this.otherwise.compileToFragments(e,Y)),[this.makeCode("\n")])),l.push(this.makeCode(this.tab+"}")),l},n}(o),n.If=w=function(e){function n(e,t,n){this.body=t,null==n&&(n={}),this.condition="unless"===n.type?e.invert():e,this.elseBody=null,this.isChain=!1,this.soak=n.soak}return t(n,e),n.prototype.children=["condition","body","elseBody"],n.prototype.bodyNode=function(){var e;return null==(e=this.body)?void 0:e.unwrap()},n.prototype.elseBodyNode=function(){var e;return null==(e=this.elseBody)?void 0:e.unwrap()},n.prototype.addElse=function(e){return this.isChain?this.elseBodyNode().addElse(e):(this.isChain=e instanceof n,this.elseBody=this.ensureBlock(e),this.elseBody.updateLocationDataIfMissing(e.locationData)),this},n.prototype.isStatement=function(e){var t;return(null==e?void 0:e.level)===Y||this.bodyNode().isStatement(e)||(null==(t=this.elseBodyNode())?void 0:t.isStatement(e))},n.prototype.jumps=function(e){var t;return this.body.jumps(e)||(null==(t=this.elseBody)?void 0:t.jumps(e))},n.prototype.compileNode=function(e){return this.isStatement(e)?this.compileStatement(e):this.compileExpression(e)},n.prototype.makeReturn=function(e){return e&&(this.elseBody||(this.elseBody=new u([new V("void 0")]))),this.body&&(this.body=new u([this.body.makeReturn(e)])),this.elseBody&&(this.elseBody=new u([this.elseBody.makeReturn(e)])),this},n.prototype.ensureBlock=function(e){return e instanceof u?e:new u([e])},n.prototype.compileStatement=function(e){var t,a,i,o,r,s,l;return(i=Ie(e,"chainChild"),r=Ie(e,"isExistentialEquals"),r)?new n(this.condition.invert(),this.elseBodyNode(),{type:"if"}).compileToFragments(e):(l=e.indent+ve,o=this.condition.compileToFragments(e,q),a=this.ensureBlock(this.body).compileToFragments(qe(e,{indent:l})),s=[].concat(this.makeCode("if ("),o,this.makeCode(") {\n"),a,this.makeCode("\n"+this.tab+"}")),i||s.unshift(this.makeCode(this.tab)),!this.elseBody)?s:(t=s.concat(this.makeCode(" else ")),this.isChain?(e.chainChild=!0,t=t.concat(this.elseBody.unwrap().compileToFragments(e,Y))):t=t.concat(this.makeCode("{\n"),this.elseBody.compileToFragments(qe(e,{indent:l}),Y),this.makeCode("\n"+this.tab+"}")),t)},n.prototype.compileExpression=function(e){var t,n,a,i;return a=this.condition.compileToFragments(e,j),n=this.bodyNode().compileToFragments(e,W),t=this.elseBodyNode()?this.elseBodyNode().compileToFragments(e,W):[this.makeCode("void 0")],i=a.concat(this.makeCode(" ? "),n,this.makeCode(" : "),t),e.level>=j?this.wrapInBraces(i):i},n.prototype.unfoldSoak=function(){return this.soak&&this},n}(o),Le={extend:function(e){return"function(child, parent) { for (var key in parent) { if ("+Qe("hasProp",e)+".call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; }"},bind:function(){return"function(fn, me){ return function(){ return fn.apply(me, arguments); }; }"},indexOf:function(){return"[].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; }"},modulo:function(){return"function(a, b) { return (+a % (b = +b) + b) % b; }"},hasProp:function(){return"{}.hasOwnProperty"},slice:function(){return"[].slice"}},Y=1,q=2,W=3,j=4,H=5,$=6,ve="  ",ue=/^[+-]?\d+$/,Qe=function(e,t){var n,a;return a=t.scope.root,e in a.utilities?a.utilities[e]:(n=a.freeVariable(e),a.assign(n,Le[e](t)),a.utilities[e]=n)},Ye=function(e,t){return e=e.replace(/\n/g,"$&"+t),e.replace(/\s+$/,"")},Ue=function(e){return e instanceof C&&"arguments"===e.value},$e=function(e){return e instanceof ke||e instanceof m&&e.bound||e instanceof be},je=function(e){return e.isComplex()||("function"==typeof e.isAssignable?e.isAssignable():void 0)},Je=function(e,t,n){var a;if(a=t[n].unfoldSoak(e))return t[n]=a.body,a.body=new Ce(t),a}}).call(this)},{"./helpers":37,"./lexer":38,"./scope":43}],40:[function(e,t,n){(function(a){var i=function(){function e(){this.yy={}}var t=function(e,t,n,a){for(n=n||{},a=e.length;a--;n[e[a]]=t);return n},n=[1,22],a=[1,25],i=[1,83],o=[1,79],r=[1,84],s=[1,85],l=[1,81],d=[1,82],p=[1,56],c=[1,58],u=[1,59],m=[1,60],f=[1,61],g=[1,62],_=[1,49],y=[1,50],h=[1,32],b=[1,68],x=[1,69],v=[1,78],S=[1,47],T=[1,51],k=[1,52],E=[1,67],N=[1,65],A=[1,66],C=[1,64],w=[1,42],O=[1,48],D=[1,63],P=[1,73],R=[1,74],I=[1,75],M=[1,76],F=[1,46],B=[1,72],z=[1,34],j=[1,35],U=[1,36],$=[1,37],W=[1,38],H=[1,39],q=[1,86],Y=[1,6,32,42,131],V=[1,101],G=[1,89],Z=[1,88],X=[1,87],K=[1,90],J=[1,91],Q=[1,92],ee=[1,93],te=[1,94],ne=[1,95],ae=[1,96],ie=[1,97],oe=[1,98],re=[1,99],se=[1,100],le=[1,104],de=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],pe=[2,167],ce=[1,110],ue=[1,111],me=[1,112],fe=[1,113],ge=[1,115],_e=[1,116],ye=[1,109],he=[1,6,32,42,131,133,135,139,156],be=[2,27],xe=[1,123],ve=[1,121],Se=[1,6,31,32,40,41,42,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Te=[2,95],ke=[1,6,31,32,42,46,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Ee=[2,74],Ne=[1,128],Le=[1,133],Ae=[1,134],Ce=[1,136],we=[1,6,31,32,40,41,42,55,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Oe=[2,92],De=[1,6,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Pe=[2,64],Re=[1,161],Ie=[1,167],Me=[1,179],Fe=[1,181],Be=[1,176],ze=[1,183],je=[1,185],Ue=[1,6,31,32,40,41,42,55,66,71,74,82,83,84,85,87,89,90,94,96,113,114,115,120,122,131,133,134,135,139,140,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],$e=[2,111],We=[1,6,31,32,40,41,42,58,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],He=[1,6,31,32,40,41,42,46,58,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],qe=[40,41,114],Ye=[1,242],Ve=[1,241],Ge=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156],Ze=[2,72],Xe=[1,251],Ke=[6,31,32,66,71],Je=[6,31,32,55,66,71,74],Qe=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,164,166,167,168,169,170,171,172,173,174],et=[40,41,82,83,84,85,87,90,113,114],tt=[1,270],nt=[2,62],at=[1,281],it=[1,283],ot=[1,288],rt=[1,290],st=[2,188],lt=[1,6,31,32,40,41,42,55,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],dt=[1,299],pt=[6,31,32,71,115,120],ct=[1,6,31,32,40,41,42,55,58,66,71,74,82,83,84,85,87,89,90,94,96,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],ut=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,140,156],mt=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,134,140,156],ft=[146,147,148],gt=[71,146,147,148],_t=[6,31,94],yt=[1,313],ht=[6,31,32,71,94],bt=[6,31,32,58,71,94],xt=[6,31,32,55,58,71,94],vt=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,166,167,168,169,170,171,172,173,174],St=[12,28,34,38,40,41,44,45,48,49,50,51,52,53,61,63,64,68,69,89,92,95,97,105,112,117,118,119,125,129,130,133,135,137,139,149,155,157,158,159,160,161,162],Tt=[2,177],kt=[6,31,32],Et=[2,73],Nt=[1,325],Lt=[1,326],At=[1,6,31,32,42,66,71,74,89,94,115,120,122,127,128,131,133,134,135,139,140,151,153,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Ct=[32,151,153],wt=[1,6,32,42,66,71,74,89,94,115,120,122,131,134,140,156],Ot=[1,353],Dt=[1,359],Pt=[1,6,32,42,131,156],Rt=[2,87],It=[1,370],Mt=[1,371],Ft=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,151,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Bt=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,135,139,140,156],zt=[1,384],jt=[1,385],Ut=[6,31,32,94],$t=[6,31,32,71],Wt=[1,6,31,32,42,66,71,74,89,94,115,120,122,127,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Ht=[31,71],qt=[1,411],Yt=[1,412],Vt=[1,418],Gt=[1,419],Zt={trace:function(){},yy:{},symbols_:{error:2,Root:3,Body:4,Line:5,TERMINATOR:6,Expression:7,Statement:8,YieldReturn:9,Return:10,Comment:11,STATEMENT:12,Import:13,Export:14,Value:15,Invocation:16,Code:17,Operation:18,Assign:19,If:20,Try:21,While:22,For:23,Switch:24,Class:25,Throw:26,Yield:27,YIELD:28,FROM:29,Block:30,INDENT:31,OUTDENT:32,Identifier:33,IDENTIFIER:34,Property:35,PROPERTY:36,AlphaNumeric:37,NUMBER:38,String:39,STRING:40,STRING_START:41,STRING_END:42,Regex:43,REGEX:44,REGEX_START:45,REGEX_END:46,Literal:47,JS:48,UNDEFINED:49,NULL:50,BOOL:51,INFINITY:52,NAN:53,Assignable:54,"=":55,AssignObj:56,ObjAssignable:57,":":58,SimpleObjAssignable:59,ThisProperty:60,RETURN:61,Object:62,HERECOMMENT:63,PARAM_START:64,ParamList:65,PARAM_END:66,FuncGlyph:67,"->":68,"=>":69,OptComma:70,",":71,Param:72,ParamVar:73,"...":74,Array:75,Splat:76,SimpleAssignable:77,Accessor:78,Parenthetical:79,Range:80,This:81,".":82,"?.":83,"::":84,"?::":85,Index:86,INDEX_START:87,IndexValue:88,INDEX_END:89,INDEX_SOAK:90,Slice:91,"{":92,AssignList:93,"}":94,CLASS:95,EXTENDS:96,IMPORT:97,ImportDefaultSpecifier:98,ImportNamespaceSpecifier:99,ImportSpecifierList:100,ImportSpecifier:101,AS:102,DEFAULT:103,IMPORT_ALL:104,EXPORT:105,ExportSpecifierList:106,EXPORT_ALL:107,ExportSpecifier:108,OptFuncExist:109,Arguments:110,Super:111,SUPER:112,FUNC_EXIST:113,CALL_START:114,CALL_END:115,ArgList:116,THIS:117,"@":118,"[":119,"]":120,RangeDots:121,"..":122,Arg:123,SimpleArgs:124,TRY:125,Catch:126,FINALLY:127,CATCH:128,THROW:129,"(":130,")":131,WhileSource:132,WHILE:133,WHEN:134,UNTIL:135,Loop:136,LOOP:137,ForBody:138,FOR:139,BY:140,ForStart:141,ForSource:142,ForVariables:143,OWN:144,ForValue:145,FORIN:146,FOROF:147,FORFROM:148,SWITCH:149,Whens:150,ELSE:151,When:152,LEADING_WHEN:153,IfBlock:154,IF:155,POST_IF:156,UNARY:157,UNARY_MATH:158,"-":159,"+":160,"--":161,"++":162,"?":163,MATH:164,"**":165,SHIFT:166,COMPARE:167,"&":168,"^":169,"|":170,"&&":171,"||":172,"BIN?":173,RELATION:174,COMPOUND_ASSIGN:175,$accept:0,$end:1},terminals_:{2:"error",6:"TERMINATOR",12:"STATEMENT",28:"YIELD",29:"FROM",31:"INDENT",32:"OUTDENT",34:"IDENTIFIER",36:"PROPERTY",38:"NUMBER",40:"STRING",41:"STRING_START",42:"STRING_END",44:"REGEX",45:"REGEX_START",46:"REGEX_END",48:"JS",49:"UNDEFINED",50:"NULL",51:"BOOL",52:"INFINITY",53:"NAN",55:"=",58:":",61:"RETURN",63:"HERECOMMENT",64:"PARAM_START",66:"PARAM_END",68:"->",69:"=>",71:",",74:"...",82:".",83:"?.",84:"::",85:"?::",87:"INDEX_START",89:"INDEX_END",90:"INDEX_SOAK",92:"{",94:"}",95:"CLASS",96:"EXTENDS",97:"IMPORT",102:"AS",103:"DEFAULT",104:"IMPORT_ALL",105:"EXPORT",107:"EXPORT_ALL",112:"SUPER",113:"FUNC_EXIST",114:"CALL_START",115:"CALL_END",117:"THIS",118:"@",119:"[",120:"]",122:"..",125:"TRY",127:"FINALLY",128:"CATCH",129:"THROW",130:"(",131:")",133:"WHILE",134:"WHEN",135:"UNTIL",137:"LOOP",139:"FOR",140:"BY",144:"OWN",146:"FORIN",147:"FOROF",148:"FORFROM",149:"SWITCH",151:"ELSE",153:"LEADING_WHEN",155:"IF",156:"POST_IF",157:"UNARY",158:"UNARY_MATH",159:"-",160:"+",161:"--",162:"++",163:"?",164:"MATH",165:"**",166:"SHIFT",167:"COMPARE",168:"&",169:"^",170:"|",171:"&&",172:"||",173:"BIN?",174:"RELATION",175:"COMPOUND_ASSIGN"},productions_:[0,[3,0],[3,1],[4,1],[4,3],[4,2],[5,1],[5,1],[5,1],[8,1],[8,1],[8,1],[8,1],[8,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[27,1],[27,2],[27,3],[30,2],[30,3],[33,1],[35,1],[37,1],[37,1],[39,1],[39,3],[43,1],[43,3],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[19,3],[19,4],[19,5],[56,1],[56,3],[56,5],[56,3],[56,5],[56,1],[59,1],[59,1],[59,1],[57,1],[57,1],[10,2],[10,4],[10,1],[9,3],[9,2],[11,1],[17,5],[17,2],[67,1],[67,1],[70,0],[70,1],[65,0],[65,1],[65,3],[65,4],[65,6],[72,1],[72,2],[72,3],[72,1],[73,1],[73,1],[73,1],[73,1],[76,2],[77,1],[77,2],[77,2],[77,1],[54,1],[54,1],[54,1],[15,1],[15,1],[15,1],[15,1],[15,1],[78,2],[78,2],[78,2],[78,2],[78,1],[78,1],[86,3],[86,2],[88,1],[88,1],[62,4],[93,0],[93,1],[93,3],[93,4],[93,6],[25,1],[25,2],[25,3],[25,4],[25,2],[25,3],[25,4],[25,5],[13,2],[13,4],[13,4],[13,5],[13,7],[13,6],[13,9],[100,1],[100,3],[100,4],[100,4],[100,6],[101,1],[101,3],[101,1],[101,3],[98,1],[99,3],[14,3],[14,5],[14,2],[14,4],[14,5],[14,6],[14,3],[14,4],[14,7],[106,1],[106,3],[106,4],[106,4],[106,6],[108,1],[108,3],[108,3],[108,1],[108,3],[16,3],[16,3],[16,3],[16,1],[111,1],[111,2],[109,0],[109,1],[110,2],[110,4],[81,1],[81,1],[60,2],[75,2],[75,4],[121,1],[121,1],[80,5],[91,3],[91,2],[91,2],[91,1],[116,1],[116,3],[116,4],[116,4],[116,6],[123,1],[123,1],[123,1],[124,1],[124,3],[21,2],[21,3],[21,4],[21,5],[126,3],[126,3],[126,2],[26,2],[79,3],[79,5],[132,2],[132,4],[132,2],[132,4],[22,2],[22,2],[22,2],[22,1],[136,2],[136,2],[23,2],[23,2],[23,2],[138,2],[138,4],[138,2],[141,2],[141,3],[145,1],[145,1],[145,1],[145,1],[143,1],[143,3],[142,2],[142,2],[142,4],[142,4],[142,4],[142,6],[142,6],[142,2],[142,4],[24,5],[24,7],[24,4],[24,6],[150,1],[150,2],[152,3],[152,4],[154,3],[154,5],[20,1],[20,3],[20,3],[20,3],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,5],[18,4],[18,3]],performAction:function(e,t,n,a,i,o,r){var s=o.length-1;switch(i){case 1:return this.$=a.addLocationDataFn(r[s],r[s])(new a.Block);break;case 2:return this.$=o[s];break;case 3:this.$=a.addLocationDataFn(r[s],r[s])(a.Block.wrap([o[s]]));break;case 4:this.$=a.addLocationDataFn(r[s-2],r[s])(o[s-2].push(o[s]));break;case 5:this.$=o[s-1];break;case 6:case 7:case 8:case 9:case 10:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 35:case 40:case 42:case 56:case 57:case 58:case 59:case 60:case 61:case 72:case 73:case 83:case 84:case 85:case 86:case 91:case 92:case 95:case 99:case 105:case 164:case 188:case 189:case 191:case 221:case 222:case 240:case 246:this.$=o[s];break;case 11:this.$=a.addLocationDataFn(r[s],r[s])(new a.StatementLiteral(o[s]));break;case 27:this.$=a.addLocationDataFn(r[s],r[s])(new a.Op(o[s],new a.Value(new a.Literal(""))));break;case 28:case 250:case 251:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Op(o[s-1],o[s]));break;case 29:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Op(o[s-2].concat(o[s-1]),o[s]));break;case 30:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Block);break;case 31:case 106:this.$=a.addLocationDataFn(r[s-2],r[s])(o[s-1]);break;case 32:this.$=a.addLocationDataFn(r[s],r[s])(new a.IdentifierLiteral(o[s]));break;case 33:this.$=a.addLocationDataFn(r[s],r[s])(new a.PropertyName(o[s]));break;case 34:this.$=a.addLocationDataFn(r[s],r[s])(new a.NumberLiteral(o[s]));break;case 36:this.$=a.addLocationDataFn(r[s],r[s])(new a.StringLiteral(o[s]));break;case 37:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.StringWithInterpolations(o[s-1]));break;case 38:this.$=a.addLocationDataFn(r[s],r[s])(new a.RegexLiteral(o[s]));break;case 39:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.RegexWithInterpolations(o[s-1].args));break;case 41:this.$=a.addLocationDataFn(r[s],r[s])(new a.PassthroughLiteral(o[s]));break;case 43:this.$=a.addLocationDataFn(r[s],r[s])(new a.UndefinedLiteral);break;case 44:this.$=a.addLocationDataFn(r[s],r[s])(new a.NullLiteral);break;case 45:this.$=a.addLocationDataFn(r[s],r[s])(new a.BooleanLiteral(o[s]));break;case 46:this.$=a.addLocationDataFn(r[s],r[s])(new a.InfinityLiteral(o[s]));break;case 47:this.$=a.addLocationDataFn(r[s],r[s])(new a.NaNLiteral);break;case 48:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Assign(o[s-2],o[s]));break;case 49:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.Assign(o[s-3],o[s]));break;case 50:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.Assign(o[s-4],o[s-1]));break;case 51:case 88:case 93:case 94:case 96:case 97:case 98:case 223:case 224:this.$=a.addLocationDataFn(r[s],r[s])(new a.Value(o[s]));break;case 52:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Assign(a.addLocationDataFn(r[s-2])(new a.Value(o[s-2])),o[s],"object",{operatorToken:a.addLocationDataFn(r[s-1])(new a.Literal(o[s-1]))}));break;case 53:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.Assign(a.addLocationDataFn(r[s-4])(new a.Value(o[s-4])),o[s-1],"object",{operatorToken:a.addLocationDataFn(r[s-3])(new a.Literal(o[s-3]))}));break;case 54:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Assign(a.addLocationDataFn(r[s-2])(new a.Value(o[s-2])),o[s],null,{operatorToken:a.addLocationDataFn(r[s-1])(new a.Literal(o[s-1]))}));break;case 55:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.Assign(a.addLocationDataFn(r[s-4])(new a.Value(o[s-4])),o[s-1],null,{operatorToken:a.addLocationDataFn(r[s-3])(new a.Literal(o[s-3]))}));break;case 62:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Return(o[s]));break;case 63:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.Return(new a.Value(o[s-1])));break;case 64:this.$=a.addLocationDataFn(r[s],r[s])(new a.Return);break;case 65:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.YieldReturn(o[s]));break;case 66:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.YieldReturn);break;case 67:this.$=a.addLocationDataFn(r[s],r[s])(new a.Comment(o[s]));break;case 68:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.Code(o[s-3],o[s],o[s-1]));break;case 69:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Code([],o[s],o[s-1]));break;case 70:this.$=a.addLocationDataFn(r[s],r[s])("func");break;case 71:this.$=a.addLocationDataFn(r[s],r[s])("boundfunc");break;case 74:case 111:this.$=a.addLocationDataFn(r[s],r[s])([]);break;case 75:case 112:case 131:case 151:case 183:case 225:this.$=a.addLocationDataFn(r[s],r[s])([o[s]]);break;case 76:case 113:case 132:case 152:case 184:this.$=a.addLocationDataFn(r[s-2],r[s])(o[s-2].concat(o[s]));break;case 77:case 114:case 133:case 153:case 185:this.$=a.addLocationDataFn(r[s-3],r[s])(o[s-3].concat(o[s]));break;case 78:case 115:case 135:case 155:case 187:this.$=a.addLocationDataFn(r[s-5],r[s])(o[s-5].concat(o[s-2]));break;case 79:this.$=a.addLocationDataFn(r[s],r[s])(new a.Param(o[s]));break;case 80:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Param(o[s-1],null,!0));break;case 81:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Param(o[s-2],o[s]));break;case 82:case 190:this.$=a.addLocationDataFn(r[s],r[s])(new a.Expansion);break;case 87:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Splat(o[s-1]));break;case 89:this.$=a.addLocationDataFn(r[s-1],r[s])(o[s-1].add(o[s]));break;case 90:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Value(o[s-1],[].concat(o[s])));break;case 100:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Access(o[s]));break;case 101:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Access(o[s],"soak"));break;case 102:this.$=a.addLocationDataFn(r[s-1],r[s])([a.addLocationDataFn(r[s-1])(new a.Access(new a.PropertyName("prototype"))),a.addLocationDataFn(r[s])(new a.Access(o[s]))]);break;case 103:this.$=a.addLocationDataFn(r[s-1],r[s])([a.addLocationDataFn(r[s-1])(new a.Access(new a.PropertyName("prototype"),"soak")),a.addLocationDataFn(r[s])(new a.Access(o[s]))]);break;case 104:this.$=a.addLocationDataFn(r[s],r[s])(new a.Access(new a.PropertyName("prototype")));break;case 107:this.$=a.addLocationDataFn(r[s-1],r[s])(a.extend(o[s],{soak:!0}));break;case 108:this.$=a.addLocationDataFn(r[s],r[s])(new a.Index(o[s]));break;case 109:this.$=a.addLocationDataFn(r[s],r[s])(new a.Slice(o[s]));break;case 110:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.Obj(o[s-2],o[s-3].generated));break;case 116:this.$=a.addLocationDataFn(r[s],r[s])(new a.Class);break;case 117:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Class(null,null,o[s]));break;case 118:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Class(null,o[s]));break;case 119:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.Class(null,o[s-1],o[s]));break;case 120:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Class(o[s]));break;case 121:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Class(o[s-1],null,o[s]));break;case 122:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.Class(o[s-2],o[s]));break;case 123:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.Class(o[s-3],o[s-1],o[s]));break;case 124:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.ImportDeclaration(null,o[s]));break;case 125:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.ImportDeclaration(new a.ImportClause(o[s-2],null),o[s]));break;case 126:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.ImportDeclaration(new a.ImportClause(null,o[s-2]),o[s]));break;case 127:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.ImportDeclaration(new a.ImportClause(null,new a.ImportSpecifierList([])),o[s]));break;case 128:this.$=a.addLocationDataFn(r[s-6],r[s])(new a.ImportDeclaration(new a.ImportClause(null,new a.ImportSpecifierList(o[s-4])),o[s]));break;case 129:this.$=a.addLocationDataFn(r[s-5],r[s])(new a.ImportDeclaration(new a.ImportClause(o[s-4],o[s-2]),o[s]));break;case 130:this.$=a.addLocationDataFn(r[s-8],r[s])(new a.ImportDeclaration(new a.ImportClause(o[s-7],new a.ImportSpecifierList(o[s-4])),o[s]));break;case 134:case 154:case 170:case 186:this.$=a.addLocationDataFn(r[s-3],r[s])(o[s-2]);break;case 136:this.$=a.addLocationDataFn(r[s],r[s])(new a.ImportSpecifier(o[s]));break;case 137:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.ImportSpecifier(o[s-2],o[s]));break;case 138:this.$=a.addLocationDataFn(r[s],r[s])(new a.ImportSpecifier(new a.Literal(o[s])));break;case 139:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.ImportSpecifier(new a.Literal(o[s-2]),o[s]));break;case 140:this.$=a.addLocationDataFn(r[s],r[s])(new a.ImportDefaultSpecifier(o[s]));break;case 141:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.ImportNamespaceSpecifier(new a.Literal(o[s-2]),o[s]));break;case 142:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.ExportNamedDeclaration(new a.ExportSpecifierList([])));break;case 143:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.ExportNamedDeclaration(new a.ExportSpecifierList(o[s-2])));break;case 144:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.ExportNamedDeclaration(o[s]));break;case 145:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.ExportNamedDeclaration(new a.Assign(o[s-2],o[s],null,{moduleDeclaration:"export"})));break;case 146:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.ExportNamedDeclaration(new a.Assign(o[s-3],o[s],null,{moduleDeclaration:"export"})));break;case 147:this.$=a.addLocationDataFn(r[s-5],r[s])(new a.ExportNamedDeclaration(new a.Assign(o[s-4],o[s-1],null,{moduleDeclaration:"export"})));break;case 148:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.ExportDefaultDeclaration(o[s]));break;case 149:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.ExportAllDeclaration(new a.Literal(o[s-2]),o[s]));break;case 150:this.$=a.addLocationDataFn(r[s-6],r[s])(new a.ExportNamedDeclaration(new a.ExportSpecifierList(o[s-4]),o[s]));break;case 156:this.$=a.addLocationDataFn(r[s],r[s])(new a.ExportSpecifier(o[s]));break;case 157:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.ExportSpecifier(o[s-2],o[s]));break;case 158:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.ExportSpecifier(o[s-2],new a.Literal(o[s])));break;case 159:this.$=a.addLocationDataFn(r[s],r[s])(new a.ExportSpecifier(new a.Literal(o[s])));break;case 160:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.ExportSpecifier(new a.Literal(o[s-2]),o[s]));break;case 161:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.TaggedTemplateCall(o[s-2],o[s],o[s-1]));break;case 162:case 163:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Call(o[s-2],o[s],o[s-1]));break;case 165:this.$=a.addLocationDataFn(r[s],r[s])(new a.SuperCall);break;case 166:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.SuperCall(o[s]));break;case 167:this.$=a.addLocationDataFn(r[s],r[s])(!1);break;case 168:this.$=a.addLocationDataFn(r[s],r[s])(!0);break;case 169:this.$=a.addLocationDataFn(r[s-1],r[s])([]);break;case 171:case 172:this.$=a.addLocationDataFn(r[s],r[s])(new a.Value(new a.ThisLiteral()));break;case 173:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Value(a.addLocationDataFn(r[s-1])(new a.ThisLiteral),[a.addLocationDataFn(r[s])(new a.Access(o[s]))],"this"));break;case 174:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Arr([]));break;case 175:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.Arr(o[s-2]));break;case 176:this.$=a.addLocationDataFn(r[s],r[s])("inclusive");break;case 177:this.$=a.addLocationDataFn(r[s],r[s])("exclusive");break;case 178:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.Range(o[s-3],o[s-1],o[s-2]));break;case 179:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Range(o[s-2],o[s],o[s-1]));break;case 180:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Range(o[s-1],null,o[s]));break;case 181:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Range(null,o[s],o[s-1]));break;case 182:this.$=a.addLocationDataFn(r[s],r[s])(new a.Range(null,null,o[s]));break;case 192:this.$=a.addLocationDataFn(r[s-2],r[s])([].concat(o[s-2],o[s]));break;case 193:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Try(o[s]));break;case 194:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Try(o[s-1],o[s][0],o[s][1]));break;case 195:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.Try(o[s-2],null,null,o[s]));break;case 196:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.Try(o[s-3],o[s-2][0],o[s-2][1],o[s]));break;case 197:this.$=a.addLocationDataFn(r[s-2],r[s])([o[s-1],o[s]]);break;case 198:this.$=a.addLocationDataFn(r[s-2],r[s])([a.addLocationDataFn(r[s-1])(new a.Value(o[s-1])),o[s]]);break;case 199:this.$=a.addLocationDataFn(r[s-1],r[s])([null,o[s]]);break;case 200:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Throw(o[s]));break;case 201:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Parens(o[s-1]));break;case 202:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.Parens(o[s-2]));break;case 203:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.While(o[s]));break;case 204:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.While(o[s-2],{guard:o[s]}));break;case 205:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.While(o[s],{invert:!0}));break;case 206:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.While(o[s-2],{invert:!0,guard:o[s]}));break;case 207:this.$=a.addLocationDataFn(r[s-1],r[s])(o[s-1].addBody(o[s]));break;case 208:case 209:this.$=a.addLocationDataFn(r[s-1],r[s])(o[s].addBody(a.addLocationDataFn(r[s-1])(a.Block.wrap([o[s-1]]))));break;case 210:this.$=a.addLocationDataFn(r[s],r[s])(o[s]);break;case 211:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.While(a.addLocationDataFn(r[s-1])(new a.BooleanLiteral("true"))).addBody(o[s]));break;case 212:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.While(a.addLocationDataFn(r[s-1])(new a.BooleanLiteral("true"))).addBody(a.addLocationDataFn(r[s])(a.Block.wrap([o[s]]))));break;case 213:case 214:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.For(o[s-1],o[s]));break;case 215:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.For(o[s],o[s-1]));break;case 216:this.$=a.addLocationDataFn(r[s-1],r[s])({source:a.addLocationDataFn(r[s])(new a.Value(o[s]))});break;case 217:this.$=a.addLocationDataFn(r[s-3],r[s])({source:a.addLocationDataFn(r[s-2])(new a.Value(o[s-2])),step:o[s]});break;case 218:this.$=a.addLocationDataFn(r[s-1],r[s])(function(){return o[s].own=o[s-1].own,o[s].ownTag=o[s-1].ownTag,o[s].name=o[s-1][0],o[s].index=o[s-1][1],o[s]}());break;case 219:this.$=a.addLocationDataFn(r[s-1],r[s])(o[s]);break;case 220:this.$=a.addLocationDataFn(r[s-2],r[s])(function(){return o[s].own=!0,o[s].ownTag=a.addLocationDataFn(r[s-1])(new a.Literal(o[s-1])),o[s]}());break;case 226:this.$=a.addLocationDataFn(r[s-2],r[s])([o[s-2],o[s]]);break;case 227:this.$=a.addLocationDataFn(r[s-1],r[s])({source:o[s]});break;case 228:this.$=a.addLocationDataFn(r[s-1],r[s])({source:o[s],object:!0});break;case 229:this.$=a.addLocationDataFn(r[s-3],r[s])({source:o[s-2],guard:o[s]});break;case 230:this.$=a.addLocationDataFn(r[s-3],r[s])({source:o[s-2],guard:o[s],object:!0});break;case 231:this.$=a.addLocationDataFn(r[s-3],r[s])({source:o[s-2],step:o[s]});break;case 232:this.$=a.addLocationDataFn(r[s-5],r[s])({source:o[s-4],guard:o[s-2],step:o[s]});break;case 233:this.$=a.addLocationDataFn(r[s-5],r[s])({source:o[s-4],step:o[s-2],guard:o[s]});break;case 234:this.$=a.addLocationDataFn(r[s-1],r[s])({source:o[s],from:!0});break;case 235:this.$=a.addLocationDataFn(r[s-3],r[s])({source:o[s-2],guard:o[s],from:!0});break;case 236:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.Switch(o[s-3],o[s-1]));break;case 237:this.$=a.addLocationDataFn(r[s-6],r[s])(new a.Switch(o[s-5],o[s-3],o[s-1]));break;case 238:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.Switch(null,o[s-1]));break;case 239:this.$=a.addLocationDataFn(r[s-5],r[s])(new a.Switch(null,o[s-3],o[s-1]));break;case 241:this.$=a.addLocationDataFn(r[s-1],r[s])(o[s-1].concat(o[s]));break;case 242:this.$=a.addLocationDataFn(r[s-2],r[s])([[o[s-1],o[s]]]);break;case 243:this.$=a.addLocationDataFn(r[s-3],r[s])([[o[s-2],o[s-1]]]);break;case 244:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.If(o[s-1],o[s],{type:o[s-2]}));break;case 245:this.$=a.addLocationDataFn(r[s-4],r[s])(o[s-4].addElse(a.addLocationDataFn(r[s-2],r[s])(new a.If(o[s-1],o[s],{type:o[s-2]}))));break;case 247:this.$=a.addLocationDataFn(r[s-2],r[s])(o[s-2].addElse(o[s]));break;case 248:case 249:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.If(o[s],a.addLocationDataFn(r[s-2])(a.Block.wrap([o[s-2]])),{type:o[s-1],statement:!0}));break;case 252:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Op("-",o[s]));break;case 253:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Op("+",o[s]));break;case 254:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Op("--",o[s]));break;case 255:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Op("++",o[s]));break;case 256:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Op("--",o[s-1],null,!0));break;case 257:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Op("++",o[s-1],null,!0));break;case 258:this.$=a.addLocationDataFn(r[s-1],r[s])(new a.Existence(o[s-1]));break;case 259:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Op("+",o[s-2],o[s]));break;case 260:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Op("-",o[s-2],o[s]));break;case 261:case 262:case 263:case 264:case 265:case 266:case 267:case 268:case 269:case 270:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Op(o[s-1],o[s-2],o[s]));break;case 271:this.$=a.addLocationDataFn(r[s-2],r[s])(function(){return"!"===o[s-1].charAt(0)?new a.Op(o[s-1].slice(1),o[s-2],o[s]).invert():new a.Op(o[s-1],o[s-2],o[s])}());break;case 272:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Assign(o[s-2],o[s],o[s-1]));break;case 273:this.$=a.addLocationDataFn(r[s-4],r[s])(new a.Assign(o[s-4],o[s-1],o[s-3]));break;case 274:this.$=a.addLocationDataFn(r[s-3],r[s])(new a.Assign(o[s-3],o[s],o[s-2]));break;case 275:this.$=a.addLocationDataFn(r[s-2],r[s])(new a.Extends(o[s-2],o[s]));}},table:[{1:[2,1],3:1,4:2,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:a,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{1:[3]},{1:[2,2],6:q},t(Y,[2,3]),t(Y,[2,6],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(Y,[2,7],{141:77,132:105,138:106,133:P,135:R,139:M,156:le}),t(Y,[2,8]),t(de,[2,14],{109:107,78:108,86:114,40:pe,41:pe,114:pe,82:ce,83:ue,84:me,85:fe,87:ge,90:_e,113:ye}),t(de,[2,15],{86:114,109:117,78:118,82:ce,83:ue,84:me,85:fe,87:ge,90:_e,113:ye,114:pe}),t(de,[2,16]),t(de,[2,17]),t(de,[2,18]),t(de,[2,19]),t(de,[2,20]),t(de,[2,21]),t(de,[2,22]),t(de,[2,23]),t(de,[2,24]),t(de,[2,25]),t(de,[2,26]),t(he,[2,9]),t(he,[2,10]),t(he,[2,11]),t(he,[2,12]),t(he,[2,13]),t([1,6,32,42,131,133,135,139,156,163,164,165,166,167,168,169,170,171,172,173,174],be,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,7:120,8:122,12:n,28:xe,29:ve,34:i,38:o,40:r,41:s,44:l,45:d,48:p,49:c,50:u,51:m,52:f,53:g,61:[1,119],63:y,64:h,68:b,69:x,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:C,125:w,129:O,130:D,137:I,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:H}),t(Se,Te,{55:[1,124]}),t(Se,[2,96]),t(Se,[2,97]),t(Se,[2,98]),t(Se,[2,99]),t(ke,[2,164]),t([6,31,66,71],Ee,{65:125,72:126,73:127,33:129,60:130,75:131,62:132,34:i,74:Ne,92:v,118:Le,119:Ae}),{30:135,31:Ce},{7:137,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:138,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:139,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:140,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{15:142,16:143,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:144,60:71,62:54,75:53,77:141,79:28,80:29,81:30,92:v,111:31,112:E,117:N,118:A,119:C,130:D},{15:142,16:143,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:144,60:71,62:54,75:53,77:145,79:28,80:29,81:30,92:v,111:31,112:E,117:N,118:A,119:C,130:D},t(we,Oe,{96:[1,149],161:[1,146],162:[1,147],175:[1,148]}),t(de,[2,246],{151:[1,150]}),{30:151,31:Ce},{30:152,31:Ce},t(de,[2,210]),{30:153,31:Ce},{7:154,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,155],33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(De,[2,116],{47:27,79:28,80:29,81:30,111:31,75:53,62:54,37:55,43:57,33:70,60:71,39:80,15:142,16:143,54:144,30:156,77:158,31:Ce,34:i,38:o,40:r,41:s,44:l,45:d,48:p,49:c,50:u,51:m,52:f,53:g,92:v,96:[1,157],112:E,117:N,118:A,119:C,130:D}),{7:159,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(he,Pe,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,7:160,12:n,28:xe,31:Re,34:i,38:o,40:r,41:s,44:l,45:d,48:p,49:c,50:u,51:m,52:f,53:g,61:_,63:y,64:h,68:b,69:x,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:C,125:w,129:O,130:D,137:I,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:H}),t([1,6,31,32,42,71,94,131,133,135,139,156],[2,67]),{33:166,34:i,39:162,40:r,41:s,92:[1,165],98:163,99:164,104:Ie},{25:169,33:170,34:i,92:[1,168],95:S,103:[1,171],107:[1,172]},t(we,[2,93]),t(we,[2,94]),t(Se,[2,40]),t(Se,[2,41]),t(Se,[2,42]),t(Se,[2,43]),t(Se,[2,44]),t(Se,[2,45]),t(Se,[2,46]),t(Se,[2,47]),{4:173,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:a,31:[1,174],33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:175,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,116:177,117:N,118:A,119:C,120:Be,123:178,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(Se,[2,171]),t(Se,[2,172],{35:182,36:ze}),t([1,6,31,32,42,46,66,71,74,82,83,84,85,87,89,90,94,113,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],[2,165],{110:184,114:je}),{31:[2,70]},{31:[2,71]},t(Ue,[2,88]),t(Ue,[2,91]),{7:186,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:187,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:188,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:190,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,30:189,31:Ce,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{33:195,34:i,60:196,62:198,75:197,80:191,92:v,118:Le,119:C,143:192,144:[1,193],145:194},{142:199,146:[1,200],147:[1,201],148:[1,202]},t([6,31,71,94],$e,{39:80,93:203,56:204,57:205,59:206,11:207,37:208,33:209,35:210,60:211,34:i,36:ze,38:o,40:r,41:s,63:y,118:Le}),t(We,[2,34]),t(We,[2,35]),t(Se,[2,38]),{15:142,16:212,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:144,60:71,62:54,75:53,77:213,79:28,80:29,81:30,92:v,111:31,112:E,117:N,118:A,119:C,130:D},t([1,6,29,31,32,40,41,42,55,58,66,71,74,82,83,84,85,87,89,90,94,96,102,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],[2,32]),t(He,[2,36]),{4:214,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:a,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(Y,[2,5],{7:4,8:5,9:6,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,5:215,12:n,28:a,34:i,38:o,40:r,41:s,44:l,45:d,48:p,49:c,50:u,51:m,52:f,53:g,61:_,63:y,64:h,68:b,69:x,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:C,125:w,129:O,130:D,133:P,135:R,137:I,139:M,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:H}),t(de,[2,258]),{7:216,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:217,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:218,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:219,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:220,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:221,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:222,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:223,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:224,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:225,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:226,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:227,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:228,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:229,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(de,[2,209]),t(de,[2,214]),{7:230,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(de,[2,208]),t(de,[2,213]),{39:231,40:r,41:s,110:232,114:je},t(Ue,[2,89]),t(qe,[2,168]),{35:233,36:ze},{35:234,36:ze},t(Ue,[2,104],{35:235,36:ze}),{35:236,36:ze},t(Ue,[2,105]),{7:238,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Ye,75:53,77:40,79:28,80:29,81:30,88:237,91:239,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,121:240,122:Ve,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{86:243,87:ge,90:_e},{110:244,114:je},t(Ue,[2,90]),t(Y,[2,66],{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,7:245,12:n,28:xe,31:Re,34:i,38:o,40:r,41:s,44:l,45:d,48:p,49:c,50:u,51:m,52:f,53:g,61:_,63:y,64:h,68:b,69:x,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:C,125:w,129:O,130:D,133:Pe,135:Pe,139:Pe,156:Pe,137:I,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:H}),t(Ge,[2,28],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{7:246,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{132:105,133:P,135:R,138:106,139:M,141:77,156:le},t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,163,164,165,166,167,168,169,170,171,172,173,174],be,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,7:120,8:122,12:n,28:xe,29:ve,34:i,38:o,40:r,41:s,44:l,45:d,48:p,49:c,50:u,51:m,52:f,53:g,61:_,63:y,64:h,68:b,69:x,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:C,125:w,129:O,130:D,137:I,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:H}),{6:[1,248],7:247,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,249],33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t([6,31],Ze,{70:252,66:[1,250],71:Xe}),t(Ke,[2,75]),t(Ke,[2,79],{55:[1,254],74:[1,253]}),t(Ke,[2,82]),t(Je,[2,83]),t(Je,[2,84]),t(Je,[2,85]),t(Je,[2,86]),{35:182,36:ze},{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,116:177,117:N,118:A,119:C,120:Be,123:178,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(de,[2,69]),{4:257,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:a,32:[1,256],33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,164,165,166,167,168,169,170,171,172,173,174],[2,250],{141:77,132:102,138:103,163:X}),t(Qe,[2,251],{141:77,132:102,138:103,163:X,165:J}),t(Qe,[2,252],{141:77,132:102,138:103,163:X,165:J}),t(Qe,[2,253],{141:77,132:102,138:103,163:X,165:J}),t(de,[2,254],{40:Oe,41:Oe,82:Oe,83:Oe,84:Oe,85:Oe,87:Oe,90:Oe,113:Oe,114:Oe}),t(qe,pe,{109:107,78:108,86:114,82:ce,83:ue,84:me,85:fe,87:ge,90:_e,113:ye}),{78:118,82:ce,83:ue,84:me,85:fe,86:114,87:ge,90:_e,109:117,113:ye,114:pe},t(et,Te),t(de,[2,255],{40:Oe,41:Oe,82:Oe,83:Oe,84:Oe,85:Oe,87:Oe,90:Oe,113:Oe,114:Oe}),t(de,[2,256]),t(de,[2,257]),{6:[1,260],7:258,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,259],33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:261,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{30:262,31:Ce,155:[1,263]},t(de,[2,193],{126:264,127:[1,265],128:[1,266]}),t(de,[2,207]),t(de,[2,215]),{31:[1,267],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},{150:268,152:269,153:tt},t(de,[2,117]),{7:271,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(De,[2,120],{30:272,31:Ce,40:Oe,41:Oe,82:Oe,83:Oe,84:Oe,85:Oe,87:Oe,90:Oe,113:Oe,114:Oe,96:[1,273]}),t(Ge,[2,200],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(he,nt,{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{62:274,92:v},t(he,[2,124]),{29:[1,275],71:[1,276]},{29:[1,277]},{31:at,33:282,34:i,94:[1,278],100:279,101:280,103:it},t([29,71],[2,140]),{102:[1,284]},{31:ot,33:289,34:i,94:[1,285],103:rt,106:286,108:287},t(he,[2,144]),{55:[1,291]},{7:292,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{29:[1,293]},{6:q,131:[1,294]},{4:295,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:a,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t([6,31,71,120],st,{141:77,132:102,138:103,121:296,74:[1,297],122:Ve,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(lt,[2,174]),t([6,31,120],Ze,{70:298,71:dt}),t(pt,[2,183]),{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,116:300,117:N,118:A,119:C,123:178,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(pt,[2,189]),t(pt,[2,190]),t(ct,[2,173]),t(ct,[2,33]),t(ke,[2,166]),{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,115:[1,301],116:302,117:N,118:A,119:C,123:178,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{30:303,31:Ce,132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},t(ut,[2,203],{141:77,132:102,138:103,133:P,134:[1,304],135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(ut,[2,205],{141:77,132:102,138:103,133:P,134:[1,305],135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(de,[2,211]),t(mt,[2,212],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],[2,216],{140:[1,306]}),t(ft,[2,219]),{33:195,34:i,60:196,62:198,75:197,92:v,118:Le,119:Ae,143:307,145:194},t(ft,[2,225],{71:[1,308]}),t(gt,[2,221]),t(gt,[2,222]),t(gt,[2,223]),t(gt,[2,224]),t(de,[2,218]),{7:309,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:310,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:311,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(_t,Ze,{70:312,71:yt}),t(ht,[2,112]),t(ht,[2,51],{58:[1,314]}),t(bt,[2,60],{55:[1,315]}),t(ht,[2,56]),t(bt,[2,61]),t(xt,[2,57]),t(xt,[2,58]),t(xt,[2,59]),{46:[1,316],78:118,82:ce,83:ue,84:me,85:fe,86:114,87:ge,90:_e,109:117,113:ye,114:pe},t(et,Oe),{6:q,42:[1,317]},t(Y,[2,4]),t(vt,[2,259],{141:77,132:102,138:103,163:X,164:K,165:J}),t(vt,[2,260],{141:77,132:102,138:103,163:X,164:K,165:J}),t(Qe,[2,261],{141:77,132:102,138:103,163:X,165:J}),t(Qe,[2,262],{141:77,132:102,138:103,163:X,165:J}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,166,167,168,169,170,171,172,173,174],[2,263],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,167,168,169,170,171,172,173],[2,264],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,168,169,170,171,172,173],[2,265],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,169,170,171,172,173],[2,266],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,170,171,172,173],[2,267],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,171,172,173],[2,268],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,172,173],[2,269],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,173],[2,270],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,174:se}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,167,168,169,170,171,172,173,174],[2,271],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q}),t(mt,[2,249],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(mt,[2,248],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(ke,[2,161]),t(ke,[2,162]),t(Ue,[2,100]),t(Ue,[2,101]),t(Ue,[2,102]),t(Ue,[2,103]),{89:[1,318]},{74:Ye,89:[2,108],121:319,122:Ve,132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},{89:[2,109]},{7:320,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,89:[2,182],92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(St,[2,176]),t(St,Tt),t(Ue,[2,107]),t(ke,[2,163]),t(Y,[2,65],{141:77,132:102,138:103,133:nt,135:nt,139:nt,156:nt,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(Ge,[2,29],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(Ge,[2,48],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{7:321,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:322,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{67:323,68:b,69:x},t(kt,Et,{73:127,33:129,60:130,75:131,62:132,72:324,34:i,74:Ne,92:v,118:Le,119:Ae}),{6:Nt,31:Lt},t(Ke,[2,80]),{7:327,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(pt,st,{141:77,132:102,138:103,74:[1,328],133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(At,[2,30]),{6:q,32:[1,329]},t(Ge,[2,272],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{7:330,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:331,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(Ge,[2,275],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(de,[2,247]),{7:332,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(de,[2,194],{127:[1,333]}),{30:334,31:Ce},{30:337,31:Ce,33:335,34:i,62:336,92:v},{150:338,152:269,153:tt},{32:[1,339],151:[1,340],152:341,153:tt},t(Ct,[2,240]),{7:343,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,124:342,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(wt,[2,118],{141:77,132:102,138:103,30:344,31:Ce,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(de,[2,121]),{7:345,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{32:[1,346]},{39:347,40:r,41:s},{92:[1,349],99:348,104:Ie},{39:350,40:r,41:s},{29:[1,351]},t(_t,Ze,{70:352,71:Ot}),t(ht,[2,131]),{31:at,33:282,34:i,100:354,101:280,103:it},t(ht,[2,136],{102:[1,355]}),t(ht,[2,138],{102:[1,356]}),{33:357,34:i},t(he,[2,142]),t(_t,Ze,{70:358,71:Dt}),t(ht,[2,151]),{31:ot,33:289,34:i,103:rt,106:360,108:287},t(ht,[2,156],{102:[1,361]}),t(ht,[2,159],{102:[1,362]}),{6:[1,364],7:363,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,365],33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(Pt,[2,148],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{39:366,40:r,41:s},t(Se,[2,201]),{6:q,32:[1,367]},{7:368,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t([12,28,34,38,40,41,44,45,48,49,50,51,52,53,61,63,64,68,69,92,95,97,105,112,117,118,119,125,129,130,133,135,137,139,149,155,157,158,159,160,161,162],Tt,{6:Rt,31:Rt,71:Rt,120:Rt}),{6:It,31:Mt,120:[1,369]},t([6,31,32,115,120],Et,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,76:180,7:255,123:372,12:n,28:xe,34:i,38:o,40:r,41:s,44:l,45:d,48:p,49:c,50:u,51:m,52:f,53:g,61:_,63:y,64:h,68:b,69:x,74:Fe,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:C,125:w,129:O,130:D,133:P,135:R,137:I,139:M,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:H}),t(kt,Ze,{70:373,71:dt}),t(ke,[2,169]),t([6,31,115],Ze,{70:374,71:dt}),t(Ft,[2,244]),{7:375,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:376,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:377,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(ft,[2,220]),{33:195,34:i,60:196,62:198,75:197,92:v,118:Le,119:Ae,145:378},t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,135,139,156],[2,227],{141:77,132:102,138:103,134:[1,379],140:[1,380],159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(Bt,[2,228],{141:77,132:102,138:103,134:[1,381],159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(Bt,[2,234],{141:77,132:102,138:103,134:[1,382],159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{6:zt,31:jt,94:[1,383]},t(Ut,Et,{39:80,57:205,59:206,11:207,37:208,33:209,35:210,60:211,56:386,34:i,36:ze,38:o,40:r,41:s,63:y,118:Le}),{7:387,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,388],33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:389,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,390],33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(Se,[2,39]),t(He,[2,37]),t(Ue,[2,106]),{7:391,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,89:[2,180],92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{89:[2,181],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},t(Ge,[2,49],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{32:[1,392],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},{30:393,31:Ce},t(Ke,[2,76]),{33:129,34:i,60:130,62:132,72:394,73:127,74:Ne,75:131,92:v,118:Le,119:Ae},t($t,Ee,{72:126,73:127,33:129,60:130,75:131,62:132,65:395,34:i,74:Ne,92:v,118:Le,119:Ae}),t(Ke,[2,81],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(pt,Rt),t(At,[2,31]),{32:[1,396],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},t(Ge,[2,274],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{30:397,31:Ce,132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},{30:398,31:Ce},t(de,[2,195]),{30:399,31:Ce},{30:400,31:Ce},t(Wt,[2,199]),{32:[1,401],151:[1,402],152:341,153:tt},t(de,[2,238]),{30:403,31:Ce},t(Ct,[2,241]),{30:404,31:Ce,71:[1,405]},t(Ht,[2,191],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(de,[2,119]),t(wt,[2,122],{141:77,132:102,138:103,30:406,31:Ce,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(he,[2,63]),t(he,[2,125]),{29:[1,407]},{31:at,33:282,34:i,100:408,101:280,103:it},t(he,[2,126]),{39:409,40:r,41:s},{6:qt,31:Yt,94:[1,410]},t(Ut,Et,{33:282,101:413,34:i,103:it}),t(kt,Ze,{70:414,71:Ot}),{33:415,34:i},{33:416,34:i},{29:[2,141]},{6:Vt,31:Gt,94:[1,417]},t(Ut,Et,{33:289,108:420,34:i,103:rt}),t(kt,Ze,{70:421,71:Dt}),{33:422,34:i,103:[1,423]},{33:424,34:i},t(Pt,[2,145],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{7:425,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:426,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(he,[2,149]),{131:[1,427]},{120:[1,428],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},t(lt,[2,175]),{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,123:429,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,116:430,117:N,118:A,119:C,123:178,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(pt,[2,184]),{6:It,31:Mt,32:[1,431]},{6:It,31:Mt,115:[1,432]},t(mt,[2,204],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(mt,[2,206],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(mt,[2,217],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(ft,[2,226]),{7:433,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:434,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:435,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:436,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(lt,[2,110]),{11:207,33:209,34:i,35:210,36:ze,37:208,38:o,39:80,40:r,41:s,56:437,57:205,59:206,60:211,63:y,118:Le},t($t,$e,{39:80,56:204,57:205,59:206,11:207,37:208,33:209,35:210,60:211,93:438,34:i,36:ze,38:o,40:r,41:s,63:y,118:Le}),t(ht,[2,113]),t(ht,[2,52],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{7:439,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(ht,[2,54],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{7:440,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{89:[2,179],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},t(de,[2,50]),t(de,[2,68]),t(Ke,[2,77]),t(kt,Ze,{70:441,71:Xe}),t(de,[2,273]),t(Ft,[2,245]),t(de,[2,196]),t(Wt,[2,197]),t(Wt,[2,198]),t(de,[2,236]),{30:442,31:Ce},{32:[1,443]},t(Ct,[2,242],{6:[1,444]}),{7:445,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},t(de,[2,123]),{39:446,40:r,41:s},t(_t,Ze,{70:447,71:Ot}),t(he,[2,127]),{29:[1,448]},{33:282,34:i,101:449,103:it},{31:at,33:282,34:i,100:450,101:280,103:it},t(ht,[2,132]),{6:qt,31:Yt,32:[1,451]},t(ht,[2,137]),t(ht,[2,139]),t(he,[2,143],{29:[1,452]}),{33:289,34:i,103:rt,108:453},{31:ot,33:289,34:i,103:rt,106:454,108:287},t(ht,[2,152]),{6:Vt,31:Gt,32:[1,455]},t(ht,[2,157]),t(ht,[2,158]),t(ht,[2,160]),t(Pt,[2,146],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),{32:[1,456],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},t(Se,[2,202]),t(Se,[2,178]),t(pt,[2,185]),t(kt,Ze,{70:457,71:dt}),t(pt,[2,186]),t(ke,[2,170]),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,156],[2,229],{141:77,132:102,138:103,140:[1,458],159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(Bt,[2,231],{141:77,132:102,138:103,134:[1,459],159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(Ge,[2,230],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(Ge,[2,235],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(ht,[2,114]),t(kt,Ze,{70:460,71:yt}),{32:[1,461],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},{32:[1,462],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se},{6:Nt,31:Lt,32:[1,463]},{32:[1,464]},t(de,[2,239]),t(Ct,[2,243]),t(Ht,[2,192],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(he,[2,129]),{6:qt,31:Yt,94:[1,465]},{39:466,40:r,41:s},t(ht,[2,133]),t(kt,Ze,{70:467,71:Ot}),t(ht,[2,134]),{39:468,40:r,41:s},t(ht,[2,153]),t(kt,Ze,{70:469,71:Dt}),t(ht,[2,154]),t(he,[2,147]),{6:It,31:Mt,32:[1,470]},{7:471,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{7:472,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:s,43:57,44:l,45:d,47:27,48:p,49:c,50:u,51:m,52:f,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:C,125:w,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:H},{6:zt,31:jt,32:[1,473]},t(ht,[2,53]),t(ht,[2,55]),t(Ke,[2,78]),t(de,[2,237]),{29:[1,474]},t(he,[2,128]),{6:qt,31:Yt,32:[1,475]},t(he,[2,150]),{6:Vt,31:Gt,32:[1,476]},t(pt,[2,187]),t(Ge,[2,232],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(Ge,[2,233],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:se}),t(ht,[2,115]),{39:477,40:r,41:s},t(ht,[2,135]),t(ht,[2,155]),t(he,[2,130])],defaultActions:{68:[2,70],69:[2,71],239:[2,109],357:[2,141]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{function n(e,t){this.message=e,this.hash=t}throw n.prototype=Error,new n(e,t)}},parse:function(e){var t=this,n=[0],a=[null],i=[],o=this.table,s="",l=0,d=0,c=0,u=1,m=i.slice.call(arguments,1),f=Object.create(this.lexer),g={yy:{}};for(var _ in this.yy)Object.prototype.hasOwnProperty.call(this.yy,_)&&(g.yy[_]=this.yy[_]);f.setInput(e,g.yy),g.yy.lexer=f,g.yy.parser=this,"undefined"==typeof f.yylloc&&(f.yylloc={});var y=f.yylloc;i.push(y);var h=f.options&&f.options.ranges;this.parseError="function"==typeof g.yy.parseError?g.yy.parseError:Object.getPrototypeOf(this).parseError;_token_stack:var b=function(){var e;return e=f.lex()||u,"number"!=typeof e&&(e=t.symbols_[e]||e),e};for(var x={},v,S,T,k,E,N,p,A,C;;){if(T=n[n.length-1],this.defaultActions[T]?k=this.defaultActions[T]:((null===v||"undefined"==typeof v)&&(v=b()),k=o[T]&&o[T][v]),"undefined"==typeof k||!k.length||!k[0]){var w="";for(N in C=[],o[T])this.terminals_[N]&&N>2&&C.push("'"+this.terminals_[N]+"'");w=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(l+1)+": Unexpected "+(v==u?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(w,{text:f.match,token:this.terminals_[v]||v,line:f.yylineno,loc:y,expected:C})}if(k[0]instanceof Array&&1<k.length)throw new Error("Parse Error: multiple actions possible at state: "+T+", token: "+v);switch(k[0]){case 1:n.push(v),a.push(f.yytext),i.push(f.yylloc),n.push(k[1]),v=null,S?(v=S,S=null):(d=f.yyleng,s=f.yytext,l=f.yylineno,y=f.yylloc,0<c&&c--);break;case 2:if(p=this.productions_[k[1]][1],x.$=a[a.length-p],x._$={first_line:i[i.length-(p||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(p||1)].first_column,last_column:i[i.length-1].last_column},h&&(x._$.range=[i[i.length-(p||1)].range[0],i[i.length-1].range[1]]),E=this.performAction.apply(x,[s,d,l,g.yy,k[1],a,i].concat(m)),"undefined"!=typeof E)return E;p&&(n=n.slice(0,2*(-1*p)),a=a.slice(0,-1*p),i=i.slice(0,-1*p)),n.push(this.productions_[k[1]][0]),a.push(x.$),i.push(x._$),A=o[n[n.length-2]][n[n.length-1]],n.push(A);break;case 3:return!0;}}return!0}};return e.prototype=Zt,Zt.Parser=e,new e}();"undefined"!=typeof e&&"undefined"!=typeof n&&(n.parser=i,n.Parser=i.Parser,n.parse=function(){return i.parse.apply(i,arguments)},n.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),a.exit(1));var i="",o=e("fs");return"undefined"!=typeof o&&null!==o&&(i=o.readFileSync(e("path").normalize(t[1]),"utf8")),n.parser.parse(i)},"undefined"!=typeof t&&e.main===t&&n.main(a.argv.slice(1)))}).call(this,e("_process"))},{_process:147,fs:15,path:146}],41:[function(e){(function(){var t,n,a,o,r,s,l,d,p,i,c,u,m;if(t=e("./coffee-script"),o=e("child_process"),d=e("./helpers"),u=e("path"),c=function(e,n){var a;return a=t._compileFile(n,!1,!0),e._compile(a,n)},e.extensions){for(m=t.FILE_EXTENSIONS,p=0,i=m.length;p<i;p++)r=m[p],e.extensions[r]=c;n=e("module"),s=function(e){var t,a;for(a=u.basename(e).split("."),""===a[0]&&a.shift();a.shift();)if(t="."+a.join("."),n._extensions[t])return t;return".js"},n.prototype.load=function(e){var t;return this.filename=e,this.paths=n._nodeModulePaths(u.dirname(e)),t=s(e),n._extensions[t](this,e),this.loaded=!0}}o&&(l=o.fork,a=e.resolve("../../bin/coffee"),o.fork=function(e,t,n){return d.isCoffee(e)&&(!Array.isArray(t)&&(n=t||{},t=[]),t=[e].concat(t),e=a),l(e,t,n)})}).call(this)},{"./coffee-script":36,"./helpers":37,child_process:15,module:15,path:146}],42:[function(e,t,n){(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice,a,o,r,l,d,p,c,u,m,i,f,s,g,_,y,h,b,x,v,S;for(y=function(e,t,n){var a;return a=[e,t],a.generated=!0,n&&(a.origin=n),a},n.Rewriter=s=function(){function n(){}return n.prototype.rewrite=function(e){return this.tokens=e,this.removeLeadingNewlines(),this.closeOpenCalls(),this.closeOpenIndexes(),this.normalizeLines(),this.tagPostfixConditionals(),this.addImplicitBracesAndParens(),this.addLocationDataToGeneratedTokens(),this.fixOutdentLocationData(),this.tokens},n.prototype.scanTokens=function(e){var t,n,a;for(a=this.tokens,t=0;n=a[t];)t+=e.call(this,n,t,a);return!0},n.prototype.detectEnd=function(t,n,a){var i,o,r,s,p;for(p=this.tokens,i=0;s=p[t];){if(0===i&&n.call(this,s,t))return a.call(this,s,t);if(!s||0>i)return a.call(this,s,t-1);(o=s[0],0<=e.call(d,o))?i+=1:(r=s[0],0<=e.call(l,r))&&(i-=1),t+=1}return t-1},n.prototype.removeLeadingNewlines=function(){var e,t,n,a,i;for(a=this.tokens,e=t=0,n=a.length;t<n&&(i=a[e][0],"TERMINATOR"===i);e=++t);if(e)return this.tokens.splice(0,e)},n.prototype.closeOpenCalls=function(){var e,t;return t=function(e,t){var n;return")"===(n=e[0])||"CALL_END"===n||"OUTDENT"===e[0]&&")"===this.tag(t-1)},e=function(e,t){return this.tokens["OUTDENT"===e[0]?t-1:t][0]="CALL_END"},this.scanTokens(function(n,a){return"CALL_START"===n[0]&&this.detectEnd(a+1,t,e),1})},n.prototype.closeOpenIndexes=function(){var e,t;return t=function(e){var t;return"]"===(t=e[0])||"INDEX_END"===t},e=function(e){return e[0]="INDEX_END"},this.scanTokens(function(n,a){return"INDEX_START"===n[0]&&this.detectEnd(a+1,t,e),1})},n.prototype.indexOfTag=function(){var n,a,i,o,r,s,l;for(a=arguments[0],r=2<=arguments.length?t.call(arguments,1):[],n=0,(i=o=0,s=r.length);0<=s?o<s:o>s;i=0<=s?++o:--o){for(;"HERECOMMENT"===this.tag(a+i+n);)n+=2;if(null!=r[i]&&("string"==typeof r[i]&&(r[i]=[r[i]]),l=this.tag(a+i+n),0>e.call(r[i],l)))return-1}return a+i+n-1},n.prototype.looksObjectish=function(t){var n,a;return-1<this.indexOfTag(t,"@",null,":")||-1<this.indexOfTag(t,null,":")||(a=this.indexOfTag(t,d),-1<a&&(n=null,this.detectEnd(a+1,function(t){var n;return n=t[0],0<=e.call(l,n)},function(e,t){return n=t}),":"===this.tag(n+1)))},n.prototype.findTagsBackwards=function(t,n){var a,i,o,r,s,p,c;for(a=[];0<=t&&(a.length||(r=this.tag(t),0>e.call(n,r))&&((s=this.tag(t),0>e.call(d,s))||this.tokens[t].generated)&&(p=this.tag(t),0>e.call(f,p)));)(i=this.tag(t),0<=e.call(l,i))&&a.push(this.tag(t)),(o=this.tag(t),0<=e.call(d,o))&&a.length&&a.pop(),t-=1;return c=this.tag(t),0<=e.call(n,c)},n.prototype.addImplicitBracesAndParens=function(){var t,n;return t=[],n=null,this.scanTokens(function(a,r,i){var g,_,h,b,x,v,S,T,E,N,A,k,C,w,O,D,P,R,I,M,F,B,z,s,j,U,$,W,H,q,Y,V,G;if(G=a[0],O=(D=0<r?i[r-1]:[])[0],C=(r<i.length-1?i[r+1]:[])[0],W=function(){return t[t.length-1]},H=r,h=function(e){return r-H+e},T=function(e){var t;return null==e||null==(t=e[2])?void 0:t.ours},N=function(e){return T(e)&&"{"===(null==e?void 0:e[0])},E=function(e){return T(e)&&"("===(null==e?void 0:e[0])},b=function(){return T(W())},x=function(){return E(W())},S=function(){return N(W())},v=function(){var e;return b&&"CONTROL"===(null==(e=W())?void 0:e[0])},q=function(e){var n;if(n=null==e?r:e,t.push(["(",n,{ours:!0}]),i.splice(n,0,y("CALL_START","(",["","implicit function call",a[2]])),null==e)return r+=1},g=function(){return t.pop(),i.splice(r,0,y("CALL_END",")",["","end of input",a[2]])),r+=1},Y=function(e,n){var o,s;if(null==n&&(n=!0),o=null==e?r:e,t.push(["{",o,{sameLine:!0,startsLine:n,ours:!0}]),s=new String("{"),s.generated=!0,i.splice(o,0,y("{",s,a)),null==e)return r+=1},_=function(e){return e=null==e?r:e,t.pop(),i.splice(e,0,y("}","}",a)),r+=1},x()&&("IF"===G||"TRY"===G||"FINALLY"===G||"CATCH"===G||"CLASS"===G||"SWITCH"===G))return t.push(["CONTROL",r,{ours:!0}]),h(1);if("INDENT"===G&&b()){if("=>"!==O&&"->"!==O&&"["!==O&&"("!==O&&","!==O&&"{"!==O&&"TRY"!==O&&"ELSE"!==O&&"="!==O)for(;x();)g();return v()&&t.pop(),t.push([G,r]),h(1)}if(0<=e.call(d,G))return t.push([G,r]),h(1);if(0<=e.call(l,G)){for(;b();)x()?g():S()?_():t.pop();n=t.pop()}if((0<=e.call(u,G)&&a.spaced||"?"===G&&0<r&&!i[r-1].spaced)&&(0<=e.call(p,C)||0<=e.call(m,C)&&(null==(P=i[r+1])||!P.spaced)&&(null==(R=i[r+1])||!R.newLine)))return"?"===G&&(G=a[0]="FUNC_EXIST"),q(r+1),h(2);if(0<=e.call(u,G)&&-1<this.indexOfTag(r+1,"INDENT")&&this.looksObjectish(r+2)&&!this.findTagsBackwards(r,["CLASS","EXTENDS","IF","CATCH","SWITCH","LEADING_WHEN","FOR","WHILE","UNTIL"]))return q(r+1),t.push(["INDENT",r+2]),h(3);if(":"===G){for(z=function(){var t;switch(!1){case(t=this.tag(r-1),0>e.call(l,t)):return n[1];case"@"!==this.tag(r-2):return r-2;default:return r-1;}}.call(this);"HERECOMMENT"===this.tag(z-2);)z-=2;return(this.insideForDeclaration="FOR"===C,V=0===z||(I=this.tag(z-1),0<=e.call(f,I))||i[z-1].newLine,W()&&(M=W(),$=M[0],j=M[1],("{"===$||"INDENT"===$&&"{"===this.tag(j-1))&&(V||","===this.tag(z-1)||"{"===this.tag(z-1))))?h(1):(Y(z,!!V),h(2))}if(0<=e.call(f,G))for(A=t.length-1;0<=A&&(U=t[A],!!T(U));A+=-1)N(U)&&(U[2].sameLine=!1);if(k="OUTDENT"===O||D.newLine,0<=e.call(c,G)||0<=e.call(o,G)&&k)for(;b();)if(F=W(),$=F[0],j=F[1],B=F[2],s=B.sameLine,V=B.startsLine,x()&&","!==O)g();else if(S()&&!this.insideForDeclaration&&s&&"TERMINATOR"!==G&&":"!==O)_();else if(S()&&"TERMINATOR"===G&&","!==O&&!(V&&this.looksObjectish(r+1))){if("HERECOMMENT"===C)return h(1);_()}else break;if(","===G&&!this.looksObjectish(r+1)&&S()&&!this.insideForDeclaration&&("TERMINATOR"!==C||!this.looksObjectish(r+2)))for(w="OUTDENT"===C?1:0;S();)_(r+w);return h(1)})},n.prototype.addLocationDataToGeneratedTokens=function(){return this.scanTokens(function(e,t,n){var a,i,o,r,s,l;return e[2]?1:e.generated||e.explicit?("{"===e[0]&&(o=null==(s=n[t+1])?void 0:s[2])?(i=o.first_line,a=o.first_column):(r=null==(l=n[t-1])?void 0:l[2])?(i=r.last_line,a=r.last_column):i=a=0,e[2]={first_line:i,first_column:a,last_line:i,last_column:a},1):1})},n.prototype.fixOutdentLocationData=function(){return this.scanTokens(function(e,t,n){var a;return"OUTDENT"===e[0]||e.generated&&"CALL_END"===e[0]||e.generated&&"}"===e[0]?(a=n[t-1][2],e[2]={first_line:a.last_line,first_column:a.last_column,last_line:a.last_line,last_column:a.last_column},1):1})},n.prototype.normalizeLines=function(){var n,a,s,l,d;return d=s=l=null,a=function(t,n){var a,i,s,l;return";"!==t[1]&&(a=t[0],0<=e.call(g,a))&&!("TERMINATOR"===t[0]&&(i=this.tag(n+1),0<=e.call(r,i)))&&("ELSE"!==t[0]||"THEN"===d)&&("CATCH"!==(s=t[0])&&"FINALLY"!==s||"->"!==d&&"=>"!==d)||(l=t[0],0<=e.call(o,l))&&(this.tokens[n-1].newLine||"OUTDENT"===this.tokens[n-1][0])},n=function(e,t){return this.tokens.splice(","===this.tag(t-1)?t-1:t,0,l)},this.scanTokens(function(o,p,i){var c,u,m,f,g,y;if(y=o[0],"TERMINATOR"===y){if("ELSE"===this.tag(p+1)&&"OUTDENT"!==this.tag(p-1))return i.splice.apply(i,[p,1].concat(t.call(this.indentation()))),1;if(m=this.tag(p+1),0<=e.call(r,m))return i.splice(p,1),0}if("CATCH"===y)for(c=u=1;2>=u;c=++u)if("OUTDENT"===(f=this.tag(p+c))||"TERMINATOR"===f||"FINALLY"===f)return i.splice.apply(i,[p+c,0].concat(t.call(this.indentation()))),2+c;return 0<=e.call(_,y)&&"INDENT"!==this.tag(p+1)&&("ELSE"!==y||"IF"!==this.tag(p+1))?(d=y,g=this.indentation(i[p]),s=g[0],l=g[1],"THEN"===d&&(s.fromThen=!0),i.splice(p+1,0,s),this.detectEnd(p+2,a,n),"THEN"===y&&i.splice(p,1),1):1})},n.prototype.tagPostfixConditionals=function(){var t,n,a;return a=null,n=function(t,n){var a,i;return i=t[0],a=this.tokens[n-1][0],"TERMINATOR"===i||"INDENT"===i&&0>e.call(_,a)},t=function(e){if("INDENT"!==e[0]||e.generated&&!e.fromThen)return a[0]="POST_"+a[0]},this.scanTokens(function(e,o){return"IF"===e[0]?(a=e,this.detectEnd(o+1,n,t),1):1})},n.prototype.indentation=function(e){var t,n;return t=["INDENT",2],n=["OUTDENT",2],e?(t.generated=n.generated=!0,t.origin=n.origin=e):t.explicit=n.explicit=!0,[t,n]},n.prototype.generate=y,n.prototype.tag=function(e){var t;return null==(t=this.tokens[e])?void 0:t[0]},n}(),a=[["(",")"],["[","]"],["{","}"],["INDENT","OUTDENT"],["CALL_START","CALL_END"],["PARAM_START","PARAM_END"],["INDEX_START","INDEX_END"],["STRING_START","STRING_END"],["REGEX_START","REGEX_END"]],n.INVERSES=i={},d=[],l=[],(h=0,x=a.length);h<x;h++)v=a[h],b=v[0],S=v[1],d.push(i[S]=b),l.push(i[b]=S);r=["CATCH","THEN","ELSE","FINALLY"].concat(l),u=["IDENTIFIER","PROPERTY","SUPER",")","CALL_END","]","INDEX_END","@","THIS"],p=["IDENTIFIER","PROPERTY","NUMBER","INFINITY","NAN","STRING","STRING_START","REGEX","REGEX_START","JS","NEW","PARAM_START","CLASS","IF","TRY","SWITCH","THIS","UNDEFINED","NULL","BOOL","UNARY","YIELD","UNARY_MATH","SUPER","THROW","@","->","=>","[","(","{","--","++"],m=["+","-"],c=["POST_IF","FOR","WHILE","UNTIL","WHEN","BY","LOOP","TERMINATOR"],_=["ELSE","->","=>","TRY","FINALLY","THEN"],g=["TERMINATOR","CATCH","FINALLY","ELSE","OUTDENT","LEADING_WHEN"],f=["TERMINATOR","INDENT","OUTDENT"],o=[".","?.","::","?::"]}).call(this)},{}],43:[function(e,t,n){(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},t;n.Scope=t=function(){function t(e,t,n,a){var i,o;this.parent=e,this.expressions=t,this.method=n,this.referencedVars=a,this.variables=[{name:"arguments",type:"arguments"}],this.positions={},this.parent||(this.utilities={}),this.root=null==(i=null==(o=this.parent)?void 0:o.root)?this:i}return t.prototype.add=function(e,t,n){return this.shared&&!n?this.parent.add(e,t,n):Object.prototype.hasOwnProperty.call(this.positions,e)?this.variables[this.positions[e]].type=t:this.positions[e]=this.variables.push({name:e,type:t})-1},t.prototype.namedMethod=function(){var e;return(null==(e=this.method)?void 0:e.name)||!this.parent?this.method:this.parent.namedMethod()},t.prototype.find=function(e,t){return(null==t&&(t="var"),!!this.check(e))||(this.add(e,t),!1)},t.prototype.parameter=function(e){return this.shared&&this.parent.check(e,!0)?void 0:this.add(e,"param")},t.prototype.check=function(e){var t;return!!(this.type(e)||(null==(t=this.parent)?void 0:t.check(e)))},t.prototype.temporary=function(e,t,n){var a,i,o,r,s,l;return null==n&&(n=!1),n?(l=e.charCodeAt(0),i=122,a=i-l,r=l+t%(a+1),o=d(r),s=E(t/(a+1)),""+o+(s||"")):""+e+(t||"")},t.prototype.type=function(e){var t,n,a,i;for(a=this.variables,t=0,n=a.length;t<n;t++)if(i=a[t],i.name===e)return i.type;return null},t.prototype.freeVariable=function(t,n){var a,i,o;for(null==n&&(n={}),a=0;o=this.temporary(t,a,n.single),!!(this.check(o)||0<=e.call(this.root.referencedVars,o));)a++;return(null==(i=n.reserve)||i)&&this.add(o,"var",!0),o},t.prototype.assign=function(e,t){return this.add(e,{value:t,assigned:!0},!0),this.hasAssignments=!0},t.prototype.hasDeclarations=function(){return!!this.declaredVariables().length},t.prototype.declaredVariables=function(){var e;return function(){var t,n,a,i;for(a=this.variables,i=[],(t=0,n=a.length);t<n;t++)e=a[t],"var"===e.type&&i.push(e.name);return i}.call(this).sort()},t.prototype.assignedVariables=function(){var e,t,n,a,i;for(n=this.variables,a=[],(e=0,t=n.length);e<t;e++)i=n[e],i.type.assigned&&a.push(i.name+" = "+i.type.value);return a},t}()}).call(this)},{}],44:[function(e,t){(function(){var e,n;e=function(){function e(e){this.line=e,this.columns=[]}return e.prototype.add=function(e,t,n){var a,i;return i=t[0],a=t[1],null==n&&(n={}),this.columns[e]&&n.noReplace?void 0:this.columns[e]={line:this.line,column:e,sourceLine:i,sourceColumn:a}},e.prototype.sourceLocation=function(e){for(var t;!((t=this.columns[e])||0>=e);)e--;return t&&[t.sourceLine,t.sourceColumn]},e}(),n=function(){function t(){this.lines=[]}var n,a,i,o;return t.prototype.add=function(t,n,a){var i,o,r,s;return null==a&&(a={}),r=n[0],o=n[1],s=(i=this.lines)[r]||(i[r]=new e(r)),s.add(o,t,a)},t.prototype.sourceLocation=function(e){var t,n,a;for(n=e[0],t=e[1];!((a=this.lines[n])||0>=n);)n--;return a&&a.sourceLocation(t)},t.prototype.generate=function(e,t){var n,a,i,o,r,s,l,d,p,c,u,m,f,g,_,y;for(null==e&&(e={}),null==t&&(t=null),y=0,o=0,s=0,r=0,m=!1,n="",f=this.lines,(c=a=0,l=f.length);a<l;c=++a)if(p=f[c],p)for(g=p.columns,i=0,d=g.length;i<d;i++)if(u=g[i],!!u){for(;y<u.line;)o=0,m=!1,n+=";",y++;m&&(n+=",",m=!1),n+=this.encodeVlq(u.column-o),o=u.column,n+=this.encodeVlq(0),n+=this.encodeVlq(u.sourceLine-s),s=u.sourceLine,n+=this.encodeVlq(u.sourceColumn-r),r=u.sourceColumn,m=!0}return _={version:3,file:e.generatedFile||"",sourceRoot:e.sourceRoot||"",sources:e.sourceFiles||[""],names:[],mappings:n},e.inlineMap&&(_.sourcesContent=[t]),_},i=5,a=1<<i,o=a-1,t.prototype.encodeVlq=function(e){var t,n,r,s;for(t="",r=0>e?1:0,s=(T(e)<<1)+r;s||!t;)n=s&o,s>>=i,s&&(n|=a),t+=this.encodeBase64(n);return t},n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.prototype.encodeBase64=function(e){return n[e]||function(){throw new Error("Cannot Base64 encode value: "+e)}()},t}(),t.exports=n}).call(this)},{}],45:[function(e,t){t.exports={_from:"coffee-script@^1.10.0",_id:"coffee-script@1.12.7",_inBundle:!1,_integrity:"sha512-fLeEhqwymYat/MpTPUjSKHVYYl0ec2mOyALEMLmzr5i1isuG+6jfI2j2d5oBO3VIzgUXgBVIcOT9uH1TFxBckw==",_location:"/coffee-script",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"coffee-script@^1.10.0",name:"coffee-script",escapedName:"coffee-script",rawSpec:"^1.10.0",saveSpec:null,fetchSpec:"^1.10.0"},_requiredBy:["/cson-parser"],_resolved:"https://registry.npmjs.org/coffee-script/-/coffee-script-1.12.7.tgz",_shasum:"c05dae0cb79591d05b3070a8433a98c9a89ccc53",_spec:"coffee-script@^1.10.0",_where:"/home/abudaan/workspace/vega-multi-view/node_modules/cson-parser",author:{name:"Jeremy Ashkenas"},bin:{coffee:"./bin/coffee",cake:"./bin/cake"},bugs:{url:"https://github.com/jashkenas/coffeescript/issues"},bundleDependencies:!1,deprecated:!1,description:"Unfancy JavaScript",devDependencies:{docco:"~0.7.0","google-closure-compiler-js":"^20170626.0.0","highlight.js":"~9.12.0",jison:">=0.4.17","markdown-it":"^8.3.1",underscore:"~1.8.3"},directories:{lib:"./lib/coffee-script"},engines:{node:">=0.8.0"},files:["bin","lib","register.js","repl.js"],homepage:"http://coffeescript.org",keywords:["javascript","language","coffeescript","compiler"],license:"MIT",main:"./lib/coffee-script/coffee-script",name:"coffee-script",repository:{type:"git",url:"git://github.com/jashkenas/coffeescript.git"},scripts:{test:"node ./bin/cake test","test-harmony":"node --harmony ./bin/cake test"},version:"1.12.7"}},{}],46:[function(e,t){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":60,"../../modules/es6.array.from":121,"../../modules/es6.string.iterator":126}],47:[function(e,t){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":119,"../modules/es6.string.iterator":126,"../modules/web.dom.iterable":130}],48:[function(e,t){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":120,"../modules/es6.string.iterator":126,"../modules/web.dom.iterable":130}],49:[function(e,t){var n=e("../../modules/_core"),a=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(){return a.stringify.apply(a,arguments)}},{"../../modules/_core":60}],50:[function(e,t){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":60,"../../modules/es6.object.assign":123}],51:[function(e,t){e("../../modules/es7.object.entries"),t.exports=e("../../modules/_core").Object.entries},{"../../modules/_core":60,"../../modules/es7.object.entries":127}],52:[function(e,t){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),t.exports=e("../modules/_core").Promise},{"../modules/_core":60,"../modules/es6.object.to-string":124,"../modules/es6.promise":125,"../modules/es6.string.iterator":126,"../modules/es7.promise.finally":128,"../modules/es7.promise.try":129,"../modules/web.dom.iterable":130}],53:[function(e,t){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],54:[function(e,t){t.exports=function(){}},{}],55:[function(e,t){t.exports=function(e,t,n,a){if(!(e instanceof t)||a!==void 0&&a in e)throw TypeError(n+": incorrect invocation!");return e}},{}],56:[function(e,t){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":78}],57:[function(e,t){var n=e("./_to-iobject"),a=e("./_to-length"),i=e("./_to-absolute-index");t.exports=function(e){return function(t,o,r){var s=n(t),l=a(s.length),d=i(r,l),p;if(e&&o!=o){for(;l>d;)if(p=s[d++],p!=p)return!0;}else for(;l>d;d++)if((e||d in s)&&s[d]===o)return e||d||0;return!e&&-1}}},{"./_to-absolute-index":110,"./_to-iobject":112,"./_to-length":113}],58:[function(e,t){var n=e("./_cof"),a=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(t){}};t.exports=function(e){var t,r,s;return e===void 0?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),a))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":59,"./_wks":117}],59:[function(e,t){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],60:[function(e,t){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},{}],61:[function(e,t){"use strict";var n=e("./_object-dp"),a=e("./_property-desc");t.exports=function(e,t,i){t in e?n.f(e,t,a(0,i)):e[t]=i}},{"./_object-dp":90,"./_property-desc":100}],62:[function(e,t){var n=e("./_a-function");t.exports=function(e,t,a){return(n(e),void 0===t)?e:1===a?function(n){return e.call(t,n)}:2===a?function(n,a){return e.call(t,n,a)}:3===a?function(n,a,i){return e.call(t,n,a,i)}:function(){return e.apply(t,arguments)}}},{"./_a-function":53}],63:[function(e,t){t.exports=function(e){if(e==void 0)throw TypeError("Can't call method on  "+e);return e}},{}],64:[function(e,t){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":68}],65:[function(e,t){var n=e("./_is-object"),a=e("./_global").document,i=n(a)&&n(a.createElement);t.exports=function(e){return i?a.createElement(e):{}}},{"./_global":70,"./_is-object":78}],66:[function(e,t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],67:[function(e,t){var n=e("./_global"),a=e("./_core"),i=e("./_ctx"),o=e("./_hide"),r="prototype",s=function(e,t,l){var d=e&s.F,p=e&s.G,c=e&s.S,u=e&s.P,m=e&s.B,f=e&s.W,g=p?a:a[t]||(a[t]={}),_=g[r],y=p?n:c?n[t]:(n[t]||{})[r],h,b,x;for(h in p&&(l=t),l)b=!d&&y&&void 0!==y[h],b&&h in g||(x=b?y[h]:l[h],g[h]=p&&"function"!=typeof y[h]?l[h]:m&&b?i(x,n):f&&y[h]==x?function(e){var t=function(t,n,a){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n);}return new e(t,n,a)}return e.apply(this,arguments)};return t[r]=e[r],t}(x):u&&"function"==typeof x?i(Function.call,x):x,u&&((g.virtual||(g.virtual={}))[h]=x,e&s.R&&_&&!_[h]&&o(_,h,x)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},{"./_core":60,"./_ctx":62,"./_global":70,"./_hide":72}],68:[function(e,t){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],69:[function(e,t,n){var a=e("./_ctx"),i=e("./_iter-call"),o=e("./_is-array-iter"),r=e("./_an-object"),s=e("./_to-length"),l=e("./core.get-iterator-method"),d={},p={},n=t.exports=function(e,t,n,c,u){var m=u?function(){return e}:l(e),g=a(n,c,t?2:1),f=0,_,y,h,b;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(_=s(e.length);_>f;f++)if(b=t?g(r(y=e[f])[0],y[1]):g(e[f]),b===d||b===p)return b;}else for(h=m.call(e);!(y=h.next()).done;)if(b=i(h,g,y.value,t),b===d||b===p)return b};n.BREAK=d,n.RETURN=p},{"./_an-object":56,"./_ctx":62,"./_is-array-iter":77,"./_iter-call":79,"./_to-length":113,"./core.get-iterator-method":118}],70:[function(e,t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],71:[function(e,t){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],72:[function(e,t){var n=e("./_object-dp"),a=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,i){return n.f(e,t,a(1,i))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":64,"./_object-dp":90,"./_property-desc":100}],73:[function(e,t){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":70}],74:[function(e,t){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":64,"./_dom-create":65,"./_fails":68}],75:[function(e,t){t.exports=function(e,t,n){var a=n===void 0;switch(t.length){case 0:return a?e():e.call(n);case 1:return a?e(t[0]):e.call(n,t[0]);case 2:return a?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);}return e.apply(n,t)}},{}],76:[function(e,t){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":59}],77:[function(e,t){var n=e("./_iterators"),a=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return e!==void 0&&(n.Array===e||i[a]===e)}},{"./_iterators":84,"./_wks":117}],78:[function(e,t){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],79:[function(e,t){var n=e("./_an-object");t.exports=function(t,e,a,i){try{return i?e(n(a)[0],a[1]):e(a)}catch(a){var o=t["return"];throw void 0!==o&&n(o.call(t)),a}}},{"./_an-object":56}],80:[function(e,t){"use strict";var n=e("./_object-create"),a=e("./_property-desc"),i=e("./_set-to-string-tag"),o={};e("./_hide")(o,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(o,{next:a(1,r)}),i(e,t+" Iterator")}},{"./_hide":72,"./_object-create":89,"./_property-desc":100,"./_set-to-string-tag":104,"./_wks":117}],81:[function(e,t){"use strict";var n=e("./_library"),a=e("./_export"),i=e("./_redefine"),o=e("./_hide"),r=e("./_has"),s=e("./_iterators"),l=e("./_iter-create"),d=e("./_set-to-string-tag"),p=e("./_object-gpo"),c=e("./_wks")("iterator"),u=!([].keys&&"next"in[].keys()),m="keys",f="values",g=function(){return this};t.exports=function(e,t,_,y,h,b,x){l(_,t,y);var v=function(e){return!u&&e in E?E[e]:e===m?function(){return new _(this,e)}:e===f?function(){return new _(this,e)}:function(){return new _(this,e)}},S=t+" Iterator",T=h==f,k=!1,E=e.prototype,N=E[c]||E["@@iterator"]||h&&E[h],A=N||v(h),C=h?T?v("entries"):A:void 0,w="Array"==t?E.entries||N:N,O,D,P;if(w&&(P=p(w.call(new e)),P!==Object.prototype&&P.next&&(d(P,S,!0),!n&&!r(P,c)&&o(P,c,g))),T&&N&&N.name!==f&&(k=!0,A=function(){return N.call(this)}),(!n||x)&&(u||k||!E[c])&&o(E,c,A),s[t]=A,s[S]=g,h)if(O={values:T?A:v(f),keys:b?A:v(m),entries:C},x)for(D in O)D in E||i(E,D,O[D]);else a(a.P+a.F*(u||k),t,O);return O}},{"./_export":67,"./_has":71,"./_hide":72,"./_iter-create":80,"./_iterators":84,"./_library":85,"./_object-gpo":93,"./_redefine":102,"./_set-to-string-tag":104,"./_wks":117}],82:[function(e,t){var n=e("./_wks")("iterator"),a=!1;try{var i=[7][n]();i["return"]=function(){a=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(e,t){if(!t&&!a)return!1;var i=!1;try{var o=[7],r=o[n]();r.next=function(){return{done:i=!0}},o[n]=function(){return r},e(o)}catch(t){}return i}},{"./_wks":117}],83:[function(e,t){t.exports=function(e,t){return{value:t,done:!!e}}},{}],84:[function(e,t){t.exports={}},{}],85:[function(e,t){t.exports=!0},{}],86:[function(e,t){var n=e("./_global"),a=e("./_task").set,i=n.MutationObserver||n.WebKitMutationObserver,o=n.process,r=n.Promise,s="process"==e("./_cof")(o);t.exports=function(){var e=function(){var e,n;for(s&&(e=o.domain)&&e.exit();t;){n=t.fn,t=t.next;try{n()}catch(n){throw t?d():l=void 0,n}}l=void 0,e&&e.enter()},t,l,d;if(s)d=function(){o.nextTick(e)};else if(i){var p=!0,c=document.createTextNode("");new i(e).observe(c,{characterData:!0}),d=function(){c.data=p=!p}}else if(r&&r.resolve){var u=r.resolve();d=function(){u.then(e)}}else d=function(){a.call(n,e)};return function(e){var n={fn:e,next:void 0};l&&(l.next=n),t||(t=n,d()),l=n}}},{"./_cof":59,"./_global":70,"./_task":109}],87:[function(e,t){"use strict";function n(e){var t,n;this.promise=new e(function(e,a){if(t!=void 0||n!=void 0)throw TypeError("Bad Promise constructor");t=e,n=a}),this.resolve=a(t),this.reject=a(n)}var a=e("./_a-function");t.exports.f=function(e){return new n(e)}},{"./_a-function":53}],88:[function(e,t){"use strict";var n=e("./_object-keys"),a=e("./_object-gops"),i=e("./_object-pie"),o=e("./_to-object"),r=e("./_iobject"),s=Object.assign;t.exports=!s||e("./_fails")(function(){var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach(function(e){t[e]=e}),7!=s({},e)[n]||Object.keys(s({},t)).join("")!=a})?function(e){for(var t=o(e),s=arguments.length,l=1,d=a.f,p=i.f;s>l;)for(var c=r(arguments[l++]),u=d?n(c).concat(d(c)):n(c),m=u.length,f=0,g;m>f;)p.call(c,g=u[f++])&&(t[g]=c[g]);return t}:s},{"./_fails":68,"./_iobject":76,"./_object-gops":92,"./_object-keys":95,"./_object-pie":96,"./_to-object":114}],89:[function(e,t){var n=e("./_an-object"),a=e("./_object-dps"),o=e("./_enum-bug-keys"),i=e("./_shared-key")("IE_PROTO"),r=function(){},s="prototype",l=function(){var t=e("./_dom-create")("iframe"),n=o.length,a="<",i=">",r;for(t.style.display="none",e("./_html").appendChild(t),t.src="javascript:",r=t.contentWindow.document,r.open(),r.write(a+"script"+i+"document.F=Object"+a+"/script"+i),r.close(),l=r.F;n--;)delete l[s][o[n]];return l()};t.exports=Object.create||function(e,t){var o;return null===e?o=l():(r[s]=n(e),o=new r,r[s]=null,o[i]=e),void 0===t?o:a(o,t)}},{"./_an-object":56,"./_dom-create":65,"./_enum-bug-keys":66,"./_html":73,"./_object-dps":91,"./_shared-key":105}],90:[function(e,t,n){var a=e("./_an-object"),i=e("./_ie8-dom-define"),o=e("./_to-primitive"),r=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(a(e),t=o(t,!0),a(n),i)try{return r(e,t,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":56,"./_descriptors":64,"./_ie8-dom-define":74,"./_to-primitive":115}],91:[function(e,t){var n=e("./_object-dp"),a=e("./_an-object"),o=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){a(e);for(var r=o(t),s=r.length,l=0,i;s>l;)n.f(e,i=r[l++],t[i]);return e}},{"./_an-object":56,"./_descriptors":64,"./_object-dp":90,"./_object-keys":95}],92:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],93:[function(e,t){var n=e("./_has"),a=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=a(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},{"./_has":71,"./_shared-key":105,"./_to-object":114}],94:[function(e,t){var n=e("./_has"),a=e("./_to-iobject"),o=e("./_array-includes")(!1),i=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r=a(e),s=0,l=[],d;for(d in r)d!=i&&n(r,d)&&l.push(d);for(;t.length>s;)n(r,d=t[s++])&&(~o(l,d)||l.push(d));return l}},{"./_array-includes":57,"./_has":71,"./_shared-key":105,"./_to-iobject":112}],95:[function(e,t){var n=e("./_object-keys-internal"),a=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,a)}},{"./_enum-bug-keys":66,"./_object-keys-internal":94}],96:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],97:[function(e,t){var n=e("./_object-keys"),a=e("./_to-iobject"),o=e("./_object-pie").f;t.exports=function(e){return function(t){for(var r=a(t),s=n(r),l=s.length,d=0,i=[],p;l>d;)o.call(r,p=s[d++])&&i.push(e?[p,r[p]]:r[p]);return i}}},{"./_object-keys":95,"./_object-pie":96,"./_to-iobject":112}],98:[function(e,t){t.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},{}],99:[function(e,t){var n=e("./_an-object"),a=e("./_is-object"),i=e("./_new-promise-capability");t.exports=function(e,t){if(n(e),a(t)&&t.constructor===e)return t;var o=i.f(e),r=o.resolve;return r(t),o.promise}},{"./_an-object":56,"./_is-object":78,"./_new-promise-capability":87}],100:[function(e,t){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],101:[function(e,t){var n=e("./_hide");t.exports=function(e,t,a){for(var i in t)a&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},{"./_hide":72}],102:[function(e,t){t.exports=e("./_hide")},{"./_hide":72}],103:[function(e,t){"use strict";var n=e("./_global"),a=e("./_core"),i=e("./_object-dp"),o=e("./_descriptors"),r=e("./_wks")("species");t.exports=function(e){var t="function"==typeof a[e]?a[e]:n[e];o&&t&&!t[r]&&i.f(t,r,{configurable:!0,get:function(){return this}})}},{"./_core":60,"./_descriptors":64,"./_global":70,"./_object-dp":90,"./_wks":117}],104:[function(e,t){var n=e("./_object-dp").f,a=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,o){e&&!a(e=o?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./_has":71,"./_object-dp":90,"./_wks":117}],105:[function(e,t){var n=e("./_shared")("keys"),a=e("./_uid");t.exports=function(e){return n[e]||(n[e]=a(e))}},{"./_shared":106,"./_uid":116}],106:[function(e,t){var n=e("./_global"),a="__core-js_shared__",i=n[a]||(n[a]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":70}],107:[function(e,t){var n=e("./_an-object"),a=e("./_a-function"),i=e("./_wks")("species");t.exports=function(e,t){var o=n(e).constructor,r;return o===void 0||(r=n(o)[i])==void 0?t:a(r)}},{"./_a-function":53,"./_an-object":56,"./_wks":117}],108:[function(e,t){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,r){var d=o(t)+"",s=n(r),i=d.length,l,a;return 0>s||s>=i?e?"":void 0:(l=d.charCodeAt(s),55296>l||56319<l||s+1===i||56320>(a=d.charCodeAt(s+1))||57343<a?e?d.charAt(s):l:e?d.slice(s,s+2):(l-55296<<10)+(a-56320)+65536)}}},{"./_defined":63,"./_to-integer":111}],109:[function(e,t){var n=e("./_ctx"),a=e("./_invoke"),i=e("./_html"),o=e("./_dom-create"),r=e("./_global"),s=r.process,l=r.setImmediate,d=r.clearImmediate,p=r.MessageChannel,c=r.Dispatch,u=0,m={},f="onreadystatechange",g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},_=function(e){g.call(e.data)},y,h,b;l&&d||(l=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++u]=function(){a("function"==typeof e?e:Function(e),t)},y(u),u},d=function(e){delete m[e]},"process"==e("./_cof")(s)?y=function(e){s.nextTick(n(g,e,1))}:c&&c.now?y=function(e){c.now(n(g,e,1))}:p?(h=new p,b=h.port2,h.port1.onmessage=_,y=n(b.postMessage,b,1)):r.addEventListener&&"function"==typeof postMessage&&!r.importScripts?(y=function(e){r.postMessage(e+"","*")},r.addEventListener("message",_,!1)):f in o("script")?y=function(e){i.appendChild(o("script"))[f]=function(){i.removeChild(this),g.call(e)}}:y=function(e){setTimeout(n(g,e,1),0)}),t.exports={set:l,clear:d}},{"./_cof":59,"./_ctx":62,"./_dom-create":65,"./_global":70,"./_html":73,"./_invoke":75}],110:[function(e,t){var n=e("./_to-integer");t.exports=function(e,t){return e=n(e),0>e?N(e+t,0):S(e,t)}},{"./_to-integer":111}],111:[function(e,t){t.exports=function(e){return isNaN(e=+e)?0:(0<e?E:p)(e)}},{}],112:[function(e,t){var n=e("./_iobject"),a=e("./_defined");t.exports=function(e){return n(a(e))}},{"./_defined":63,"./_iobject":76}],113:[function(e,t){var n=e("./_to-integer");t.exports=function(e){return 0<e?S(n(e),9007199254740991):0}},{"./_to-integer":111}],114:[function(e,t){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":63}],115:[function(e,t){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var a,i;if(t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;if("function"==typeof(a=e.valueOf)&&!n(i=a.call(e)))return i;if(!t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":78}],116:[function(e,t){var n=0,a=Math.random();t.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++n+a).toString(36))}},{}],117:[function(e,t){var n=e("./_shared")("wks"),a=e("./_uid"),i=e("./_global").Symbol,o="function"==typeof i,r=t.exports=function(e){return n[e]||(n[e]=o&&i[e]||(o?i:a)("Symbol."+e))};r.store=n},{"./_global":70,"./_shared":106,"./_uid":116}],118:[function(e,t){var n=e("./_classof"),a=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(e!=void 0)return e[a]||e["@@iterator"]||i[n(e)]}},{"./_classof":58,"./_core":60,"./_iterators":84,"./_wks":117}],119:[function(e,t){var n=e("./_an-object"),a=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":56,"./_core":60,"./core.get-iterator-method":118}],120:[function(e,t){var n=e("./_classof"),a=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").isIterable=function(e){var t=Object(e);return t[a]!==void 0||"@@iterator"in t||i.hasOwnProperty(n(t))}},{"./_classof":58,"./_core":60,"./_iterators":84,"./_wks":117}],121:[function(e){"use strict";var t=e("./_ctx"),n=e("./_export"),a=e("./_to-object"),i=e("./_iter-call"),o=e("./_is-array-iter"),r=e("./_to-length"),s=e("./_create-property"),l=e("./core.get-iterator-method");n(n.S+n.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var n=a(e),d="function"==typeof this?this:Array,p=arguments.length,c=1<p?arguments[1]:void 0,u=void 0!==c,m=0,f=l(n),g,_,y,h;if(u&&(c=t(c,2<p?arguments[2]:void 0,2)),void 0!=f&&!(d==Array&&o(f)))for(h=f.call(n),_=new d;!(y=h.next()).done;m++)s(_,m,u?i(h,c,[y.value,m],!0):y.value);else for(g=r(n.length),_=new d(g);g>m;m++)s(_,m,u?c(n[m],m):n[m]);return _.length=m,_}})},{"./_create-property":61,"./_ctx":62,"./_export":67,"./_is-array-iter":77,"./_iter-call":79,"./_iter-detect":82,"./_to-length":113,"./_to-object":114,"./core.get-iterator-method":118}],122:[function(e,t){"use strict";var n=e("./_add-to-unscopables"),a=e("./_iter-step"),i=e("./_iterators"),o=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,a(1)):"keys"==t?a(0,n):"values"==t?a(0,e[n]):a(0,[n,e[n]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":54,"./_iter-define":81,"./_iter-step":83,"./_iterators":84,"./_to-iobject":112}],123:[function(e){var t=e("./_export");t(t.S+t.F,"Object",{assign:e("./_object-assign")})},{"./_export":67,"./_object-assign":88}],124:[function(e,t,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],125:[function(e){"use strict";var t=e("./_library"),n=e("./_global"),a=e("./_ctx"),i=e("./_classof"),o=e("./_export"),r=e("./_is-object"),s=e("./_a-function"),l=e("./_an-instance"),d=e("./_for-of"),p=e("./_species-constructor"),c=e("./_task").set,u=e("./_microtask")(),m=e("./_new-promise-capability"),f=e("./_perform"),g=e("./_promise-resolve"),_="Promise",y=n.TypeError,h=n.process,b=n[_],x="process"==i(h),v=function(){},S=P=m.f,T=!!function(){try{var t=b.resolve(1),n=(t.constructor={})[e("./_wks")("species")]=function(e){e(v,v)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(v)instanceof n}catch(t){}}(),k=function(e){var t;return r(e)&&"function"==typeof(t=e.then)&&t},E=function(e,t){if(!e._n){e._n=!0;var n=e._c;u(function(){for(var a=e._v,o=1==e._s,r=0,i=function(t){var n=o?t.ok:t.fail,i=t.resolve,r=t.reject,s=t.domain,l,d;try{n?(!o&&(2==e._h&&C(e),e._h=1),!0===n?l=a:(s&&s.enter(),l=n(a),s&&s.exit()),l===t.promise?r(y("Promise-chain cycle")):(d=k(l))?d.call(l,i,r):i(l)):r(a)}catch(t){r(t)}};n.length>r;)i(n[r++]);e._c=[],e._n=!1,t&&!e._h&&N(e)})}},N=function(e){c.call(n,function(){var t=e._v,a=A(e),i,o,r;if(a&&(i=f(function(){x?h.emit("unhandledRejection",t,e):(o=n.onunhandledrejection)?o({promise:e,reason:t}):(r=n.console)&&r.error&&r.error("Unhandled promise rejection",t)}),e._h=x||A(e)?2:1),e._a=void 0,a&&i.e)throw i.v})},A=function(e){if(1==e._h)return!1;for(var t=e._a||e._c,n=0,a;t.length>n;)if(a=t[n++],a.fail||!A(a.promise))return!1;return!0},C=function(e){c.call(n,function(){var t;x?h.emit("rejectionHandled",e):(t=n.onrejectionhandled)&&t({promise:e,reason:e._v})})},w=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),E(t,!0))},O=function(e){var t=this,n;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw y("Promise can't be resolved itself");(n=k(e))?u(function(){var i={_w:t,_d:!1};try{n.call(e,a(O,i,1),a(w,i,1))}catch(t){w.call(i,t)}}):(t._v=e,t._s=1,E(t,!1))}catch(n){w.call({_w:t,_d:!1},n)}}},D,P,R,I;T||(b=function(e){l(this,b,_,"_h"),s(e),D.call(this);try{e(a(O,this,1),a(w,this,1))}catch(e){w.call(this,e)}},D=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},D.prototype=e("./_redefine-all")(b.prototype,{then:function(e,t){var n=S(p(this,b));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=x?h.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&E(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),R=function(){var e=new D;this.promise=e,this.resolve=a(O,e,1),this.reject=a(w,e,1)},m.f=S=function(e){return e===b||e===I?new R(e):P(e)}),o(o.G+o.W+o.F*!T,{Promise:b}),e("./_set-to-string-tag")(b,_),e("./_set-species")(_),I=e("./_core")[_],o(o.S+o.F*!T,_,{reject:function(e){var t=S(this),n=t.reject;return n(e),t.promise}}),o(o.S+o.F*(t||!T),_,{resolve:function(e){return g(t&&this===I?b:this,e)}}),o(o.S+o.F*!(T&&e("./_iter-detect")(function(e){b.all(e)["catch"](v)})),_,{all:function(e){var t=this,n=S(t),a=n.resolve,i=n.reject,o=f(function(){var n=[],o=0,r=1;d(e,!1,function(e){var s=o++,l=!1;n.push(void 0),r++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--r||a(n))},i)}),--r||a(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=S(t),a=n.reject,i=f(function(){d(e,!1,function(e){t.resolve(e).then(n.resolve,a)})});return i.e&&a(i.v),n.promise}})},{"./_a-function":53,"./_an-instance":55,"./_classof":58,"./_core":60,"./_ctx":62,"./_export":67,"./_for-of":69,"./_global":70,"./_is-object":78,"./_iter-detect":82,"./_library":85,"./_microtask":86,"./_new-promise-capability":87,"./_perform":98,"./_promise-resolve":99,"./_redefine-all":101,"./_set-species":103,"./_set-to-string-tag":104,"./_species-constructor":107,"./_task":109,"./_wks":117}],126:[function(e){"use strict";var t=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=e+"",this._i=0},function(){var e=this._t,n=this._i,a;return n>=e.length?{value:void 0,done:!0}:(a=t(e,n),this._i+=a.length,{value:a,done:!1})})},{"./_iter-define":81,"./_string-at":108}],127:[function(e){var t=e("./_export"),n=e("./_object-to-array")(!0);t(t.S,"Object",{entries:function(e){return n(e)}})},{"./_export":67,"./_object-to-array":97}],128:[function(e){"use strict";var t=e("./_export"),n=e("./_core"),a=e("./_global"),i=e("./_species-constructor"),o=e("./_promise-resolve");t(t.P+t.R,"Promise",{finally:function(t){var r=i(this,n.Promise||a.Promise),e="function"==typeof t;return this.then(e?function(e){return o(r,t()).then(function(){return e})}:t,e?function(n){return o(r,t()).then(function(){throw n})}:t)}})},{"./_core":60,"./_export":67,"./_global":70,"./_promise-resolve":99,"./_species-constructor":107}],129:[function(e){"use strict";var t=e("./_export"),n=e("./_new-promise-capability"),a=e("./_perform");t(t.S,"Promise",{try:function(e){var t=n.f(this),i=a(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}})},{"./_export":67,"./_new-promise-capability":87,"./_perform":98}],130:[function(e){e("./es6.array.iterator");for(var t=e("./_global"),n=e("./_hide"),a=e("./_iterators"),o=e("./_wks")("toStringTag"),r="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<r.length;s++){var i=r[s],l=t[i],d=l&&l.prototype;d&&!d[o]&&n(d,o,i),a[i]=a.Array}},{"./_global":70,"./_hide":72,"./_iterators":84,"./_wks":117,"./es6.array.iterator":122}],131:[function(e,t){"use strict";var n=e("./stringify"),a=e("./parse");t.exports={stringify:n,parse:a}},{"./parse":132,"./stringify":133}],132:[function(e,t){"use strict";function n(e,t){return t}function a(e){return e.toString().match(/^function\s*([^( ]+)/)[1]}function i(e){var t=e.constructor.name;return null==t?a(e.constructor):t}function o(e,t){var n=e.locationData,a=n.first_line,i=n.first_column,o="",r="";return null!=a&&(o=a+1),null!=i&&(r=i+1),"Syntax error on line "+o+", column "+r+": "+t}function r(e){return d(e)}function s(e){return d(e)}function l(e){var t=i(e);if("Value"!==t)throw new SyntaxError(o(e,t+" used as key"));var n=e.base.value;switch(n.charAt(0)){case"'":case"\"":return r(n);default:return n;}}var d=e("vm").runInThisContext,p=e("coffee-script").nodes,c={Block:function(e,t){var n;if(n=e.expressions,!n||1!==n.length)throw new SyntaxError(o(e,"One top level value expected"));return t(n[0])},Value:function(e,t){return t(e.base)},Bool:function(e){return"true"===e.val},BooleanLiteral:function(e){return"true"===e.value},Null:function(){return null},NullLiteral:function(){return null},Literal:function(e){var t=e.value;try{switch(t.charAt(0)){case"'":case"\"":return r(t);case"/":return s(t);default:return JSON.parse(t);}}catch(t){throw new SyntaxError(o(e,t.message))}},NumberLiteral:function(e){return+e.value},StringLiteral:function(e){return r(e.value)},RegexLiteral:function(e){return s(e.value)},Arr:function(e,t){return e.objects.map(t)},Obj:function(e,t,n){return e.properties.reduce(function(e,a){var i=a.variable,o=a.value;if(!i)return e;var r=l(i);return o=t(o),e[r]=n.call(e,r,o),e},{})},Op:function(e,t){if(null!=e.second){var n=t(e.first),a=t(e.second);switch(e.operator){case"-":return n-a;case"+":return n+a;case"*":return n*a;case"/":return n/a;case"%":return n%a;case"&":return n&a;case"|":return n|a;case"^":return n^a;case"<<":return n<<a;case">>>":return n>>>a;case">>":return n>>a;default:throw new SyntaxError(o(e,"Unknown binary operator "+e.operator));}}else switch(e.operator){case"-":return-t(e.first);case"~":return~t(e.first);default:throw new SyntaxError(o(e,"Unknown unary operator "+e.operator));}},Parens:function(e,t){var n;if(n=e.body.expressions,!n||1!==n.length)throw new SyntaxError(o(e,"Parenthesis may only contain one expression"));return t(n[0])}};t.exports=function(e,t){function a(e){var n=i(e),r=c[n];if(!r)throw new SyntaxError(o(e,"Unexpected "+n));return r(e,a,t)}if(null==t&&(t=n),"function"!=typeof t)throw new TypeError("reviver has to be a function");var r=p(e.toString("utf8")),s=a(r);if(t===n)return s;return t.call({"":s},"",s)}},{"coffee-script":36,vm:590}],133:[function(e,t){"use strict";function n(e,t){return 0<=e.indexOf(t)}function a(e){return e&&"\n"+e+"\n"}function i(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function o(e){switch(typeof e){case"string":return e.slice(0,10);case"number":var t=N(0,S(10,E(e)));return y.slice(0,t);default:return 0;}}function r(e,t){return e+t}function s(e,t){return""===t?t:t.split("\n").map(r.bind(null,e)).join("\n")}function l(e){return"'"+JSON.stringify(e).slice(1,-1).replace(/\\"/g,"\"").replace(/'/g,"\\'")+"'"}function d(e){return n(e,"'")&&!n(e,"\"")?"double":"single"}function p(e){return("single"===d(e)?l:JSON.stringify)(e)}function c(e,t,n){return Object.keys(n).map(function(a){var o=n[a];a.match(g)||(a=p(a));var r=e(o,{bracesRequired:!t});return t&&(r=i(o)&&0<Object.keys(o).length?"\n"+s(t,r):" "+r),a+":"+r})}function u(e,t,n){var i=n.map(function(t){return e(t,{bracesRequired:!0})}),o=t?a(s(t,i.join("\n"))):i.join(",");return"["+o+"]"}function m(e,t,n,i){var o=i.bracesRequired,r=c(e,t,n);if(0===r.length)return"{}";if(t){var l=r.join("\n");return o?"{"+a(s(t,l))+"}":l}var d=r.join(",");return o?"{"+d+"}":d}function f(e,t,n){var i;return-1!==n.indexOf("\n")&&t?(i=n.replace(/\\/g,"\\\\").replace(_,"\\'''"),"'''"+a(s(t,i))+"'''"):p(n)}var g=/^[a-z_$][a-z0-9_$]*$/i,_=/'''/g,y="          ";t.exports=function(e,t,n){function a(e,t){switch(null==t&&(t={}),typeof e){case"boolean":return""+e;case"number":return isFinite(e)?""+e:"null";case"string":return f(a,n,e,t);case"object":return null===e?"null":Array.isArray(e)?u(a,n,e,t):m(a,n,e,t);default:}}if("function"!=typeof e&&"undefined"!=typeof e){n=o(n);var i=JSON.parse(JSON.stringify(e,t));return a(i)}}},{}],134:[function(e,t,n){(function(e,a){"object"==typeof n&&"undefined"!=typeof t?a(n):"function"==typeof m&&m.amd?m(["exports"],a):a(e.d3=e.d3||{})})(this,function(e){"use strict";function t(e){return new n(e)}function n(e){if(!(u=c.exec(e)))throw new Error("invalid format: "+e);var t=u[1]||" ",n=u[2]||">",a=u[3]||"-",i=u[4]||"",o=!!u[5],r=u[6]&&+u[6],s=!!u[7],l=u[8]&&+u[8].slice(1),d=u[9]||"",u;"n"===d?(s=!0,d="g"):!p[d]&&(d=""),(o||"0"===t&&"="===n)&&(o=!0,t="0",n="="),this.fill=t,this.align=n,this.sign=a,this.symbol=i,this.zero=o,this.width=r,this.comma=s,this.precision=l,this.type=d}function a(t){return y=f(t),e.format=y.format,e.formatPrefix=y.formatPrefix,y}var o=function(e,t){if(0>(a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e")))return null;var n=e.slice(0,a),a;return[1<n.length?n[0]+n.slice(2):n,+e.slice(a+1)]},i=function(e){return e=o(T(e)),e?e[1]:NaN},r=function(e,n){return function(a,o){for(var r=a.length,i=[],t=0,s=e[0],l=0;0<r&&0<s&&(l+s+1>o&&(s=N(1,o-l)),i.push(a.substring(r-=s,r+s)),!((l+=s+1)>o));)s=e[t=(t+1)%e.length];return i.reverse().join(n)}},s=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},d=function(e,t){var n=o(e,t);if(!n)return e+"";var a=n[0],i=n[1];return 0>i?"0."+Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+Array(i-a.length+2).join("0")},p={"":function(e,t){e=e.toPrecision(t);out:for(var a=e.length,n=1,i=-1,o;n<a;++n)switch(e[n]){case".":i=o=n;break;case"0":0===i&&(i=n),o=n;break;case"e":break out;default:0<i&&(i=0);}return 0<i?e.slice(0,i)+e.slice(o+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return l(e).toString(2)},c:function(e){return e+""},d:function(e){return l(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return l(e).toString(8)},p:function(e,t){return d(100*e,t)},r:d,s:function(e,t){var a=o(e,t);if(!a)return e+"";var r=a[0],s=a[1],l=s-(u=3*N(-8,S(8,E(s/3))))+1,i=r.length;return l===i?r:l>i?r+Array(l-i+1).join("0"):0<l?r.slice(0,l)+"."+r.slice(l):"0."+Array(1-l).join("0")+o(e,N(0,t+l-1))[0]},X:function(e){return l(e).toString(16).toUpperCase()},x:function(e){return l(e).toString(16)}},c=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,u;t.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":N(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+N(0,0|this.precision))+this.type};var m=function(e){return e},_=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],f=function(e){function n(e){function n(e){var t=x,o=v,p,m,n;if("c"===b)o=k(e)+o,e="";else{e=+e;var c=0>e;if(e=k(T(e),h),c&&0==+e&&(c=!1),t=(c?"("===s?s:"-":"-"===s||"("===s?"":s)+t,o=o+("s"===b?_[8+u/3]:"")+(c&&"("===s?")":""),E)for(p=-1,m=e.length;++p<m;)if(n=e.charCodeAt(p),48>n||57<n){o=(46===n?l+e.slice(p+1):e.slice(p))+o,e=e.slice(0,p);break}}y&&!f&&(e=a(e,Infinity));var S=t.length+e.length+o.length,N=S<g?Array(g-S+1).join(r):"";switch(y&&f&&(e=a(N+e,N.length?g-o.length:Infinity),N=""),i){case"<":e=t+e+o+N;break;case"=":e=t+N+e+o;break;case"^":e=N.slice(0,S=N.length>>1)+t+e+o+N.slice(S);break;default:e=N+t+e+o;}return d(e)}e=t(e);var r=e.fill,i=e.align,s=e.sign,m=e.symbol,f=e.zero,g=e.width,y=e.comma,h=e.precision,b=e.type,x="$"===m?o[0]:"#"===m&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",v="$"===m?o[1]:/[%p]/.test(b)?c:"",k=p[b],E=!b||/[defgprs%]/.test(b);return h=null==h?b?6:12:/[gprs]/.test(b)?N(1,S(21,h)):N(0,S(20,h)),n.toString=function(){return e+""},n}var a=e.grouping&&e.thousands?r(e.grouping,e.thousands):m,o=e.currency,l=e.decimal,d=e.numerals?s(e.numerals):m,c=e.percent||"%";return{format:n,formatPrefix:function(a,o){var r=n((a=t(a),a.type="f",a)),s=3*N(-8,S(8,E(i(o)/3))),l=g(10,-s),d=_[8+s/3];return function(e){return r(l*e)+d}}}},y;a({decimal:".",thousands:",",grouping:[3],currency:["$",""]});e.formatDefaultLocale=a,e.formatLocale=f,e.formatSpecifier=t,e.precisionFixed=function(e){return N(0,-i(T(e)))},e.precisionPrefix=function(e,t){return N(0,3*N(-8,S(8,E(i(t)/3)))-i(T(e)))},e.precisionRound=function(e,t){return e=T(e),t=T(t)-e,N(0,i(t)-i(e))+1},Object.defineProperty(e,"__esModule",{value:!0})})},{}],135:[function(e,t,n){(function(e,a){"object"==typeof n&&"undefined"!=typeof t?a(n):"function"==typeof m&&m.amd?m(["exports"],a):a(e.d3=e.d3||{})})(this,function(e){"use strict";function t(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ee&&t.documentElement.namespaceURI===ee?t.createElement(e):t.createElementNS(n,e)}}function n(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function a(){return new i}function i(){this._="@"+(++ie).toString(36)}function o(e,t,n){return e=r(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function r(t,n,a){return function(i){var o=e.event;e.event=i;try{t.call(this,this.__data__,n,a)}finally{e.event=o}}}function s(e){return e.trim().split(/^|\s+/).map(function(e){var n="",a=e.indexOf(".");return 0<=a&&(n=e.slice(a+1),e=e.slice(0,a)),{type:e,name:n}})}function l(e){return function(){var t=this.__on;if(t){for(var n=0,a=-1,i=t.length,r;n<i;++n)(r=t[n],(!e.type||r.type===e.type)&&r.name===e.name)?this.removeEventListener(r.type,r.listener,r.capture):t[++a]=r;++a?t.length=a:delete this.__on}}}function d(e,t,n){var a=de.hasOwnProperty(e.type)?o:r;return function(r,s,i){var l=this.__on,d=a(t,s,i),p;if(l)for(var o=0,c=l.length;o<c;++o)if((p=l[o]).type===e.type&&p.name===e.name)return this.removeEventListener(p.type,p.listener,p.capture),this.addEventListener(p.type,p.listener=d,p.capture=n),void(p.value=t);this.addEventListener(e.type,d,n),p={type:e.type,name:e.name,value:t,listener:d,capture:n},l?l.push(p):this.__on=[p]}}function p(){}function c(){return[]}function u(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function f(e,t,n,a,o,r){for(var s=0,i=t.length,l=r.length,d;s<l;++s)(d=t[s])?(d.__data__=r[s],a[s]=d):n[s]=new u(e,r[s]);for(;s<i;++s)(d=t[s])&&(o[s]=d)}function g(e,t,n,a,o,r,s){var l={},d=t.length,p=r.length,c=Array(d),m,i,f;for(m=0;m<d;++m)(i=t[m])&&(c[m]=f=ye+s.call(i,i.__data__,m,t),f in l?o[m]=i:l[f]=i);for(m=0;m<p;++m)f=ye+s.call(e,r[m],m,r),(i=l[f])?(a[m]=i,i.__data__=r[m],l[f]=null):n[m]=new u(e,r[m]);for(m=0;m<d;++m)(i=t[m])&&l[c[m]]===i&&(o[m]=i)}function _(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function m(e){return function(){this.removeAttribute(e)}}function y(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h(e,t){return function(){this.setAttribute(e,t)}}function b(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function x(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function v(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function T(e){return function(){this.style.removeProperty(e)}}function k(e,t,n){return function(){this.style.setProperty(e,t,n)}}function E(e,t,n){return function(){var a=t.apply(this,arguments);null==a?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function N(e,t){return e.style.getPropertyValue(t)||he(e).getComputedStyle(e,null).getPropertyValue(t)}function A(e){return function(){delete this[e]}}function C(e,t){return function(){this[e]=t}}function w(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function O(e){return e.trim().split(/^|\s+/)}function D(e){return e.classList||new P(e)}function P(e){this._node=e,this._names=O(e.getAttribute("class")||"")}function R(e,t){for(var a=D(e),o=-1,i=t.length;++o<i;)a.add(t[o])}function I(e,t){for(var a=D(e),o=-1,i=t.length;++o<i;)a.remove(t[o])}function M(e){return function(){R(this,e)}}function F(e){return function(){I(this,e)}}function B(e,t){return function(){(t.apply(this,arguments)?R:I)(this,e)}}function z(){this.textContent=""}function j(e){return function(){this.textContent=e}}function U(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function $(){this.innerHTML=""}function W(e){return function(){this.innerHTML=e}}function H(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function q(){this.nextSibling&&this.parentNode.appendChild(this)}function Y(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function V(){return null}function G(){var e=this.parentNode;e&&e.removeChild(this)}function Z(e,t,n){var a=he(e),i=a.CustomEvent;"function"==typeof i?i=new i(t,n):(i=a.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function X(e,t){return function(){return Z(this,e,t)}}function K(e,t){return function(){return Z(this,e,t.apply(this,arguments))}}function J(e,t){this._groups=e,this._parents=t}function Q(){return new J([[document.documentElement]],be)}var ee="http://www.w3.org/1999/xhtml",te={svg:"http://www.w3.org/2000/svg",xhtml:ee,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ne=function(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),te.hasOwnProperty(t)?{space:te[t],local:e}:e},ae=function(e){var a=ne(e);return(a.local?n:t)(a)},ie=0;i.prototype=a.prototype={constructor:i,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var oe=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var re=document.documentElement;if(!re.matches){var se=re.webkitMatchesSelector||re.msMatchesSelector||re.mozMatchesSelector||re.oMatchesSelector;oe=function(e){return function(){return se.call(this,e)}}}}var le=oe,de={};if(e.event=null,"undefined"!=typeof document){var pe=document.documentElement;"onmouseenter"in pe||(de={mouseenter:"mouseover",mouseleave:"mouseout"})}var ce=function(){for(var t=e.event,n;n=t.sourceEvent;)t=n;return t},ue=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a=a.matrixTransform(e.getScreenCTM().inverse()),[a.x,a.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]},me=function(e){return null==e?p:function(){return this.querySelector(e)}},fe=function(e){return null==e?c:function(){return this.querySelectorAll(e)}},ge=function(e){return Array(e.length)};u.prototype={constructor:u,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var _e=function(e){return function(){return e}},ye="$",he=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};P.prototype={add:function(e){var t=this._names.indexOf(e);0>t&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var be=[null];J.prototype=Q.prototype={constructor:J,select:function(e){"function"!=typeof e&&(e=me(e));for(var t=this._groups,a=t.length,o=Array(a),r=0;r<a;++r)for(var s=t[r],l=s.length,n=o[r]=Array(l),d=0,i,p;d<l;++d)(i=s[d])&&(p=e.call(i,i.__data__,d,s))&&("__data__"in i&&(p.__data__=i.__data__),n[d]=p);return new J(o,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=fe(e));for(var t=this._groups,a=t.length,o=[],r=[],s=0;s<a;++s)for(var l=t[s],d=l.length,n=0,i;n<d;++n)(i=l[n])&&(o.push(e.call(i,i.__data__,n,l)),r.push(i));return new J(o,r)},filter:function(e){"function"!=typeof e&&(e=le(e));for(var t=this._groups,a=t.length,o=Array(a),r=0;r<a;++r)for(var s=t[r],l=s.length,n=o[r]=[],d=0,i;d<l;++d)(i=s[d])&&e.call(i,i.__data__,d,s)&&n.push(i);return new J(o,this._parents)},data:function(e,t){if(!e)return m=Array(this.size()),p=-1,this.each(function(e){m[++p]=e}),m;var n=t?g:f,a=this._parents,i=this._groups;"function"!=typeof e&&(e=_e(e));for(var o=i.length,r=Array(o),s=Array(o),l=Array(o),p=0;p<o;++p){var d=a[p],c=i[p],u=c.length,m=e.call(d,d&&d.__data__,p,a),_=m.length,y=s[p]=Array(_),h=r[p]=Array(_),b=l[p]=Array(u);n(d,c,y,h,b,m,t);for(var x=0,v=0,S,T;x<_;++x)if(S=y[x]){for(x>=v&&(v=x+1);!(T=h[v])&&++v<_;);S._next=T||null}}return r=new J(r,a),r._enter=s,r._exit=l,r},enter:function(){return new J(this._enter||this._groups.map(ge),this._parents)},exit:function(){return new J(this._exit||this._groups.map(ge),this._parents)},merge:function(e){for(var t=this._groups,a=e._groups,o=t.length,r=a.length,s=S(o,r),l=Array(o),d=0;d<s;++d)for(var p=t[d],c=a[d],u=p.length,n=l[d]=Array(u),m=0,i;m<u;++m)(i=p[m]||c[m])&&(n[m]=i);for(;d<o;++d)l[d]=t[d];return new J(l,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a=e[t],o=a.length-1,i=a[o],r;0<=--o;)(r=a[o])&&(i&&i!==r.nextSibling&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=_);for(var a=this._groups,o=a.length,r=Array(o),s=0;s<o;++s){for(var l=a[s],d=l.length,n=r[s]=Array(d),p=0,i;p<d;++p)(i=l[p])&&(n[p]=i);n.sort(t)}return new J(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var o=e[t],r=0,i=o.length,n;r<i;++r)if(n=o[r],n)return n;return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,a=0,o=t.length;a<o;++a)for(var r=t[a],s=0,i=r.length,n;s<i;++s)(n=r[s])&&e.call(n,n.__data__,s,r);return this},attr:function(e,t){var n=ne(e);if(2>arguments.length){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((null==t?n.local?y:m:"function"==typeof t?n.local?v:x:n.local?b:h)(n,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?T:"function"==typeof t?E:k)(e,t,null==n?"":n)):N(this.node(),e)},property:function(e,t){return 1<arguments.length?this.each((null==t?A:"function"==typeof t?w:C)(e,t)):this.node()[e]},classed:function(e,t){var a=O(e+"");if(2>arguments.length){for(var o=D(this.node()),r=-1,i=a.length;++r<i;)if(!o.contains(a[r]))return!1;return!0}return this.each(("function"==typeof t?B:t?M:F)(a,t))},text:function(e){return arguments.length?this.each(null==e?z:("function"==typeof e?U:j)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?$:("function"==typeof e?H:W)(e)):this.node().innerHTML},raise:function(){return this.each(q)},lower:function(){return this.each(Y)},append:function(e){var t="function"==typeof e?e:ae(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:ae(e),a=null==t?V:"function"==typeof t?t:me(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})},remove:function(){return this.each(G)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,a,r){var p=s(e+""),c=p.length,n,i;if(2>arguments.length){var t=this.node().__on;if(t)for(var u=0,f=t.length,m;u<f;++u)for(n=0,m=t[u];n<c;++n)if((i=p[n]).type===m.type&&i.name===m.name)return m.value;return}for(t=a?d:l,null==r&&(r=!1),n=0;n<c;++n)this.each(t(p[n],a,r));return this},dispatch:function(e,t){return this.each(("function"==typeof t?K:X)(e,t))}};e.creator=ae,e.local=a,e.matcher=le,e.mouse=function(e){var t=ce();return t.changedTouches&&(t=t.changedTouches[0]),ue(e,t)},e.namespace=ne,e.namespaces=te,e.select=function(e){return"string"==typeof e?new J([[document.querySelector(e)]],[document.documentElement]):new J([[e]],be)},e.selectAll=function(e){return"string"==typeof e?new J([document.querySelectorAll(e)],[document.documentElement]):new J([null==e?[]:e],be)},e.selection=Q,e.selector=me,e.selectorAll=fe,e.style=N,e.touch=function(e,t,a){3>arguments.length&&(a=t,t=ce().changedTouches);for(var o=0,i=t?t.length:0,n;o<i;++o)if((n=t[o]).identifier===a)return ue(e,n);return null},e.touches=function(e,t){null==t&&(t=ce().touches);for(var a=0,i=t?t.length:0,n=Array(i);a<i;++a)n[a]=ue(e,t[a]);return n},e.window=he,e.customEvent=function(t,n,a,i){var o=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(a,i)}finally{e.event=o}},Object.defineProperty(e,"__esModule",{value:!0})})},{}],136:[function(e,t,n){(function(a,i){"object"==typeof n&&"undefined"!=typeof t?i(n,e("d3-time")):"function"==typeof m&&m.amd?m(["exports","d3-time"],i):i(a.d3=a.d3||{},a.d3)})(this,function(e,t){"use strict";function n(e){if(0<=e.y&&100>e.y){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function a(e){if(0<=e.y&&100>e.y){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function o(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function i(e){function t(e,t){return function(a){var o=[],r=-1,i=0,s=e.length,n,l,d;for(a instanceof Date||(a=new Date(+a));++r<s;)37===e.charCodeAt(r)&&(o.push(e.slice(i,r)),null==(l=te[n=e.charAt(++r)])?l="e"===n?" ":"0":n=e.charAt(++r),(d=t[n])&&(n=d(a,l)),o.push(n),i=r+1);return o.push(e.slice(i,r)),o.join("")}}function i(e,t){return function(n){var s=o(1900),l=r(s,e,n+="",0);if(l!=n.length)return null;if("p"in s&&(s.H=s.H%12+12*s.p),"W"in s||"U"in s){"w"in s||(s.w="W"in s?1:0);var i="Z"in s?a(o(s.y)).getUTCDay():t(o(s.y)).getDay();s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(i+5)%7:s.w+7*s.U-(i+6)%7}return"Z"in s?(s.H+=0|s.Z/100,s.M+=s.Z%100,a(s)):t(s)}}function r(e,t,a,o){for(var r=0,i=t.length,n=a.length,s,l;r<i;){if(o>=n)return-1;if(s=t.charCodeAt(r++),37===s){if(s=t.charAt(r++),l=xe[s in te?t.charAt(r++):s],!l||0>(o=l(e,a,o)))return-1;}else if(s!=a.charCodeAt(o++))return-1}return o}var s=e.dateTime,ee=e.date,ne=e.time,ae=e.periods,ie=e.days,oe=e.shortDays,re=e.months,se=e.shortMonths,le=l(ae),de=d(ae),pe=l(ie),ce=d(ie),ue=l(oe),me=d(oe),fe=l(re),ge=d(re),_e=l(se),ye=d(se),he={a:function(e){return oe[e.getDay()]},A:function(e){return ie[e.getDay()]},b:function(e){return se[e.getMonth()]},B:function(e){return re[e.getMonth()]},c:null,d:k,e:k,H:E,I:N,j:A,L:C,m:w,M:O,p:function(e){return ae[+(12<=e.getHours())]},S:D,U:P,w:R,W:I,x:null,X:null,y:M,Y:F,Z:B,"%":Q},be={a:function(e){return oe[e.getUTCDay()]},A:function(e){return ie[e.getUTCDay()]},b:function(e){return se[e.getUTCMonth()]},B:function(e){return re[e.getUTCMonth()]},c:null,d:z,e:z,H:j,I:U,j:$,L:W,m:H,M:q,p:function(e){return ae[+(12<=e.getUTCHours())]},S:Y,U:V,w:G,W:Z,x:null,X:null,y:X,Y:K,Z:J,"%":Q},xe={a:function(e,t,a){var i=ue.exec(t.slice(a));return i?(e.w=me[i[0].toLowerCase()],a+i[0].length):-1},A:function(e,t,a){var i=pe.exec(t.slice(a));return i?(e.w=ce[i[0].toLowerCase()],a+i[0].length):-1},b:function(e,t,a){var i=_e.exec(t.slice(a));return i?(e.m=ye[i[0].toLowerCase()],a+i[0].length):-1},B:function(e,t,a){var i=fe.exec(t.slice(a));return i?(e.m=ge[i[0].toLowerCase()],a+i[0].length):-1},c:function(e,t,n){return r(e,s,t,n)},d:y,e:y,H:b,I:b,j:h,L:S,m:_,M:x,p:function(e,t,a){var i=le.exec(t.slice(a));return i?(e.p=de[i[0].toLowerCase()],a+i[0].length):-1},S:v,U:c,w:p,W:u,x:function(e,t,n){return r(e,ee,t,n)},X:function(e,t,n){return r(e,ne,t,n)},y:f,Y:m,Z:g,"%":T};return he.x=t(ee,he),he.X=t(ne,he),he.c=t(s,he),be.x=t(ee,be),be.X=t(ne,be),be.c=t(s,be),{format:function(e){var n=t(e+="",he);return n.toString=function(){return e},n},parse:function(e){var t=i(e+="",n);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",be);return n.toString=function(){return e},n},utcParse:function(e){var t=i(e,a);return t.toString=function(){return e},t}}}function r(e,t,n){var a=0>e?"-":"",i=(a?-e:e)+"",o=i.length;return a+(o<n?Array(n-o+1).join(t)+i:i)}function s(e){return e.replace(ie,"\\$&")}function l(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function d(e){for(var t={},a=-1,i=e.length;++a<i;)t[e[a].toLowerCase()]=a;return t}function p(e,t,a){var i=ne.exec(t.slice(a,a+1));return i?(e.w=+i[0],a+i[0].length):-1}function c(e,t,a){var i=ne.exec(t.slice(a));return i?(e.U=+i[0],a+i[0].length):-1}function u(e,t,a){var i=ne.exec(t.slice(a));return i?(e.W=+i[0],a+i[0].length):-1}function m(e,t,a){var i=ne.exec(t.slice(a,a+4));return i?(e.y=+i[0],a+i[0].length):-1}function f(e,t,a){var i=ne.exec(t.slice(a,a+2));return i?(e.y=+i[0]+(68<+i[0]?1900:2e3),a+i[0].length):-1}function g(e,t,a){var i=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(a,a+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),a+i[0].length):-1}function _(e,t,a){var i=ne.exec(t.slice(a,a+2));return i?(e.m=i[0]-1,a+i[0].length):-1}function y(e,t,a){var i=ne.exec(t.slice(a,a+2));return i?(e.d=+i[0],a+i[0].length):-1}function h(e,t,a){var i=ne.exec(t.slice(a,a+3));return i?(e.m=0,e.d=+i[0],a+i[0].length):-1}function b(e,t,a){var i=ne.exec(t.slice(a,a+2));return i?(e.H=+i[0],a+i[0].length):-1}function x(e,t,a){var i=ne.exec(t.slice(a,a+2));return i?(e.M=+i[0],a+i[0].length):-1}function v(e,t,a){var i=ne.exec(t.slice(a,a+2));return i?(e.S=+i[0],a+i[0].length):-1}function S(e,t,a){var i=ne.exec(t.slice(a,a+3));return i?(e.L=+i[0],a+i[0].length):-1}function T(e,t,a){var i=ae.exec(t.slice(a,a+1));return i?a+i[0].length:-1}function k(e,t){return r(e.getDate(),t,2)}function E(e,t){return r(e.getHours(),t,2)}function N(e,t){return r(e.getHours()%12||12,t,2)}function A(e,n){return r(1+t.timeDay.count(t.timeYear(e),e),n,3)}function C(e,t){return r(e.getMilliseconds(),t,3)}function w(e,t){return r(e.getMonth()+1,t,2)}function O(e,t){return r(e.getMinutes(),t,2)}function D(e,t){return r(e.getSeconds(),t,2)}function P(e,n){return r(t.timeSunday.count(t.timeYear(e),e),n,2)}function R(e){return e.getDay()}function I(e,n){return r(t.timeMonday.count(t.timeYear(e),e),n,2)}function M(e,t){return r(e.getFullYear()%100,t,2)}function F(e,t){return r(e.getFullYear()%1e4,t,4)}function B(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+r(0|t/60,"0",2)+r(t%60,"0",2)}function z(e,t){return r(e.getUTCDate(),t,2)}function j(e,t){return r(e.getUTCHours(),t,2)}function U(e,t){return r(e.getUTCHours()%12||12,t,2)}function $(e,n){return r(1+t.utcDay.count(t.utcYear(e),e),n,3)}function W(e,t){return r(e.getUTCMilliseconds(),t,3)}function H(e,t){return r(e.getUTCMonth()+1,t,2)}function q(e,t){return r(e.getUTCMinutes(),t,2)}function Y(e,t){return r(e.getUTCSeconds(),t,2)}function V(e,n){return r(t.utcSunday.count(t.utcYear(e),e),n,2)}function G(e){return e.getUTCDay()}function Z(e,n){return r(t.utcMonday.count(t.utcYear(e),e),n,2)}function X(e,t){return r(e.getUTCFullYear()%100,t,2)}function K(e,t){return r(e.getUTCFullYear()%1e4,t,4)}function J(){return"+0000"}function Q(){return"%"}function ee(t){return oe=i(t),e.timeFormat=oe.format,e.timeParse=oe.parse,e.utcFormat=oe.utcFormat,e.utcParse=oe.utcParse,oe}var te={0:"0","-":"",_:" "},ne=/^\s*\d+/,ae=/^%/,ie=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,oe;ee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var re="%Y-%m-%dT%H:%M:%S.%LZ",se=Date.prototype.toISOString?function(e){return e.toISOString()}:e.utcFormat(re),le=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:e.utcParse(re);e.timeFormatDefaultLocale=ee,e.timeFormatLocale=i,e.isoFormat=se,e.isoParse=le,Object.defineProperty(e,"__esModule",{value:!0})})},{"d3-time":137}],137:[function(e,t,n){(function(e,a){"object"==typeof n&&"undefined"!=typeof t?a(n):"function"==typeof m&&m.amd?m(["exports"],a):a(e.d3=e.d3||{})})(this,function(e){"use strict";function t(e,n,a,r){function s(t){return e(t=new Date(+t)),t}return s.floor=s,s.ceil=function(t){return e(t=new Date(t-1)),n(t,1),e(t),t},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return n(e=new Date(+e),null==t?1:E(t)),e},s.range=function(t,a,i){var o=[];if(t=s.ceil(t),i=null==i?1:E(i),!(t<a)||!(0<i))return o;do o.push(new Date(+t));while((n(t,i),e(t),t<a));return o},s.filter=function(a){return t(function(t){if(t>=t)for(;e(t),!a(t);)t.setTime(t-1)},function(e,t){if(e>=e)if(0>t)for(;0>=++t;)for(;n(e,-1),!a(e););else for(;0<=--t;)for(;n(e,1),!a(e););})},a&&(s.count=function(t,n){return i.setTime(+t),o.setTime(+n),e(i),e(o),E(a(i,o))},s.every=function(e){return e=E(e),isFinite(e)&&0<e?1<e?s.filter(r?function(t){return 0==r(t)%e}:function(t){return 0==s.count(0,t)%e}):s:null}),s}function n(e){return t(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*d)/u})}function a(e){return t(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/u})}var i=new Date,o=new Date,r=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});r.every=function(e){return e=E(e),isFinite(e)&&0<e?1<e?t(function(t){t.setTime(E(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):r:null};var s=r.range,l=1e3,d=6e4,p=36e5,c=864e5,u=6048e5,m=t(function(e){e.setTime(E(e/l)*l)},function(e,t){e.setTime(+e+t*l)},function(e,t){return(t-e)/l},function(e){return e.getUTCSeconds()}),f=m.range,g=t(function(e){e.setTime(E(e/d)*d)},function(e,t){e.setTime(+e+t*d)},function(e,t){return(t-e)/d},function(e){return e.getMinutes()}),_=g.range,y=t(function(e){var t=e.getTimezoneOffset()*d%p;0>t&&(t+=p),e.setTime(E((+e-t)/p)*p+t)},function(e,t){e.setTime(+e+t*p)},function(e,t){return(t-e)/p},function(e){return e.getHours()}),h=y.range,b=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*d)/c},function(e){return e.getDate()-1}),x=b.range,v=n(0),S=n(1),T=n(2),k=n(3),N=n(4),A=n(5),C=n(6),w=v.range,O=S.range,D=T.range,P=k.range,R=N.range,I=A.range,M=C.range,F=t(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),B=F.range,z=t(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});z.every=function(e){return isFinite(e=E(e))&&0<e?t(function(t){t.setFullYear(E(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var j=z.range,U=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*d)},function(e,t){return(t-e)/d},function(e){return e.getUTCMinutes()}),$=U.range,W=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*p)},function(e,t){return(t-e)/p},function(e){return e.getUTCHours()}),H=W.range,q=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/c},function(e){return e.getUTCDate()-1}),Y=q.range,V=a(0),G=a(1),Z=a(2),X=a(3),K=a(4),J=a(5),Q=a(6),ee=V.range,te=G.range,ne=Z.range,ae=X.range,ie=K.range,oe=J.range,re=Q.range,se=t(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),le=se.range,de=t(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});de.every=function(e){return isFinite(e=E(e))&&0<e?t(function(t){t.setUTCFullYear(E(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var pe=de.range;e.timeInterval=t,e.timeMillisecond=r,e.timeMilliseconds=s,e.utcMillisecond=r,e.utcMilliseconds=s,e.timeSecond=m,e.timeSeconds=f,e.utcSecond=m,e.utcSeconds=f,e.timeMinute=g,e.timeMinutes=_,e.timeHour=y,e.timeHours=h,e.timeDay=b,e.timeDays=x,e.timeWeek=v,e.timeWeeks=w,e.timeSunday=v,e.timeSundays=w,e.timeMonday=S,e.timeMondays=O,e.timeTuesday=T,e.timeTuesdays=D,e.timeWednesday=k,e.timeWednesdays=P,e.timeThursday=N,e.timeThursdays=R,e.timeFriday=A,e.timeFridays=I,e.timeSaturday=C,e.timeSaturdays=M,e.timeMonth=F,e.timeMonths=B,e.timeYear=z,e.timeYears=j,e.utcMinute=U,e.utcMinutes=$,e.utcHour=W,e.utcHours=H,e.utcDay=q,e.utcDays=Y,e.utcWeek=V,e.utcWeeks=ee,e.utcSunday=V,e.utcSundays=ee,e.utcMonday=G,e.utcMondays=te,e.utcTuesday=Z,e.utcTuesdays=ne,e.utcWednesday=X,e.utcWednesdays=ae,e.utcThursday=K,e.utcThursdays=ie,e.utcFriday=J,e.utcFridays=oe,e.utcSaturday=Q,e.utcSaturdays=re,e.utcMonth=se,e.utcMonths=le,e.utcYear=de,e.utcYears=pe,Object.defineProperty(e,"__esModule",{value:!0})})},{}],138:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.fetchREST=n.fetchYAML=n.fetchCSON=n.fetchBSON=n.fetchJSONFiles2=n.fetchJSONFiles=n.fetchJSON=n.arrayBuffer=n.yaml=n.cson=n.bson=n.json=n.status=n.load=void 0;var i=e("babel-runtime/helpers/slicedToArray"),o=a(i),r=e("babel-runtime/core-js/object/entries"),s=a(r),l=e("babel-runtime/core-js/promise"),d=a(l),p=e("cson-parser"),c=a(p),u=e("yamljs"),m=a(u),f=e("bson"),g=a(f),_=new g.default,y=function(e){return 200<=e.status&&300>e.status?d.default.resolve(e):d.default.reject(new Error(e.statusText))},h=function(e){return e.json()},b=function(e){return e.blob().then(function(e){return d.default.resolve(_.deserialize(e))}).catch(function(t){return d.default.reject(t)})},x=function(e){return e.text().then(function(e){return d.default.resolve(c.default.parse(e))}).catch(function(t){return d.default.reject(t)})},v=function(e){return e.text().then(function(e){return d.default.resolve(m.default.parse(e))}).catch(function(t){return d.default.reject(t)})},S=function(e){return e.arrayBuffer()},T=function(e){var t=e.headers.get("content-type");return 0===t.indexOf("application/json")?h(e):0===t.indexOf("text/yaml")?v(e):0===t.indexOf("application/octet-stream")?b(e):d.default.reject(new Error("could not detect type"))},k=function(e){return new d.default(function(t,n){fetch(e).then(y).then(T).then(function(e){t(e)}).catch(function(t){n(t)})})},E=function(e){return new d.default(function(t,n){fetch(e).then(y).then(h).then(function(e){t(e)}).catch(function(t){n(t)})})},N=function(e){return new d.default(function(t,n){fetch(e).then(y).then(x).then(function(e){t(e)}).catch(function(t){n(t)})})},A=function(e){return new d.default(function(t,n){fetch(e).then(y).then(v).then(function(e){t(e)}).catch(function(t){n(t)})})},C=function(e){return new d.default(function(t,n){fetch(e).then(y).then(b).then(function(e){t(e)}).catch(function(t){n(t)})})};n.load=function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,a=n,t;if(null===a)if("string"!=typeof e)a="object";else if(-1!==e.search(/\.ya?ml/))a="yaml";else if(-1!==e.search(/\.json/))a="json";else if(-1!==e.search(/\.bson/))a="bson";else if(-1!==e.search(/\.cson/))a="cson";else try{t=JSON.parse(e,n),a="json_string"}catch(t){a=null}return"object"===a?d.default.resolve(e):"json_string"===a?d.default.resolve(t):"json"===a?E(e,n).then(function(e){return e},function(t){return t}):"yaml"===a?A(e,n).then(function(e){return e},function(t){return t}):"bson"===a?C(e,n).then(function(e){return e},function(t){return t}):"cson"===a?N(e,n).then(function(e){return e},function(t){return t}):null===a?k(e).then(function(e){return e},function(t){return t}):void 0},n.status=y,n.json=h,n.bson=b,n.cson=x,n.yaml=v,n.arrayBuffer=S,n.fetchJSON=E,n.fetchJSONFiles=function(e){return new d.default(function(t,n){var a=[],i=[];e.forEach(function(e){a.push(fetch(e).then(y).then(h).then(function(e){return e}).catch(function(){return i.push(e),null}))}),d.default.all(a).then(function(e){var n=e.filter(function(e){return null!==e});t({jsonFiles:n,errors:i})},function(e){n(e)})})},n.fetchJSONFiles2=function(e,t){return new d.default(function(n,a){var i=[],r=[],l=[];(0,s.default)(e).forEach(function(e){var n=(0,o.default)(e,2),a=n[0],s=n[1];l.push(a),i.push(fetch(t+s).then(y).then(h).then(function(e){return e}).catch(function(){return r.push(s),null}))}),d.default.all(i).then(function(e){var t={};e.forEach(function(e,n){null!==e&&(t[l[n]]=e)}),n({jsonFiles:t,errors:r})},function(e){a(e)})})},n.fetchBSON=C,n.fetchCSON=N,n.fetchYAML=A,n.fetchREST=k},{"babel-runtime/core-js/object/entries":6,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/slicedToArray":10,bson:17,"cson-parser":131,yamljs:602}],139:[function(e,t,n){n.read=function(t,n,a,o,r){var l=8*r-o-1,p=(1<<l)-1,c=p>>1,u=-7,f=a?r-1:0,i=a?-1:1,d=t[n+f],s,e;for(f+=i,s=d&(1<<-u)-1,d>>=-u,u+=l;0<u;s=256*s+t[n+f],f+=i,u-=8);for(e=s&(1<<-u)-1,s>>=-u,u+=o;0<u;e=256*e+t[n+f],f+=i,u-=8);if(0===s)s=1-c;else{if(s===p)return e?NaN:(d?-1:1)*Infinity;e+=g(2,o),s-=c}return(d?-1:1)*e*g(2,s-o)},n.write=function(t,n,a,o,l,p){var u=8*p-l-1,_=(1<<u)-1,y=_>>1,h=23===l?5.960464477539063e-8-6.617444900424222e-24:0,b=o?0:p-1,i=o?1:-1,d=0>n||0===n&&0>1/n?1:0,s,x,m;for(n=T(n),isNaN(n)||n===Infinity?(x=isNaN(n)?1:0,s=_):(s=E(f(n)/r),1>n*(m=g(2,-s))&&(s--,m*=2),n+=1<=s+y?h/m:h*g(2,1-y),2<=n*m&&(s++,m/=2),s+y>=_?(x=0,s=_):1<=s+y?(x=(n*m-1)*g(2,l),s+=y):(x=n*g(2,y-1)*g(2,l),s=0));8<=l;t[a+b]=255&x,b+=i,x/=256,l-=8);for(s=s<<l|x,u+=l;0<u;t[a+b]=255&s,b+=i,s/=256,u-=8);t[a+b-i]|=128*d}},{}],140:[function(e,t){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var a=0;a<e.length;++a)if(e[a]===t)return a;return-1}},{}],141:[function(e,t){var n="undefined"==typeof JSON?e("jsonify"):JSON;t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var i=!("boolean"!=typeof t.cycles)&&t.cycles,s=t.replacer||function(e,t){return t},l=t.cmp&&function(e){return function(t){return function(n,i){var o={key:n,value:t[n]},r={key:i,value:t[i]};return e(o,r)}}}(t.cmp),d=[];return function e(t,p,c,u){var m=r?"\n"+Array(u+1).join(r):"",f=r?": ":":";if(c&&c.toJSON&&"function"==typeof c.toJSON&&(c=c.toJSON()),c=s.call(t,p,c),void 0!==c){if("object"!=typeof c||null===c)return n.stringify(c);if(a(c)){for(var g=[],_=0,y;_<c.length;_++)y=e(c,_,c[_],u+1)||n.stringify(null),g.push(m+r+y);return"["+g.join(",")+m+"]"}if(-1!==d.indexOf(c)){if(i)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else d.push(c);for(var h=o(c).sort(l&&l(c)),g=[],_=0;_<h.length;_++){var p=h[_],b=e(c,p,c[p],u+1);if(b){var x=n.stringify(p)+f+b;g.push(m+r+x)}}return d.splice(d.indexOf(c),1),"{"+g.join(",")+m+"}"}}({"":e},"",e,0)};var a=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var a in e)t.call(e,a)&&n.push(a);return n}},{jsonify:142}],142:[function(e,t,n){n.parse=e("./lib/parse"),n.stringify=e("./lib/stringify")},{"./lib/parse":143,"./lib/stringify":144}],143:[function(e,t){var n={'"':"\"","\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(e){throw{name:"SyntaxError",message:e,at:u,text:f}},o=function(e){return e&&e!==m&&a("Expected '"+e+"' instead of '"+m+"'"),m=f.charAt(u),u+=1,m},i=function(){var e="",t;for("-"===m&&(e="-",o("-"));"0"<=m&&"9">=m;)e+=m,o();if("."===m)for(e+=".";o()&&"0"<=m&&"9">=m;)e+=m;if("e"===m||"E"===m)for(e+=m,o(),("-"===m||"+"===m)&&(e+=m,o());"0"<=m&&"9">=m;)e+=m,o();return t=+e,isFinite(t)?t:void a("Bad number")},r=function(){var e="",t,r,i;if("\""===m)for(;o();){if("\""===m)return o(),e;if("\\"!==m)e+=m;else if(o(),"u"===m){for(i=0,r=0;4>r&&(t=parseInt(o(),16),!!isFinite(t));r+=1)i=16*i+t;e+=d(i)}else if("string"==typeof n[m])e+=n[m];else break}a("Bad string")},s=function(){for(;m&&" ">=m;)o()},l=function(){switch(m){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null;}a("Unexpected '"+m+"'")},p=function(){var e=[];if("["===m){if(o("["),s(),"]"===m)return o("]"),e;for(;m;){if(e.push(g()),s(),"]"===m)return o("]"),e;o(","),s()}}a("Bad array")},c=function(){var e={},t;if("{"===m){if(o("{"),s(),"}"===m)return o("}"),e;for(;m;){if(t=r(),s(),o(":"),Object.hasOwnProperty.call(e,t)&&a("Duplicate key \""+t+"\""),e[t]=g(),s(),"}"===m)return o("}"),e;o(","),s()}}a("Bad object")},u,m,f,g;g=function(){return s(),"{"===m?c():"["===m?p():"\""===m?r():"-"===m?i():"0"<=m&&"9">=m?i():l()},t.exports=function(e,t){var n;return f=e,u=0,m=" ",n=g(),s(),m&&a("Syntax error"),"function"==typeof t?function e(n,a){var i=n[a],o,r;if(i&&"object"==typeof i)for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r=e(i,o),void 0===r?delete i[o]:i[o]=r);return t.call(n,a,i)}({"":n},""):n}},{}],144:[function(e,t){function n(e){return o.lastIndex=0,o.test(e)?"\""+e.replace(o,function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+"\"":"\""+e+"\""}function a(e,t){var o=s,r=t[e],p,i,c,u,m;switch(r&&"object"==typeof r&&"function"==typeof r.toJSON&&(r=r.toJSON(e)),"function"==typeof d&&(r=d.call(t,e,r)),typeof r){case"string":return n(r);case"number":return isFinite(r)?r+"":"null";case"boolean":case"null":return r+"";case"object":if(!r)return"null";if(s+=l,m=[],"[object Array]"===Object.prototype.toString.apply(r)){for(u=r.length,p=0;p<u;p+=1)m[p]=a(p,r)||"null";return c=0===m.length?"[]":s?"[\n"+s+m.join(",\n"+s)+"\n"+o+"]":"["+m.join(",")+"]",s=o,c}if(d&&"object"==typeof d)for(u=d.length,p=0;p<u;p+=1)i=d[p],"string"==typeof i&&(c=a(i,r),c&&m.push(n(i)+(s?": ":":")+c));else for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(c=a(i,r),c&&m.push(n(i)+(s?": ":":")+c));return c=0===m.length?"{}":s?"{\n"+s+m.join(",\n"+s)+"\n"+o+"}":"{"+m.join(",")+"}",s=o,c;}}var i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"":"\\b","	":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':"\\\"","\\":"\\\\"},s,l,d;t.exports=function(e,t,n){var o;if(s="",l="","number"==typeof n)for(o=0;o<n;o+=1)l+=" ";else"string"==typeof n&&(l=n);if(d=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return a("",{"":e})}},{}],145:[function(e,d,_){(function(e,t){"object"==typeof _&&"undefined"!=typeof d?t(_):"function"==typeof m&&m.amd?m(["exports"],t):t(e.L={})})(this,function(e){"use strict";function d(e){var t,n,a,i;for(n=1,a=arguments.length;n<a;n++)for(t in i=arguments[n],i)e[t]=i[t];return e}function m(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var a=n.call(arguments,2);return function(){return e.apply(t,a.length?a.concat(n.call(arguments)):arguments)}}function _(e){return e._leaflet_id=e._leaflet_id||++ht,e._leaflet_id}function y(e,t,n){var a,i,o,r;return r=function(){a=!1,i&&(o.apply(n,i),i=!1)},o=function(){a?i=arguments:(e.apply(n,arguments),setTimeout(r,t),a=!0)},o}function h(e,t,n){var a=t[1],i=t[0],o=a-i;return e===a&&n?e:((e-i)%o+o)%o+i}function b(){return!1}function x(e,t){var n=g(10,t||5);return l(e*n)/n}function v(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function k(e){return v(e).split(/\s+/)}function A(e,t){for(var n in e.hasOwnProperty("options")||(e.options=e.options?yt(e.options):{}),t)e.options[n]=t[n];return e.options}function C(e,t,n){var a=[];for(var o in e)a.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+a.join("&")}function w(e,t){return e.replace(bt,function(e,n){var a=t[n];if(a===void 0)throw new Error("No value provided for variable "+e);else"function"==typeof a&&(a=a(t));return a})}function O(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function D(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}function P(e){var t=+new Date,n=N(0,16-(t-St));return St=t+n,window.setTimeout(e,n)}function R(e,t,n){return n&&Tt===P?void e.call(t):Tt.call(window,m(e,t))}function I(e){e&&kt.call(window,e)}function M(){}function F(e){if(L&&L.Mixin){e=xt(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}function B(e,t,n){this.x=n?l(e):e,this.y=n?l(t):t}function z(e,t,n){return e instanceof B?e:xt(e)?new B(e[0],e[1]):void 0===e||null===e?e:"object"==typeof e&&"x"in e&&"y"in e?new B(e.x,e.y):new B(e,t,n)}function U(e,t){if(e)for(var n=t?[e,t]:e,a=0,i=n.length;a<i;a++)this.extend(n[a])}function j(e,t){return!e||e instanceof U?e:new U(e,t)}function $(e,t){if(e)for(var n=t?[e,t]:e,a=0,i=n.length;a<i;a++)this.extend(n[a])}function W(e,t){return e instanceof $?e:new $(e,t)}function H(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,n!==void 0&&(this.alt=+n)}function q(e,t,n){return e instanceof H?e:xt(e)&&"object"!=typeof e[0]?3===e.length?new H(e[0],e[1],e[2]):2===e.length?new H(e[0],e[1]):null:void 0===e||null===e?e:"object"==typeof e&&"lat"in e?new H(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new H(e,t,n)}function Y(e,t,n,a){return xt(e)?(this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3])):void(this._a=e,this._b=t,this._c=n,this._d=a)}function V(e,t,n,a){return new Y(e,t,n,a)}function G(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Z(e,t){var n="",a,i,o,r,s,l;for(a=0,o=e.length;a<o;a++){for(s=e[a],i=0,r=s.length;i<r;i++)l=s[i],n+=(i?"L":"M")+l.x+" "+l.y;n+=t?rn?"z":"x":""}return n||"M0 0"}function X(e){return 0<=navigator.userAgent.toLowerCase().indexOf(e)}function K(e,t,n,a){return"touchstart"===t?Q(e,n,a):"touchmove"===t?oe(e,n,a):"touchend"===t&&re(e,n,a),this}function J(e,t,n){var a=e["_leaflet_"+t+n];return"touchstart"===t?e.removeEventListener(dn,a,!1):"touchmove"===t?e.removeEventListener(pn,a,!1):"touchend"===t&&(e.removeEventListener(cn,a,!1),e.removeEventListener(un,a,!1)),this}function Q(e,t,n){var a=m(function(n){if("mouse"!==n.pointerType&&n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&n.pointerType!==n.MSPOINTER_TYPE_MOUSE)if(0>mn.indexOf(n.target.tagName))_e(n);else return;ae(n,t)});e["_leaflet_touchstart"+n]=a,e.addEventListener(dn,a,!1),gn||(document.documentElement.addEventListener(dn,ee,!0),document.documentElement.addEventListener(pn,te,!0),document.documentElement.addEventListener(cn,ne,!0),document.documentElement.addEventListener(un,ne,!0),gn=!0)}function ee(t){fn[t.pointerId]=t,_n++}function te(t){fn[t.pointerId]&&(fn[t.pointerId]=t)}function ne(t){delete fn[t.pointerId],_n--}function ae(t,e){for(var n in t.touches=[],fn)t.touches.push(fn[n]);t.changedTouches=[t],e(t)}function oe(e,t,n){var a=function(n){(n.pointerType===n.MSPOINTER_TYPE_MOUSE||"mouse"===n.pointerType)&&0===n.buttons||ae(n,t)};e["_leaflet_touchmove"+n]=a,e.addEventListener(pn,a,!1)}function re(e,t,n){var a=function(n){ae(n,t)};e["_leaflet_touchend"+n]=a,e.addEventListener(cn,a,!1),e.addEventListener(un,a,!1)}function se(e,t,n){function a(t){var e;if(Qt){if(!Mt||"mouse"===t.pointerType)return;e=_n}else e=t.touches.length;if(!(1<e)){var n=Date.now(),a=n-(s||n);l=t.touches?t.touches[0]:t,o=0<a&&a<=r,s=n}}function i(n){if(o&&!l.cancelBubble){if(Qt){if(!Mt||"mouse"===n.pointerType)return;var e={},a,r;for(r in l)a=l[r],e[r]=a&&a.bind?a.bind(l):a;l=e}l.type="dblclick",t(l),s=null}}var o=!1,r=250,s,l;return e[bn+yn+n]=a,e[bn+hn+n]=i,e[bn+"dblclick"+n]=t,e.addEventListener(yn,a,!1),e.addEventListener(hn,i,!1),e.addEventListener("dblclick",t,!1),this}function le(e,t){var n=e[bn+yn+t],a=e[bn+hn+t],i=e[bn+"dblclick"+t];return e.removeEventListener(yn,n,!1),e.removeEventListener(hn,a,!1),Mt||e.removeEventListener("dblclick",i,!1),this}function de(e,t,n,a){if("object"==typeof t)for(var o in t)ce(e,o,t[o],n);else{t=k(t);for(var r=0,i=t.length;r<i;r++)ce(e,t[r],n,a)}return this}function pe(e,t,n,a){if("object"==typeof t)for(var o in t)ue(e,o,t[o],n);else if(t){t=k(t);for(var r=0,i=t.length;r<i;r++)ue(e,t[r],n,a)}else{for(var s in e[xn])ue(e,s,e[xn][s]);delete e[xn]}return this}function ce(t,e,n,a){var i=e+_(n)+(a?"_"+_(a):"");if(t[xn]&&t[xn][i])return this;var o=function(i){return n.call(a||t,i||window.event)},r=o;Qt&&0===e.indexOf("touch")?K(t,e,o,i):en&&"dblclick"===e&&se&&!(Qt&&Ut)?se(t,o,i):"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):"mouseenter"===e||"mouseleave"===e?(o=function(n){n=n||window.event,Se(t,n)&&r(n)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&Bt&&(o=function(t){Te(t,r)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o),t[xn]=t[xn]||{},t[xn][i]=o}function ue(e,t,n,a){var i=t+_(n)+(a?"_"+_(a):""),o=e[xn]&&e[xn][i];return o?void(Qt&&0===t.indexOf("touch")?J(e,t,i):en&&"dblclick"===t&&le?le(e,i):"removeEventListener"in e?"mousewheel"===t?e.removeEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):e.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,o,!1):"detachEvent"in e&&e.detachEvent("on"+t,o),e[xn][i]=null):this}function me(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,ve(t),this}function fe(e){return ce(e,"mousewheel",me),this}function ge(e){return de(e,"mousedown touchstart dblclick",me),ce(e,"click",xe),this}function _e(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ye(t){return _e(t),me(t),this}function he(t,e){if(!e)return new B(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new B(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)}function be(t){return Mt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/vn:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&32765>T(t.detail)?20*-t.detail:t.detail?60*(t.detail/-32765):0}function xe(t){Sn[t.type]=!0}function ve(t){var e=Sn[t.type];return Sn[t.type]=!1,e}function Se(t,n){var e=n.relatedTarget;if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(e){return!1}return e!==t}function Te(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,a=Ln&&n-Ln;return a&&100<a&&500>a||t.target._simulatedClick&&!t._simulated?void ye(t):void(Ln=n,e(t))}function ke(e){return"string"==typeof e?document.getElementById(e):e}function Ee(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var a=document.defaultView.getComputedStyle(e,null);n=a?a[t]:null}return"auto"===n?null:n}function Ne(e,t,n){var a=document.createElement(e);return a.className=t||"",n&&n.appendChild(a),a}function Le(e){var t=e.parentNode;t&&t.removeChild(e)}function Ae(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Ce(e){var t=e.parentNode;t.lastChild!==e&&t.appendChild(e)}function we(e){var t=e.parentNode;t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Oe(e,t){if(e.classList!==void 0)return e.classList.contains(t);var n=Ie(e);return 0<n.length&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function De(e,t){if(e.classList!==void 0)for(var n=k(t),a=0,i=n.length;a<i;a++)e.classList.add(n[a]);else if(!Oe(e,t)){var o=Ie(e);Re(e,(o?o+" ":"")+t)}}function Pe(e,t){e.classList===void 0?Re(e,v((" "+Ie(e)+" ").replace(" "+t+" "," "))):e.classList.remove(t)}function Re(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function Ie(e){return e.className.baseVal===void 0?e.className:e.className.baseVal}function Me(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Fe(e,t)}function Fe(e,t){var n=!1,a="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(a)}catch(n){if(1===t)return}t=l(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+a+"(opacity="+t+")"}function Be(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function ze(e,t,n){var a=t||new B(0,0);e.style[kn]=(Vt?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(n?" scale("+n+")":"")}function je(e,t){e._leaflet_pos=t,Xt?ze(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Ue(e){return e._leaflet_pos||new B(0,0)}function $e(){de(window,"dragstart",_e)}function We(){pe(window,"dragstart",_e)}function He(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(qe(),Fn=e,Bn=e.style.outline,e.style.outline="none",de(window,"keydown",qe))}function qe(){Fn&&(Fn.style.outline=Bn,Fn=void 0,Bn=void 0,pe(window,"keydown",qe))}function Ye(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Xe(e,n),e=Ge(e,n),e}function Ve(e,t,n){return u(tt(e,t,n,!0))}function Ge(e,t){var n=e.length,a=typeof Uint8Array==void 0+""?Array:Uint8Array,o=new a(n);o[0]=o[n-1]=1,Ze(e,o,t,0,n-1);var r=[],s;for(s=0;s<n;s++)o[s]&&r.push(e[s]);return r}function Ze(e,t,n,a,o){var r=0,s,l,i;for(l=a+1;l<=o-1;l++)i=tt(e[l],e[a],e[o],!0),i>r&&(s=l,r=i);r>n&&(t[s]=1,Ze(e,t,n,a,s),Ze(e,t,n,s,o))}function Xe(e,t){for(var n=[e[0]],a=1,i=0,o=e.length;a<o;a++)et(e[a],e[i])>t&&(n.push(e[a]),i=a);return i<o-1&&n.push(e[o-1]),n}function Ke(e,t,n,a,i){var o=a?na:Qe(e,n),r=Qe(t,n),s,l,d;for(na=r;;){if(!(o|r))return[e,t];if(o&r)return!1;s=o||r,l=Je(e,t,s,n,i),d=Qe(l,n),s===o?(e=l,o=d):(t=l,r=d)}}function Je(e,t,n,a,i){var o=t.x-e.x,r=t.y-e.y,s=a.min,l=a.max,d,p;return 8&n?(d=e.x+o*(l.y-e.y)/r,p=l.y):4&n?(d=e.x+o*(s.y-e.y)/r,p=s.y):2&n?(d=l.x,p=e.y+r*(l.x-e.x)/o):1&n&&(d=s.x,p=e.y+r*(s.x-e.x)/o),new B(d,p,i)}function Qe(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function et(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a}function tt(e,n,a,i){var o=n.x,r=n.y,s=a.x-o,l=a.y-r,d=s*s+l*l,p;return 0<d&&(p=((e.x-o)*s+(e.y-r)*l)/d,1<p?(o=a.x,r=a.y):0<p&&(o+=s*p,r+=l*p)),s=e.x-o,l=e.y-r,i?s*s+l*l:new B(o,r)}function nt(e){return!xt(e[0])||"object"!=typeof e[0][0]&&"undefined"!=typeof e[0][0]}function at(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),nt(e)}function it(e,t,n){var o=[1,4,2,8],r,s,i,l,d,a,c,u,m;for(s=0,c=e.length;s<c;s++)e[s]._code=Qe(e[s],t);for(l=0;4>l;l++){for(u=o[l],r=[],(s=0,c=e.length,i=c-1);s<c;i=s++)d=e[s],a=e[i],d._code&u?!(a._code&u)&&(m=Je(a,d,u,t,n),m._code=Qe(m,t),r.push(m)):(a._code&u&&(m=Je(a,d,u,t,n),m._code=Qe(m,t),r.push(m)),r.push(d));e=r}return e}function ot(e,t){var n="Feature"===e.type?e.geometry:e,a=n?n.coordinates:null,o=[],r=t&&t.pointToLayer,s=t&&t.coordsToLatLng||rt,l,d,p,i;if(!a&&!n)return null;switch(n.type){case"Point":return l=s(a),r?r(e,l):new da(l);case"MultiPoint":for(p=0,i=a.length;p<i;p++)l=s(a[p]),o.push(r?r(e,l):new da(l));return new oa(o);case"LineString":case"MultiLineString":return d=st(a,"LineString"===n.type?0:1,s),new ma(d,t);case"Polygon":case"MultiPolygon":return d=st(a,"Polygon"===n.type?1:2,s),new fa(d,t);case"GeometryCollection":for(p=0,i=n.geometries.length;p<i;p++){var c=ot({geometry:n.geometries[p],type:"Feature",properties:e.properties},t);c&&o.push(c)}return new oa(o);default:throw new Error("Invalid GeoJSON object.");}}function rt(e){return new H(e[1],e[0],e[2])}function st(e,t,n){for(var a=[],o=0,i=e.length,r;o<i;o++)r=t?st(e[o],t-1,n):(n||rt)(e[o]),a.push(r);return a}function lt(e,t){return t="number"==typeof t?t:6,void 0===e.alt?[x(e.lng,t),x(e.lat,t)]:[x(e.lng,t),x(e.lat,t),x(e.alt,t)]}function dt(e,t,n,a){for(var o=[],r=0,i=e.length;r<i;r++)o.push(t?dt(e[r],t-1,n,a):lt(e[r],a));return!t&&n&&o.push(o[0]),o}function pt(e,t){return e.feature?d({},e.feature,{geometry:t}):ct(t)}function ct(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}function ut(e,t){return new ga(e,t)}function mt(e,t){return new ka(e,t)}function ft(e){return an?new La(e):null}function gt(e){return rn||sn?new wa(e):null}var _t=Object.freeze;Object.freeze=function(e){return e};var yt=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),ht=0,bt=/\{ *([\w_\-]+) *\}/g,xt=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},vt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",St=0,Tt=window.requestAnimationFrame||D("RequestAnimationFrame")||P,kt=window.cancelAnimationFrame||D("CancelAnimationFrame")||D("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)},Et=(Object.freeze||Object)({freeze:_t,extend:d,create:yt,bind:m,lastId:ht,stamp:_,throttle:y,wrapNum:h,falseFn:b,formatNum:x,trim:v,splitWords:k,setOptions:A,getParamString:C,template:w,isArray:xt,indexOf:O,emptyImageUrl:vt,requestFn:Tt,cancelFn:kt,requestAnimFrame:R,cancelAnimFrame:I});M.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=t.__super__=this.prototype,a=yt(n);for(var o in a.constructor=t,t.prototype=a,this)this.hasOwnProperty(o)&&"prototype"!=o&&"__super__"!=o&&(t[o]=this[o]);return e.statics&&(d(t,e.statics),delete e.statics),e.includes&&(F(e.includes),d.apply(null,[a].concat(e.includes)),delete e.includes),a.options&&(e.options=d(yt(a.options),e.options)),d(a,e),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=a._initHooks.length;e<t;e++)a._initHooks[e].call(this)}},t},M.include=function(e){return d(this.prototype,e),this},M.mergeOptions=function(e){return d(this.prototype.options,e),this},M.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var Nt={on:function(e,t,n){if("object"==typeof e)for(var a in e)this._on(a,e[a],t);else{e=k(e);for(var o=0,i=e.length;o<i;o++)this._on(e[o],t,n)}return this},off:function(e,t,n){if(!e)delete this._events;else if("object"==typeof e)for(var a in e)this._off(a,e[a],t);else{e=k(e);for(var o=0,i=e.length;o<i;o++)this._off(e[o],t,n)}return this},_on:function(e,t,n){this._events=this._events||{};var a=this._events[e];a||(a=[],this._events[e]=a),n===this&&(n=void 0);for(var o={fn:t,ctx:n},r=a,s=0,i=r.length;s<i;s++)if(r[s].fn===t&&r[s].ctx===n)return;r.push(o)},_off:function(e,t,n){var a,o,i;if(this._events&&(a=this._events[e],!!a)){if(!t){for(o=0,i=a.length;o<i;o++)a[o].fn=b;return void delete this._events[e]}if(n===this&&(n=void 0),a)for(o=0,i=a.length;o<i;o++){var r=a[o];if(r.ctx===n&&r.fn===t)return r.fn=b,this._firingCount&&(this._events[e]=a=a.slice()),void a.splice(o,1)}}},fire:function(e,t,n){if(!this.listens(e,n))return this;var a=d({},t,{type:e,target:this});if(this._events){var o=this._events[e];if(o){this._firingCount=this._firingCount+1||1;for(var r=0,i=o.length,s;r<i;r++)s=o[r],s.fn.call(s.ctx||this,a);this._firingCount--}}return n&&this._propagateEvent(a),this},listens:function(e,t){var n=this._events&&this._events[e];if(n&&n.length)return!0;if(t)for(var a in this._eventParents)if(this._eventParents[a].listens(e,t))return!0;return!1},once:function(e,t,n){if("object"==typeof e){for(var a in e)this.once(a,e[a],t);return this}var i=m(function(){this.off(e,t,n).off(e,i,n)},this);return this.on(e,t,n).on(e,i,n)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[_(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[_(e)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,d({layer:t.target},t),!0)}};Nt.addEventListener=Nt.on,Nt.removeEventListener=Nt.clearAllEventListeners=Nt.off,Nt.addOneTimeEventListener=Nt.once,Nt.fireEvent=Nt.fire,Nt.hasEventListeners=Nt.listens;var Lt=M.extend(Nt);B.prototype={clone:function(){return new B(this.x,this.y)},add:function(e){return this.clone()._add(z(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(z(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new B(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new B(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=l(this.x),this.y=l(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=E(this.x),this.y=E(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=p(this.x),this.y=p(this.y),this},distanceTo:function(e){e=z(e);var t=e.x-this.x,n=e.y-this.y;return u(t*t+n*n)},equals:function(e){return e=z(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=z(e),T(e.x)<=T(this.x)&&T(e.y)<=T(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}},U.prototype={extend:function(e){return e=z(e),this.min||this.max?(this.min.x=S(e.x,this.min.x),this.max.x=N(e.x,this.max.x),this.min.y=S(e.y,this.min.y),this.max.y=N(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new B(this.min.x,this.max.y)},getTopRight:function(){return new B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return e="number"==typeof e[0]||e instanceof B?z(e):j(e),e instanceof U?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=j(e);var t=this.min,n=this.max,a=e.min,i=e.max,o=i.x>=t.x&&a.x<=n.x,r=i.y>=t.y&&a.y<=n.y;return o&&r},overlaps:function(e){e=j(e);var t=this.min,n=this.max,a=e.min,i=e.max,o=i.x>t.x&&a.x<n.x,r=i.y>t.y&&a.y<n.y;return o&&r},isValid:function(){return!!(this.min&&this.max)}},$.prototype={extend:function(e){var t=this._southWest,n=this._northEast,a,i;if(e instanceof H)a=e,i=e;else{if(!(e instanceof $))return e?this.extend(q(e)||W(e)):this;if(a=e._southWest,i=e._northEast,!a||!i)return this}return t||n?(t.lat=S(a.lat,t.lat),t.lng=S(a.lng,t.lng),n.lat=N(i.lat,n.lat),n.lng=N(i.lng,n.lng)):(this._southWest=new H(a.lat,a.lng),this._northEast=new H(i.lat,i.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,a=T(t.lat-n.lat)*e,i=T(t.lng-n.lng)*e;return new $(new H(t.lat-a,t.lng-i),new H(n.lat+a,n.lng+i))},getCenter:function(){return new H((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new H(this.getNorth(),this.getWest())},getSouthEast:function(){return new H(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof H||"lat"in e?q(e):W(e);var t=this._southWest,n=this._northEast,a,i;return e instanceof $?(a=e.getSouthWest(),i=e.getNorthEast()):a=i=e,a.lat>=t.lat&&i.lat<=n.lat&&a.lng>=t.lng&&i.lng<=n.lng},intersects:function(e){e=W(e);var t=this._southWest,n=this._northEast,a=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>=t.lat&&a.lat<=n.lat,r=i.lng>=t.lng&&a.lng<=n.lng;return o&&r},overlaps:function(e){e=W(e);var t=this._southWest,n=this._northEast,a=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>t.lat&&a.lat<n.lat,r=i.lng>t.lng&&a.lng<n.lng;return o&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=W(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!!(this._southWest&&this._northEast)}},H.prototype={equals:function(e,t){if(!e)return!1;e=q(e);var n=N(T(this.lat-e.lat),T(this.lng-e.lng));return n<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+x(this.lat,e)+", "+x(this.lng,e)+")"},distanceTo:function(e){return Ct.distance(this,q(e))},wrap:function(){return Ct.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/c(o/180*this.lat);return W([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new H(this.lat,this.lng,this.alt)}};var At={latLngToPoint:function(e,t){var n=this.projection.project(e),a=this.scale(t);return this.transformation._transform(n,a)},pointToLatLng:function(e,t){var n=this.scale(t),a=this.transformation.untransform(e,n);return this.projection.unproject(a)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*g(2,e)},zoom:function(e){return f(e/256)/r},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e),a=this.transformation.transform(t.min,n),i=this.transformation.transform(t.max,n);return new U(a,i)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?h(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?h(e.lat,this.wrapLat,!0):e.lat,a=e.alt;return new H(n,t,a)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),a=t.lat-n.lat,i=t.lng-n.lng;if(0==a&&0==i)return e;var o=e.getSouthWest(),r=e.getNorthEast(),s=new H(o.lat-a,o.lng-i),l=new H(r.lat-a,r.lng-i);return new $(s,l)}},Ct=d({},At,{wrapLng:[-180,180],R:6371000,distance:function(e,t){var n=o/180,r=e.lat*n,l=t.lat*n,d=s(r)*s(l)+c(r)*c(l)*c((t.lng-e.lng)*n);return this.R*i(S(d,1))}}),wt={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=o/180,n=this.MAX_LATITUDE,a=N(S(n,e.lat),-n),i=s(a*t);return new B(this.R*e.lng*t,this.R*f((1+i)/(1-i))/2)},unproject:function(e){var t=180/o;return new H((2*n(a(e.y/this.R))-o/2)*t,e.x*t/this.R)},bounds:function(){var e=6378137*o;return new U([-e,-e],[e,e])}()};Y.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new B((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var Ot=d({},Ct,{code:"EPSG:3857",projection:wt,transformation:function(){var e=0.5/(o*wt.R);return V(e,0.5,-e,0.5)}()}),Dt=d({},Ot,{code:"EPSG:900913"}),Pt=document.documentElement.style,Rt="ActiveXObject"in window,It=Rt&&!document.addEventListener,Mt="msLaunchUri"in navigator&&!("documentMode"in document),Ft=X("webkit"),Bt=X("android"),zt=X("android 2")||X("android 3"),jt=!!window.opera,Ut=X("chrome"),$t=X("gecko")&&!Ft&&!jt&&!Rt,Wt=!Ut&&X("safari"),Ht=X("phantom"),qt="OTransition"in Pt,Yt=0===navigator.platform.indexOf("Win"),Vt=Rt&&"transition"in Pt,Gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zt,Zt="MozPerspective"in Pt,Xt=!window.L_DISABLE_3D&&(Vt||Gt||Zt)&&!qt&&!Ht,Kt="undefined"!=typeof orientation||X("mobile"),Jt=!window.PointerEvent&&window.MSPointerEvent,Qt=!!(window.PointerEvent||Jt),en=!window.L_NO_TOUCH&&(Qt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),tn=Kt&&jt,nn=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),an=function(){return!!document.createElement("canvas").getContext}(),rn=!!(document.createElementNS&&G("svg").createSVGRect),sn=!rn&&function(){try{var e=document.createElement("div");e.innerHTML="<v:shape adj=\"1\"/>";var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(t){return!1}}(),ln=(Object.freeze||Object)({ie:Rt,ielt9:It,edge:Mt,webkit:Ft,android:Bt,android23:zt,opera:jt,chrome:Ut,gecko:$t,safari:Wt,phantom:Ht,opera12:qt,win:Yt,ie3d:Vt,webkit3d:Gt,gecko3d:Zt,any3d:Xt,mobile:Kt,mobileWebkit:Kt&&Ft,mobileWebkit3d:Kt&&Gt,msPointer:Jt,pointer:Qt,touch:en,mobileOpera:tn,mobileGecko:Kt&&$t,retina:nn,canvas:an,svg:rn,vml:sn}),dn=Jt?"MSPointerDown":"pointerdown",pn=Jt?"MSPointerMove":"pointermove",cn=Jt?"MSPointerUp":"pointerup",un=Jt?"MSPointerCancel":"pointercancel",mn=["INPUT","SELECT","OPTION"],fn={},gn=!1,_n=0,yn=Jt?"MSPointerDown":Qt?"pointerdown":"touchstart",hn=Jt?"MSPointerUp":Qt?"pointerup":"touchend",bn="_leaflet_",xn="_leaflet_events",vn=Yt&&Ut?2*window.devicePixelRatio:$t?window.devicePixelRatio:1,Sn={},Tn=(Object.freeze||Object)({on:de,off:pe,stopPropagation:me,disableScrollPropagation:fe,disableClickPropagation:ge,preventDefault:_e,stop:ye,getMousePosition:he,getWheelDelta:be,fakeStop:xe,skipped:ve,isExternalTarget:Se,addListener:de,removeListener:pe}),kn=Be(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),En=Be(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Nn="webkitTransition"===En||"OTransition"===En?En+"End":"transitionend",Ln,An,Cn,wn;if("onselectstart"in document)An=function(){de(window,"selectstart",_e)},Cn=function(){pe(window,"selectstart",_e)};else{var On=Be(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);An=function(){if(On){var e=document.documentElement.style;wn=e[On],e[On]="none"}},Cn=function(){On&&(document.documentElement.style[On]=wn,wn=void 0)}}var Dn=(Object.freeze||Object)({TRANSFORM:kn,TRANSITION:En,TRANSITION_END:Nn,get:ke,getStyle:Ee,create:Ne,remove:Le,empty:Ae,toFront:Ce,toBack:we,hasClass:Oe,addClass:De,removeClass:Pe,setClass:Re,getClass:Ie,setOpacity:Me,testProp:Be,setTransform:ze,setPosition:je,getPosition:Ue,disableTextSelection:An,enableTextSelection:Cn,disableImageDrag:$e,enableImageDrag:We,preventOutline:He,restoreOutline:qe}),Pn=Lt.extend({run:function(e,t,n,a){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||0.25,this._easeOutPower=1/N(a||0.5,0.2),this._startPos=Ue(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),je(this._el,n),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-g(1-e,this._easeOutPower)}}),Rn=Lt.extend({options:{crs:Ot,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=A(this,t),this._initContainer(e),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(q(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=En&&Xt&&!tn&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),de(this._proxy,Nn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,n){if(t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(q(e),t,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n){void 0!==n.animate&&(n.zoom=d({animate:n.animate},n.zoom),n.pan=d({animate:n.animate,duration:n.duration},n.pan));var a=this._zoom===t?this._tryAnimatedPan(e,n.pan):this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Xt?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Xt?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var a=this.getZoomScale(t),i=this.getSize().divideBy(2),o=e instanceof B?e:this.latLngToContainerPoint(e),r=o.subtract(i).multiplyBy(1-1/a),s=this.containerPointToLatLng(i.add(r));return this.setView(s,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():W(e);var n=z(t.paddingTopLeft||t.padding||[0,0]),a=z(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(a));if(i="number"==typeof t.maxZoom?S(t.maxZoom,i):i,i===Infinity)return{center:e.getCenter(),zoom:i};var o=a.subtract(n).divideBy(2),r=this.project(e.getSouthWest(),i),s=this.project(e.getNorthEast(),i),l=this.unproject(r.add(s).divideBy(2).add(o),i);return{center:l,zoom:i}},fitBounds:function(e,t){if(e=W(e),!e.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=z(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Pn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){De(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||0.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,n,t){function i(e){var t=e?-1:1,n=e?v:x,a=(v*v-x*x+t*k*k*T*T)/(2*n*k*T),i=u(a*a+1)-a,o=1e-9>i?-18:f(i);return o}function o(e){return(a(e)-a(-e))/2}function r(e){return(a(e)+a(-e))/2}function l(e){return o(e)/r(e)}function d(e){return x*(r(E)/r(E+b*e))}function p(e){return x*(r(E)*l(E+b*e)-o(E))/k}function c(e){return 1-g(1-e,1.5)}function m(){var a=(Date.now()-A)/S,t=c(a)*C;1>=a?(this._flyToFrame=R(m,this),this._move(this.unproject(_.add(y.subtract(_).multiplyBy(p(t)/T)),h),this.getScaleZoom(x/d(t),h),{flyTo:!0})):this._move(e,n)._moveEnd(!0)}if(t=t||{},!1===t.animate||!Xt)return this.setView(e,n,t);this._stop();var _=this.project(this.getCenter()),y=this.project(e),s=this.getSize(),h=this._zoom;e=q(e),n=void 0===n?h:n;var x=N(s.x,s.y),v=x*this.getZoomScale(h,n),T=y.distanceTo(_)||1,b=1.42,k=b*b,E=i(0),A=Date.now(),C=(i(1)-E)/b,S=t.duration?1e3*t.duration:0.8*(1e3*C);return this._moveStart(!0),m.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return(e=W(e),!e.isValid())?(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds)):(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){return this.options.minZoom=e,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(e):this},setMaxZoom:function(e){return this.options.maxZoom=e,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),a=this._limitCenter(n,this._zoom,W(e));return n.equals(a)||this.panTo(a,t),this._enforcingBounds=!1,this},invalidateSize:function(e){if(!this._loaded)return this;e=d({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),a=t.divideBy(2).round(),i=n.divideBy(2).round(),o=a.subtract(i);return o.x||o.y?(e.animate&&e.pan?this.panBy(o):(e.pan&&this._rawPanBy(o),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=d({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=m(this._handleGeolocationResponse,this),n=m(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,n=e.coords.longitude,a=new H(t,n),o=a.toBounds(e.coords.accuracy),r=this._locateOptions;if(r.setView){var s=this.getBoundsZoom(o);this.setView(a,r.maxZoom?S(s,r.maxZoom):s)}var l={latlng:a,bounds:o,timestamp:e.timestamp};for(var d in e.coords)"number"==typeof e.coords[d]&&(l[d]=e.coords[d]);this.fire("locationfound",l)},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}Le(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var e in this._layers)this._layers[e].remove();for(e in this._panes)Le(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),a=Ne("div",n,t||this._mapPane);return e&&(this._panes[e]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new $(t,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=W(e),n=z(n||[0,0]);var a=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),r=e.getNorthWest(),s=e.getSouthEast(),d=this.getSize().subtract(n),c=j(this.project(s,a),this.project(r,a)).getSize(),u=Xt?this.options.zoomSnap:1,m=d.x/c.x,f=d.y/c.y,g=t?N(m,f):S(m,f);return a=this.getScaleZoom(g,a),u&&(a=l(a/(u/100))*(u/100),a=t?p(a/u)*u:E(a/u)*u),N(i,S(o,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new U(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=t===void 0?this._zoom:t;var a=n.zoom(e*n.scale(t));return isNaN(a)?Infinity:a},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(q(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(z(e),t)},layerPointToLatLng:function(e){var t=z(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(q(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(q(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(W(e))},distance:function(e,t){return this.options.crs.distance(q(e),q(t))},containerPointToLayerPoint:function(e){return z(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return z(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(z(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(q(e)))},mouseEventToContainerPoint:function(t){return he(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(e){var t=this._container=ke(e);if(!t)throw new Error("Map container not found.");else if(t._leaflet_id)throw new Error("Map container is already initialized.");de(t,"scroll",this._onScroll,this),this._containerId=_(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Xt,De(e,"leaflet-container"+(en?" leaflet-touch":"")+(nn?" leaflet-retina":"")+(It?" leaflet-oldie":"")+(Wt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=Ee(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),je(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(De(e.markerPane,"leaflet-zoom-hide"),De(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){je(this._mapPane,new B(0,0));var n=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var a=this._zoom!==t;this._moveStart(a)._move(e,t)._moveEnd(a),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(e){return e&&this.fire("zoomstart"),this.fire("movestart")},_move:function(e,t,n){void 0===t&&(t=this._zoom);var a=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),(a||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){je(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[_(this._container)]=this;var t=e?pe:de;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Xt&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();N(T(e.x),T(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n=[],a="mouseout"===e||"mouseover"===e,i=t.target||t.srcElement,o=!1,r;i;){if(r=this._targets[_(i)],r&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(r)){o=!0;break}if(r&&r.listens(e,!0)){if(a&&!Se(i,t))break;if(n.push(r),a)break}if(i===this._container)break;i=i.parentNode}return n.length||o||a||!Se(i,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!ve(t)){var e=t.type;("mousedown"===e||"keypress"===e)&&He(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,a){if("click"===t.type){var o=d({},t);o.type="preclick",this._fireDOMEvent(o,o.type,a)}if(!t._stopped&&(a=(a||[]).concat(this._findEventTargets(t,n)),!!a.length)){var r=a[0];"contextmenu"===n&&r.listens(n,!0)&&_e(t);var s={originalEvent:t};if("keypress"!==t.type){var l=r.options&&"icon"in r.options;s.containerPoint=l?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=l?r.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var p=0;p<a.length;p++)if(a[p].fire(n,s,!0),s.originalEvent._stopped||!1===a[p].options.bubblingMouseEvents&&-1!==O(this._mouseEvents,n))return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Ue(this._mapPane)||new B(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var n=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var a=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(a)},_latLngBoundsToNewLayerBounds:function(e,t,n){var a=this._getNewPixelOrigin(n,t);return j([this.project(e.getSouthWest(),t)._subtract(a),this.project(e.getNorthWest(),t)._subtract(a),this.project(e.getSouthEast(),t)._subtract(a),this.project(e.getNorthEast(),t)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var a=this.project(e,t),i=this.getSize().divideBy(2),o=new U(a.subtract(i),a.add(i)),r=this._getBoundsOffset(o,n,t);return r.round().equals([0,0])?e:this.unproject(a.add(r),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),a=new U(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(a,t))},_getBoundsOffset:function(e,t,n){var a=j(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=a.min.subtract(e.min),o=a.max.subtract(e.max),r=this._rebound(i.x,-o.x),s=this._rebound(i.y,-o.y);return new B(r,s)},_rebound:function(e,t){return 0<e+t?l(e-t)/2:N(0,p(e))-N(0,E(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),a=Xt?this.options.zoomSnap:1;return a&&(e=l(e/a)*a),N(t,S(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Pe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._floor();return(!0===(t&&t.animate)||this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var e=kn,n=this._proxy.style[e];ze(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),t=this.getZoom();ze(this._proxy,this.project(e,t),this.getZoomScale(t,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Le(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||T(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/a);return(!0===n.animate||this.getSize().contains(i))&&(R(function(){this._moveStart(!0)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,a){n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,De(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:a}),setTimeout(m(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(Pe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),R(function(){this._moveEnd(!0)},this))}}),In=M.extend({options:{position:"topright"},initialize:function(e){A(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),a=e._controlCorners[n];return De(t,"leaflet-control"),-1===n.indexOf("bottom")?a.appendChild(t):a.insertBefore(t,a.firstChild),this},remove:function(){return this._map?(Le(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),Mn=function(e){return new In(e)},Fn,Bn;Rn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){function e(e,i){t[e+i]=Ne("div",n+e+" "+n+i,a)}var t=this._controlCorners={},n="leaflet-",a=this._controlContainer=Ne("div",n+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)Le(this._controlCorners[e]);Le(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zn=In.extend({options:{collapsed:!0,position:"topright",// If `true`, the control will assign zIndexes in increasing order to all of its layers so that the order is preserved when switching them on/off.
autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,a){return n<a?-1:a<n?1:0}},initialize:function(e,t,n){for(var a in A(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[a],a);for(a in t)this._addLayer(t[a],a,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return In.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(_(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){De(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._form.clientHeight?(De(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=e+"px"):Pe(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Pe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=Ne("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),ge(t),fe(t);var a=this._form=Ne("form",e+"-list");n&&(this._map.on("click",this.collapse,this),!Bt&&de(t,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=Ne("a",e+"-toggle",t);i.href="#",i.title="Layers",en?(de(i,"click",ye),de(i,"click",this.expand,this)):de(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=Ne("div",e+"-base",a),this._separator=Ne("div",e+"-separator",a),this._overlaysList=Ne("div",e+"-overlays",a),t.appendChild(a)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&_(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(m(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ae(this._baseLayersList),Ae(this._overlaysList),this._layerControlInputs=[];var e=0,t,n,a,i;for(a=0;a<this._layers.length;a++)i=this._layers[a],this._addItem(i),n=n||i.overlay,t=t||!i.overlay,e+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<e,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=n&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(_(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(e,t){var n="<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\""+e+"\""+(t?" checked=\"checked\"":"")+"/>",a=document.createElement("div");return a.innerHTML=n,a.firstChild},_addItem:function(e){var t=document.createElement("label"),n=this._map.hasLayer(e.layer),a;e.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=n):a=this._createRadioElement("leaflet-base-layers",n),this._layerControlInputs.push(a),a.layerId=_(e.layer),de(a,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+e.name;var o=document.createElement("div");t.appendChild(o),o.appendChild(a),o.appendChild(i);var r=e.overlay?this._overlaysList:this._baseLayersList;return r.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){var e=this._layerControlInputs,t=[],n=[],a,o;this._handlingClick=!0;for(var r=e.length-1;0<=r;r--)a=e[r],o=this._getLayer(a.layerId).layer,a.checked?t.push(o):!a.checked&&n.push(o);for(r=0;r<n.length;r++)this._map.hasLayer(n[r])&&this._map.removeLayer(n[r]);for(r=0;r<t.length;r++)this._map.hasLayer(t[r])||this._map.addLayer(t[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t=this._map.getZoom(),n=e.length-1,a,i;0<=n;n--)a=e[n],i=this._getLayer(a.layerId).layer,a.disabled=void 0!==i.options.minZoom&&t<i.options.minZoom||void 0!==i.options.maxZoom&&t>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),jn=In.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=Ne("div",t+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(e,t,n,a,i){var o=Ne("a",n,a);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),ge(o),de(o,"click",ye),de(o,"click",i,this),de(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";Pe(this._zoomInButton,t),Pe(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&De(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&De(this._zoomInButton,t)}});Rn.mergeOptions({zoomControl:!0}),Rn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new jn,this.addControl(this.zoomControl))});var Un=In.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=Ne("div",t),a=this.options;return this._addScales(a,t+"-line",n),e.on(a.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=Ne("div",t,n)),e.imperial&&(this._iScale=Ne("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=1e3>t?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t=3.2808399*e,n,a,i;5280<t?(n=t/5280,a=this._getRoundNum(n),this._updateScale(this._iScale,a+" mi",a/n)):(i=this._getRoundNum(t),this._updateScale(this._iScale,i+" ft",i/t))},_updateScale:function(e,t,n){e.style.width=l(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=g(10,(E(e)+"").length-1),n=e/t;return n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1,t*n}}),$n=In.extend({options:{position:"bottomright",prefix:"<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>"},initialize:function(e){A(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),ge(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}}});Rn.mergeOptions({attributionControl:!0}),Rn.addInitHook(function(){this.options.attributionControl&&new $n().addTo(this)});In.Layers=zn,In.Zoom=jn,In.Scale=Un,In.Attribution=$n,Mn.layers=function(e,t,n){return new zn(e,t,n)},Mn.zoom=function(e){return new jn(e)},Mn.scale=function(e){return new Un(e)},Mn.attribution=function(e){return new $n(e)};var Wn=M.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),Hn=en?"touchstart mousedown":"mousedown",qn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Yn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Vn=Lt.extend({options:{clickTolerance:3},initialize:function(e,t,n,a){A(this,a),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(de(this._dragStartTarget,Hn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vn._dragging===this&&this.finishDrag(),pe(this._dragStartTarget,Hn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!Oe(this._element,"leaflet-zoom-anim"))&&!(Vn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(Vn._dragging=this,this._preventOutline&&He(this._element),$e(),An(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new B(e.clientX,e.clientY),de(document,Yn[t.type],this._onMove,this),de(document,qn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&1<t.touches.length)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new B(e.clientX,e.clientY),a=n.subtract(this._startPoint);(a.x||a.y)&&!(T(a.x)+T(a.y)<this.options.clickTolerance)&&(_e(t),!this._moved&&(this.fire("dragstart"),this._moved=!0,this._startPos=Ue(this._element).subtract(a),De(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),De(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,I(this._animRequest),this._lastEvent=t,this._animRequest=R(this._updatePosition,this,!0))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),je(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){t._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){for(var e in Pe(document.body,"leaflet-dragging"),this._lastTarget&&(Pe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yn)pe(document,Yn[e],this._onMove,this),pe(document,qn[e],this._onUp,this);We(),Cn(),this._moved&&this._moving&&(I(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Vn._dragging=!1}}),Gn=(Object.freeze||Object)({simplify:Ye,pointToSegmentDistance:Ve,closestPointOnSegment:function(e,t,n){return tt(e,t,n)},clipSegment:Ke,_getEdgeIntersection:Je,_getBitCode:Qe,_sqClosestPointOnSegment:tt,isFlat:nt,_flat:at}),Zn=(Object.freeze||Object)({clipPolygon:it}),Xn={project:function(e){return new B(e.lng,e.lat)},unproject:function(e){return new H(e.y,e.x)},bounds:new U([-180,-90],[180,90])},Kn={R:6378137,R_MINOR:6356752.314245179,bounds:new U([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(n){var a=o/180,i=this.R,l=n.lat*a,d=this.R_MINOR/i,p=u(1-d*d),e=p*s(l),c=t(o/4-l/2)/g((1-e)/(1+e),p/2);return l=-i*f(N(c,1e-10)),new B(n.lng*a*i,l)},unproject:function(t){for(var l=180/o,d=this.R,r=this.R_MINOR/d,p=u(1-r*r),e=a(-t.y/d),c=o/2-2*n(e),m=0,i=0.1,f;15>m&&1e-7<T(i);m++)f=p*s(c),f=g((1-f)/(1+f),p/2),i=o/2-2*n(e*f)-c,c+=i;return new H(c*l,t.x*l/d)}},Jn=(Object.freeze||Object)({LonLat:Xn,Mercator:Kn,SphericalMercator:wt}),Qn=d({},Ct,{code:"EPSG:3395",projection:Kn,transformation:function(){var e=0.5/(o*Kn.R);return V(e,0.5,-e,0.5)}()}),ea=d({},Ct,{code:"EPSG:4326",projection:Xn,transformation:V(1/180,1,-1/180,0.5)}),ta=d({},At,{projection:Xn,transformation:V(1,0,-1,0),scale:function(e){return g(2,e)},zoom:function(e){return f(e)/r},distance:function(e,t){var n=t.lng-e.lng,a=t.lat-e.lat;return u(n*n+a*a)},infinite:!0}),na;At.Earth=Ct,At.EPSG3395=Qn,At.EPSG3857=Ot,At.EPSG900913=Dt,At.EPSG4326=ea,At.Simple=ta;var aa=Lt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[_(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[_(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Rn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=_(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=_(e);return this._layers[t]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&_(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?xt(e)?e:[e]:[];for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[_(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=_(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=Infinity,t=-Infinity,n=this._getZoomSpan();for(var a in this._zoomBoundLayers){var i=this._zoomBoundLayers[a].options;e=i.minZoom===void 0?e:S(e,i.minZoom),t=i.maxZoom===void 0?t:N(t,i.maxZoom)}this._layersMaxZoom=t===-Infinity?void 0:t,this._layersMinZoom=e===Infinity?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ia=aa.extend({initialize:function(e){this._layers={};var t,n;if(e)for(t=0,n=e.length;t<n;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){for(var e in this._layers)this.removeLayer(this._layers[e]);return this},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),n,a;for(n in this._layers)a=this._layers[n],a[e]&&a[e].apply(a,t);return this},onAdd:function(e){for(var t in this._layers)e.addLayer(this._layers[t])},onRemove:function(e){for(var t in this._layers)e.removeLayer(this._layers[t])},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return _(e)}}),oa=ia.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),ia.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),ia.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new $;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),ra=M.extend({initialize:function(e){A(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(a,e),a},_setIconStyles:function(e,t){var n=this.options,a=n[t+"Size"];"number"==typeof a&&(a=[a,a]);var i=z(a),o=z("shadow"===t&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return nn&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),sa=ra.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return sa.imagePath||(sa.imagePath=this._detectIconPath()),(this.options.imagePath||sa.imagePath)+ra.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=Ne("div","leaflet-default-icon-path",document.body),t=Ee(e,"background-image")||Ee(e,"backgroundImage");return document.body.removeChild(e),t=null===t||0!==t.indexOf("url")?"":t.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""),t}}),la=Wn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Vn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),De(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Pe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,a=Ue(e._icon),i=e._map.layerPointToLatLng(a);n&&je(n,a),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),da=aa.extend({options:{icon:new sa,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(e,t){A(this,t),this._latlng=q(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=q(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),a=!1;n!==this._icon&&(this._icon&&this._removeIcon(),a=!0,e.title&&(n.title=e.title),e.alt&&(n.alt=e.alt)),De(n,t),e.keyboard&&(n.tabIndex="0"),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=e.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(De(i,t),i.alt=""),this._shadow=i,1>e.opacity&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Le(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Le(this._shadow),this._shadow=null},_setPos:function(e){je(this._icon,e),this._shadow&&je(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(De(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),la)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new la(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;Me(this._icon,e),this._shadow&&Me(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),pa=aa.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:0.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return A(this,e),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(en?10:0)}}),ca=pa.extend({options:{fill:!0,radius:10},initialize:function(e,t){A(this,t),this._latlng=q(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=q(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return pa.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),a=[e+n,t+n];this._pxBounds=new U(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),ua=ca.extend({initialize:function(e,t,n){if("number"==typeof t&&(t=d({},n,{radius:t})),A(this,t),this._latlng=q(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new $(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:pa.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,a=n.options.crs;if(a.distance===Ct.distance){var r=o/180,d=this._mRadius/Ct.R/r,u=n.project([t+d,e]),m=n.project([t-d,e]),f=u.add(m).divideBy(2),p=n.unproject(f).lat,g=i((c(d*r)-s(t*r)*s(p*r))/(c(t*r)*c(p*r)))/r;(isNaN(g)||0==g)&&(g=d/c(o/180*t)),this._point=f.subtract(n.getPixelOrigin()),this._radius=isNaN(g)?0:N(l(f.x-n.project([p,e-g]).x),1),this._radiusY=N(l(f.y-u.y),1)}else{var _=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(_).x}this._updateBounds()}}),ma=pa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){A(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=Infinity,n=null,a=tt,o=0,r=this._parts.length,s,l,d;o<r;o++){d=this._parts[o];for(var p=1,i=d.length;p<i;p++){s=d[p-1],l=d[p];var c=a(e,s,l,!0);c<t&&(t=c,n=a(e,s,l))}}return n&&(n.distance=u(t)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e=this._rings[0],t=e.length,n,a,i,o,r,s,l;if(!t)return null;for(n=0,a=0;n<t-1;n++)a+=e[n].distanceTo(e[n+1])/2;if(0===a)return this._map.layerPointToLatLng(e[0]);for(n=0,o=0;n<t-1;n++)if(r=e[n],s=e[n+1],i=r.distanceTo(s),o+=i,o>a)return l=(o-a)/i,this._map.layerPointToLatLng([s.x-l*(s.x-r.x),s.y-l*(s.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=q(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new $,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return nt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=nt(e),a=0,i=e.length;a<i;a++)n?(t[a]=q(e[a]),this._bounds.extend(t[a])):t[a]=this._convertLatLngs(e[a]);return t},_project:function(){var e=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e);var t=this._clickTolerance(),n=new B(t,t);this._bounds.isValid()&&e.isValid()&&(e.min._subtract(n),e.max._add(n),this._pxBounds=e)},_projectLatlngs:function(e,t,n){var a=e[0]instanceof H,o=e.length,r,i;if(a){for(i=[],r=0;r<o;r++)i[r]=this._map.latLngToLayerPoint(e[r]),n.extend(i[r]);t.push(i)}else for(r=0;r<o;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return void(this._parts=this._rings);var t=this._parts,n,a,i,o,r,s,l;for(n=0,i=0,o=this._rings.length;n<o;n++)for(l=this._rings[n],a=0,r=l.length;a<r-1;a++)(s=Ke(l[a],l[a+1],e,a,!0),!!s)&&(t[i]=t[i]||[],t[i].push(s[0]),(s[1]!==l[a+1]||a===r-2)&&(t[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,a=e.length;n<a;n++)e[n]=Ye(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n=this._clickTolerance(),a,i,o,r,s,l;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(a=0,r=this._parts.length;a<r;a++)for(l=this._parts[a],i=0,s=l.length,o=s-1;i<s;o=i++)if((t||0!==i)&&Ve(e,l[o],l[i])<=n)return!0;return!1}});ma._flat=at;var fa=ma.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e=this._rings[0],t=e.length,n,a,i,o,r,s,l,d,p;if(!t)return null;for(s=l=d=0,n=0,a=t-1;n<t;a=n++)i=e[n],o=e[a],r=i.y*o.x-o.y*i.x,l+=(i.x+o.x)*r,d+=(i.y+o.y)*r,s+=3*r;return p=0===s?e[0]:[l/s,d/s],this._map.layerPointToLatLng(p)},_convertLatLngs:function(e){var t=ma.prototype._convertLatLngs.call(this,e),n=t.length;return 2<=n&&t[0]instanceof H&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){ma.prototype._setLatLngs.call(this,e),nt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return nt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new B(t,t);if(e=new U(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return void(this._parts=this._rings);for(var a=0,i=this._rings.length,o;a<i;a++)o=it(this._rings[a],e,!0),o.length&&this._parts.push(o)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,n,a,o,r,i,s,l,d;if(!this._pxBounds.contains(e))return!1;for(r=0,l=this._parts.length;r<l;r++)for(n=this._parts[r],i=0,d=n.length,s=d-1;i<d;s=i++)a=n[i],o=n[s],a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(t=!t);return t||ma.prototype._containsPoint.call(this,e,!0)}}),ga=oa.extend({initialize:function(e,t){A(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=xt(e)?e:e.features,n,a,i;if(t){for(n=0,a=t.length;n<a;n++)i=t[n],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var r=ot(e,o);return r?(r.feature=ct(e),r.defaultOptions=r.options,this.resetStyle(r),o.onEachFeature&&o.onEachFeature(e,r),this.addLayer(r)):this},resetStyle:function(e){return e.options=d({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),_a={toGeoJSON:function(e){return pt(this,{type:"Point",coordinates:lt(this.getLatLng(),e)})}};da.include(_a),ua.include(_a),ca.include(_a),ma.include({toGeoJSON:function(e){var t=!nt(this._latlngs),n=dt(this._latlngs,t?1:0,!1,e);return pt(this,{type:(t?"Multi":"")+"LineString",coordinates:n})}}),fa.include({toGeoJSON:function(e){var t=!nt(this._latlngs),n=t&&!nt(this._latlngs[0]),a=dt(this._latlngs,n?2:t?1:0,!0,e);return t||(a=[a]),pt(this,{type:(n?"Multi":"")+"Polygon",coordinates:a})}}),ia.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),pt(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,a=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON(e);if(n)a.push(i.geometry);else{var o=ct(i);"FeatureCollection"===o.type?a.push.apply(a,o.features):a.push(o)}}}),n?pt(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});var ya=aa.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=W(t),A(this,n)},onAdd:function(){this._image||(this._initImage(),1>this.options.opacity&&this._updateOpacity()),this.options.interactive&&(De(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Le(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&Ce(this._image),this},bringToBack:function(){return this._map&&we(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=W(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._image=Ne("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":"")+(this.options.className||""));e.onselectstart=b,e.onmousemove=b,e.onload=m(this.fire,this,"load"),e.onerror=m(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ze(this._image,n,e)},_reset:function(){var e=this._image,t=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();je(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){Me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)}}),ha=ya.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:Ne("video");if(t.class=t.class||"",t.class+="leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""),t.onselectstart=b,t.onmousemove=b,t.onloadeddata=m(this.fire,this,"load"),!e){xt(this._url)||(this._url=[this._url]),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop;for(var n=0,a;n<this._url.length;n++)a=Ne("source"),a.src=this._url[n],t.appendChild(a)}}}),ba=aa.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){A(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Me(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(Me(this._container,0),this._removeTimeout=setTimeout(m(Le,void 0,this._container),200)):Le(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=q(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ce(this._container),this},bringToBack:function(){return this._map&&we(this._container),this},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=z(this.options.offset),n=this._getAnchor();this._zoomAnimated?je(this._container,e.add(n)):t=t.add(e).add(n);var a=this._containerBottom=-t.y,i=this._containerLeft=-l(this._containerWidth/2)+t.x;this._container.style.bottom=a+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),xa=ba.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){ba.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),!(this._source instanceof pa)&&this._source.on("preclick",me))},onRemove:function(e){ba.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),!(this._source instanceof pa)&&this._source.off("preclick",me))},getEvents:function(){var e=ba.prototype.getEvents.call(this);return(void 0===this.options.closeOnClick?this._map.options.closePopupOnClick:this.options.closeOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=Ne("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=Ne("div",e+"-content-wrapper",t);if(this._contentNode=Ne("div",e+"-content",n),ge(n),fe(this._contentNode),de(n,"contextmenu",me),this._tipContainer=Ne("div",e+"-tip-container",t),this._tip=Ne("div",e+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=Ne("a",e+"-close-button",t);a.href="#close",a.innerHTML="&#215;",de(a,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=S(n,this.options.maxWidth),n=N(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var a=e.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&a>i?(t.height=i+"px",De(e,o)):Pe(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();je(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var e=this._map,t=parseInt(Ee(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,a=this._containerWidth,i=new B(this._containerLeft,-n-this._containerBottom);i._add(Ue(this._container));var o=e.layerPointToContainerPoint(i),r=z(this.options.autoPanPadding),s=z(this.options.autoPanPaddingTopLeft||r),l=z(this.options.autoPanPaddingBottomRight||r),d=e.getSize(),p=0,c=0;o.x+a+l.x>d.x&&(p=o.x+a-d.x+l.x),0>o.x-p-s.x&&(p=o.x-s.x),o.y+n+l.y>d.y&&(c=o.y+n-d.y+l.y),0>o.y-c-s.y&&(c=o.y-s.y),(p||c)&&e.fire("autopanstart").panBy([p,c])}},_onCloseButtonClick:function(t){this._close(),ye(t)},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Rn.mergeOptions({closePopupOnClick:!0}),Rn.include({openPopup:function(e,t,n){return(e instanceof xa||(e=new xa(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e))?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),aa.include({bindPopup:function(e,t){return e instanceof xa?(A(e,t),this._popup=e,e._source=this):((!this._popup||t)&&(this._popup=new xa(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){if(e instanceof aa||(t=e,e=this),e instanceof oa)for(var n in this._layers){e=this._layers[n];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._popup&&this._map&&(this._popup._source=e,this._popup.update(),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup)return this._map?(ye(t),e instanceof pa?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))):void 0},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var va=ba.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:0.9},onAdd:function(e){ba.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){ba.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=ba.prototype.getEvents.call(this);return en&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var e="leaflet-tooltip"+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t=this._map,n=this._container,a=t.latLngToContainerPoint(t.getCenter()),i=t.layerPointToContainerPoint(e),o=this.options.direction,r=n.offsetWidth,s=n.offsetHeight,l=z(this.options.offset),d=this._getAnchor();"top"===o?e=e.add(z(-r/2+l.x,-s+l.y+d.y,!0)):"bottom"===o?e=e.subtract(z(r/2-l.x,-l.y,!0)):"center"===o?e=e.subtract(z(r/2+l.x,s/2-d.y+l.y,!0)):"right"===o||"auto"===o&&i.x<a.x?(o="right",e=e.add(z(l.x+d.x,d.y-s/2+l.y,!0))):(o="left",e=e.subtract(z(r+d.x-l.x,s/2-d.y-l.y,!0))),Pe(n,"leaflet-tooltip-right"),Pe(n,"leaflet-tooltip-left"),Pe(n,"leaflet-tooltip-top"),Pe(n,"leaflet-tooltip-bottom"),De(n,"leaflet-tooltip-"+o),je(n,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Me(this._container,e)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Rn.include({openTooltip:function(e,t,n){return e instanceof va||(e=new va(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:this.addLayer(e)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),aa.include({bindTooltip:function(e,t){return e instanceof va?(A(e,t),this._tooltip=e,e._source=this):((!this._tooltip||t)&&(this._tooltip=new va(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),en&&(n.click=this._openTooltip)),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e,t){if(e instanceof aa||(t=e,e=this),e instanceof oa)for(var n in this._layers){e=this._layers[n];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=e,this._tooltip.update(),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(De(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Pe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e=t.latlng,n,a;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),a=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(e)}});var Sa=ra.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(t.innerHTML=!1===n.html?"":n.html,n.bgPos){var a=z(n.bgPos);t.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});ra.Default=sa;var Ta=aa.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Kt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){A(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),Le(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(Ce(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(we(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(!this._onMove&&(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof B?e:new B(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,n=-e(-Infinity,Infinity),a=0,i=t.length,o;a<i;a++)o=t[a].style.zIndex,t[a]!==this._container&&o&&(n=e(n,+o));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!It){Me(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var a in this._tiles){var i=this._tiles[a];if(i.current&&i.loaded){var o=S(1,(e-i.loaded)/200);Me(i.el,o),1>o?t=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(I(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),1>this.options.opacity&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-T(e-n),this._onUpdateLevel(n)):(Le(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var a=this._levels[e],i=this._map;return a||(a=this._levels[e]={},a.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=t,a.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),a.zoom=e,this._setZoomTransform(a,i.getCenter(),i.getZoom()),b(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var e=this._map.getZoom(),t,n;if(e>this.options.maxZoom||e<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)n=this._tiles[t],n.retain=n.current;for(t in this._tiles)if(n=this._tiles[t],n.current&&!n.active){var a=n.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)Le(this._levels[e].el),this._onRemoveLevel(e),delete this._levels[e];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(e,t,n,a){var i=E(e/2),o=E(t/2),r=n-1,s=new B(+i,+o);s.z=+r;var l=this._tileCoordsToKey(s),d=this._tiles[l];return d&&d.active?(d.retain=!0,!0):(d&&d.loaded&&(d.retain=!0),!!(r>a)&&this._retainParent(i,o,r,a))},_retainChildren:function(e,t,n,a){for(var o=2*e;o<2*e+2;o++)for(var i=2*t,r;i<2*t+2;i++){r=new B(o,i),r.z=n+1;var s=this._tileCoordsToKey(r),l=this._tiles[s];if(l&&l.active){l.retain=!0;continue}else l&&l.loaded&&(l.retain=!0);n+1<a&&this._retainChildren(o,i,n+1,a)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,a){var i=this._clampZoom(l(t));(this.options.maxZoom!==void 0&&i>this.options.maxZoom||this.options.minZoom!==void 0&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;(!a||o)&&(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),i!==void 0&&this._update(e),!n&&this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var a=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(t,n)).round();Xt?ze(e.el,i,a):je(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),a=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[E(e.project([0,t.wrapLng[0]],a).x/n.x),p(e.project([0,t.wrapLng[1]],a).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[E(e.project([t.wrapLat[0],0],a).y/n.x),p(e.project([t.wrapLat[1],0],a).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?N(t._animateToZoom,t.getZoom()):t.getZoom(),a=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*a);return new U(i.subtract(o),i.add(o))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var a=this._getTiledPixelBounds(e),o=this._pxBoundsToTileRange(a),r=o.getCenter(),s=[],l=this.options.keepBuffer,d=new U(o.getBottomLeft().subtract([l,-l]),o.getTopRight().add([l,-l]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var p in this._tiles){var u=this._tiles[p].coords;u.z===this._tileZoom&&d.contains(new B(u.x,u.y))||(this._tiles[p].current=!1)}if(1<T(n-this._tileZoom))return void this._setView(e,n);for(var c=o.min.y;c<=o.max.y;c++)for(var m=o.min.x,i;m<=o.max.x;m++)(i=new B(m,c),i.z=this._tileZoom,!!this._isValidTile(i))&&(this._tiles[this._tileCoordsToKey(i)]||s.push(i));if(s.sort(function(e,t){return e.distanceTo(r)-t.distanceTo(r)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(m=0;m<s.length;m++)this._addTile(s[m],f);this._level.el.appendChild(f)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(e);return W(this.options.bounds).overlaps(a)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToBounds:function(e){var t=this._map,n=this.getTileSize(),a=e.scaleBy(n),i=a.add(n),o=t.unproject(a,e.z),r=t.unproject(i,e.z),s=new $(o,r);return this.options.noWrap||t.wrapLatLngBounds(s),s},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new B(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(Le(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){De(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=b,e.onmousemove=b,It&&1>this.options.opacity&&Me(e,this.options.opacity),Bt&&!zt&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var n=this._getTilePos(e),a=this._tileCoordsToKey(e),i=this.createTile(this._wrapCoords(e),m(this._tileReady,this,e));this._initTile(i),2>this.createTile.length&&R(m(this._tileReady,this,e,null,i)),je(i,n),this._tiles[a]={el:i,coords:e,current:!0},t.appendChild(i),this.fire("tileloadstart",{tile:i,coords:e})},_tileReady:function(e,t,n){if(this._map){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var a=this._tileCoordsToKey(e);n=this._tiles[a],n&&(n.loaded=+new Date,this._map._fadeAnimated?(Me(n.el,0),I(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),!t&&(De(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),It||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))}},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new B(this._wrapX?h(e.x,this._wrapX):e.x,this._wrapY?h(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new U(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),ka=Ta.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,t=A(this,t),t.detectRetina&&nn&&0<t.maxZoom&&(t.tileSize=E(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=N(0,t.minZoom)),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),Bt||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return de(n,"load",m(this._tileOnLoad,this,t,n)),de(n,"error",m(this._tileOnError,this,t,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:nn?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=n),t["-y"]=n}return w(this._url,d(t,this.options))},_tileOnLoad:function(e,t){It?setTimeout(m(e,this,null,t),0):e(null,t)},_tileOnError:function(t,n,a){var e=this.options.errorTileUrl;e&&n.src!==e&&(n.src=e),t(a,n)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,n=this.options.zoomReverse,a=this.options.zoomOffset;return n&&(e=t-e),e+a},_getSubdomain:function(e){var t=T(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=b,t.onerror=b,t.complete||(t.src=vt,Le(t)))}}),Ea=ka.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var n=d({},this.defaultWmsParams);for(var a in t)a in this.options||(n[a]=t[a]);t=A(this,t),n.width=n.height=t.tileSize*(t.detectRetina&&nn?2:1),this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[t]=this._crs.code,ka.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToBounds(e),n=this._crs.project(t.getNorthWest()),a=this._crs.project(t.getSouthEast()),i=(1.3<=this._wmsVersion&&this._crs===ea?[a.y,n.x,n.y,a.x]:[n.x,a.y,a.x,n.y]).join(","),o=ka.prototype.getTileUrl.call(this,e);return o+C(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+i},setParams:function(e,t){return d(this.wmsParams,e),t||this.redraw(),this}});ka.WMS=Ea,mt.wms=function(e,t){return new Ea(e,t)};var Na=aa.extend({options:{padding:0.1},initialize:function(e){A(this,e),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&De(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),a=Ue(this._container),i=this._map.getSize().multiplyBy(0.5+this.options.padding),o=this._map.project(this._center,t),r=this._map.project(e,t),s=r.subtract(o),l=i.multiplyBy(-n).add(a).add(i).subtract(s);Xt?ze(this._container,l,n):je(this._container,l)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new U(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),La=Na.extend({getEvents:function(){var e=Na.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Na.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");de(e,"mousemove",y(this._onMouseMove,32,this),this),de(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),de(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_destroyContainer:function(){delete this._ctx,Le(this._container),pe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;for(var t in this._redrawBounds=null,this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){this._drawnLayers={},Na.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),a=nn?2:1;je(t,e.min),t.width=a*n.x,t.height=a*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",nn&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Na.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[_(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,a=t.prev;n?n.prev=a:this._drawLast=a,a?a.next=n:this._drawFirst=n,delete e._order,delete this._layers[L.stamp(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(e.options.dashArray){var t=e.options.dashArray.split(","),n=[],a;for(a=0;a<t.length;a++)n.push(+t[a]);e.options._dashArray=n}},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var e=this._redrawBounds,t;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)t=a.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n=e._parts,a=n.length,o=this._ctx,r,i,s,l;if(a){for(this._drawnLayers[e._leaflet_id]=e,o.beginPath(),r=0;r<a;r++){for(i=0,s=n[r].length;i<s;i++)l=n[r][i],o[i?"lineTo":"moveTo"](l.x,l.y);t&&o.closePath()}this._fillStroke(o,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,a=e._radius,i=(e._radiusY||a)/a;this._drawnLayers[e._leaflet_id]=e,1!=i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,a,0,2*o,!1),1!=i&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),n=this._drawFirst,a,i;n;n=n.next)a=n.layer,a.options.interactive&&a._containsPoint(e)&&!this._map._draggableMoved(a)&&(i=a);i&&(xe(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Pe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n=this._drawFirst,a,i;n;n=n.next)a=n.layer,a.options.interactive&&a._containsPoint(e)&&(i=a);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(De(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,n,e){this._map._fireDOMEvent(n,e||n.type,t)},_bringToFront:function(e){var t=e._order,n=t.next,a=t.prev;if(n)n.prev=a;else return;a?a.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)},_bringToBack:function(e){var t=e._order,n=t.next,a=t.prev;if(a)a.next=n;else return;n?n.prev=a:a&&(this._drawLast=a),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}),Aa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+" class=\"lvml\">")}}catch(t){return function(e){return document.createElement("<"+e+" xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">")}}}(),Ca=sn?Aa:G,wa=Na.extend({getEvents:function(){var e=Na.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=Ca("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ca("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Le(this._container),pe(this._container),delete this._container,delete this._rootGroup},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Na.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),je(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Ca("path");e.options.className&&De(t,e.options.className),e.options.interactive&&De(t,"leaflet-interactive"),this._updateStyle(e),this._layers[_(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){Le(e._path),e.removeInteractiveTarget(e._path),delete this._layers[_(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Z(e._parts,t))},_updateCircle:function(e){var t=e._point,n=e._radius,a=e._radiusY||n,i="a"+n+","+a+" 0 1,0 ",o=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,o)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){Ce(e._path)},_bringToBack:function(e){we(e._path)}});sn&&wa.include({_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Na.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Aa("shape");De(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Aa("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[_(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;Le(t),e.removeInteractiveTarget(t),delete this._layers[_(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,a=e.options,i=e._container;i.stroked=!!a.stroke,i.filled=!!a.fill,a.stroke?(!t&&(t=e._stroke=Aa("stroke")),i.appendChild(t),t.weight=a.weight+"px",t.color=a.color,t.opacity=a.opacity,t.dashStyle=a.dashArray?xt(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):"",t.endcap=a.lineCap.replace("butt","flat"),t.joinstyle=a.lineJoin):t&&(i.removeChild(t),e._stroke=null),a.fill?(!n&&(n=e._fill=Aa("fill")),i.appendChild(n),n.color=a.fillColor||a.color,n.opacity=a.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=l(e._radius),a=l(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+a+" 0,"+23592600)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){Ce(e._container)},_bringToBack:function(e){we(e._container)}}),Rn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this.options.preferCanvas&&ft()||gt()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=wa&&gt({pane:e})||La&&ft({pane:e}),this._paneRenderers[e]=t),t}});var Oa=fa.extend({initialize:function(e,t){fa.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=W(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});wa.create=Ca,wa.pointsToPath=Z,ga.geometryToLayer=ot,ga.coordsToLatLng=rt,ga.coordsToLatLngs=st,ga.latLngToCoords=lt,ga.latLngsToCoords=dt,ga.getFeature=pt,ga.asFeature=ct,Rn.mergeOptions({boxZoom:!0});var Da=Wn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){de(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){pe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Le(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){return t.shiftKey&&(1===t.which||1===t.button)&&void(this._clearDeferredResetState(),this._resetState(),An(),$e(),this._startPoint=this._map.mouseEventToContainerPoint(t),de(document,{contextmenu:ye,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),De(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new U(this._point,this._startPoint),n=e.getSize();je(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(Le(this._box),Pe(this._container,"leaflet-crosshair")),Cn(),We(),pe(document,{contextmenu:ye,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var e=new $(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Rn.addInitHook("addHandler","boxZoom",Da),Rn.mergeOptions({doubleClickZoom:!0});var Pa=Wn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),a=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-a:n+a;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Rn.addInitHook("addHandler","doubleClickZoom",Pa),Rn.mergeOptions({dragging:!0,inertia:!zt,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:0.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ra=Wn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Vn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}De(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Pe(this._map._container,"leaflet-grab"),Pe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=W(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=S(1,N(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),50<e-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=l(e/2),n=this._initialWorldOffset,a=this._draggable._newPos.x,i=(a-t+n)%e+t-n,o=(a+t+n)%e-t-n,r=T(i+n)<T(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,n=e.options,a=!n.inertia||2>this._times.length;if(e.fire("dragend",t),a)e.fire("moveend");else{var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,r=n.easeLinearity,s=i.multiplyBy(r/o),l=s.distanceTo([0,0]),d=S(n.inertiaMaxSpeed,l),p=s.multiplyBy(d/l),c=d/(n.inertiaDeceleration*r),u=p.multiplyBy(-c/2).round();u.x||u.y?(u=e._limitOffset(u,e.options.maxBounds),R(function(){e.panBy(u,{duration:c,easeLinearity:r,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Rn.addInitHook("addHandler","dragging",Ra),Rn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ia=Wn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;0>=e.tabIndex&&(e.tabIndex="0"),de(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),pe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,a=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(a,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},n=this.keyCodes,a,i;for(a=0,i=n.left.length;a<i;a++)t[n.left[a]]=[-1*e,0];for(a=0,i=n.right.length;a<i;a++)t[n.right[a]]=[e,0];for(a=0,i=n.down.length;a<i;a++)t[n.down[a]]=[0,e];for(a=0,i=n.up.length;a<i;a++)t[n.up[a]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},n=this.keyCodes,a,i;for(a=0,i=n.zoomIn.length;a<i;a++)t[n.zoomIn[a]]=e;for(a=0,i=n.zoomOut.length;a<i;a++)t[n.zoomOut[a]]=-e},_addHooks:function(){de(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){pe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,n=this._map,a;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;a=this._panKeys[e],t.shiftKey&&(a=z(a).multiplyBy(3)),n.panBy(a),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(27===e&&n._popup)n.closePopup();else return;ye(t)}}});Rn.addInitHook("addHandler","keyboard",Ia),Rn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ma=Wn.extend({addHooks:function(){de(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){pe(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=be(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=N(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),a),ye(t)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*f(2/(1+a(-T(i))))/r,s=n?p(o/n)*n:o,l=e._limitZoom(t+(0<this._delta?s:-s))-t;this._delta=0,this._startTime=null;l&&("center"===e.options.scrollWheelZoom?e.setZoom(t+l):e.setZoomAround(this._lastMousePos,t+l))}});Rn.addInitHook("addHandler","scrollWheelZoom",Ma),Rn.mergeOptions({tap:!0,tapTolerance:15});var Fa=Wn.extend({addHooks:function(){de(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){pe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(_e(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new B(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&De(n,"leaflet-active"),this._holdTimeout=setTimeout(m(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),de(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),pe(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&Pe(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new B(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,n){var e=document.createEvent("MouseEvents");e._simulated=!0,n.target._simulatedClick=!0,e.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(e)}});en&&!Qt&&Rn.addInitHook("addHandler","tap",Fa),Rn.mergeOptions({touchZoom:en&&!zt,bounceAtZoomLimits:!0});var Ba=Wn.extend({addHooks:function(){De(this._map._container,"leaflet-touch-zoom"),de(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Pe(this._map._container,"leaflet-touch-zoom"),pe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||2!==t.touches.length||e._animatingZoom||this._zooming)){var n=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(a)._divideBy(2))),this._startDist=n.distanceTo(a),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),de(document,"touchmove",this._onTouchMove,this),de(document,"touchend",this._onTouchEnd,this),_e(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]),i=n.distanceTo(a)/this._startDist;if(this._zoom=e.getScaleZoom(i,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&1>i||this._zoom>e.getMaxZoom()&&1<i)&&(this._zoom=e._limitZoom(this._zoom)),"center"!==e.options.touchZoom){var o=n._add(a)._divideBy(2)._subtract(this._centerPoint);if(1==i&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}else if(this._center=this._startLatLng,1==i)return;this._moved||(e._moveStart(!0),this._moved=!0),I(this._animRequest);var r=m(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=R(r,this,!0),_e(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?void(this._zooming=!1,I(this._animRequest),pe(document,"touchmove",this._onTouchMove),pe(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):void(this._zooming=!1)}});Rn.addInitHook("addHandler","touchZoom",Ba),Rn.BoxZoom=Da,Rn.DoubleClickZoom=Pa,Rn.Drag=Ra,Rn.Keyboard=Ia,Rn.ScrollWheelZoom=Ma,Rn.Tap=Fa,Rn.TouchZoom=Ba;var za=window.L;window.L=e,Object.freeze=_t,e.version="1.2.0",e.noConflict=function(){return window.L=za,this},e.Control=In,e.control=Mn,e.Browser=ln,e.Evented=Lt,e.Mixin={Events:Nt},e.Util=Et,e.Class=M,e.Handler=Wn,e.extend=d,e.bind=m,e.stamp=_,e.setOptions=A,e.DomEvent=Tn,e.DomUtil=Dn,e.PosAnimation=Pn,e.Draggable=Vn,e.LineUtil=Gn,e.PolyUtil=Zn,e.Point=B,e.point=z,e.Bounds=U,e.bounds=j,e.Transformation=Y,e.transformation=V,e.Projection=Jn,e.LatLng=H,e.latLng=q,e.LatLngBounds=$,e.latLngBounds=W,e.CRS=At,e.GeoJSON=ga,e.geoJSON=ut,e.geoJson=ut,e.Layer=aa,e.LayerGroup=ia,e.layerGroup=function(e){return new ia(e)},e.FeatureGroup=oa,e.featureGroup=function(e){return new oa(e)},e.ImageOverlay=ya,e.imageOverlay=function(e,t,n){return new ya(e,t,n)},e.VideoOverlay=ha,e.videoOverlay=function(e,t,n){return new ha(e,t,n)},e.DivOverlay=ba,e.Popup=xa,e.popup=function(e,t){return new xa(e,t)},e.Tooltip=va,e.tooltip=function(e,t){return new va(e,t)},e.Icon=ra,e.icon=function(e){return new ra(e)},e.DivIcon=Sa,e.divIcon=function(e){return new Sa(e)},e.Marker=da,e.marker=function(e,t){return new da(e,t)},e.TileLayer=ka,e.tileLayer=mt,e.GridLayer=Ta,e.gridLayer=function(e){return new Ta(e)},e.SVG=wa,e.svg=gt,e.Renderer=Na,e.Canvas=La,e.canvas=ft,e.Path=pa,e.CircleMarker=ca,e.circleMarker=function(e,t){return new ca(e,t)},e.Circle=ua,e.circle=function(e,t,n){return new ua(e,t,n)},e.Polyline=ma,e.polyline=function(e,t){return new ma(e,t)},e.Polygon=fa,e.polygon=function(e,t){return new fa(e,t)},e.Rectangle=Oa,e.rectangle=function(e,t){return new Oa(e,t)},e.Map=Rn,e.map=function(e,t){return new Rn(e,t)}})},{}],146:[function(e,t,n){(function(e){// distribute, sublicense, and/or sell copies of the Software, and to permit
function t(e,t){for(var n=0,a=e.length-1,i;0<=a;a--)i=e[a],"."===i?e.splice(a,1):".."===i?(e.splice(a,1),n++):n&&(e.splice(a,1),n--);if(t)for(;n--;n)e.unshift("..");return e}function a(e,t){if(e.filter)return e.filter(t);for(var n=[],a=0;a<e.length;a++)t(e[a],a,e)&&n.push(e[a]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",o=!1,r=arguments.length-1,i;-1<=r&&!o;r--){if(i=0<=r?arguments[r]:e.cwd(),"string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");else if(!i)continue;n=i+"/"+n,o="/"===i.charAt(0)}return n=t(a(n.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===r(e,-1);return e=t(a(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(a(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function a(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=a(e.split("/")),r=a(t.split("/")),s=S(o.length,r.length),l=s,d=0;d<s;d++)if(o[d]!==r[d]){l=d;break}for(var i=[],d=l;d<o.length;d++)i.push("..");return i=i.concat(r.slice(l)),i.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],a=t[1];return n||a?(a&&(a=a.substr(0,a.length-1)),n+a):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var r=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:147}],147:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(u===clearTimeout)return clearTimeout(e);if((u===a||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function r(){f&&_&&(f=!1,_.length?m=_.concat(m):g=-1,m.length&&s())}function s(){if(!f){var e=o(r);f=!0;for(var t=m.length;t;){for(_=m,m=[];++g<t;)_&&_[g].run();g=-1,t=m.length}_=null,f=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var p=t.exports={},c,u;(function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{u="function"==typeof clearTimeout?clearTimeout:a}catch(t){u=a}})();var m=[],f=!1,g=-1,_;p.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new l(e,t)),1!==m.length||f||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=d,p.addListener=d,p.once=d,p.off=d,p.removeListener=d,p.removeAllListeners=d,p.emit=d,p.prependListener=d,p.prependOnceListener=d,p.listeners=function(){return[]},p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],148:[function(e,t){t.exports={F:e("./src/F"),T:e("./src/T"),__:e("./src/__"),add:e("./src/add"),addIndex:e("./src/addIndex"),adjust:e("./src/adjust"),all:e("./src/all"),allPass:e("./src/allPass"),always:e("./src/always"),and:e("./src/and"),any:e("./src/any"),anyPass:e("./src/anyPass"),ap:e("./src/ap"),aperture:e("./src/aperture"),append:e("./src/append"),apply:e("./src/apply"),applySpec:e("./src/applySpec"),ascend:e("./src/ascend"),assoc:e("./src/assoc"),assocPath:e("./src/assocPath"),binary:e("./src/binary"),bind:e("./src/bind"),both:e("./src/both"),call:e("./src/call"),chain:e("./src/chain"),clamp:e("./src/clamp"),clone:e("./src/clone"),comparator:e("./src/comparator"),complement:e("./src/complement"),compose:e("./src/compose"),composeK:e("./src/composeK"),composeP:e("./src/composeP"),concat:e("./src/concat"),cond:e("./src/cond"),construct:e("./src/construct"),constructN:e("./src/constructN"),contains:e("./src/contains"),converge:e("./src/converge"),countBy:e("./src/countBy"),curry:e("./src/curry"),curryN:e("./src/curryN"),dec:e("./src/dec"),descend:e("./src/descend"),defaultTo:e("./src/defaultTo"),difference:e("./src/difference"),differenceWith:e("./src/differenceWith"),dissoc:e("./src/dissoc"),dissocPath:e("./src/dissocPath"),divide:e("./src/divide"),drop:e("./src/drop"),dropLast:e("./src/dropLast"),dropLastWhile:e("./src/dropLastWhile"),dropRepeats:e("./src/dropRepeats"),dropRepeatsWith:e("./src/dropRepeatsWith"),dropWhile:e("./src/dropWhile"),either:e("./src/either"),empty:e("./src/empty"),eqBy:e("./src/eqBy"),eqProps:e("./src/eqProps"),equals:e("./src/equals"),evolve:e("./src/evolve"),filter:e("./src/filter"),find:e("./src/find"),findIndex:e("./src/findIndex"),findLast:e("./src/findLast"),findLastIndex:e("./src/findLastIndex"),flatten:e("./src/flatten"),flip:e("./src/flip"),forEach:e("./src/forEach"),forEachObjIndexed:e("./src/forEachObjIndexed"),fromPairs:e("./src/fromPairs"),groupBy:e("./src/groupBy"),groupWith:e("./src/groupWith"),gt:e("./src/gt"),gte:e("./src/gte"),has:e("./src/has"),hasIn:e("./src/hasIn"),head:e("./src/head"),identical:e("./src/identical"),identity:e("./src/identity"),ifElse:e("./src/ifElse"),inc:e("./src/inc"),indexBy:e("./src/indexBy"),indexOf:e("./src/indexOf"),init:e("./src/init"),insert:e("./src/insert"),insertAll:e("./src/insertAll"),intersection:e("./src/intersection"),intersectionWith:e("./src/intersectionWith"),intersperse:e("./src/intersperse"),into:e("./src/into"),invert:e("./src/invert"),invertObj:e("./src/invertObj"),invoker:e("./src/invoker"),is:e("./src/is"),isArrayLike:e("./src/isArrayLike"),isEmpty:e("./src/isEmpty"),isNil:e("./src/isNil"),join:e("./src/join"),juxt:e("./src/juxt"),keys:e("./src/keys"),keysIn:e("./src/keysIn"),last:e("./src/last"),lastIndexOf:e("./src/lastIndexOf"),length:e("./src/length"),lens:e("./src/lens"),lensIndex:e("./src/lensIndex"),lensPath:e("./src/lensPath"),lensProp:e("./src/lensProp"),lift:e("./src/lift"),liftN:e("./src/liftN"),lt:e("./src/lt"),lte:e("./src/lte"),map:e("./src/map"),mapAccum:e("./src/mapAccum"),mapAccumRight:e("./src/mapAccumRight"),mapObjIndexed:e("./src/mapObjIndexed"),match:e("./src/match"),mathMod:e("./src/mathMod"),max:e("./src/max"),maxBy:e("./src/maxBy"),mean:e("./src/mean"),median:e("./src/median"),memoize:e("./src/memoize"),merge:e("./src/merge"),mergeAll:e("./src/mergeAll"),mergeWith:e("./src/mergeWith"),mergeWithKey:e("./src/mergeWithKey"),min:e("./src/min"),minBy:e("./src/minBy"),modulo:e("./src/modulo"),multiply:e("./src/multiply"),nAry:e("./src/nAry"),negate:e("./src/negate"),none:e("./src/none"),not:e("./src/not"),nth:e("./src/nth"),nthArg:e("./src/nthArg"),objOf:e("./src/objOf"),of:e("./src/of"),omit:e("./src/omit"),once:e("./src/once"),or:e("./src/or"),over:e("./src/over"),pair:e("./src/pair"),partial:e("./src/partial"),partialRight:e("./src/partialRight"),partition:e("./src/partition"),path:e("./src/path"),pathEq:e("./src/pathEq"),pathOr:e("./src/pathOr"),pathSatisfies:e("./src/pathSatisfies"),pick:e("./src/pick"),pickAll:e("./src/pickAll"),pickBy:e("./src/pickBy"),pipe:e("./src/pipe"),pipeK:e("./src/pipeK"),pipeP:e("./src/pipeP"),pluck:e("./src/pluck"),prepend:e("./src/prepend"),product:e("./src/product"),project:e("./src/project"),prop:e("./src/prop"),propEq:e("./src/propEq"),propIs:e("./src/propIs"),propOr:e("./src/propOr"),propSatisfies:e("./src/propSatisfies"),props:e("./src/props"),range:e("./src/range"),reduce:e("./src/reduce"),reduceBy:e("./src/reduceBy"),reduceRight:e("./src/reduceRight"),reduceWhile:e("./src/reduceWhile"),reduced:e("./src/reduced"),reject:e("./src/reject"),remove:e("./src/remove"),repeat:e("./src/repeat"),replace:e("./src/replace"),reverse:e("./src/reverse"),scan:e("./src/scan"),sequence:e("./src/sequence"),set:e("./src/set"),slice:e("./src/slice"),sort:e("./src/sort"),sortBy:e("./src/sortBy"),sortWith:e("./src/sortWith"),split:e("./src/split"),splitAt:e("./src/splitAt"),splitEvery:e("./src/splitEvery"),splitWhen:e("./src/splitWhen"),subtract:e("./src/subtract"),sum:e("./src/sum"),symmetricDifference:e("./src/symmetricDifference"),symmetricDifferenceWith:e("./src/symmetricDifferenceWith"),tail:e("./src/tail"),take:e("./src/take"),takeLast:e("./src/takeLast"),takeLastWhile:e("./src/takeLastWhile"),takeWhile:e("./src/takeWhile"),tap:e("./src/tap"),test:e("./src/test"),times:e("./src/times"),toLower:e("./src/toLower"),toPairs:e("./src/toPairs"),toPairsIn:e("./src/toPairsIn"),toString:e("./src/toString"),toUpper:e("./src/toUpper"),transduce:e("./src/transduce"),transpose:e("./src/transpose"),traverse:e("./src/traverse"),trim:e("./src/trim"),tryCatch:e("./src/tryCatch"),type:e("./src/type"),unapply:e("./src/unapply"),unary:e("./src/unary"),uncurryN:e("./src/uncurryN"),unfold:e("./src/unfold"),union:e("./src/union"),unionWith:e("./src/unionWith"),uniq:e("./src/uniq"),uniqBy:e("./src/uniqBy"),uniqWith:e("./src/uniqWith"),unless:e("./src/unless"),unnest:e("./src/unnest"),until:e("./src/until"),update:e("./src/update"),useWith:e("./src/useWith"),values:e("./src/values"),valuesIn:e("./src/valuesIn"),view:e("./src/view"),when:e("./src/when"),where:e("./src/where"),whereEq:e("./src/whereEq"),without:e("./src/without"),xprod:e("./src/xprod"),zip:e("./src/zip"),zipObj:e("./src/zipObj"),zipWith:e("./src/zipWith")}},{"./src/F":149,"./src/T":150,"./src/__":151,"./src/add":152,"./src/addIndex":153,"./src/adjust":154,"./src/all":155,"./src/allPass":156,"./src/always":157,"./src/and":158,"./src/any":159,"./src/anyPass":160,"./src/ap":161,"./src/aperture":162,"./src/append":163,"./src/apply":164,"./src/applySpec":165,"./src/ascend":166,"./src/assoc":167,"./src/assocPath":168,"./src/binary":169,"./src/bind":170,"./src/both":171,"./src/call":172,"./src/chain":173,"./src/clamp":174,"./src/clone":175,"./src/comparator":176,"./src/complement":177,"./src/compose":178,"./src/composeK":179,"./src/composeP":180,"./src/concat":181,"./src/cond":182,"./src/construct":183,"./src/constructN":184,"./src/contains":185,"./src/converge":186,"./src/countBy":187,"./src/curry":188,"./src/curryN":189,"./src/dec":190,"./src/defaultTo":191,"./src/descend":192,"./src/difference":193,"./src/differenceWith":194,"./src/dissoc":195,"./src/dissocPath":196,"./src/divide":197,"./src/drop":198,"./src/dropLast":199,"./src/dropLastWhile":200,"./src/dropRepeats":201,"./src/dropRepeatsWith":202,"./src/dropWhile":203,"./src/either":204,"./src/empty":205,"./src/eqBy":206,"./src/eqProps":207,"./src/equals":208,"./src/evolve":209,"./src/filter":210,"./src/find":211,"./src/findIndex":212,"./src/findLast":213,"./src/findLastIndex":214,"./src/flatten":215,"./src/flip":216,"./src/forEach":217,"./src/forEachObjIndexed":218,"./src/fromPairs":219,"./src/groupBy":220,"./src/groupWith":221,"./src/gt":222,"./src/gte":223,"./src/has":224,"./src/hasIn":225,"./src/head":226,"./src/identical":227,"./src/identity":228,"./src/ifElse":229,"./src/inc":230,"./src/indexBy":231,"./src/indexOf":232,"./src/init":233,"./src/insert":234,"./src/insertAll":235,"./src/intersection":306,"./src/intersectionWith":307,"./src/intersperse":308,"./src/into":309,"./src/invert":310,"./src/invertObj":311,"./src/invoker":312,"./src/is":313,"./src/isArrayLike":314,"./src/isEmpty":315,"./src/isNil":316,"./src/join":317,"./src/juxt":318,"./src/keys":319,"./src/keysIn":320,"./src/last":321,"./src/lastIndexOf":322,"./src/length":323,"./src/lens":324,"./src/lensIndex":325,"./src/lensPath":326,"./src/lensProp":327,"./src/lift":328,"./src/liftN":329,"./src/lt":330,"./src/lte":331,"./src/map":332,"./src/mapAccum":333,"./src/mapAccumRight":334,"./src/mapObjIndexed":335,"./src/match":336,"./src/mathMod":337,"./src/max":338,"./src/maxBy":339,"./src/mean":340,"./src/median":341,"./src/memoize":342,"./src/merge":343,"./src/mergeAll":344,"./src/mergeWith":345,"./src/mergeWithKey":346,"./src/min":347,"./src/minBy":348,"./src/modulo":349,"./src/multiply":350,"./src/nAry":351,"./src/negate":352,"./src/none":353,"./src/not":354,"./src/nth":355,"./src/nthArg":356,"./src/objOf":357,"./src/of":358,"./src/omit":359,"./src/once":360,"./src/or":361,"./src/over":362,"./src/pair":363,"./src/partial":364,"./src/partialRight":365,"./src/partition":366,"./src/path":367,"./src/pathEq":368,"./src/pathOr":369,"./src/pathSatisfies":370,"./src/pick":371,"./src/pickAll":372,"./src/pickBy":373,"./src/pipe":374,"./src/pipeK":375,"./src/pipeP":376,"./src/pluck":377,"./src/prepend":378,"./src/product":379,"./src/project":380,"./src/prop":381,"./src/propEq":382,"./src/propIs":383,"./src/propOr":384,"./src/propSatisfies":385,"./src/props":386,"./src/range":387,"./src/reduce":388,"./src/reduceBy":389,"./src/reduceRight":390,"./src/reduceWhile":391,"./src/reduced":392,"./src/reject":393,"./src/remove":394,"./src/repeat":395,"./src/replace":396,"./src/reverse":397,"./src/scan":398,"./src/sequence":399,"./src/set":400,"./src/slice":401,"./src/sort":402,"./src/sortBy":403,"./src/sortWith":404,"./src/split":405,"./src/splitAt":406,"./src/splitEvery":407,"./src/splitWhen":408,"./src/subtract":409,"./src/sum":410,"./src/symmetricDifference":411,"./src/symmetricDifferenceWith":412,"./src/tail":413,"./src/take":414,"./src/takeLast":415,"./src/takeLastWhile":416,"./src/takeWhile":417,"./src/tap":418,"./src/test":419,"./src/times":420,"./src/toLower":421,"./src/toPairs":422,"./src/toPairsIn":423,"./src/toString":424,"./src/toUpper":425,"./src/transduce":426,"./src/transpose":427,"./src/traverse":428,"./src/trim":429,"./src/tryCatch":430,"./src/type":431,"./src/unapply":432,"./src/unary":433,"./src/uncurryN":434,"./src/unfold":435,"./src/union":436,"./src/unionWith":437,"./src/uniq":438,"./src/uniqBy":439,"./src/uniqWith":440,"./src/unless":441,"./src/unnest":442,"./src/until":443,"./src/update":444,"./src/useWith":445,"./src/values":446,"./src/valuesIn":447,"./src/view":448,"./src/when":449,"./src/where":450,"./src/whereEq":451,"./src/without":452,"./src/xprod":453,"./src/zip":454,"./src/zipObj":455,"./src/zipWith":456}],149:[function(e,t){var n=e("./always");t.exports=n(!1)},{"./always":157}],150:[function(e,t){var n=e("./always");t.exports=n(!0)},{"./always":157}],151:[function(e,t){t.exports={"@@functional/placeholder":!0}},{}],152:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return+e+ +t})},{"./internal/_curry2":250}],153:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry1"),i=e("./curryN");t.exports=a(function(e){return i(e.length,function(){var t=0,a=arguments[0],i=arguments[arguments.length-1],o=Array.prototype.slice.call(arguments,0);return o[0]=function(){var e=a.apply(this,n(arguments,[t,i]));return t+=1,e},e.apply(this,o)})})},{"./curryN":189,"./internal/_concat":245,"./internal/_curry1":249}],154:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry3");t.exports=a(function(e,t,a){if(t>=a.length||t<-a.length)return a;var i=0>t?a.length:0,o=i+t,r=n(a);return r[o]=e(a[o]),r})},{"./internal/_concat":245,"./internal/_curry3":251}],155:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xall");t.exports=n(a(["all"],i,function(e,t){for(var n=0;n<t.length;){if(!e(t[n]))return!1;n+=1}return!0}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xall":286}],156:[function(e,t){var n=e("./internal/_curry1"),a=e("./curryN"),i=e("./max"),o=e("./pluck"),r=e("./reduce");t.exports=n(function(e){return a(r(i,0,o("length",e)),function(){for(var t=0,n=e.length;t<n;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0})})},{"./curryN":189,"./internal/_curry1":249,"./max":338,"./pluck":377,"./reduce":388}],157:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return function(){return e}})},{"./internal/_curry1":249}],158:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e&&t})},{"./internal/_curry2":250}],159:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xany");t.exports=n(a(["any"],i,function(e,t){for(var n=0;n<t.length;){if(e(t[n]))return!0;n+=1}return!1}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xany":287}],160:[function(e,t){var n=e("./internal/_curry1"),a=e("./curryN"),i=e("./max"),o=e("./pluck"),r=e("./reduce");t.exports=n(function(e){return a(r(i,0,o("length",e)),function(){for(var t=0,n=e.length;t<n;){if(e[t].apply(this,arguments))return!0;t+=1}return!1})})},{"./curryN":189,"./internal/_curry1":249,"./max":338,"./pluck":377,"./reduce":388}],161:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry2"),i=e("./internal/_reduce"),o=e("./map");t.exports=a(function(e,t){return"function"==typeof e.ap?e.ap(t):"function"==typeof e?function(n){return e(n)(t(n))}:i(function(e,a){return n(e,o(a,t))},[],e)})},{"./internal/_concat":245,"./internal/_curry2":250,"./internal/_reduce":281,"./map":332}],162:[function(e,t){var n=e("./internal/_aperture"),a=e("./internal/_curry2"),i=e("./internal/_dispatchable"),o=e("./internal/_xaperture");t.exports=a(i([],o,n))},{"./internal/_aperture":237,"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xaperture":288}],163:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry2");t.exports=a(function(e,t){return n(t,[e])})},{"./internal/_concat":245,"./internal/_curry2":250}],164:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e.apply(this,t)})},{"./internal/_curry2":250}],165:[function(e,t){var n=e("./internal/_curry1"),a=e("./apply"),i=e("./curryN"),o=e("./map"),r=e("./max"),s=e("./pluck"),l=e("./reduce"),d=e("./values");t.exports=n(function e(t){return t=o(function(t){return"function"==typeof t?t:e(t)},t),i(l(r,0,s("length",d(t))),function(){var e=arguments;return o(function(t){return a(t,e)},t)})})},{"./apply":164,"./curryN":189,"./internal/_curry1":249,"./map":332,"./max":338,"./pluck":377,"./reduce":388,"./values":446}],166:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var a=e(t),i=e(n);return a<i?-1:a>i?1:0})},{"./internal/_curry3":251}],167:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var a={};for(var i in n)a[i]=n[i];return a[e]=t,a})},{"./internal/_curry3":251}],168:[function(e,t){var n=e("./internal/_curry3"),a=e("./internal/_has"),i=e("./internal/_isArray"),o=e("./internal/_isInteger"),r=e("./assoc");t.exports=n(function e(t,n,s){if(0===t.length)return n;var l=t[0];if(1<t.length){var d=a(l,s)?s[l]:o(t[1])?[]:{};n=e(Array.prototype.slice.call(t,1),n,d)}if(o(l)&&i(s)){var p=[].concat(s);return p[l]=n,p}return r(l,n,s)})},{"./assoc":167,"./internal/_curry3":251,"./internal/_has":261,"./internal/_isArray":265,"./internal/_isInteger":267}],169:[function(e,t){var n=e("./internal/_curry1"),a=e("./nAry");t.exports=n(function(e){return a(2,e)})},{"./internal/_curry1":249,"./nAry":351}],170:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_curry2");t.exports=a(function(e,t){return n(e.length,function(){return e.apply(t,arguments)})})},{"./internal/_arity":238,"./internal/_curry2":250}],171:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isFunction"),i=e("./and"),o=e("./lift");t.exports=n(function(e,t){return a(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:o(i)(e,t)})},{"./and":158,"./internal/_curry2":250,"./internal/_isFunction":266,"./lift":328}],172:[function(e,t){var n=e("./curry");t.exports=n(function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))})},{"./curry":188}],173:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_makeFlat"),o=e("./internal/_xchain"),r=e("./map");t.exports=n(a(["chain"],o,function(e,t){return"function"==typeof t?function(n){return e(t(n))(n)}:i(!1)(r(e,t))}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_makeFlat":274,"./internal/_xchain":289,"./map":332}],174:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<e?e:n>t?t:n})},{"./internal/_curry3":251}],175:[function(e,t){var n=e("./internal/_clone"),a=e("./internal/_curry1");t.exports=a(function(e){return null!=e&&"function"==typeof e.clone?e.clone():n(e,[],[],!0)})},{"./internal/_clone":242,"./internal/_curry1":249}],176:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return function(t,n){return e(t,n)?-1:e(n,t)?1:0}})},{"./internal/_curry1":249}],177:[function(e,t){var n=e("./lift"),a=e("./not");t.exports=n(a)},{"./lift":328,"./not":354}],178:[function(e,t){var n=e("./pipe"),a=e("./reverse");t.exports=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return n.apply(this,a(arguments))}},{"./pipe":374,"./reverse":397}],179:[function(e,t){var n=e("./chain"),a=e("./compose"),i=e("./map");t.exports=function(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var e=Array.prototype.slice.call(arguments),t=e.pop();return a(a.apply(this,i(n,e)),t)}},{"./chain":173,"./compose":178,"./map":332}],180:[function(e,t){var n=e("./pipeP"),a=e("./reverse");t.exports=function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return n.apply(this,a(arguments))}},{"./pipeP":376,"./reverse":397}],181:[function(e,t){var n=e("./internal/_curry2"),i=e("./internal/_isArray"),o=e("./internal/_isFunction"),r=e("./toString");t.exports=n(function(e,t){if(null==e||!o(e.concat))throw new TypeError(r(e)+" does not have a method named \"concat\"");if(i(e)&&!i(t))throw new TypeError(r(t)+" is not an array");return e.concat(t)})},{"./internal/_curry2":250,"./internal/_isArray":265,"./internal/_isFunction":266,"./toString":424}],182:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_curry1"),i=e("./map"),o=e("./max"),r=e("./reduce");t.exports=a(function(e){var t=r(o,0,i(function(e){return e[0].length},e));return n(t,function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}})})},{"./internal/_arity":238,"./internal/_curry1":249,"./map":332,"./max":338,"./reduce":388}],183:[function(e,t){var n=e("./internal/_curry1"),a=e("./constructN");t.exports=n(function(e){return a(e.length,e)})},{"./constructN":184,"./internal/_curry1":249}],184:[function(e,t){var n=e("./internal/_curry2"),a=e("./curry"),i=e("./nAry");t.exports=n(function(e,t){if(10<e)throw new Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:a(i(e,function(e,n,a,i,o,r,s,l,d,p){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,n);case 3:return new t(e,n,a);case 4:return new t(e,n,a,i);case 5:return new t(e,n,a,i,o);case 6:return new t(e,n,a,i,o,r);case 7:return new t(e,n,a,i,o,r,s);case 8:return new t(e,n,a,i,o,r,s,l);case 9:return new t(e,n,a,i,o,r,s,l,d);case 10:return new t(e,n,a,i,o,r,s,l,d,p);}}))})},{"./curry":188,"./internal/_curry2":250,"./nAry":351}],185:[function(e,t){var n=e("./internal/_contains"),a=e("./internal/_curry2");t.exports=a(n)},{"./internal/_contains":246,"./internal/_curry2":250}],186:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_map"),i=e("./curryN"),o=e("./max"),r=e("./pluck"),s=e("./reduce");t.exports=n(function(e,t){return i(s(o,0,r("length",t)),function(){var n=arguments,i=this;return e.apply(i,a(function(e){return e.apply(i,n)},t))})})},{"./curryN":189,"./internal/_curry2":250,"./internal/_map":275,"./max":338,"./pluck":377,"./reduce":388}],187:[function(e,t){var n=e("./reduceBy");t.exports=n(function(e){return e+1},0)},{"./reduceBy":389}],188:[function(e,t){var n=e("./internal/_curry1"),a=e("./curryN");t.exports=n(function(e){return a(e.length,e)})},{"./curryN":189,"./internal/_curry1":249}],189:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_curry1"),i=e("./internal/_curry2"),o=e("./internal/_curryN");t.exports=i(function(e,t){return 1===e?a(t):n(e,o(e,[],t))})},{"./internal/_arity":238,"./internal/_curry1":249,"./internal/_curry2":250,"./internal/_curryN":252}],190:[function(e,t){var n=e("./add");t.exports=n(-1)},{"./add":152}],191:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return null==t||t!==t?e:t})},{"./internal/_curry2":250}],192:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var a=e(t),i=e(n);return a>i?-1:a<i?1:0})},{"./internal/_curry3":251}],193:[function(e,t){var n=e("./internal/_contains"),a=e("./internal/_curry2");t.exports=a(function(e,t){for(var a=[],i=0,o=e.length;i<o;)n(e[i],t)||n(e[i],a)||(a[a.length]=e[i]),i+=1;return a})},{"./internal/_contains":246,"./internal/_curry2":250}],194:[function(e,t){var n=e("./internal/_containsWith"),a=e("./internal/_curry3");t.exports=a(function(e,t,a){for(var i=[],o=0,r=t.length;o<r;)n(e,t[o],a)||n(e,t[o],i)||i.push(t[o]),o+=1;return i})},{"./internal/_containsWith":247,"./internal/_curry3":251}],195:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var n={};for(var a in t)n[a]=t[a];return delete n[e],n})},{"./internal/_curry2":250}],196:[function(e,t){var n=e("./internal/_curry2"),a=e("./assoc"),i=e("./dissoc");t.exports=n(function e(t,n){switch(t.length){case 0:return n;case 1:return i(t[0],n);default:var o=t[0],r=Array.prototype.slice.call(t,1);return null==n[o]?n:a(o,e(r,n[o]),n);}})},{"./assoc":167,"./dissoc":195,"./internal/_curry2":250}],197:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e/t})},{"./internal/_curry2":250}],198:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xdrop"),o=e("./slice");t.exports=n(a(["drop"],i,function(e,t){return o(N(0,e),Infinity,t)}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xdrop":290,"./slice":401}],199:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_dropLast"),o=e("./internal/_xdropLast");t.exports=n(a([],o,i))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_dropLast":254,"./internal/_xdropLast":291}],200:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_dropLastWhile"),o=e("./internal/_xdropLastWhile");t.exports=n(a([],o,i))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_dropLastWhile":255,"./internal/_xdropLastWhile":292}],201:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_dispatchable"),i=e("./internal/_xdropRepeatsWith"),o=e("./dropRepeatsWith"),r=e("./equals");t.exports=n(a([],i(r),o(r)))},{"./dropRepeatsWith":202,"./equals":208,"./internal/_curry1":249,"./internal/_dispatchable":253,"./internal/_xdropRepeatsWith":293}],202:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xdropRepeatsWith"),o=e("./last");/**
 * Returns a new list without any consecutively repeating elements. Equality is
 * determined by applying the supplied predicate to each pair of consecutive elements. The
 * first element in a series of equal elements will be preserved.
 *
 * Acts as a transducer if a transformer is given in list position.
 *
 * @func
 * @memberOf R
 * @since v0.14.0
 * @category List
 * @sig (a, a -> Boolean) -> [a] -> [a]
 * @param {Function} pred A predicate used to test whether two items are equal.
 * @param {Array} list The array to consider.
 * @return {Array} `list` without repeating elements.
 * @see R.transduce
 * @example
 *
 *      var l = [1, -1, 1, 3, 4, -4, -4, -5, 5, 3, 3];
 *      R.dropRepeatsWith(R.eqBy(Math.abs), l); //=> [1, 3, 4, -5, 3]
 */t.exports=n(a([],i,function(e,t){var n=[],a=1,i=t.length;if(0!==i)for(n[0]=t[0];a<i;)e(o(n),t[a])||(n[n.length]=t[a]),a+=1;return n}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xdropRepeatsWith":293,"./last":321}],203:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xdropWhile");t.exports=n(a(["dropWhile"],i,function(e,t){for(var n=0,a=t.length;n<a&&e(t[n]);)n+=1;return Array.prototype.slice.call(t,n)}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xdropWhile":294}],204:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isFunction"),i=e("./lift"),o=e("./or");t.exports=n(function(e,t){return a(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:i(o)(e,t)})},{"./internal/_curry2":250,"./internal/_isFunction":266,"./lift":328,"./or":361}],205:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_isArguments"),i=e("./internal/_isArray"),o=e("./internal/_isObject"),r=e("./internal/_isString");t.exports=n(function(e){return null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():i(e)?[]:r(e)?"":o(e)?{}:a(e)?function(){return arguments}():void 0})},{"./internal/_curry1":249,"./internal/_isArguments":264,"./internal/_isArray":265,"./internal/_isObject":269,"./internal/_isString":272}],206:[function(e,t){var n=e("./internal/_curry3"),a=e("./equals");t.exports=n(function(e,t,n){return a(e(t),e(n))})},{"./equals":208,"./internal/_curry3":251}],207:[function(e,t){var n=e("./internal/_curry3"),a=e("./equals");t.exports=n(function(e,t,n){return a(t[e],n[e])})},{"./equals":208,"./internal/_curry3":251}],208:[function(e,t){var n=e("./internal/_curry2"),i=e("./internal/_equals");t.exports=n(function(e,t){return i(e,t,[],[])})},{"./internal/_curry2":250,"./internal/_equals":256}],209:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function e(t,n){var a={},i,o,r;for(o in n)i=t[o],r=typeof i,a[o]="function"===r?i(n[o]):i&&"object"===r?e(i,n[o]):n[o];return a})},{"./internal/_curry2":250}],210:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_filter"),o=e("./internal/_isObject"),r=e("./internal/_reduce"),s=e("./internal/_xfilter"),l=e("./keys");t.exports=n(a(["filter"],s,function(e,t){return o(t)?r(function(n,a){return e(t[a])&&(n[a]=t[a]),n},{},l(t)):i(e,t)}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_filter":257,"./internal/_isObject":269,"./internal/_reduce":281,"./internal/_xfilter":296,"./keys":319}],211:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xfind");t.exports=n(a(["find"],i,function(e,t){for(var n=0,a=t.length;n<a;){if(e(t[n]))return t[n];n+=1}}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xfind":297}],212:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xfindIndex");t.exports=n(a([],i,function(e,t){for(var n=0,a=t.length;n<a;){if(e(t[n]))return n;n+=1}return-1}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xfindIndex":298}],213:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xfindLast");t.exports=n(a([],i,function(e,t){for(var n=t.length-1;0<=n;){if(e(t[n]))return t[n];n-=1}}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xfindLast":299}],214:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xfindLastIndex");t.exports=n(a([],i,function(e,t){for(var n=t.length-1;0<=n;){if(e(t[n]))return n;n-=1}return-1}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xfindLastIndex":300}],215:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_makeFlat");t.exports=n(a(!0))},{"./internal/_curry1":249,"./internal/_makeFlat":274}],216:[function(e,t){var n=e("./internal/_curry1"),a=e("./curry");t.exports=n(function(e){return a(function(t,n){var a=Array.prototype.slice.call(arguments,0);return a[0]=n,a[1]=t,e.apply(this,a)})})},{"./curry":188,"./internal/_curry1":249}],217:[function(e,t){var n=e("./internal/_checkForMethod"),a=e("./internal/_curry2");t.exports=a(n("forEach",function(e,t){for(var n=t.length,a=0;a<n;)e(t[a]),a+=1;return t}))},{"./internal/_checkForMethod":241,"./internal/_curry2":250}],218:[function(e,t){var n=e("./internal/_curry2"),a=e("./keys");t.exports=n(function(e,t){for(var n=a(t),i=0;i<n.length;){var o=n[i];e(t[o],o,t),i+=1}return t})},{"./internal/_curry2":250,"./keys":319}],219:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){for(var t={},n=0;n<e.length;)t[e[n][0]]=e[n][1],n+=1;return t})},{"./internal/_curry1":249}],220:[function(e,t){var n=e("./internal/_checkForMethod"),a=e("./internal/_curry2"),i=e("./reduceBy");t.exports=a(n("groupBy",i(function(e,t){return null==e&&(e=[]),e.push(t),e},null)))},{"./internal/_checkForMethod":241,"./internal/_curry2":250,"./reduceBy":389}],221:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=[],a=0,i=t.length;a<i;){for(var o=a+1;o<i&&e(t[a],t[o]);)o+=1;n.push(t.slice(a,o)),a=o}return n})},{"./internal/_curry2":250}],222:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e>t})},{"./internal/_curry2":250}],223:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e>=t})},{"./internal/_curry2":250}],224:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_has");t.exports=n(a)},{"./internal/_curry2":250,"./internal/_has":261}],225:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e in t})},{"./internal/_curry2":250}],226:[function(e,t){var n=e("./nth");t.exports=n(0)},{"./nth":355}],227:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t})},{"./internal/_curry2":250}],228:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_identity");t.exports=n(a)},{"./internal/_curry1":249,"./internal/_identity":262}],229:[function(e,t){var n=e("./internal/_curry3"),a=e("./curryN");t.exports=n(function(e,t,n){return a(N(e.length,t.length,n.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)})})},{"./curryN":189,"./internal/_curry3":251}],230:[function(e,t){var n=e("./add");t.exports=n(1)},{"./add":152}],231:[function(e,t){var n=e("./reduceBy");t.exports=n(function(e,t){return t},null)},{"./reduceBy":389}],232:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_indexOf"),i=e("./internal/_isArray");t.exports=n(function(e,t){return"function"!=typeof t.indexOf||i(t)?a(t,e,0):t.indexOf(e)})},{"./internal/_curry2":250,"./internal/_indexOf":263,"./internal/_isArray":265}],233:[function(e,t){var n=e("./slice");t.exports=n(0,-1)},{"./slice":401}],234:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){e=e<n.length&&0<=e?e:n.length;var a=Array.prototype.slice.call(n,0);return a.splice(e,0,t),a})},{"./internal/_curry3":251}],235:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e=e<n.length&&0<=e?e:n.length,[].concat(Array.prototype.slice.call(n,0,e),t,Array.prototype.slice.call(n,e))})},{"./internal/_curry3":251}],236:[function(e,t){var n=e("./_contains");t.exports=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}function t(e,t,a){var i=typeof e,o,r;switch(i){case"string":case"number":return 0===e&&1/e==-Infinity?!!a._items["-0"]||(t&&(a._items["-0"]=!0),!1):null===a._nativeSet?i in a._items?!!(e in a._items[i])||(t&&(a._items[i][e]=!0),!1):(t&&(a._items[i]={},a._items[i][e]=!0),!1):t?(o=a._nativeSet.size,a._nativeSet.add(e),r=a._nativeSet.size,r===o):a._nativeSet.has(e);case"boolean":if(i in a._items){var s=e?1:0;return!!a._items[i][s]||(t&&(a._items[i][s]=!0),!1)}return t&&(a._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return null===a._nativeSet?i in a._items?!!n(e,a._items[i])||(t&&a._items[i].push(e),!1):(t&&(a._items[i]=[e]),!1):t?(o=a._nativeSet.size,a._nativeSet.add(e),r=a._nativeSet.size,r===o):a._nativeSet.has(e);case"undefined":return!!a._items[i]||(t&&(a._items[i]=!0),!1);case"object":if(null===e)return!!a._items["null"]||(t&&(a._items["null"]=!0),!1);default:return i=Object.prototype.toString.call(e),i in a._items?!!n(e,a._items[i])||(t&&a._items[i].push(e),!1):(t&&(a._items[i]=[e]),!1);}}return e.prototype.add=function(e){return!t(e,!0,this)},e.prototype.has=function(e){return t(e,!1,this)},e}()},{"./_contains":246}],237:[function(e,t){t.exports=function(e,t){for(var n=0,a=t.length-(e-1),i=Array(0<=a?a:0);n<a;)i[n]=Array.prototype.slice.call(t,n,n+e),n+=1;return i}},{}],238:[function(e,t){t.exports=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(){return t.apply(this,arguments)};case 2:return function(){return t.apply(this,arguments)};case 3:return function(){return t.apply(this,arguments)};case 4:return function(){return t.apply(this,arguments)};case 5:return function(){return t.apply(this,arguments)};case 6:return function(){return t.apply(this,arguments)};case 7:return function(){return t.apply(this,arguments)};case 8:return function(){return t.apply(this,arguments)};case 9:return function(){return t.apply(this,arguments)};case 10:return function(){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten");}}},{}],239:[function(e,t){t.exports=function(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}},{}],240:[function(e,t){var n=e("./_objectAssign");t.exports="function"==typeof Object.assign?Object.assign:n},{"./_objectAssign":276}],241:[function(e,t){var n=e("./_isArray");t.exports=function(e,t){return function(){var a=arguments.length;if(0===a)return t();var i=arguments[a-1];return n(i)||"function"!=typeof i[e]?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,a-1))}}},{"./_isArray":265}],242:[function(e,t){var n=e("./_cloneRegExp"),a=e("../type");t.exports=function e(t,i,o,r){var s=function(n){for(var a=i.length,s=0;s<a;){if(t===i[s])return o[s];s+=1}for(var l in i[s+1]=t,o[s+1]=n,t)n[l]=r?e(t[l],i,o,!0):t[l];return n};switch(a(t)){case"Object":return s({});case"Array":return s([]);case"Date":return new Date(t.valueOf());case"RegExp":return n(t);default:return t;}}},{"../type":431,"./_cloneRegExp":243}],243:[function(e,t){t.exports=function(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}},{}],244:[function(e,t){t.exports=function(e){return function(){return!e.apply(this,arguments)}}},{}],245:[function(e,t){t.exports=function(e,t){e=e||[],t=t||[];var n=e.length,a=t.length,i=[],o;for(o=0;o<n;)i[i.length]=e[o],o+=1;for(o=0;o<a;)i[i.length]=t[o],o+=1;return i}},{}],246:[function(e,t){var n=e("./_indexOf");t.exports=function(e,t){return 0<=n(t,e,0)}},{"./_indexOf":263}],247:[function(e,t){t.exports=function(e,t,n){for(var a=0,i=n.length;a<i;){if(e(t,n[a]))return!0;a+=1}return!1}},{}],248:[function(e,t){var n=e("./_arity"),a=e("./_curry2");t.exports=function(e){return a(function(t,a){return n(N(0,t.length-a.length),function(){return t.apply(this,e(a,arguments))})})}},{"./_arity":238,"./_curry2":250}],249:[function(e,t){var n=e("./_isPlaceholder");t.exports=function(e){return function t(i){return 0===arguments.length||n(i)?t:e.apply(this,arguments)}}},{"./_isPlaceholder":270}],250:[function(e,t){var n=e("./_curry1"),i=e("./_isPlaceholder");t.exports=function(e){return function t(o,a){switch(arguments.length){case 0:return t;case 1:return i(o)?t:n(function(t){return e(o,t)});default:return i(o)&&i(a)?t:i(o)?n(function(t){return e(t,a)}):i(a)?n(function(t){return e(o,t)}):e(o,a);}}}},{"./_curry1":249,"./_isPlaceholder":270}],251:[function(e,t){var n=e("./_curry1"),i=e("./_curry2"),o=e("./_isPlaceholder");t.exports=function(e){return function t(r,a,s){switch(arguments.length){case 0:return t;case 1:return o(r)?t:i(function(t,n){return e(r,t,n)});case 2:return o(r)&&o(a)?t:o(r)?i(function(t,n){return e(t,a,n)}):o(a)?i(function(t,n){return e(r,t,n)}):n(function(t){return e(r,a,t)});default:return o(r)&&o(a)&&o(s)?t:o(r)&&o(a)?i(function(t,n){return e(t,n,s)}):o(r)&&o(s)?i(function(t,n){return e(t,a,n)}):o(a)&&o(s)?i(function(t,n){return e(r,t,n)}):o(r)?n(function(t){return e(t,a,s)}):o(a)?n(function(t){return e(r,t,s)}):o(s)?n(function(t){return e(r,a,t)}):e(r,a,s);}}}},{"./_curry1":249,"./_curry2":250,"./_isPlaceholder":270}],252:[function(e,t){var n=e("./_arity"),a=e("./_isPlaceholder");t.exports=function e(t,i,o){return function(){for(var r=[],s=0,l=t,d=0;d<i.length||s<arguments.length;){var p;d<i.length&&(!a(i[d])||s>=arguments.length)?p=i[d]:(p=arguments[s],s+=1),r[d]=p,a(p)||(l-=1),d+=1}return 0>=l?o.apply(this,r):n(l,e(t,r,o))}}},{"./_arity":238,"./_isPlaceholder":270}],253:[function(e,t){var n=e("./_isArray"),a=e("./_isTransformer");t.exports=function(e,t,i){return function(){if(0===arguments.length)return i();var o=Array.prototype.slice.call(arguments,0),r=o.pop();if(!n(r)){for(var s=0;s<e.length;){if("function"==typeof r[e[s]])return r[e[s]].apply(r,o);s+=1}if(a(r)){var l=t.apply(null,o);return l(r)}}return i.apply(this,arguments)}}},{"./_isArray":265,"./_isTransformer":273}],254:[function(e,t){var a=e("../take");t.exports=function(e,t){return a(e<t.length?t.length-e:0,t)}},{"../take":414}],255:[function(e,t){t.exports=function(e,t){for(var n=t.length-1;0<=n&&e(t[n]);)n-=1;return Array.prototype.slice.call(t,0,n+1)}},{}],256:[function(e,t){var n=e("./_arrayFromIterator"),i=e("./_functionName"),o=e("./_has"),r=e("../identical"),s=e("../keys"),l=e("../type");t.exports=function e(t,d,p,c){if(r(t,d))return!0;if(l(t)!==l(d))return!1;if(null==t||null==d)return!1;if("function"==typeof t.equals||"function"==typeof d.equals)return"function"==typeof t.equals&&t.equals(d)&&"function"==typeof d.equals&&d.equals(t);switch(l(t)){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===i(t.constructor))return t===d;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof d&&r(t.valueOf(),d.valueOf())))return!1;break;case"Date":if(!r(t.valueOf(),d.valueOf()))return!1;break;case"Error":return t.name===d.name&&t.message===d.message;case"RegExp":if(t.source!==d.source||t.global!==d.global||t.ignoreCase!==d.ignoreCase||t.multiline!==d.multiline||t.sticky!==d.sticky||t.unicode!==d.unicode)return!1;break;case"Map":case"Set":if(!e(n(t.entries()),n(d.entries()),p,c))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":break;case"ArrayBuffer":break;default:return!1;}var u=s(t);if(u.length!==s(d).length)return!1;for(var m=p.length-1;0<=m;){if(p[m]===t)return c[m]===d;m-=1}for(p.push(t),c.push(d),m=u.length-1;0<=m;){var f=u[m];if(!(o(f,d)&&e(d[f],t[f],p,c)))return!1;m-=1}return p.pop(),c.pop(),!0}},{"../identical":227,"../keys":319,"../type":431,"./_arrayFromIterator":239,"./_functionName":260,"./_has":261}],257:[function(e,t){t.exports=function(e,t){for(var n=0,a=t.length,i=[];n<a;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}},{}],258:[function(e,t){var n=e("./_forceReduced"),a=e("./_reduce"),i=e("./_xfBase"),o=e("../isArrayLike");t.exports=function(){var e=function(e){return{"@@transducer/init":i.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,a){var i=e["@@transducer/step"](t,a);return i["@@transducer/reduced"]?n(i):i}}};return function(t){var n=e(t);return{"@@transducer/init":i.init,"@@transducer/result":function(e){return n["@@transducer/result"](e)},"@@transducer/step":function(e,t){return o(t)?a(n,e,t):a(n,e,[t])}}}}()},{"../isArrayLike":314,"./_forceReduced":259,"./_reduce":281,"./_xfBase":295}],259:[function(e,t){t.exports=function(e){return{"@@transducer/value":e,"@@transducer/reduced":!0}}},{}],260:[function(e,t){t.exports=function(e){var t=(e+"").match(/^function (\w*)/);return null==t?"":t[1]}},{}],261:[function(e,t){t.exports=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)}},{}],262:[function(e,t){t.exports=function(e){return e}},{}],263:[function(e,t){var n=e("../equals");t.exports=function(e,t,i){var o,r;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(o=1/t;i<e.length;){if(r=e[i],0===r&&1/r===o)return i;i+=1}return-1}if(t!==t){for(;i<e.length;){if(r=e[i],"number"==typeof r&&r!==r)return i;i+=1}return-1}return e.indexOf(t,i);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,i);case"object":if(null===t)return e.indexOf(t,i);}for(;i<e.length;){if(n(e[i],t))return i;i+=1}return-1}},{"../equals":208}],264:[function(e,t){var n=e("./_has");t.exports=function(){var e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return n("callee",e)}}()},{"./_has":261}],265:[function(e,t){t.exports=Array.isArray||function(e){return null!=e&&0<=e.length&&"[object Array]"===Object.prototype.toString.call(e)}},{}],266:[function(e,t){t.exports=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],267:[function(e,t){t.exports=Number.isInteger||function(e){return e<<0===e}},{}],268:[function(e,t){t.exports=function(e){return"[object Number]"===Object.prototype.toString.call(e)}},{}],269:[function(e,t){t.exports=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{}],270:[function(e,t){t.exports=function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}},{}],271:[function(e,t){t.exports=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{}],272:[function(e,t){t.exports=function(e){return"[object String]"===Object.prototype.toString.call(e)}},{}],273:[function(e,t){t.exports=function(e){return"function"==typeof e["@@transducer/step"]}},{}],274:[function(e,t){var n=e("../isArrayLike");t.exports=function(e){return function t(a){for(var i=[],o=0,r=a.length,s,l,d;o<r;){if(n(a[o]))for(s=e?t(a[o]):a[o],d=0,l=s.length;d<l;)i[i.length]=s[d],d+=1;else i[i.length]=a[o];o+=1}return i}}},{"../isArrayLike":314}],275:[function(e,t){t.exports=function(e,t){for(var n=0,a=t.length,i=Array(a);n<a;)i[n]=e(t[n]),n+=1;return i}},{}],276:[function(e,t){var n=e("./_has");t.exports=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),a=1,i=arguments.length;a<i;){var o=arguments[a];if(null!=o)for(var r in o)n(r,o)&&(t[r]=o[r]);a+=1}return t}},{"./_has":261}],277:[function(e,t){t.exports=function(e){return[e]}},{}],278:[function(e,t){t.exports=function(e,t){return function(){return t.call(this,e.apply(this,arguments))}}},{}],279:[function(e,t){t.exports=function(e,t){return function(){var n=this;return e.apply(n,arguments).then(function(e){return t.call(n,e)})}}},{}],280:[function(e,t){t.exports=function(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return"\""+t.replace(/"/g,"\\\"")+"\""}},{}],281:[function(e,t){var n=e("./_xwrap"),a=e("../bind"),i=e("../isArrayLike");t.exports=function(){function e(e,t,n){for(var a=0,i=n.length;a<i;){if(t=e["@@transducer/step"](t,n[a]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}a+=1}return e["@@transducer/result"](t)}function t(e,t,n){for(var a=n.next();!a.done;){if(t=e["@@transducer/step"](t,a.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}a=n.next()}return e["@@transducer/result"](t)}function o(e,t,n){return e["@@transducer/result"](n.reduce(a(e["@@transducer/step"],e),t))}var r="undefined"==typeof Symbol?"@@iterator":Symbol.iterator;return function(a,s,l){if("function"==typeof a&&(a=n(a)),i(l))return e(a,s,l);if("function"==typeof l.reduce)return o(a,s,l);if(null!=l[r])return t(a,s,l[r]());if("function"==typeof l.next)return t(a,s,l);throw new TypeError("reduce: list must be array or iterable")}}()},{"../bind":170,"../isArrayLike":314,"./_xwrap":305}],282:[function(e,t){t.exports=function(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}},{}],283:[function(e,t){var n=e("./_assign"),a=e("./_identity"),i=e("./_isTransformer"),o=e("../isArrayLike"),r=e("../objOf");t.exports=function(){var e={"@@transducer/init":Array,"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":a},t={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":a},s={"@@transducer/init":Object,"@@transducer/step":function(e,t){return n(e,o(t)?r(t[0],t[1]):t)},"@@transducer/result":a};return function(n){if(i(n))return n;if(o(n))return e;if("string"==typeof n)return t;if("object"==typeof n)return s;throw new Error("Cannot create transformer for "+n)}}()},{"../isArrayLike":314,"../objOf":357,"./_assign":240,"./_identity":262,"./_isTransformer":273}],284:[function(e,t){t.exports=function(){var e=function(e){return(10>e?"0":"")+e};return"function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(t){return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}()},{}],285:[function(e,t){var n=e("./_contains"),a=e("./_map"),i=e("./_quote"),o=e("./_toISOString"),r=e("../keys"),s=e("../reject");t.exports=function e(t,l){var d=function(a){var i=l.concat([t]);return n(a,i)?"<Circular>":e(a,i)},p=function(e,t){return a(function(t){return i(t)+": "+d(e[t])},t.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+a(d,t).join(", ")+"))";case"[object Array]":return"["+a(d,t).concat(p(t,s(function(e){return /^\d+$/.test(e)},r(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+d(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?d(NaN):i(o(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+d(t.valueOf())+")":1/t==-Infinity?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+d(t.valueOf())+")":i(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var c=t.toString();if("[object Object]"!==c)return c}return"{"+p(t,r(t)).join(", ")+"}";}}},{"../keys":319,"../reject":393,"./_contains":246,"./_map":275,"./_quote":280,"./_toISOString":284}],286:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=a(this.xf["@@transducer/step"](e,!1))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_reduced":282,"./_xfBase":295}],287:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=a(this.xf["@@transducer/step"](e,!0))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_reduced":282,"./_xfBase":295}],288:[function(e,t){var n=e("./_concat"),a=e("./_curry2"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=Array(e)}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return n(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},a(function(t,n){return new e(t,n)})}()},{"./_concat":245,"./_curry2":250,"./_xfBase":295}],289:[function(e,t){var n=e("./_curry2"),a=e("./_flatCat"),i=e("../map");t.exports=n(function(e,t){return i(e,a(t))})},{"../map":332,"./_curry2":250,"./_flatCat":258}],290:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){return 0<this.n?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_xfBase":295}],291:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=Array(e)}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_xfBase":295}],292:[function(e,t){var n=e("./_curry2"),a=e("./_reduce"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.f=e,this.retained=[],this.xf=t}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},e.prototype.flush=function(e,t){return e=a(this.xf["@@transducer/step"],e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},e.prototype.retain=function(e,t){return this.retained.push(t),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_reduce":281,"./_xfBase":295}],293:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(n=!0):this.seenFirstValue=!0,this.lastValue=t,n?e:this.xf["@@transducer/step"](e,t)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_xfBase":295}],294:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_xfBase":295}],295:[function(e,t){t.exports={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}}},{}],296:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_xfBase":295}],297:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=a(this.xf["@@transducer/step"](e,t))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_reduced":282,"./_xfBase":295}],298:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=a(this.xf["@@transducer/step"](e,this.idx))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_reduced":282,"./_xfBase":295}],299:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_xfBase":295}],300:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_xfBase":295}],301:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_xfBase":295}],302:[function(e,t){var n=e("./_curryN"),a=e("./_has"),i=e("./_xfBase");t.exports=function(){function e(e,t,n,a){this.valueFn=e,this.valueAcc=t,this.keyFn=n,this.xf=a,this.inputs={}}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){for(var t in this.inputs)if(a(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]),e["@@transducer/reduced"])){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=this.keyFn(t);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],t),e},n(4,[],function(t,n,a,i){return new e(t,n,a,i)})}()},{"./_curryN":252,"./_has":261,"./_xfBase":295}],303:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=i.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var n=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.i>=this.n?a(n):n},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_reduced":282,"./_xfBase":295}],304:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=i.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):a(e)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":250,"./_reduced":282,"./_xfBase":295}],305:[function(e,t){t.exports=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},function(t){return new e(t)}}()},{}],306:[function(e,t){var n=e("./internal/_contains"),a=e("./internal/_curry2"),i=e("./internal/_filter"),o=e("./flip"),r=e("./uniq");t.exports=a(function(e,t){var a,s;return e.length>t.length?(a=e,s=t):(a=t,s=e),r(i(o(n)(a),s))})},{"./flip":216,"./internal/_contains":246,"./internal/_curry2":250,"./internal/_filter":257,"./uniq":438}],307:[function(e,t){var n=e("./internal/_containsWith"),a=e("./internal/_curry3"),i=e("./uniqWith");t.exports=a(function(e,t,a){var o,r;t.length>a.length?(o=t,r=a):(o=a,r=t);for(var s=[],l=0;l<r.length;)n(e,r[l],o)&&(s[s.length]=r[l]),l+=1;return i(e,s)})},{"./internal/_containsWith":247,"./internal/_curry3":251,"./uniqWith":440}],308:[function(e,t){var n=e("./internal/_checkForMethod"),a=e("./internal/_curry2");t.exports=a(n("intersperse",function(e,t){for(var n=[],a=0,i=t.length;a<i;)a==i-1?n.push(t[a]):n.push(t[a],e),a+=1;return n}))},{"./internal/_checkForMethod":241,"./internal/_curry2":250}],309:[function(e,t){var n=e("./internal/_clone"),a=e("./internal/_curry3"),i=e("./internal/_isTransformer"),o=e("./internal/_reduce"),r=e("./internal/_stepCat");t.exports=a(function(e,t,a){return i(e)?o(t(e),e["@@transducer/init"](),a):o(t(r(e)),n(e,[],[],!1),a)})},{"./internal/_clone":242,"./internal/_curry3":251,"./internal/_isTransformer":273,"./internal/_reduce":281,"./internal/_stepCat":283}],310:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_has"),i=e("./keys");t.exports=n(function(e){for(var t=i(e),n=t.length,o=0,r={};o<n;){var s=t[o],l=e[s],d=a(l,r)?r[l]:r[l]=[];d[d.length]=s,o+=1}return r})},{"./internal/_curry1":249,"./internal/_has":261,"./keys":319}],311:[function(e,t){var n=e("./internal/_curry1"),a=e("./keys");t.exports=n(function(e){for(var t=a(e),n=t.length,i=0,o={};i<n;){var r=t[i];o[e[r]]=r,i+=1}return o})},{"./internal/_curry1":249,"./keys":319}],312:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isFunction"),i=e("./curryN"),o=e("./toString");t.exports=n(function(e,t){return i(e+1,function(){var n=arguments[e];if(null!=n&&a(n[t]))return n[t].apply(n,Array.prototype.slice.call(arguments,0,e));throw new TypeError(o(n)+" does not have a method named \""+t+"\"")})})},{"./curryN":189,"./internal/_curry2":250,"./internal/_isFunction":266,"./toString":424}],313:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return null!=t&&t.constructor===e||t instanceof e})},{"./internal/_curry2":250}],314:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_isArray"),i=e("./internal/_isString");t.exports=n(function(e){return!!a(e)||!!e&&!("object"!=typeof e)&&!i(e)&&(1===e.nodeType?!!e.length:!(0!==e.length)||!!(0<e.length)&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))})},{"./internal/_curry1":249,"./internal/_isArray":265,"./internal/_isString":272}],315:[function(e,t){var n=e("./internal/_curry1"),a=e("./empty"),i=e("./equals");t.exports=n(function(e){return null!=e&&i(e,a(e))})},{"./empty":205,"./equals":208,"./internal/_curry1":249}],316:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return null==e})},{"./internal/_curry1":249}],317:[function(e,t){var n=e("./invoker");t.exports=n(1,"join")},{"./invoker":312}],318:[function(e,t){var n=e("./internal/_curry1"),a=e("./converge");t.exports=n(function(e){return a(function(){return Array.prototype.slice.call(arguments,0)},e)})},{"./converge":186,"./internal/_curry1":249}],319:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_has"),i=e("./internal/_isArguments");t.exports=function(){var e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],o=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),r=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};return"function"!=typeof Object.keys||o?n(function(n){if(Object(n)!==n)return[];var s=[],l=o&&i(n),d,p;for(d in n)a(d,n)&&(!l||"length"!==d)&&(s[s.length]=d);if(e)for(p=t.length-1;0<=p;)d=t[p],a(d,n)&&!r(s,d)&&(s[s.length]=d),p-=1;return s}):n(function(e){return Object(e)===e?Object.keys(e):[]})}()},{"./internal/_curry1":249,"./internal/_has":261,"./internal/_isArguments":264}],320:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){var t=[],n;for(n in e)t[t.length]=n;return t})},{"./internal/_curry1":249}],321:[function(e,t){var n=e("./nth");t.exports=n(-1)},{"./nth":355}],322:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isArray"),i=e("./equals");t.exports=n(function(e,t){if("function"==typeof t.lastIndexOf&&!a(t))return t.lastIndexOf(e);for(var n=t.length-1;0<=n;){if(i(t[n],e))return n;n-=1}return-1})},{"./equals":208,"./internal/_curry2":250,"./internal/_isArray":265}],323:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_isNumber");t.exports=n(function(e){return null!=e&&a(e.length)?e.length:NaN})},{"./internal/_curry1":249,"./internal/_isNumber":268}],324:[function(e,t){var n=e("./internal/_curry2"),a=e("./map");t.exports=n(function(e,t){return function(n){return function(i){return a(function(e){return t(e,i)},n(e(i)))}}})},{"./internal/_curry2":250,"./map":332}],325:[function(e,t){var n=e("./internal/_curry1"),a=e("./lens"),i=e("./nth"),o=e("./update");t.exports=n(function(e){return a(i(e),o(e))})},{"./internal/_curry1":249,"./lens":324,"./nth":355,"./update":444}],326:[function(e,t){var n=e("./internal/_curry1"),a=e("./assocPath"),i=e("./lens"),o=e("./path");t.exports=n(function(e){return i(o(e),a(e))})},{"./assocPath":168,"./internal/_curry1":249,"./lens":324,"./path":367}],327:[function(e,t){var n=e("./internal/_curry1"),a=e("./assoc"),i=e("./lens"),o=e("./prop");t.exports=n(function(e){return i(o(e),a(e))})},{"./assoc":167,"./internal/_curry1":249,"./lens":324,"./prop":381}],328:[function(e,t){var n=e("./internal/_curry1"),a=e("./liftN");t.exports=n(function(e){return a(e.length,e)})},{"./internal/_curry1":249,"./liftN":329}],329:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_reduce"),i=e("./ap"),o=e("./curryN"),r=e("./map");t.exports=n(function(e,t){var n=o(e,t);return o(e,function(){return a(i,r(n,arguments[0]),Array.prototype.slice.call(arguments,1))})})},{"./ap":161,"./curryN":189,"./internal/_curry2":250,"./internal/_reduce":281,"./map":332}],330:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e<t})},{"./internal/_curry2":250}],331:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e<=t})},{"./internal/_curry2":250}],332:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_map"),o=e("./internal/_reduce"),r=e("./internal/_xmap"),s=e("./curryN"),l=e("./keys");t.exports=n(a(["map"],r,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return s(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return o(function(n,a){return n[a]=e(t[a]),n},{},l(t));default:return i(e,t);}}))},{"./curryN":189,"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_map":275,"./internal/_reduce":281,"./internal/_xmap":301,"./keys":319}],333:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=0,i=n.length,o=[],r=[t];a<i;)r=e(r[0],n[a]),o[a]=r[1],a+=1;return[r[0],o]})},{"./internal/_curry3":251}],334:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=n.length-1,i=[],o=[t];0<=a;)o=e(n[a],o[0]),i[a]=o[1],a-=1;return[i,o[0]]})},{"./internal/_curry3":251}],335:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_reduce"),i=e("./keys");t.exports=n(function(e,t){return a(function(n,a){return n[a]=e(t[a],a,t),n},{},i(t))})},{"./internal/_curry2":250,"./internal/_reduce":281,"./keys":319}],336:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t.match(e)||[]})},{"./internal/_curry2":250}],337:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isInteger");t.exports=n(function(e,t){return a(e)?!a(t)||1>t?NaN:(e%t+t)%t:NaN})},{"./internal/_curry2":250,"./internal/_isInteger":267}],338:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t>e?t:e})},{"./internal/_curry2":250}],339:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)>e(t)?n:t})},{"./internal/_curry3":251}],340:[function(e,t){var n=e("./internal/_curry1"),a=e("./sum");t.exports=n(function(e){return a(e)/e.length})},{"./internal/_curry1":249,"./sum":410}],341:[function(e,t){var n=e("./internal/_curry1"),a=e("./mean");t.exports=n(function(e){var t=e.length;if(0===t)return NaN;var n=2-t%2,i=(t-n)/2;return a(Array.prototype.slice.call(e,0).sort(function(e,t){return e<t?-1:e>t?1:0}).slice(i,i+n))})},{"./internal/_curry1":249,"./mean":340}],342:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_curry1"),i=e("./internal/_has"),o=e("./toString");t.exports=a(function(e){var t={};return n(e.length,function(){var n=o(arguments);return i(n,t)||(t[n]=e.apply(this,arguments)),t[n]})})},{"./internal/_arity":238,"./internal/_curry1":249,"./internal/_has":261,"./toString":424}],343:[function(e,t){var n=e("./internal/_assign"),a=e("./internal/_curry2");t.exports=a(function(e,t){return n({},e,t)})},{"./internal/_assign":240,"./internal/_curry2":250}],344:[function(e,t){var n=e("./internal/_assign"),a=e("./internal/_curry1");t.exports=a(function(e){return n.apply(null,[{}].concat(e))})},{"./internal/_assign":240,"./internal/_curry1":249}],345:[function(e,t){var n=e("./internal/_curry3"),a=e("./mergeWithKey");t.exports=n(function(e,t,n){return a(function(t,n,a){return e(n,a)},t,n)})},{"./internal/_curry3":251,"./mergeWithKey":346}],346:[function(e,t){var n=e("./internal/_curry3"),a=e("./internal/_has");t.exports=n(function(e,t,n){var i={},o;for(o in t)a(o,t)&&(i[o]=a(o,n)?e(o,t[o],n[o]):t[o]);for(o in n)a(o,n)&&!a(o,i)&&(i[o]=n[o]);return i})},{"./internal/_curry3":251,"./internal/_has":261}],347:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t<e?t:e})},{"./internal/_curry2":250}],348:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)<e(t)?n:t})},{"./internal/_curry3":251}],349:[function(e,t){var n=e("./internal/_curry2");/**
 * Divides the first parameter by the second and returns the remainder. Note
 * that this function preserves the JavaScript-style behavior for modulo. For
 * mathematical modulo see `mathMod`.
 *
 * @func
 * @memberOf R
 * @since v0.1.1
 * @category Math
 * @sig Number -> Number -> Number
 * @param {Number} a The value to the divide.
 * @param {Number} b The pseudo-modulus
 * @return {Number} The result of `b % a`.
 * @see R.mathMod
 * @example
 *
 *      R.modulo(17, 3); //=> 2
 *      // JS behavior:
 *      R.modulo(-17, 3); //=> -2
 *      R.modulo(17, -3); //=> 2
 *
 *      var isOdd = R.modulo(R.__, 2);
 *      isOdd(42); //=> 0
 *      isOdd(21); //=> 1
 */t.exports=n(function(e,t){return e%t})},{"./internal/_curry2":250}],350:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e*t})},{"./internal/_curry2":250}],351:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,n){return t.call(this,e,n)};case 3:return function(e,n,a){return t.call(this,e,n,a)};case 4:return function(e,n,a,i){return t.call(this,e,n,a,i)};case 5:return function(e,n,a,i,o){return t.call(this,e,n,a,i,o)};case 6:return function(e,n,a,i,o,r){return t.call(this,e,n,a,i,o,r)};case 7:return function(e,n,a,i,o,r,s){return t.call(this,e,n,a,i,o,r,s)};case 8:return function(e,n,a,i,o,r,s,l){return t.call(this,e,n,a,i,o,r,s,l)};case 9:return function(e,n,a,i,o,r,s,l,d){return t.call(this,e,n,a,i,o,r,s,l,d)};case 10:return function(e,n,a,i,o,r,s,l,d,p){return t.call(this,e,n,a,i,o,r,s,l,d,p)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten");}})},{"./internal/_curry2":250}],352:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return-e})},{"./internal/_curry1":249}],353:[function(e,t){var n=e("./internal/_complement"),a=e("./internal/_curry2"),i=e("./internal/_dispatchable"),o=e("./internal/_xany"),r=e("./any");t.exports=a(n(i(["any"],o,r)))},{"./any":159,"./internal/_complement":244,"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xany":287}],354:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return!e})},{"./internal/_curry1":249}],355:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isString");t.exports=n(function(e,t){var n=0>e?t.length+e:e;return a(t)?t.charAt(n):t[n]})},{"./internal/_curry2":250,"./internal/_isString":272}],356:[function(e,t){var n=e("./internal/_curry1"),a=e("./curryN"),i=e("./nth");t.exports=n(function(e){var t=0>e?1:e+1;return a(t,function(){return i(e,arguments)})})},{"./curryN":189,"./internal/_curry1":249,"./nth":355}],357:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var n={};return n[e]=t,n})},{"./internal/_curry2":250}],358:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_of");t.exports=n(a)},{"./internal/_curry1":249,"./internal/_of":277}],359:[function(e,t){var n=e("./internal/_contains"),a=e("./internal/_curry2");t.exports=a(function(e,t){var a={};for(var i in t)n(i,e)||(a[i]=t[i]);return a})},{"./internal/_contains":246,"./internal/_curry2":250}],360:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_curry1");t.exports=a(function(e){var t=!1,a;return n(e.length,function(){return t?a:(t=!0,a=e.apply(this,arguments),a)})})},{"./internal/_arity":238,"./internal/_curry1":249}],361:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e||t})},{"./internal/_curry2":250}],362:[function(e,t){var n=e("./internal/_curry3");t.exports=function(){var e=function(t){return{value:t,map:function(n){return e(n(t))}}};return n(function(t,n,a){return t(function(t){return e(n(t))})(a).value})}()},{"./internal/_curry3":251}],363:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return[e,t]})},{"./internal/_curry2":250}],364:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_createPartialApplicator");t.exports=a(n)},{"./internal/_concat":245,"./internal/_createPartialApplicator":248}],365:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_createPartialApplicator"),i=e("./flip");t.exports=a(i(n))},{"./flip":216,"./internal/_concat":245,"./internal/_createPartialApplicator":248}],366:[function(e,t){var n=e("./filter"),a=e("./juxt"),i=e("./reject");t.exports=a([n,i])},{"./filter":210,"./juxt":318,"./reject":393}],367:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=t,a=0;a<e.length;){if(null==n)return;n=n[e[a]],a+=1}return n})},{"./internal/_curry2":250}],368:[function(e,t){var n=e("./internal/_curry3"),a=e("./equals"),i=e("./path");t.exports=n(function(e,t,n){return a(i(e,n),t)})},{"./equals":208,"./internal/_curry3":251,"./path":367}],369:[function(e,t){var n=e("./internal/_curry3"),a=e("./defaultTo"),i=e("./path");t.exports=n(function(e,t,n){return a(e,i(t,n))})},{"./defaultTo":191,"./internal/_curry3":251,"./path":367}],370:[function(e,t){var n=e("./internal/_curry3"),a=e("./path");t.exports=n(function(e,t,n){return 0<t.length&&e(a(t,n))})},{"./internal/_curry3":251,"./path":367}],371:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n={},a=0;a<e.length;)e[a]in t&&(n[e[a]]=t[e[a]]),a+=1;return n})},{"./internal/_curry2":250}],372:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n={},a=0,i=e.length;a<i;){var o=e[a];n[o]=t[o],a+=1}return n})},{"./internal/_curry2":250}],373:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var n={};for(var a in t)e(t[a],a,t)&&(n[a]=t[a]);return n})},{"./internal/_curry2":250}],374:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_pipe"),i=e("./reduce"),o=e("./tail");t.exports=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return n(arguments[0].length,i(a,arguments[0],o(arguments)))}},{"./internal/_arity":238,"./internal/_pipe":278,"./reduce":388,"./tail":413}],375:[function(e,t){var n=e("./composeK"),a=e("./reverse");t.exports=function(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return n.apply(this,a(arguments))}},{"./composeK":179,"./reverse":397}],376:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_pipeP"),i=e("./reduce"),o=e("./tail");t.exports=function(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return n(arguments[0].length,i(a,arguments[0],o(arguments)))}},{"./internal/_arity":238,"./internal/_pipeP":279,"./reduce":388,"./tail":413}],377:[function(e,t){var n=e("./internal/_curry2"),a=e("./map"),i=e("./prop");t.exports=n(function(e,t){return a(i(e),t)})},{"./internal/_curry2":250,"./map":332,"./prop":381}],378:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry2");t.exports=a(function(e,t){return n([e],t)})},{"./internal/_concat":245,"./internal/_curry2":250}],379:[function(e,t){var n=e("./multiply"),a=e("./reduce");t.exports=a(n,1)},{"./multiply":350,"./reduce":388}],380:[function(e,t){var n=e("./internal/_map"),a=e("./identity"),i=e("./pickAll"),o=e("./useWith");t.exports=o(n,[i,a])},{"./identity":228,"./internal/_map":275,"./pickAll":372,"./useWith":445}],381:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t[e]})},{"./internal/_curry2":250}],382:[function(e,t){var n=e("./internal/_curry3"),a=e("./equals");t.exports=n(function(e,t,n){return a(t,n[e])})},{"./equals":208,"./internal/_curry3":251}],383:[function(e,t){var n=e("./internal/_curry3"),a=e("./is");t.exports=n(function(e,t,n){return a(e,n[t])})},{"./internal/_curry3":251,"./is":313}],384:[function(e,t){var n=e("./internal/_curry3"),a=e("./internal/_has");t.exports=n(function(e,t,n){return null!=n&&a(t,n)?n[t]:e})},{"./internal/_curry3":251,"./internal/_has":261}],385:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n[t])})},{"./internal/_curry3":251}],386:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=e.length,a=[],i=0;i<n;)a[i]=t[e[i]],i+=1;return a})},{"./internal/_curry2":250}],387:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isNumber");t.exports=n(function(e,t){if(!(a(e)&&a(t)))throw new TypeError("Both arguments to range must be numbers");for(var i=[],o=e;o<t;)i.push(o),o+=1;return i})},{"./internal/_curry2":250,"./internal/_isNumber":268}],388:[function(e,t){var n=e("./internal/_curry3"),a=e("./internal/_reduce");t.exports=n(a)},{"./internal/_curry3":251,"./internal/_reduce":281}],389:[function(e,t){var n=e("./internal/_curryN"),a=e("./internal/_dispatchable"),i=e("./internal/_has"),o=e("./internal/_reduce"),r=e("./internal/_xreduceBy");t.exports=n(4,[],a([],r,function(e,t,n,a){return o(function(a,o){var r=n(o);return a[r]=e(i(r,a)?a[r]:t,o),a},{},a)}))},{"./internal/_curryN":252,"./internal/_dispatchable":253,"./internal/_has":261,"./internal/_reduce":281,"./internal/_xreduceBy":302}],390:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=n.length-1;0<=a;)t=e(n[a],t),a-=1;return t})},{"./internal/_curry3":251}],391:[function(e,t){var n=e("./internal/_curryN"),i=e("./internal/_reduce"),a=e("./internal/_reduced");t.exports=n(4,[],function(e,t,n,o){return i(function(n,i){return e(n,i)?t(n,i):a(n)},n,o)})},{"./internal/_curryN":252,"./internal/_reduce":281,"./internal/_reduced":282}],392:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_reduced");t.exports=n(a)},{"./internal/_curry1":249,"./internal/_reduced":282}],393:[function(e,t){var n=e("./internal/_complement"),a=e("./internal/_curry2"),i=e("./filter");t.exports=a(function(e,t){return i(n(e),t)})},{"./filter":210,"./internal/_complement":244,"./internal/_curry2":250}],394:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var a=Array.prototype.slice.call(n,0);return a.splice(e,t),a})},{"./internal/_curry3":251}],395:[function(e,t){var n=e("./internal/_curry2"),a=e("./always"),i=e("./times");t.exports=n(function(e,t){return i(a(e),t)})},{"./always":157,"./internal/_curry2":250,"./times":420}],396:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return n.replace(e,t)})},{"./internal/_curry3":251}],397:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_isString");t.exports=n(function(e){return a(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()})},{"./internal/_curry1":249,"./internal/_isString":272}],398:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=0,i=n.length,o=[t];a<i;)t=e(t,n[a]),o[a+1]=t,a+=1;return o})},{"./internal/_curry3":251}],399:[function(e,t){var n=e("./internal/_curry2"),a=e("./ap"),i=e("./map"),o=e("./prepend"),r=e("./reduceRight");t.exports=n(function(e,t){return"function"==typeof t.sequence?t.sequence(e):r(function(e,t){return a(i(o,e),t)},e([]),t)})},{"./ap":161,"./internal/_curry2":250,"./map":332,"./prepend":378,"./reduceRight":390}],400:[function(e,t){var n=e("./internal/_curry3"),a=e("./always"),i=e("./over");t.exports=n(function(e,t,n){return i(e,a(t),n)})},{"./always":157,"./internal/_curry3":251,"./over":362}],401:[function(e,t){var n=e("./internal/_checkForMethod"),a=e("./internal/_curry3");t.exports=a(n("slice",function(e,t,n){return Array.prototype.slice.call(n,e,t)}))},{"./internal/_checkForMethod":241,"./internal/_curry3":251}],402:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return Array.prototype.slice.call(t,0).sort(e)})},{"./internal/_curry2":250}],403:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return Array.prototype.slice.call(t,0).sort(function(t,n){var a=e(t),i=e(n);return a<i?-1:a>i?1:0})})},{"./internal/_curry2":250}],404:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return Array.prototype.slice.call(t,0).sort(function(t,n){for(var a=0,o=0;0==a&&o<e.length;)a=e[o](t,n),o+=1;return a})})},{"./internal/_curry2":250}],405:[function(e,t){var n=e("./invoker");t.exports=n(1,"split")},{"./invoker":312}],406:[function(e,t){var n=e("./internal/_curry2"),a=e("./length"),i=e("./slice");t.exports=n(function(e,t){return[i(0,e,t),i(e,a(t),t)]})},{"./internal/_curry2":250,"./length":323,"./slice":401}],407:[function(e,t){var n=e("./internal/_curry2"),a=e("./slice");t.exports=n(function(e,t){if(0>=e)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],i=0;i<t.length;)n.push(a(i,i+=e,t));return n})},{"./internal/_curry2":250,"./slice":401}],408:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=0,a=t.length,i=[];n<a&&!e(t[n]);)i.push(t[n]),n+=1;return[i,Array.prototype.slice.call(t,n)]})},{"./internal/_curry2":250}],409:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return+e-+t})},{"./internal/_curry2":250}],410:[function(e,t){var n=e("./add"),a=e("./reduce");t.exports=a(n,0)},{"./add":152,"./reduce":388}],411:[function(e,t){var n=e("./internal/_curry2"),a=e("./concat"),i=e("./difference");t.exports=n(function(e,t){return a(i(e,t),i(t,e))})},{"./concat":181,"./difference":193,"./internal/_curry2":250}],412:[function(e,t){var n=e("./internal/_curry3"),a=e("./concat"),i=e("./differenceWith");t.exports=n(function(e,t,n){return a(i(e,t,n),i(e,n,t))})},{"./concat":181,"./differenceWith":194,"./internal/_curry3":251}],413:[function(e,t){var n=e("./internal/_checkForMethod"),a=e("./internal/_curry1"),i=e("./slice");t.exports=a(n("tail",i(1,Infinity)))},{"./internal/_checkForMethod":241,"./internal/_curry1":249,"./slice":401}],414:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xtake"),o=e("./slice");t.exports=n(a(["take"],i,function(e,t){return o(0,0>e?Infinity:e,t)}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xtake":303,"./slice":401}],415:[function(e,t){var n=e("./internal/_curry2"),a=e("./drop");t.exports=n(function(e,t){return a(0<=e?t.length-e:0,t)})},{"./drop":198,"./internal/_curry2":250}],416:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=t.length-1;0<=n&&e(t[n]);)n-=1;return Array.prototype.slice.call(t,n+1)})},{"./internal/_curry2":250}],417:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xtakeWhile");t.exports=n(a(["takeWhile"],i,function(e,t){for(var n=0,a=t.length;n<a&&e(t[n]);)n+=1;return Array.prototype.slice.call(t,0,n)}))},{"./internal/_curry2":250,"./internal/_dispatchable":253,"./internal/_xtakeWhile":304}],418:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e(t),t})},{"./internal/_curry2":250}],419:[function(e,t){var n=e("./internal/_cloneRegExp"),a=e("./internal/_curry2"),i=e("./internal/_isRegExp"),o=e("./toString");t.exports=a(function(e,t){if(!i(e))throw new TypeError("\u2018test\u2019 requires a value of type RegExp as its first argument; received "+o(e));return n(e).test(t)})},{"./internal/_cloneRegExp":243,"./internal/_curry2":250,"./internal/_isRegExp":271,"./toString":424}],420:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var a=+t,i=0,o;if(0>a||isNaN(a))throw new RangeError("n must be a non-negative number");for(o=Array(a);i<a;)o[i]=e(i),i+=1;return o})},{"./internal/_curry2":250}],421:[function(e,t){var n=e("./invoker");t.exports=n(0,"toLowerCase")},{"./invoker":312}],422:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_has");t.exports=n(function(e){var t=[];for(var n in e)a(n,e)&&(t[t.length]=[n,e[n]]);return t})},{"./internal/_curry1":249,"./internal/_has":261}],423:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){var t=[];for(var n in e)t[t.length]=[n,e[n]];return t})},{"./internal/_curry1":249}],424:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_toString");t.exports=n(function(e){return a(e,[])})},{"./internal/_curry1":249,"./internal/_toString":285}],425:[function(e,t){var n=e("./invoker");t.exports=n(0,"toUpperCase")},{"./invoker":312}],426:[function(e,t){var n=e("./internal/_reduce"),a=e("./internal/_xwrap"),i=e("./curryN");t.exports=i(4,function(e,t,i,o){return n(e("function"==typeof t?a(t):t),i,o)})},{"./curryN":189,"./internal/_reduce":281,"./internal/_xwrap":305}],427:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){for(var t=0,n=[];t<e.length;){for(var a=e[t],i=0;i<a.length;)"undefined"==typeof n[i]&&(n[i]=[]),n[i].push(a[i]),i+=1;t+=1}return n})},{"./internal/_curry1":249}],428:[function(e,t){var n=e("./internal/_curry3"),a=e("./map"),i=e("./sequence");t.exports=n(function(e,t,n){return i(e,a(t,n))})},{"./internal/_curry3":251,"./map":332,"./sequence":399}],429:[function(e,t){var n=e("./internal/_curry1");t.exports=function(){var e="function"==typeof String.prototype.trim;return n(function(e){var t=/^[	\n\v\f\r \u2028\u2029][	\n\v\f\r \u2028\u2029]*/,n=/[	\n\v\f\r \u2028\u2029][	\n\v\f\r \u2028\u2029]*$/;return e.replace(t,"").replace(n,"")})}()},{"./internal/_curry1":249}],430:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_concat"),i=e("./internal/_curry2");t.exports=i(function(e,t){return n(e.length,function(){try{return e.apply(this,arguments)}catch(n){return t.apply(this,a([n],arguments))}})})},{"./internal/_arity":238,"./internal/_concat":245,"./internal/_curry2":250}],431:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return null===e?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)})},{"./internal/_curry1":249}],432:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}})},{"./internal/_curry1":249}],433:[function(e,t){var n=e("./internal/_curry1"),a=e("./nAry");t.exports=n(function(e){return a(1,e)})},{"./internal/_curry1":249,"./nAry":351}],434:[function(e,t){var n=e("./internal/_curry2"),a=e("./curryN");t.exports=n(function(e,t){return a(e,function(){for(var n=1,a=t,i=0,o;n<=e&&"function"==typeof a;)o=n===e?arguments.length:i+a.length,a=a.apply(this,Array.prototype.slice.call(arguments,i,o)),n+=1,i=o;return a})})},{"./curryN":189,"./internal/_curry2":250}],435:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=e(t),a=[];n&&n.length;)a[a.length]=n[0],n=e(n[1]);return a})},{"./internal/_curry2":250}],436:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry2"),i=e("./compose"),o=e("./uniq");t.exports=a(i(o,n))},{"./compose":178,"./internal/_concat":245,"./internal/_curry2":250,"./uniq":438}],437:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry3"),i=e("./uniqWith");t.exports=a(function(e,t,a){return i(e,n(t,a))})},{"./internal/_concat":245,"./internal/_curry3":251,"./uniqWith":440}],438:[function(e,t){var n=e("./identity"),a=e("./uniqBy");t.exports=a(n)},{"./identity":228,"./uniqBy":439}],439:[function(e,t){var n=e("./internal/_Set"),a=e("./internal/_curry2");t.exports=a(function(e,t){for(var a=new n,i=[],o=0,r,s;o<t.length;)s=t[o],r=e(s),a.add(r)&&i.push(s),o+=1;return i})},{"./internal/_Set":236,"./internal/_curry2":250}],440:[function(e,t){var n=e("./internal/_containsWith"),a=e("./internal/_curry2");t.exports=a(function(e,t){for(var a=0,i=t.length,o=[],r;a<i;)r=t[a],n(e,r,o)||(o[o.length]=r),a+=1;return o})},{"./internal/_containsWith":247,"./internal/_curry2":250}],441:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)?n:t(n)})},{"./internal/_curry3":251}],442:[function(e,t){var n=e("./internal/_identity"),a=e("./chain");t.exports=a(n)},{"./chain":173,"./internal/_identity":262}],443:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=n;!e(a);)a=t(a);return a})},{"./internal/_curry3":251}],444:[function(e,t){var n=e("./internal/_curry3"),a=e("./adjust"),i=e("./always");t.exports=n(function(e,t,n){return a(i(t),e,n)})},{"./adjust":154,"./always":157,"./internal/_curry3":251}],445:[function(e,t){var n=e("./internal/_curry2"),a=e("./curryN");t.exports=n(function(e,t){return a(t.length,function(){for(var n=[],a=0;a<t.length;)n.push(t[a].call(this,arguments[a])),a+=1;return e.apply(this,n.concat(Array.prototype.slice.call(arguments,t.length)))})})},{"./curryN":189,"./internal/_curry2":250}],446:[function(e,t){var n=e("./internal/_curry1"),a=e("./keys");t.exports=n(function(e){for(var t=a(e),n=t.length,i=[],o=0;o<n;)i[o]=e[t[o]],o+=1;return i})},{"./internal/_curry1":249,"./keys":319}],447:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){var t=[],n;for(n in e)t[t.length]=e[n];return t})},{"./internal/_curry1":249}],448:[function(e,t){var n=e("./internal/_curry2");t.exports=function(){var e=function(e){return{value:e,map:function(){return this}}};return n(function(t,n){return t(e)(n).value})}()},{"./internal/_curry2":250}],449:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)?t(n):n})},{"./internal/_curry3":251}],450:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_has");t.exports=n(function(e,t){for(var n in e)if(a(n,e)&&!e[n](t[n]))return!1;return!0})},{"./internal/_curry2":250,"./internal/_has":261}],451:[function(e,t){var n=e("./internal/_curry2"),a=e("./equals"),i=e("./map"),o=e("./where");t.exports=n(function(e,t){return o(i(a,e),t)})},{"./equals":208,"./internal/_curry2":250,"./map":332,"./where":450}],452:[function(e,t){var n=e("./internal/_contains"),a=e("./internal/_curry2"),i=e("./flip"),o=e("./reject");t.exports=a(function(e,t){return o(i(n)(e),t)})},{"./flip":216,"./internal/_contains":246,"./internal/_curry2":250,"./reject":393}],453:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=0,a=e.length,i=t.length,o=[],r;n<a;){for(r=0;r<i;)o[o.length]=[e[n],t[r]],r+=1;n+=1}return o})},{"./internal/_curry2":250}],454:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=[],a=0,i=S(e.length,t.length);a<i;)n[a]=[e[a],t[a]],a+=1;return n})},{"./internal/_curry2":250}],455:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=0,a=S(e.length,t.length),i={};n<a;)i[e[n]]=t[n],n+=1;return i})},{"./internal/_curry2":250}],456:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=[],i=0,o=S(t.length,n.length);i<o;)a[i]=e(t[i],n[i]),i+=1;return a})},{"./internal/_curry3":251}],457:[function(e,t){var n=function(){return this}()||Function("return this")(),a=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime"),i=a&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=e("./runtime"),a)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},{"./runtime":458}],458:[function(e,t){!function(e){"use strict";function n(e,t,n,a){var o=t&&t.prototype instanceof i?t:i,r=Object.create(o.prototype),s=new m(a||[]);return r._invoke=d(e,n,s),r}function a(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function r(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){function t(n,i,o,r){var s=a(e[n],e,i);if("throw"===s.type)r(s.arg);else{var l=s.arg,d=l.value;return d&&"object"==typeof d&&y.call(d,"__await")?Promise.resolve(d.__await).then(function(e){t("next",e,o,r)},function(e){t("throw",e,o,r)}):Promise.resolve(d).then(function(e){l.value=e,o(l)},r)}}var n;this._invoke=function(e,a){function i(){return new Promise(function(n,i){t(e,a,n,i)})}return n=n?n.then(i,i):i()}}function d(e,t,n){var i=k;return function(o,r){if(i==N)throw new Error("Generator is already running");if(i==A){if("throw"===o)throw r;return g()}for(n.method=o,n.arg=r;;){var s=n.delegate;if(s){var l=p(s,n);if(l){if(l===C)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i==k)throw i=A,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=N;var d=a(e,t,n);if("normal"===d.type){if(i=n.done?A:E,d.arg===C)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(i=A,n.method="throw",n.arg=d.arg)}}}function p(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,p(e,t),"throw"===t.method))return C;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var i=a(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,C;var o=i.arg;if(!o)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,C;if(o.done)t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0);else return o;return t.delegate=null,C}function c(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function u(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(c,this),this.reset(!0)}function f(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:g}}function g(){return{value:void 0,done:!0}}var _=Object.prototype,y=_.hasOwnProperty,h="function"==typeof Symbol?Symbol:{},b=h.iterator||"@@iterator",x=h.asyncIterator||"@@asyncIterator",v=h.toStringTag||"@@toStringTag",S="object"==typeof t,T=e.regeneratorRuntime;if(T)return void(S&&(t.exports=T));T=e.regeneratorRuntime=S?t.exports:{},T.wrap=n;var k="suspendedStart",E="suspendedYield",N="executing",A="completed",C={},w={};w[b]=function(){return this};var O=Object.getPrototypeOf,D=O&&O(O(f([])));D&&D!==_&&y.call(D,b)&&(w=D);var P=r.prototype=i.prototype=Object.create(w);o.prototype=P.constructor=r,r.constructor=o,r[v]=o.displayName="GeneratorFunction",T.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},T.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,r):(e.__proto__=r,!(v in e)&&(e[v]="GeneratorFunction")),e.prototype=Object.create(P),e},T.awrap=function(e){return{__await:e}},s(l.prototype),l.prototype[x]=function(){return this},T.AsyncIterator=l,T.async=function(e,t,a,i){var o=new l(n(e,t,a,i));return T.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(P),P[v]="Generator",P[b]=function(){return this},P.toString=function(){return"[object Generator]"},T.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},T.values=f,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(u),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,a){return o.type="throw",o.arg=e,n.next=t,a&&(n.method="next",n.arg=void 0),!!a}if(this.done)throw e;for(var n=this,a=this.tryEntries.length-1;0<=a;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var r=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(r&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(r){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);}else if(!s)throw new Error("try statement without catch or finally");else if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1,a;0<=n;--n)if(a=this.tryEntries[n],a.tryLoc<=this.prev&&y.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,C):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),C},finish:function(e){for(var t=this.tryEntries.length-1,n;0<=t;--t)if(n=this.tryEntries[t],n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),u(n),C},catch:function(e){for(var t=this.tryEntries.length-1,n;0<=t;--t)if(n=this.tryEntries[t],n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;u(n)}return i}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:f(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),C}}}(function(){return this}()||Function("return this")())},{}],459:[function(e,t){t.exports=e("./lib/index")},{"./lib/index":460}],460:[function(e,t,n){(function(a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./ponyfill"),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r;r="undefined"==typeof self?"undefined"==typeof window?"undefined"==typeof a?"undefined"==typeof t?Function("return this")():t:a:window:self;var s=(0,o["default"])(r);n["default"]=s}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./ponyfill":461}],461:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=e.Symbol,n;return"function"==typeof t?t.observable?n=t.observable:(n=t("observable"),t.observable=n):n="@@observable",n}},{}],462:[function(e,t){(function(e){/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var n,a,i,o,r,s,l,d,p,c,u,f,g,_,y,h;(function(n){function a(e,t){return function(n,a){return e[n]=t?t(n,a):a}}var i="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof m&&m.amd?m("tslib",["exports"],function(e){n(a(i,a(e)))}):"object"==typeof t&&"object"==typeof t.exports?n(a(i,a(t.exports))):n(a(i))})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};n=function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)},a=Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},i=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e},o=function(e,t,n,a){var o=arguments.length,s=3>o?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a,r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;0<=l;l--)(r=e[l])&&(s=(3>o?r(s):3<o?r(t,n,s):r(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s},r=function(e,t){return function(n,a){t(n,a,e)}},s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{l(a.next(e))}catch(t){o(t)}}function s(e){try{l(a["throw"](e))}catch(t){o(t)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}l((a=a.apply(e,t||[])).next())})},d=function(e,n){function a(e){return function(t){return i([e,t])}}function i(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,s&&(l=s[2&a[0]?"return":a[0]?"throw":"next"])&&!(l=l.call(s,a[1])).done)return l;switch((s=0,l)&&(a=[0,l.value]),a[0]){case 0:case 1:l=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,s=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if((l=o.trys,!(l=0<l.length&&l[l.length-1]))&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!l||a[1]>l[0]&&a[1]<l[3])){o.label=a[1];break}if(6===a[0]&&o.label<l[1]){o.label=l[1],l=a;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(a);break}l[2]&&o.ops.pop(),o.trys.pop();continue;}a=n.call(e,o)}catch(t){a=[6,t],s=0}finally{r=l=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},r,s,l,d;return d={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d},p=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},c=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},u=function(t,a){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o=n.call(t),i=[],s,r;try{for(;(void 0===a||0<a--)&&!(s=o.next()).done;)i.push(s.value)}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return i},f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e},g=function(e){return this instanceof g?(this.v=e,this):new g(e)},_=function(e,t,n){function a(e){p[e]&&(u[e]=function(t){return new Promise(function(n,a){1<c.push([e,t,n,a])||o(e,t)})})}function o(e,t){try{r(p[e](t))}catch(t){d(c[0][3],t)}}function r(e){e.value instanceof g?Promise.resolve(e.value.v).then(s,l):d(c[0][2],e)}function s(e){o("next",e)}function l(e){o("throw",e)}function d(e,t){(e(t),c.shift(),c.length)&&o(c[0][0],c[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=n.apply(e,t||[]),c=[],u;return u={},a("next"),a("throw"),a("return"),u[Symbol.asyncIterator]=function(){return this},u},y=function(e){function t(t,n){e[t]&&(a[t]=function(a){return(i=!i)?{value:g(e[t](a)),done:"return"===t}:n?n(a):a})}var a,i;return a={},t("next"),t("throw",function(t){throw t}),t("return"),a[Symbol.iterator]=function(){return this},a},h=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof c?c(e):e[Symbol.iterator]()},e("__extends",n),e("__assign",a),e("__rest",i),e("__decorate",o),e("__param",r),e("__metadata",s),e("__awaiter",l),e("__generator",d),e("__exportStar",p),e("__values",c),e("__read",u),e("__spread",f),e("__await",g),e("__asyncGenerator",_),e("__asyncDelegator",y),e("__asyncValues",h)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],463:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],464:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],465:[function(e,t,a){(function(t,n){function o(e,t){var n={seen:[],stylize:r};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&a._extend(n,t),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),l(n,e,n.depth)}function i(e,t){var n=o.styles[t];return n?"\x1B["+o.colors[n][0]+"m"+e+"\x1B["+o.colors[n][1]+"m":e}function r(e){return e}function s(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function l(e,t,i){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==a.inspect&&!(t.constructor&&t.constructor.prototype===t)){var o=t.inspect(i,e);return h(o)||(o=l(e,o,i)),o}var r=d(e,t);if(r)return r;var g=Object.keys(t),_=s(g);if(e.showHidden&&(g=Object.getOwnPropertyNames(t)),T(t)&&(0<=g.indexOf("message")||0<=g.indexOf("description")))return p(t);if(0===g.length){if(k(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(T(t))return p(t)}var b="",v=!1,E=["{","}"];if(f(t)&&(v=!0,E=["[","]"]),k(t)){var N=t.name?": "+t.name:"";b=" [Function"+N+"]"}if(x(t)&&(b=" "+RegExp.prototype.toString.call(t)),S(t)&&(b=" "+Date.prototype.toUTCString.call(t)),T(t)&&(b=" "+p(t)),0===g.length&&(!v||0==t.length))return E[0]+b+E[1];if(0>i)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var n;return n=v?c(e,t,i,_,g):g.map(function(n){return u(e,t,i,_,n,v)}),e.seen.pop(),m(n,b,E)}function d(e,t){if(b(t))return e.stylize("undefined","undefined");if(h(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,n,a,o){for(var r=[],s=0,i=t.length;s<i;++s)C(t,s+"")?r.push(u(e,t,n,a,s+"",!0)):r.push("");return o.forEach(function(i){i.match(/^\d+$/)||r.push(u(e,t,n,a,i,!0))}),r}function u(e,t,n,a,i,o){var r,s,d;if(d=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},d.get?d.set?s=e.stylize("[Getter/Setter]","special"):s=e.stylize("[Getter]","special"):d.set&&(s=e.stylize("[Setter]","special")),C(a,i)||(r="["+i+"]"),s||(0>e.seen.indexOf(d.value)?(s=_(n)?l(e,d.value,null):l(e,d.value,n-1),-1<s.indexOf("\n")&&(o?s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),b(r)){if(o&&i.match(/^\d+$/))return s;r=JSON.stringify(""+i),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=e.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'"),r=e.stylize(r,"string"))}return r+": "+s}function m(e,t,n){var a=0,i=e.reduce(function(e,t){return a++,0<=t.indexOf("\n")&&a++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return 60<i?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function f(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function _(e){return null===e}function y(e){return"number"==typeof e}function h(e){return"string"==typeof e}function b(e){return void 0===e}function x(e){return v(e)&&"[object RegExp]"===E(e)}function v(e){return"object"==typeof e&&null!==e}function S(e){return v(e)&&"[object Date]"===E(e)}function T(t){return v(t)&&("[object Error]"===E(t)||t instanceof Error)}function k(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function N(e){return 10>e?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}// distribute, sublicense, and/or sell copies of the Software, and to permit
var w=/%[sdj%]/g;a.format=function(e){if(!h(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,a=arguments,i=a.length,r=(e+"").replace(w,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return a[n++]+"";case"%d":return+a[n++];case"%j":try{return JSON.stringify(a[n++])}catch(e){return"[Circular]"}default:return e;}}),s=a[n];n<i;s=a[++n])r+=_(s)||!v(s)?" "+s:" "+o(s);return r},a.deprecate=function(e,i){if(b(n.process))return function(){return a.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);else t.traceDeprecation?console.trace(i):console.error(i);o=!0}return e.apply(this,arguments)}};var O={},D;a.debuglog=function(e){if(b(D)&&(D=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!O[e])if(new RegExp("\\b"+e+"\\b","i").test(D)){var n=t.pid;O[e]=function(){var t=a.format.apply(a,arguments);console.error("%s %d: %s",e,n,t)}}else O[e]=function(){};return O[e]},a.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},a.isArray=f,a.isBoolean=g,a.isNull=_,a.isNullOrUndefined=function(e){return null==e},a.isNumber=y,a.isString=h,a.isSymbol=function(e){return"symbol"==typeof e},a.isUndefined=b,a.isRegExp=x,a.isObject=v,a.isDate=S,a.isError=T,a.isFunction=k,a.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e},a.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.log=function(){console.log("%s - %s",A(),a.format.apply(a,arguments))},a.inherits=e("inherits"),a._extend=function(e,t){if(!t||!v(t))return e;for(var n=Object.keys(t),a=n.length;a--;)e[n[a]]=t[n[a]];return e}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./support/isBuffer":464,_process:147,inherits:463}],466:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.version=n.VegaLayer=void 0;var i=e("babel-runtime/regenerator"),o=a(i),r=e("babel-runtime/helpers/asyncToGenerator"),s=a(r),l=e("leaflet"),d=e("./vega-layer"),p=a(d),c=e("./util/check-view"),u=a(c),m=e("../package.json"),f=0,g=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,a,i,r,s,d,c,m,g,_,y,h,b,x,v,S,T,k,E,N,A,C,w,O,D,P,R,I,M,F,B;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.spec,a=t.view,i=t.renderer,r=void 0===i?"canvas":i,s=t.container,d=void 0===s?document.body:s,c=t.mapContainer,m=void 0===c?"vega-leaflet-"+f++:c,g=t.maxZoom,_=void 0===g?18:g,y=t.cssClassVegaLayer,h=void 0===y?["leaflet-vega-container"]:y,b=t.overruleVegaPadding,x=void 0!==b&&b,e.next=3,(0,u.default)(n,a);case 3:if(v=e.sent,S=v.zoom,T=v.latitude,k=v.longitude,E=v.padding,N=v.vegaView,!1!==m||null!==d&&"undefined"!=typeof d){e.next=8;break}throw A="If you set mapContainer to 'false', you have to provide a value for container.",new Error(A);case 8:return C=null,!1!==m&&("string"==typeof m?C=document.getElementById(m):m instanceof HTMLElement&&(C=m),null===C&&(C=document.createElement("div"),C.id=m),null!==E&&!0!==x&&(w=E.top,O=E.right,D=E.bottom,P=E.left,C.style.padding=w+"px "+O+"px "+D+"px "+P+"px")),R=null,"string"==typeof d?(R=document.getElementById(d),null===R&&(R=document.createElement("div"),R.id=d),document.body.appendChild(R)):d instanceof HTMLElement&&(R=d,document.getElementById(null===R.id)&&document.body.appendChild(R)),null===R&&(R=document.body),null!==C&&null===document.getElementById(m.id)&&R.appendChild(C),I=document.createElement("div"),I.style.width=N.width()+"px",I.style.height=N.height()+"px",M=void 0,null===C?(M=R.id+"-map",R.appendChild(I)):(M=C.id+"-map",C.appendChild(I)),I.id=M,F=new l.Map(M,{zoomAnimation:!1}).setView([T.value,k.value],S.value),new l.TileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:"<a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors",maxZoom:_}).addTo(F),B=h,"string"==typeof h&&(B=[h]),N.padding({top:0,bottom:0,right:0,left:0}),new p.default(N,{renderer:r,delayRepaint:!0,cssClassVegaLayer:B}).addTo(F),e.abrupt("return",[C,N]);case 27:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}();n.default=g,n.VegaLayer=p.default;var _="vega-as-leaflet-layer "+m.version;n.version=_},{"../package.json":470,"./util/check-view":467,"./vega-layer":469,"babel-runtime/helpers/asyncToGenerator":8,"babel-runtime/regenerator":12,leaflet:145}],467:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/regenerator"),o=a(i),r=e("babel-runtime/helpers/asyncToGenerator"),s=a(r),l=e("vega"),d=e("fetch-helpers"),p=e("./get-padding"),c=a(p),u=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var a,i,r,p,s,u,m,f;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0,"undefined"!=typeof t&&null!==t||"undefined"!=typeof n&&null!==n){e.next=4;break}throw a="Please provide at least spec or a Vega view instance.",new Error(a);case 4:if(i=n,r=void 0,"undefined"!=typeof n){e.next=28;break}return p=void 0,e.prev=8,e.next=11,(0,d.load)(t);case 11:p=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e["catch"](8),e.t0;case 17:e.prev=17,i=new l.View((0,l.parse)(p)),e.next=25;break;case 21:throw e.prev=21,e.t1=e["catch"](17),a="Not a valid spec: "+e.t1,new Error(a);case 25:r=(0,c.default)(i),e.next=36;break;case 28:e.prev=28,r=(0,c.default)(i),e.next=36;break;case 32:throw e.prev=32,e.t2=e["catch"](28),a="Not a valid view: "+e.t2,new Error(a);case 36:if(s=i._runtime.signals||[],u=s.zoom,m=s.latitude,f=s.longitude,"undefined"!=typeof u&&"undefined"!=typeof m&&"undefined"!=typeof f){e.next=40;break}throw a="Incomplete specification; if you want to add Vega as a Leaflet layer you defined provide signals for zoom, latitude and longitude",new Error(a);case 40:return e.abrupt("return",{zoom:u,latitude:m,longitude:f,padding:r,vegaView:i});case 41:case"end":return e.stop();}},e,void 0,[[8,14],[17,21],[28,32]])}));return function(){return e.apply(this,arguments)}}();n.default=u},{"./get-padding":468,"babel-runtime/helpers/asyncToGenerator":8,"babel-runtime/regenerator":12,"fetch-helpers":138,vega:589}],468:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e){var t=e.padding();if("undefined"==typeof t.top&&"undefined"==typeof t.bottom&&"undefined"==typeof t.right&&"undefined"==typeof t.left)return null;var n=t.top,a=n===void 0?0:n,i=t.bottom,o=i===void 0?0:i,r=t.right,s=r===void 0?0:r,l=t.left,d=l===void 0?0:l;return{top:a,bottom:o,right:s,left:d}}},{}],469:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("leaflet"),i=(a.Layer||a.Class).extend({options:{delayRepaint:!0,cssClassVegaLayer:[""]},initialize:function(e,t){a.Util.setOptions(this,t),this.view=e},addTo:function(e){return e.addLayer(this),this},onAdd:function(e){var t=this;this.map=e,this.vegaContainer=a.DomUtil.create("div",this.options.cssClassVegaLayer.join(" ")),e._panes.overlayPane.appendChild(this.vegaContainer),this.view.initialize(this.vegaContainer);var n=function(e,n){return t.onSignalChange(e,n)};return this.view.addSignalListener("latitude",n).addSignalListener("longitude",n).addSignalListener("zoom",n),e.on(this.options.delayRepaint?"moveend":"move",function(){return t.update()}),e.on("zoomend",function(){return t.update()}),this.update(!0)},onRemove:function(){this.view&&(this.view.finalize(),this.view=null),a.DomUtil.empty()},onSignalChange:function(e,t){var n=this.map.getCenter(),a=this.map.getZoom();switch(e){case"latitude":n.lat=t;break;case"longitude":n.lng=t;break;case"zoom":a=t;break;default:return;}this.map.setView(n,a),this.update()},update:function(e){var t=this,n=this.map.containerPointToLayerPoint([0,0]);a.DomUtil.setPosition(this.vegaContainer,n);var i=this.map.getSize(),o=this.map.getCenter(),r=this.map.getZoom(),s=function(e,n){return t.view.signal(e)===n?0:(t.view.signal(e,n),1)},l=0;return l|=s("width",i.x),l|=s("height",i.y),l|=s("latitude",o.lat),l|=s("longitude",o.lng),l|=s("zoom",r),l||e?this.view.runAsync():0}});n.default=i},{leaflet:145}],470:[function(e,t){t.exports={_from:"vega-as-leaflet-layer@^1.1.5",_id:"vega-as-leaflet-layer@1.1.5",_inBundle:!1,_integrity:"sha512-Wm9hqzXqm/G5Ugppg2p5duVHUiOJzfjM9zAzgc800je1e3Z/Yg7SLCuUxeB/+q3WMle98O3HaPO441aUJ0DYMg==",_location:"/vega-as-leaflet-layer",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"vega-as-leaflet-layer@^1.1.5",name:"vega-as-leaflet-layer",escapedName:"vega-as-leaflet-layer",rawSpec:"^1.1.5",saveSpec:null,fetchSpec:"^1.1.5"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/vega-as-leaflet-layer/-/vega-as-leaflet-layer-1.1.5.tgz",_shasum:"4b85a4cb8b0168ec585066f5c47e3928defd2368",_spec:"vega-as-leaflet-layer@^1.1.5",_where:"/home/abudaan/workspace/vega-multi-view",author:{name:"abudaan"},browser:"dist/index.js",bugs:{url:"https://github.com/abudaan/vega-as-leaflet-layer/issues"},bundleDependencies:!1,dependencies:{"fetch-helpers":"git+https://github.com/abudaan/fetch-helpers.git",leaflet:"^1.2.0",vega:"^3.0.4"},deprecated:!1,description:"Render Vega3 spec as layer on a Leaflet map, based on https://github.com/nyurik/leaflet-vega",devDependencies:{"babel-cli":"^6.26.0","babel-eslint":"^7.2.3","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.0","babel-preset-stage-0":"^6.24.1",eslint:"^4.6.1","eslint-config-airbnb-base":"^12.0.0","eslint-plugin-flowtype":"^2.35.1","eslint-plugin-import":"^2.7.0","flow-bin":"0.42.0"},homepage:"https://github.com/abudaan/vega-as-leaflet-layer#readme",keywords:["vega","leaflet","tile maps","leaflet-vega"],license:"MIT",module:"src/index.js",name:"vega-as-leaflet-layer",repository:{type:"git",url:"git://github.com/abudaan/vega-as-leaflet-layer.git"},scripts:{compile:"babel ./src --out-dir ./dist",postpublish:"git push && git push --tags",prepublish:"npm run compile"},version:"1.1.5"}},{}],471:[function(e,t,n){(function(e,a){"object"==typeof n&&"undefined"!=typeof t?a(n):"function"==typeof m&&m.amd?m(["exports"],a):a(e.vega=e.vega||{})})(this,function(e){"use strict";function t(e){return b.hasOwnProperty(e)}function a(e,t,a,i,o){for(var r=0,s=e.length,n;t<s;++t){if(n=e[t],!r&&n===a)return t;o&&0<=o.indexOf(n)?--r:i&&0<=i.indexOf(n)&&++r}return t}function o(e){for(var t=[],o=0,r=e.length,n=0;n<r;)n=a(e,n,f,d+c,p+u),t.push(e.substring(o,n).trim()),o=++n;if(0===t.length)throw"Empty event selector: "+e;return t}function r(e){return"["===e[0]?n(e):i(e)}function n(e){var t=e.length,n=1,i,s;if(n=a(e,n,p,d,p),n===t)throw"Empty between selector: "+e;if(i=o(e.substring(1,n)),2!==i.length)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==_)throw"Expected '>' after between selector: "+e;return(i=i.map(r),s=r(e.slice(1).trim()),s.between)?{between:i,stream:s}:(s.between=i,s)}function i(e){var o={source:h},r=[],s=[0,0],f=0,_=0,b=e.length,x=0,i,v;if(e[b-1]===u){if(x=e.lastIndexOf(c),0<=x){try{s=l(e.substring(x+1,b-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,x).trim(),b=e.length}else throw"Unmatched right brace: "+e;x=0}if(!b)throw e;if(e[0]===g&&(f=++x),i=a(e,x,m),i<b&&(r.push(e.substring(_,i).trim()),_=x=++i),x=a(e,x,d),x===b)r.push(e.substring(_,b).trim());else if(r.push(e.substring(_,x).trim()),v=[],_=++x,_===b)throw"Unmatched left bracket: "+e;for(;x<b;){if(x=a(e,x,p),x===b)throw"Unmatched left bracket: "+e;if(v.push(e.substring(_,x).trim()),x<b-1&&e[++x]!==d)throw"Expected left bracket: "+e;_=++x}if(!(b=r.length)||y.test(r[b-1]))throw"Invalid event selector: "+e;return 1<b?(o.type=r[1],f?o.markname=r[0].slice(1):t(r[0])?o.marktype=r[0]:o.source=r[0]):o.type=r[0],"!"===o.type.slice(-1)&&(o.consume=!0,o.type=o.type.slice(0,-1)),null!=v&&(o.filter=v),s[0]&&(o.throttle=s[0]),s[1]&&(o.debounce=s[1]),o}function l(e){var t=e.split(f);if(!e.length||2<t.length)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}var d="[",p="]",c="{",u="}",m=":",f=",",g="@",_=">",y=/[[\]{}]/,s={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},h,b;e.selector=function(e,t,n){return h=t||"view",b=n||s,o(e.trim()).map(r)},Object.defineProperty(e,"__esModule",{value:!0})})},{}],472:[function(e,t){t.exports={name:"vega-lite",author:"Jeffrey Heer, Dominik Moritz, Kanit \"Ham\" Wongsuphasawat",version:"2.0.0-rc3",collaborators:["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (https://www.domoritz.de)","Jeffrey Heer <jheer@uw.edu> (http://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications.",main:"build/src/index.js",types:"typings/vega-lite.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},directories:{test:"test"},scripts:{pretsc:"mkdir -p build && rm -rf build/*/** && cp package.json build/",tsc:"tsc",prebuild:"mkdir -p build/site build/test-gallery",build:"npm run build:only","build:only":"npm run tsc && cp package.json build && browserify src/index.ts -p tsify -d -s vl | exorcist build/vega-lite.js.map > build/vega-lite.js",postbuild:"node node_modules/uglify-js/bin/uglifyjs build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && npm run schema","build:examples":"npm run data && npm run build:only && npm run build:examples-only","build:examples-only":"TZ=America/Los_Angeles ./scripts/build-examples.sh && rm -f examples/specs/normalized/*.vl.json && scripts/build-normalized-examples","build:example":"./scripts/build-example.sh","build:toc":"bundle exec jekyll build -q && scripts/generate-toc","build:site":"browserify site/static/main.ts -p [tsify -p site] -d | exorcist build/site/main.js.map > build/site/main.js","build:versions":"scripts/update-version.sh","build:test-gallery":"browserify test-gallery/main.ts -p [tsify -p test-gallery] -d > build/test-gallery/main.js","check:examples":"scripts/check-examples.sh","check:schema":"scripts/check-schema.sh",clean:"rm -rf build && rm -f vega-lite.* & find -E src test site examples -regex '.*\\.(js|js.map|d.ts)' -delete",data:"rsync -r node_modules/vega-datasets/data/* data",link:"npm link && npm link vega-lite",deploy:"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh","deploy:schema":"scripts/deploy-schema.sh",prestart:"npm run data && npm run build && scripts/index-examples",start:"nodemon -x 'npm run build:test-gallery' & browser-sync start --server --files 'build/test-gallery/main.js' --index 'test-gallery/index.html'",poststart:"rm examples/all-examples.json",preschema:"npm run prebuild",schema:"ts-json-schema-generator --path tsconfig.json --type TopLevelExtendedSpec > build/vega-lite-schema.json && npm run renameschema && cp build/vega-lite-schema.json _data/",renameschema:"scripts/rename-schema.sh",presite:"npm run build && npm run data && npm run build:site && npm run build:toc && npm run build:versions",site:"bundle exec jekyll serve",lint:"tslint --project tsconfig.json -c tslint.json --type-check",test:"npm run build:only && npm run test:only && npm run test:runtime && npm run lint",posttest:"npm run schema && npm run data && npm run mocha:examples","test:nocompile":"npm run test:only && npm run test:runtime && npm run lint && npm run mocha:examples","test:only":"nyc --reporter=html --reporter=text-summary npm run mocha:test","test:runtime":"TZ=America/Los_Angeles wdio wdio.conf.js","test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true npm run test:runtime","test:debug":"npm run tsc && mocha --recursive --debug-brk --inspect build/test","test:debug-examples":"npm run tsc && npm run schema && mocha --recursive --debug-brk --inspect build/examples","mocha:test":"mocha --require source-map-support/register --reporter dot --recursive build/test","mocha:examples":"mocha --require source-map-support/register --reporter dot --recursive build/examples",codecov:"nyc report --reporter=json && codecov -f coverage/*.json","watch:build":"watchify src/index.ts -p tsify -v -d -s vl -o 'exorcist build/vega-lite.js.map > build/vega-lite.js'","watch:tsc":"npm run tsc -- -w","watch:test":"nodemon -x 'npm test'",watch:"nodemon -x 'npm run build && npm run test:nocompile' # already ran schema in build"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@types/chai":"^4.0.2","@types/d3":"^4.10.0","@types/highlight.js":"^9.1.9","@types/json-stable-stringify":"^1.0.31","@types/mkdirp":"^0.5.0","@types/mocha":"^2.2.41","@types/node":"^8.0.19","@types/webdriverio":"^4.8.4",ajv:"5.2.2","browser-sync":"^2.18.13",browserify:"^14.4.0","browserify-shim":"^3.8.14",chai:"^4.1.0",cheerio:"^1.0.0-rc.2",chromedriver:"^2.30.1",codecov:"^2.3.0",d3:"^4.10.0",exorcist:"^0.4.0","highlight.js":"^9.12.0",mkdirp:"^0.5.1",mocha:"^3.5.0",nodemon:"^1.11.0",nyc:"^11.1.0","source-map-support":"^0.4.15","ts-json-schema-generator":"^0.12.0","ts-node":"^3.2.1",tsify:"^3.0.1",tslint:"5.4.3","tslint-eslint-rules":"^4.1.1",typescript:"^2.4.2","uglify-js":"^3.0.27",vega:"^3.0.0","vega-datasets":"vega/vega-datasets#gh-pages","vega-embed":"^3.0.0-beta.20","vega-tooltip":"^0.4.2",watchify:"^3.9.0","wdio-chromedriver-service":"^0.1.0","wdio-dot-reporter":"0.0.9","wdio-mocha-framework":"^0.5.10","wdio-static-server-service":"^1.0.1",webdriverio:"^4.8.0","yaml-front-matter":"^3.4.0"},dependencies:{"json-stable-stringify":"^1.0.1",tslib:"^1.7.1","vega-event-selector":"^2.0.0","vega-util":"^1.5.0",yargs:"^8.0.2"}}},{}],473:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./util"),i={values:1,count:1,valid:1,missing:1,distinct:1,sum:1,mean:1,average:1,variance:1,variancep:1,stdev:1,stdevp:1,median:1,q1:1,q3:1,ci0:1,ci1:1,min:1,max:1,argmin:1,argmax:1};n.AGGREGATE_OPS=a.flagKeys(i),n.isAggregateOp=function(e){return!!i[e]},n.COUNTING_OPS=["count","valid","missing","distinct"],n.isCountingAggregateOp=function(e){return e&&a.contains(n.COUNTING_OPS,e)},n.SUM_OPS=["count","sum","distinct","valid","missing"],n.SHARED_DOMAIN_OPS=["mean","average","median","q1","q3","min","max"],n.SHARED_DOMAIN_OP_INDEX=a.toSet(n.SHARED_DOMAIN_OPS)},{"./util":579}],474:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AXIS_PROPERTY_TYPE={grid:"grid",labelOverlap:"main",offset:"main",title:"main"},n.AXIS_PROPERTIES=["domain","format","grid","labelPadding","labels","labelOverlap","maxExtent","minExtent","offset","orient","position","tickCount","ticks","tickSize","title","titlePadding","values","zindex"],n.VG_AXIS_PROPERTIES=[].concat(n.AXIS_PROPERTIES,["gridScale"])},{}],475:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./channel"),i=e("./util");n.binToString=function(e){return i.isBoolean(e)?"bin":"bin"+i.keys(e).map(function(t){return"_"+t+"_"+e[t]}).join("")},n.autoMaxBins=function(e){return e===a.ROW||e===a.COLUMN||e===a.SIZE||e===a.COLOR||e===a.OPACITY||e===a.SHAPE?6:10}},{"./channel":476,"./util":579}],476:[function(e,t,n){"use strict";function a(e){return e===n.X||e===n.Y||e===n.COLOR||e===n.DETAIL||e===n.TOOLTIP||e===n.ORDER||e===n.OPACITY||e===n.ROW||e===n.COLUMN?{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0}:e===n.X2||e===n.Y2?{rule:!0,bar:!0,rect:!0,area:!0}:e===n.SIZE?{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0}:e===n.SHAPE?{point:!0}:e===n.TEXT?{text:!0}:void 0}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),o=e("./util"),r;(function(e){e.ROW="row",e.COLUMN="column",e.X="x",e.Y="y",e.X2="x2",e.Y2="y2",e.COLOR="color",e.SHAPE="shape",e.SIZE="size",e.OPACITY="opacity",e.TEXT="text",e.ORDER="order",e.DETAIL="detail",e.TOOLTIP="tooltip"})(r=n.Channel||(n.Channel={})),n.X=r.X,n.Y=r.Y,n.X2=r.X2,n.Y2=r.Y2,n.ROW=r.ROW,n.COLUMN=r.COLUMN,n.SHAPE=r.SHAPE,n.SIZE=r.SIZE,n.COLOR=r.COLOR,n.TEXT=r.TEXT,n.DETAIL=r.DETAIL,n.ORDER=r.ORDER,n.OPACITY=r.OPACITY,n.TOOLTIP=r.TOOLTIP;var s={x:1,y:1,x2:1,y2:1,size:1,shape:1,color:1,order:1,opacity:1,text:1,detail:1,tooltip:1},l=i.__assign({},s,{row:1,column:1});n.CHANNELS=o.flagKeys(l);var d=l.order,p=l.detail,c=i.__rest(l,["order","detail"]);n.SINGLE_DEF_CHANNELS=o.flagKeys(c),n.isChannel=function(e){return!!l[e]},n.UNIT_CHANNELS=o.flagKeys(s);var u=s.x,m=s.y,f=s.x2,g=s.y2,_=i.__rest(s,["x","y","x2","y2"]);n.NONPOSITION_CHANNELS=o.flagKeys(_);var y={x:1,y:1};n.POSITION_SCALE_CHANNELS=o.flagKeys(y);var h=_.text,b=_.tooltip,x=_.detail,v=_.order,S=i.__rest(_,["text","tooltip","detail","order"]);n.NONPOSITION_SCALE_CHANNELS=o.flagKeys(S);var T=i.__assign({},y,S);n.SCALE_CHANNELS=o.flagKeys(T),n.isScaleChannel=function(e){return!!T[e]},n.supportMark=function(e,t){return t in a(e)},n.getSupportedMark=a,n.rangeType=function(e){switch(e){case n.X:case n.Y:case n.SIZE:case n.OPACITY:case n.X2:case n.Y2:return"continuous";case n.ROW:case n.COLUMN:case n.SHAPE:case n.TEXT:case n.TOOLTIP:return"discrete";case n.COLOR:return"flexible";case n.DETAIL:case n.ORDER:return;}throw new Error("getSupportedRole not implemented for "+e)}},{"./util":579,tslib:462}],477:[function(e,t,n){"use strict";function a(e){return function(t,n){return n[e]&&t.push(n[e].combine()),t}}Object.defineProperty(n,"__esModule",{value:!0});var i=a("main"),o=a("grid");n.assembleAxes=function(e){return[].concat(e.x?[].concat(e.x.reduce(i,[]),e.x.reduce(o,[])):[],e.y?[].concat(e.y.reduce(i,[]),e.y.reduce(o,[])):[])}},{}],478:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../split"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t}(i.Split);n.AxisComponentPart=o},{"../split":550,tslib:462}],479:[function(e,t,n){"use strict";function a(e,t,n){if(e.labelAngle!==void 0)return(e.labelAngle%360+360)%360;return t===r.X&&(p.contains([d.NOMINAL,d.ORDINAL],n.type)||!!n.bin||s.isTimeFieldDef(n))?270:void 0}function i(e,t){if(e&&0<e){if(180<e)return"top"===t?"left":"right";if(180>e)return"top"===t?"right":"left"}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("../../channel"),s=e("../../fielddef"),l=e("../../scale"),d=e("../../type"),p=e("../../util"),c=e("../common");n.labels=function(e,t,n,r){var d=e.fieldDef(t)||("x"===t?e.fieldDef("x2"):"y"===t?e.fieldDef("y2"):void 0),u=e.axis(t),m=e.config,f={};if(s.isTimeFieldDef(d)){var g=e.getScaleComponent(t).get("type")===l.ScaleType.UTC;f.text={signal:c.timeFormatExpression("datum.value",d.timeUnit,u.format,m.axis.shortTimeLabels,m.timeFormat,g)}}var _=a(u,t,d);if(_&&(f.angle={value:_}),f.angle&&"x"===t){var y=i(_,r.get("orient"));y&&(f.align={value:y}),p.contains([90,270],_)&&(f.baseline={value:"middle"})}return f=o.__assign({},f,n),0===p.keys(f).length?void 0:f},n.labelAngle=a,n.labelAlign=i},{"../../channel":476,"../../fielddef":561,"../../scale":569,"../../type":578,"../../util":579,"../common":484,tslib:462}],480:[function(e,t,n){"use strict";function a(e,t){if(e){if(e.length!==t.length)return;for(var n=e.length,a=0;a<n;a++){var i=e[a].main,r=t[a].main;if(!!i!=!!r)return;if(i&&r){var s=i.getWithExplicit("orient"),l=r.getWithExplicit("orient");if(s.explicit&&l.explicit&&s.value!==l.value)return;e[a].main=o(i,r)}var d=e[a].grid,p=t[a].grid;if(!!d!=!!p)return;d&&p&&(e[a].grid=o(d,p))}}else return t.map(function(e){return u.__assign({},e.main?{main:e.main.clone()}:{},e.grid?{grid:e.grid.clone()}:{})});return e}function o(e,t){for(var n=function(n){var a=h.mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",function(e,t){return"title"===n?_.titleMerger(e,t):"gridScale"===n?{explicit:e.explicit,value:e.value||t.value}:h.defaultTieBreaker(e,t,n,"axis")});e.setWithExplicit(n,a)},a=0,i=m.VG_AXIS_PROPERTIES,o;a<i.length;a++)o=i[a],n(o);return e}function i(e){return!1===e||null===e}function r(e){return g.some(S,function(t){return s(e,t)})}function s(e,t){return!("axis"!==t)||("grid"===t||"title"===t?!!e.get(t):!i(e.get(t)))}function l(e,t){return p(e,t,!0)}function d(e,t){return p(e,t,!1)}function p(t,n,e){var a=n.axis(t),i=new b.AxisComponentPart({},{scale:n.scaleName(t)});m.AXIS_PROPERTIES.forEach(function(o){var r=c(o,a,t,n,e);if(void 0!==r){var s="values"===o?!!a.values:r===a[o];i.set(o,r,s)}});var o=v.gridScale(n,t,e);void 0!==o&&i.set("gridScale",o,!1);var r=a.encoding||{},l=S.reduce(function(a,e){if(!s(i,e))return a;var o="labels"===e?x.labels(n,t,r.labels||{},i):r[e]||{};return void 0!==o&&0<g.keys(o).length&&(a[e]={update:o}),a},{});return 0<g.keys(l).length&&i.set("encode",l,!!a.encoding||!!a.labelAngle),i}function c(e,t,n,a,i){var o=a.fieldDef(n);if((!i||"main"!==m.AXIS_PROPERTY_TYPE[e])&&(i||"grid"!==m.AXIS_PROPERTY_TYPE[e])){switch(e){case"domain":return v.domain(e,t,i,n);case"format":return _.numberFormat(o,t.format,a.config);case"grid":{var r=a.getScaleComponent(n).get("type");return _.getSpecifiedOrDefaultValue(t.grid,v.grid(r,o))}case"labels":return!i&&t.labels;case"labelOverlap":{var r=a.getScaleComponent(n).get("type");return v.labelOverlap(o,t,n,r)}case"minExtent":return v.minMaxExtent(t.minExtent,i);case"maxExtent":return v.minMaxExtent(t.maxExtent,i);case"orient":return _.getSpecifiedOrDefaultValue(t.orient,v.orient(n));case"tickCount":{var r=a.getScaleComponent(n).get("type"),s="x"===n?"width":"y"===n?"height":void 0,l=s?a.getSizeSignalRef(s):void 0;return _.getSpecifiedOrDefaultValue(t.tickCount,v.tickCount(n,o,r,l))}case"ticks":return v.ticks(e,t,i,n);case"title":return _.getSpecifiedOrDefaultValue(t.title,v.title(t.titleMaxLength,o,a.config));case"values":return v.values(t,a,o);case"zindex":return _.getSpecifiedOrDefaultValue(t.zindex,v.zindex(i));}return t[e]}}Object.defineProperty(n,"__esModule",{value:!0});var u=e("tslib"),m=e("../../axis"),f=e("../../channel"),g=e("../../util"),_=e("../common"),y=e("../resolve"),h=e("../split"),b=e("./component"),x=e("./encode"),v=e("./properties"),S=["domain","grid","labels","ticks","title"];n.parseUnitAxis=function(e){return f.POSITION_SCALE_CHANNELS.reduce(function(t,n){if(e.axis(n)){var a={},i=d(n,e);i&&r(i)&&(a.main=i);var o=l(n,e);o&&r(o)&&(a.grid=o),t[n]=[a]}return t},{})};var T={bottom:"top",top:"bottom",left:"right",right:"left"};n.parseLayerAxis=function(e){for(var t=e.component,n=t.axes,i=t.resolve,o={top:0,bottom:0,right:0,left:0},r=function(t){t.parseAxisAndHeader(),g.keys(t.component.axes).forEach(function(o){i.axis[o]=y.parseGuideResolve(e.component.resolve,o),"shared"===i.axis[o]&&(n[o]=a(n[o],t.component.axes[o]),!n[o]&&(i.axis[o]="independent",delete n[o]))})},s=0,l=e.children,d;s<l.length;s++)d=l[s],r(d);["x","y"].forEach(function(t){for(var a=0,r=e.children,s;a<r.length;a++)(s=r[a],!!s.component.axes[t])&&("independent"===i.axis[t]&&(n[t]=(n[t]||[]).concat(s.component.axes[t]),s.component.axes[t].forEach(function(e){var t=e.main.getWithExplicit("orient"),n=t.value,a=t.explicit;if(0<o[n]&&!a){var i=T[n];o[n]>o[i]&&e.main.set("orient",i,!1)}o[n]++})),delete s.component.axes[t])})},n.parseGridAxis=l,n.parseMainAxis=d},{"../../axis":474,"../../channel":476,"../../util":579,"../common":484,"../resolve":530,"../split":550,"./component":478,"./encode":479,"./properties":481,tslib:462}],481:[function(e,t,n){"use strict";function a(e,t,n){return!n&&t[e]}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../channel"),o=e("../../datetime"),r=e("../../fielddef"),s=e("../../log"),l=e("../../scale"),d=e("../../util");n.domainAndTicks=a,n.domain=a,n.ticks=a,n.grid=function(e,t){return!l.hasDiscreteDomain(e)&&!t.bin},n.gridScale=function(e,t,n){if(n){var a="x"===t?"y":"x";if(e.getScaleComponent(a))return e.scaleName(a)}},n.labelOverlap=function(e,t,n,a){return"nominal"===e.type?void 0:"log"!==a||"greedy"},n.minMaxExtent=function(e,t){return t?0:e},n.orient=function(e){switch(e){case i.X:return"bottom";case i.Y:return"left";}throw new Error(s.message.INVALID_CHANNEL_FOR_AXIS)},n.tickCount=function(e,t,n,a){return l.hasDiscreteDomain(n)||"log"===n||d.contains(["month","hours","day","quarter"],t.timeUnit)?void 0:t.bin?{signal:"min(ceil("+a.signal+"/40), "+t.bin.maxbins+")"}:{signal:"ceil("+a.signal+"/40)"}},n.title=function(e,t,n){var a=r.title(t,n);return e?d.truncate(a,e):a},n.values=function(e){var t=e.values;return e.values&&o.isDateTime(t[0])?t.map(function(e){return{signal:o.dateTimeExpr(e,!0)}}):t},n.zindex=function(e){return e?0:1}},{"../../channel":476,"../../datetime":558,"../../fielddef":561,"../../log":566,"../../scale":569,"../../util":579}],482:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../util"),o=e("./data/parse"),r=e("./layoutsize/assemble"),s=e("./model"),l=function(e){function t(t,n,a,i,o){return e.call(this,t,n,a,i,o)||this}return a.__extends(t,e),t.prototype.parseData=function(){this.component.data=o.parseData(this),this.children.forEach(function(e){e.parseData()})},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),i.keys(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})},n=0,a=this.children,o;n<a.length;n++)o=a[n],t(o)},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseAxisAndHeader()},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.forEach(function(e){return e.assembleSelectionSignals()}),[]},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},r.assembleLayoutSignals(this))},t.prototype.assembleSelectionData=function(){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},[])},t.prototype.assembleMarks=function(){return this.children.map(function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),i=e.assembleLayoutSize();return a.__assign({type:"group",name:e.getName("group")},t?{title:t}:{},n?{style:n}:{},i?{encode:{update:i}}:{},e.assembleGroup())})},t}(s.Model);n.BaseConcatModel=l},{"../util":579,"./data/parse":501,"./layoutsize/assemble":508,"./model":527,tslib:462}],483:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../log"),i=e("../spec"),o=e("./concat"),r=e("./facet"),s=e("./layer"),l=e("./repeat"),d=e("./unit");n.buildModel=function(e,t,n,p,c,u,m){if(i.isFacetSpec(e))return new r.FacetModel(e,t,n,c,u);if(i.isLayerSpec(e))return new s.LayerModel(e,t,n,p,c,u,m);if(i.isUnitSpec(e))return new d.UnitModel(e,t,n,p,c,u,m);if(i.isRepeatSpec(e))return new l.RepeatModel(e,t,n,c,u);if(i.isConcatSpec(e))return new o.ConcatModel(e,t,n,c,u);throw new Error(a.message.INVALID_SPEC)}},{"../log":566,"../spec":572,"./concat":486,"./facet":505,"./layer":506,"./repeat":528,"./unit":551}],484:[function(e,t,n){"use strict";function a(e){return e.style?g.isArray(e.style)?e.style:[e.style]:[e.type]}function i(e,t,n){var i=n.mark[e],o=n[t.type];o[e]!==void 0&&(i=o[e]);for(var r=a(t),s=0,l=r;s<l.length;s++){var d=l[s],c=n.style[d],u=e;c&&c[u]!==void 0&&(i=c[u])}return i}function o(e,t,n){return e.type===f.QUANTITATIVE?t?t:n.numberFormat:void 0}function r(e,t){return"format("+e+", \""+(t||"")+"\")"}function s(e,t,n){return r(e,t||n.numberFormat)}function l(e,t,n,a){return e+" === null || isNaN("+e+") ? \"null\" : "+s(e,n,a)+" + \" - \" + "+s(t,n,a)}function d(e,t,n,a,i,o){if(!t||n){var r=n||i;return o?"utcFormat("+e+", '"+r+"')":"timeFormat("+e+", '"+r+"')"}return m.formatExpression(t,e,a,o)}Object.defineProperty(n,"__esModule",{value:!0});var p=e("../channel"),c=e("../fielddef"),u=e("../scale"),m=e("../timeunit"),f=e("../type"),g=e("../util");n.applyConfig=function(t,e,n){for(var a=0,i=n;a<i.length;a++){var o=i[a],r=e[o];r!==void 0&&(t[o]={value:r})}return t},n.applyMarkConfig=function(t,e,n){for(var a=0,o=n;a<o.length;a++){var r=o[a],s=i(r,e.markDef,e.config);s!==void 0&&(t[r]={value:s})}return t},n.getStyles=a,n.getMarkConfig=i,n.formatSignalRef=function(e,t,n,a){var i=o(e,t,a);if(e.bin){var s=c.field(e,{expr:n}),p=c.field(e,{expr:n,binSuffix:"end"});return{signal:l(s,p,i,a)}}if("quantitative"===e.type)return{signal:""+r(c.field(e,{expr:n}),i)};if(c.isTimeFieldDef(e)){var m=c.isScaleFieldDef(e)&&e.scale&&e.scale.type===u.ScaleType.UTC;return{signal:d(c.field(e,{expr:n}),e.timeUnit,t,a.text.shortTimeLabels,a.timeFormat,m)}}return{signal:"''+"+c.field(e,{expr:n})}},n.getSpecifiedOrDefaultValue=function(e,t){return void 0===e?t:e},n.numberFormat=o,n.numberFormatExpr=s,n.binFormatExpression=l,n.timeFormatExpression=d,n.sortParams=function(e,t){return(g.isArray(e)?e:[e]).reduce(function(e,n){return e.field.push(c.field(n,t)),e.order.push(n.sort||"ascending"),e},{field:[],order:[]})},n.titleMerger=function(e,t){return{explicit:e.explicit,value:e.value===t.value?e.value:e.value+", "+t.value}},n.binRequiresRange=function(e,t){return e.bin?p.isScaleChannel(t)&&g.contains(["ordinal","nominal"],e.type):(console.warn("Only use this method with binned field defs"),!1)}},{"../channel":476,"../fielddef":561,"../scale":569,"../timeunit":574,"../type":578,"../util":579}],485:[function(e,t,n){"use strict";function a(e,t,n){return o.__assign({autosize:1===p.keys(n).length&&n.type?n.type:n},d.extractTopLevelProperties(t),d.extractTopLevelProperties(e))}function i(e,t){var n=e.config?r.stripAndRedirectConfig(e.config):void 0,a=e.assembleTitle(),i=e.assembleGroupStyle(),s=e.assembleLayoutSignals();s=s.filter(function(e){return("width"===e.name||"height"===e.name)&&void 0!==e.value?(t[e.name]=e.value,!1):!0});var l=o.__assign({$schema:"https://vega.github.io/schema/vega/v3.0.json"},e.description?{description:e.description}:{},t,a?{title:a}:{},i?{style:i}:{},{data:[].concat(e.assembleSelectionData([]),u.assembleRootData(e.component.data))},e.assembleGroup(s.concat(e.assembleSelectionTopLevelSignals([]))),n?{config:n}:{});return{spec:l}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("../config"),s=e("../log"),l=e("../spec"),d=e("../toplevelprops"),p=e("../util"),c=e("./buildmodel"),u=e("./data/assemble"),m=e("./data/optimize");n.compile=function(e,t){t&&s.set(t);try{var n=r.initConfig(e.config),o=l.normalize(e,n),p=d.normalizeAutoSize(e.autosize,l.isLayerSpec(o)||l.isUnitSpec(o)),u=c.buildModel(o,null,"",void 0,void 0,n,"fit"===p.type);return u.parse(),m.optimizeDataflow(u.component.data),i(u,a(e,n,p))}finally{t&&s.reset()}}},{"../config":556,"../log":566,"../spec":572,"../toplevelprops":576,"../util":579,"./buildmodel":483,"./data/assemble":488,"./data/optimize":499,tslib:462}],486:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../spec"),o=e("./baseconcat"),r=e("./buildmodel"),s=e("./layoutsize/parse"),l=function(e){function t(t,n,a,o,s){var l=e.call(this,t,n,a,s,t.resolve)||this;return l.type="concat",l.isVConcat=i.isVConcatSpec(t),l.children=(i.isVConcatSpec(t)?t.vconcat:t.hconcat).map(function(e,t){return r.buildModel(e,l,l.getName("concat_"+t),void 0,o,s,!1)}),l}return a.__extends(t,e),t.prototype.parseLayoutSize=function(){s.parseConcatLayoutSize(this)},t.prototype.parseAxisGroup=function(){return null},t.prototype.assembleLayout=function(){return a.__assign({padding:{row:10,column:10},offset:10},this.isVConcat?{columns:1}:{},{bounds:"full",align:"each"})},t}(o.BaseConcatModel);n.ConcatModel=l},{"../spec":572,"./baseconcat":482,"./buildmodel":483,"./layoutsize/parse":509,tslib:462}],487:[function(e,t,n){"use strict";function a(e,t,n){return n.bin?(e[l.field(n,{})]=!0,e[l.field(n,{binSuffix:"end"})]=!0,p.binRequiresRange(n,t)&&(e[l.field(n,{binSuffix:"range"})]=!0)):e[l.field(n)]=!0,e}function i(e,t){for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];for(var i in a)a.hasOwnProperty(i)&&(n in e?e[n][i]=a[i]:e[n]={op:a[i]})}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("../../channel"),l=e("../../fielddef"),s=e("../../log"),d=e("../../util"),p=e("../common"),c=e("./dataflow"),u=function(e){function n(t,n){var a=e.call(this)||this;return a.dimensions=t,a.measures=n,a}return o.__extends(n,e),n.prototype.clone=function(){return new n(o.__assign({},this.dimensions),d.duplicate(this.measures))},n.makeFromEncoding=function(e){var t=!1;e.forEachFieldDef(function(e){e.aggregate&&(t=!0)});var i={},o={};return t?(e.forEachFieldDef(function(t,n){t.aggregate?"count"===t.aggregate?(i["*"]=i["*"]||{},i["*"].count=l.field(t,{aggregate:"count"})):(i[t.field]=i[t.field]||{},i[t.field][t.aggregate]=l.field(t),r.isScaleChannel(n)&&"unaggregated"===e.scaleDomain(n)&&(i[t.field].min=l.field(t,{aggregate:"min"}),i[t.field].max=l.field(t,{aggregate:"max"}))):a(o,n,t)}),0===d.keys(o).length+d.keys(i).length?null:new n(o,i)):null},n.makeFromTransform=function(e){for(var t={},a={},i=0,o=e.summarize,r;i<o.length;i++)r=o[i],r.aggregate&&("count"===r.aggregate?(a["*"]=a["*"]||{},a["*"].count=r.as||l.field(r)):(a[r.field]=a[r.field]||{},a[r.field][r.aggregate]=r.as||l.field(r)));for(var s=0,p=e.groupby,r;s<p.length;s++)r=p[s],t[r]=!0;return 0===d.keys(t).length+d.keys(a).length?null:new n(t,a)},n.prototype.merge=function(e){d.differ(this.dimensions,e.dimensions)?s.debug("different dimensions, cannot merge"):(i(this.measures,e.measures),e.remove())},n.prototype.addDimensions=function(e){var t=this;e.forEach(function(e){return t.dimensions[e]=!0})},n.prototype.dependentFields=function(){var e={};return d.keys(this.dimensions).forEach(function(t){return e[t]=!0}),d.keys(this.measures).forEach(function(t){return e[t]=!0}),e},n.prototype.producedFields=function(){var e=this,t={};return d.keys(this.measures).forEach(function(n){d.keys(e.measures[n]).forEach(function(e){t[e+"_"+n]=!0})}),t},n.prototype.assemble=function(){var e=this,t=[],n=[],a=[];d.keys(this.measures).forEach(function(i){d.keys(e.measures[i]).forEach(function(o){a.push(e.measures[i][o]),t.push(o),n.push(i)})});var i={type:"aggregate",groupby:d.keys(this.dimensions),ops:t,fields:n,as:a};return i},n}(c.DataFlowNode);n.AggregateNode=u},{"../../channel":476,"../../fielddef":561,"../../log":566,"../../util":579,"../common":484,"./dataflow":491,tslib:462}],488:[function(e,t,n){"use strict";function a(e){function t(a,r){if(a instanceof h.SourceNode&&!o.isUrlData(a.data)){e.push(r);var v={name:null,source:r.name,transform:[]};r=v}if(a instanceof m.ParseNode&&(a.parent instanceof h.SourceNode&&!r.source?r.format=i.__assign({},r.format||{},{parse:a.assembleFormatParse()}):r.transform=r.transform.concat(a.assembleTransforms())),a instanceof c.FacetNode)return r.name||(r.name="data_"+n++),!r.source||0<r.transform.length?(e.push(r),a.data=r.name):a.data=r.source,void a.assemble().forEach(function(t){return e.push(t)});if((a instanceof u.FilterNode||a instanceof y.NullFilterNode||a instanceof d.CalculateNode||a instanceof s.AggregateNode||a instanceof g.LookupNode||a instanceof f.IdentifierNode)&&r.transform.push(a.assemble()),(a instanceof _.NonPositiveFilterNode||a instanceof l.BinNode||a instanceof x.TimeUnitNode||a instanceof b.StackNode)&&(r.transform=r.transform.concat(a.assemble())),a instanceof s.AggregateNode&&!r.name&&(r.name="data_"+n++),a instanceof p.OutputNode)if(r.source&&0===r.transform.length)a.setSource(r.source);else if(a.parent instanceof p.OutputNode)a.setSource(r.name);else if(r.name||(r.name="data_"+n++),a.setSource(r.name),1===a.numChildren()){e.push(r);var v={name:null,source:r.name,transform:[]};r=v}switch(a.numChildren()){case 0:a instanceof p.OutputNode&&(!r.source||0<r.transform.length)&&e.push(r);break;case 1:t(a.children[0],r);break;default:r.name||(r.name="data_"+n++);var S=r.name;!r.source||0<r.transform.length?e.push(r):S=r.source,a.children.forEach(function(e){var n={name:null,source:S,transform:[]};t(e,n)});}}var n=0;return t}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),o=e("../../data"),r=e("../../util"),s=e("./aggregate"),l=e("./bin"),d=e("./calculate"),p=e("./dataflow"),c=e("./facet"),u=e("./filter"),m=e("./formatparse"),f=e("./indentifier"),g=e("./lookup"),_=e("./nonpositivefilter"),y=e("./nullfilter"),h=e("./source"),b=e("./stack"),x=e("./timeunit");n.assembleFacetData=function(e){var t=[],n=a(t);return e.children.forEach(function(t){return n(t,{source:e.name,name:null,transform:[]})}),t},n.assembleRootData=function(e){var n=r.vals(e.sources),i=[],o=a(i),s=0;n.forEach(function(e){e.hasName()||(e.dataName="source_"+s++);var t=e.assemble();o(e,t)}),i.forEach(function(e){0===e.transform.length&&delete e.transform}),i.sort(function(e,t){return 0===(e.transform||[]).length?-1:0===(t.transform||[]).length?1:0});for(var l=0,p=i,c;l<p.length;l++){c=p[l];for(var d=0,u=c.transform||[],m;d<u.length;d++)m=u[d],"lookup"===m.type&&(m.from=e.outputNodes[m.from].getSource())}return i}},{"../../data":557,"../../util":579,"./aggregate":487,"./bin":489,"./calculate":490,"./dataflow":491,"./facet":492,"./filter":493,"./formatparse":494,"./indentifier":495,"./lookup":496,"./nonpositivefilter":497,"./nullfilter":498,"./source":502,"./stack":503,"./timeunit":504,tslib:462}],489:[function(e,t,n){"use strict";function a(e,t,n,a){if(u.binRequiresRange(t,n)){var i=m.isUnitModel(e)?e.axis(n)||e.legend(n)||{}:{},o=p.field(t,{expr:"datum"}),r=p.field(t,{expr:"datum",binSuffix:"end"});return{formulaAs:p.field(t,{binSuffix:"range"}),formula:u.binFormatExpression(o,r,i.format,a)}}return{}}function i(e,t){return d.binToString(e)+"_"+t}function o(e){return!!e.model}function r(e,t){if(o(e)){var n=e.model;return{signal:n.getName(t+"_bins"),extentSignal:n.getName(t+"_extent")}}return e}function s(e,t){var n=p.normalizeBin(e.bin,void 0)||{},a=i(n,e.field),o=r(t,a),s=o.signal,d=o.extentSignal,c=l.__assign({bin:n,field:e.field,as:[p.field(e,{}),p.field(e,{binSuffix:"end"})]},s?{signal:s}:{},d?{extentSignal:d}:{});return{key:a,binComponent:c}}Object.defineProperty(n,"__esModule",{value:!0});var l=e("tslib"),d=e("../../bin"),p=e("../../fielddef"),c=e("../../util"),u=e("../common"),m=e("../model"),f=e("./dataflow"),g=function(e){function n(t){var n=e.call(this)||this;return n.bins=t,n}return l.__extends(n,e),n.prototype.clone=function(){return new n(c.duplicate(this.bins))},n.makeBinFromEncoding=function(e){var t=e.reduceFieldDef(function(t,n,i){if(n.bin){var o=s(n,{model:e}),r=o.key,d=o.binComponent;t[r]=l.__assign({},d,t[r],a(e,n,i,e.config))}return t},{});return 0===c.keys(t).length?null:new n(t)},n.makeFromTransform=function(e,t){var a=s(e,t),i=a.key,o=a.binComponent;return new n((r={},r[i]=o,r));var r},n.prototype.merge=function(e){this.bins=l.__assign({},this.bins,e.bins),e.remove()},n.prototype.producedFields=function(){var e={};return c.vals(this.bins).forEach(function(t){t.as.forEach(function(t){return e[t]=!0})}),e},n.prototype.dependentFields=function(){var e={};return c.vals(this.bins).forEach(function(t){e[t.field]=!0}),e},n.prototype.assemble=function(){return c.flatten(c.vals(this.bins).map(function(e){var t=[],n=l.__assign({type:"bin",field:e.field,as:e.as,signal:e.signal},e.bin);return!e.bin.extent&&e.extentSignal&&(t.push({type:"extent",field:e.field,signal:e.extentSignal}),n.extent={signal:e.extentSignal}),t.push(n),e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))},n}(f.DataFlowNode);n.BinNode=g},{"../../bin":475,"../../fielddef":561,"../../util":579,"../common":484,"../model":527,"./dataflow":491,tslib:462}],490:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../../util"),o=e("./dataflow"),r=function(e){function t(t){var n=e.call(this)||this;return n.transform=t,n}return a.__extends(t,e),t.prototype.clone=function(){return new t(i.duplicate(this.transform))},t.prototype.producedFields=function(){var e={};return e[this.transform.as]=!0,e},t.prototype.assemble=function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}},t}(o.DataFlowNode);n.CalculateNode=r},{"../../util":579,"./dataflow":491,tslib:462}],491:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=function(){function e(e){this.debugName=e,this._children=[],this._parent=null}return e.prototype.clone=function(){throw new Error("Cannot clone node")},e.prototype.producedFields=function(){return{}},e.prototype.dependentFields=function(){return{}},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(e){this._parent=e,e.addChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return this._children.length},e.prototype.addChild=function(e){this._children.push(e)},e.prototype.removeChild=function(e){this._children.splice(this._children.indexOf(e),1)},e.prototype.remove=function(){for(var e=0,t=this._children,n;e<t.length;e++)n=t[e],n.parent=this._parent;this._parent.removeChild(this)},e.prototype.insertAsParentOf=function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this},e.prototype.swapWithParent=function(){for(var e=this._parent,t=e.parent,n=0,a=this._children,i;n<a.length;n++)i=a[n],i.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this},e}();n.DataFlowNode=i;var o=function(e){function t(t,n,a){var i=e.call(this,t)||this;return i.type=n,i.refCounts=a,i._source=i._name=t,i.refCounts&&!(i._name in i.refCounts)&&(i.refCounts[i._name]=0),i}return a.__extends(t,e),t.prototype.clone=function(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e},t.prototype.getSource=function(){return this.refCounts[this._name]++,this._source},t.prototype.isRequired=function(){return!!this.refCounts[this._name]},t.prototype.setSource=function(e){this._source=e},t}(i);n.OutputNode=o},{tslib:462}],492:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../../channel"),o=e("../../log"),r=e("../../scale"),s=e("../../vega.schema"),l=e("../scale/domain"),d=e("./dataflow"),p=function(e){function t(t,n,a){var o=e.call(this)||this;return o.model=t,o.name=n,o.data=a,t.facet.column&&(o.columnFields=[t.field(i.COLUMN)],o.columnName=t.getName("column_domain"),t.fieldDef(i.COLUMN).bin&&o.columnFields.push(t.field(i.COLUMN,{binSuffix:"end"}))),t.facet.row&&(o.rowFields=[t.field(i.ROW)],o.rowName=t.getName("row_domain"),t.fieldDef(i.ROW).bin&&o.rowFields.push(t.field(i.ROW,{binSuffix:"end"}))),o.childModel=t.child,o}return a.__extends(t,e),Object.defineProperty(t.prototype,"fields",{get:function(){var e=[];return this.columnFields&&(e=e.concat(this.columnFields)),this.rowFields&&(e=e.concat(this.rowFields)),e},enumerable:!0,configurable:!0}),t.prototype.getSource=function(){return this.name},t.prototype.getChildIndependentFieldsWithStep=function(){for(var e={},t=0,n=["x","y"];t<n.length;t++){var a=n[t],i=this.childModel.component.scales[a];if(i&&!i.merged){var d=i.get("type"),p=i.get("range");if(r.hasDiscreteDomain(d)&&s.isVgRangeStep(p)){var c=l.assembleDomain(this.childModel,a),u=l.getFieldFromDomain(c);u?e[a]=u:o.warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e},t.prototype.assembleRowColumnData=function(e,t,n){var i={},o="row"===e?"y":"x";return n[o]&&(t?i={fields:["distinct_"+n[o]],ops:["max"],as:["distinct_"+n[o]]}:i={fields:[n[o]],ops:["distinct"]}),{name:"row"===e?this.rowName:this.columnName,source:t||this.data,transform:[a.__assign({type:"aggregate",groupby:"row"===e?this.rowFields:this.columnFields},i)]}},t.prototype.assemble=function(){var e=[],t=null,n=this.getChildIndependentFieldsWithStep();if(this.columnName&&this.rowName&&(n.x||n.y)){t="cross_"+this.columnName+"_"+this.rowName;var a=[].concat(n.x?[n.x]:[],n.y?[n.y]:[]),i=a.map(function(){return"distinct"});e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.columnFields.concat(this.rowFields),fields:a,ops:i}]})}return this.columnName&&e.push(this.assembleRowColumnData("column",t,n)),this.rowName&&e.push(this.assembleRowColumnData("row",t,n)),e},t}(d.DataFlowNode);n.FacetNode=p},{"../../channel":476,"../../log":566,"../../scale":569,"../../vega.schema":581,"../scale/domain":533,"./dataflow":491,tslib:462}],493:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../../filter"),o=e("../../util"),r=e("./dataflow"),s=function(e){function t(t,n){var a=e.call(this)||this;return a.model=t,a.filter=n,a.expr=i.expression(a.model,a.filter,a),a}return a.__extends(t,e),t.prototype.clone=function(){return new t(this.model,o.duplicate(this.filter))},t.prototype.assemble=function(){return{type:"filter",expr:this.expr}},t}(r.DataFlowNode);n.FilterNode=s},{"../../filter":562,"../../util":579,"./dataflow":491,tslib:462}],494:[function(e,t,n){"use strict";function a(e,t){var n="datum["+c.stringValue(e)+"]";if("number"===t)return"toNumber("+n+")";if("boolean"===t)return"toBoolean("+n+")";if("string"===t)return"toString("+n+")";if("date"===t)return"toDate("+n+")";if(0===t.indexOf("date:")){var a=t.slice(5,t.length);return"timeParse("+n+","+a+")"}if(0===t.indexOf("utc:")){var a=t.slice(4,t.length);return"utcParse("+n+","+a+")"}return l.warn(l.message.unrecognizedParse(t)),null}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),o=e("../../aggregate"),r=e("../../fielddef"),s=e("../../filter"),l=e("../../log"),d=e("../../logical"),p=e("../../transform"),c=e("../../util"),u=e("../model"),m=e("./dataflow"),f=function(e){function t(t){var n=e.call(this)||this;return n._parse={},n._parse=t,n}return i.__extends(t,e),t.prototype.clone=function(){return new t(c.duplicate(this.parse))},t.make=function(e){var n={},a={};(e.transforms||[]).forEach(function(e){p.isCalculate(e)?a[e.as]=!0:p.isFilter(e)&&d.forEachLeave(e.filter,function(e){(s.isEqualFilter(e)||s.isRangeFilter(e)||s.isOneOfFilter(e))&&e.timeUnit&&(n[e.field]="date")})},{}),(u.isUnitModel(e)||u.isFacetModel(e))&&e.forEachFieldDef(function(e){if(r.isTimeFieldDef(e))n[e.field]="date";else if(r.isNumberFieldDef(e)){if(a[e.field]||o.isCountingAggregateOp(e.aggregate))return;n[e.field]="number"}});var i=e.data;if(i&&i.format&&i.format.parse){var m=i.format.parse;c.keys(m).forEach(function(e){n[e]=m[e]})}var f=e.component.data.ancestorParse;return c.keys(f).forEach(function(e){n[e]===f[e]?delete n[e]:l.warn(l.message.differentParse(e,n[e],f[e]))}),0===c.keys(n).length?null:new t(n)},Object.defineProperty(t.prototype,"parse",{get:function(){return this._parse},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){this._parse=i.__assign({},this._parse,e.parse),e.remove()},t.prototype.assembleFormatParse=function(){return this._parse},t.prototype.producedFields=function(){return c.toSet(c.keys(this.parse))},t.prototype.dependentFields=function(){return c.toSet(c.keys(this.parse))},t.prototype.assembleTransforms=function(){var e=this;return c.keys(this._parse).map(function(t){var n=a(t,e._parse[t]);if(!n)return null;return{type:"formula",expr:n,as:t}}).filter(function(e){return null!==e})},t}(m.DataFlowNode);n.ParseNode=f},{"../../aggregate":473,"../../fielddef":561,"../../filter":562,"../../log":566,"../../logical":567,"../../transform":577,"../../util":579,"../model":527,"./dataflow":491,tslib:462}],495:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../../selection"),o=e("./dataflow"),r=function(e){function t(){return e.call(this)||this}return a.__extends(t,e),t.prototype.clone=function(){return new t},t.prototype.producedFields=function(){return e={},e[i.SELECTION_ID]=!0,e;var e},t.prototype.assemble=function(){return{type:"identifier",as:i.SELECTION_ID}},t}(o.DataFlowNode);n.IdentifierNode=r},{"../../selection":570,"./dataflow":491,tslib:462}],496:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("vega-util"),o=e("../../log"),r=e("./dataflow"),l=e("./source"),s=function(e){function t(t,n){var a=e.call(this)||this;return a.transform=t,a.secondary=n,a}return a.__extends(t,e),t.make=function(e,n,a){var i=e.component.data.sources,o=new l.SourceNode(n.from.data),s=i[o.hash()];s||(i[o.hash()]=o,s=o);var d=e.getName("lookup_"+a),p=new r.OutputNode(d,"lookup",e.component.data.outputNodeRefCounts);return p.parent=s,e.component.data.outputNodes[d]=p,new t(n,p.getSource())},t.prototype.producedFields=function(){return i.toSet(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))},t.prototype.assemble=function(){var e;if(this.transform.from.fields)e=a.__assign({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var t=this.transform.as;i.isString(t)||(o.warn(o.message.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return a.__assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e,this.transform.default?{default:this.transform.default}:{})},t}(r.DataFlowNode);n.LookupNode=s},{"../../log":566,"./dataflow":491,"./source":502,tslib:462,"vega-util":588}],497:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../../channel"),o=e("../../scale"),r=e("../../util"),s=e("./dataflow"),l=function(e){function t(t){var n=e.call(this)||this;return n._filter=t,n}return a.__extends(t,e),t.prototype.clone=function(){return new t(a.__assign({},this._filter))},t.make=function(e){var n=i.SCALE_CHANNELS.reduce(function(t,n){var a=e.getScaleComponent(n);return a&&e.field(n)?(t[e.field(n)]=a.get("type")===o.ScaleType.LOG,t):t},{});return r.keys(n).length?new t(n):null},Object.defineProperty(t.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),t.prototype.assemble=function(){var e=this;return r.keys(this._filter).filter(function(t){return e._filter[t]}).map(function(e){return{type:"filter",expr:"datum["+r.stringValue(e)+"] > 0"}})},t}(s.DataFlowNode);n.NonPositiveFilterNode=l},{"../../channel":476,"../../scale":569,"../../util":579,"./dataflow":491,tslib:462}],498:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../../channel"),o=e("../../scale"),r=e("../../type"),s=e("../../util"),l=e("./dataflow"),d=function(e){function t(t){var n=e.call(this)||this;return n._filteredFields=t,n}return a.__extends(t,e),t.prototype.clone=function(){return new t(s.duplicate(this._filteredFields))},t.make=function(e){var n=e.reduceFieldDef(function(t,n,a){if("filter"===e.config.invalidValues&&!n.aggregate&&n.field){var r=i.isScaleChannel(a)&&e.getScaleComponent(a);if(r){var s=r.get("type");o.hasContinuousDomain(s)&&(t[n.field]=n)}}return t},{});return 0===s.keys(n).length?null:new t(n)},Object.defineProperty(t.prototype,"filteredFields",{get:function(){return this._filteredFields},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){var n=this,i=s.keys(this._filteredFields).map(function(e){return e+" "+s.hash(n._filteredFields[e])}),t=s.keys(e.filteredFields).map(function(t){return t+" "+s.hash(e.filteredFields[t])});s.differArray(i,t)||(this._filteredFields=a.__assign({},this._filteredFields,e._filteredFields),e.remove())},t.prototype.assemble=function(){var e=this,t=s.keys(this._filteredFields).reduce(function(t,n){var a=e._filteredFields[n];return null!==a&&(t.push("datum["+s.stringValue(a.field)+"] !== null"),s.contains([r.QUANTITATIVE,r.TEMPORAL],a.type)&&t.push("!isNaN(datum["+s.stringValue(a.field)+"])")),t},[]);return 0<t.length?{type:"filter",expr:t.join(" && ")}:null},t}(l.DataFlowNode);n.NullFilterNode=d},{"../../channel":476,"../../scale":569,"../../type":578,"../../util":579,"./dataflow":491,tslib:462}],499:[function(e,t,n){"use strict";function a(e){function t(a){if(!(a instanceof u.FacetNode)){var i=a.clone();if(i instanceof c.OutputNode){var o=n.FACET_SCALE_PREFIX+i.getSource();i.setSource(o),e.model.component.data.outputNodes[o]=i}else(i instanceof p.AggregateNode||i instanceof _.StackNode)&&i.addDimensions(e.fields);return d.flatten(a.children.map(t)).forEach(function(e){return e.parent=i}),[i]}return d.flatten(a.children.map(t))}return t}function i(e){if(!(e instanceof u.FacetNode))e.children.forEach(i);else if(1===e.numChildren()&&!(e.children[0]instanceof c.OutputNode)){var t=e.children[0];(t instanceof p.AggregateNode||t instanceof _.StackNode)&&t.addDimensions(e.fields),t.swapWithParent(),i(e)}else{o(e.model.component.data.main);var n=d.flatten(e.children.map(a(e)));n.forEach(function(t){return t.parent=e.model.component.data.main})}}function o(e){if(e instanceof c.OutputNode&&e.type===l.MAIN&&1===e.numChildren()){var t=e.children[0];t instanceof u.FacetNode||(t.swapWithParent(),o(e))}}function r(e){e instanceof m.NonPositiveFilterNode&&d.every(d.vals(e.filter),function(e){return!1===e})&&e.remove(),e instanceof f.NullFilterNode&&d.every(d.vals(e.filteredFields),function(e){return null===e})&&e.remove(),e instanceof c.OutputNode&&!e.isRequired()&&e.remove(),e.children.forEach(r)}function s(e){function t(e){0===e.numChildren()?n.push(e):e.children.forEach(t)}var n=[];return e.forEach(t),n}Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../data"),d=e("../../util"),p=e("./aggregate"),c=e("./dataflow"),u=e("./facet"),m=e("./nonpositivefilter"),f=e("./nullfilter"),g=e("./optimizers"),_=e("./stack");n.FACET_SCALE_PREFIX="scale_",n.optimizeDataflow=function(e){var t=d.vals(e.sources);t.forEach(r),t=t.filter(function(e){return 0<e.numChildren()}),s(t).forEach(g.iterateFromLeaves(g.removeUnusedSubtrees)),t=t.filter(function(e){return 0<e.numChildren()}),s(t).forEach(g.iterateFromLeaves(g.moveParseUp)),s(t).forEach(g.removeDuplicateTimeUnits),t.forEach(i),d.keys(e.sources).forEach(function(t){0===e.sources[t].numChildren()&&delete e.sources[t]})}},{"../../data":557,"../../util":579,"./aggregate":487,"./dataflow":491,"./facet":492,"./nonpositivefilter":497,"./nullfilter":498,"./optimizers":500,"./stack":503}],500:[function(e,t,n){"use strict";function a(e){function t(n){if(!(n instanceof l.SourceNode)){var a=n.parent;e(n)&&t(a)}}return t}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),o=e("../../util"),r=e("./dataflow"),s=e("./formatparse"),l=e("./source"),d=e("./timeunit");n.iterateFromLeaves=a,n.moveParseUp=function(e){var t=e.parent;if(e instanceof s.ParseNode){if(t instanceof l.SourceNode)return!1;if(1<t.numChildren())return!0;if(t instanceof s.ParseNode)t.merge(e);else{if(o.hasIntersection(t.producedFields(),e.dependentFields()))return!0;e.swapWithParent()}}return!0},n.removeUnusedSubtrees=function(e){return e instanceof r.OutputNode||0<e.numChildren()?!1:(e.remove(),!0)},n.removeDuplicateTimeUnits=function(e){var t={};return a(function(e){if(e instanceof d.TimeUnitNode){var n=e.producedFields(),a=o.keys(n).every(function(e){return!!t[e]});a?e.remove():t=i.__assign({},t,n)}return!0})(e)}},{"../../util":579,"./dataflow":491,"./formatparse":494,"./source":502,"./timeunit":504,tslib:462}],501:[function(e,t,n){"use strict";function a(e,t){if(e.data||!e.parent){var n=new N.SourceNode(e.data),a=n.hash();return a in t?t[a]:(t[a]=n,n)}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function i(e){function n(e){t?e.parent?o.insertAsParentOf(e):e.parent=o:t=e.parent||e,o=e}var t=null,a=0,i,o;e.transforms.forEach(function(o){if(c.isCalculate(o))i=new y.CalculateNode(o);else if(c.isFilter(o)){var t={},s=o.filter,m=null;if(d.isEqualFilter(s)?m=s.equal:d.isRangeFilter(s)?m=s.range[0]:d.isOneOfFilter(s)&&(m=(s.oneOf||s["in"])[0]),m&&(l.isDateTime(m)?t[s.field]="date":r.isNumber(m)?t[s.field]="number":r.isString(m)&&(t[s.field]="string")),0<u.keys(t).length){var h=new v.ParseNode(t);n(h)}i=new x.FilterNode(e,o.filter)}else if(c.isBin(o))i=_.BinNode.makeFromTransform(o,{model:e});else if(c.isTimeUnit(o))i=C.TimeUnitNode.makeFromTransform(o);else if(c.isSummarize(o))i=g.AggregateNode.makeFromTransform(o),f.requiresSelectionId(e)&&(n(i),i=new S.IdentifierNode);else if(c.isLookup(o))i=T.LookupNode.make(e,o,a++);else return void p.warn(p.message.invalidTransformIgnored(o));n(i)});var s=i;return{first:t,last:s}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("vega-util"),s=e("../../data"),l=e("../../datetime"),d=e("../../filter"),p=e("../../log"),c=e("../../transform"),u=e("../../util"),m=e("../model"),f=e("../selection/selection"),g=e("./aggregate"),_=e("./bin"),y=e("./calculate"),h=e("./dataflow"),b=e("./facet"),x=e("./filter"),v=e("./formatparse"),S=e("./indentifier"),T=e("./lookup"),k=e("./nonpositivefilter"),E=e("./nullfilter"),N=e("./source"),A=e("./stack"),C=e("./timeunit");n.parseTransformArray=i,n.parseData=function(e){var t=a(e,e.component.data.sources),n=e.component.data.outputNodes,r=e.component.data.outputNodeRefCounts,l=t;if(f.requiresSelectionId(e)&&!e.parent){var d=new S.IdentifierNode;d.parent=l,l=d}var p=e.parent&&m.isLayerModel(e.parent);if((m.isUnitModel(e)||m.isFacetModel(e))&&p){var c=_.BinNode.makeBinFromEncoding(e);c&&(c.parent=l,l=c)}if(0<e.transforms.length){var u=i(e),y=u.first,x=u.last;y.parent=l,l=x}var T=v.ParseNode.make(e);if(T&&(T.parent=l,l=T),m.isUnitModel(e)||m.isFacetModel(e)){var N=E.NullFilterNode.make(e);if(N&&(N.parent=l,l=N),!p){var c=_.BinNode.makeBinFromEncoding(e);c&&(c.parent=l,l=c)}var w=C.TimeUnitNode.makeFromEncoding(e);w&&(w.parent=l,l=w)}var O=e.getName(s.RAW),D=new h.OutputNode(O,s.RAW,r);if(n[O]=D,D.parent=l,l=D,m.isUnitModel(e)){var P=g.AggregateNode.makeFromEncoding(e);if(P&&(P.parent=l,l=P,f.requiresSelectionId(e))){var d=new S.IdentifierNode;d.parent=l,l=d}var R=A.StackNode.make(e);R&&(R.parent=l,l=R);var I=k.NonPositiveFilterNode.make(e);I&&(I.parent=l,l=I)}var M=e.getName(s.MAIN),F=new h.OutputNode(M,s.MAIN,r);n[M]=F,F.parent=l,l=F;var B=null;if(m.isFacetModel(e)){var z=e.getName("facet");B=new b.FacetNode(e,z,F.getSource()),n[z]=B,B.parent=l,l=B}var j=o.__assign({},e.component.data.ancestorParse,T?T.parse:{});return o.__assign({},e.component.data,{outputNodes:n,outputNodeRefCounts:r,raw:D,main:F,facetRoot:B,ancestorParse:j})}},{"../../data":557,"../../datetime":558,"../../filter":562,"../../log":566,"../../transform":577,"../../util":579,"../model":527,"../selection/selection":540,"./aggregate":487,"./bin":489,"./calculate":490,"./dataflow":491,"./facet":492,"./filter":493,"./formatparse":494,"./indentifier":495,"./lookup":496,"./nonpositivefilter":497,"./nullfilter":498,"./source":502,"./stack":503,"./timeunit":504,tslib:462,"vega-util":588}],502:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../../data"),o=e("../../util"),r=e("./dataflow"),s=0,l=function(e){function t(t){var n=e.call(this)||this;if(n._id=s++,t=t||{name:"source"},i.isInlineData(t))n._data={values:t.values};else if(!i.isUrlData(t))i.isNamedData(t)&&(n._name=t.name,n._data={});else if(n._data={url:t.url},t.format||(t.format={}),!t.format||!t.format.type){var r=/(?:\.([^.]+))?$/.exec(t.url)[1];o.contains(["json","csv","tsv","topojson"],r)||(r="json"),t.format.type=r}if(!i.isNamedData(t)){var l=a.__assign({type:"json"},t.format||{}),d=l.parse,p=void 0===d?null:d,c=a.__rest(l,["parse"]);n._data.format=c}return n}return a.__extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.hasName=function(){return!!this._name},Object.defineProperty(t.prototype,"dataName",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{set:function(){throw new Error("Source nodes have to be roots.")},enumerable:!0,configurable:!0}),t.prototype.remove=function(){throw new Error("Source nodes are roots and cannot be removed.")},t.prototype.hash=function(){return i.isInlineData(this._data)?1e3<this._data.values.length?o.hash([this._data.format,this._id]):o.hash(this._data):i.isUrlData(this._data)?o.hash([this._data.url,this._data.format]):this._name},t.prototype.assemble=function(){return a.__assign({name:this._name},this._data,{transform:[]})},t}(r.DataFlowNode);n.SourceNode=l},{"../../data":557,"../../util":579,"./dataflow":491,tslib:462}],503:[function(e,t,n){"use strict";function a(e){return e.stack.stackBy.reduce(function(e,t){var n=t.fieldDef,a=r.field(n);return a&&e.push(a),e},[])}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),o=e("vega-util"),r=e("../../fielddef"),s=e("../../util"),l=e("../common"),d=e("./dataflow"),p=function(e){function t(t){var n=e.call(this)||this;return n._stack=t,n}return i.__extends(t,e),t.prototype.clone=function(){return new t(s.duplicate(this._stack))},t.make=function(e){var n=e.stack;if(!n)return null;var i;n.groupbyChannel&&(i=e.fieldDef(n.groupbyChannel));var o=a(e),r=e.encoding.order,s;return s=r?l.sortParams(r):o.reduce(function(e,t){return e.field.push(t),e.order.push("descending"),e},{field:[],order:[]}),new t({dimensionFieldDef:i,field:e.field(n.fieldChannel),facetby:[],stackby:o,sort:s,offset:n.offset,impute:n.impute})},Object.defineProperty(t.prototype,"stack",{get:function(){return this._stack},enumerable:!0,configurable:!0}),t.prototype.addDimensions=function(e){this._stack.facetby=this._stack.facetby.concat(e)},t.prototype.dependentFields=function(){var e={};e[this._stack.field]=!0,this.getGroupbyFields().forEach(function(t){return e[t]=!0}),this._stack.facetby.forEach(function(t){return e[t]=!0});var t=this._stack.sort.field;return o.isArray(t)?t.forEach(function(t){return e[t]=!0}):e[t]=!0,e},t.prototype.producedFields=function(){var e={};return e[this._stack.field+"_start"]=!0,e[this._stack.field+"_end"]=!0,e},t.prototype.getGroupbyFields=function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute;return t?t.bin?n?[r.field(t,{binSuffix:"mid"})]:[r.field(t,{}),r.field(t,{binSuffix:"end"})]:[r.field(t)]:[]},t.prototype.assemble=function(){var e=[],t=this._stack,n=t.facetby,a=t.field,i=t.dimensionFieldDef,o=t.impute,s=t.offset,l=t.sort,d=t.stackby;if(o&&i){var p=i?r.field(i,{binSuffix:"mid"}):void 0;i.bin&&e.push({type:"formula",expr:"("+r.field(i,{expr:"datum"})+"+"+r.field(i,{expr:"datum",binSuffix:"end"})+")/2",as:p}),e.push({type:"impute",field:a,groupby:d,key:p,method:"value",value:0})}return e.push({type:"stack",groupby:this.getGroupbyFields().concat(n),field:a,sort:l,as:[a+"_start",a+"_end"],offset:s}),e},t}(d.DataFlowNode);n.StackNode=p},{"../../fielddef":561,"../../util":579,"../common":484,"./dataflow":491,tslib:462,"vega-util":588}],504:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../../fielddef"),o=e("../../timeunit"),r=e("../../util"),s=e("./dataflow"),l=function(e){function n(t){var n=e.call(this)||this;return n.formula=t,n}return a.__extends(n,e),n.prototype.clone=function(){return new n(r.duplicate(this.formula))},n.makeFromEncoding=function(e){var t=e.reduceFieldDef(function(e,t){if(t.timeUnit){var n=i.field(t);e[n]={as:n,timeUnit:t.timeUnit,field:t.field}}return e},{});return 0===r.keys(t).length?null:new n(t)},n.makeFromTransform=function(e){return new n((t={},t[e.field]={as:e.as,timeUnit:e.timeUnit,field:e.field},t));var t},n.prototype.merge=function(e){this.formula=a.__assign({},this.formula,e.formula),e.remove()},n.prototype.producedFields=function(){var e={};return r.vals(this.formula).forEach(function(t){e[t.as]=!0}),e},n.prototype.dependentFields=function(){var e={};return r.vals(this.formula).forEach(function(t){e[t.field]=!0}),e},n.prototype.assemble=function(){return r.vals(this.formula).map(function(e){return{type:"formula",as:e.as,expr:o.fieldExpr(e.timeUnit,e.field)}})},n}(s.DataFlowNode);n.TimeUnitNode=l},{"../../fielddef":561,"../../timeunit":574,"../../util":579,"./dataflow":491,tslib:462}],505:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../channel"),o=e("../encoding"),r=e("../fielddef"),s=e("../log"),l=e("../scale"),d=e("../util"),p=e("../vega.schema"),c=e("./buildmodel"),u=e("./data/assemble"),m=e("./data/parse"),f=e("./layout/header"),g=e("./layoutsize/parse"),_=e("./model"),y=e("./repeater"),h=e("./resolve"),b=e("./scale/domain"),x=function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,o,t.resolve)||this;r.type="facet",r.child=c.buildModel(t.spec,r,r.getName("child"),void 0,i,o,!1),r.children=[r.child];var s=y.replaceRepeaterInFacet(t.facet,i);return r.facet=r.initFacet(s),r}return a.__extends(t,e),t.prototype.initFacet=function(e){return o.reduce(e,function(e,t,n){return d.contains([i.ROW,i.COLUMN],n)?void 0===t.field?(s.warn(s.message.emptyFieldDef(t,n)),e):(e[n]=r.normalize(t,n),e):(s.warn(s.message.incompatibleChannel(n,"facet")),e)},{})},t.prototype.channelHasField=function(e){return!!this.facet[e]},t.prototype.fieldDef=function(e){return this.facet[e]},t.prototype.parseData=function(){this.component.data=m.parseData(this),this.child.parseData()},t.prototype.parseLayoutSize=function(){g.parseChildrenLayoutSize(this)},t.prototype.parseSelection=function(){this.child.parseSelection(),this.component.selection=this.child.component.selection},t.prototype.parseMarkGroup=function(){this.child.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){this.child.parseAxisAndHeader(),this.parseHeader("column"),this.parseHeader("row"),this.mergeChildAxis("x"),this.mergeChildAxis("y")},t.prototype.parseHeader=function(e){if(this.channelHasField(e)){var t=this.facet[e],n=t.header||{},a=void 0===n.title?r.title(t,this.config):n.title;this.child.component.layoutHeaders[e].title&&(a+=" / "+this.child.component.layoutHeaders[e].title,this.child.component.layoutHeaders[e].title=null),this.component.layoutHeaders[e]={title:a,facetFieldDef:t,header:[this.makeHeaderComponent(e,!0)]}}},t.prototype.makeHeaderComponent=function(e,t){var n="row"===e?"height":"width";return{labels:t,sizeSignal:this.child.component.layoutSize.get(n)?this.child.getSizeSignalRef(n):void 0,axes:[]}},t.prototype.mergeChildAxis=function(e){var t=this.child;if(t.component.axes[e]){var n=this.component,a=n.layoutHeaders,i=n.resolve;if(i.axis[e]=h.parseGuideResolve(i,e),"shared"===i.axis[e])for(var o="x"===e?"column":"row",r=a[o],s=0,l=t.component.axes[e];s<l.length;s++){var d=l[s],p=d.main,c=f.getHeaderType(p.get("orient"));r[c]=r[c]||[this.makeHeaderComponent(o,!1)],r[c][0].axes.push(p.combine()),delete d.main}else;}},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.child.assembleSelectionTopLevelSignals(e)},t.prototype.assembleSelectionSignals=function(){return this.child.assembleSelectionSignals(),[]},t.prototype.assembleSelectionData=function(e){return this.child.assembleSelectionData(e)},t.prototype.getLayoutBandMixins=function(e){for(var t={},n="header"===e?"headerBand":"footerBand",a=0,i=["row","column"];a<i.length;a++){var o=i[a],r=this.component.layoutHeaders[o],s=r[e];if(s&&s[0]){var l="row"===o?"height":"width";this.child.component.layoutSize.get(l)||(t[n]=t[n]||{},t[n][o]=0.5)}}return t},t.prototype.assembleLayout=function(){var e=this.channelHasField("column")?this.columnDistinctSignal():1;return a.__assign({padding:{row:10,column:10}},this.getLayoutBandMixins("header"),this.getLayoutBandMixins("footer"),{offset:10,columns:e,bounds:"full",align:"all"})},t.prototype.assembleLayoutSignals=function(){return this.child.assembleLayoutSignals()},t.prototype.columnDistinctSignal=function(){if(!(this.parent&&this.parent instanceof t)){var e=this.getName("column_domain");return{signal:"length(data('"+e+"'))"}}},t.prototype.assembleGroup=function(n){return this.parent&&this.parent instanceof t?a.__assign({},this.channelHasField("column")?{encode:{update:{columns:{field:r.field(this.facet.column,{prefix:"distinct"})}}}}:{},e.prototype.assembleGroup.call(this,n)):e.prototype.assembleGroup.call(this,n)},t.prototype.getCardinalityAggregateForChild=function(){var e=[],n=[];if(this.child instanceof t)this.child.channelHasField("column")&&(e.push(r.field(this.child.facet.column)),n.push("distinct"));else for(var a=0,i=["x","y"];a<i.length;a++){var o=i[a],d=this.child.component.scales[o];if(d&&!d.merged){var c=d.get("type"),u=d.get("range");if(l.hasDiscreteDomain(c)&&p.isVgRangeStep(u)){var m=b.assembleDomain(this.child,o),f=b.getFieldFromDomain(m);f?(e.push(f),n.push("distinct")):s.warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e.length?{fields:e,ops:n}:void 0},t.prototype.assembleMarks=function(){var e=this,t=e.child,n=e.facet,o=this.component.data.facetRoot,r=u.assembleFacetData(o),s=this.channelHasField(i.ROW),l=this.channelHasField(i.COLUMN),d=t.assembleLayoutSize(),p={};s&&l&&(p.aggregate={cross:!0});var c=this.getCardinalityAggregateForChild();c&&(p.aggregate=a.__assign({},p.aggregate,c));var m=t.assembleTitle(),f=t.assembleGroupStyle(),g=a.__assign({name:this.getName("cell"),type:"group"},m?{title:m}:{},f?{style:f}:{},{from:{facet:a.__assign({name:o.name,data:o.data,groupby:[].concat(s?[this.field(i.ROW)]:[],l?[this.field(i.COLUMN)]:[])},p)},sort:{field:[].concat(s?[this.field(i.ROW,{expr:"datum"})]:[],l?[this.field(i.COLUMN,{expr:"datum"})]:[]),order:[].concat(s?[n.row.sort||"ascending"]:[],l?[n.column.sort||"ascending"]:[])}},0<r.length?{data:r}:{},d?{encode:{update:d}}:{},t.assembleGroup());return[g]},t.prototype.getMapping=function(){return this.facet},t}(_.ModelWithField);n.FacetModel=x},{"../channel":476,"../encoding":559,"../fielddef":561,"../log":566,"../scale":569,"../util":579,"../vega.schema":581,"./buildmodel":483,"./data/assemble":488,"./data/parse":501,"./layout/header":507,"./layoutsize/parse":509,"./model":527,"./repeater":529,"./resolve":530,"./scale/domain":533,tslib:462}],506:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),o=e("../log"),r=e("../spec"),i=e("../util"),s=e("./axis/parse"),l=e("./data/parse"),d=e("./layoutsize/assemble"),p=e("./layoutsize/parse"),c=e("./legend/assemble"),u=e("./model"),m=e("./selection/selection"),f=e("./unit"),g=function(e){function t(n,i,s,l,d,p,c){var u=e.call(this,n,i,s,p,n.resolve)||this;u.type="layer";var m=a.__assign({},l,n.width?{width:n.width}:{},n.height?{height:n.height}:{});return u.initSize(m),u.children=n.layer.map(function(e,n){if(r.isLayerSpec(e))return new t(e,u,u.getName("layer_"+n),m,d,p,c);if(r.isUnitSpec(e))return new f.UnitModel(e,u,u.getName("layer_"+n),m,d,p,c);throw new Error(o.message.INVALID_SPEC)}),u}return a.__extends(t,e),t.prototype.parseData=function(){this.component.data=l.parseData(this);for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseData()},t.prototype.parseLayoutSize=function(){p.parseLayerLayoutSize(this)},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),i.keys(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})},n=0,a=this.children,o;n<a.length;n++)o=a[n],t(o)},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){s.parseLayerAxis(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleSelectionSignals())},[])},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},d.assembleLayoutSignals(this))},t.prototype.assembleSelectionData=function(){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},[])},t.prototype.assembleTitle=function(){var t=e.prototype.assembleTitle.call(this);if(t)return t;for(var n=0,a=this.children,i;n<a.length;n++)if(i=a[n],t=i.assembleTitle(),t)return t},t.prototype.assembleLayout=function(){return null},t.prototype.assembleMarks=function(){return m.assembleLayerSelectionMarks(this,i.flatten(this.children.map(function(e){return e.assembleMarks()})))},t.prototype.assembleLegends=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLegends())},c.assembleLegends(this))},t}(u.Model);n.LayerModel=g},{"../log":566,"../spec":572,"../util":579,"./axis/parse":480,"./data/parse":501,"./layoutsize/assemble":508,"./layoutsize/parse":509,"./legend/assemble":510,"./model":527,"./selection/selection":540,"./unit":551,tslib:462}],507:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../../fielddef"),o=e("../common");n.HEADER_CHANNELS=["row","column"],n.HEADER_TYPES=["header","footer"],n.getHeaderType=function(e){return"top"===e||"left"===e?"header":"footer"},n.getTitleGroup=function(e,t){var n=e.component.layoutHeaders[t].title,i="row"===t?"vertical":void 0;return{name:e.getName(t+"_title"),role:t+"-title",type:"group",marks:[{type:"text",role:t+"-title-text",style:"guide-title",encode:{update:a.__assign({align:{value:"center"},text:{value:n}},"vertical"===i?{angle:{value:270}}:{})}}]}},n.getHeaderGroup=function(e,t,n,r,s){if(s){var l=null;if(r.facetFieldDef&&s.labels){var d=r.facetFieldDef,p=d.header?d.header.format:void 0;l={text:o.formatSignalRef(d,p,"parent",e.config),offset:10,orient:"row"===t?"left":"top",style:"guide-label",encode:{update:a.__assign({fontWeight:{value:"normal"},angle:{value:0},fontSize:{value:10}},"row"===t?{align:{value:"right"},baseline:{value:"middle"}}:{})}}}var c=s.axes,u=c&&0<c.length;if(l||u){var m="row"===t?"height":"width";return a.__assign({name:e.getName(t+"_"+n),type:"group",role:t+"-"+n},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:{field:i.field(r.facetFieldDef,{expr:"datum"}),order:r.facetFieldDef.header&&r.facetFieldDef.sort||"ascending"}}:{},l?{title:l}:{},s.sizeSignal?{encode:{update:(f={},f[m]=s.sizeSignal,f)}}:{},u?{axes:c}:{})}}return null;var f}},{"../../fielddef":561,"../common":484,tslib:462}],508:[function(e,t,n){"use strict";function a(e,t){var n="width"===t?"x":"y",a=e.component.layoutSize.get(t);if(!a||"merged"===a)return[];var d=e.getSizeSignalRef(t).signal;if("range-step"===a){var p=e.getScaleComponent(n);if(p){var c=p.get("type"),u=p.get("range");if(r.hasDiscreteDomain(c)&&s.isVgRangeStep(u)){var m=e.scaleName(n);if(l.isFacetModel(e.parent)){var f=e.parent.component.resolve;if("independent"===f.scale[n])return[i(m,u)]}return[i(m,u),{name:d,update:o(m,p,"domain('"+m+"').length")}]}}throw new Error("layout size is range step although there is no rangeStep.")}else return[{name:d,value:a}]}function i(e,t){return{name:e+"_step",value:t.step}}function o(e,t,n){var a=t.get("type"),i=t.get("padding"),o=t.get("paddingOuter");o=void 0===o?i:o;var r=t.get("paddingInner");return r="band"===a?void 0===r?i:r:1,"bandspace("+n+", "+r+", "+o+") * "+e+"_step"}Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../scale"),s=e("../../vega.schema"),l=e("../model");n.assembleLayoutSignals=function(e){return[].concat(a(e,"width"),a(e,"height"))},n.sizeSignals=a,n.sizeExpr=o},{"../../scale":569,"../../vega.schema":581,"../model":527}],509:[function(e,t,n){"use strict";function a(e){i(e);var t=e.component.layoutSize;t.setWithExplicit("width",o(e,"width")),t.setWithExplicit("height",o(e,"height"))}function i(e){for(var t=0,n=e.children,a;t<n.length;t++)a=n[t],a.parseLayoutSize()}function o(e,t){for(var n="width"===t?"x":"y",a=e.component.resolve,i=0,o=e.children,r;i<o.length;i++){var s=o[i],l=s.component.layoutSize.getWithExplicit(t),p=a.scale[n];if("independent"===p&&"range-step"===l.value){r=void 0;break}if(r){if("independent"===p&&r.value!==l.value){r=void 0;break}r=d.mergeValuesWithExplicit(r,l,t,"",d.defaultTieBreaker)}else r=l}if(r){for(var c=0,u=e.children,s;c<u.length;c++)s=u[c],e.renameLayoutSize(s.getName(t),e.getName(t)),s.component.layoutSize.set(t,"merged",!1);return r}return{explicit:!1,value:void 0}}function r(e,t){var n="width"===t?"x":"y",a=e.config,i=e.getScaleComponent(n);if(i){var o=i.get("type"),r=i.get("range");return s.hasDiscreteDomain(o)&&l.isVgRangeStep(r)?"range-step":a.view[t]}return"width"===t&&"text"===e.mark()?a.scale.textXRangeStep:a.scale.rangeStep||s.defaultScaleConfig.rangeStep}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../scale"),l=e("../../vega.schema"),d=e("../split");n.parseLayerLayoutSize=a,n.parseRepeatLayoutSize=a,n.parseConcatLayoutSize=function(e){i(e);var t=e.component.layoutSize,n=e.isVConcat?"width":"height";t.setWithExplicit(n,o(e,n))},n.parseChildrenLayoutSize=i,n.parseUnitLayoutSize=function(e){var t=e.component.layoutSize;if(!t.explicit.width){var n=r(e,"width");t.set("width",n,!1)}if(!t.explicit.height){var a=r(e,"height");t.set("height",a,!1)}}},{"../../scale":569,"../../vega.schema":581,"../split":550}],510:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("json-stable-stringify"),i=e("../../util"),o=e("./parse");n.assembleLegends=function(e){var t=e.component.legends,n={};return i.keys(t).forEach(function(i){var r=e.getScaleComponent(i),s=a(r.domains);if(n[s])for(var l=0,d=n[s];l<d.length;l++){var p=d[l],c=o.mergeLegendComponent(p,t[i]);c||n[s].push(t[i])}else n[s]=[t[i].clone()]}),i.flatten(i.vals(n)).map(function(e){return e.combine()})}},{"../../util":579,"./parse":513,"json-stable-stringify":141}],511:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../split"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t}(i.Split);n.LegendComponent=o},{"../split":550,tslib:462}],512:[function(e,t,n){"use strict";function a(e,t,n,a,i){if("gradient"!==i.get("type")){var o={},p=n.mark();switch(p){case d.BAR:case d.TICK:case d.TEXT:o.shape={value:"square"};break;case d.CIRCLE:case d.SQUARE:o.shape={value:p};break;case d.POINT:case d.LINE:case d.AREA:}var f=n.markDef.filled,g=a===s.COLOR?c.without(d.FILL_STROKE_CONFIG,[f?"fill":"stroke","strokeDash","strokeDashOffset"]):d.FILL_STROKE_CONFIG;if(g=c.without(g,["strokeDash","strokeDashOffset"]),u.applyMarkConfig(o,n,g),a!==s.COLOR){var _=m.color(n);_.fill&&(_.fill.field||"transparent"===_.fill.value)&&delete _.fill,_.stroke&&(_.stroke.field||"transparent"===_.stroke.value)&&delete _.stroke,o=r.__assign({},o,_)}if(a!==s.SHAPE){var y=n.encoding.shape;l.isValueDef(y)&&(o.shape={value:y.value})}if(a!==s.OPACITY){var h=n.encoding.opacity;l.isValueDef(h)&&(o.opacity={value:h.value})}return o=r.__assign({},o,t),0<c.keys(o).length?o:void 0}}function i(e,t,n,a,i){var o={};if("gradient"===i.get("type")){var s=n.encoding.opacity;l.isValueDef(s)&&(o.opacity={value:s.value})}return o=r.__assign({},o,t),0<c.keys(o).length?o:void 0}function o(e,t,n,a){var i=n.legend(a),o=n.config,s={};if(l.isTimeFieldDef(e)){var d=n.getScaleComponent(a).get("type")===p.ScaleType.UTC;t=r.__assign({text:{signal:u.timeFormatExpression("datum.value",e.timeUnit,i.format,o.legend.shortTimeLabels,o.timeFormat,d)}},t)}return s=r.__assign({},s,t),0<c.keys(s).length?s:void 0}Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),s=e("../../channel"),l=e("../../fielddef"),d=e("../../mark"),p=e("../../scale"),c=e("../../util"),u=e("../common"),m=e("../mark/mixins");n.symbols=a,n.gradient=i,n.labels=o},{"../../channel":476,"../../fielddef":561,"../../mark":568,"../../scale":569,"../../util":579,"../common":484,"../mark/mixins":520,tslib:462}],513:[function(e,t,n){"use strict";function a(e){e.component.legends=g.isUnitModel(e)?i(e):l(e)}function i(e){return[p.COLOR,p.SIZE,p.SHAPE,p.OPACITY].reduce(function(t,n){return e.legend(n)&&(t[n]=r(e,n)),t},{})}function o(e,t){switch(t){case p.COLOR:var n=e.scaleName(p.COLOR);return e.markDef.filled?{fill:n}:{stroke:n};case p.SIZE:return{size:e.scaleName(p.SIZE)};case p.SHAPE:return{shape:e.scaleName(p.SHAPE)};case p.OPACITY:return{opacity:e.scaleName(p.OPACITY)};}return null}function r(t,n){var a=t.fieldDef(n),e=t.legend(n),i=new b.LegendComponent({},o(t,n));u.LEGEND_PROPERTIES.forEach(function(a){var o=s(a,e,n,t);if(void 0!==o){var r="values"===a?!!e.values:o===e[a];i.set(a,o,r)}});var r=e.encoding||{},l=["labels","legend","title","symbols","gradient"].reduce(function(o,e){var s=x[e]?x[e](a,r[e],t,n,i):r[e];return void 0!==s&&0<m.keys(s).length&&(o[e]={update:s}),o},{});return 0<m.keys(l).length&&i.set("encode",l,!!e.encoding),i}function s(e,t,n,a){var i=a.fieldDef(n);return"format"===e?f.numberFormat(i,t.format,a.config):"title"===e?f.getSpecifiedOrDefaultValue(t.title,c.title(i,a.config)):"values"===e?v.values(t):"type"===e?f.getSpecifiedOrDefaultValue(t.type,v.type(i.type,n,a.getScaleComponent(n).get("type"))):t[e]}function l(e){for(var t=e.component,n=t.legends,i=t.resolve,o=function(t){a(t),m.keys(t.component.legends).forEach(function(a){i.legend[a]=_.parseGuideResolve(e.component.resolve,a),"shared"===i.legend[a]&&(n[a]=d(n[a],t.component.legends[a]),!n[a]&&(i.legend[a]="independent",delete n[a]))})},r=0,s=e.children,l;r<s.length;r++)l=s[r],o(l);return m.keys(n).forEach(function(t){for(var n=0,a=e.children,o;n<a.length;n++)(o=a[n],!!o.component.legends[t])&&"shared"===i.legend[t]&&delete o.component.legends[t]}),n}function d(e,t){if(!e)return t.clone();var n=e.getWithExplicit("orient"),a=t.getWithExplicit("orient");if(!(n.explicit&&a.explicit&&n.value!==a.value)){for(var i=!1,o=function(n){var a=h.mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",function(e,t){return"title"===n?f.titleMerger(e,t):"type"===n?(i=!0,y.makeImplicit("symbol")):h.defaultTieBreaker(e,t,n,"legend")});e.setWithExplicit(n,a)},r=0,s=u.VG_LEGEND_PROPERTIES,l;r<s.length;r++)l=s[r],o(l);return i&&(((e.implicit||{}).encode||{}).gradient&&m.deleteNestedProperty(e.implicit,["encode","gradient"]),((e.explicit||{}).encode||{}).gradient&&m.deleteNestedProperty(e.explicit,["encode","gradient"])),e}}Object.defineProperty(n,"__esModule",{value:!0});var p=e("../../channel"),c=e("../../fielddef"),u=e("../../legend"),m=e("../../util"),f=e("../common"),g=e("../model"),_=e("../resolve"),y=e("../split"),h=e("../split"),b=e("./component"),x=e("./encode"),v=e("./properties");n.parseLegend=a,n.parseLegendForChannel=r,n.mergeLegendComponent=d},{"../../channel":476,"../../fielddef":561,"../../legend":565,"../../util":579,"../common":484,"../model":527,"../resolve":530,"../split":550,"./component":511,"./encode":512,"./properties":514}],514:[function(e,t,n){"use strict";function a(e,t,n){return t===i.COLOR&&("quantitative"===e&&!r.isBinScale(n)||"temporal"===e&&s.contains(["time","utc"],n))?"gradient":void 0}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../channel"),o=e("../../datetime"),r=e("../../scale"),s=e("../../util");n.values=function(e){var t=e.values;return t&&o.isDateTime(t[0])?t.map(function(e){return{signal:o.dateTimeExpr(e,!0)}}):t},n.type=a},{"../../channel":476,"../../datetime":558,"../../scale":569,"../../util":579}],515:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("./mixins");n.area={vgMark:"area",encodeEntry:function(e){return a.__assign({},i.pointPosition("x",e,"zeroOrMin"),i.pointPosition("y",e,"zeroOrMin"),i.pointPosition2(e,"zeroOrMin"),i.color(e),i.text(e,"tooltip"),i.nonPosition("opacity",e),i.markDefProperties(e.markDef,["orient","interpolate","tension"]))}}},{"./mixins":520,tslib:462}],516:[function(e,t,n){"use strict";function a(e){var t=e.config,n=e.width,a=e.markDef.orient,i=e.encoding.size,s=e.encoding.x,p=e.scaleName(l.X),u=e.getScaleComponent(l.X);if("horizontal"===a)return r.__assign({},m.pointPosition("x",e,"zeroOrMin"),m.pointPosition2(e,"zeroOrMin"));if(d.isFieldDef(s)){var g=u.get("type");if(s.bin&&!i&&!c.hasDiscreteDomain(g))return m.binnedPosition(s,"x",e.scaleName("x"),t.bar.binSpacing,u.get("reverse"));if(g===c.ScaleType.BAND)return m.bandPosition(s,"x",e)}return m.centeredBandPosition("x",e,r.__assign({},f.mid(n)),o(p,u,t))}function i(e){var t=e.config,n=e.encoding,a=e.height,i=e.markDef.orient,s=n.size,p=n.y,u=e.scaleName(l.Y),g=e.getScaleComponent(l.Y);if("vertical"===i)return r.__assign({},m.pointPosition("y",e,"zeroOrMin"),m.pointPosition2(e,"zeroOrMin"));if(d.isFieldDef(p)){var _=g.get("type");if(p.bin&&!s&&!c.hasDiscreteDomain(_))return m.binnedPosition(p,"y",e.scaleName("y"),t.bar.binSpacing,g.get("reverse"));if(_===c.ScaleType.BAND)return m.bandPosition(p,"y",e)}return m.centeredBandPosition("y",e,f.mid(a),o(u,g,t))}function o(e,t,n){if(n.bar.discreteBandSize)return{value:n.bar.discreteBandSize};if(t){var a=t.get("type");if(a===c.ScaleType.POINT){var i=t.get("range");if(u.isVgRangeStep(i)&&s.isNumber(i.step))return{value:i.step-1};p.warn(p.message.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}else return a===c.ScaleType.BAND?f.band(e):{value:n.bar.continuousBandSize}}return n.scale.rangeStep&&null!==n.scale.rangeStep?{value:n.scale.rangeStep-1}:{value:20}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),s=e("vega-util"),l=e("../../channel"),d=e("../../fielddef"),p=e("../../log"),c=e("../../scale"),u=e("../../vega.schema"),m=e("./mixins"),f=e("./valueref");n.bar={vgMark:"rect",encodeEntry:function(e){var t=e.stack;return r.__assign({},a(e,t),i(e,t),m.color(e),m.text(e,"tooltip"),m.nonPosition("opacity",e))}}},{"../../channel":476,"../../fielddef":561,"../../log":566,"../../scale":569,"../../vega.schema":581,"./mixins":520,"./valueref":526,tslib:462,"vega-util":588}],517:[function(e,t,n){"use strict";function a(e,t){return u.contains([d.POINT,d.TICK,d.CIRCLE,d.SQUARE],e)&&!r.isAggregate(t)?0.7:void 0}function i(e,t){var n=m.getMarkConfig("filled",e,t),a=e.type;return n===void 0?a!==d.POINT&&a!==d.LINE&&a!==d.RULE:n}function o(e,t,n,a){switch(e){case d.POINT:case d.CIRCLE:case d.SQUARE:case d.TEXT:case d.RECT:return;}var i=t.y&&t.y2,o=t.x&&t.x2;switch(e){case d.TICK:var r=n.x?n.x.get("type"):null,u=n.y?n.y.get("type"):null;return!p.hasDiscreteDomain(r)&&(!t.y||p.hasDiscreteDomain(u)||s.isFieldDef(t.y)&&t.y.bin)?"vertical":"horizontal";case d.RULE:case d.BAR:case d.AREA:if(i)return"vertical";if(o)return"horizontal";if(e===d.RULE){if(t.x&&!t.y)return"vertical";if(t.y&&!t.x)return"horizontal"}case d.LINE:var m=s.isFieldDef(t.x)&&s.isContinuous(t.x),f=s.isFieldDef(t.y)&&s.isContinuous(t.y);if(m&&!f)return"horizontal";if(!m&&f)return"vertical";if(m&&f){var g=t.x,_=t.y,y=g.type===c.TEMPORAL,h=_.type===c.TEMPORAL;return y&&!h?"vertical":!y&&h?"horizontal":!g.aggregate&&_.aggregate?"vertical":g.aggregate&&!_.aggregate?"horizontal":a?a:(e===d.LINE&&t.order||l.warn(l.message.unclearOrientContinuous(e)),"vertical")}return void l.warn(l.message.unclearOrientDiscreteOrEmpty(e));}return"vertical"}Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../encoding"),s=e("../../fielddef"),l=e("../../log"),d=e("../../mark"),p=e("../../scale"),c=e("../../type"),u=e("../../util"),m=e("../common");n.normalizeMarkDef=function(e,t,n,a){var r=e.orient||m.getMarkConfig("orient",e,a);e.orient=o(e.type,t,n,r),r!==void 0&&r!==e.orient&&l.warn(l.message.orientOverridden(e.orient,r));var s=e.filled;s===void 0&&(e.filled=i(e,a))},n.initEncoding=function(e,t,n,i){var o=m.getMarkConfig("opacity",e,i);if(!t.opacity&&o===void 0){var r=a(e.type,t,n);r!==void 0&&(t.opacity={value:r})}return t}},{"../../encoding":559,"../../fielddef":561,"../../log":566,"../../mark":568,"../../scale":569,"../../type":578,"../../util":579,"../common":484}],518:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("./mixins"),o=e("./valueref");n.line={vgMark:"line",encodeEntry:function(e){var t=e.width,n=e.height;return a.__assign({},i.pointPosition("x",e,o.mid(t)),i.pointPosition("y",e,o.mid(n)),i.color(e),i.text(e,"tooltip"),i.nonPosition("opacity",e),i.nonPosition("size",e,{vgChannel:"strokeWidth"}),i.markDefProperties(e.markDef,["interpolate","tension"]))}}},{"./mixins":520,"./valueref":526,tslib:462}],519:[function(e,t,n){"use strict";function a(e){if(b.isUnitModel(e))S.normalizeMarkDef(e.markDef,e.encoding,e.component.scales,e.config);else for(var t=0,n=e.children,i;t<n.length;t++)i=n[t],a(i)}function i(e){var t=e.mark(),n=s(e),a=e.markDef.clip===void 0?l(e):!!e.markDef.clip,i=h.getStyles(e.markDef),r=o(e),p=[d.__assign({name:e.getName("marks"),type:w[t].vgMark},a?{clip:!0}:{},i?{style:i}:{},r?{sort:r}:{},{from:{data:(0<n.length?O:"")+e.requestDataName(u.MAIN)},encode:{update:w[t].encodeEntry(e)}})];return 0<n.length?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:O+e.requestDataName(u.MAIN),data:e.requestDataName(u.MAIN),groupby:n}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:p}]:p}function o(e){if("line"===e.mark()&&e.channelHasField("order"))return h.sortParams(e.encoding.order,{expr:"datum"});var t="horizontal"===e.markDef.orient?"y":"x",n=e.sort(t),a=_.isSortField(n)?f.field({aggregate:m.isAggregate(e.encoding)?n.op:void 0,field:n.field},{expr:"datum"}):e.field(t,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"});return a?{field:a,order:"descending"}:void 0}function r(e){var t=e.mark(),n=h.getStyles(e.markDef),a=void 0===e.markDef.clip?l(e):!!e.markDef.clip,i=[];return i.push(d.__assign({name:e.getName("marks"),type:w[t].vgMark},a?{clip:!0}:{},n?{style:n}:{},{from:{data:e.requestDataName(u.MAIN)},encode:{update:w[t].encodeEntry(e)}})),i}function s(e){return c.NONPOSITION_CHANNELS.reduce(function(t,n){var a=e.encoding;if("order"===n)return t;if("detail"===n){var i=a[n];i&&(p.isArray(i)?i:[i]).forEach(function(e){e.aggregate||t.push(f.field(e,{}))})}else{var o=f.getFieldDef(a[n]);o&&!o.aggregate&&t.push(f.field(o,{}))}return t},[])}function l(e){var t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t&&t.get("domainRaw")||n&&n.get("domainRaw")}Object.defineProperty(n,"__esModule",{value:!0});var d=e("tslib"),p=e("vega-util"),c=e("../../channel"),u=e("../../data"),m=e("../../encoding"),f=e("../../fielddef"),g=e("../../mark"),_=e("../../sort"),y=e("../../util"),h=e("../common"),b=e("../model"),x=e("./area"),v=e("./bar"),S=e("./init"),T=e("./line"),k=e("./point"),E=e("./rect"),N=e("./rule"),A=e("./text"),C=e("./tick"),w={area:x.area,bar:v.bar,line:T.line,point:k.point,text:A.text,tick:C.tick,rect:E.rect,rule:N.rule,circle:k.circle,square:k.square};n.parseMarkDef=a,n.parseMarkGroup=function(e){return y.contains([g.LINE,g.AREA],e.mark())?i(e):r(e)};var O="faceted_path_";n.getPathSort=o},{"../../channel":476,"../../data":557,"../../encoding":559,"../../fielddef":561,"../../mark":568,"../../sort":571,"../../util":579,"../common":484,"../model":527,"./area":515,"./bar":516,"./init":517,"./line":518,"./point":521,"./rect":522,"./rule":523,"./text":524,"./tick":525,tslib:462,"vega-util":588}],520:[function(e,t,n){"use strict";function a(e,t,n){void 0===n&&(n={});var a=n.defaultValue,o=n.vgChannel,r=n.defaultRef||(a===void 0?void 0:{value:a}),s=t.encoding[e];return i(t,s,o||e,function(n){return u.midPoint(e,n,t.scaleName(e),t.getScaleComponent(e),null,r)})}function i(e,t,n,a){var i=t&&t.condition,o=a(t);if(i){var s=a(i);return l={},l[n]=[r.__assign({test:c.predicate(e,i.selection)},s)].concat(o===void 0?[]:[o]),l}return void 0===o?{}:(d={},d[n]=o,d);var l,d}function o(e,t,n,a){var i=t.encoding,o=t.stack,r=u.stackable(e,i[e],t.scaleName(e),t.getScaleComponent(e),o,n);return s={},s[a||e]=r,s;var s}Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),s=e("../../fielddef"),l=e("../../log"),d=e("../../util"),p=e("../common"),c=e("../selection/selection"),u=e("./valueref");n.color=function(t){var n=t.config,i=t.markDef.filled,o=i?"fill":"stroke",r=a("color",t,{vgChannel:o,defaultValue:p.getMarkConfig(o,t.markDef,n)||p.getMarkConfig("color",t.markDef,n)});return!r.fill&&d.contains(["bar","point","circle","square"],t.mark())&&(r.fill={value:"transparent"}),r},n.markDefProperties=function(e,t){return t.reduce(function(t,n){return e[n]&&(t[n]={value:e[n]}),t},{})},n.valueIfDefined=function(e,t){return void 0===t?void 0:(n={},n[e]={value:t},n);var n},n.nonPosition=a,n.text=function(e,t){void 0===t&&(t="text");var n=e.encoding[t];return i(e,n,t,function(t){return u.text(t,e.config)})},n.bandPosition=function(e,t,n){var i=n.scaleName(t),o="x"===t?"width":"height";if(n.encoding.size){var d=n.markDef.orient;if(d){var p=(c={},c[t+"c"]=u.fieldRef(e,i,{},{band:0.5}),c);if(s.getFieldDef(n.encoding.size))l.warn(l.message.cannotUseSizeFieldWithBandSize(t));else if(s.isValueDef(n.encoding.size))return r.__assign({},p,a("size",n,{vgChannel:o}))}else l.warn(l.message.cannotApplySizeToNonOrientedMark(n.markDef.type))}return m={},m[t]=u.fieldRef(e,i,{binSuffix:"range"}),m[o]=u.band(i),m;var c,m},n.centeredBandPosition=function(e,t,n,i){var s="x"===e?"xc":"yc",l="x"===e?"width":"height";return r.__assign({},o(e,t,n,s),a("size",t,{defaultRef:i,vgChannel:l}))},n.binnedPosition=function(e,t,n,a,i){return"x"===t?{x2:u.bin(e,n,"start",i?0:a),x:u.bin(e,n,"end",i?a:0)}:{y2:u.bin(e,n,"start",i?a:0),y:u.bin(e,n,"end",i?0:a)}},n.pointPosition=o,n.pointPosition2=function(e,t,n){var a=e.encoding,i=e.markDef,o=e.stack;n=n||("horizontal"===i.orient?"x2":"y2");var r="x2"===n?"x":"y",s=u.stackable2(n,a[r],a[n],e.scaleName(r),e.getScaleComponent(r),o,t);return l={},l[n]=s,l;var l}},{"../../fielddef":561,"../../log":566,"../../util":579,"../common":484,"../selection/selection":540,"./valueref":526,tslib:462}],521:[function(e,t,n){"use strict";function a(e,t){var n=e.config,a=e.width,r=e.height;return o.__assign({},s.pointPosition("x",e,l.mid(a)),s.pointPosition("y",e,l.mid(r)),s.color(e),s.text(e,"tooltip"),s.nonPosition("size",e),i(e,n,t),s.nonPosition("opacity",e))}function i(e,t,n){return n?{shape:{value:n}}:s.nonPosition("shape",e,{defaultValue:r.getMarkConfig("shape",e.markDef,t)})}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("../common"),s=e("./mixins"),l=e("./valueref");n.shapeMixins=i,n.point={vgMark:"symbol",encodeEntry:function(e){return a(e)}},n.circle={vgMark:"symbol",encodeEntry:function(e){return a(e,"circle")}},n.square={vgMark:"symbol",encodeEntry:function(e){return a(e,"square")}}},{"../common":484,"./mixins":520,"./valueref":526,tslib:462}],522:[function(e,t,n){"use strict";function a(e){var t=e.encoding.x,n=e.encoding.x2,a=e.getScaleComponent(r.X),i=a?a.get("type"):void 0;if(s.isFieldDef(t)&&t.bin&&!n)return c.binnedPosition(t,"x",e.scaleName("x"),0,a.get("reverse"));if(s.isFieldDef(t)&&a&&p.hasDiscreteDomain(i)){if(i===p.ScaleType.BAND)return c.bandPosition(t,"x",e);throw new Error(l.message.scaleTypeNotWorkWithMark(d.RECT,i))}else return o.__assign({},c.pointPosition("x",e,"zeroOrMax"),c.pointPosition2(e,"zeroOrMin","x2"))}function i(e){var t=e.encoding.y,n=e.encoding.y2,a=e.getScaleComponent(r.Y),i=a?a.get("type"):void 0;if(s.isFieldDef(t)&&t.bin&&!n)return c.binnedPosition(t,"y",e.scaleName("y"),0,a.get("reverse"));if(s.isFieldDef(t)&&a&&p.hasDiscreteDomain(i)){if(i===p.ScaleType.BAND)return c.bandPosition(t,"y",e);throw new Error(l.message.scaleTypeNotWorkWithMark(d.RECT,i))}else return o.__assign({},c.pointPosition("y",e,"zeroOrMax"),c.pointPosition2(e,"zeroOrMin","y2"))}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("../../channel"),s=e("../../fielddef"),l=e("../../log"),d=e("../../mark"),p=e("../../scale"),c=e("./mixins");n.rect={vgMark:"rect",encodeEntry:function(e){return o.__assign({},a(e),i(e),c.color(e),c.text(e,"tooltip"),c.nonPosition("opacity",e))}}},{"../../channel":476,"../../fielddef":561,"../../log":566,"../../mark":568,"../../scale":569,"./mixins":520,tslib:462}],523:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("./mixins"),o=e("./valueref");n.rule={vgMark:"rule",encodeEntry:function(e){var t=e.config,n=e.markDef,r=e.width,s=e.height,l=n.orient;return a.__assign({},i.pointPosition("x",e,"horizontal"===l?"zeroOrMin":o.mid(r)),i.pointPosition("y",e,"vertical"===l?"zeroOrMin":o.mid(s)),i.pointPosition2(e,"zeroOrMax"),i.color(e),i.text(e,"tooltip"),i.nonPosition("opacity",e),i.nonPosition("size",e,{vgChannel:"strokeWidth"}))}}},{"./mixins":520,"./valueref":526,tslib:462}],524:[function(e,t,n){"use strict";function a(e,t){return l.isFieldDef(t)&&t.type===d.QUANTITATIVE?{field:{group:"width"},offset:-5}:{value:e.scale.textXRangeStep/2}}function i(e,t,n){var a=p.getMarkConfig("align",e,n);return void 0===a?s.channelHasField(t,r.X)?"center":"right":void 0}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("../../channel"),s=e("../../encoding"),l=e("../../fielddef"),d=e("../../type"),p=e("../common"),c=e("./mixins"),u=e("./valueref");n.text={vgMark:"text",encodeEntry:function(e){var t=e.config,n=e.encoding,r=e.height,s=n.text;return o.__assign({},c.pointPosition("x",e,a(t,s)),c.pointPosition("y",e,u.mid(r)),c.text(e),c.color(e),c.text(e,"tooltip"),c.nonPosition("opacity",e),c.nonPosition("size",e,{vgChannel:"fontSize"}),c.valueIfDefined("align",i(e.markDef,n,t)))}}},{"../../channel":476,"../../encoding":559,"../../fielddef":561,"../../type":578,"../common":484,"./mixins":520,"./valueref":526,tslib:462}],525:[function(e,t,n){"use strict";function a(e){var t=e.config,n=e.markDef.orient,a=e.getScaleComponent("horizontal"===n?"x":"y");if(t.tick.bandSize!==void 0)return t.tick.bandSize;var i=a?a.get("range"):void 0,r=i&&o.isVgRangeStep(i)?i.step:t.scale.rangeStep;if("number"!=typeof r)throw new Error("Function does not handle non-numeric rangeStep");return r/1.5}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),o=e("../../vega.schema"),r=e("./mixins"),s=e("./valueref");n.tick={vgMark:"rect",encodeEntry:function(e){var t=e.config,n=e.markDef,o=e.width,l=e.height,d=n.orient,p="horizontal"===d?"width":"height",c="horizontal"===d?"height":"width";return i.__assign({},r.pointPosition("x",e,s.mid(o),"xc"),r.pointPosition("y",e,s.mid(l),"yc"),r.nonPosition("size",e,{defaultValue:a(e),vgChannel:p}),(u={},u[c]={value:t.tick.thickness},u),r.color(e),r.nonPosition("opacity",e));var u}}},{"../../vega.schema":581,"./mixins":520,"./valueref":526,tslib:462}],526:[function(e,t,n){"use strict";function a(e,t,n,a){var i={scale:t,field:m.field(e,n)};return a?c.__assign({},i,a):i}function i(e,t){return void 0===t&&(t=!0),{scale:e,band:t}}function o(e,t){return{signal:"(scale(\""+t+"\", "+m.field(e,{expr:"datum"})+") + "+("scale(\""+t+"\", "+m.field(e,{binSuffix:"end",expr:"datum"})+"))/2")}}function r(e,t,n,i,r,c){if(t){if(m.isFieldDef(t)){if(t.bin)return g.contains(["x","y"],e)&&"quantitative"===t.type?r&&r.impute?a(t,n,{binSuffix:"mid"}):o(t,n):a(t,n,_.binRequiresRange(t,e)?{binSuffix:"range"}:{});var y=i.get("type");return f.hasDiscreteDomain(y)?"band"===y?a(t,n,{binSuffix:"range"},{band:0.5}):a(t,n,{binSuffix:"range"}):a(t,n,{})}if(m.isValueDef(t))return{value:t.value};throw new Error("FieldDef without field or value.")}if("zeroOrMin"===c){if(e===u.X||e===u.X2)return s(n,i);if(e===u.Y||e===u.Y2)return d(n,i);throw new Error("Unsupported channel "+e+" for base function")}else if("zeroOrMax"===c){if(e===u.X||e===u.X2)return l(n,i);if(e===u.Y||e===u.Y2)return p(n,i);throw new Error("Unsupported channel "+e+" for base function")}return c}function s(e,t){return e&&!g.contains([f.ScaleType.LOG,f.ScaleType.TIME,f.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{value:0}}function l(e,t){return e&&!g.contains([f.ScaleType.LOG,f.ScaleType.TIME,f.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{field:{group:"width"}}}function d(e,t){return e&&!g.contains([f.ScaleType.LOG,f.ScaleType.TIME,f.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{field:{group:"height"}}}function p(e,t){return e&&!g.contains([f.ScaleType.LOG,f.ScaleType.TIME,f.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{value:0}}Object.defineProperty(n,"__esModule",{value:!0});var c=e("tslib"),u=e("../../channel"),m=e("../../fielddef"),f=e("../../scale"),g=e("../../util"),_=e("../common");n.stackable=function(e,t,n,i,o,s){return m.isFieldDef(t)&&o&&e===o.fieldChannel?a(t,n,{suffix:"end"}):r(e,t,n,i,o,s)},n.stackable2=function(e,t,n,i,o,s,l){return m.isFieldDef(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?a(t,i,{suffix:"start"}):r(e,n,i,o,s,l)},n.bin=function(e,t,n,i){var o="start"===n?void 0:"end";return a(e,t,{binSuffix:o},i?{offset:i}:{})},n.fieldRef=a,n.band=i,n.midPoint=r,n.text=function(e,t){if(e){if(m.isFieldDef(e))return _.formatSignalRef(e,e.format,"datum",t);if(m.isValueDef(e))return{value:e.value}}},n.mid=function(e){return c.__assign({},e,{mult:0.5})}},{"../../channel":476,"../../fielddef":561,"../../scale":569,"../../util":579,"../common":484,tslib:462}],527:[function(e,t,n){"use strict";function a(e){return e&&"unit"===e.type}function i(e){return e&&"facet"===e.type}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("vega-util"),s=e("../channel"),l=e("../encoding"),d=e("../fielddef"),p=e("../log"),c=e("../scale"),u=e("../title"),m=e("../transform"),f=e("../util"),g=e("../vega.schema"),_=e("./axis/assemble"),y=e("./layout/header"),h=e("./layoutsize/assemble"),b=e("./legend/assemble"),x=e("./legend/parse"),v=e("./mark/mark"),S=e("./scale/assemble"),T=e("./scale/domain"),k=e("./scale/parse"),E=e("./split"),N=function(){function e(){this.nameMap={}}return e.prototype.rename=function(e,t){this.nameMap[e]=t},e.prototype.has=function(e){return void 0!==this.nameMap[e]},e.prototype.get=function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e},e}();n.NameMap=N,n.isUnitModel=a,n.isFacetModel=i,n.isRepeatModel=function(e){return e&&"repeat"===e.type},n.isConcatModel=function(e){return e&&"concat"===e.type},n.isLayerModel=function(e){return e&&"layer"===e.type};var A=function(){function e(e,t,n,a,i){var s=this;this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=s.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=s.lookupDataSource(e.from.facet.data)),e},this.parent=t,this.config=a,this.name=e.name||n,this.title=r.isString(e.title)?{text:e.title}:e.title,this.scaleNameMap=t?t.scaleNameMap:new N,this.layoutSizeNameMap=t?t.layoutSizeNameMap:new N,this.data=e.data,this.description=e.description,this.transforms=m.normalizeTransform(e.transform||[]),this.component={data:{sources:t?t.component.data.sources:{},outputNodes:t?t.component.data.outputNodes:{},outputNodeRefCounts:t?t.component.data.outputNodeRefCounts:{},ancestorParse:t?o.__assign({},t.component.data.ancestorParse):{}},layoutSize:new E.Split,layoutHeaders:{row:{},column:{}},mark:null,resolve:o.__assign({scale:{},axis:{},legend:{}},i||{}),selection:null,scales:null,axes:{},legends:{}}}return Object.defineProperty(e.prototype,"width",{get:function(){return this.getSizeSignalRef("width")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getSizeSignalRef("height")},enumerable:!0,configurable:!0}),e.prototype.initSize=function(e){var t=e.width,n=e.height;t&&this.component.layoutSize.set("width",t,!0),n&&this.component.layoutSize.set("height",n,!0)},e.prototype.parse=function(){this.parseScale(),this.parseMarkDef(),this.parseLayoutSize(),this.renameTopLevelLayoutSize(),this.parseSelection(),this.parseData(),this.parseAxisAndHeader(),this.parseLegend(),this.parseMarkGroup()},e.prototype.parseScale=function(){k.parseScale(this)},e.prototype.renameTopLevelLayoutSize=function(){"width"!==this.getName("width")&&this.renameLayoutSize(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameLayoutSize(this.getName("height"),"height")},e.prototype.parseMarkDef=function(){v.parseMarkDef(this)},e.prototype.parseLegend=function(){x.parseLegend(this)},e.prototype.assembleGroupStyle=function(){return"unit"===this.type||"layer"===this.type?"cell":void 0},e.prototype.assembleLayoutSize=function(){return"unit"===this.type||"layer"===this.type?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}:void 0},e.prototype.assembleHeaderMarks=function(){for(var e=this.component.layoutHeaders,t=[],n=0,a=y.HEADER_CHANNELS,i;n<a.length;n++)i=a[n],e[i].title&&t.push(y.getTitleGroup(this,i));for(var o=0,r=y.HEADER_CHANNELS;o<r.length;o++)for(var i=r[o],s=e[i],l=0,d=y.HEADER_TYPES,p;l<d.length;l++)if(p=d[l],s[p])for(var c=0,u=s[p];c<u.length;c++){var m=u[c],f=y.getHeaderGroup(this,i,p,s,m);f&&t.push(f)}return t},e.prototype.assembleAxes=function(){return _.assembleAxes(this.component.axes)},e.prototype.assembleLegends=function(){return b.assembleLegends(this)},e.prototype.assembleTitle=function(){var e=o.__assign({},u.extractTitleConfig(this.config.title).nonMark,this.title);return e.text?(f.contains(["unit","layer"],this.type)||(e.anchor&&"start"!==e.anchor&&p.warn(p.message.cannotSetTitleAnchor(this.type)),e.anchor="start"),0<f.keys(e).length?e:void 0):void 0},e.prototype.assembleGroup=function(e){void 0===e&&(e=[]);var t={};e=e.concat(this.assembleSelectionSignals()),0<e.length&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var a=!this.parent||i(this.parent)?S.assembleScales(this):[];0<a.length&&(t.scales=a);var o=this.assembleAxes();0<o.length&&(t.axes=o);var r=this.assembleLegends();return 0<r.length&&(t.legends=r),t},e.prototype.hasDescendantWithFieldOnChannel=function(e){for(var t=0,n=this.children,i;t<n.length;t++)if(i=n[t],a(i)){if(i.channelHasField(e))return!0;}else if(i.hasDescendantWithFieldOnChannel(e))return!0;return!1},e.prototype.getName=function(e){return f.varName((this.name?this.name+"_":"")+e)},e.prototype.requestDataName=function(e){var t=this.getName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t},e.prototype.getSizeSignalRef=function(e){if(i(this.parent)){var t="width"===e?"x":"y",n=this.component.scales[t];if(n&&!n.merged){var a=n.get("type"),o=n.get("range");if(c.hasDiscreteDomain(a)&&g.isVgRangeStep(o)){var r=n.get("name"),s=T.assembleDomain(this,t),l=T.getFieldFromDomain(s);if(l){var u=d.field({aggregate:"distinct",field:l},{expr:"datum"});return{signal:h.sizeExpr(r,n,u)}}return p.warn("Unknown field for ${channel}.  Cannot calculate view size."),null}}}return{signal:this.layoutSizeNameMap.get(this.getName(e))}},e.prototype.lookupDataSource=function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e},e.prototype.getSizeName=function(e){return this.layoutSizeNameMap.get(e)},e.prototype.renameLayoutSize=function(e,t){this.layoutSizeNameMap.rename(e,t)},e.prototype.renameScale=function(e,t){this.scaleNameMap.rename(e,t)},e.prototype.scaleName=function(e,t){return t?this.getName(e):s.isChannel(e)&&s.isScaleChannel(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0},e.prototype.getScaleComponent=function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0},e.prototype.getSelectionComponent=function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(p.message.selectionNotFound(t));return n},e}();n.Model=A;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.field=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);return n?d.field(n,t):void 0},t.prototype.reduceFieldDef=function(e,n,a){return l.reduce(this.getMapping(),function(t,n,a){var i=d.getFieldDef(n);return i?e(t,i,a):t},n,a)},t.prototype.forEachFieldDef=function(e,n){l.forEach(this.getMapping(),function(t,n){var a=d.getFieldDef(t);a&&e(a,n)},n)},t}(A);n.ModelWithField=C},{"../channel":476,"../encoding":559,"../fielddef":561,"../log":566,"../scale":569,"../title":575,"../transform":577,"../util":579,"../vega.schema":581,"./axis/assemble":477,"./layout/header":507,"./layoutsize/assemble":508,"./legend/assemble":510,"./legend/parse":513,"./mark/mark":519,"./scale/assemble":531,"./scale/domain":533,"./scale/parse":534,"./split":550,tslib:462,"vega-util":588}],528:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("./baseconcat"),o=e("./buildmodel"),r=e("./layoutsize/parse"),s=function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,o,t.resolve)||this;return r.type="repeat",r.repeat=t.repeat,r.children=r._initChildren(t,r.repeat,i,o),r}return a.__extends(t,e),t.prototype._initChildren=function(e,t,n,a){for(var i=[],r=t.row||[n?n.row:null],s=t.column||[n?n.column:null],l=0,d=r,p;l<d.length;l++){p=d[l];for(var c=0,u=s;c<u.length;c++){var m=u[c],f=(p?"_"+p:"")+(m?"_"+m:""),g={row:p,column:m};i.push(o.buildModel(e.spec,this,this.getName("child"+f),void 0,g,a,!1))}}return i},t.prototype.parseLayoutSize=function(){r.parseRepeatLayoutSize(this)},t.prototype.assembleLayout=function(){return{padding:{row:10,column:10},offset:10,columns:this.repeat&&this.repeat.column?this.repeat.column.length:1,bounds:"full",align:"all"}},t}(i.BaseConcatModel);n.RepeatModel=s},{"./baseconcat":482,"./buildmodel":483,"./layoutsize/parse":509,tslib:462}],529:[function(e,t,n){"use strict";function a(e,t){var n=e.field;return s.isRepeatRef(n)?n.repeat in t?o.__assign({},e,{field:t[n.repeat]}):(l.warn(l.message.noSuchRepeatedValue(n.repeat)),null):e}function i(e,t){var n={};for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(r.isArray(o))n[i]=o.map(function(e){return a(e,t)}).filter(function(e){return null!==e});else{var s=a(o,t);null!==s&&(n[i]=s)}}return n}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("vega-util"),s=e("../fielddef"),l=e("../log");n.replaceRepeaterInFacet=function(e,t){return i(e,t)},n.replaceRepeaterInEncoding=function(e,t){return i(e,t)}},{"../fielddef":561,"../log":566,tslib:462,"vega-util":588}],530:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../channel"),i=e("../log"),o=e("../util"),r=e("./model");n.defaultScaleResolve=function(e,t){if(r.isLayerModel(t)||r.isFacetModel(t))return"shared";if(r.isConcatModel(t)||r.isRepeatModel(t))return o.contains(a.POSITION_SCALE_CHANNELS,e)?"independent":"shared";throw new Error("invalid model type for resolve")},n.parseGuideResolve=function(e,t){var n=e.scale[t],r=o.contains(a.POSITION_SCALE_CHANNELS,t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&i.warn(i.message.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}},{"../channel":476,"../log":566,"../util":579,"./model":527}],531:[function(e,t,n){"use strict";function a(e){return p.isLayerModel(e)||p.isConcatModel(e)||p.isRepeatModel(e)?e.children.reduce(function(e,t){return e.concat(a(t))},i(e)):i(e)}function i(e){return l.keys(e.component.scales).reduce(function(t,n){var a=e.component.scales[n];if(a.merged)return t;var i=a.combine(),s=i.domainRaw,l=i.range,d=i.name,p=i.type,m=i.domainRaw,f=i.range,g=r.__rest(i,["name","type","domainRaw","range"]);return l=o(l,d,e,n),s&&c.isRawSelectionDomain(s)&&(s=c.selectionScaleDomain(e,s)),t.push(r.__assign({name:d,type:p,domain:u.assembleDomain(e,n)},s?{domainRaw:s}:{},{range:l},g)),t},[])}function o(e,t,n,a){if("x"===a||"y"===a){if(d.isVgRangeStep(e))return{step:{signal:t+"_step"}};if(s.isArray(e)&&2===e.length){var i=e[0],o=e[1];if(0===i&&d.isVgSignalRef(o))return[0,{signal:n.getSizeName(o.signal)}];if(d.isVgSignalRef(i)&&0===o)return[{signal:n.getSizeName(i.signal)},0]}}return e}Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),s=e("vega-util"),l=e("../../util"),d=e("../../vega.schema"),p=e("../model"),c=e("../selection/selection"),u=e("./domain");n.assembleScales=a,n.assembleScalesForModel=i,n.assembleScaleRange=o},{"../../util":579,"../../vega.schema":581,"../model":527,"../selection/selection":540,"./domain":533,tslib:462,"vega-util":588}],532:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../split"),o=function(e){function t(t,n){var a=e.call(this,{},{name:t})||this;return a.merged=!1,a.domains=[],a.setWithExplicit("type",n),a}return a.__extends(t,e),t}(i.Split);n.ScaleComponent=o},{"../split":550,tslib:462}],533:[function(e,t,n){"use strict";function a(e){A.isUnitModel(e)?i(e):o(e)}function i(e){var t=e.specifiedScales,n=e.component.scales;S.keys(n).forEach(function(a){var i=t[a],o=i?i.domain:void 0,r=s(e,a),l=n[a];l.domains=r,x.isSelectionDomain(o)&&l.set("domainRaw",{signal:C.SELECTION_DOMAIN+JSON.stringify(o)},!0)})}function o(e){for(var t=0,n=e.children,i;t<n.length;t++)i=n[t],a(i);var o=e.component.scales;S.keys(o).forEach(function(t){for(var n=0,a=e.children,i;n<a.length;n++){var r=a[n],s=r.component.scales[t];s&&(i==void 0?i=s.domains:i=i.concat(s.domains))}A.isFacetModel(e)&&i.forEach(function(e){T.isDataRefDomain(e)&&(e.data=N.FACET_SCALE_PREFIX+e.data.replace(N.FACET_SCALE_PREFIX,""))}),o[t].domains=i})}function r(e,t,n,a){if("unaggregated"===e){var i=p(t,n),o=i.valid,r=i.reason;if(!o)return void b.warn(r)}else if(e===void 0&&a.useUnaggregatedDomain){var o=p(t,n).valid;if(o)return"unaggregated"}return e}function s(e,t){var n=e.getScaleComponent(t).get("type"),a=r(e.scaleDomain(t),e.fieldDef(t),n,e.config.scale);return(a!==e.scaleDomain(t)&&(e.specifiedScales[t]=u.__assign({},e.specifiedScales[t],{domain:a})),"x"===t&&e.channelHasField("x2"))?e.channelHasField("x")?l(n,a,e,"x").concat(l(n,a,e,"x2")):l(n,a,e,"x2"):"y"===t&&e.channelHasField("y2")?e.channelHasField("y")?l(n,a,e,"y").concat(l(n,a,e,"y2")):l(n,a,e,"y2"):l(n,a,e,t)}function l(e,t,n,a){var i=n.fieldDef(a);if(t&&"unaggregated"!==t&&!x.isSelectionDomain(t))if(i.bin)b.warn(b.message.conflictedDomain(a));else return h.isDateTime(t[0])?t.map(function(e){return{signal:"{data: "+h.dateTimeExpr(e,!0)+"}"}}):[t];var o=n.stack;if(o&&a===o.fieldChannel){if("normalize"===o.offset)return[[0,1]];var r=n.requestDataName(y.MAIN);return[{data:r,field:n.field(a,{suffix:"start"})},{data:r,field:n.field(a,{suffix:"end"})}]}var s=_.isScaleChannel(a)?d(n,a,e):void 0;if("unaggregated"===t){var r=n.requestDataName(y.MAIN);return[{data:r,field:n.field(a,{aggregate:"min"})},{data:r,field:n.field(a,{aggregate:"max"})}]}if(i.bin){if(x.isBinScale(e)){var l=n.getName(g.binToString(i.bin)+"_"+i.field+"_bins");return[{signal:"sequence("+l+".start, "+l+".stop + "+l+".step, "+l+".step)"}]}if(x.hasDiscreteDomain(e))return[{data:S.isBoolean(s)?n.requestDataName(y.MAIN):n.requestDataName(y.RAW),field:n.field(a,E.binRequiresRange(i,a)?{binSuffix:"range"}:{}),sort:!0!==s&&v.isSortField(s)?s:{field:n.field(a,{}),op:"min"}}];if("x"===a||"y"===a){var r=n.requestDataName(y.MAIN);return[{data:r,field:n.field(a,{})},{data:r,field:n.field(a,{binSuffix:"end"})}]}return[{data:n.requestDataName(y.MAIN),field:n.field(a,{})}]}return s?[{data:S.isBoolean(s)?n.requestDataName(y.MAIN):n.requestDataName(y.RAW),field:n.field(a),sort:s}]:[{data:n.requestDataName(y.MAIN),field:n.field(a)}]}function d(e,t,n){if(x.hasDiscreteDomain(n)){var a=e.sort(t);return v.isSortField(a)?a:"descending"===a?{op:"min",field:e.field(t),order:"descending"}:!!S.contains(["ascending",void 0],a)||void 0}}function p(e,t){return e.aggregate?f.SHARED_DOMAIN_OP_INDEX[e.aggregate]?"quantitative"===e.type&&"log"===t?{valid:!1,reason:b.message.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:b.message.unaggregateDomainWithNonSharedDomainOp(e.aggregate)}:{valid:!1,reason:b.message.unaggregateDomainHasNoEffectForRawField(e)}}function c(e){var t=S.unique(e.map(function(e){if(T.isDataRefDomain(e)){var t=e.sort,n=u.__rest(e,["sort"]);return n}return e}),S.hash),n=S.unique(e.map(function(e){if(T.isDataRefDomain(e)){var t=e.sort;return void 0===t||S.isBoolean(t)||("count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}}).filter(function(e){return e!==void 0}),S.hash);if(1===t.length){var a=e[0];if(T.isDataRefDomain(a)&&0<n.length){var i=n[0];return 1<n.length&&(b.warn(b.message.MORE_THAN_ONE_SORT),i=!0),u.__assign({},a,{sort:i})}return a}var o=n.filter(function(e){return!!S.isBoolean(e)||!("count"!==e.op)||(b.warn(b.message.domainSortDropped(e)),!1)}),r=!0;if(1===o.length)r=o[0];else if(1<o.length){var s=o.filter(function(e){return!1!==e});1<s.length?(b.warn(b.message.MORE_THAN_ONE_SORT),r=!0):r=s[0]}var l=S.unique(e.map(function(e){return T.isDataRefDomain(e)?e.data:null}),function(e){return e});if(1===l.length&&null!==l[0]){var a={data:l[0],fields:t.map(function(e){return e.field}),sort:r};return a}return{fields:t,sort:r}}Object.defineProperty(n,"__esModule",{value:!0});var u=e("tslib"),m=e("vega-util"),f=e("../../aggregate"),g=e("../../bin"),_=e("../../channel"),y=e("../../data"),h=e("../../datetime"),b=e("../../log"),x=e("../../scale"),v=e("../../sort"),S=e("../../util"),T=e("../../vega.schema"),k=e("../../vega.schema"),E=e("../common"),N=e("../data/optimize"),A=e("../model"),C=e("../selection/selection");n.parseScaleDomain=a,n.parseDomainForChannel=s,n.domainSort=d,n.canUseUnaggregatedDomain=p,n.mergeDomains=c,n.getFieldFromDomain=function(e){if(T.isDataRefDomain(e)&&m.isString(e.field))return e.field;if(k.isDataRefUnionedDomain(e)){for(var t=void 0,n=0,a=e.fields,i;n<a.length;n++)if(i=a[n],T.isDataRefDomain(i)&&m.isString(i.field))if(!t)t=i.field;else if(t!==i.field)return b.warn("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),t;return b.warn("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),t}if(k.isFieldRefUnionDomain(e)&&m.isString){b.warn("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect.");var t=e.fields[0];return m.isString(t)?t:void 0}},n.assembleDomain=function(e,t){var n=e.component.scales[t],a=n.domains.map(function(t){return T.isDataRefDomain(t)&&(t.data=e.lookupDataSource(t.data)),t});return c(a)}},{"../../aggregate":473,"../../bin":475,"../../channel":476,"../../data":557,"../../datetime":558,"../../log":566,"../../scale":569,"../../sort":571,"../../util":579,"../../vega.schema":581,"../common":484,"../data/optimize":499,"../model":527,"../selection/selection":540,tslib:462,"vega-util":588}],534:[function(e,t,n){"use strict";function a(e){e.component.scales=p.isUnitModel(e)?i(e):o(e)}function i(e){var t=e.encoding,n=e.config,a=e.mark();return r.SCALE_CHANNELS.reduce(function(i,o){var r={},l=t[o],d;if(s.isFieldDef(l)?(d=l,r=l.scale||{}):s.isConditionalDef(l)&&s.isFieldDef(l.condition)?(d=l.condition,r=l.condition.scale||{}):"x"===o?d=s.getFieldDef(t.x2):"y"===o&&(d=s.getFieldDef(t.y2)),d){var p=r.type,c=y.scaleType(r.type,o,d,a,n.scale);i[o]=new m.ScaleComponent(e.scaleName(o+"",!0),{value:c,explicit:p===c})}return i},{})}function o(e){for(var t=e.component.scales={},n={},i=e.component.resolve,o=function(t){a(t),d.keys(t.component.scales).forEach(function(a){if(i.scale[a]=i.scale[a]||c.defaultScaleResolve(a,e),"shared"===i.scale[a]){var o=n[a],r=t.component.scales[a].getWithExplicit("type");o?l.scaleCompatible(o.value,r.value)?n[a]=u.mergeValuesWithExplicit(o,r,"type","scale",h):(i.scale[a]="independent",delete n[a]):n[a]=r}})},r=0,s=e.children,p;r<s.length;r++)p=s[r],o(p);return d.keys(n).forEach(function(a){var i=e.scaleName(a,!0),o=n[a];t[a]=new m.ScaleComponent(i,o);for(var r=0,s=e.children;r<s.length;r++){var l=s[r],d=l.component.scales[a];d&&(l.renameScale(d.get("name"),i),d.merged=!0)}}),t}Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../channel"),s=e("../../fielddef"),l=e("../../scale"),d=e("../../util"),p=e("../model"),c=e("../resolve"),u=e("../split"),m=e("./component"),f=e("./domain"),g=e("./properties"),_=e("./range"),y=e("./type");n.parseScale=function(e){a(e),f.parseScaleDomain(e);for(var t=0,n=l.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES,i;t<n.length;t++)i=n[t],g.parseScaleProperty(e,i);_.parseScaleRange(e)},n.parseScaleCore=a;var h=u.tieBreakByComparing(function(e,t){return l.scaleTypePrecedence(e)-l.scaleTypePrecedence(t)})},{"../../channel":476,"../../fielddef":561,"../../scale":569,"../../util":579,"../model":527,"../resolve":530,"../split":550,"./component":532,"./domain":533,"./properties":535,"./range":536,"./type":537}],535:[function(e,t,n){"use strict";function a(e,t){b.isUnitModel(e)?i(e,t):r(e,t)}function i(e,t){var n=e.component.scales;h.keys(n).forEach(function(a){var i=e.specifiedScales[a],r=n[a],s=e.getScaleComponent(a),l=e.fieldDef(a),d=e.sort(a),p=e.config,c=i[t],u=s.get("type"),m=g.scaleTypeSupportProperty(u,t),_=g.channelScalePropertyIncompatability(a,t);if(void 0!==c&&(m?_&&f.warn(_):f.warn(f.message.scalePropertyNotWorkWithScaleType(u,t,a))),m&&void 0===_)if(void 0!==c)r.copyKeyFromObject(t,i);else{var y=o(t,a,l,d,s.get("type"),s.get("padding"),s.get("paddingInner"),i.domain,p.scale);void 0!==y&&r.set(t,y,!1)}})}function o(e,t,n,a,i,o,r,m,f){return"nice"===e?s(i,t,n):"padding"===e?l(t,i,f):"paddingInner"===e?d(o,t,f):"paddingOuter"===e?p(o,t,i,r,f):"reverse"===e?c(i,a):"zero"===e?u(t,n,m):f[e]}function r(e,t){for(var n=e.component.scales,i=0,o=e.children,r;i<o.length;i++)r=o[i],"range"===t?v.parseScaleRange(r):a(r,t);h.keys(n).forEach(function(a){for(var i=0,o=e.children,r;i<o.length;i++){var s=o[i],l=s.component.scales[a];if(l){var d=l.getWithExplicit(t);r=x.mergeValuesWithExplicit(r,d,t,"scale",x.tieBreakByComparing(function(e,n){return"range"===t?e.step&&n.step?e.step-n.step:0:0}))}}n[a].setWithExplicit(t,r)})}function s(e,t,n){return y.contains([g.ScaleType.TIME,g.ScaleType.UTC],e)?_.smallestUnit(n.timeUnit):n.bin?void 0:y.contains([m.X,m.Y],t)}function l(e,t,n){return y.contains([m.X,m.Y],e)&&t===g.ScaleType.POINT?n.pointPadding:void 0}function d(e,t,n){return void 0===e?y.contains([m.X,m.Y],t)?n.bandPaddingInner:void 0:void 0}function p(e,t,n,a,i){return void 0===e?y.contains([m.X,m.Y],t)&&n===g.ScaleType.BAND?void 0===i.bandPaddingOuter?a/2:i.bandPaddingOuter:void 0:void 0}function c(e,t){return g.hasContinuousDomain(e)&&"descending"===t||void 0}function u(e,t,n){if("size"===e&&"quantitative"===t.type)return!0;return!!n&&"unaggregated"!==n||t.bin||!y.contains([m.X,m.Y],e)?!1:!0}Object.defineProperty(n,"__esModule",{value:!0});var m=e("../../channel"),f=e("../../log"),g=e("../../scale"),_=e("../../timeunit"),y=e("../../util"),h=e("../../util"),b=e("../model"),x=e("../split"),v=e("./range");n.parseScaleProperty=a,n.getDefaultValue=o,n.parseNonUnitScaleProperty=r,n.nice=s,n.padding=l,n.paddingInner=d,n.paddingOuter=p,n.reverse=c,n.zero=u},{"../../channel":476,"../../log":566,"../../scale":569,"../../timeunit":574,"../../util":579,"../model":527,"../split":550,"./range":536}],536:[function(e,t,n){"use strict";function a(e){var t=e.component.scales;u.SCALE_CHANNELS.forEach(function(n){var a=t[n];if(a){var r=e.getScaleComponent(n),s=e.specifiedScales[n],l=e.fieldDef(n),d="x"===n?"width":"y"===n?"height":void 0,p=d?!!e.component.layoutSize.get(d):void 0,c=r.get("type"),u=g.contains(["point","band"],c)||!!s.rangeStep;d&&e.fit&&!p&&u&&(m.warn(m.message.CANNOT_FIX_RANGE_STEP_WITH_FIT),p=!0);var f=i(e),_=o(n,c,l.type,s,e.config,a.get("zero"),e.mark(),p,e.getName(d),f);a.setWithExplicit("range",_)}})}function i(e){var t=[],n=e.getScaleComponent("x"),a=n&&n.get("range");a&&_.isVgRangeStep(a)&&c.isNumber(a.step)&&t.push(a.step);var i=e.getScaleComponent("y"),o=i&&i.get("range");return o&&_.isVgRangeStep(o)&&c.isNumber(o.step)&&t.push(o.step),t}function o(e,t,a,i,o,l,d,p,c,u){for(var g=p||null===i.rangeStep,_=0,y=n.RANGE_PROPERTIES,b;_<y.length;_++)if(b=y[_],void 0!==i[b]){var x=f.scaleTypeSupportProperty(t,b),v=f.channelScalePropertyIncompatability(e,b);if(!x)m.warn(m.message.scalePropertyNotWorkWithScaleType(t,b,e));else if(v)m.warn(v);else switch(b){case"range":return h.makeImplicit(i[b]);case"scheme":return h.makeImplicit(r(i[b]));case"rangeStep":var S=i[b];if(null!==S){if(!p)return h.makeImplicit({step:S});m.warn(m.message.rangeStepDropped(e))}}}return{explicit:!1,value:s(e,t,a,o,l,d,c,u,g)}}function r(e){if(f.isExtendedScheme(e)){var t={scheme:e.name};return e.count&&(t.count=e.count),e.extent&&(t.extent=e.extent),t}return{scheme:e}}function s(e,t,n,a,i,o,r,s,p){switch(e){case u.X:case u.Y:if(g.contains(["point","band"],t)&&!p)if(e===u.X&&"text"===o){if(a.scale.textXRangeStep)return{step:a.scale.textXRangeStep};}else if(a.scale.rangeStep)return{step:a.scale.rangeStep};return e===u.X?[0,{signal:r}]:[{signal:r},0];case u.SIZE:var c=l(o,i,a),m=d(o,s,a);return[c,m];case u.SHAPE:return"symbol";case u.COLOR:return"ordinal"===t?"nominal"===n?"category":"ordinal":"rect"===o?"heatmap":"ramp";case u.OPACITY:return[a.scale.minOpacity,a.scale.maxOpacity];}throw new Error("Scale range undefined for channel "+e)}function l(e,t,n){if(t)return 0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize;}throw new Error(m.message.incompatibleChannel("size",e))}function d(e,t,n){var a=n.scale;switch(e){case"bar":case"tick":return void 0===n.scale.maxBandSize?p(t,n.scale)-1:n.scale.maxBandSize;case"line":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":if(n.scale.maxSize)return n.scale.maxSize;var i=p(t,a);return(i-2)*(i-2);}throw new Error(m.message.incompatibleChannel("size",e))}function p(e,t){return 0<e.length?S.apply(null,e):t.rangeStep?t.rangeStep:21}Object.defineProperty(n,"__esModule",{value:!0});var c=e("vega-util"),u=e("../../channel"),m=e("../../log"),f=e("../../scale"),g=e("../../util"),_=e("../../vega.schema"),y=e("../model"),h=e("../split"),b=e("./properties");n.RANGE_PROPERTIES=["range","rangeStep","scheme"],n.parseScaleRange=function(e){y.isUnitModel(e)?a(e):b.parseNonUnitScaleProperty(e,"range")},n.parseRangeForChannel=o,n.defaultRange=s},{"../../channel":476,"../../log":566,"../../scale":569,"../../util":579,"../../vega.schema":581,"../model":527,"../split":550,"./properties":535,"vega-util":588}],537:[function(e,t,n){"use strict";function a(e,t,n){switch(t.type){case"nominal":case"ordinal":if("color"===e||"discrete"===o.rangeType(e))return"shape"===e&&"ordinal"===t.type&&r.warn(r.message.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(p.contains(["x","y"],e)){if("rect"===n)return"band";if("bar"===n)return"band"}return"point";case"temporal":if("color"===e)return"sequential";return"discrete"===o.rangeType(e)?(r.warn(r.message.discreteChannelCannotEncode(e,"temporal")),"ordinal"):"time";case"quantitative":if("color"===e)return t.bin?"bin-ordinal":"sequential";return"discrete"===o.rangeType(e)?(r.warn(r.message.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):t.bin&&"x"!==e&&"y"!==e?"bin-linear":"linear";}throw new Error(r.message.invalidFieldType(t.type))}function i(e,t){var n=t.type;if(c.contains([d.Type.ORDINAL,d.Type.NOMINAL],n))return void 0===e||l.hasDiscreteDomain(e);return n===d.Type.TEMPORAL?c.contains([s.ScaleType.TIME,s.ScaleType.UTC,s.ScaleType.SEQUENTIAL,void 0],e):n!==d.Type.QUANTITATIVE||(t.bin?c.contains([s.ScaleType.BIN_LINEAR,s.ScaleType.BIN_ORDINAL,s.ScaleType.LINEAR],e):c.contains([s.ScaleType.LOG,s.ScaleType.POW,s.ScaleType.SQRT,s.ScaleType.QUANTILE,s.ScaleType.QUANTIZE,s.ScaleType.LINEAR,s.ScaleType.SEQUENTIAL,void 0],e))}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../channel"),r=e("../../log"),s=e("../../scale"),l=e("../../scale"),d=e("../../type"),p=e("../../util"),c=e("../../util");n.scaleType=function(e,t,n,l,d){var p=a(t,n,l,d);return o.isScaleChannel(t)?void 0===e?p:s.channelSupportScaleType(t,e)?i(e,n)?e:(r.warn(r.message.scaleTypeNotWorkWithFieldDef(e,p)),p):(r.warn(r.message.scaleTypeNotWorkWithChannel(t,e,p)),p):null},n.fieldDefMatchScaleType=i},{"../../channel":476,"../../log":566,"../../scale":569,"../../type":578,"../../util":579}],538:[function(e,t,n){"use strict";function a(e,t,a){var o=c.channelSignalName(t,a,"visual"),s=c.channelSignalName(t,a,"data"),u=p.default.has(t),m=e.scaleName(a),f=d.stringValue(m),g=e.getScaleComponent(a),_=g?g.get("type"):void 0,y=e.getSizeSignalRef(a===r.X?"width":"height").signal,h=a+"(unit)",b=i(t,function(e,t){return e.concat({events:t.between[0],update:"["+h+", "+h+"]"},{events:t,update:"["+o+"[0], clamp("+h+", 0, "+y+")]"})});return b.push({events:{signal:t.name+n.SCALE_TRIGGER},update:l.hasContinuousDomain(_)&&!l.isBinScale(_)?"[scale("+f+", "+s+"[0]), scale("+f+", "+s+"[1])]":"[0, 0]"}),u?[{name:s,on:[]}]:[{name:o,value:[],on:b},{name:s,on:[{events:{signal:o},update:o+"[0] === "+o+"[1] ? null : invert("+f+", "+o+")"}]}]}function i(e,t){return e.events.reduce(function(e,n){return n.between?t(e,n):(s.warn(n+" is not an ordered event stream for interval selections"),e)},[])}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("../../channel"),s=e("../../log"),l=e("../../scale"),d=e("../../util"),c=e("./selection"),p=e("./transforms/scales");n.BRUSH="_brush",n.SCALE_TRIGGER="_scale_trigger";n.default={predicate:"vlInterval",scaleDomain:"vlIntervalDomain",signals:function(e,t){var o=t.name,u=p.default.has(t),m=[],f=[],g=[],_=[];if(t.translate&&!u){var y="!event.item || event.item.mark.name !== "+d.stringValue(o+n.BRUSH);i(t,function(e,t){var n=t.between[0].filter||(t.between[0].filter=[]);0>n.indexOf(y)&&n.push(y)})}return t.project.forEach(function(n){var i=n.channel;if(i!==r.X&&i!==r.Y)return void s.warn("Interval selections only support x and y encoding channels.");var o=a(e,t,i),p=c.channelSignalName(t,i,"data"),u=c.channelSignalName(t,i,"visual"),y=d.stringValue(e.scaleName(i)),h=e.getScaleComponent(i).get("type"),b=l.hasContinuousDomain(h)?"+":"";m.push.apply(m,o),g.push(p),f.push("{encoding: "+d.stringValue(i)+", "+("field: "+d.stringValue(n.field)+", extent: "+p+"}")),_.push({scaleName:e.scaleName(i),expr:"(!isArray("+p+") || "+("("+b+"invert("+y+", "+u+")[0] === "+b+p+"[0] && ")+(b+"invert("+y+", "+u+")[1] === "+b+p+"[1]))")})}),u||m.push({name:o+n.SCALE_TRIGGER,update:_.map(function(e){return e.expr}).join(" && ")+(" ? "+(o+n.SCALE_TRIGGER)+" : {}")}),m.concat({name:o+c.TUPLE,on:[{events:g.map(function(e){return{signal:e}}),update:g.join(" && ")+(" ? {unit: "+c.unitName(e)+", intervals: ["+f.join(", ")+"]} : null")}]})},modifyExpr:function(e,t){var n=t.name+c.TUPLE;return n+", "+("global"===t.resolve?"true":"{unit: "+c.unitName(e)+"}")},marks:function(e,t,a){var i=t.name,r=c.positionalProjections(t),s=r.xi,l=r.yi,u="data("+d.stringValue(t.name+c.STORE)+")";if(p.default.has(t))return a;var m={x:null===s?{value:0}:{signal:i+"_x[0]"},y:null===l?{value:0}:{signal:i+"_y[0]"},x2:null===s?{field:{group:"width"}}:{signal:i+"_x[1]"},y2:null===l?{field:{group:"height"}}:{signal:i+"_y[1]"}};"global"===t.resolve&&d.keys(m).forEach(function(t){m[t]=[o.__assign({test:u+".length && "+u+"[0].unit === "+c.unitName(e)},m[t]),{value:0}]});var f=t.mark,g=f.fill,_=f.fillOpacity,y=o.__rest(f,["fill","fillOpacity"]),h=d.keys(y).reduce(function(e,t){return e[t]={value:y[t]},e},{});return[{name:i+n.BRUSH+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:g},fillOpacity:{value:_}},update:m}}].concat(a,{name:i+n.BRUSH,type:"rect",clip:!0,encode:{enter:o.__assign({fill:{value:"transparent"}},h),update:m}})}}},{"../../channel":476,"../../log":566,"../../scale":569,"../../util":579,"./selection":540,"./transforms/scales":545,tslib:462}],539:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../util"),i=e("./selection"),o=e("./transforms/nearest");n.default={predicate:"vlMulti",scaleDomain:"vlMultiDomain",signals:function(e,t){var n=t.project,r=o.default.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum",s=[],l=n.map(function(e){return a.stringValue(e.channel)}).filter(function(t){return t}).join(", "),d=n.map(function(e){return a.stringValue(e.field)}).join(", "),p=n.map(function(t){var n=t.channel,i=e.fieldDef(n);return i&&i.bin?(s.push(t.field),"["+r+"["+a.stringValue(e.field(n,{}))+"], "+(r+"["+a.stringValue(e.field(n,{binSuffix:"end"}))+"]]")):r+"["+a.stringValue(t.field)+"]"}).join(", ");return[{name:t.name+i.TUPLE,value:{},on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? {unit: "+i.unitName(e)+", encodings: ["+l+"], "+("fields: ["+d+"], values: ["+p+"]")+(s.length?", "+s.map(function(e){return a.stringValue("bin_"+e)+": 1"}).join(", "):"")+"} : null",force:!0}]}]},modifyExpr:function(e,t){var n=t.name+i.TUPLE;return n+", "+("global"===t.resolve?"null":"{unit: "+i.unitName(e)+"}")}}},{"../../util":579,"./selection":540,"./transforms/nearest":543}],540:[function(e,t,n){"use strict";function a(e,t){return i(e,function(n,a){t=a.marks?a.marks(e,n,t):t,y.forEachTransform(n,function(a){a.marks&&(t=a.marks(e,n,t))})}),t}function i(e,t){var n=e.component.selection;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];t(i,o(i.type))}}function o(e){return"single"===e?_.default:"multi"===e?g.default:"interval"===e?f.default:null}function r(e){for(var t=e.parent;t&&!m.isFacetModel(t);)t=t.parent;return t}Object.defineProperty(n,"__esModule",{value:!0});var s=e("tslib"),l=e("vega-event-selector"),d=e("../../channel"),p=e("../../log"),c=e("../../selection"),u=e("../../util"),m=e("../model"),f=e("./interval"),g=e("./multi"),_=e("./single"),y=e("./transforms/transforms");n.STORE="_store",n.TUPLE="_tuple",n.MODIFY="_modify",n.SELECTION_DOMAIN="_selection_domain_",n.parseUnitSelection=function(e,t){var n={},a=e.config.selection,i=function(i){if(!t.hasOwnProperty(i))return"continue";var o=t[i],r=a[o.type];for(var d in r)"encodings"==d&&o.fields||"fields"==d&&o.encodings||("mark"==d&&(o[d]=s.__assign({},r[d],o[d])),(void 0===o[d]||!0===o[d])&&(o[d]=r[d]||o[d]));i=u.varName(i);var p=n[i]=s.__assign({},o,{name:i,events:u.isString(o.on)?l.selector(o.on,"scope"):o.on});y.forEachTransform(p,function(t){t.parse&&t.parse(e,o,p)})};for(var o in t)i(o);return n},n.assembleUnitSelectionSignals=function(e,t){i(e,function(a,i){var o=a.name,r=i.modifyExpr(e,a);t.push.apply(t,i.signals(e,a)),y.forEachTransform(a,function(n){n.signals&&(t=n.signals(e,a,t)),n.modifyExpr&&(r=n.modifyExpr(e,a,r))}),t.push({name:o+n.MODIFY,on:[{events:{signal:o+n.TUPLE},update:"modify("+u.stringValue(a.name+n.STORE)+", "+r+")"}]})});var a=r(e);if(t.length&&a){var o=u.stringValue(a.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:l.selector("mousemove","scope"),update:"isTuple(facet) ? facet : group("+o+").datum"}]})}return t},n.assembleTopLevelSignals=function(e,t){var n=!1;if(i(e,function(a,i){i.topLevelSignals&&(t=i.topLevelSignals(e,a,t)),y.forEachTransform(a,function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,a,t))}),n=!0}),n){var a=t.filter(function(e){return"unit"===e.name});a.length||t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return t},n.assembleUnitSelectionData=function(e,t){return i(e,function(e){var a=t.filter(function(t){return t.name===e.name+n.STORE});a.length||t.push({name:e.name+n.STORE})}),t},n.assembleUnitSelectionMarks=a,n.assembleLayerSelectionMarks=function(e,t){return e.children.forEach(function(e){m.isUnitModel(e)&&(t=a(e,t))}),t},n.predicate=function(e,t,a){var i=[],r=u.logicalExpr(t,function(t){var r=u.varName(t),s=e.getSelectionComponent(r,t),l=u.stringValue(r+n.STORE);if(s.timeUnit){var d=a||e.component.data.raw,p=s.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}return i.push(l),o(s.type).predicate+("("+l+", datum")+("global"===s.resolve?")":", "+u.stringValue(s.resolve)+")")});return"!("+i.map(function(e){return"length(data("+e+"))"}).join(" || ")+(") || ("+r+")")},n.isRawSelectionDomain=function(e){return 0<=e.signal.indexOf(n.SELECTION_DOMAIN)},n.selectionScaleDomain=function(e,t){var a=JSON.parse(t.signal.replace(n.SELECTION_DOMAIN,"")),i=u.varName(a.selection),r=e.component.selection&&e.component.selection[i];if(r)p.warn("Use \"bind\": \"scales\" to setup a binding for scales and selections within the same view.");else return r=e.getSelectionComponent(i,a.selection),a.encoding||a.field||(a.field=r.project[0].field,1<r.project.length&&p.warn("A \"field\" or \"encoding\" must be specified when using a selection as a scale domain. Using \"field\": "+u.stringValue(a.field)+".")),{signal:o(r.type).scaleDomain+("("+u.stringValue(i+n.STORE)+", "+u.stringValue(a.encoding||null)+", ")+u.stringValue(a.field||null)+("global"===r.resolve?")":", "+u.stringValue(r.resolve)+")")};return{signal:"null"}},n.unitName=function(e){var t=u.stringValue(e.name),n=r(e);return n&&(t+=(n.facet.row?" + '_' + facet["+u.stringValue(n.field("row"))+"]":"")+(n.facet.column?" + '_' + facet["+u.stringValue(n.field("column"))+"]":"")),t},n.requiresSelectionId=function(e){var t=!1;return i(e,function(e){t=t||e.project.some(function(e){return e.field===c.SELECTION_ID})}),t},n.channelSignalName=function(e,t,n){return u.varName(e.name+"_"+("visual"===n?t:e.fields[t]))},n.positionalProjections=function(e){var t=null,n=null,a=null,o=null;return e.project.forEach(function(e,r){e.channel===d.X?(t=e,n=r):e.channel===d.Y&&(a=e,o=r)}),{x:t,xi:n,y:a,yi:o}}},{"../../channel":476,"../../log":566,"../../selection":570,"../../util":579,"../model":527,"./interval":538,"./multi":539,"./single":541,"./transforms/transforms":547,tslib:462,"vega-event-selector":471}],541:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../util"),i=e("./multi"),o=e("./selection"),r={predicate:"vlSingle",scaleDomain:"vlSingleDomain",signals:i.default.signals,topLevelSignals:function(e,t,n){var i=n.filter(function(e){return e.name===t.name}),r="data("+a.stringValue(t.name+o.STORE)+")";return i.length?n:n.concat({name:t.name,update:r+".length && {"+t.project.map(function(e,t){return e.field+": "+(r+"[0].values")+"["+t+"]"}).join(", ")+"}"})},modifyExpr:function(e,t){var n=t.name+o.TUPLE;return n+", "+("global"===t.resolve?"true":"{unit: "+o.unitName(e)+"}")}};n.default=r},{"../../util":579,"./multi":539,"./selection":540}],542:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../util"),i=e("../selection"),o=e("./nearest");n.default={has:function(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind},topLevelSignals:function(e,t,n){var i=t.name,r=t.project,s=t.bind,l=o.default.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.forEach(function(e){var o=a.varName(i+"_"+e.field),r=n.filter(function(e){return e.name===o});r.length||n.unshift({name:o,value:"",on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? "+l+"["+a.stringValue(e.field)+"] : null"}],bind:s[e.field]||s[e.channel]||s})}),n},signals:function(e,t,n){var o=t.name,r=t.project,s=n.filter(function(e){return e.name===o+i.TUPLE})[0],l=r.map(function(e){return a.stringValue(e.field)}).join(", "),d=r.map(function(e){return a.varName(o+"_"+e.field)});return s.update=d.join(" && ")+" ? {fields: ["+l+"], values: ["+d.join(", ")+"]} : null",delete s.value,delete s.on,n}}},{"../../../util":579,"../selection":540,"./nearest":543}],543:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../log"),i=e("../selection"),o="voronoi";n.default={has:function(e){return"interval"!==e.type&&e.nearest},marks:function(e,t,n){var r=i.positionalProjections(t),s=r.x,l=r.y,d=e.mark();if("line"===d||"area"===d)return a.warn(a.message.nearestNotSupportForContinuous(d)),n;var p={name:e.getName(o),type:"path",from:{data:e.getName("marks")},encode:{enter:{fill:{value:"transparent"},strokeWidth:{value:0.35},stroke:{value:"transparent"},isVoronoi:{value:!0}}},transform:[{type:"voronoi",x:!s&&(s||l)?{expr:"0"}:"datum.x",y:!l&&(s||l)?{expr:"0"}:"datum.y",size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},c=0,u=!1;return n.forEach(function(t,n){var a=t.name||"";a===e.component.mark[0].name?c=n:0<=a.indexOf(o)&&(u=!0)}),u||n.splice(c+1,0,p),n}}},{"../../../log":566,"../selection":540}],544:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../log"),i=e("../../../util"),o=e("../../data/timeunit");n.default={has:function(e){return e.fields!==void 0||e.encodings!==void 0},parse:function(e,t,n){var r={},s={};(t.fields||[]).forEach(function(e){return r[e]=null}),(t.encodings||[]).forEach(function(t){var n=e.fieldDef(t);if(!n)a.warn(a.message.cannotProjectOnChannelWithoutField(t));else if(n.timeUnit){var i=e.field(t);r[i]=t,s[i]={as:i,field:n.field,timeUnit:n.timeUnit}}else r[n.field]=t});var l=n.project||(n.project=[]);for(var d in r)r.hasOwnProperty(d)&&l.push({field:d,channel:r[d]});var c=n.fields||(n.fields={});l.filter(function(e){return e.channel}).forEach(function(e){return c[e.channel]=e.field}),i.keys(s).length&&(n.timeUnit=new o.TimeUnitNode(s))}}},{"../../../log":566,"../../../util":579,"../../data/timeunit":504}],545:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../log"),i=e("../../../scale"),o=e("../../../util"),r=e("../selection");n.default={has:function(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function(e,t,n){var o=n.scales=[];n.project.forEach(function(t){var s=t.channel,l=e.getScaleComponent(s),d=l?l.get("type"):void 0;return l&&i.hasContinuousDomain(d)&&!i.isBinScale(d)?void(l.set("domainRaw",{signal:r.channelSignalName(n,s,"data")},!0),o.push(s)):void a.warn("Scale bindings are currently only supported for scales with unbinned, continuous domains.")})},topLevelSignals:function(e,t,n){if(!e.parent)return n;var a=t.scales.filter(function(e){return!n.filter(function(n){return n.name===r.channelSignalName(t,e,"data")}).length});return n.concat(a.map(function(e){return{name:r.channelSignalName(t,e,"data")}}))},signals:function(e,t,n){return e.parent&&t.scales.forEach(function(e){var a=n.filter(function(n){return n.name===r.channelSignalName(t,e,"data")})[0];a.push="outer",delete a.value,delete a.update}),n}},n.domain=function(e,t){var n=o.stringValue(e.scaleName(t));return"domain("+n+")"}},{"../../../log":566,"../../../scale":569,"../../../util":579,"../selection":540}],546:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../selection"),i="_toggle";n.default={has:function(e){return"multi"===e.type&&e.toggle},signals:function(e,t,n){return n.concat({name:t.name+i,value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t){var n=t.name+a.TUPLE,o=t.name+i;return o+" ? null : "+n+", "+("global"===t.resolve?o+" ? null : true, ":o+" ? null : {unit: "+a.unitName(e)+"}, ")+(o+" ? "+n+" : null")}}},{"../selection":540}],547:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./inputs"),i=e("./nearest"),o=e("./project"),r=e("./scales"),s=e("./toggle"),l=e("./translate"),d=e("./zoom"),p={project:o.default,toggle:s.default,scales:r.default,translate:l.default,zoom:d.default,inputs:a.default,nearest:i.default};n.forEachTransform=function(e,n){for(var a in p)p[a].has(e)&&n(p[a])}},{"./inputs":542,"./nearest":543,"./project":544,"./scales":545,"./toggle":546,"./translate":548,"./zoom":549}],548:[function(e,t,n){"use strict";function a(e,t,n,a,i){var r=t.name,c=s.default.has(t),u=i.filter(function(e){return e.name===l.channelSignalName(t,n,c?"data":"visual")})[0],m=r+p,f=e.getSizeSignalRef(a).signal,g=e.getScaleComponent(n),_=g.get("type"),y=c&&n===o.X?"-":"",h=r+d+".extent_"+n,b=""+y+m+"."+n+" / "+(c?""+f:"span("+h+")"),x=c?"log"===_?"panLog":"pow"===_?"panPow":"panLinear":"panLinear",v=x+"("+h+", "+b+(c&&"pow"===_?", "+(g.get("exponent")||1):"")+")";u.on.push({events:{signal:m},update:c?v:"clampRange("+v+", 0, "+f+")"})}Object.defineProperty(n,"__esModule",{value:!0});var i=e("vega-event-selector"),o=e("../../../channel"),r=e("../interval"),l=e("../selection"),s=e("./scales"),d="_translate_anchor",p="_translate_delta";n.default={has:function(e){return"interval"===e.type&&e.translate},signals:function(e,t,n){var c=t.name,u=s.default.has(t),m=c+d,f=l.positionalProjections(t),g=f.x,_=f.y,y=i.selector(t.translate,"scope");return u||(y=y.map(function(t){return t.between[0].markname=c+r.BRUSH,t})),n.push({name:m,value:{},on:[{events:y.map(function(t){return t.between[0]}),update:"{x: x(unit), y: y(unit)"+(null===g?"":", extent_x: "+(u?s.domain(e,o.X):"slice("+l.channelSignalName(t,"x","visual")+")"))+(null===_?"":", extent_y: "+(u?s.domain(e,o.Y):"slice("+l.channelSignalName(t,"y","visual")+")"))+"}"}]},{name:c+p,value:{},on:[{events:y,update:"{x: "+m+".x - x(unit), y: "+m+".y - y(unit)}"}]}),null!==g&&a(e,t,o.X,"width",n),null!==_&&a(e,t,o.Y,"height",n),n}}},{"../../../channel":476,"../interval":538,"../selection":540,"./scales":545,"vega-event-selector":471}],549:[function(e,t,n){"use strict";function a(e,t,n,a,i){var o=t.name,r=d.default.has(t),s=i.filter(function(e){return e.name===l.channelSignalName(t,n,r?"data":"visual")})[0],u=e.getSizeSignalRef(a).signal,m=e.getScaleComponent(n),f=m.get("type"),g=r?d.domain(e,n):s.name,_=o+c,y=r?"log"===f?"zoomLog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear",h=y+"("+g+", "+(""+o+p+"."+n)+", "+_+(r&&"pow"===f?", "+(m.get("exponent")||1):"")+")";s.on.push({events:{signal:_},update:r?h:"clampRange("+h+", 0, "+u+")"})}Object.defineProperty(n,"__esModule",{value:!0});var i=e("vega-event-selector"),o=e("../../../channel"),r=e("../../../util"),s=e("../interval"),l=e("../selection"),d=e("./scales"),p="_zoom_anchor",c="_zoom_delta";n.default={has:function(e){return"interval"===e.type&&e.zoom},signals:function(e,t,n){var u=t.name,m=d.default.has(t),f=l.positionalProjections(t),g=f.x,_=f.y,y=r.stringValue(e.scaleName(o.X)),h=r.stringValue(e.scaleName(o.Y)),b=i.selector(t.zoom,"scope");return m||(b=b.map(function(t){return t.markname=u+s.BRUSH,t})),n.push({name:u+p,on:[{events:b,update:m?"{"+[y?"x: invert("+y+", x(unit))":"",h?"y: invert("+h+", y(unit))":""].filter(function(e){return!!e}).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:u+c,on:[{events:b,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),null!==g&&a(e,t,"x","width",n),null!==_&&a(e,t,"y","height",n),n}}},{"../../../channel":476,"../../../util":579,"../interval":538,"../selection":540,"./scales":545,"vega-event-selector":471}],550:[function(e,t,n){"use strict";function a(e,t,n,a){return e.explicit&&t.explicit&&o.warn(o.message.mergeConflictingProperty(n,a,e.value,t.value)),e}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),o=e("../log"),r=e("../util"),s=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.explicit=e,this.implicit=t}return e.prototype.clone=function(){return new e(r.duplicate(this.explicit),r.duplicate(this.implicit))},e.prototype.combine=function(){return i.__assign({},this.explicit,this.implicit)},e.prototype.get=function(e){return void 0===this.explicit[e]?this.implicit[e]:this.explicit[e]},e.prototype.getWithExplicit=function(e){return void 0===this.explicit[e]?void 0===this.implicit[e]?{explicit:!1,value:void 0}:{explicit:!1,value:this.implicit[e]}:{explicit:!0,value:this.explicit[e]}},e.prototype.setWithExplicit=function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)},e.prototype.set=function(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this},e.prototype.copyKeyFromSplit=function(e,t){void 0===t.explicit[e]?void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1):this.set(e,t.explicit[e],!0)},e.prototype.copyKeyFromObject=function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)},e}();n.Split=s,n.makeExplicit=function(e){return{explicit:!0,value:e}},n.makeImplicit=function(e){return{explicit:!1,value:e}},n.tieBreakByComparing=function(e){return function(t,n,i,o){var r=e(t.value,n.value);if(0<r)return t;return 0>r?n:a(t,n,i,o)}},n.defaultTieBreaker=a,n.mergeValuesWithExplicit=function(e,t,n,i,o){return void 0===o&&(o=a),void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:e.value===t.value?e:o(e,t,n,i)}},{"../log":566,"../util":579,tslib:462}],551:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("../channel"),o=e("../encoding"),r=e("../encoding"),s=e("../fielddef"),l=e("../mark"),d=e("../stack"),p=e("../util"),c=e("./axis/parse"),u=e("./data/parse"),m=e("./layoutsize/assemble"),f=e("./layoutsize/parse"),g=e("./mark/init"),_=e("./mark/mark"),y=e("./model"),h=e("./repeater"),b=e("./selection/selection"),x=function(e){function t(t,n,i,o,s,p,c){void 0===o&&(o={});var u=e.call(this,t,n,i,p,void 0)||this;u.fit=c,u.type="unit",u.specifiedScales={},u.specifiedAxes={},u.specifiedLegends={},u.selection={},u.children=[],u.initSize(a.__assign({},o,t.width?{width:t.width}:{},t.height?{height:t.height}:{})),u.markDef=l.isMarkDef(t.mark)?a.__assign({},t.mark):{type:t.mark};var m=u.markDef.type,f=u.encoding=r.normalizeEncoding(h.replaceRepeaterInEncoding(t.encoding||{},s),m);return u.stack=d.stack(m,f,u.config.stack),u.specifiedScales=u.initScales(m,f),u.encoding=g.initEncoding(u.markDef,f,u.stack,u.config),u.specifiedAxes=u.initAxes(f),u.specifiedLegends=u.initLegend(f),u.selection=t.selection,u}return a.__extends(t,e),t.prototype.scaleDomain=function(e){var t=this.specifiedScales[e];return t?t.domain:void 0},t.prototype.sort=function(e){return(this.getMapping()[e]||{}).sort},t.prototype.axis=function(e){return this.specifiedAxes[e]},t.prototype.legend=function(e){return this.specifiedLegends[e]},t.prototype.initScales=function(e,t){return i.SCALE_CHANNELS.reduce(function(e,n){var a=t[n],i,o;return s.isFieldDef(a)?(i=a,o=a.scale):s.isConditionalDef(a)&&s.isFieldDef(a.condition)?(i=a.condition,o=a.condition.scale):"x"===n?i=s.getFieldDef(t.x2):"y"===n&&(i=s.getFieldDef(t.y2)),i&&(e[n]=o||{}),e},{})},t.prototype.initAxes=function(e){return[i.X,i.Y].reduce(function(t,n){var o=e[n];if(s.isFieldDef(o)||n===i.X&&s.isFieldDef(e.x2)||n===i.Y&&s.isFieldDef(e.y2)){var r=s.isFieldDef(o)?o.axis:null;null!==r&&!1!==r&&(t[n]=a.__assign({},r))}return t},{})},t.prototype.initLegend=function(e){return i.NONPOSITION_SCALE_CHANNELS.reduce(function(t,n){var i=e[n];if(i){var o=s.isFieldDef(i)?i.legend:i.condition&&s.isFieldDef(i.condition)?i.condition.legend:null;null!==o&&!1!==o&&(t[n]=a.__assign({},o))}return t},{})},t.prototype.parseData=function(){this.component.data=u.parseData(this)},t.prototype.parseLayoutSize=function(){f.parseUnitLayoutSize(this)},t.prototype.parseSelection=function(){this.component.selection=b.parseUnitSelection(this,this.selection)},t.prototype.parseMarkGroup=function(){this.component.mark=_.parseMarkGroup(this)},t.prototype.parseAxisAndHeader=function(){this.component.axes=c.parseUnitAxis(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return b.assembleTopLevelSignals(this,e)},t.prototype.assembleSelectionSignals=function(){return b.assembleUnitSelectionSignals(this,[])},t.prototype.assembleSelectionData=function(e){return b.assembleUnitSelectionData(this,e)},t.prototype.assembleLayout=function(){return null},t.prototype.assembleLayoutSignals=function(){return m.assembleLayoutSignals(this)},t.prototype.assembleMarks=function(){var e=this.component.mark||[];return this.parent&&y.isLayerModel(this.parent)||(e=b.assembleUnitSelectionMarks(this,e)),e.map(this.correctDataNames)},t.prototype.assembleLayoutSize=function(){return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},t.prototype.getMapping=function(){return this.encoding},t.prototype.toSpec=function(e,t){var n=p.duplicate(this.encoding),a;return a={mark:this.markDef,encoding:n},e||(a.config=p.duplicate(this.config)),t||(a.data=p.duplicate(this.data)),a},t.prototype.mark=function(){return this.markDef.type},t.prototype.channelHasField=function(e){return o.channelHasField(this.encoding,e)},t.prototype.fieldDef=function(e){var t=this.encoding[e];return s.getFieldDef(t)},t}(y.ModelWithField);n.UnitModel=x},{"../channel":476,"../encoding":559,"../fielddef":561,"../mark":568,"../stack":573,"../util":579,"./axis/parse":480,"./data/parse":501,"./layoutsize/assemble":508,"./layoutsize/parse":509,"./mark/init":517,"./mark/mark":519,"./model":527,"./repeater":529,"./selection/selection":540,tslib:462}],552:[function(e,t,n){"use strict";function a(e){return!!e.type}function i(e){return l.__assign({},e,{encoding:p.reduce(e.encoding,function(e,t,a){return-1<g.indexOf(a)?e[a]=t:m.warn(m.message.incompatibleChannel(a,n.BOXPLOT)),e},{})})}function o(e){var t=e.mark,i=e.encoding,o=l.__rest(e,["mark","encoding"]);if(u.isFieldDef(i.x)&&u.isContinuous(i.x)){if(u.isFieldDef(i.y)&&u.isContinuous(i.y)){if(i.x.aggregate===void 0&&i.y.aggregate===n.BOXPLOT)return"vertical";if(void 0===i.y.aggregate&&i.x.aggregate===n.BOXPLOT)return"horizontal";if(i.x.aggregate===n.BOXPLOT&&i.y.aggregate===n.BOXPLOT)throw new Error("Both x and y cannot have aggregate");else return a(t)&&t.orient?t.orient:"vertical"}return"horizontal"}if(u.isFieldDef(i.y)&&u.isContinuous(i.y))return"vertical";throw new Error("Need a valid continuous axis for boxplots")}function r(e,t){var a=e.mark,i=e.encoding,o=l.__rest(e,["mark","encoding"]),r,s;if("vertical"===t?(s="y",r=i.y):(s="x",r=i.x),r&&r.aggregate){var d=r.aggregate,p=l.__rest(r,["aggregate"]);d!==n.BOXPLOT&&m.warn("Continuous axis should not have customized aggregation function "+d),r=p}return{continuousAxisChannelDef:r,continuousAxis:s}}function s(e,t,a){var i=r(e,t),o=i.continuousAxisChannelDef,s=i.continuousAxis,l=e.encoding,d=[{aggregate:"q1",field:o.field,as:"lowerBox"},{aggregate:"q3",field:o.field,as:"upperBox"},{aggregate:"median",field:o.field,as:"midBox"}],p=[];void 0===a?(d.push({aggregate:"min",field:o.field,as:"lowerWhisker"}),d.push({aggregate:"max",field:o.field,as:"upperWhisker"})):p=[{calculate:"datum.upperBox - datum.lowerBox",as:"IQR"},{calculate:"datum.lowerBox - datum.IQR * "+a,as:"lowerWhisker"},{calculate:"datum.upperBox + datum.IQR * "+a,as:"lowerWhisker"}];var m=[],f=[],g=[],_={};return c.forEach(l,function(e,t){if(t!==s)if(u.isFieldDef(e)){if(e.aggregate&&e.aggregate!==n.BOXPLOT)d.push({aggregate:e.aggregate,field:e.field,as:u.field(e)});else if(void 0===e.aggregate){var a=u.field(e),i=e.bin;if(i){var o=e.field;f.push({bin:i,field:o,as:a})}else if(e.timeUnit){var r=e.timeUnit,p=e.field;g.push({timeUnit:r,field:p,as:a})}m.push(a)}_[t]={field:u.field(e),type:e.type}}else _[t]=l[t]}),{transform:[].concat(f,g,[{summarize:d,groupby:m}],p),continuousAxisChannelDef:o,continuousAxis:s,encodingWithoutContinuousAxis:_}}Object.defineProperty(n,"__esModule",{value:!0});var l=e("tslib"),d=e("vega-util"),p=e("../encoding"),c=e("./../encoding"),u=e("./../fielddef"),m=e("./../log"),f=e("./common");n.BOXPLOT="box-plot",n.isBoxPlotDef=a,n.BOXPLOT_STYLES=["boxWhisker","box","boxMid"],n.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX={box:["size","color"],boxWhisker:["color"],boxMid:["color"]};var g=["x","y","color","detail","opacity","size"];n.filterUnsupportedChannels=i,n.normalizeBoxPlot=function(e,t){e=i(e);var n=e.mark,r=e.encoding,p=e.selection,c=l.__rest(e,["mark","encoding","selection"]),u;a(n)&&n.extent&&d.isNumber(n.extent)&&(u=n.extent);var m=o(e),g=s(e,m,u),_=g.transform,y=g.continuousAxisChannelDef,h=g.continuousAxis,b=g.encodingWithoutContinuousAxis,x=b.color,v=b.size,S=l.__rest(b,["color","size"]),T=v?{size:v}:f.getMarkSpecificConfigMixins(t.box,"size"),k={};return y.scale&&(k.scale=y.scale),y.axis&&(k.axis=y.axis),l.__assign({},c,{transform:_,layer:[{mark:{type:"rule",style:"boxWhisker"},encoding:l.__assign((E={},E[h]=l.__assign({field:"lowerWhisker",type:y.type},k),E[h+"2"]={field:"lowerBox",type:y.type},E),S,f.getMarkSpecificConfigMixins(t.boxWhisker,"color"))},{mark:{type:"rule",style:"boxWhisker"},encoding:l.__assign((N={},N[h]={field:"upperBox",type:y.type},N[h+"2"]={field:"upperWhisker",type:y.type},N),S,f.getMarkSpecificConfigMixins(t.boxWhisker,"color"))},l.__assign({},p?{selection:p}:{},{mark:{type:"bar",style:"box"},encoding:l.__assign((A={},A[h]={field:"lowerBox",type:y.type},A[h+"2"]={field:"upperBox",type:y.type},A),b,b.color?{}:f.getMarkSpecificConfigMixins(t.box,"color"),T)}),{mark:{type:"tick",style:"boxMid"},encoding:l.__assign((C={},C[h]={field:"midBox",type:y.type},C),S,f.getMarkSpecificConfigMixins(t.boxMid,"color"),T)}]});var E,N,A,C}},{"../encoding":559,"./../encoding":559,"./../fielddef":561,"./../log":566,"./common":553,tslib:462,"vega-util":588}],553:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getMarkSpecificConfigMixins=function(e,t){var n=e[t];return n===void 0?{}:(a={},a[t]={value:n},a);var a}},{}],554:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib");n.ERRORBAR="error-bar",n.normalizeErrorBar=function(e){var t=e.mark,n=e.selection,i=e.encoding,o=a.__rest(e,["mark","selection","encoding"]),r=i.size,s=a.__rest(i,["size"]),l=i.x2,d=i.y2,p=a.__rest(i,["x2","y2"]),c=p.x,u=p.y,m=a.__rest(p,["x","y"]);if(!i.x2&&!i.y2)throw new Error("Neither x2 or y2 provided");return a.__assign({},o,{layer:[{mark:"rule",encoding:s},{mark:"tick",encoding:p},{mark:"tick",encoding:i.x2?a.__assign({x:i.x2,y:i.y},m):a.__assign({x:i.x,y:i.y2},m)}]})}},{tslib:462}],555:[function(e,t,n){"use strict";function a(e,t){l[e]=t}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),o=e("./../mark"),r=e("./boxplot"),s=e("./errorbar"),l={};n.add=a,n.remove=function(e){delete l[e]},n.COMPOSITE_MARK_STYLES=r.BOXPLOT_STYLES,n.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=i.__assign({},r.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX),a(r.BOXPLOT,r.normalizeBoxPlot),a(s.ERRORBAR,s.normalizeErrorBar),n.normalize=function(e,t){var n=o.isMarkDef(e.mark)?e.mark.type:e.mark,a=l[n];if(a)return a(e,t);throw new Error("Unregistered composite mark "+n)}},{"./../mark":568,"./boxplot":552,"./errorbar":554,tslib:462}],556:[function(e,t,n){"use strict";function a(e,t,n){var a="title"===t?m.extractTitleConfig(e.title).mark:e[t];"view"===t&&(n="cell");var o=i.__assign({},a,e.style[t]);0<f.keys(o).length&&(e.style[n||t]=o),delete e[t]}Object.defineProperty(n,"__esModule",{value:!0});var i=e("tslib"),o=e("./compositemark"),r=e("./compositemark/index"),s=e("./guide"),l=e("./legend"),d=e("./mark"),p=e("./mark"),c=e("./scale"),u=e("./selection"),m=e("./title"),f=e("./util");n.defaultViewConfig={width:200,height:200},n.defaultConfig={padding:5,timeFormat:"%b %d, %Y",countTitle:"Number of Records",invalidValues:"filter",view:n.defaultViewConfig,mark:p.defaultMarkConfig,area:{},bar:p.defaultBarConfig,circle:{},line:{},point:{},rect:{},rule:{color:"black"},square:{},text:{color:"black"},tick:p.defaultTickConfig,box:{size:14},boxWhisker:{},boxMid:{color:"white"},scale:c.defaultScaleConfig,axis:{},axisX:{},axisY:{minExtent:30},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:l.defaultLegendConfig,selection:u.defaultConfig,style:{},title:{}},n.initConfig=function(e){return f.mergeDeep(f.duplicate(n.defaultConfig),e)};var g=["view"].concat(d.PRIMITIVE_MARKS,o.COMPOSITE_MARK_STYLES),_=["padding","numberFormat","timeFormat","countTitle","stack","scale","selection","invalidValues","overlay"],y=i.__assign({view:["width","height"]},d.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX,r.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX);n.stripAndRedirectConfig=function(e){e=f.duplicate(e);for(var t=0,n=_,i;t<n.length;t++)i=n[t],delete e[i];if(e.axis)for(var o=0,r=s.VL_ONLY_GUIDE_CONFIG,i;o<r.length;o++)i=r[o],delete e.axis[i];if(e.legend)for(var l=0,p=s.VL_ONLY_GUIDE_CONFIG,i;l<p.length;l++)i=p[l],delete e.legend[i];if(e.mark)for(var c=0,u=d.VL_ONLY_MARK_CONFIG_PROPERTIES,i;c<u.length;c++)i=u[c],delete e.mark[i];for(var m=0,h=g,b;m<h.length;m++){b=h[m];for(var x=0,v=d.VL_ONLY_MARK_CONFIG_PROPERTIES,i;x<v.length;x++)i=v[x],delete e[b][i];var S=y[b];if(S)for(var T=0,k=S,i;T<k.length;T++)i=k[T],delete e[b][i];a(e,b)}for(var i in a(e,"title","group-title"),e)f.isObject(e[i])&&0===f.keys(e[i]).length&&delete e[i];return 0<f.keys(e).length?e:void 0}},{"./compositemark":555,"./compositemark/index":555,"./guide":563,"./legend":565,"./mark":568,"./scale":569,"./selection":570,"./title":575,"./util":579,tslib:462}],557:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isUrlData=function(e){return!!e.url},n.isInlineData=function(e){return!!e.values},n.isNamedData=function(e){return!!e.name},n.MAIN="main",n.RAW="raw"},{}],558:[function(e,t,n){"use strict";function a(e){if(s.isNumber(e))return 4<e&&r.warn(r.message.invalidTimeUnit("quarter",e)),e-1+"";throw new Error(r.message.invalidTimeUnit("quarter",e))}function i(e){if(s.isNumber(e))return e-1+"";var t=e.toLowerCase(),a=n.MONTHS.indexOf(t);if(-1!==a)return a+"";var i=t.substr(0,3),o=n.SHORT_MONTHS.indexOf(i);if(-1!==o)return o+"";throw new Error(r.message.invalidTimeUnit("month",e))}function o(e){if(s.isNumber(e))return e%7+"";var t=e.toLowerCase(),a=n.DAYS.indexOf(t);if(-1!==a)return a+"";var i=t.substr(0,3),o=n.SHORT_DAYS.indexOf(i);if(-1!==o)return o+"";throw new Error(r.message.invalidTimeUnit("day",e))}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./log"),s=e("./util");n.isDateTime=function(e){return!!e&&(!!e.year||!!e.quarter||!!e.month||!!e.date||!!e.day||!!e.hours||!!e.minutes||!!e.seconds||!!e.milliseconds)},n.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],n.SHORT_MONTHS=n.MONTHS.map(function(e){return e.substr(0,3)}),n.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n.SHORT_DAYS=n.DAYS.map(function(e){return e.substr(0,3)}),n.dateTimeExpr=function(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day&&1<s.keys(e).length&&(r.warn(r.message.droppedDay(e)),e=s.duplicate(e),delete e.day),void 0===e.year?void 0===e.day?n.push(0):n.push(2006):n.push(e.year),void 0!==e.month){var l=t?i(e.month):e.month;n.push(l)}else if(void 0!==e.quarter){var d=t?a(e.quarter):e.quarter;n.push(d+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var p=t?o(e.day):e.day;n.push(p+"+1")}else n.push(1);for(var c=0,u=["hours","minutes","seconds","milliseconds"],m;c<u.length;c++)m=u[c],void 0===e[m]?n.push(0):n.push(e[m]);return e.utc?"utc("+n.join(", ")+")":"datetime("+n.join(", ")+")"}},{"./log":566,"./util":579}],559:[function(e,t,n){"use strict";function a(e,t){var n=e&&e[t];return!!n&&(s.isArray(n)?s.some(n,function(e){return!!e.field}):o.isFieldDef(n)||o.hasConditionFieldDef(n))}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./channel"),o=e("./fielddef"),r=e("./log"),s=e("./util");n.channelHasField=a,n.isAggregate=function(e){return s.some(i.CHANNELS,function(t){if(a(e,t)){var n=e[t];if(s.isArray(n))return s.some(n,function(e){return!!e.aggregate});var i=o.getFieldDef(n);return i&&!!i.aggregate}return!1})},n.normalizeEncoding=function(e,t){return s.keys(e).reduce(function(n,a){if(!i.supportMark(a,t))return r.warn(r.message.incompatibleChannel(a,t)),n;if("size"===a&&"line"===t){var l=o.getFieldDef(e[a]);if(l&&l.aggregate)return r.warn(r.message.incompatibleChannel(a,t,"when the field is aggregated.")),n}if("detail"===a||"order"===a){var d=e[a];d&&(n[a]=(s.isArray(d)?d:[d]).reduce(function(e,t){return o.isFieldDef(t)?e.push(o.normalizeFieldDef(t,a)):r.warn(r.message.emptyFieldDef(t,a)),e},[]))}else{var d=e[a];if(!o.isFieldDef(d)&&!o.isValueDef(d)&&!o.isConditionalDef(d))return r.warn(r.message.emptyFieldDef(d,a)),n;n[a]=o.normalize(d,a)}return n},{})},n.isRanged=function(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)},n.fieldDefs=function(e){var t=[];return i.CHANNELS.forEach(function(n){if(a(e,n)){var i=e[n];(s.isArray(i)?i:[i]).forEach(function(e){o.isFieldDef(e)?t.push(e):o.hasConditionFieldDef(e)&&t.push(e.condition)})}}),t},n.forEach=function(e,t,n){e&&s.keys(e).forEach(function(a){s.isArray(e[a])?e[a].forEach(function(e){t.call(n,e,a)}):t.call(n,e[a],a)})},n.reduce=function(e,t,n,a){return e?s.keys(e).reduce(function(n,i){return s.isArray(e[i])?e[i].reduce(function(e,n){return t.call(a,e,n,i)},n):t.call(a,n,e[i],i)},n):n}},{"./channel":476,"./fielddef":561,"./log":566,"./util":579}],560:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},{}],561:[function(e,t,n){"use strict";function a(e){return!!e&&!!e.condition&&i(e.condition)}function i(e){return!!e&&(!!e.field||"count"===e.aggregate)}function o(e,t){void 0===t&&(t={});var n=e.field,a=t.prefix,i=t.suffix;if(l(e))n="count_*";else{var o;t.nofn||(e.bin?(o=g.binToString(e.bin),i=t.binSuffix||""):e.aggregate?o=(t.aggregate||e.aggregate)+"":e.timeUnit&&(o=e.timeUnit+"")),o&&(n=o+"_"+n)}return i&&(n=n+"_"+i),a&&(n=a+"_"+n),t.expr&&(n=t.expr+"["+x.stringValue(n)+"]"),n}function r(e){switch(e.type){case"nominal":case"ordinal":return!0;case"quantitative":return!!e.bin;case"temporal":return!1;}throw new Error(y.message.invalidFieldType(e.type))}function s(e){return!r(e)}function l(e){return"count"===e.aggregate}function d(e,t){if(e.timeUnit)return"temporal";if(e.bin)return"quantitative";switch(_.rangeType(t)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative";}}function p(e,t){if(e.aggregate&&!f.isAggregateOp(e.aggregate)){var n=e.aggregate,a=m.__rest(e,["aggregate"]);y.warn(y.message.invalidAggregate(e.aggregate)),e=a}if(e.timeUnit&&(e=m.__assign({},e,{timeUnit:h.normalizeTimeUnit(e.timeUnit)})),e.bin&&(e=m.__assign({},e,{bin:c(e.bin,t)})),e.type){var i=b.getFullName(e.type);e.type!==i&&(e=m.__assign({},e,{type:i})),"quantitative"!==e.type&&f.isCountingAggregateOp(e.aggregate)&&(y.warn(y.message.invalidFieldTypeForCountAggregate(e.type,e.aggregate)),e=m.__assign({},e,{type:"quantitative"}))}else{var o=d(e,t);y.warn(y.message.emptyOrInvalidFieldType(e.type,t,o)),e=m.__assign({},e,{type:o})}var r=u(e,t),s=r.compatible,l=r.warning;return s||y.warn(l),e}function c(e,t){return x.isBoolean(e)?{maxbins:g.autoMaxBins(t)}:e.maxbins||e.step?e:m.__assign({},e,{maxbins:g.autoMaxBins(t)})}function u(e,t){switch(t){case"row":case"column":return s(e)&&!e.timeUnit?{compatible:!1,warning:y.message.facetChannelShouldBeDiscrete(t)}:v;case"x":case"y":case"color":case"text":case"detail":case"tooltip":return v;case"opacity":case"size":case"x2":case"y2":return r(e)&&!e.bin?{compatible:!1,warning:"Channel "+t+" should not be used with discrete field."}:v;case"shape":return"nominal"===e.type?v:{compatible:!1,warning:"Shape channel should be used with nominal data only"};case"order":return"nominal"===e.type?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:v;}throw new Error("channelCompatability not implemented for channel "+t)}Object.defineProperty(n,"__esModule",{value:!0});var m=e("tslib"),f=e("./aggregate"),g=e("./bin"),_=e("./channel"),y=e("./log"),h=e("./timeunit"),b=e("./type"),x=e("./util");n.isRepeatRef=function(e){return e&&!x.isString(e)&&"repeat"in e},n.isConditionalDef=function(e){return!!e&&!!e.condition},n.hasConditionFieldDef=a,n.isFieldDef=i,n.isValueDef=function(e){return e&&"value"in e&&e.value!==void 0},n.isScaleFieldDef=function(e){return!!e&&(!!e.scale||!!e.sort)},n.field=o,n.isDiscrete=r,n.isContinuous=s,n.isCount=l,n.title=function(e,t){if(l(e))return t.countTitle;var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toUpperCase()+"("+e.field+")":e.field},n.defaultType=d,n.getFieldDef=function(e){if(i(e))return e;return a(e)?e.condition:void 0},n.normalize=function(e,t){if(i(e))return p(e,t);return a(e)?m.__assign({},e,{condition:p(e.condition,t)}):e},n.normalizeFieldDef=p,n.normalizeBin=c;var v={compatible:!0};n.channelCompatibility=u,n.isNumberFieldDef=function(e){return"quantitative"===e.type||!!e.bin},n.isTimeFieldDef=function(e){return"temporal"===e.type||!!e.timeUnit}},{"./aggregate":473,"./bin":475,"./channel":476,"./log":566,"./timeunit":574,"./type":578,"./util":579,tslib:462}],562:[function(e,t,n){"use strict";function a(e){return e&&e.selection}function i(e){return e&&!!e.field&&e.equal!==void 0}function o(e){return e&&e.field&&f.isArray(e.range)&&2===e.range.length}function r(e){return e&&!!e.field&&(f.isArray(e.oneOf)||f.isArray(e.in))}function s(e){return r(e)||i(e)||o(e)}function l(e,t){void 0===t&&(t=!0);var n=e.timeUnit?"time("+g.fieldExpr(e.timeUnit,e.field)+")":m.field(e,{expr:"datum"});if(i(e))return n+"==="+d(e.equal,e.timeUnit);if(r(e)){var a=e.oneOf||e["in"];return"indexof(["+a.map(function(t){return d(t,e.timeUnit)}).join(",")+"], "+n+") !== -1"}if(o(e)){var s=e.range[0],l=e.range[1];if(null!==s&&null!==l&&t)return"inrange("+n+", ["+d(s,e.timeUnit)+", "+d(l,e.timeUnit)+"])";var p=[];return null!==s&&p.push(n+" >= "+d(s,e.timeUnit)),null!==l&&p.push(n+" <= "+d(l,e.timeUnit)),0<p.length?p.join(" && "):"true"}throw new Error("Invalid field filter: "+JSON.stringify(e))}function d(e,t){if(u.isDateTime(e)){var n=u.dateTimeExpr(e,!0);return"time("+n+")"}if(g.isLocalSingleTimeUnit(t)){var a={};a[t]=e;var n=u.dateTimeExpr(a,!0);return"time("+n+")"}return g.isUtcSingleTimeUnit(t)?d(e,g.getLocalTimeUnit(t)):JSON.stringify(e)}Object.defineProperty(n,"__esModule",{value:!0});var p=e("tslib"),c=e("./compile/selection/selection"),u=e("./datetime"),m=e("./fielddef"),g=e("./timeunit"),f=e("./util");n.isSelectionFilter=a,n.isEqualFilter=i,n.isRangeFilter=o,n.isOneOfFilter=r,n.isFieldFilter=s,n.expression=function(e,t,n){return f.logicalExpr(t,function(t){return f.isString(t)?t:a(t)?c.predicate(e,t.selection,n):l(t)})},n.fieldFilterExpression=l,n.normalizeFilter=function(e){return s(e)&&e.timeUnit?p.__assign({},e,{timeUnit:g.normalizeTimeUnit(e.timeUnit)}):e}},{"./compile/selection/selection":540,"./datetime":558,"./fielddef":561,"./timeunit":574,"./util":579,tslib:462}],563:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VL_ONLY_GUIDE_CONFIG=["shortTimeLabels"]},{}],564:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.axis=e("./axis"),n.aggregate=e("./aggregate"),n.bin=e("./bin"),n.channel=e("./channel"),n.compositeMark=e("./compositemark");var a=e("./compile/compile");n.compile=a.compile,n.config=e("./config"),n.data=e("./data"),n.datetime=e("./datetime"),n.encoding=e("./encoding"),n.facet=e("./facet"),n.fieldDef=e("./fielddef"),n.legend=e("./legend"),n.mark=e("./mark"),n.scale=e("./scale"),n.sort=e("./sort"),n.spec=e("./spec"),n.stack=e("./stack"),n.timeUnit=e("./timeunit"),n.transform=e("./transform"),n.type=e("./type"),n.util=e("./util"),n.validate=e("./validate"),n.version=e("../package.json").version},{"../package.json":472,"./aggregate":473,"./axis":474,"./bin":475,"./channel":476,"./compile/compile":485,"./compositemark":555,"./config":556,"./data":557,"./datetime":558,"./encoding":559,"./facet":560,"./fielddef":561,"./legend":565,"./mark":568,"./scale":569,"./sort":571,"./spec":572,"./stack":573,"./timeunit":574,"./transform":577,"./type":578,"./util":579,"./validate":580}],565:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultLegendConfig={},n.LEGEND_PROPERTIES=["entryPadding","format","offset","orient","tickCount","title","type","values","zindex"],n.VG_LEGEND_PROPERTIES=[].concat(["fill","stroke","shape","size","opacity","encode"],n.LEGEND_PROPERTIES)},{}],566:[function(e,t,n){"use strict";function a(){return r=o,r}Object.defineProperty(n,"__esModule",{value:!0});var i=e("vega-util"),o=i.logger(i.Warn),r=o,s=function(){function e(){this.warns=[],this.infos=[],this.debugs=[]}return e.prototype.level=function(){return this},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.warns).push.apply(n,e),this;var n},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.infos).push.apply(n,e),this;var n},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.debugs).push.apply(n,e),this;var n},e}();n.LocalLogger=s,n.runLocalLogger=function(e){var t=r=new s;e(t),a()},n.wrap=function(e){return function(){var t=r=new s;e(t),a()}},n.set=function(e){return r=e,r},n.reset=a,n.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.warn.apply(r,arguments)},n.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.info.apply(r,arguments)},n.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.debug.apply(r,arguments)};var l;(function(e){e.INVALID_SPEC="Invalid spec",e.FIT_NON_SINGLE="Autosize \"fit\" only works for single views and layered views.",e.CANNOT_FIX_RANGE_STEP_WITH_FIT="Cannot use a fixed value of \"rangeStep\" when \"autosize\" is \"fit\".",e.cannotProjectOnChannelWithoutField=function(e){return"Cannot project a selection on encoding channel \""+e+"\", which has no field."},e.nearestNotSupportForContinuous=function(e){return"The \"nearest\" transform is not supported for "+e+" marks."},e.selectionNotFound=function(e){return"Cannot find a selection named \""+e+"\""},e.noSuchRepeatedValue=function(e){return"Unknown repeated value \""+e+"\"."},e.cannotSetTitleAnchor=function(e){return"Cannot set title \"anchor\" for a "+e+" spec"},e.unrecognizedParse=function(e){return"Unrecognized parse \""+e+"\"."},e.differentParse=function(e,t,n){return"An ancestor parsed field \""+e+"\" as "+n+" but a child wants to parse the field as "+t+"."},e.invalidTransformIgnored=function(e){return"Ignoring an invalid transform: "+JSON.stringify(e)+"."},e.NO_FIELDS_NEEDS_AS="If \"from.fields\" is not specified, \"as\" has to be a string that specifies the key to be used for the the data from the secondary source.",e.invalidFieldType=function(e){return"Invalid field type \""+e+"\""},e.invalidFieldTypeForCountAggregate=function(e,t){return"Invalid field type \""+e+"\" for aggregate: \""+t+"\", using \"quantitative\" instead."},e.invalidAggregate=function(e){return"Invalid aggregation operator \""+e+"\""},e.emptyOrInvalidFieldType=function(e,t,n){return"Invalid field type \""+e+"\" for channel \""+t+"\", using \""+n+"\" instead."},e.emptyFieldDef=function(e,t){return"Dropping "+JSON.stringify(e)+" from channel \""+t+"\" since it does not contain data field or value."},e.incompatibleChannel=function(e,t,n){return e+" dropped as it is incompatible with \""+t+"\""+(n?" when "+n:"")+"."},e.facetChannelShouldBeDiscrete=function(e){return e+" encoding should be discrete (ordinal / nominal / binned)."},e.discreteChannelCannotEncode=function(e,t){return"Using discrete channel \""+e+"\" to encode \""+t+"\" field can be misleading as it does not encode "+("ordinal"===t?"order":"magnitude")+"."},e.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",e.unclearOrientContinuous=function(e){return"Cannot clearly determine orientation for \""+e+"\" since both x and y channel encode continous fields. In this case, we use vertical by default"},e.unclearOrientDiscreteOrEmpty=function(e){return"Cannot clearly determine orientation for \""+e+"\" since both x and y channel encode discrete or empty fields."},e.orientOverridden=function(e,t){return"Specified orient \""+e+"\" overridden with \""+t+"\""},e.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",e.cannotUseScalePropertyWithNonColor=function(e){return"Cannot use the scale property \""+e+"\" with non-color channel."},e.unaggregateDomainHasNoEffectForRawField=function(e){return"Using unaggregated domain with raw field has no effect ("+JSON.stringify(e)+")."},e.unaggregateDomainWithNonSharedDomainOp=function(e){return"Unaggregated domain not applicable for \""+e+"\" since it produces values outside the origin domain of the source data."},e.unaggregatedDomainWithLogScale=function(e){return"Unaggregated domain is currently unsupported for log scale ("+JSON.stringify(e)+")."},e.CANNOT_USE_RANGE_WITH_POSITION="Cannot use a custom \"range\" with x or y channel.  Please customize width, height, padding, or rangeStep instead.",e.cannotUseSizeFieldWithBandSize=function(e){return"Using size field when "+e+"-channel has a band scale is not supported."},e.cannotApplySizeToNonOrientedMark=function(e){return"Cannot apply size to non-oriented mark \""+e+"\"."},e.rangeStepDropped=function(e){return"rangeStep for \""+e+"\" is dropped as top-level "+("x"===e?"width":"height")+" is provided."},e.scaleTypeNotWorkWithChannel=function(e,t,n){return"Channel \""+e+"\" does not work with \""+t+"\" scale. We are using \""+n+"\" scale instead."},e.scaleTypeNotWorkWithFieldDef=function(e,t){return"FieldDef does not work with \""+e+"\" scale. We are using \""+t+"\" scale instead."},e.scalePropertyNotWorkWithScaleType=function(e,t,n){return n+"-scale's \""+t+"\" is dropped as it does not work with "+e+" scale."},e.scaleTypeNotWorkWithMark=function(e,t){return"Scale type \""+t+"\" does not work with mark \""+e+"\"."},e.mergeConflictingProperty=function(e,t,n,a){return"Conflicting "+t+" property \""+e+"\" (\""+n+"\" and \""+a+"\").  Using \""+n+"\"."},e.independentScaleMeansIndependentGuide=function(e){return"Setting the scale to be independent for \""+e+"\" means we also have to set the guide (axis or legend) to be independent."},e.conflictedDomain=function(e){return"Cannot set "+e+"-scale's \"domain\" as it is binned. Please use \"bin\"'s \"extent\" instead."},e.domainSortDropped=function(e){return"Dropping sort property \""+JSON.stringify(e)+"\" as unioned domains only support boolean or op 'count'."},e.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",e.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",e.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",e.cannotStackRangedMark=function(e){return"Cannot stack \""+e+"\" if there is already \""+e+"2\""},e.cannotStackNonLinearScale=function(e){return"Cannot stack non-linear scale ("+e+")"},e.cannotStackNonSummativeAggregate=function(e){return"Cannot stack when the aggregate function is non-summative (\""+e+"\")"},e.invalidTimeUnit=function(e,t){return"Invalid "+e+": \""+t+"\""},e.dayReplacedWithDate=function(e){return"Time unit \""+e+"\" is not supported. We are replacing it with "+e.replace("day","date")+"."},e.droppedDay=function(e){return"Dropping day from datetime "+JSON.stringify(e)+" as day cannot be combined with other units."}})(l=n.message||(n.message={}))},{"vega-util":588}],567:[function(e,t,n){"use strict";function a(e){return!!e.or}function i(e){return!!e.and}function o(e){return!!e.not}function r(e,t){if(o(e))r(e.not,t);else if(i(e))for(var n=0,s=e.and,l;n<s.length;n++)l=s[n],r(l,t);else if(a(e))for(var d=0,p=e.or,l;d<p.length;d++)l=p[d],r(l,t);else t(e)}function s(e,t){return o(e)?{not:s(e.not,t)}:i(e)?{and:e.and.map(function(e){return s(e,t)})}:a(e)?{or:e.or.map(function(e){return s(e,t)})}:t(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.isLogicalOr=a,n.isLogicalAnd=i,n.isLogicalNot=o,n.forEachLeave=r,n.normalizeLogicalOperand=s},{}],568:[function(e,t,n){"use strict";function a(e){return e.type}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./util"),o;(function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.POINT="point",e.RECT="rect",e.RULE="rule",e.TEXT="text",e.TICK="tick",e.CIRCLE="circle",e.SQUARE="square"})(o=n.Mark||(n.Mark={})),n.AREA=o.AREA,n.BAR=o.BAR,n.LINE=o.LINE,n.POINT=o.POINT,n.TEXT=o.TEXT,n.TICK=o.TICK,n.RECT=o.RECT,n.RULE=o.RULE,n.CIRCLE=o.CIRCLE,n.SQUARE=o.SQUARE;var r={area:1,bar:1,line:1,point:1,text:1,tick:1,rect:1,rule:1,circle:1,square:1};n.isMark=function(e){return!!r[e]},n.PRIMITIVE_MARKS=i.flagKeys(r),n.isMarkDef=a;var s=i.toSet(n.PRIMITIVE_MARKS);n.isPrimitiveMark=function(e){var t=a(e)?e.type:e;return t in s},n.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity"],n.FILL_CONFIG=["fill","fillOpacity"],n.FILL_STROKE_CONFIG=[].concat(n.STROKE_CONFIG,n.FILL_CONFIG),n.VL_ONLY_MARK_CONFIG_PROPERTIES=["filled","color"],n.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={bar:["binSpacing","continuousBandSize","discreteBandSize"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},n.defaultMarkConfig={color:"#4c78a8"},n.defaultBarConfig={binSpacing:1,continuousBandSize:5},n.defaultTickConfig={thickness:1}},{"./util":579}],569:[function(e,t,n){"use strict";function a(e){return e in m}function i(e){return e in u}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),r=e("./channel"),s=e("./log"),l=e("./util"),d;(function(e){e.LINEAR="linear",e.BIN_LINEAR="bin-linear",e.LOG="log",e.POW="pow",e.SQRT="sqrt",e.TIME="time",e.UTC="utc",e.SEQUENTIAL="sequential",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.ORDINAL="ordinal",e.BIN_ORDINAL="bin-ordinal",e.POINT="point",e.BAND="band"})(d=n.ScaleType||(n.ScaleType={}));var p={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position"};n.SCALE_TYPES=l.keys(p),n.scaleCompatible=function(e,t){var n=p[e],a=p[t];return n===a||"ordinal-position"===n&&"time"===a||"ordinal-position"===a&&"time"===n};var c={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0};n.scaleTypePrecedence=function(e){return c[e]},n.CONTINUOUS_TO_CONTINUOUS_SCALES=["linear","bin-linear","log","pow","sqrt","time","utc"];var u=l.toSet(n.CONTINUOUS_TO_CONTINUOUS_SCALES);n.CONTINUOUS_DOMAIN_SCALES=n.CONTINUOUS_TO_CONTINUOUS_SCALES.concat(["sequential"]);var m=l.toSet(n.CONTINUOUS_DOMAIN_SCALES);n.DISCRETE_DOMAIN_SCALES=["ordinal","bin-ordinal","point","band"];var f=l.toSet(n.DISCRETE_DOMAIN_SCALES),g=l.toSet(["bin-linear","bin-ordinal"]);n.TIME_SCALE_TYPES=["time","utc"],n.hasDiscreteDomain=function(e){return e in f},n.isBinScale=function(e){return e in g},n.hasContinuousDomain=a,n.isContinuousToContinuous=i,n.defaultScaleConfig={textXRangeStep:90,rangeStep:21,pointPadding:0.5,bandPaddingInner:0.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:0.3,maxOpacity:0.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4},n.isExtendedScheme=function(e){return e&&!!e.name},n.isSelectionDomain=function(e){return e&&e.selection};var _={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1};n.SCALE_PROPERTIES=l.flagKeys(_);var y=_.type,h=_.domain,b=_.range,x=_.rangeStep,v=_.scheme,S=o.__rest(_,["type","domain","range","rangeStep","scheme"]);n.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=l.flagKeys(S),n.scaleTypeSupportProperty=function(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return l.contains(["sequential","ordinal","bin-ordinal","quantile","quantize"],e);case"interpolate":return l.contains(["linear","bin-linear","pow","log","sqrt","utc","time"],e);case"round":return i(e)||"band"===e||"point"===e;case"rangeStep":case"padding":case"paddingOuter":return l.contains(["point","band"],e);case"paddingInner":return"band"===e;case"clamp":return i(e)||"sequential"===e;case"nice":return i(e)||"sequential"===e||"quantize"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"zero":return a(e)&&!l.contains(["log","time","utc","bin-linear","threshold","quantile"],e);}throw new Error("Invalid scale property "+t+".")},n.channelScalePropertyIncompatability=function(e,t){switch(t){case"range":return"x"===e||"y"===e?s.message.CANNOT_USE_RANGE_WITH_POSITION:void 0;case"interpolate":case"scheme":return"color"===e?void 0:s.message.cannotUseScalePropertyWithNonColor(e);case"type":case"domain":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return;}throw new Error("Invalid scale property \""+t+"\".")},n.channelSupportScaleType=function(e,t){return e===r.Channel.X||e===r.Channel.Y||e===r.Channel.SIZE||e===r.Channel.OPACITY?i(t)||l.contains(["band","point"],t):e===r.Channel.COLOR?"band"!==t:!(e!==r.Channel.SHAPE)&&"ordinal"===t}},{"./channel":476,"./log":566,"./util":579,tslib:462}],570:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SELECTION_ID="_vgsid_",n.defaultConfig={single:{on:"click",fields:[n.SELECTION_ID],resolve:"global"},multi:{on:"click",fields:[n.SELECTION_ID],toggle:"event.shiftKey",resolve:"global"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:0.125,stroke:"white"},resolve:"global"}}},{}],571:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isSortField=function(e){return!!e&&("count"===e.op||!!e.field)&&!!e.op}},{}],572:[function(e,t,n){"use strict";function a(e){return e.facet!==void 0}function i(e){return!!e.mark}function o(e){return e.layer!==void 0}function r(e){return e.repeat!==void 0}function s(e){return l(e)||d(e)}function l(e){return e.vconcat!==void 0}function d(e){return e.hconcat!==void 0}function p(e,t){if(a(e))return c(e,t);if(o(e))return u(e,t);if(r(e))return m(e,t);if(l(e))return f(e,t);if(d(e))return g(e,t);if(i(e)){var n=N.channelHasField(e.encoding,k.ROW),s=N.channelHasField(e.encoding,k.COLUMN);return n||s?_(e,t):h(e,t)}throw new Error(C.message.INVALID_SPEC)}function c(e,t){var n=e.spec,a=T.__rest(e,["spec"]);return T.__assign({},a,{spec:p(n,t)})}function u(e,t){var n=e.layer,a=T.__rest(e,["layer"]);return T.__assign({},a,{layer:n.map(function(e){return o(e)?u(e,t):h(e,t)})})}function m(e,t){var n=e.spec,a=T.__rest(e,["spec"]);return T.__assign({},a,{spec:p(n,t)})}function f(e,t){var n=e.vconcat,a=T.__rest(e,["vconcat"]);return T.__assign({},a,{vconcat:n.map(function(e){return p(e,t)})})}function g(e,t){var n=e.hconcat,a=T.__rest(e,["hconcat"]);return T.__assign({},a,{hconcat:n.map(function(e){return p(e,t)})})}function _(e,t){var n=e.encoding,a=n.row,i=n.column,o=T.__rest(n,["row","column"]),r=e.mark,s=e.width,l=e.height,d=e.selection,p=e.encoding,c=T.__rest(e,["mark","width","height","selection","encoding"]);return T.__assign({},c,{facet:T.__assign({},a?{row:a}:{},i?{column:i}:{}),spec:h(T.__assign({mark:r},s?{width:s}:{},l?{height:l}:{},{encoding:o},d?{selection:d}:{}),t)})}function y(e){return w.isPrimitiveMark(e.mark)}function h(e,t){if(y(e)){if(N.isRanged(e.encoding))return b(e);var n=t&&t.overlay,a=n&&e.mark===w.AREA&&D.contains(["linepoint","line"],n.area),i=n&&(n.line&&e.mark===w.LINE||"linepoint"===n.area&&e.mark===w.AREA);return i||a?x(e,i,a,t):e}return E.normalize(e,t)}function b(e){var t=N.channelHasField(e.encoding,k.X),n=N.channelHasField(e.encoding,k.Y),a=N.channelHasField(e.encoding,k.X2),i=N.channelHasField(e.encoding,k.Y2);if(a&&!t||i&&!n){var o=D.duplicate(e);return a&&!t&&(o.encoding.x=o.encoding.x2,delete o.encoding.x2),i&&!n&&(o.encoding.y=o.encoding.y2,delete o.encoding.y2),o}return e}function x(e,t,n,a){var i=e.mark,o=e.selection,r=e.encoding,s=T.__rest(e,["mark","selection","encoding"]),l=[{mark:i,encoding:r}],d=O.stack(i,r,a?a.stack:void 0),p=r;if(d){var c=d.fieldChannel,u=d.offset;p=T.__assign({},r,(m={},m[c]=T.__assign({},r[c],u?{stack:u}:{}),m))}return n&&l.push(T.__assign({mark:{type:"line",style:"lineOverlay"}},o?{selection:o}:{},{encoding:p})),t&&l.push(T.__assign({mark:{type:"point",filled:!0,style:"pointOverlay"}},o?{selection:o}:{},{encoding:p})),T.__assign({},s,{layer:l});var m}function v(e,t){return t.forEach(function(t){var n=["field","type","value","timeUnit","bin","aggregate"].reduce(function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e},{}),a=D.hash(n);e[a]=e[a]||t}),e}function S(e,t){if(void 0===t&&(t={}),o(e))e.layer.forEach(function(e){i(e)?v(t,A.fieldDefs(e.encoding)):S(e,t)});else if(a(e))v(t,A.fieldDefs(e.facet)),S(e.spec,t);else if(r(e))S(e.spec,t);else if(s(e)){var n=l(e)?e.vconcat:e.hconcat;n.forEach(function(e){return S(e,t)})}else v(t,A.fieldDefs(e.encoding));return t}Object.defineProperty(n,"__esModule",{value:!0});var T=e("tslib"),k=e("./channel"),E=e("./compositemark"),N=e("./encoding"),A=e("./encoding"),C=e("./log"),w=e("./mark"),O=e("./stack"),D=e("./util");n.isFacetSpec=a,n.isUnitSpec=i,n.isLayerSpec=o,n.isRepeatSpec=r,n.isConcatSpec=s,n.isVConcatSpec=l,n.isHConcatSpec=d,n.normalize=p,n.fieldDefs=function(e){return D.vals(S(e))},n.isStacked=function(e,t){return t=t||e.config,!!w.isPrimitiveMark(e.mark)&&null!==O.stack(e.mark,e.encoding,t?t.stack:void 0)}},{"./channel":476,"./compositemark":555,"./encoding":559,"./log":566,"./mark":568,"./stack":573,"./util":579,tslib:462}],573:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./aggregate"),i=e("./channel"),o=e("./encoding"),r=e("./fielddef"),s=e("./log"),l=e("./mark"),d=e("./scale"),p=e("./util");n.STACKABLE_MARKS=[l.BAR,l.AREA,l.RULE,l.POINT,l.CIRCLE,l.SQUARE,l.LINE,l.TEXT,l.TICK],n.STACK_BY_DEFAULT_MARKS=[l.BAR,l.AREA],n.stack=function(e,t,c){var u=l.isMarkDef(e)?e.type:e;if(!p.contains(n.STACKABLE_MARKS,u))return null;if(!o.isAggregate(t))return null;var m=i.NONPOSITION_CHANNELS.reduce(function(e,n){if(o.channelHasField(t,n)){var a=t[n];(p.isArray(a)?a:[a]).forEach(function(t){var a=r.getFieldDef(t);a.aggregate||e.push({channel:n,fieldDef:a})})}return e},[]);if(0===m.length)return null;var f=r.isFieldDef(t.x),g=r.isFieldDef(t.y),_=r.isFieldDef(t.x)&&!!t.x.aggregate,y=r.isFieldDef(t.y)&&!!t.y.aggregate;if(_!==y){var h=_?i.X:i.Y,b=t[h],x=b.aggregate,v=b.scale,S=null;return S=void 0===b.stack?p.contains(n.STACK_BY_DEFAULT_MARKS,u)?void 0===c?"zero":c:c:b.stack,S&&"none"!==S?v&&v.type&&v.type!==d.ScaleType.LINEAR?(s.warn(s.message.cannotStackNonLinearScale(v.type)),null):o.channelHasField(t,h===i.X?i.X2:i.Y2)?(s.warn(s.message.cannotStackRangedMark(h)),null):p.contains(a.SUM_OPS,x)?{groupbyChannel:_?g?i.Y:null:f?i.X:null,fieldChannel:h,impute:p.contains(["area","line"],u),stackBy:m,offset:S}:(s.warn(s.message.cannotStackNonSummativeAggregate(x)),null):null}return null}},{"./aggregate":473,"./channel":476,"./encoding":559,"./fielddef":561,"./log":566,"./mark":568,"./scale":569,"./util":579}],574:[function(e,t,n){"use strict";function a(e){return!!f[e]}function i(e,t){var n=_[e],a=t?"setUTC"+n.substr(3):n,i="get"+(t?"UTC":"")+n.substr(3);return{setDateMethod:a,getDateMethod:i}}function o(e,t){var n=e.indexOf(t);return-1<n&&(t!==d.SECONDS||0===n||"i"!==e.charAt(n-1))}Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),s=e("./datetime"),l=e("./log"),p=e("./util"),d;(function(e){e.YEAR="year",e.MONTH="month",e.DAY="day",e.DATE="date",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.MILLISECONDS="milliseconds",e.YEARMONTH="yearmonth",e.YEARMONTHDATE="yearmonthdate",e.YEARMONTHDATEHOURS="yearmonthdatehours",e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",e.MONTHDATE="monthdate",e.HOURSMINUTES="hoursminutes",e.HOURSMINUTESSECONDS="hoursminutesseconds",e.MINUTESSECONDS="minutesseconds",e.SECONDSMILLISECONDS="secondsmilliseconds",e.QUARTER="quarter",e.YEARQUARTER="yearquarter",e.QUARTERMONTH="quartermonth",e.YEARQUARTERMONTH="yearquartermonth",e.UTCYEAR="utcyear",e.UTCMONTH="utcmonth",e.UTCDAY="utcday",e.UTCDATE="utcdate",e.UTCHOURS="utchours",e.UTCMINUTES="utcminutes",e.UTCSECONDS="utcseconds",e.UTCMILLISECONDS="utcmilliseconds",e.UTCYEARMONTH="utcyearmonth",e.UTCYEARMONTHDATE="utcyearmonthdate",e.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",e.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",e.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",e.UTCMONTHDATE="utcmonthdate",e.UTCHOURSMINUTES="utchoursminutes",e.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",e.UTCMINUTESSECONDS="utcminutesseconds",e.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",e.UTCQUARTER="utcquarter",e.UTCYEARQUARTER="utcyearquarter",e.UTCQUARTERMONTH="utcquartermonth",e.UTCYEARQUARTERMONTH="utcyearquartermonth"})(d=n.TimeUnit||(n.TimeUnit={}));var c={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};n.TIMEUNIT_PARTS=p.flagKeys(c),n.isLocalSingleTimeUnit=function(e){return!!c[e]};var u={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};n.isUtcSingleTimeUnit=function(e){return!!u[e]};var m={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},f=r.__assign({},u,m);n.isUTCTimeUnit=a,n.getLocalTimeUnit=function(e){return e.substr(3)};var g=r.__assign({},c,u,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},m);n.TIMEUNITS=p.flagKeys(g),n.isTimeUnit=function(e){return!!g[e]};var _={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null};n.convert=function(e,t){var r=a(e),s=r?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0);return n.TIMEUNIT_PARTS.forEach(function(n){if(o(e,n))switch(n){case d.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case d.QUARTER:{var a=i("month",r),l=a.getDateMethod,p=a.setDateMethod;s[p](3*E(t[l]()/3));break}default:var c=i(n,r),u=c.getDateMethod,m=c.setDateMethod;s[m](t[u]());}}),s},n.containsTimeUnit=o,n.fieldExpr=function(e,t){function i(e){return e===d.QUARTER?"("+l+"quarter("+r+")-1)":""+l+e+"("+r+")"}var r="datum["+p.stringValue(t)+"]",l=a(e)?"utc":"",c=n.TIMEUNIT_PARTS.reduce(function(t,n){return o(e,n)&&(t[n]=i(n)),t},{});return s.dateTimeExpr(c)},n.smallestUnit=function(e){return e?o(e,d.SECONDS)?"second":o(e,d.MINUTES)?"minute":o(e,d.HOURS)?"hour":o(e,d.DAY)||o(e,d.DATE)?"day":o(e,d.MONTH)?"month":o(e,d.YEAR)?"year":void 0:void 0},n.formatExpression=function(e,t,n,a){if(e){var i=[],r="",s=o(e,d.YEAR);o(e,d.QUARTER)&&(r="'Q' + quarter("+t+")"),o(e,d.MONTH)&&i.push(!1===n?"%B":"%b"),o(e,d.DAY)?i.push(n?"%a":"%A"):o(e,d.DATE)&&i.push("%d"+(s?",":"")),s&&i.push(n?"%y":"%Y");var l=[];o(e,d.HOURS)&&l.push("%H"),o(e,d.MINUTES)&&l.push("%M"),o(e,d.SECONDS)&&l.push("%S"),o(e,d.MILLISECONDS)&&l.push("%L");var p=[];return 0<i.length&&p.push(i.join(" ")),0<l.length&&p.push(l.join(":")),0<p.length&&(r&&(r+=" + ' ' + "),r+=a?"utcFormat("+t+", '"+p.join(" ")+"')":"timeFormat("+t+", '"+p.join(" ")+"')"),r||void 0}},n.normalizeTimeUnit=function(e){return"day"!==e&&0<=e.indexOf("day")?(l.warn(l.message.dayReplacedWithDate(e)),e.replace("day","date")):e}},{"./datetime":558,"./log":566,"./util":579,tslib:462}],575:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib");n.extractTitleConfig=function(e){var t=e.anchor,n=e.offset,i=e.orient,o=e.color,r=a.__rest(e,["anchor","offset","orient","color"]),s=a.__assign({},r,o?{fill:o}:{}),l=a.__assign({},t?{anchor:t}:{},n?{offset:n}:{},i?{orient:i}:{});return{mark:s,nonMark:l}}},{tslib:462}],576:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("tslib"),i=e("util"),o=e("./log");n.normalizeAutoSize=function(e,t){if(!e)return{type:"pad"};var n=a.__assign({type:"pad"},i.isString(e)?{type:e}:e);return"fit"!==n.type||t||(o.warn(o.message.FIT_NON_SINGLE),n.type="pad"),n};var r=["background","padding"];n.extractTopLevelProperties=function(e){return r.reduce(function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t},{})}},{"./log":566,tslib:462,util:465}],577:[function(e,t,n){"use strict";function a(e){return e.filter!==void 0}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./filter"),o=e("./logical");n.isFilter=a,n.isLookup=function(e){return e.lookup!==void 0},n.isCalculate=function(e){return e.calculate!==void 0},n.isBin=function(e){return!!e.bin},n.isTimeUnit=function(e){return e.timeUnit!==void 0},n.isSummarize=function(e){return e.summarize!==void 0},n.normalizeTransform=function(e){return e.map(function(e){return a(e)?{filter:o.normalizeLogicalOperand(e.filter,i.normalizeFilter)}:e})}},{"./filter":562,"./logical":567}],578:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a;(function(e){e.QUANTITATIVE="quantitative",e.ORDINAL="ordinal",e.TEMPORAL="temporal",e.NOMINAL="nominal"})(a=n.Type||(n.Type={}));var i={quantitative:1,ordinal:1,temporal:1,nominal:1};n.isType=function(e){return!!i[e]},n.QUANTITATIVE=a.QUANTITATIVE,n.ORDINAL=a.ORDINAL,n.TEMPORAL=a.TEMPORAL,n.NOMINAL=a.NOMINAL,n.getFullName=function(e){if(e)switch(e=e.toLowerCase(),e){case"q":case n.QUANTITATIVE:return"quantitative";case"t":case n.TEMPORAL:return"temporal";case"o":case n.ORDINAL:return"ordinal";case"n":case n.NOMINAL:return"nominal";}}},{}],579:[function(e,t,n){"use strict";function a(e,t){return-1<e.indexOf(t)}function i(e,t){return e.filter(function(e){return!a(t,e)})}function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var a=0,i=t,o;a<i.length;a++)o=i[a],e=r(e,o);return e}function r(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||c.isArray(t[n])||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=o(c.isArray(t[n].constructor)?[]:{},t[n]):o(e[n],t[n]));return e}function s(e){return JSON.parse(JSON.stringify(e))}function l(e){return!0===e||!1===e}function d(e,t){return u.isLogicalNot(e)?"!("+d(e.not,t)+")":u.isLogicalAnd(e)?"("+e.and.map(function(e){return d(e,t)}).join(") && (")+")":u.isLogicalOr(e)?"("+e.or.map(function(e){return d(e,t)}).join(") || (")+")":t(e)}Object.defineProperty(n,"__esModule",{value:!0});var p=e("json-stable-stringify"),c=e("vega-util"),u=e("./logical"),m=e("vega-util");n.isArray=m.isArray,n.isObject=m.isObject,n.isNumber=m.isNumber,n.isString=m.isString,n.truncate=m.truncate,n.toSet=m.toSet,n.stringValue=m.stringValue,n.pick=function(e,t){var n={};return t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n},n.omit=function(e,t){var n=s(e);return t.forEach(function(e){delete n[e]}),n},n.hash=function(e){if(c.isString(e)||c.isNumber(e)||l(e))return e+"";var t=p(e);if(100>t.length)return t;for(var n=0,a=0,i;a<t.length;a++)i=t.charCodeAt(a),n=(n<<5)-n+i,n&=n;return n},n.contains=a,n.without=i,n.union=function(e,t){return e.concat(i(t,e))},n.some=function(e,t){for(var n=0,a=0;a<e.length;a++)if(t(e[a],a,n++))return!0;return!1},n.every=function(e,t){for(var n=0,a=0;a<e.length;a++)if(!t(e[a],a,n++))return!1;return!0},n.flatten=function(e){return[].concat.apply([],e)},n.mergeDeep=o,n.unique=function(e,t){for(var n=[],a={},i=0,o=e,r,s;i<o.length;i++)(s=o[i],r=t(s),!(r in a))&&(a[r]=1,n.push(s));return n},n.differ=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1},n.hasIntersection=function(e,t){for(var n in e)if(n in t)return!0;return!1},n.isNumeric=function(e){return!isNaN(e)},n.differArray=function(e,t){if(e.length!==t.length)return!0;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(t[n]!==e[n])return!0;return!1},n.keys=Object.keys,n.vals=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},n.flagKeys=function(e){return n.keys(e)},n.duplicate=s,n.isBoolean=l,n.varName=function(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t},n.logicalExpr=d,n.deleteNestedProperty=function(e,t){for(var a=!0;0<t.length&&a;){for(var r=e,o=0;o<t.length-1;o++)r=r[t[o]];delete r[t.pop()],0!==n.keys(r).length&&(a=!1)}}},{"./logical":567,"json-stable-stringify":141,"vega-util":588}],580:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./mark"),o=e("./mark"),i=e("./util");n.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]},n.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:i.toSet(["row","column","x","y","size","color","detail"]),line:i.toSet(["row","column","x","y","color","detail"]),area:i.toSet(["row","column","x","y","color","detail"]),tick:i.toSet(["row","column","x","y","color","detail"]),circle:i.toSet(["row","column","x","y","color","size","detail"]),square:i.toSet(["row","column","x","y","color","size","detail"]),point:i.toSet(["row","column","x","y","color","size","detail","shape"]),text:i.toSet(["row","column","size","color","text"])},n.getEncodingMappingError=function(e,t,r){void 0===t&&(t=n.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===r&&(r=n.DEFAULT_SUPPORTED_CHANNEL_TYPE);var s=a.isMarkDef(e.mark)?e.mark.type:e.mark,l=e.encoding,d=t[s],p=r[s];for(var c in d)if(!(d[c]in l))return"Missing encoding channel \""+d[c]+"\" for mark \""+s+"\"";for(var i in l)if(!p[i])return"Encoding channel \""+i+"\" is not supported by mark type \""+s+"\"";return s!==o.BAR||l.x||l.y?null:"Missing both x and y for bar"}},{"./mark":568,"./util":579}],581:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./util");n.isVgSignalRef=function(e){return!!e.signal},n.isVgRangeStep=function(e){return!!e.step},n.isDataRefUnionedDomain=function(e){return!a.isArray(e)&&"fields"in e&&!("data"in e)},n.isFieldRefUnionDomain=function(e){return!a.isArray(e)&&"fields"in e&&"data"in e},n.isDataRefDomain=function(e){return!a.isArray(e)&&"field"in e&&"data"in e},n.isSignalRefDomain=function(e){return!a.isArray(e)&&"signal"in e}},{"./util":579}],582:[function(e,t,n){"use strict";function a(e){return 0==e%1?o.format(",")(e):o.format(",.2f")(e)}function i(e){var t=s.timeFormat(".%L"),n=s.timeFormat(":%S"),a=s.timeFormat("%I:%M"),i=s.timeFormat("%I %p"),o=s.timeFormat("%a %d"),l=s.timeFormat("%b %d"),d=s.timeFormat("%B"),p=s.timeFormat("%Y");return(r.timeSecond(e)<e?t:r.timeMinute(e)<e?n:r.timeHour(e)<e?a:r.timeDay(e)<e?i:r.timeMonth(e)<e?r.timeWeek(e)<e?o:l:r.timeYear(e)<e?d:p)(e)}Object.defineProperty(n,"__esModule",{value:!0});var o=e("d3-format"),r=e("d3-time"),s=e("d3-time-format");n.customFormat=function(e,t,n){if(void 0!==e&&null!==e&&t)switch(t){case"time":return n?s.timeFormat(n)(e):i(e);case"number":return n?o.format(n)(e):a(e);case"string":default:return e;}},n.autoFormat=function(e){return"number"==typeof e?a(e):e instanceof Date?i(e):e},n.autoNumberFormat=a,n.autoTimeFormat=i},{"d3-format":134,"d3-time":137,"d3-time-format":136}],583:[function(e,t,n){"use strict";function a(e,t){e.addEventListener("mouseover.tooltipInit",function(e,n){l(n)&&(i(),_=window.setTimeout(function(){o(e,n,t)},t.delay||c.DELAY))}),e.addEventListener("mousemove.tooltipUpdate",function(e,n){l(n)&&g&&r(e,n,t)}),e.addEventListener("mouseout.tooltipRemove",function(e,n){l(n)&&(i(),g&&s(e,n,t))})}function i(){window.clearTimeout(_),_=void 0}function o(e,t,n){var a=f.getTooltipPlaceholder(),i=u.getTooltipData(t,n);i&&0!==i.length&&(f.bindData(a,i),f.updatePosition(e,n),f.updateColorTheme(n),p.select("#vis-tooltip").style("visibility","visible"),g=!0,n.onAppear&&n.onAppear(e,t))}function r(e,t,n){l(t)&&(f.updatePosition(e,n),n.onMove&&n.onMove(e,t))}function s(e,t,n){l(t)&&(p.select("#vis-tooltip").style("visibility","hidden"),g=!1,f.clearData(),f.clearColorTheme(),f.clearPosition(),n.onDisappear&&n.onDisappear(e,t))}function l(e){return e&&e.datum&&!e.datum._facetID}function d(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(n,"__esModule",{value:!0});var p=e("d3-selection"),c=e("./options"),u=e("./parseOption"),m=e("./supplementField"),f=e("./tooltipDisplay"),g=!1,_;n.vega=function(e,t){return void 0===t&&(t={showAllFields:!0}),a(e,d(t)),{destroy:function(){e.removeEventListener("mouseover.tooltipInit"),e.removeEventListener("mousemove.tooltipUpdate"),e.removeEventListener("mouseout.tooltipRemove"),i()}}},n.vegaLite=function(e,t,n){return void 0===n&&(n={showAllFields:!0}),n=m.supplementOptions(d(n),t),a(e,n),{destroy:function(){e.removeEventListener("mouseover.tooltipInit"),e.removeEventListener("mousemove.tooltipUpdate"),e.removeEventListener("mouseout.tooltipRemove"),i()}}}},{"./options":584,"./parseOption":585,"./supplementField":586,"./tooltipDisplay":587,"d3-selection":135}],584:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DELAY=100},{}],585:[function(e,t,n){"use strict";function a(e,t){var n=[];return t.fields.forEach(function(t){var a=t.title?t.title:t.field,o=i(e,t.field);if(void 0!==o){var r=p.customFormat(o,t.formatType,t.format)||p.autoFormat(o);n.push({title:a,value:r})}}),n}function i(e,t){var n=t.split("."),a=n[0],i;return n.shift(),e[a]&&(i=e[a],n.forEach(function(e){i=i,i[e]&&(i=i[e])})),void 0===i?void console.warn("[Tooltip] Cannot find field "+t+" in data."):i}function o(e,t){var n=[],a={};if(t&&t.fields)for(var i=0,o=t.fields,r;i<o.length;i++)r=o[i],a[r.field]=r;for(var s in e)if(e.hasOwnProperty(s)){var l=e[s],d=void 0;d=a[s]&&a[s].title?a[s].title:s;var c=void 0,u=void 0;a[s]&&(c=a[s].formatType,u=a[s].format);var m=p.customFormat(l,c,u)||p.autoFormat(l);n.push({title:d,value:m})}return n}function r(e,t){t.forEach(function(t){delete e[t]})}function s(e,t){t&&t.forEach(function(t){t.removeOriginalTemporalField&&r(e,[t.removeOriginalTemporalField])})}function l(e,t){if(t)return t.forEach(function(t){if(!0===t.bin){var n=t.field,a=n.concat("_start"),i=n.concat("_mid"),o=n.concat("_end"),s=e[a],l=e[o];if(void 0!==s&&void 0!==l){e[n]=s+"-"+l}var d=[];d.push(a,i,o),r(e,d)}}),e}function d(e,t){if("line"===e||"area"===e){var n=[];for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];i instanceof Date&&n.push(a)}r(t,n)}}Object.defineProperty(n,"__esModule",{value:!0});var p=e("./formatFieldValue");n.getTooltipData=function(e,t){if("group"!==e.mark.marktype){var n={},i;for(var p in e.datum)e.datum.hasOwnProperty(p)&&(n[p]=e.datum[p]);return r(n,["_id","_prev","width","height","count_start","count_end","layout_start","layout_mid","layout_end","layout_path","layout_x","layout_y"]),s(n,t.fields),l(n,t.fields),d(e.mark.marktype,n),i=!0===t.showAllFields?o(n,t):a(n,t),i}},n.prepareCustomFieldsData=a,n.getValue=i,n.prepareAllFieldsData=o,n.removeFields=r,n.removeDuplicateTimeFields=s,n.combineBinFields=l,n.dropFieldsForLineArea=d},{"./formatFieldValue":582}],586:[function(e,t,n){"use strict";function a(e,t){if(t&&e&&!(0>=e.length)){if(t.aggregate){for(var n=0,a=e,i;n<a.length;n++)if(i=a[n],i.field===t.field&&i.aggregate===t.aggregate)return i;for(var o=0,r=e,i;o<r.length;o++)if(i=r[o],i.field===t.field&&!i.aggregate)return i;return}for(var s=0,l=e,i;s<l.length;s++)if(i=l[s],i.field===t.field)return i}}function i(e,t){if(t&&t.field&&e)for(var n=0,a=e,i;n<a.length;n++)if(i=a[n],i.field===t.field){if(!i.aggregate)return i;if(i.aggregate===t.aggregate||!t.aggregate)return i}}function o(e,t,n){var a=r({},n.config);if(!e&&!t)return void console.error("[Tooltip] Cannot supplement a field when field and fieldDef are both empty.");!e&&t&&(e={}),e&&!t&&(t={});var i={field:t.field?s.fieldDef.field(t):e.field};if(t.type===l.TEMPORAL&&t.timeUnit){var o=t.field;i.removeOriginalTemporalField=o;for(var p=s.spec.fieldDefs(n),c=0,u=p,m;c<u.length;c++)if(m=u[c],m.field===o&&!m.timeUnit){i.removeOriginalTemporalField=void 0;break}}if(a.countTitle||(a.countTitle=s.config.defaultConfig.countTitle),i.title=e.title?e.title:s.fieldDef.title(t,a),i.formatType=e.formatType?e.formatType:d[t.type],e.format)i.format=e.format;else switch(i.formatType){case"time":i.format=t.timeUnit?s.timeUnit.formatExpression(t.timeUnit,"",!1,!1).split("'")[1]:a.timeFormat||s.config.defaultConfig.timeFormat;break;case"number":i.format=a.numberFormat;break;case"string":default:}return t.bin&&(i.field=i.field.replace("_start","_range"),i.bin=!0,i.formatType="string"),i}var r=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("vega-lite"),l=e("vega-lite/build/src/type"),d={quantitative:"number",temporal:"time",ordinal:void 0,nominal:void 0};n.supplementOptions=function(e,t){var n=[];return!1===e.showAllFields?e.fields&&e.fields.forEach(function(e){var a=i(s.spec.fieldDefs(t),e),r=o(e,a,t);n.push(r)}):s.spec.fieldDefs(t).forEach(function(i){var r=a(e.fields,i),s=o(r,i,t);n.push(s)}),e.fields=n,e},n.getFieldOption=a,n.getFieldDef=i,n.supplementFieldOption=o},{"vega-lite":564,"vega-lite/build/src/type":578}],587:[function(e,t,n){"use strict";function a(){i.select("#vis-tooltip").classed("dark-theme light-theme",!1)}Object.defineProperty(n,"__esModule",{value:!0});var i=e("d3-selection");n.getTooltipPlaceholder=function(){var e;return e=i.select("#vis-tooltip").empty()?i.select("body").append("div").attr("id","vis-tooltip").attr("class","vg-tooltip"):i.select("#vis-tooltip"),e},n.bindData=function(e,t){e.selectAll("table").remove();var n=e.append("table").selectAll(".tooltip-row").data(t);n.exit().remove();var a=n.enter().append("tr").attr("class","tooltip-row");a.append("td").attr("class","key").text(function(e){return e.title+":"}),a.append("td").attr("class","value").text(function(e){return e.value})},n.clearData=function(){i.select("#vis-tooltip").selectAll(".tooltip-row").data([]).exit().remove()},n.updatePosition=function(e,t){var n=10,a=10;t&&t.offset&&t.offset.x!==void 0&&null!==t.offset.x&&(n=t.offset.x),t&&t.offset&&t.offset.y!==void 0&&null!==t.offset.y&&(a=t.offset.y),i.select("#vis-tooltip").style("top",function(){var t=this.getBoundingClientRect().height;return e.clientY+t+a<window.innerHeight?""+(e.clientY+a)+"px":""+(e.clientY-t-a)+"px"}).style("left",function(){var t=this.getBoundingClientRect().width;return e.clientX+t+n<window.innerWidth?""+(e.clientX+n)+"px":""+(e.clientX-t-n)+"px"})},n.clearPosition=function(){i.select("#vis-tooltip").style("top","-9999px").style("left","-9999px")},n.updateColorTheme=function(e){a(),e&&"dark"===e.colorTheme?i.select("#vis-tooltip").classed("dark-theme",!0):i.select("#vis-tooltip").classed("light-theme",!0)},n.clearColorTheme=a},{"d3-selection":135}],588:[function(t,n,i){(function(e,t){"object"==typeof i&&"undefined"!=typeof n?t(i):"function"==typeof m&&m.amd?m(["exports"],t):t(e.vega=e.vega||{})})(this,function(t){"use strict";function n(e){return null==e?null:e.fields}function o(e){return h(e)?"["+e.map(o)+"]":b(e)||v(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function i(e,t,n){var a=[t].concat([].slice.call(n));console[e].apply(console,a)}function r(e){return function(t){return e*a(t)}}function s(e){return function(t){return f(e*t)}}function l(e){return function(t){return 0>t?-g(-t,e):g(t,e)}}function d(e,t,n,a){var i=n(e[0]),o=n(M(e)),r=(o-i)*t;return[a(i-r),a(o-r)]}function c(e,t,n,a,i){var o=a(e[0]),r=a(M(e)),s=null==t?(o+r)/2:a(t);return[i(s+(o-s)*n),i(s+(r-s)*n)]}function u(e){return $(e)?e:U(e)?e:Date.parse(e)}var m=function(e,t,n){return e.fields=t||[],e.fname=n,e},_=function(e){throw Error(e)},y=function(e){function t(){a.push(n+e.substring(s,i)),n="",s=i+1}var a=[],o=null,r=0,l=e.length,n="",s,i,d;for(e+="",s=i=0;i<l;++i)if(d=e[i],"\\"===d)n+=e.substring(s,i),s=++i;else if(d===o)t(),o=null,r=-1;else if(o)continue;else s===r&&"\""===d?(s=i+1,o=d):s===r&&"'"===d?(s=i+1,o=d):"."!==d||r?"["===d?(i>s&&t(),r=s=i+1):"]"===d&&(r||_("Access path missing open bracket: "+e),0<r&&t(),r=0,s=i+1):i>s?t():s=i+1;return r&&_("Access path missing closing bracket: "+e),o&&_("Access path missing closing quote: "+e),i>s&&(i++,t()),a},h=Array.isArray,b=function(e){return e===Object(e)},v=function(e){return"string"==typeof e},x=function(e,t){var n=y(e),a="return _["+n.map(o).join("][")+"];";return m(Function("_",a),[e=1===n.length?n[0]:e],t||e)},S=[],T=x("id"),k=m(function(e){return e},S,"identity"),E=m(function(){return 0},S,"zero"),A=m(function(){return 1},S,"one"),C=m(function(){return!0},S,"true"),w=m(function(){return!1},S,"false"),O=0,D=1,P=2,R=3,I=4,M=function(e){return e[e.length-1]},F=function(e){return null==e||""===e?null:+e},B=function(e){return null==e?[]:h(e)?e:[e]},z=function(e){return"function"==typeof e},j={},U=function(e){return"[object Date]"===Object.prototype.toString.call(e)},$=function(e){return"number"==typeof e},W=function(e,t){for(var n="";0<=--t;)n+=e;return n};t.accessor=m,t.accessorName=function(e){return null==e?null:e.fname},t.accessorFields=n,t.id=T,t.identity=k,t.zero=E,t.one=A,t.truthy=C,t.falsy=w,t.logger=function(e){var t=e||O;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=D&&i("error","ERROR",arguments),this},warn:function(){return t>=P&&i("warn","WARN",arguments),this},info:function(){return t>=R&&i("log","INFO",arguments),this},debug:function(){return t>=I&&i("log","DEBUG",arguments),this}}},t.None=O,t.Error=D,t.Warn=P,t.Info=R,t.Debug=I,t.panLinear=function(e,t){return d(e,t,F,k)},t.panLog=function(t,n){var a=e(t[0]);return d(t,n,s(a),r(a))},t.panPow=function(e,t,n){return d(e,t,l(n),l(1/n))},t.zoomLinear=function(e,t,n){return c(e,t,n,F,k)},t.zoomLog=function(t,n,a){var i=e(t[0]);return c(t,n,a,s(i),r(i))},t.zoomPow=function(e,t,n,a){return c(e,t,n,l(a),l(1/a))},t.array=B,t.compare=function(e,a){var r=[],s=(e=B(e)).map(function(e,t){return null==e?null:(r.push(t),z(e)?e:y(e).map(o).join("]["))}),l=r.length-1,p=B(a),c="var u,v;return ",g,i,_,f,u,h,d,t,b;if(0>l)return null;for(i=0;i<=l;++i)g=r[i],_=s[g],z(_)?(h="f"+g,f="(u=this."+h+"(a))",u="(v=this."+h+"(b))",(d=d||{})[h]=_):(f="(u=a["+_+"])",u="(v=b["+_+"])"),h="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"===p[g]?(b=-1,t=1):(b=1,t=-1),c+="("+f+"<"+u+"||u==null)&&v!=null?"+t+":(u>v||v==null)&&u!=null?"+b+":"+h+"!==u&&v===v?"+t+":v!==v&&u===u?"+b+(g<l?":":":0");return _=Function("a","b",c+";"),d&&(_=_.bind(d)),e=e.reduce(function(e,t){return z(t)?(n(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),m(_,Object.keys(e))},t.constant=function(e){return z(e)?e:function(){return e}},t.debounce=function(t,e){function n(){e(i),a=i=null}var a,i;return function(o){i=o,a&&clearTimeout(a),a=setTimeout(n,t)}},t.error=_,t.extend=function(e){for(var t=1,n=arguments.length,a,i;t<n;++t)for(i in a=arguments[t],a)e[i]=a[i];return e},t.extentIndex=function(e,t){var o=-1,i=e.length,n,a,r,s,l;if(null==t){for(;++o<i;)if(a=e[o],null!=a&&a>=a){n=r=a;break}for(s=l=o;++o<i;)a=e[o],null!=a&&(n>a&&(n=a,s=o),r<a&&(r=a,l=o))}else{for(;++o<i;)if(a=t(e[o],o,e),null!=a&&a>=a){n=r=a;break}for(s=l=o;++o<i;)a=t(e[o],o,e),null!=a&&(n>a&&(n=a,s=o),r<a&&(r=a,l=o))}return[s,l]},t.fastmap=function(e){function t(e){return n.hasOwnProperty(e)&&n[e]!==j}var n={},a,i;return a={size:0,empty:0,object:n,has:t,get:function(e){return t(e)?n[e]:void 0},set:function(e,i){return t(e)||(++a.size,n[e]===j&&--a.empty),n[e]=i,this},delete:function(e){return t(e)&&(--a.size,++a.empty,n[e]=j),this},clear:function(){a.size=a.empty=0,a.object=n={}},test:function(e){return arguments.length?(i=e,a):i},clean:function(){var e={},t=0,o,r;for(o in n)r=n[o],r===j||i&&i(r)||(e[o]=r,++t);a.size=t,a.empty=0,a.object=n=e}},e&&Object.keys(e).forEach(function(t){a.set(t,e[t])}),a},t.field=x,t.inherits=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},t.isArray=h,t.isBoolean=function(e){return"boolean"==typeof e},t.isDate=U,t.isFunction=z,t.isNumber=$,t.isObject=b,t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isString=v,t.key=function(e){e=e?B(e):e;var t=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+y(e).map(o).join("][")+"]"}).join("+'|'+")+";"):function(){return""};return m(t,e,"key")},t.merge=function(e,t,n,a){var o=t.length,r=n.length;if(!r)return t;if(!o)return n;for(var s=a||new t.constructor(o+r),l=0,d=0,p=0;l<o&&d<r;++p)s[p]=0<e(t[l],n[d])?n[d++]:t[l++];for(;l<o;++l,++p)s[p]=t[l];for(;d<r;++d,++p)s[p]=n[d];return s},t.pad=function(e,t,a,i){var o=a||" ",r=e+"",s=t-r.length;return 0>=s?r:"left"===i?W(o,s)+r:"center"===i?W(o,~~(s/2))+r+W(o,p(s/2)):r+W(o,s)},t.peek=M,t.repeat=W,t.splitAccessPath=y,t.stringValue=o,t.toBoolean=function(e){return null==e||""===e?null:e&&"false"!==e&&"0"!==e&&!!e},t.toDate=function(e,t){return t=t||u,null==e||""===e?null:t(e)},t.toNumber=F,t.toString=function(e){return null==e||""===e?null:e+""},t.toSet=function(e){for(var t={},a=0,i=e.length;a<i;++a)t[e[a]]=1;return t},t.truncate=function(t,a,i,o){var r=null==o?"\u2026":o,e=t+"",s=e.length,n=N(0,a-r.length);return s<=a?e:"left"===i?r+e.slice(s-n):"center"===i?e.slice(0,p(n/2))+r+e.slice(s-~~(n/2)):e.slice(0,n)+r},t.visitArray=function(e,a,o){if(e){var r=0,i=e.length,n;if(a)for(;r<i;++r)(n=a(e[r]))&&o(n,r,e);else e.forEach(o)}},Object.defineProperty(t,"__esModule",{value:!0})})},{}],589:[function(_,y,h){(function(b){(function(e,t){"object"==typeof h&&"undefined"!=typeof y?t(h):"function"==typeof m&&m.amd?m(["exports"],t):t(e.vega=e.vega||{})})(this,function(h){"use strict";function v(e){return null==e?null:e.fname}function m(e){return null==e?null:e.fields}function w(e){return qy(e)?"["+e.map(w)+"]":Yy(e)||Vy(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function k(e,t,n){var a=[t].concat([].slice.call(n));console[e].apply(console,a)}function O(e){return function(t){return e*a(t)}}function P(e){return function(t){return f(e*t)}}function R(e){return function(t){return 0>t?-g(-t,e):g(t,e)}}function I(e,t,n,a){var i=n(e[0]),o=n(sh(e)),r=(o-i)*t;return[a(i-r),a(o-r)]}function M(e,t){return I(e,t,lh,id)}function F(t,n){var a=e(t[0]);return I(t,n,P(a),O(a))}function z(e,t,n){return I(e,t,R(n),R(1/n))}function j(e,t,n,a,i){var o=a(e[0]),r=a(sh(e)),s=null==t?(o+r)/2:a(t);return[i(s+(o-s)*n),i(s+(r-s)*n)]}function U(e,t,n){return j(e,t,n,lh,id)}function $(t,n,a){var i=e(t[0]);return j(t,n,a,P(i),O(i))}function W(e,t,n,a){return j(e,t,n,R(a),R(1/a))}function H(e){return Sh(e)?e:vh(e)?e:Date.parse(e)}function q(e){var t=e||id,n=[],a={};return n.add=function(e){var i=t(e);return a[i]||(a[i]=1,n.push(e)),n},n.remove=function(e){var i=t(e),o;return a[i]&&(a[i]=0,0<=(o=n.indexOf(e))&&n.splice(o,1)),n},n}function Y(e){return!!(e&&V(e))}function V(e){return e[Rh]}function G(e,t){return e[Rh]=t,e}function Z(e){var n=e===Object(e)?e:{data:e};return V(n)?n:G(n,Ih++)}function X(e){return K(e,Z({}))}function K(e,t){for(var n in e)t[n]=e[n];return t}function J(e,t){return G(t,V(e))}function Q(e){return e&&e.constructor===ee}function ee(){var e=[],o=[],a=[],r=[],s=[],l=!1;return{constructor:ee,insert:function(a){for(var t=dh(a),o=0,i=t.length;o<i;++o)e.push(t[o]);return this},remove:function(e){for(var t=ph(e)?r:o,a=dh(e),s=0,i=a.length;s<i;++s)t.push(a[s]);return this},modify:function(e,t,n){var i={field:t,value:mh(n)};return ph(e)?(i.filter=e,s.push(i)):(i.tuple=e,a.push(i)),this},encode:function(e,n){return ph(e)?s.push({filter:e,field:n}):a.push({tuple:e,field:n}),this},reflow:function(){return l=!0,this},pulse:function(d,p){function c(e,t,n){n?e[t]=n(e):d.encode=t,l||(u[V(e)]=e)}var u,g,i,n,m,f,t;for(g=0,i=e.length;g<i;++g)d.add.push(Z(e[g]));for(u={},g=0,i=o.length;g<i;++g)f=o[g],u[V(f)]=f;for(g=0,i=r.length;g<i;++g)m=r[g],p.forEach(function(e){m(e)&&(u[V(e)]=e)});for(t in u)d.rem.push(u[t]);for(u={},g=0,i=a.length;g<i;++g)n=a[g],c(n.tuple,n.field,n.value),d.modifies(n.field);for(g=0,i=s.length;g<i;++g)n=s[g],m=n.filter,p.forEach(function(e){m(e)&&c(e,n.field,n.value)}),d.modifies(n.field);if(l)d.mod=o.length||r.length?p.filter(function(e){return u.hasOwnProperty(V(e))}):p.slice();else for(t in u)d.mod.push(u[t]);return d}}}function te(){Object.defineProperty(this,Mh,{writable:!0,value:{}})}function ne(e,t,n,a){this.id=++Bh,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,a)}function ae(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function ie(e,t,n){this.id=++Uh,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function oe(e,t,n){return new ie(e,t,n)}function se(){}function le(e,t){var a=new se;if(e instanceof se)e.each(function(e,t){a.set(t,e)});else if(Array.isArray(e)){var r=-1,i=e.length,n;if(null==t)for(;++r<i;)a.set(r,e[r]);else for(;++r<i;)a.set(t(n=e[r],r,e),n)}else if(e)for(var o in e)a.set(o,e[o]);return a}function de(){return{}}function pe(e,t,n){e[t]=n}function ce(){return le()}function ue(e,t,n){e.set(t,n)}function me(){}function fe(e,t){var a=new me;if(e instanceof me)e.each(function(e){a.add(e)});else if(e){var o=-1,i=e.length;if(null==t)for(;++o<i;)a.add(e[o]);else for(;++o<i;)a.add(t(e[o],o,e))}return a}function ge(){for(var e=0,a=arguments.length,n={},i;e<a;++e){if(!(i=arguments[e]+"")||i in n)throw new Error("illegal type: "+i);n[i]=[]}return new _e(n)}function _e(e){this._=e}function ye(e,n){return e.trim().split(/^|\s+/).map(function(e){var a="",o=e.indexOf(".");if(0<=o&&(a=e.slice(o+1),e=e.slice(0,o)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:a}})}function he(e,t){for(var a=0,i=e.length,n;a<i;++a)if((n=e[a]).name===t)return n.value}function be(e,t,a){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Yh,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=a&&e.push({name:t,value:a}),e}function xe(e){return function(t,n){e(null==t?n:null)}}function ve(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Se(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function Te(e,t){var n=Se(e);return function(a,o){return t(n(a),o,e)}}function ke(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var a in e)a in t||n.push(t[a]=a)}),n}function Ee(e,t){return gh({},e.options,t)}function Ne(e,t){var n=this;return n.sanitize(e,t).then(function(e){var a=e.href;return e.localFile?n.file(a):n.http(a,t)})}function Le(e,t){return t=Ee(this,t),new Promise(function(n,a){var i={href:null},o,r,s,l;return null==e||"string"!=typeof e?void a("Sanitize failure, invalid URI: "+w(e)):void(r=nb.test(e),(l=t.baseURL)&&!r&&(!Oe(e,"/")&&"/"!==l[l.length-1]&&(e="/"+e),e=l+e),s=(o=Oe(e,ab))||"file"===t.mode||"http"!==t.mode&&!r&&we(),o?e=e.slice(ab.length):Oe(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!s}),i.href=e,n(i))})}function Ae(e,t){return t=Ee(this,t),new Promise(function(n,a){var i=Vh(e),o;for(o in t.headers)i.header(o,t.headers[o]);ib.forEach(function(e){t[e]&&i[e](t[e])}),i.on("error",function(t){a(t||"Error loading URL: "+e)}).on("load",function(e){var t=e&&e.responseText;e&&0!==e.status?n(t):a(t||"Error")}).get()})}function Ce(e){return new Promise(function(t,n){var a=we();a?a.readFile(e,function(e,a){e?n(e):t(a)}):n("No file system access for "+e)})}function we(){var e="function"==typeof _&&_("fs");return e&&ph(e.readFile)?e:null}function Oe(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function De(e,t){var a=sb.slice(),o,r,i,n;for(r=0,i=e.length;r<i;++r){for(o=t?e[r][t]:e[r],n=0;n<a.length;++n)Re(o)&&!a[n](o)&&(a.splice(n,1),--n);if(0===a.length)return"string"}return lb[sb.indexOf(a[0])]}function Pe(e,t){return t.reduce(function(t,n){return t[n]=De(e,n),t},{})}function Re(e){return null!=e&&e===e}function Ie(e){return!isNaN(+e)&&!(e instanceof Date)}function Me(e){return function(t,n){var a={delimiter:e};return Fe(t,n?gh(n,a):a)}}function Fe(e,t){return t.header&&(e=t.header.map(w).join(t.delimiter)+"\n"+e),Qh(t.delimiter).parse(e+"")}function Be(e){return"function"==typeof b&&ph(b.isBuffer)&&b.isBuffer(e)}function ze(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}function je(e){if(!e)return pb;var t=e.scale[0],n=e.scale[1],a=e.translate[0],o=e.translate[1],r,s;return function(e,l){l||(r=s=0),e[0]=(r+=e[0])*t+a,e[1]=(s+=e[1])*n+o}}function Ue(e,a){for(var n=e.length,o=n-a,i;o<--n;)i=e[o],e[o++]=e[n],e[n]=i}function $e(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:We(e,t)};return null==t.id&&delete n.id,n}function We(e,t){function a(e,t){t.length&&t.pop();for(var o=d[0>e?~e:e],a=0,r=o.length,n;a<r;++a)t.push(n=o[a].slice()),l(n,a);0>e&&Ue(t,r)}function n(e){return e=e.slice(),l(e,0),e}function i(e){for(var t=[],o=0,i=e.length;o<i;++o)a(e[o],t);return 2>t.length&&t.push(t[0].slice()),t}function o(e){for(var t=i(e);4>t.length;)t.push(t[0].slice());return t}function r(e){return e.map(o)}function s(e){var n=e.type;return"GeometryCollection"===n?{type:n,geometries:e.geometries.map(s)}:n in p?{type:n,coordinates:p[n](e)}:null}var l=je(e.transform),d=e.arcs,p={Point:function(e){return n(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(n)},LineString:function(e){return i(e.arcs)},MultiLineString:function(e){return e.arcs.map(i)},Polygon:function(e){return r(e.arcs)},MultiPolygon:function(e){return e.arcs.map(r)}};return s(t)}function He(e,t,a){function o(e){var t=0>e?~e:e;(p[t]||(p[t]=[])).push({i:e,g:u})}function r(e){e.forEach(o)}function s(e){e.forEach(r)}function l(e){"GeometryCollection"===e.type?e.geometries.forEach(l):e.type in c&&(u=e,c[e.type](e.arcs))}var d=[];if(1<arguments.length){var p=[],c={LineString:r,MultiLineString:s,Polygon:s,MultiPolygon:function(e){e.forEach(s)}},u;l(t),p.forEach(3>arguments.length?function(e){d.push(e[0].i)}:function(e){a(e[0].g,e[e.length-1].g)&&d.push(e[0].i)})}else for(var m=0,i=e.arcs.length;m<i;++m)d.push(m);return{type:"MultiLineString",arcs:ub(e,d)}}function qe(e,t,n,a){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:E(n)),e},i.range=function(n,a,o){var r=[];if(n=i.ceil(n),o=null==o?1:E(o),!(n<a)||!(0<o))return r;do r.push(new Date(+n));while((t(n,o),e(n),n<a));return r},i.filter=function(n){return qe(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,a){if(e>=e)if(0>a)for(;0>=++a;)for(;t(e,-1),!n(e););else for(;0<=--a;)for(;t(e,1),!n(e););})},n&&(i.count=function(t,a){return _b.setTime(+t),yb.setTime(+a),e(_b),e(yb),E(n(_b,yb))},i.every=function(e){return e=E(e),isFinite(e)&&0<e?1<e?i.filter(a?function(t){return 0==a(t)%e}:function(t){return 0==i.count(0,t)%e}):i:null}),i}function Ye(e){return qe(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xb)/Tb})}function Ve(e){return qe(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/Tb})}function Ge(e){if(0<=e.y&&100>e.y){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ze(e){if(0<=e.y&&100>e.y){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Xe(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Ke(e){function t(e,t){return function(a){var o=[],r=-1,i=0,s=e.length,n,l,d;for(a instanceof Date||(a=new Date(+a));++r<s;)37===e.charCodeAt(r)&&(o.push(e.slice(i,r)),null==(l=Zb[n=e.charAt(++r)])?l="e"===n?" ":"0":n=e.charAt(++r),(d=t[n])&&(n=d(a,l)),o.push(n),i=r+1);return o.push(e.slice(i,r)),o.join("")}}function n(e,t){return function(n){var o=Xe(1900),r=a(o,e,n+="",0);if(r!=n.length)return null;if("p"in o&&(o.H=o.H%12+12*o.p),"W"in o||"U"in o){"w"in o||(o.w="W"in o?1:0);var i="Z"in o?Ze(Xe(o.y)).getUTCDay():t(Xe(o.y)).getDay();o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7}return"Z"in o?(o.H+=0|o.Z/100,o.M+=o.Z%100,Ze(o)):t(o)}}function a(e,t,a,o){for(var r=0,i=t.length,n=a.length,s,l;r<i;){if(o>=n)return-1;if(s=t.charCodeAt(r++),37===s){if(s=t.charAt(r++),l=k[s in Zb?t.charAt(r++):s],!l||0>(o=l(e,a,o)))return-1;}else if(s!=a.charCodeAt(o++))return-1}return o}var o=e.dateTime,r=e.date,s=e.time,i=e.periods,l=e.days,p=e.shortDays,c=e.months,u=e.shortMonths,m=et(i),f=tt(i),g=et(l),_=tt(l),y=et(p),h=tt(p),b=et(c),x=tt(c),v=et(u),S=tt(u),d={a:function(e){return p[e.getDay()]},A:function(e){return l[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return c[e.getMonth()]},c:null,d:_t,e:_t,H:yt,I:ht,j:bt,L:xt,m:vt,M:St,p:function(e){return i[+(12<=e.getHours())]},S:Tt,U:kt,w:Et,W:Nt,x:null,X:null,y:Lt,Y:At,Z:Ct,"%":Ht},T={a:function(e){return p[e.getUTCDay()]},A:function(e){return l[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return c[e.getUTCMonth()]},c:null,d:wt,e:wt,H:Ot,I:Dt,j:Pt,L:Rt,m:It,M:Mt,p:function(e){return i[+(12<=e.getUTCHours())]},S:Ft,U:Bt,w:zt,W:jt,x:null,X:null,y:Ut,Y:$t,Z:Wt,"%":Ht},k={a:function(e,t,a){var i=y.exec(t.slice(a));return i?(e.w=h[i[0].toLowerCase()],a+i[0].length):-1},A:function(e,t,a){var i=g.exec(t.slice(a));return i?(e.w=_[i[0].toLowerCase()],a+i[0].length):-1},b:function(e,t,a){var i=v.exec(t.slice(a));return i?(e.m=S[i[0].toLowerCase()],a+i[0].length):-1},B:function(e,t,a){var i=b.exec(t.slice(a));return i?(e.m=x[i[0].toLowerCase()],a+i[0].length):-1},c:function(e,t,n){return a(e,o,t,n)},d:dt,e:dt,H:ct,I:ct,j:pt,L:ft,m:lt,M:ut,p:function(e,t,a){var i=m.exec(t.slice(a));return i?(e.p=f[i[0].toLowerCase()],a+i[0].length):-1},S:mt,U:at,w:nt,W:it,x:function(e,t,n){return a(e,r,t,n)},X:function(e,t,n){return a(e,s,t,n)},y:rt,Y:ot,Z:st,"%":gt};return d.x=t(r,d),d.X=t(s,d),d.c=t(o,d),T.x=t(r,T),T.X=t(s,T),T.c=t(o,T),{format:function(e){var n=t(e+="",d);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",Ge);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",T);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,Ze);return t.toString=function(){return e},t}}}function Je(e,t,n){var a=0>e?"-":"",i=(a?-e:e)+"",o=i.length;return a+(o<n?Array(n-o+1).join(t)+i:i)}function Qe(e){return e.replace(Jb,"\\$&")}function et(e){return new RegExp("^(?:"+e.map(Qe).join("|")+")","i")}function tt(e){for(var t={},a=-1,i=e.length;++a<i;)t[e[a].toLowerCase()]=a;return t}function nt(e,t,a){var i=Xb.exec(t.slice(a,a+1));return i?(e.w=+i[0],a+i[0].length):-1}function at(e,t,a){var i=Xb.exec(t.slice(a));return i?(e.U=+i[0],a+i[0].length):-1}function it(e,t,a){var i=Xb.exec(t.slice(a));return i?(e.W=+i[0],a+i[0].length):-1}function ot(e,t,a){var i=Xb.exec(t.slice(a,a+4));return i?(e.y=+i[0],a+i[0].length):-1}function rt(e,t,a){var i=Xb.exec(t.slice(a,a+2));return i?(e.y=+i[0]+(68<+i[0]?1900:2e3),a+i[0].length):-1}function st(e,t,a){var i=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(a,a+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),a+i[0].length):-1}function lt(e,t,a){var i=Xb.exec(t.slice(a,a+2));return i?(e.m=i[0]-1,a+i[0].length):-1}function dt(e,t,a){var i=Xb.exec(t.slice(a,a+2));return i?(e.d=+i[0],a+i[0].length):-1}function pt(e,t,a){var i=Xb.exec(t.slice(a,a+3));return i?(e.m=0,e.d=+i[0],a+i[0].length):-1}function ct(e,t,a){var i=Xb.exec(t.slice(a,a+2));return i?(e.H=+i[0],a+i[0].length):-1}function ut(e,t,a){var i=Xb.exec(t.slice(a,a+2));return i?(e.M=+i[0],a+i[0].length):-1}function mt(e,t,a){var i=Xb.exec(t.slice(a,a+2));return i?(e.S=+i[0],a+i[0].length):-1}function ft(e,t,a){var i=Xb.exec(t.slice(a,a+3));return i?(e.L=+i[0],a+i[0].length):-1}function gt(e,t,a){var i=Kb.exec(t.slice(a,a+1));return i?a+i[0].length:-1}function _t(e,t){return Je(e.getDate(),t,2)}function yt(e,t){return Je(e.getHours(),t,2)}function ht(e,t){return Je(e.getHours()%12||12,t,2)}function bt(e,t){return Je(1+Lb.count(Mb(e),e),t,3)}function xt(e,t){return Je(e.getMilliseconds(),t,3)}function vt(e,t){return Je(e.getMonth()+1,t,2)}function St(e,t){return Je(e.getMinutes(),t,2)}function Tt(e,t){return Je(e.getSeconds(),t,2)}function kt(e,t){return Je(Ab.count(Mb(e),e),t,2)}function Et(e){return e.getDay()}function Nt(e,t){return Je(Cb.count(Mb(e),e),t,2)}function Lt(e,t){return Je(e.getFullYear()%100,t,2)}function At(e,t){return Je(e.getFullYear()%1e4,t,4)}function Ct(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+Je(0|t/60,"0",2)+Je(t%60,"0",2)}function wt(e,t){return Je(e.getUTCDate(),t,2)}function Ot(e,t){return Je(e.getUTCHours(),t,2)}function Dt(e,t){return Je(e.getUTCHours()%12||12,t,2)}function Pt(e,t){return Je(1+zb.count(Gb(e),e),t,3)}function Rt(e,t){return Je(e.getUTCMilliseconds(),t,3)}function It(e,t){return Je(e.getUTCMonth()+1,t,2)}function Mt(e,t){return Je(e.getUTCMinutes(),t,2)}function Ft(e,t){return Je(e.getUTCSeconds(),t,2)}function Bt(e,t){return Je(jb.count(Gb(e),e),t,2)}function zt(e){return e.getUTCDay()}function jt(e,t){return Je(Ub.count(Gb(e),e),t,2)}function Ut(e,t){return Je(e.getUTCFullYear()%100,t,2)}function $t(e,t){return Je(e.getUTCFullYear()%1e4,t,4)}function Wt(){return"+0000"}function Ht(){return"%"}function qt(e){return Qb=Ke(e),ex=Qb.format,nx=Qb.parse,ax=Qb.utcFormat,ix=Qb.utcParse,Qb}function Yt(e,t,a){a=a||nx;var o=e.columns||Object.keys(e[0]),r,s,l,d,i,p,n;for("auto"===t&&(t=Pe(e,o)),o=Object.keys(t),r=o.map(function(e){var n=t[e],i,o;if(n&&(0===n.indexOf("date:")||0===n.indexOf("utc:")))return i=n.split(/:(.+)?/,2),o=i[1],("'"===o[0]&&"'"===o[o.length-1]||"\""===o[0]&&"\""===o[o.length-1])&&(o=o.slice(1,-1)),"utc"===i[0]?ix(o):a(o);if(!rb[n])throw Error("Illegal format pattern: "+e+":"+n);return rb[n]}),(d=0,p=e.length,n=o.length);d<p;++d)for(s=e[d],i=0;i<n;++i)l=o[i],s[l]=r[i](s[l])}function Vt(e){var t=new Promise(function(e,t){n=e,i=t}),n,i;return t.requests=0,t.done=function(){0==--t.requests&&e.runAfter(function(){e._pending=null;try{e.run(),n(e)}catch(e){i(e)}})},e._pending=t}function Gt(n,e,a,t,i,o){var r=gh({},o,dx),s,l;ph(a)||(a=mh(a)),t===void 0?s=function(t){n.touch(a(t))}:ph(t)?(l=new ne(null,t,i,!1),s=function(i){var e=a(i),t;l.evaluate(i),Q(t=l.value)?n.pulse(e,t,o):n.update(e,t,r)}):s=function(i){n.update(a(i),t,r)},e.apply(s)}function Zt(e,t,n,a,i,o){var r,s;a===void 0?s=n:(r=ph(a)?a:mh(a),a=n?function(e,t){var a=r(e,t);return n.skip()?a:n.skip(!0).value=a}:r,s=new ne(null,a,i,!1),s.modified(o&&o.force),s.rank=0,n&&(s.skip(!0),s.value=n.value,s.targets().add(n))),t.targets().add(s)}function Xt(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Kt(e,n){return e?function(a,t){return e(a,t)&&n(a,t)}:n}function Jt(e,t){var n=[];return Ph(e,t,function(e){n.push(e)}),n}function Qt(e,t){var n={};return e.visit(t,function(e){n[V(e)]=1}),function(e){return n[V(e)]?null:e}}function en(e,t,a,o){var r=this,s=0,l,d,p,i,n;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=o||null,this.pulses=a,(p=0,i=a.length);p<i;++p)if(l=a[p],l.stamp===t){if(l.fields)for(n in d=r.fields||(r.fields={}),l.fields)d[n]=1;l.changed(r.ADD)&&(s|=r.ADD),l.changed(r.REM)&&(s|=r.REM),l.changed(r.MOD)&&(s|=r.MOD)}this.changes=s}function tn(e){this.cmp=e,this.nodes=[]}function nn(e,t,n,a){var i,o,r;for(i=e[n];n>t;){if(r=n-1>>1,o=e[r],0>a(i,o)){e[n]=o,n=r;continue}break}return e[n]=i}function an(e,t,n){for(var a=t,i=e.length,o=e[t],r=2*t+1,s;r<i;)s=r+1,s<i&&0<=n(e[r],e[s])&&(r=s),e[t]=e[r],t=r,r=2*t+1;return e[t]=o,nn(e,a,t,n)}function on(){this._log=rh(),this.logLevel(nh),this._clock=0,this._rank=0,this._loader=ob(),this._touched=q(Xy),this._pulses={},this._pulse=null,this._heap=new tn(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function rn(e){return function(){return this._log[e].apply(this,arguments)}}function sn(e,t){ne.call(this,e,null,t)}function ln(e){var n=dn(e);return n&&n.Definition||null}function dn(e){return e=e&&e.toLowerCase(),Nx.hasOwnProperty(e)?Nx[e]:null}function pn(e){return function(t){for(var a=e.length,n=1,i=e[0](t)+"";n<a;++n)i+="|"+e[n](t);return i}}function cn(e){return e&&e.length?1===e.length?e[0]:pn(e):function(){return""}}function un(e,t,n){return n||e+(t?"_"+t:"")}function mn(e,t){return Lx[e](t)}function fn(e){return function(t){var n=gh({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function gn(e,t){return e.idx-t.idx}function _n(e,t){function n(e,i){function a(t){e[t]||n(e,e[t]=Lx[t]())}return i.req&&i.req.forEach(a),t&&i.str&&i.str.forEach(a),e}var a=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{})),i=[],o;for(o in a)i.push(a[o]);return i.sort(gn)}function yn(e,t){var n=_n(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",r="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return n.forEach(function(e){i+=e.init,o+=e.add,r+=e.rem}),e.slice().sort(gn).forEach(function(e){s+="t['"+e.out+"']="+e.set+";"}),s+="return t;",a=Function("cell",a),a.prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",r),a.prototype.set=Function("t",s),a.prototype.get=t||id,a.fields=e.map(function(e){return e.out}),a}function hn(e){return null===e?NaN:+e}function bn(e){return function(t,n){return Ox(e(t),n)}}function xn(e,t,n){var a=(t-e)/N(0,n),i=E(f(a)/Uy),o=a/g(10,i);return 0<=i?(o>=jx?10:o>=Ux?5:o>=$x?2:1)*g(10,i):-g(10,-i)/(o>=jx?10:o>=Ux?5:o>=$x?2:1)}function vn(e,t,n){var a=T(t-e)/N(0,n),i=g(10,E(f(a)/Uy)),o=a/i;return o>=jx?i*=10:o>=Ux?i*=5:o>=$x&&(i*=2),t<e?-i:i}function Sn(e){var t=e.length,n=Kx(e),a=(n[2]-n[0])/1.34;return 1.06*S(u(Fx(e)),a)*g(t,-0.2)}function Tn(e){this._key=e?Gy(e):V,this.reset()}function kn(e){sn.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function En(e){sn.call(this,null,e)}function Nn(e){sn.call(this,[],e)}function Ln(e){ne.call(this,null,An,e)}function An(e){return this.value&&!e.modified()?this.value:uh(e.fields,e.orders)}function Cn(e){sn.call(this,null,e)}function wn(e,t,n){return"upper"===t?e=e.toUpperCase():"lower"===t?e=e.toLowerCase():void 0,e.match(n)}function On(e){sn.call(this,null,e)}function Dn(e,o,a,r){for(var s=[],l={},t=e.length,n=0,i,d;n<t;++n)for(l[o]=d=e[n],i=0;i<t;++i)l[a]=e[i],r(l)&&(s.push(Z(l)),l={},l[o]=d);return s}function Pn(e,t){var n=e[cv];dv.hasOwnProperty(n)||Wy("Unknown distribution function: "+n);var a=dv[n]();for(var i in e)i==uv?a.data((e.from||t()).map(e[i])):i==pv?a[i](e[i].map(function(e){return Pn(e,t)})):typeof a[i]==cv&&a[i](e[i]);return a}function Rn(e){sn.call(this,null,e)}function In(e){return function(){return e.materialize(e.SOURCE).source}}function Mn(e){sn.call(this,[+Infinity,-Infinity],e)}function Fn(e,t){ne.call(this,e),this.parent=t}function Bn(e){sn.call(this,{},e),this._keys=hh();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var a=0,i=t.active;a<i;++a)e(t[a],a,t)}}function zn(e){ne.call(this,null,jn,e)}function jn(e){return this.value&&!e.modified()?this.value:qy(e.name)?dh(e.name).map(function(e){return Gy(e)}):Gy(e.name,e.as)}function Un(e){sn.call(this,hh(),e)}function $n(e){sn.call(this,{},e)}function Wn(e){return e.fields.join("|")}function Hn(e){sn.call(this,null,e)}function qn(e){sn.call(this,[],e)}function Vn(e){sn.call(this,[],e)}function Gn(e){var t=e.method||Sv.value,n;return null==Sv[t]?void Wy("Unrecognized imputation method: "+t):t===Sv.value?(n=void 0===e.value?0:e.value,function(){return n}):Sv[t]}function Jn(e){var n=e.field;return function(e){return e?n(e):NaN}}function Qn(e,a,o,r){var s=function(e){return e(n)},l=[],d=r?r.slice():[],p={},c={},u,m,f,g,i,_,y,n;for(d.forEach(function(e,t){p[e]=t+1}),g=0,y=e.length;g<y;++g)n=e[g],_=o(n),i=p[_]||(p[_]=d.push(_)),m=(u=a?a.map(s):Tv)+"",(f=c[m])||(f=c[m]=[],l.push(f),f.values=u),f[i-1]=n;return l.domain=d,l}function ea(e){kn.call(this,e)}function ta(e){ne.call(this,null,na,e)}function na(e){return this.value&&!e.modified()?this.value:kh(e.fields)}function aa(e){sn.call(this,{},e)}function ia(e){ne.call(this,null,oa,e)}function oa(t){if(this.value&&!t.modified())return this.value;var a=+Infinity,o=-Infinity,r=t.extents,s,i,n;for(s=0,i=r.length;s<i;++s)n=r[s],n[0]<a&&(a=n[0]),n[1]>o&&(o=n[1]);return[a,o]}function ra(e){ne.call(this,null,sa,e)}function sa(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function la(e){sn.call(this,null,e)}function da(e){Bn.call(this,e)}function pa(e){sn.call(this,null,e)}function ca(e,t){return e?e.map(function(e,n){return t[n]||v(e)}):null}function ua(e,a,t,o){for(var r=0,i=t.length;r<i;++r)a[o[r]]=t[r](e);return a}function ma(e){sn.call(this,null,e)}function fa(e){sn.call(this,null,e)}function ga(e){sn.call(this,[],e),this.count=0}function _a(e){sn.call(this,null,e)}function ya(e){sn.call(this,null,e),this.modified(!0)}function ha(e){sn.call(this,hh(),e)}function ba(e){sn.call(this,null,e)}function xa(e,t,n,a){var i=Mv[e](t,n);return{init:i.init||Ky,update:function(e,n){n[a]=i.next(e)}}}function va(e){function t(e){dh(m(e)).forEach(function(e){i[e]=1})}var n=this,a=dh(e.ops),o=dh(e.fields),r=dh(e.params),s=dh(e.as),l=n.outputs=[],d=n.windows=[],i={},p={},c=!0,u=[],f=[];t(e.sort),a.forEach(function(e,n){var a=o[n],i=v(a),g=un(e,i,s[n]);if(t(a),l.push(g),Mv.hasOwnProperty(e))d.push(xa(e,o[n],r[n],g));else{if(null==a&&"count"!==e&&Wy("Null aggregate field specified."),"count"===e)return void u.push(g);c=!1;var _=p[i];_||(_=p[i]=[],_.field=a,f.push(_)),_.push(mn(e,g))}}),(u.length||f.length)&&(n.cell=Sa(f,u,c)),n.inputs=Object.keys(i)}function Sa(e,o,r){e=e.map(function(e){return yn(e,e.field)});var s={num:0,agg:null,store:!1,count:o};if(!r)for(var l=e.length,d=s.agg=Array(l),t=0;t<l;++t)d[t]=new e[t](s);if(s.store)var a=s.data=new Tn;return s.add=function(e){if(s.num+=1,!r){a&&a.add(e);for(var t=0;t<l;++t)d[t].add(d[t].get(e),e)}},s.rem=function(e){if(s.num-=1,!r){a&&a.rem(e);for(var t=0;t<l;++t)d[t].rem(d[t].get(e),e)}},s.set=function(e){var t,i;for(a&&a.values(),t=0,i=o.length;t<i;++t)e[o[t]]=s.num;if(!r)for(t=0,i=d.length;t<i;++t)d[t].set(e)},s.init=function(){s.num=0,a&&a.reset();for(var e=0;e<l;++e)d[e].init()},s}function Ta(e){sn.call(this,{},e),this._mlen=0,this._mods=[]}function ka(e,t,a){var o=a.sort,r=o&&!a.ignorePeers,s=a.frame||[null,0],l=e.data(o),d=l.length,n=0,i=r?Dx(o):null,p={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:o||mh(-1)};for(t.init();n<d;++n)Ea(p,s,n,d),r&&Na(p,i),t.update(p,l[n])}function Ea(e,t,a,i){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:N(0,a-T(t[0])),e.i1=null==t[1]?i:S(i,a+T(t[1])+1),e.index=a}function Na(e,t){var a=e.i0,i=e.i1-1,o=e.compare,r=e.data,s=r.length-1;0<a&&!o(r[a],r[a-1])&&(e.i0=t.left(r,r[a])),i<s&&!o(r[i],r[i+1])&&(e.i1=t.right(r,r[i]))}function La(e){this.clear(),e&&this.union(e)}function Aa(e){this.mark=e,this.bounds=this.bounds||new La}function Ca(e){Aa.call(this,e),this.items=this.items||[]}function wa(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Oa(e,t){t=t.toLowerCase();for(var a=e.childNodes,o=0,i=a.length;o<i;++o)if(a[o].tagName.toLowerCase()===t)return a[o]}function Da(e,t,n,i){var o=e.childNodes[t],a;return o&&o.tagName.toLowerCase()===n.toLowerCase()||(a=o||null,o=wa(e.ownerDocument,n,i),e.insertBefore(o,a)),o}function Pa(e,t){for(var n=e.childNodes,a=n.length;a>t;)e.removeChild(n[--a]);return e}function Ra(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Ia(e){this._pending=0,this._loader=e||ob()}function Ma(e){e._pending+=1}function Fa(e){e._pending-=1}function Ba(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function za(){return new Ba}function ja(e){return 1<e?0:-1>e?iS:i(e)}function Ua(e){return 1<=e?oS:-1>=e?-oS:Fy(e)}function $a(e){return e.innerRadius}function Wa(e){return e.outerRadius}function Ha(e){return e.startAngle}function qa(e){return e.endAngle}function Ya(e){return e&&e.padAngle}function Va(e,n,a,i,o,r,s,l){var d=a-e,p=i-n,c=s-o,u=l-r,m=(c*(n-r)-u*(e-o))/(u*d-c*p);return[e+m*d,n+m*p]}function Ga(e,t,n,a,i,o,s){var l=e-n,p=t-a,c=(s?o:-o)/nS(l*l+p*p),u=c*p,m=-c*l,f=e+u,g=t+m,_=n+u,y=a+m,h=(f+_)/2,b=(g+y)/2,x=_-f,v=y-g,S=x*x+v*v,T=i-o,r=f*y-_*g,k=(0>v?-1:1)*nS(Qv(0,T*T*S-r*r)),d=(r*v-x*k)/S,E=(-r*x-v*k)/S,N=(r*v+x*k)/S,A=(-r*x+v*k)/S,C=d-h,w=E-b,O=N-h,P=A-b;return C*C+w*w>O*O+P*P&&(d=N,E=A),{cx:d,cy:E,x01:-u,y01:-m,x11:d*(i/T-1),y11:E*(i/T-1)}}function Za(e){this._context=e}function Xa(e){return e[0]}function Ka(e){return e[1]}function Ja(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Qa(e){this._context=e}function ei(e){this._context=e}function ti(e){this._context=e}function ni(e,t){this._basis=new Qa(e),this._beta=t}function ai(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ii(e,t){this._context=e,this._k=(1-t)/6}function oi(e,t){this._context=e,this._k=(1-t)/6}function ri(e,t){this._context=e,this._k=(1-t)/6}function si(e,t,i){var o=e._x1,r=e._y1,s=e._x2,l=e._y2;if(e._l01_a>aS){var d=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,a=3*e._l01_a*(e._l01_a+e._l12_a);o=(o*d-e._x0*e._l12_2a+e._x2*e._l01_2a)/a,r=(r*d-e._y0*e._l12_2a+e._y2*e._l01_2a)/a}if(e._l23_a>aS){var n=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,p=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*n+e._x1*e._l23_2a-t*e._l12_2a)/p,l=(l*n+e._y1*e._l23_2a-i*e._l12_2a)/p}e._context.bezierCurveTo(o,r,s,l,e._x2,e._y2)}function li(e,t){this._context=e,this._alpha=t}function di(e,t){this._context=e,this._alpha=t}function ci(e,t){this._context=e,this._alpha=t}function ui(e){this._context=e}function mi(e){return 0>e?-1:1}function fi(e,t,n){var a=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(a||0>i&&-0),r=(n-e._y1)/(i||0>a&&-0);return(mi(o)+mi(r))*S(T(o),T(r),0.5*T((o*i+r*a)/(a+i)))||0}function gi(e,n){var t=e._x1-e._x0;return t?(3*(e._y1-e._y0)/t-n)/2:n}function _i(e,t,n){var a=e._x0,i=e._y0,o=e._x1,r=e._y1,s=(o-a)/3;e._context.bezierCurveTo(a+s,i+s*t,o-s,r-s*n,o,r)}function yi(e){this._context=e}function hi(e){this._context=new bi(e)}function bi(e){this._context=e}function xi(e){this._context=e}function vi(e){var t=e.length-1,n=Array(t),a=Array(t),o=Array(t),r,i;for(n[0]=0,a[0]=2,o[0]=e[0]+2*e[1],r=1;r<t-1;++r)n[r]=1,a[r]=4,o[r]=4*e[r]+2*e[r+1];for(n[t-1]=2,a[t-1]=7,o[t-1]=8*e[t-1]+e[t],r=1;r<t;++r)i=n[r]/a[r-1],a[r]-=i,o[r]-=i*o[r-1];for(n[t-1]=o[t-1]/a[t-1],r=t-2;0<=r;--r)n[r]=(o[r]-n[r+1])/a[r];for(a[t-1]=(e[t]+n[t-1])/2,r=0;r<t-1;++r)a[r]=2*e[r+1]-n[r+1];return[n,a]}function Si(e,n){this._context=e,this._t=n}function Ti(e,t,n){var a=bS.hasOwnProperty(e)&&bS[e],i=null;return a&&(i=a.curve||a[t||"vertical"],a.tension&&null!=n&&(i=i[a.tension](n))),i}function ki(e,t,n,a,r,l,d,m,f){var g=ES.call(arguments);if(TS[g])return TS[g];var _=d*(o/180),y=s(_),h=c(_);n=T(n),a=T(a);var b=0.5*(h*(m-e))+0.5*(y*(f-t)),x=0.5*(h*(f-t))-0.5*(y*(m-e)),v=b*b/(n*n)+x*x/(a*a);1<v&&(v=u(v),n*=v,a*=v);var S=h/n,k=y/n,E=-y/a,N=h/a,A=S*m+k*f,C=E*m+N*f,w=S*e+k*t,O=E*e+N*t,D=1/((w-A)*(w-A)+(O-C)*(O-C))-0.25;0>D&&(D=0);var P=u(D);l==r&&(P=-P);var R=0.5*(A+w)-P*(O-C),I=0.5*(C+O)+P*(w-A),M=By(C-I,A-R),F=By(O-I,w-R),B=F-M;0>B&&1===l?B+=2*o:0<B&&0===l&&(B-=2*o);for(var z=p(T(B/(0.5*o+1e-3))),j=[],U=0;U<z;++U){var i=M+U*B/z,$=M+(U+1)*B/z;j[U]=[R,I,i,$,n,a,y,h]}return TS[g]=j}function Ei(e){var n=ES.call(e);if(kS[n])return kS[n];var a=e[0],i=e[1],o=e[2],r=e[3],l=e[4],d=e[5],p=e[6],u=e[7],m=u*l,f=-p*d,g=p*l,_=u*d,y=c(o),h=s(o),b=c(r),x=s(r),v=0.5*(r-o),S=s(0.5*v),T=8/3*S*S/s(v),t=a+y-T*h,k=i+h+T*y,E=a+b,N=i+x,A=E+T*x,C=N-T*b;return kS[n]=[m*t+f*k,g*t+_*k,m*A+f*C,g*A+_*C,m*E+f*N,g*E+_*N]}function Ni(e,t){var a=NS[0]=e[0];if("a"===a||"A"===a)NS[1]=t*e[1],NS[2]=t*e[2],NS[6]=t*e[6],NS[7]=t*e[7];else for(var o=1,i=e.length;o<i;++o)NS[o]=t*e[o];return NS}function Li(e,t,n,a){for(var o=ki(a[5],a[6],a[0],a[1],a[3],a[4],a[2],t,n),r=0,i;r<o.length;++r)i=Ei(o[r]),e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}function Ai(e){return CS.hasOwnProperty(e)?CS[e]:Ci(e)}function Ci(e){if(!wS.hasOwnProperty(e)){var t=SS(e);wS[e]={draw:function(e,n){LS(e,t,0,0,u(n)/2)}}}return wS[e]}function wi(e){return e.x}function Oi(e){return e.y}function Di(e){return e.width}function Pi(e){return e.height}function Ri(e){return function(){return e}}function Ii(e){return e.x||0}function x(e){return e.y||0}function y(e){return e.cornerRadius||0}function Mi(e){return!1!==e.defined}function Fi(e,t,n,a){return BS.context(e)(t,n,a)}function Bi(e){return HS=e,Bi}function zi(){}function ji(e,t){HS.add(e,t)}function Ui(e,t){return e.zindex-t.zindex||e.index-t.index}function $i(e){if(!e.zdirty)return e.zitems;var t=e.items,a=[],o,r,i;for(r=0,i=t.length;r<i;++r)o=t[r],o.index=r,o.zindex&&a.push(o);return e.zdirty=!1,e.zitems=a.sort(Ui)}function Wi(e,t){var a=e.items,o,i;if(a&&a.length){var n=$i(e);if(n&&n.length){for(o=0,i=a.length;o<i;++o)a[o].zindex||t(a[o]);a=n}for(o=0,i=a.length;o<i;++o)t(a[o])}}function Hi(e,t){var n=e.items,a,o;if(!n||!n.length)return null;var i=$i(e);for(i&&i.length&&(n=i),o=n.length;0<=--o;)if(a=t(n[o]))return a;if(n===i)for(n=e.items,o=n.length;0<=--o;)if(!n[o].zindex&&(a=t(n[o])))return a;return null}function qi(e){return function(t,n,a){Wi(n,function(n){(!a||a.intersects(n.bounds))&&Vi(e,t,n,n)})}}function Yi(e){return function(t,n,a){n.items.length&&(!a||a.intersects(n.bounds))&&Vi(e,t,n.items[0],n.items)}}function Vi(e,t,n,a){var i=null==n.opacity?1:n.opacity;0===i||e(t,a)||(n.fill&&VS(t,n,i)&&t.fill(),n.stroke&&ZS(t,n,i)&&t.stroke())}function Gi(e){return e||(e=XS),function(t,n,a,i,o,r){return 1<t.pixelRatio&&(a*=t.pixelRatio,i*=t.pixelRatio),Hi(n,function(n){var s=n.bounds;return(!s||s.contains(o,r))&&s?e(t,n,a,i,o,r)?n:void 0:void 0})}}function Zi(e,t){return function(n,a,i,o){var r=Array.isArray(a)?a[0]:a,s=null==t?r.fill:t,l=r.stroke&&n.isPointInStroke,d,p;return l&&(d=r.strokeWidth,p=r.strokeCap,n.lineWidth=null==d?1:d,n.lineCap=null==p?"butt":p),!e(n,a)&&(s&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o))}}function Xi(e){return Gi(Zi(e))}function Ki(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}function Ji(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function Qi(e,t){return"center"===e?t/2:"right"===e?t:0}function eo(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function to(e,t){var n=t.path;if(null==n)return!0;var a=t.pathCache;a&&a.path===n||((t.pathCache=a=SS(n)).path=n),LS(e,a,t.x,t.y)}function no(e,t){e.beginPath(),Fi(e,t)}function ao(e,t,n){var a,i,o,r;return t.stroke&&ZS(e,t,n)&&(a=t.x||0,i=t.y||0,o=null==t.x2?a:t.x2,r=null==t.y2?i:t.y2,e.beginPath(),e.moveTo(a,i),e.lineTo(o,r),!0)}function io(e){return gT=po(e),oo(co(e))}function oo(e){return~~(0.8*e.length*gT)}function ro(e){return fT.font=mo(e),so(co(e))}function so(e){return fT.measureText(e).width}function po(e){return null==e.fontSize?11:e.fontSize}function lo(e){fT=e&&(fT=Hv(1,1))?fT.getContext("2d"):null,mT.width=fT?ro:io}function co(e){var t=e.text;return null==t?"":0<e.limit?uo(e):t+""}function uo(e){var t=+e.limit,n=e.text+"",a;if(fT?(fT.font=mo(e),a=so):(gT=po(e),a=oo),a(n)<t)return n;var i=e.ellipsis||"\u2026",o="rtl"===e.dir,r=0,s=n.length,l;if(t-=a(i),o){for(;r<s;)l=r+s>>>1,a(n.slice(l))>t?r=l+1:s=l;return i+n.slice(r)}for(;r<s;)l=1+(r+s>>>1),a(n.slice(0,l))<t?r=l:s=l-1;return n.slice(0,r)+i}function mo(e,t){var n=e.font;return t&&n&&(n=(n+"").replace(/"/g,"'")),""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+po(e)+"px "+(n||"sans-serif")}function fo(e){var t=e.baseline,n=po(e);return l("top"===t?0.93*n:"middle"===t?0.3*n:"bottom"===t?-0.21*n:0)}function go(e,n,i){var d=mT.height(n),p=n.align,a=n.radius||0,r=n.x||0,u=n.y||0,m=n.dx||0,f=(n.dy||0)+fo(n)-l(0.8*d),g,_;return a&&(_=(n.theta||0)-o/2,r+=a*c(_),u+=a*s(_)),g=mT.width(n),"center"===p?m-=g/2:"right"===p&&(m-=g),e.set(m+=r,f+=u,m+g,f+d),n.angle&&!i&&e.rotate(n.angle*o/180,r,u),e.expand(i||!g?0:1)}function _o(e,t){return JSON.stringify(e,kT,t)}function yo(e){var t="string"==typeof e?JSON.parse(e):e;return ho(t)}function ho(e){var t=e.marktype,a=e.items,o,r,i;if(a)for(r=0,i=a.length;r<i;++r)o=t?"mark":"group",a[r][o]=e,a[r].zindex&&(a[r][o].zdirty=!0),"group"===(t||o)&&ho(a[r]);return t&&TT(e),e}function bo(e){arguments.length?this.root=yo(e):(this.root=xo({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Ca(this.root)])}function xo(e,t){return{bounds:new La,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function vo(e){this._active=null,this._handlers={},this._loader=e||ob()}function So(e){this._el=null,this._bgcolor=null,this._loader=new Ia(e)}function To(e){vo.call(this,e),this._down=null,this._touch=null,this._first=!0}function ko(e,t,n){return function(i){var o=this._active,r=this.pickEvent(i);r===o?this.fire(e,i):((!o||!o.exit)&&this.fire(n,i),this._active=r,this.fire(t,i),this.fire(e,i))}}function Eo(e){return function(t){this.fire(e,t),this._active=null}}function No(e){So.call(this,e),this._redraw=!1,this._dirty=new La}function Lo(e,t,n){return t.expand(1).round(),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}function Ao(e,t){if(null==t)return e;for(var n=IT.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}function Co(e){vo.call(this,e);var t=this;t._hrefHandler=wo(t,function(e,n){n&&n.href&&t.handleHref(e,n,n.href)}),t._tooltipHandler=wo(t,function(e,n){n&&n.tooltip&&t.handleTooltip(e,n,"mouseover"===e.type?n.tooltip:null)})}function wo(e,t){return function(n){var a=n.target,i=a.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,t.call(e._obj,n,i)}}function Oo(e,t,n){var a="<"+e,i,o;if(t)for(i in t)o=t[i],null!=o&&(a+=" "+i+"=\""+o+"\"");return n&&(a+=" "+n),a+">"}function Do(e){return"</"+e+">"}function Po(e){So.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Ro(e,t,a){var o,i,n;for(e=Da(e,a,"linearGradient",jT),e.setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),(o=0,i=t.stops.length);o<i;++o)n=Da(e,o,"stop",jT),n.setAttribute("offset",t.stops[o].offset),n.setAttribute("stop-color",t.stops[o].color);Pa(e,o)}function Io(e,t,n){var a;e=Da(e,n,"clipPath",jT),e.setAttribute("id",t.id),a=Da(e,0,"rect",jT),a.setAttribute("x",0),a.setAttribute("y",0),a.setAttribute("width",t.width),a.setAttribute("height",t.height)}function Mo(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Fo(e,t,n){t=t.lastChild;var a=0,i;Wi(n,function(n){i=e.draw(t,n,i),++a}),Pa(t,1+a)}function Bo(e,t,n,a){var i=e._svg,o;if(!i&&(o=t.ownerDocument,i=wa(o,a,jT),e._svg=i,e.mark&&(i.__data__=e,i.__values__={fill:"default"},"g"===a))){var r=wa(o,"path",jT);r.setAttribute("class","background"),i.appendChild(r),r.__data__=e;var s=wa(o,"g",jT);i.appendChild(s),s.__data__=e}return(o||i.previousSibling!==n||!n)&&t.insertBefore(i,n?n.nextSibling:t.firstChild),i}function zo(e,t,n){t===WT[e]||(null==t?n?$T.removeAttributeNS(n,e):$T.removeAttribute(e):n?$T.setAttributeNS(n,e,t):$T.setAttribute(e,t),WT[e]=t)}function jo(){var e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Uo(e){So.call(this,e),this._text={head:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function $o(e,t,n,a){VT[a||e]=t}function Wo(e,t,a,o){if(null==e)return"";var r="",s,i,n,l,d;for("bgrect"===a&&!1===t.interactive&&(r+="pointer-events: none;"),"text"===a&&(r+="font: "+mo(e)+";"),(s=0,i=zT.length);s<i;++s)n=zT[s],l=BT[n],d=e[n],null==d?"fill"===l&&(r+=(r.length?" ":"")+"fill: none;"):(d.id&&(o.gradient[d.id]=d,d="url(#"+d.id+")"),r+=(r.length?" ":"")+l+": "+d+";");return r?"style=\""+r+"\"":null}function Ho(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function qo(e,t){return e=((e||"")+"").toLowerCase(),1<arguments.length?(ek[e]=t,this):ek[e]}function Yo(e,t,n){return!(e!==t)||("path"===n?Vo(e,t):e instanceof Date&&t instanceof Date?+e==+t:Sh(e)&&Sh(t)?T(e-t)<=tk:e&&t&&(Yy(e)||Yy(t))?null==e||null==t?!1:Go(e,t):e==t)}function Vo(e,t){return Yo(SS(e),SS(t))}function Go(e,t){var n=Object.keys(e),o=Object.keys(t),r,s;if(n.length!==o.length)return!1;for(n.sort(),o.sort(),s=n.length-1;0<=s;s--)if(n[s]!=o[s])return!1;for(s=n.length-1;0<=s;s--)if(r=n[s],!Yo(e[r],t[r],r))return!1;return typeof e==typeof t}function Zo(e){sn.call(this,null,e)}function Xo(e,t,n){return t(e.bounds.clear(),e,n)}function Ko(e){sn.call(this,0,e)}function Jo(e){var t=e._signals[ik];return t||(e._signals[ik]=t=e.add(0)),t}function Qo(e){sn.call(this,null,e)}function er(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}/**
 * Analyze items for overlap, changing opacity to hide items with
 * overlapping bounding boxes. This transform will preserve at least
 * two items (e.g., first and last) even if overlap persists.
 * @param {object} params - The parameters for this operator.
 * @param {function(*,*): number} [params.sort] - A comparator
 *   function for sorting items.
 * @param {object} [params.method] - The overlap removal method to apply.
 *   One of 'parity' (default, hide every other item until there is no
 *   more overlap) or 'greedy' (sequentially scan and hide and items that
 *   overlap with the last visible item).
 * @param {object} [params.boundScale] - A scale whose range should be used
 *   to bound the items. Items exceeding the bounds of the scale range
 *   will be treated as overlapping. If null or undefined, no bounds check
 *   will be applied.
 * @param {object} [params.boundOrient] - The orientation of the scale
 *   (top, bottom, left, or right) used to bound items. This parameter is
 *   ignored if boundScale is null or undefined.
 * @param {object} [params.boundTolerance] - The tolerance in pixels for
 *   bound inclusion testing (default 1). This specifies by how many pixels
 *   an item's bounds may exceed the scale range bounds and not be culled.
 * @constructor
 */function tr(e){sn.call(this,null,e)}function nr(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function ar(e){for(var t=1,i=e.length,n=e[0].bounds,a;t<i;n=a,++t)if(nr(n,a=e[t].bounds))return!0}function ir(e){var t=e.bounds;return 1<t.width()&&1<t.height()}function or(e,t,n){var a=e.range(),i=new La;return t===sk||t===pk?i.set(a[0],-Infinity,a[1],+Infinity):i.set(-Infinity,a[0],+Infinity,a[1]),i.expand(n||1),function(e){return i.encloses(e.bounds)}}function rr(e){sn.call(this,null,e)}function sr(e){for(var t=e.items,a=t.length,n=0,i={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null},o,r;n<a;++n)if(o=t[n],r=o.items,"group"===o.marktype)switch(o.role){case fk:case gk:break;case _k:lr(r,i.rowheaders);break;case yk:lr(r,i.rowfooters);break;case bk:lr(r,i.colheaders);break;case xk:lr(r,i.colfooters);break;case hk:i.rowtitle=r[0];break;case vk:i.coltitle=r[0];break;default:lr(r,i.marks);}return i}function lr(e,t){for(var a=0,i=e.length;a<i;++a)t.push(e[a])}function dr(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function pr(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function cr(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function ur(e,t){return e.bounds[t]}function mr(e,t,n){var a=Yy(e)?e[t]:e;return null==a?n===void 0?0:n:a}function fr(e){return 0>e?p(-e):0}function gr(e,t,a){function o(e,t){return E(S(e,t))}function s(e,t){return p(N(e,t))}var l=sr(t,a),d=l.marks,u="flush"===a.bounds,f=u?dr:pr,_=new La(0,0,0,0),h=mr(a.align,"column"),v=mr(a.align,"row"),T=mr(a.padding,"column"),k=mr(a.padding,"row"),A=a.offset,C=t.columns||a.columns||d.length,w=0>C?1:p(d.length/C),O=[],D=[],P=[],R=[],I=d.length,n,m,i,c,r,b,g,M,F,x,y,B,z;for(m=0;m<C;++m)D[m]=0;for(m=0;m<w;++m)R[m]=0;for(m=0;m<I;++m)r=f(d[m]),i=m%C,c=~~(m/C),g=i?p(f(d[m-1]).x2):0,M=c?p(f(d[m-C]).y2):0,D[i]=N(D[i],g),R[c]=N(R[c],M),O.push(T+fr(r.x1)),P.push(k+fr(r.y1)),e.dirty(d[m]);for(m=0;m<I;++m)0==m%C&&(O[m]=0),m<C&&(P[m]=0);if("each"===h)for(i=1;i<C;++i){for(z=0,m=i;m<I;m+=C)z<O[m]&&(z=O[m]);for(m=i;m<I;m+=C)O[m]=z+D[i]}else if("all"===h){for(B=0,i=1;i<C;++i)B<D[i]&&(B=D[i]);for(z=0,m=0;m<I;++m)m%C&&z<O[m]&&(z=O[m]);for(m=0;m<I;++m)m%C&&(O[m]=z+B)}else for(i=1;i<C;++i)for(m=i;m<I;m+=C)O[m]+=D[i];if("each"===v)for(c=1;c<w;++c){for(z=0,m=c*C,n=m+C;m<n;++m)z<P[m]&&(z=P[m]);for(m=c*C;m<n;++m)P[m]=z+R[c]}else if("all"===v){for(B=0,c=1;c<w;++c)B<R[c]&&(B=R[c]);for(z=0,m=C;m<I;++m)z<P[m]&&(z=P[m]);for(m=C;m<I;++m)P[m]=z+B}else for(c=1;c<w;++c)for(m=c*C,n=m+C;m<n;++m)P[m]+=R[c];for(F=0,m=0;m<I;++m)b=d[m],g=b.x||0,b.x=F=O[m]+(m%C?F:0),b.bounds.translate(F-g,0);for(i=0;i<C;++i)for(x=0,m=i;m<I;m+=C)b=d[m],M=b.y||0,b.y=x+=P[m],b.bounds.translate(0,x-M);for(m=0;m<I;++m)d[m].mark.bounds.clear();for(m=0;m<I;++m)b=d[m],e.dirty(b),_.union(b.mark.bounds.union(b.bounds));f=u?cr:ur,y=mr(a.headerBand,"row",null),F=_r(e,l.rowheaders,d,C,w,-mr(A,"rowHeader"),o,0,f,"x1",0,C,1,y),y=mr(a.headerBand,"column",null),x=_r(e,l.colheaders,d,C,C,-mr(A,"columnHeader"),o,1,f,"y1",0,1,C,y),y=mr(a.footerBand,"row",null),_r(e,l.rowfooters,d,C,w,mr(A,"rowFooter"),s,0,f,"x2",C-1,C,1,y),y=mr(a.footerBand,"column",null),_r(e,l.colfooters,d,C,C,mr(A,"columnFooter"),s,1,f,"y2",w*C-C,1,C,y),l.rowtitle&&(z=F-mr(A,"rowTitle"),y=mr(a.titleBand,"row",0.5),yr(e,l.rowtitle,z,0,_,y)),l.coltitle&&(z=x-mr(A,"columnTitle"),y=mr(a.titleBand,"column",0.5),yr(e,l.coltitle,z,1,_,y))}function _r(e,t,a,o,r,s,d,p,c,u,f,_,v,S){var T=a.length,E=0,N=0,A,i,C,k,m,b,h,g,x;if(!T)return E;for(A=f;A<T;A+=_)a[A]&&(E=d(E,c(a[A],u)));if(!t.length)return E;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),E+=s,(i=0,k=t.length);i<k;++i)e.dirty(t[i]),t[i].mark.bounds.clear();for(A=f,i=0,k=t.length;i<k;++i,A+=_){for(b=t[i],m=b.mark.bounds,C=A;0<=C&&null==(h=a[C]);C-=v);p?(g=null==S?h.x:l(h.bounds.x1+S*h.bounds.width()),x=E):(g=E,x=null==S?h.y:l(h.bounds.y1+S*h.bounds.height())),m.union(b.bounds.translate(g-(b.x||0),x-(b.y||0))),b.x=g,b.y=x,e.dirty(b),N=d(N,m[u])}return N}function yr(e,t,n,a,i,o){if(t){e.dirty(t);var r=n,s=n;a?r=l(i.x1+o*i.width()):s=l(i.y1+o*i.height()),t.bounds.translate(r-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=r,t.y=s,e.dirty(t)}}function hr(e){sn.call(this,null,e)}function br(e,t,a){var o=t.items,r=N(0,t.width||0),s=N(0,t.height||0),l=new La().set(0,0,r,s),d=l.clone(),p=l.clone(),c=l.clone(),u=[],m,f,g,_,y,i;for(y=0,i=o.length;y<i;++y)switch(f=o[y],f.role){case Nk:d.union(_=Tr(e,f,r,s)),(vr(f)?p:c).union(_);break;case Lk:m=f;break;case Ck:u.push(f);break;case Ak:case wk:case Ok:case Dk:case Pk:case Rk:p.union(f.bounds),c.union(f.bounds);break;default:l.union(f.bounds);}if(m&&(d.union(_=kr(e,m,d)),(vr(m)?p:c).union(_)),u.length)for(g={left:0,right:0,top:0,bottom:0,margin:a.legendMargin||8},y=0,i=u.length;y<i;++y)if(_=Er(e,u[y],g,p,c,r,s),a.autosize&&a.autosize.type===Sk){var n=u[y].items[0].datum.orient;n===lk||n===dk?l.add(_.x1,0).add(_.x2,0):(n===sk||n===pk)&&l.add(0,_.y1).add(0,_.y2)}else l.union(_);l.union(p).union(c).union(d),Nr(e,t,l,a)}function xr(e,t,n){return e[t]===n?0:(e[t]=n,1)}function vr(e){var t=e.items[0].datum.orient;return t===lk||t===dk}function Sr(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Tr(e,t,n,a){var o=t.items[0],r=o.datum,l=r.orient,d=Sr(r),p=o.range,c=o.offset,u=o.position,m=o.minExtent,f=o.maxExtent,g=r.title&&o.items[d[2]].items[0],_=o.titlePadding,h=o.bounds,b=0,x=0,y,i;return Mk.clear().union(h),h.clear(),-1<(y=d[0])&&h.union(o.items[y].bounds),-1<(y=d[1])&&h.union(o.items[y].bounds),l===sk?(b=u||0,x=-c,i=N(m,S(f,-h.y1)),g&&(g.auto?(i+=_,g.y=-i,i+=g.bounds.height()):h.union(g.bounds)),h.add(0,-i).add(p,0)):l===lk?(b=-c,x=u||0,i=N(m,S(f,-h.x1)),g&&(g.auto?(i+=_,g.x=-i,i+=g.bounds.width()):h.union(g.bounds)),h.add(-i,0).add(0,p)):l===dk?(b=n+c,x=u||0,i=N(m,S(f,h.x2)),g&&(g.auto?(i+=_,g.x=i,i+=g.bounds.width()):h.union(g.bounds)),h.add(0,0).add(i,p)):l===pk?(b=u||0,x=a+c,i=N(m,S(f,h.y2)),g&&(g.auto?(i+=_,g.y=i,i+=g.bounds.height()):h.union(g.bounds)),h.add(0,0).add(p,i)):(b=o.x,x=o.y),(US(h.translate(b,x),o),xr(o,"x",b+Ik)|xr(o,"y",x+Ik)&&(o.bounds=Mk,e.dirty(o),o.bounds=h,e.dirty(o)),o.mark.bounds.clear().union(h))}function kr(e,t,n){var a=t.items[0],i=a.datum,o=i.orient,r=a.offset,s=a.bounds,l=0,d=0;return Mk.clear().union(s),o===sk?(l=a.x,d=n.y1-r):o===lk?(l=n.x1-r,d=a.y):o===dk?(l=n.x2+r,d=a.y):o===pk?(l=a.x,d=n.y2+r):(l=a.x,d=a.y),(s.translate(l-a.x,d-a.y),xr(a,"x",l)|xr(a,"y",d)&&(a.bounds=Mk,e.dirty(a),a.bounds=s,e.dirty(a)),t.bounds.clear().union(s))}function Er(e,t,n,a,i,o,r){var s=t.items[0],d=s.datum,c=d.orient,u=s.offset,m=s.bounds,f=0,g=0,_,y,h;return c===sk||c===pk?(h=i,f=n[c]):(c===lk||c===dk)&&(h=a,g=n[c]),Mk.clear().union(m),m.clear(),s.items.forEach(function(e){m.union(e.bounds)}),_=l(m.width())+2*s.padding-1,y=l(m.height())+2*s.padding-1,c===lk?(f-=_+u-E(h.x1),n.left+=y+n.margin):c===dk?(f+=u+p(h.x2),n.right+=y+n.margin):c===sk?(g-=y+u-E(h.y1),n.top+=_+n.margin):c===pk?(g+=u+p(h.y2),n.bottom+=_+n.margin):"top-left"===c?(f+=u,g+=u):"top-right"===c?(f+=o-_-u,g+=u):"bottom-left"===c?(f+=u,g+=r-y-u):"bottom-right"===c?(f+=o-_-u,g+=r-y-u):(f=s.x,g=s.y),(US(m.set(f,g,f+_,g+y),s),xr(s,"x",f)|xr(s,"width",_)|xr(s,"y",g)|xr(s,"height",y)&&(s.bounds=Mk,e.dirty(s),s.bounds=m,e.dirty(s)),s.mark.bounds.clear().union(m))}function Nr(e,t,n,a){var i=a.autosize||{},o=i.type,r=e._width,s=e._height,l=e.padding();if(!(1>e._autosize)&&o){var d=N(0,t.width||0),c=N(0,p(-n.x1)),u=N(0,p(n.x2-d)),m=N(0,t.height||0),f=N(0,p(-n.y1)),g=N(0,p(n.y2-m));i.contains===Ek&&(r-=l.left+l.right,s-=l.top+l.bottom),o===kk?(c=0,f=0,d=r,m=s):o===Sk?(d=N(0,r-c-u),m=N(0,s-f-g)):o===Tk&&(r=d+c+u,s=m+f+g),e._resizeView(r,s,d,m,[c,f],i.resize)}}function Lr(e){function t(t){var r=t+"",s=a.get(r);if(!s){if(n!==aE)return n;a.set(r,s=o.push(t))}return e[(s-1)%e.length]}var a=le(),o=[],n=aE;return e=null==e?[]:nE.call(e),t.domain=function(e){if(!arguments.length)return o.slice();o=[],a=le();for(var r=-1,i=e.length,n,s;++r<i;)a.has(s=(n=e[r])+"")||a.set(s,o.push(n));return t},t.range=function(n){return arguments.length?(e=nE.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(n=e,t):n},t.copy=function(){return Lr().domain(o).range(e).unknown(n)},t}function Ar(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Cr(){}function wr(e){var t;return e=(e+"").trim().toLowerCase(),(t=sE.exec(e))?(t=parseInt(t[1],16),new Ir(15&t>>8|240&t>>4,15&t>>4|240&t,(15&t)<<4|15&t,1)):(t=lE.exec(e))?Or(parseInt(t[1],16)):(t=dE.exec(e))?new Ir(t[1],t[2],t[3],1):(t=pE.exec(e))?new Ir(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=cE.exec(e))?Dr(t[1],t[2],t[3],t[4]):(t=uE.exec(e))?Dr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=mE.exec(e))?Mr(t[1],t[2]/100,t[3]/100,1):(t=fE.exec(e))?Mr(t[1],t[2]/100,t[3]/100,t[4]):gE.hasOwnProperty(e)?Or(gE[e]):"transparent"===e?new Ir(NaN,NaN,NaN,0):null}function Or(e){return new Ir(255&e>>16,255&e>>8,255&e,1)}function Dr(e,t,n,i){return 0>=i&&(e=t=n=NaN),new Ir(e,t,n,i)}function Pr(e){return(e instanceof Cr||(e=wr(e)),!e)?new Ir:(e=e.rgb(),new Ir(e.r,e.g,e.b,e.opacity))}function Rr(e,t,n,a){return 1===arguments.length?Pr(e):new Ir(e,t,n,null==a?1:a)}function Ir(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}function Mr(e,t,n,i){return 0>=i?e=t=n=NaN:0>=n||1<=n?e=t=NaN:0>=t&&(e=NaN),new zr(e,t,n,i)}function Fr(e){if(e instanceof zr)return new zr(e.h,e.s,e.l,e.opacity);if(e instanceof Cr||(e=wr(e)),!e)return new zr;if(e instanceof zr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,i=S(t,n,a),r=N(t,n,a),d=NaN,p=r-i,s=(r+i)/2;return p?(d=t===r?(n-a)/p+6*(n<a):n===r?(a-t)/p+2:(t-n)/p+4,p/=0.5>s?r+i:2-r-i,d*=60):p=0<s&&1>s?0:d,new zr(d,p,s,e.opacity)}function Br(e,t,n,a){return 1===arguments.length?Fr(e):new zr(e,t,n,null==a?1:a)}function zr(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}function jr(e,t,n){return 255*(60>e?t+(n-t)*e/60:180>e?n:240>e?t+(n-t)*(240-e)/60:t)}function Ur(e){if(e instanceof Wr)return new Wr(e.l,e.a,e.b,e.opacity);if(e instanceof Xr){var t=e.h*_E;return new Wr(e.l,c(t)*e.c,s(t)*e.c,e.opacity)}e instanceof Ir||(e=Pr(e));var n=Vr(e.r),i=Vr(e.g),a=Vr(e.b),o=Hr((0.4124564*n+0.3575761*i+0.1804375*a)/Kn),r=Hr((0.2126729*n+0.7151522*i+0.072175*a)/Xn),l=Hr((0.0193339*n+0.119192*i+0.9503041*a)/Yn);return new Wr(116*r-16,500*(o-r),200*(r-l),e.opacity)}function $r(e,t,n,a){return 1===arguments.length?Ur(e):new Wr(e,t,n,null==a?1:a)}function Wr(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function Hr(e){return e>vE?g(e,1/3):e/xE+Zn}function qr(e){return e>bE?e*e*e:xE*(e-Zn)}function Yr(e){return 255*(0.0031308>=e?12.92*e:1.055*g(e,1/2.4)-0.055)}function Vr(e){return 0.04045>=(e/=255)?e/12.92:g((e+0.055)/1.055,2.4)}function Gr(e){if(e instanceof Xr)return new Xr(e.h,e.c,e.l,e.opacity);e instanceof Wr||(e=Ur(e));var t=By(e.b,e.a)*yE;return new Xr(0>t?t+360:t,u(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Zr(e,t,n,a){return 1===arguments.length?Gr(e):new Xr(e,t,n,null==a?1:a)}function Xr(e,t,n,a){this.h=+e,this.c=+t,this.l=+n,this.opacity=+a}function Kr(e){if(e instanceof Qr)return new Qr(e.h,e.s,e.l,e.opacity);e instanceof Ir||(e=Pr(e));var t=e.r/255,n=e.g/255,a=e.b/255,i=(EE*a+TE*t-kE*n)/(EE+TE-kE),o=a-i,r=(D*(n-i)-B*o)/C,l=u(r*r+o*o)/(D*i*(1-i)),s=l?By(r,o)*yE-120:NaN;return new Qr(0>s?s+360:s,l,i,e.opacity)}function Jr(e,t,n,a){return 1===arguments.length?Kr(e):new Qr(e,t,n,null==a?1:a)}function Qr(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}function es(e,t,n,a,i){var o=e*e,r=o*e;return((1-3*e+3*o-r)*t+(4-6*o+3*r)*n+(1+3*e+3*o-3*r)*a+r*i)/6}function ts(e,n){return function(a){return e+a*n}}function as(e,n,a){return e=g(e,a),n=g(n,a)-e,a=1/a,function(i){return g(e+i*n,a)}}function is(e,t){var n=t-e;return n?ts(e,180<n||-180>n?n-360*l(n/360):n):AE(isNaN(e)?t:e)}function os(e){return 1==(e=+e)?rs:function(t,n){return n-t?as(t,n,e):AE(isNaN(t)?n:t)}}function rs(e,t){var n=t-e;return n?ts(e,n):AE(isNaN(e)?t:e)}function ss(e){return function(t){var a=t.length,n=Array(a),o=Array(a),r=Array(a),s,i;for(s=0;s<a;++s)i=Rr(t[s]),n[s]=i.r||0,o[s]=i.g||0,r[s]=i.b||0;return n=e(n),o=e(o),r=e(r),i.opacity=1,function(e){return i.r=n(e),i.g=o(e),i.b=r(e),i+""}}}function ls(e){return function(){return e}}function ds(e){return function(n){return e(n)+""}}function ps(e,t,n,i){function o(e){return e.length?e.pop()+" ":""}function r(e,a,o,r,l,s){if(e!==o||a!==r){var d=l.push("translate(",null,t,null,n);s.push({i:d-4,x:RE(e,o)},{i:d-2,x:RE(a,r)})}else(o||r)&&l.push("translate("+o+t+r+n)}function l(e,t,n,a){e===t?t&&n.push(o(n)+"rotate("+t+i):(180<e-t?t+=360:180<t-e&&(e+=360),a.push({i:n.push(o(n)+"rotate(",null,i)-2,x:RE(e,t)}))}function d(e,t,n,a){e===t?t&&n.push(o(n)+"skewX("+t+i):a.push({i:n.push(o(n)+"skewX(",null,i)-2,x:RE(e,t)})}function p(e,t,n,a,r,s){if(e!==n||t!==a){var l=r.push(o(r)+"scale(",null,",",null,")");s.push({i:l-4,x:RE(e,n)},{i:l-2,x:RE(t,a)})}else(1!==n||1!==a)&&r.push(o(r)+"scale("+n+","+a+")")}return function(t,n){var a=[],s=[];return t=e(t),n=e(n),r(t.translateX,t.translateY,n.translateX,n.translateY,a,s),l(t.rotate,n.rotate,a,s),d(t.skewX,n.skewX,a,s),p(t.scaleX,t.scaleY,n.scaleX,n.scaleY,a,s),t=n=null,function(e){for(var t=-1,i=s.length,n;++t<i;)a[(n=s[t]).i]=n.x(e);return a.join("")}}}function cs(e){return((e=a(e))+1/e)/2}function us(e){return((e=a(e))-1/e)/2}function ms(e){return((e=a(2*e))-1)/(e+1)}function fs(e){return function(n,t){var a=e((n=Br(n)).h,(t=Br(t)).h),i=rs(n.s,t.s),o=rs(n.l,t.l),r=rs(n.opacity,t.opacity);return function(e){return n.h=a(e),n.s=i(e),n.l=o(e),n.opacity=r(e),n+""}}}function gs(e){return function(n,t){var a=e((n=Zr(n)).h,(t=Zr(t)).h),i=rs(n.c,t.c),o=rs(n.l,t.l),r=rs(n.opacity,t.opacity);return function(e){return n.h=a(e),n.c=i(e),n.l=o(e),n.opacity=r(e),n+""}}}function _s(e){return function t(n){function a(a,t){var i=e((a=Jr(a)).h,(t=Jr(t)).h),o=rs(a.s,t.s),r=rs(a.l,t.l),s=rs(a.opacity,t.opacity);return function(e){return a.h=i(e),a.s=o(e),a.l=r(g(e,n)),a.opacity=s(e),a+""}}return n=+n,a.gamma=t,a}(1)}function ys(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:nN(t)}function hs(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:i(e)}}}function bs(e){return function(n,i){var o=e(n=+n,i=+i);return function(e){return 0>=e?n:1<=e?i:o(e)}}}function xs(e,t,n,a){var i=e[0],o=e[1],r=t[0],s=t[1];return o<i?(i=n(o,i),r=a(s,r)):(i=n(i,o),r=a(r,s)),function(e){return r(i(e))}}function vs(e,t,n,a){var o=S(e.length,t.length)-1,s=Array(o),l=Array(o),r=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++r<o;)s[r]=n(e[r],e[r+1]),l[r]=a(t[r],t[r+1]);return function(t){var n=Rx(e,t,1,o)-1;return l[n](s[n](t))}}function Ss(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Ts(e,t){function n(){return l=2<S(i.length,o.length)?vs:xs,d=p=null,a}function a(t){return(d||(d=l(i,o,s?hs(e):e,r)))(+t)}var i=iN,o=iN,r=zE,s=!1,l,d,p;return a.invert=function(e){return(p||(p=l(o,i,ys,s?bs(t):t)))(+e)},a.domain=function(e){return arguments.length?(i=tE.call(e,aN),n()):i.slice()},a.range=function(e){return arguments.length?(o=nE.call(e),n()):o.slice()},a.rangeRound=function(e){return o=nE.call(e),r=jE,n()},a.clamp=function(e){return arguments.length?(s=!!e,n()):s},a.interpolate=function(e){return arguments.length?(r=e,n()):r},n()}function ks(e){return new Es(e)}function Es(e){if(!(p=cN.exec(e)))throw new Error("invalid format: "+e);var t=p[1]||" ",n=p[2]||">",a=p[3]||"-",i=p[4]||"",o=!!p[5],r=p[6]&&+p[6],s=!!p[7],l=p[8]&&+p[8].slice(1),d=p[9]||"",p;"n"===d?(s=!0,d="g"):!pN[d]&&(d=""),(o||"0"===t&&"="===n)&&(o=!0,t="0",n="="),this.fill=t,this.align=n,this.sign=a,this.symbol=i,this.zero=o,this.width=r,this.comma=s,this.precision=l,this.type=d}function Ns(e){return bN=hN(e),xN=bN.format,vN=bN.formatPrefix,bN}function Ls(e){var t=e.domain;return e.ticks=function(e){var n=t();return Wx(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return EN(t(),e,n)},e.nice=function(n){null==n&&(n=10);var a=t(),i=0,o=a.length-1,r=a[i],s=a[o],l;return s<r&&(l=r,r=s,s=l,l=i,i=o,o=l),l=xn(r,s,n),0<l?(r=E(r/l)*l,s=p(s/l)*l,l=xn(r,s,n)):0>l&&(r=p(r*l)/l,s=E(s*l)/l,l=xn(r,s,n)),0<l?(a[i]=E(r/l)*l,a[o]=p(s/l)*l,t(a)):0>l&&(a[i]=p(r*l)/l,a[o]=E(s*l)/l,t(a)),e},e}function As(){var e=Ts(ys,RE);return e.copy=function(){return Ss(e,As())},Ls(e)}function Cs(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=tE.call(n,aN),e):t.slice()},e.copy=function(){return Cs().domain(t)},Ls(e)}function ws(e,t){return(t=f(t/e))?function(n){return f(n/e)/t}:nN(t)}function Os(e,n){return 0>e?function(i){return-g(-n,i)*g(-e,1-i)}:function(a){return g(n,a)*g(e,1-a)}}function Ds(e){return isFinite(e)?+("1e"+e):0>e?0:e}function Ps(e){return 10===e?Ds:e===My?a:function(t){return g(e,t)}}function Rs(e){return e===My?f:10===e&&Math.log10||2===e&&Math.log2||(e=f(e),function(t){return f(t)/e})}function Is(e){return function(t){return-e(-t)}}function Ms(){function e(){return s=Rs(o),c=Ps(o),0>a()[0]&&(s=Is(s),c=Is(c)),t}var t=Ts(ws,Os).domain([1,10]),a=t.domain,o=10,s=Rs(10),c=Ps(10);return t.base=function(t){return arguments.length?(o=+t,e()):o},t.domain=function(t){return arguments.length?(a(t),e()):a()},t.ticks=function(e){var m=a(),d=m[0],u=m[m.length-1],f;(f=u<d)&&(r=d,d=u,u=r);var r=s(d),i=s(u),g=null==e?10:+e,n=[],_,p,y;if(o%1||!(i-r<g))n=Wx(r,i,S(i-r,g)).map(c);else if(r=l(r)-1,i=l(i)+1,0<d){for(;r<i;++r)for(p=1,_=c(r);p<o;++p)if(y=_*p,!(y<d)){if(y>u)break;n.push(y)}}else for(;r<i;++r)for(p=o-1,_=c(r);1<=p;--p)if(y=_*p,!(y<d)){if(y>u)break;n.push(y)}return f?n.reverse():n},t.tickFormat=function(e,n){if(null==n&&(n=10==o?".0e":","),"function"!=typeof n&&(n=xN(n)),e===Infinity)return n;null==e&&(e=10);var a=N(1,o*e/t.ticks().length);return function(e){var t=e/c(l(s(e)));return t*o<o-0.5&&(t*=o),t<=a?n(e):""}},t.nice=function(){return a(NN(a(),{floor:function(e){return c(E(s(e)))},ceil:function(e){return c(p(s(e)))}}))},t.copy=function(){return Ss(t,Ms().base(o))},t}function Fs(e,t){return 0>e?-g(-e,t):g(e,t)}function Bs(){var e=1,t=Ts(function(t,n){return(n=Fs(n,e)-(t=Fs(t,e)))?function(a){return(Fs(a,e)-t)/n}:nN(n)},function(n,a){return a=Fs(a,e)-(n=Fs(n,e)),function(i){return Fs(n+a*i,1/e)}}),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return Ss(t,Bs().exponent(e))},Ls(t)}function zs(){function e(){var e=0,i=N(1,o.length);for(r=Array(i-1);++e<i;)r[e-1]=qx(a,e/i);return t}function t(e){if(!isNaN(e=+e))return o[Rx(r,e)]}var a=[],o=[],r=[];return t.invertExtent=function(e){var t=o.indexOf(e);return 0>t?[NaN,NaN]:[0<t?r[t-1]:a[0],t<r.length?r[t]:a[a.length-1]]},t.domain=function(t){if(!arguments.length)return a.slice();a=[];for(var o=0,i=t.length,n;o<i;++o)(n=t[o],null!=n&&!isNaN(n=+n))&&a.push(n);return a.sort(Ox),e()},t.range=function(t){return arguments.length?(o=nE.call(t),e()):o.slice()},t.quantiles=function(){return r.slice()},t.copy=function(){return zs().domain(a).range(o)},t}function js(){function e(e){if(e<=e)return s[Rx(n,e,0,r)]}function t(){var t=-1;for(n=Array(r);++t<r;)n[t]=((t+1)*o-(t-r)*a)/(r+1);return e}var a=0,o=1,r=1,n=[0.5],s=[0,1];return e.domain=function(e){return arguments.length?(a=+e[0],o=+e[1],t()):[a,o]},e.range=function(e){return arguments.length?(r=(s=nE.call(e)).length-1,t()):s.slice()},e.invertExtent=function(e){var t=s.indexOf(e);return 0>t?[NaN,NaN]:1>t?[a,n[0]]:t>=r?[n[r-1],o]:[n[t-1],n[t]]},e.copy=function(){return js().domain([a,o]).range(s)},Ls(e)}function Us(){function e(e){if(e<=e)return a[Rx(t,e,0,i)]}var t=[0.5],a=[0,1],i=1;return e.domain=function(n){return arguments.length?(t=nE.call(n),i=S(t.length,a.length-1),e):t.slice()},e.range=function(n){return arguments.length?(a=nE.call(n),i=S(t.length,a.length-1),e):a.slice()},e.invertExtent=function(e){var n=a.indexOf(e);return[t[n-1],t[n]]},e.copy=function(){return Us().domain(t).range(a)},e}function $s(e){return new Date(e)}function Ws(e){return e instanceof Date?+e:+new Date(+e)}function Hs(e,t,n,a,i,o,r,s,l){function d(s){return(r(s)<s?f:o(s)<s?g:i(s)<s?_:a(s)<s?y:t(s)<s?n(s)<s?h:b:e(s)<s?x:v)(s)}function p(t,n,a,o){if(null==t&&(t=10),"number"==typeof t){var r=T(a-n)/t,l=Dx(function(e){return e[2]}).right(S,r);l===S.length?(o=vn(n/PN,a/PN,t),t=e):l?(l=S[r/S[l-1][2]<S[l][2]/r?l-1:l],o=l[1],t=l[0]):(o=vn(n,a,t),t=s)}return null==o?t:t.every(o)}var c=Ts(ys,RE),u=c.invert,m=c.domain,f=l(".%L"),g=l(":%S"),_=l("%I:%M"),y=l("%I %p"),h=l("%a %d"),b=l("%b %d"),x=l("%B"),v=l("%Y"),S=[[r,1,LN],[r,5,5*LN],[r,15,15*LN],[r,30,30*LN],[o,1,AN],[o,5,5*AN],[o,15,15*AN],[o,30,30*AN],[i,1,CN],[i,3,3*CN],[i,6,6*CN],[i,12,12*CN],[a,1,wN],[a,2,2*wN],[n,1,ON],[t,1,DN],[t,3,3*DN],[e,1,PN]];return c.invert=function(e){return new Date(u(e))},c.domain=function(e){return arguments.length?m(tE.call(e,Ws)):m().map($s)},c.ticks=function(e,n){var a=m(),i=a[0],o=a[a.length-1],s=o<i,r;return s&&(r=i,i=o,o=r),r=p(e,i,o,n),r=r?r.range(i,o+1):[],s?r.reverse():r},c.tickFormat=function(e,t){return null==t?d:l(t)},c.nice=function(e,t){var n=m();return(e=p(e,n[0],n[n.length-1],t))?m(NN(n,e)):c},c.copy=function(){return Ss(c,Hs(e,t,n,a,i,o,r,s,l))},c}function qs(e){var a=e.length;return function(n){return e[N(0,S(a-1,E(n*a)))]}}function Ys(){function e(){var e=i().length,t=r[1]<r[0],n=r[t-0],m=r[1-t],f=Qk(e,s,d);c=(m-n)/(f||1),a&&(c=E(c)),n+=(m-n-c*(e-s))*p,u=c*(1-s),a&&(n=l(n),u=l(u));var g=zx(e).map(function(e){return n+c*e});return o(t?g.reverse():g)}var t=Lr().unknown(void 0),i=t.domain,o=t.range,r=[0,1],a=!1,s=0,d=0,p=0.5,c,u;return delete t.unknown,t.domain=function(t){return arguments.length?(i(t),e()):i()},t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],e()):r.slice()},t.rangeRound=function(t){return r=[+t[0],+t[1]],a=!0,e()},t.bandwidth=function(){return u},t.step=function(){return c},t.round=function(t){return arguments.length?(a=!!t,e()):a},t.padding=function(t){return arguments.length?(d=N(0,S(1,t)),s=d,e()):s},t.paddingInner=function(t){return arguments.length?(s=N(0,S(1,t)),e()):s},t.paddingOuter=function(t){return arguments.length?(d=N(0,S(1,t)),e()):d},t.align=function(t){return arguments.length?(p=N(0,S(1,t)),e()):p},t.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var s=+e[0],l=+e[1],d=r[1]<r[0],p=d?o().reverse():o(),c=p.length-1,n,a,m;if(s==s&&l==l)return(l<s&&(m=s,s=l,l=m),!(l<p[0]||s>r[1-d]))?(n=N(0,Rx(p,s)-1),a=s===l?n:Rx(p,l)-1,s-p[n]>u+1e-10&&++n,d&&(m=n,n=c-a,a=c-m),n>a?void 0:i().slice(n,a+1)):void 0}},t.invert=function(e){var n=t.invertRange([e,e]);return n?n[0]:n},t.copy=function(){return Ys().domain(i()).range(r).round(a).paddingInner(s).paddingOuter(d).align(p)},e()}function Vs(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Vs(t())},e}function Gs(e){return YN.call(e,function(e){return+e})}function Zs(){function e(e){return n(e)}function t(e){a=Gs(e),n.domain([a[0],sh(a)])}var n=As(),a=[];return e.domain=function(n){return arguments.length?(t(n),e):a.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var i=a.length,n=~~(i/(t||i));return 2>n?e.domain():a.filter(function(e,t){return!(t%n)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return Zs().domain(e.domain()).range(e.range())},e}function Xs(){function e(e){return null==e||e!==e?void 0:n[(Rx(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=Gs(n),e):t.slice()},e.range=function(t){return arguments.length?(n=VN.call(t),e):n.slice()},e.copy=function(){return Xs().domain(e.domain()).range(e.range())},e}function Ks(e){function t(){var e=a.domain();i=e[0],o=sh(e)-i}function n(n){var a=(n-i)/o;return e(r?N(0,S(1,a)):a)}var a=As(),i=0,o=1,r=!1;return n.clamp=function(e){return arguments.length?(r=!!e,n):r},n.domain=function(e){return arguments.length?(a.domain(e),t(),n):a.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Ks().domain(a.domain()).clamp(r).interpolator(e)},n.ticks=function(e){return a.ticks(e)},n.tickFormat=function(e,t){return a.tickFormat(e,t)},n.nice=function(e){return a.nice(e),t(),n},n}function Js(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?Kk(n):n.invertExtent?Jk(n):void 0),n.type=e,n}}function Qs(e,t){return 1<arguments.length?(GN[e]=Js(e,t),this):GN.hasOwnProperty(e)?GN[e]:void 0}function el(e){for(var t=0|e.length/6,n=Array(t),a=0;a<t;)n[a]="#"+e.slice(6*a,6*++a);return n}function tl(e,t){cA[e]=dA["interpolate"+t],pA[e]=dA["scheme"+t]}function nl(e,t){var n=t[0],a=sh(t)-n;return function(t){return e(n+t*a)}}function al(e,t,n){var a=n-t;return a?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/a}:e.copy().domain([t,n]).range([0,1]).interpolate(il):mh(0)}function il(e,t){return function(n){return e+n*(t-e)}}function ol(e,t){var n=tN[rl(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function rl(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}function sl(e){return mA.hasOwnProperty(e)&&mA[e]}function ll(e){return fA.hasOwnProperty(e)&&fA[e]}function dl(e,t){var n;return Yy(t)&&(n=t.step,t=t.interval),Vy(t)&&(t="time"===e.type?sl(t):"utc"===e.type?ll(t):Wy("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function pl(e,t,n){var a=e.range(),i=a[0],o=sh(a);if(i>o&&(a=o,o=i,i=a),t=t.filter(function(t){return t=e(t),!(t<i||t>o)}),0<n&&1<t.length){for(var r=[t[0],sh(t)];t.length>n&&3<=t.length;)t=t.filter(function(e,t){return!(t%2)});3>t.length&&(t=r)}return t}function cl(e,t){return e.ticks?e.ticks(t):e.domain()}function ul(e,t,n){var a=e.tickFormat?e.tickFormat(t,n):String;return e.type===zk?ml(a,fl(n)):a}function ml(e,t){return function(n){return e(n)?t(n):""}}function fl(e){var t=ks(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1;}return gl(xN(t),xN(".1f")(1)[1])}return xN(t)}function gl(e,t){return function(n){var a=e(n),i=a.indexOf(t),o,r;if(0>i)return a;for(o=_l(a,i),r=o<a.length?a.slice(o):"";--o>i;)if("0"!==a[o]){++o;break}return a.slice(0,o)+r}}function _l(e,t){var n=e.lastIndexOf("e"),a;if(0<n)return n;for(n=e.length;--n>t;)if(a=e.charCodeAt(n),48<=a&&57>=a)return n+1}function yl(e){sn.call(this,null,e)}function hl(e){sn.call(this,null,e)}function bl(){return Z({})}function xl(e){return e.exit}function vl(e){sn.call(this,null,e)}function Sl(e,t,n){if(n)return e.domain();var a=hA[e.type];return a?a(e):cl(e,t)}function Tl(e){var t=e.domain();return t.max=t.pop(),t}function kl(e,t){return hA[e.type]?El(t):Ll(t)}function El(e){return function(t,n,a){var i=a[n+1]||a.max||+Infinity,o=Nl(t,e),r=Nl(i,e);return o&&r?o+"\u2013"+r:r?"< "+r:"\u2265 "+o}}function Nl(e,t){return isFinite(e)?t(e):null}function Ll(e){return function(t){return e(t)}}function Al(e){sn.call(this,[],e)}function Cl(e){return e.source.x}function wl(e){return e.source.y}function Ol(e){return e.target.x}function Dl(e){return e.target.y}function Pl(e){sn.call(this,{},e)}function Rl(e,t,n,a){return"M"+e+","+t+"L"+n+","+a}function Il(e,t,n,a){var i=n-e,r=a-t,s=u(i*i+r*r)/2,l=180*By(r,i)/o;return"M"+e+","+t+"A"+s+","+s+" "+l+" 0 1 "+n+","+a}function Ml(e,t,n,a){var i=n-e,o=a-t,r=0.2*(i+o),s=0.2*(o-i);return"M"+e+","+t+"C"+(e+r)+","+(t+s)+" "+(n+s)+","+(a-r)+" "+n+","+a}function Fl(e){sn.call(this,null,e)}function Bl(e){sn.call(this,null,e),this.modified(!0)}function zl(e,t,a){var i=jl(e,t.domainRaw);if(-1<i)return i;var o=t.domain,r=e.type,s=t.zero||void 0===t.zero&&kA[r],l,n;return o?(EA[r]&&t.padding&&o[0]!==sh(o)&&(o=Ul(r,o,t.range,t.padding,t.exponent)),(s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(l=(o=o.slice()).length-1||1,s&&(0<o[0]&&(o[0]=0),0>o[l]&&(o[l]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[l]=t.domainMax),null!=t.domainMid&&(n=t.domainMid,(n<o[0]||n>o[l])&&a.warn("Scale domainMid exceeds domain min or max.",n),o.splice(l,0,n))),e.domain(o),t.nice&&e.nice&&e.nice(!0!==t.nice&&dl(e,t.nice)||null),o.length):0}function jl(e,t){return t?(e.domain(t),t.length):-1}function Ul(e,t,n,a,i){var o=T(sh(n)-n[0]),r=o/(o-2*a),s=e===zk?$(t,null,r):e===Uk?W(t,null,r,0.5):e===jk?W(t,null,r,i):U(t,null,r);return t=t.slice(),t[0]=s[0],t[t.length-1]=s[1],t}function $l(e,t,n){var a=t.round||!1,i=t.range;if(null!=t.rangeStep)i=Wl(e.type,t,n);else if(t.scheme){if(i=Hl(e.type,t,n),ph(i))return e.interpolator(i);}else if(i&&e.type===Xk)return e.interpolator(wE(Yl(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate(ol(t.interpolate,t.interpolateGamma)):ph(e.round)?e.round(a):ph(e.rangeRound)&&e.interpolate(a?jE:zE),i&&e.range(Yl(i,t.reverse))}function Wl(e,t,n){e!==$k&&e!==Wk&&Wy("Only band and point scales support rangeStep.");var a=(null==t.paddingOuter?t.padding:t.paddingOuter)||0,i=e===Wk?1:(null==t.paddingInner?t.padding:t.paddingInner)||0;return[0,t.rangeStep*Qk(n,i,a)]}function Hl(e,t,n){var a=t.scheme.toLowerCase(),i=uA(a),o=t.schemeExtent,r;return i||Wy("Unrecognized scheme name: "+t.scheme),n=e===Gk?n+1:e===Zk?n-1:e===Yk||e===Vk?+t.schemeCount||TA:n,e===Xk?ql(i,o,t.reverse):!o&&(r=uA(a+"-"+n))?r:ph(i)?Vl(ql(i,o),n):e===qk?i:i.slice(0,n)}function ql(e,t,n){return ph(e)&&(t||n)?nl(e,Yl(t||[0,1],n)):e}function Yl(e,t){return t?e.slice().reverse():e}function Vl(e,t){for(var n=Array(t),a=0;a<t;++a)n[a]=e(a/(t-1||1));return n}function Gl(e){sn.call(this,null,e)}function Zl(e){sn.call(this,null,e)}function Xl(e,n,a,i,o){for(var r=(n-e.sum)/2,s=e.length,l=0,d;l<s;++l)d=e[l],d[i]=r,d[o]=r+=T(a(d))}function Kl(e,n,a,i,o){for(var r=1/e.sum,s=0,l=e.length,d=0,p=0,c;d<l;++d)c=e[d],c[i]=s,c[o]=s=r*(p+=T(a(c)))}function Jl(e,n,a,i,o){for(var r=0,s=0,l=e.length,d=0,p,c;d<l;++d)c=e[d],p=a(c),0>p?(c[i]=s,c[o]=s+=p):(c[i]=r,c[o]=r+=p)}function Ql(e,a,o,r){var l=[],d=function(e){return e(u)},p,c,i,n,u,t,m,f,s;if(null==a)l.push(e.slice());else for(p={},c=0,i=e.length;c<i;++c)u=e[c],t=a.map(d),m=p[t],m||(p[t]=m=[],l.push(m)),m.push(u);for(t=0,s=0,n=l.length;t<n;++t){for(m=l[t],c=0,f=0,i=m.length;c<i;++c)f+=T(r(m[c]));m.sum=f,f>s&&(s=f),o&&m.sort(o)}return l.max=s,l}function ed(e,t){for(var a=t[0],o=t[1],r=-1,s=0,i=e.length,n=i-1;s<i;n=s++){var l=e[s],d=l[0],p=l[1],c=e[n],u=c[0],m=c[1];if(td(l,c,t))return 0;p>o!=m>o&&a<(u-d)*(o-p)/(m-p)+d&&(r=-r)}return r}function td(e,t,n){var a;return nd(e,t,n)&&ad(e[a=+(e[0]===t[0])],n[a],t[a])}function nd(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}function ad(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function od(e,t,a){for(var o=e.width,n=e.height,r=(a<<1)+1,s=0;s<n;++s)for(var l=0,i=0;l<o+a;++l)l<o&&(i+=e.data[l+s*o]),l>=a&&(l>=r&&(i-=e.data[l-r+s*o]),t.data[l-a+s*o]=i/S(l+1,o-1+r-l,r))}function rd(e,t,a){for(var o=e.width,n=e.height,r=(a<<1)+1,s=0;s<o;++s)for(var i=0,l=0;i<n+a;++i)i<n&&(l+=e.data[s+i*o]),i>=a&&(i>=r&&(l-=e.data[s+(i-r)*o]),t.data[s+(i-a)*o]=l/S(i+1,n-1+r-i,r))}function sd(e){return e[0]}function ld(e){return e[1]}function dd(e){sn.call(this,null,e)}function pd(e){return function(n){for(var a=Bx(n),o=a[0],r=a[1]-o,s=[],t=1;t<=e;++t)s.push(o+r*t/(e+1));return s}}function cd(e){sn.call(this,null,e)}function ud(){this.reset()}function md(e,t,n){var a=e.s=t+n,i=a-t;e.t=t-(a-i)+(n-i)}function fd(e){return 1<e?0:-1>e?ZA:i(e)}function gd(e){return 1<e?XA:-1>e?-XA:Fy(e)}function _d(){}function yd(e,t){e&&fC.hasOwnProperty(e.type)&&fC[e.type](e,t)}function hd(e,t,a){var o=-1,i=e.length-a,n;for(t.lineStart();++o<i;)n=e[o],t.point(n[0],n[1],n[2]);t.lineEnd()}function bd(e,t){var a=-1,i=e.length;for(t.polygonStart();++a<i;)hd(e[a],t,1);t.polygonEnd()}function xd(e){return[aC(e[1],e[0]),gd(e[2])]}function vd(e){var t=e[0],n=e[1],a=iC(n);return[a*iC(t),a*dC(t),dC(n)]}function Sd(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Td(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function kd(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ed(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Nd(e){var t=cC(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Ld(e,t){return[e>ZA?e-JA:e<-ZA?e+JA:e,t]}function Ad(e,t,n){return(e%=JA)?t||n?bC(wd(e),Od(t,n)):wd(e):t||n?Od(t,n):Ld}function Cd(e){return function(t,n){return t+=e,[t>ZA?t-JA:t<-ZA?t+JA:t,n]}}function wd(e){var t=Cd(e);return t.invert=Cd(-e),t}function Od(e,t){function n(e,t){var n=iC(t),s=iC(e)*n,l=dC(e)*n,d=dC(t),p=d*a+s*i;return[aC(l*o-p*r,s*a-d*i),gd(p*o+l*r)]}var a=iC(e),i=dC(e),o=iC(t),r=dC(t);return n.invert=function(e,t){var n=iC(t),s=iC(e)*n,l=dC(e)*n,d=dC(t),p=d*o-l*r;return[aC(l*o+d*r,s*a+p*i),gd(p*a-s*i)]},n}function Dd(e,n,a,i,o,r){if(a){var s=iC(n),l=dC(n),d=i*a;null==o?(o=n+i*JA,r=n-d/2):(o=Pd(s,o),r=Pd(s,r),(0<i?o<r:o>r)&&(o+=i*JA));for(var p=o,t;0<i?p>r:p<r;p-=d)t=xd([s,-l*iC(p),-l*dC(p)]),e.point(t[0],t[1])}}function Pd(e,t){t=vd(t),t[0]-=e,Nd(t);var n=fd(-t[1]);return((0>-t[2]?-n:n)+JA-GA)%JA}function Rd(e,t,n,a){this.x=e,this.z=t,this.o=n,this.e=a,this.v=!1,this.n=this.p=null}function Id(e){if(a=e.length){for(var t=0,i=e[0],a,n;++t<a;)i.n=n=e[t],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Md(e,t,n,o){function i(a,i){return e<=a&&a<=n&&t<=i&&i<=o}function a(i,s,d,p){var c=0,a=0;if(null==i||(c=r(i,d))!==(a=r(s,d))||0>l(i,s)^0<d)do p.point(0==c||3==c?e:n,1<c?o:t);while((c=(c+d+4)%4)!=a);else p.point(s[0],s[1])}function r(a,i){return tC(a[0]-e)<GA?0<i?0:3:tC(a[0]-n)<GA?0<i?2:1:tC(a[1]-t)<GA?0<i?1:0:0<i?3:2}function s(e,t){return l(e.x,t.x)}function l(e,t){var n=r(e,1),a=r(t,1);return n===a?0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]:n-a}return function(r){function l(e,t){i(e,t)&&c.point(e,t)}function d(){for(var t=0,a=0,i=g.length;a<i;++a)for(var n=g[a],r=1,s=n.length,l=n[0],d=l[0],p=l[1],c,u;r<s;++r)c=d,u=p,l=n[r],d=l[0],p=l[1],u<=o?p>o&&(d-c)*(o-u)>(p-u)*(e-c)&&++t:p<=o&&(d-c)*(o-u)<(p-u)*(e-c)&&--t;return t}function p(r,s){var l=i(r,s);if(g&&_.push([r,s]),w)h=r,T=s,k=l,w=!1,l&&(c.lineStart(),c.point(r,s));else if(l&&C)c.point(r,s);else{var d=[E=N(NC,S(EC,E)),A=N(NC,S(EC,A))],a=[r=N(NC,S(EC,r)),s=N(NC,S(EC,s))];SC(d,a,e,t,n,o)?(!C&&(c.lineStart(),c.point(d[0],d[1])),c.point(a[0],a[1]),!l&&c.lineEnd(),O=!1):l&&(c.lineStart(),c.point(r,s),O=!1)}E=r,A=s,C=l}var c=r,u=vC(),m={point:l,lineStart:function(){m.point=p,g&&g.push(_=[]),w=!0,C=!1,E=A=NaN},lineEnd:function(){f&&(p(h,T),k&&C&&u.rejoin(),f.push(u.result())),m.point=l,C&&c.lineEnd()},polygonStart:function(){c=u,f=[],g=[],O=!0},polygonEnd:function(){var e=d(),t=O&&e,n=(f=Vx(f)).length;(t||n)&&(r.polygonStart(),t&&(r.lineStart(),a(null,null,1,r),r.lineEnd()),n&&kC(f,s,e,a,r),r.polygonEnd()),c=r,f=g=_=null}},f,g,_,h,T,k,E,A,C,w,O;return m}}function Fd(){wC.point=wC.lineEnd=_d}function Bd(e,t){e*=eC,t*=eC,tw=e,nw=dC(t),aw=iC(t),wC.point=zd}function zd(e,t){e*=eC,t*=eC;var n=dC(t),a=iC(t),i=tC(e-tw),o=iC(i),r=dC(i),s=a*r,l=aw*n-nw*a*o,d=nw*n+aw*a*o;CC.add(aC(cC(s*s+l*l),d)),tw=e,nw=n,aw=a}function jd(e,t){return e&&IC.hasOwnProperty(e.type)&&IC[e.type](e,t)}function Ud(e,t){return 0===RC(e,t)}function $d(e,t){var n=RC(e[0],e[1]),a=RC(e[0],t),i=RC(t,e[1]);return a+i<=n+GA}function Wd(e,t){return!!AC(e.map(Hd),qd(t))}function Hd(e){return e=e.map(qd),e.pop(),e}function qd(e){return[e[0]*eC,e[1]*eC]}function Yd(e,t,n){var a=zx(e,t-GA,n).concat(t);return function(e){return a.map(function(t){return[e,t]})}}function Vd(e,t,n){var a=zx(e,t-GA,n).concat(t);return function(e){return a.map(function(t){return[t,e]})}}function Gd(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return zx(oC(p/i)*i,d,i).map(y).concat(zx(oC(f/o)*o,m,o).map(b)).concat(zx(oC(l/n)*n,s,n).filter(function(e){return tC(e%i)>GA}).map(g)).concat(zx(oC(u/a)*a,c,a).filter(function(e){return tC(e%o)>GA}).map(h))}var n=10,a=n,i=90,o=360,r=2.5,s,l,d,p,c,u,m,f,g,h,y,b;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[y(p).concat(b(m).slice(1),y(d).reverse().slice(1),b(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(p=+t[0][0],d=+t[1][0],f=+t[0][1],m=+t[1][1],p>d&&(t=p,p=d,d=t),f>m&&(t=f,f=m,m=t),e.precision(r)):[[p,f],[d,m]]},e.extentMinor=function(t){return arguments.length?(l=+t[0][0],s=+t[1][0],u=+t[0][1],c=+t[1][1],l>s&&(t=l,l=s,s=t),u>c&&(t=u,u=c,c=t),e.precision(r)):[[l,u],[s,c]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(i=+t[0],o=+t[1],e):[i,o]},e.stepMinor=function(t){return arguments.length?(n=+t[0],a=+t[1],e):[n,a]},e.precision=function(t){return arguments.length?(r=+t,g=Yd(u,c,90),h=Vd(l,s,r),y=Yd(f,m,90),b=Vd(p,d,r),e):r},e.extentMajor([[-180,-90+GA],[180,90-GA]]).extentMinor([[-180,-80-GA],[180,80+GA]])}function Zd(){zC.point=Xd}function Xd(e,t){zC.point=Kd,iw=rw=e,ow=sw=t}function Kd(e,t){BC.add(sw*e-rw*t),rw=e,sw=t}function Jd(){Kd(iw,ow)}function Qd(e,t){qC+=e,YC+=t,++VC}function ep(){ew.point=tp}function tp(e,t){ew.point=np,Qd(pw=e,uw=t)}function np(e,t){var n=e-pw,a=t-uw,i=cC(n*n+a*a);GC+=i*(pw+e)/2,ZC+=i*(uw+t)/2,XC+=i,Qd(pw=e,uw=t)}function ap(){ew.point=Qd}function ip(){ew.point=rp}function op(){sp(lw,dw)}function rp(e,t){ew.point=sp,Qd(lw=pw=e,dw=uw=t)}function sp(e,t){var n=e-pw,a=t-uw,i=cC(n*n+a*a);GC+=i*(pw+e)/2,ZC+=i*(uw+t)/2,XC+=i,i=uw*e-pw*t,KC+=i*(pw+e),JC+=i*(uw+t),QC+=3*i,Qd(pw=e,uw=t)}function lp(e){this._context=e}function dp(e,t){fw.point=pp,_w=hw=e,yw=bw=t}function pp(e,t){hw-=e,bw-=t,mw.add(cC(hw*hw+bw*bw)),hw=e,bw=t}function cp(){this._string=[]}function up(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function mp(e){return 1<e.length}function fp(e,t){return(0>(e=e.x)[0]?e[1]-XA-GA:XA-e[1])-(0>(t=t.x)[0]?t[1]-XA-GA:XA-t[1])}function gp(e,t,n,a){var i=dC(e-n),o,r;return tC(i)>GA?nC((dC(t)*(r=iC(a))*dC(n)-dC(a)*(o=iC(t))*dC(e))/(o*r*i)):(t+a)/2}function _p(e){return function(t){var n=new yp;for(var a in e)n[a]=e[a];return n.stream=t,n}}function yp(){}function hp(e,t,n){var a=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=o&&e.clipExtent(null),gC(n,e.stream(HC));var r=HC.result(),s=S(a/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),l=+t[0][0]+(a-s*(r[1][0]+r[0][0]))/2,d=+t[0][1]+(i-s*(r[1][1]+r[0][1]))/2;return null!=o&&e.clipExtent(o),e.scale(150*s).translate([l,d])}function bp(e,t,n){return hp(e,[[0,0],t],n)}function xp(e){return _p({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function vp(e,t){function n(i,o,r,s,l,d,u,f,g,_,y,h,x,v){var S=u-i,T=f-o,k=S*S+T*T;if(k>4*t&&x--){var E=s+_,a=l+y,b=d+h,c=cC(E*E+a*a+b*b),m=gd(b/=c),N=tC(tC(b)-1)<GA||tC(r-g)<GA?(r+g)/2:aC(a,E),A=e(N,m),p=A[0],C=A[1],w=p-i,O=C-o,D=T*w-S*O;(D*D/k>t||0.3<tC((S*w+T*O)/k-0.5)||s*_+l*y+d*h<Ew)&&(n(i,o,r,s,l,d,p,C,N,E/=c,a/=c,b,x,v),v.point(p,C),n(p,C,N,E,a,b,u,f,g,_,y,h,x,v))}}return function(t){function a(n,a){n=e(n,a),t.point(n[0],n[1])}function i(){h=NaN,p.point=o,t.lineStart()}function o(a,i){var o=vd([a,i]),r=e(a,i);n(h,b,y,x,v,S,h=r[0],b=r[1],y=a,x=o[0],v=o[1],S=o[2],kw,t),t.point(h,b)}function r(){p.point=a,t.lineEnd()}function s(){i(),p.point=l,p.lineEnd=d}function l(e,t){o(c=e,t),u=h,m=b,f=x,g=v,_=S,p.point=o}function d(){n(h,b,y,x,v,S,u,m,c,f,g,_,kw,t),p.lineEnd=r,r()}var p={point:a,lineStart:i,lineEnd:r,polygonStart:function(){t.polygonStart(),p.lineStart=s},polygonEnd:function(){t.polygonEnd(),p.lineStart=i}},c,u,m,f,g,_,y,h,b,x,v,S;return p}}function Sp(e){return Tp(function(){return e})()}function Tp(e){function t(e){return e=k(e[0]*eC,e[1]*eC),[e[0]*r+v,S-e[1]*r]}function n(e){return e=k.invert((e[0]-v)/r,(S-e[1])/r),e&&[e[0]*QA,e[1]*QA]}function a(e,t){return e=_(e,t),[e[0]*r+v,S-e[1]*r]}function i(){k=bC(T=Ad(c,u,m),_);var e=_(d,p);return v=s-e[0]*r,S=l+e[1]*r,o()}function o(){return C=w=null,t}var r=150,s=480,l=250,d=0,p=0,c=0,u=0,m=0,f=null,g=Sw,y=null,h=MC,b=0.5,x=Nw(a,b),_,v,S,T,k,E,N,A,C,w;return t.stream=function(e){return C&&w===e?C:C=Lw(g(T,x(h(w=e))))},t.clipAngle=function(e){return arguments.length?(g=+e?Tw(f=e*eC,6*eC):(f=null,Sw),o()):f*QA},t.clipExtent=function(e){return arguments.length?(h=null==e?(y=E=N=A=null,MC):Md(y=+e[0][0],E=+e[0][1],N=+e[1][0],A=+e[1][1]),o()):null==y?null:[[y,E],[N,A]]},t.scale=function(e){return arguments.length?(r=+e,i()):r},t.translate=function(e){return arguments.length?(s=+e[0],l=+e[1],i()):[s,l]},t.center=function(e){return arguments.length?(d=e[0]%360*eC,p=e[1]%360*eC,i()):[d*QA,p*QA]},t.rotate=function(e){return arguments.length?(c=e[0]%360*eC,u=e[1]%360*eC,m=2<e.length?e[2]%360*eC:0,i()):[c*QA,u*QA,m*QA]},t.precision=function(e){return arguments.length?(x=Nw(a,b=e*e),o()):cC(b)},t.fitExtent=function(e,n){return hp(t,e,n)},t.fitSize=function(e,n){return bp(t,e,n)},function(){return _=e.apply(this,arguments),t.invert=_.invert&&n,i()}}function kp(e){var t=0,n=ZA/3,a=Tp(e),i=a(t,n);return i.parallels=function(e){return arguments.length?a(t=e[0]*eC,n=e[1]*eC):[t*QA,n*QA]},i}function Ep(e){function t(e,t){return[e*n,dC(t)/n]}var n=iC(e);return t.invert=function(e,t){return[e/n,gd(t*n)]},t}function Np(e,t){function a(e,t){var a=cC(n-2*o*dC(t))/o;return[a*dC(e*=o),s-a*iC(e)]}var i=dC(e),o=(i+dC(t))/2;if(tC(o)<GA)return Ep(e);var n=1+i*(2*o-i),s=cC(n)/o;return a.invert=function(e,t){var a=s-t;return[aC(e,tC(a))/o*pC(a),gd((n-(e*e+a*a)*o*o)/(2*o))]},a}function Lp(e){var t=e.length;return{point:function(n,a){for(var o=-1;++o<t;)e[o].point(n,a)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Ap(e){return function(t,n){var a=iC(t),i=iC(n),o=e(a*i);return[o*i*dC(t),o*dC(n)]}}function Cp(e){return function(t,n){var a=cC(t*t+n*n),i=e(a),o=dC(i),r=iC(i);return[aC(t*o,a*r),gd(a&&n*o/a)]}}function wp(e,t){return[e,sC(uC((XA+t)/2))]}function Op(e){function t(){var a=ZA*i(),o=n(xC(n.rotate()).invert([0,0]));return r(null==s?[[o[0]-a,o[1]-a],[o[0]+a,o[1]+a]]:e===wp?[[N(o[0]-a,s),l],[S(o[0]+a,d),p]]:[[s,N(o[1]-a,l)],[d,S(o[1]+a,p)]])}var n=Sp(e),a=n.center,i=n.scale,o=n.translate,r=n.clipExtent,s=null,l,d,p;return n.scale=function(e){return arguments.length?(i(e),t()):i()},n.translate=function(e){return arguments.length?(o(e),t()):o()},n.center=function(e){return arguments.length?(a(e),t()):a()},n.clipExtent=function(e){return arguments.length?(null==e?s=l=d=p=null:(s=+e[0][0],l=+e[0][1],d=+e[1][0],p=+e[1][1]),t()):null==s?null:[[s,l],[d,p]]},t()}function Dp(e){return uC((XA+e)/2)}function Pp(e,t){function a(e,t){0<n?t<-XA+GA&&(t=-XA+GA):t>XA-GA&&(t=XA-GA);var a=n/lC(Dp(t),o);return[a*dC(o*e),n-a*iC(o*e)]}var i=iC(e),o=e===t?dC(e):sC(i/iC(t))/sC(Dp(t)/Dp(e)),n=i*lC(Dp(e),o)/o;return o?(a.invert=function(e,t){var a=n-t,i=pC(o)*cC(e*e+a*a);return[aC(e,tC(a))/o*pC(a),2*nC(lC(n/i,1/o))-XA]},a):wp}function Rp(e,t){return[e,t]}function Ip(e,t){function a(e,t){var a=n-t,i=o*e;return[a*dC(i),n-a*iC(i)]}var i=iC(e),o=e===t?dC(e):(i-iC(t))/(t-e),n=i/o+e;return tC(o)<GA?Rp:(a.invert=function(e,t){var a=n-t;return[aC(e,tC(a))/o*pC(a),n-pC(o)*cC(e*e+a*a)]},a)}function Mp(e,t){var n=iC(t),a=iC(e)*n;return[n*dC(e)/a,dC(t)/a]}function Fp(e,t){return[iC(t)*dC(e),dC(t)]}function Bp(e,t){var n=iC(t),a=1+iC(e)*n;return[n*dC(e)/a,dC(t)/a]}function zp(e,t){return[sC(uC((XA+t)/2)),-e]}function jp(e,t){return function n(){var a=t();return a.type=e,a.path=xw().projection(a),a.copy=a.copy||function(){var e=n();return Pw.forEach(function(t){a.hasOwnProperty(t)&&e[t](a[t]())}),e.path.pointRadius(a.path.pointRadius()),e},a}}function Up(e,t){return 1<arguments.length?(Rw[e]=jp(e,t),this):Rw.hasOwnProperty(e)?Rw[e]:null}function $p(e){return e&&e.path||Dw}function Wp(e){sn.call(this,null,e)}function Hp(e){sn.call(this,null,e)}function qp(e){sn.call(this,null,e)}function Yp(e,t){var n=function(n){return e(t(n))};return n.context=function(t){return e.context(t),n},n}function Vp(e){sn.call(this,[],e),this.generator=Gd()}function Gp(e){sn.call(this,null,e),this.modified(!0)}function Zp(e,t){var n=Jp(t.fit);t.extent?e.fitExtent(t.extent,n):t.size?e.fitSize(t.size,n):0}function Xp(e){var t=Up((e||"mercator").toLowerCase());return t||Wy("Unrecognized projection type: "+e),t()}function Kp(e,t,n){ph(e[t])&&e[t](n)}function Jp(e){return e=dh(e),1===e.length?e[0]:{type:HA,features:e.reduce(function(e,t){return t&&t.type===HA?e.push.apply(e,t.features):qy(t)?e.push.apply(e,t):e.push(t),e},[])}}function Qp(e,t,n,a){if(isNaN(t)||isNaN(n))return e;var o=e._root,r={data:a},s=e._x0,l=e._y0,p=e._x1,c=e._y1,u,m,f,g,_,y,h,b,i;if(!o)return e._root=r,e;for(;o.length;)if((y=t>=(m=(s+p)/2))?s=m:p=m,(h=n>=(f=(l+c)/2))?l=f:c=f,(u=o,!(o=o[b=h<<1|y])))return u[b]=r,e;if(g=+e._x.call(null,o.data),_=+e._y.call(null,o.data),t===g&&n===_)return r.next=o,u?u[b]=r:e._root=r,e;do u=u?u[b]=[,,,,]:e._root=[,,,,],(y=t>=(m=(s+p)/2))?s=m:p=m,(h=n>=(f=(l+c)/2))?l=f:c=f;while((b=h<<1|y)==(i=(_>=f)<<1|g>=m));return u[i]=o,u[b]=r,e}function ec(e){return e[0]}function tc(e){return e[1]}function nc(e,t,n){var a=new ac(null==t?ec:t,null==n?tc:n,NaN,NaN,NaN,NaN);return null==e?a:a.addAll(e)}function ac(e,t,n,a,i,o){this._x=e,this._y=t,this._x0=n,this._y0=a,this._x1=i,this._y1=o,this._root=void 0}function ic(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}function oc(e){return e.x+e.vx}function rc(e){return e.y+e.vy}function sc(e){return e.index}function lc(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function dc(){return Kw||(eO(pc),Kw=Qw.now()+Jw)}function pc(){Kw=0}function cc(){this._call=this._time=this._next=null}function uc(e,n,a){var i=new cc;return i.restart(e,n,a),i}function mc(){dc(),++Yw;for(var n=tO,t;n;)0<=(t=Kw-n._time)&&n._call.call(null,t),n=n._next;--Yw}function fc(){Kw=(Xw=Qw.now())+Jw,Yw=Vw=0;try{mc()}finally{Yw=0,_c(),Kw=0}}function gc(){var e=Qw.now(),t=e-Xw;t>Zw&&(Jw-=t,Xw=e)}function _c(){for(var e=tO,t=Infinity,n,a;e;)e._call?(t>e._time&&(t=e._time),n=e,e=e._next):(a=e._next,e._next=null,e=n?n._next=a:tO=a);nO=n,yc(t)}function yc(e){if(!Yw){Vw&&(Vw=clearTimeout(Vw));var t=e-Kw;24<t?(e<Infinity&&(Vw=setTimeout(fc,e-Qw.now()-Jw)),Gw&&(Gw=clearInterval(Gw))):(!Gw&&(Xw=Qw.now(),Gw=setInterval(gc,Zw)),Yw=1,eO(fc))}}function hc(e){return e.x}function bc(e){return e.y}function xc(e){sn.call(this,null,e)}function vc(e,t){return function(){e.touch(t).run()}}function Sc(e,t){var n=aO(e),a=!1,i=n.stop,o=n.restart;return n.stopped=function(){return a},n.restart=function(){return a=!1,o()},n.stop=function(){return a=!0,i()},Tc(n,t,!0).on("end",function(){a=!0})}function Tc(e,t,a,o){var r=dh(t.forces),s,i,n,l;for(s=0,i=rO.length;s<i;++s)n=rO[s],n!==oO&&t.modified(n)&&e[n](t[n]);for(s=0,i=r.length;s<i;++s)l=oO+s,n=a||t.modified(oO,s)?Ec(r[s]):o&&kc(r[s],o)?e.force(l):null,n&&e.force(l,n);for(i=e.numForces||0;s<i;++s)e.force(oO+s,null);return e.numForces=r.length,e}function kc(e,t){var n,a;for(n in e)if(ph(a=e[n])&&t.modified(m(a)))return 1;return 0}function Ec(e){var t,n;for(n in iO.hasOwnProperty(e.force)||Wy("Unrecognized force: "+e.force),t=iO[e.force](),e)ph(t[n])&&Nc(t[n],e[n],e);return t}function Nc(e,t,n){e(ph(t)?function(e){return t(e,n)}:t)}function Lc(e,t){return e.parent===t.parent?1:2}function Ac(e){return e.reduce(Cc,0)/e.length}function Cc(e,t){return e+t.x}function wc(e){return 1+e.reduce(Oc,0)}function Oc(e,t){return N(e,t.y)}function Dc(e){for(var t;t=e.children;)e=t[0];return e}function Pc(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Rc(e){var t=0,n=e.children,a=n&&n.length;if(!a)t=1;else for(;0<=--a;)t+=n[a].value;e.value=t}function Ic(e,t){if(e===t)return e;var n=e.ancestors(),a=t.ancestors(),i=null;for(e=n.pop(),t=a.pop();e===t;)i=e,e=n.pop(),t=a.pop();return i}function Mc(e,t){var a=new jc(e),o=+e.value&&(a.value=e.value),r=[a],s,l,d,p,i;for(null==t&&(t=Fc);s=r.pop();)if(o&&(s.value=+s.data.value),(d=t(s.data))&&(i=d.length))for(s.children=Array(i),p=i-1;0<=p;--p)r.push(l=s.children[p]=new jc(d[p])),l.parent=s,l.depth=s.depth+1;return a.eachBefore(zc)}function Fc(e){return e.children}function Bc(e){e.data=e.data.data}function zc(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function jc(e){this.data=e,this.depth=this.height=0,this.parent=null}function Uc(e){for(var n=e.length,a,t;n;)t=0|Math.random()*n--,a=e[n],e[n]=e[t],e[t]=a;return e}function $c(e,t){var n,a;if(qc(t,e))return[t];for(n=0;n<e.length;++n)if(Wc(t,e[n])&&qc(Gc(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(a=n+1;a<e.length;++a)if(Wc(Gc(e[n],e[a]),t)&&Wc(Gc(e[n],t),e[a])&&Wc(Gc(e[a],t),e[n])&&qc(Zc(e[n],e[a],t),e))return[e[n],e[a],t];throw new Error}function Wc(e,t){var n=e.r-t.r,a=t.x-e.x,i=t.y-e.y;return 0>n||n*n<a*a+i*i}function Hc(e,t){var n=e.r-t.r+1e-6,a=t.x-e.x,i=t.y-e.y;return 0<n&&n*n>a*a+i*i}function qc(e,t){for(var n=0;n<t.length;++n)if(!Hc(e,t[n]))return!1;return!0}function Yc(e){switch(e.length){case 1:return Vc(e[0]);case 2:return Gc(e[0],e[1]);case 3:return Zc(e[0],e[1],e[2]);}}function Vc(e){return{x:e.x,y:e.y,r:e.r}}function Gc(e,t){var n=e.x,a=e.y,i=e.r,o=t.x,r=t.y,s=t.r,d=o-n,p=r-a,c=s-i,m=u(d*d+p*p);return{x:(n+o+d/m*c)/2,y:(a+r+p/m*c)/2,r:(m+i+s)/2}}function Zc(e,t,n){var a=e.x,i=e.y,o=e.r,s=t.x,l=t.y,d=t.r,p=n.x,c=n.y,m=n.r,f=a-s,g=a-p,_=i-l,y=i-c,h=d-o,b=m-o,x=a*a+i*i-o*o,v=x-s*s-l*l+d*d,S=x-p*p-c*c+m*m,T=g*_-f*y,k=(_*S-y*v)/(2*T)-a,E=(y*h-_*b)/T,N=(g*v-f*S)/(2*T)-i,w=(f*b-g*h)/T,O=E*E+w*w-1,A=2*(o+k*E+N*w),D=k*k+N*N-o*o,C=-(O?(A+u(A*A-4*O*D))/(2*O):D/A);return{x:a+k+E*C,y:i+N+w*C,r:C}}function Xc(e,t,n){var a=e.x,i=e.y,o=t.r+n.r,r=e.r+n.r,s=t.x-a,l=t.y-i,d=s*s+l*l;if(d){var p=0.5+((r*=r)-(o*=o))/(2*d),c=u(N(0,2*o*(r+d)-(r-=d)*r-o*o))/(2*d);n.x=a+p*s+c*l,n.y=i+p*l-c*s}else n.x=a+r,n.y=i}function Kc(e,t){var n=t.x-e.x,a=t.y-e.y,i=e.r+t.r;return i*i-1e-6>n*n+a*a}function Jc(e){var t=e._,n=e.next._,a=t.r+n.r,i=(t.x*n.r+n.x*t.r)/a,o=(t.y*n.r+n.y*t.r)/a;return i*i+o*o}function Qc(e){this._=e,this.next=null,this.previous=null}function eu(e){if(!(r=e.length))return 0;var t,a,o,r,n,s,l,i,d,p,c;if(t=e[0],t.x=0,t.y=0,!(1<r))return t.r;if(a=e[1],t.x=-a.r,a.x=t.r,a.y=0,!(2<r))return t.r+a.r;Xc(a,t,o=e[2]),t=new Qc(t),a=new Qc(a),o=new Qc(o),t.next=o.previous=a,a.next=t.previous=o,o.next=a.previous=t;pack:for(l=3;l<r;++l){Xc(t._,a._,o=e[l]),o=new Qc(o),i=a.next,d=t.previous,p=a._.r,c=t._.r;do if(p<=c){if(Kc(i._,o._)){a=i,t.next=a,a.previous=t,--l;continue pack}p+=i._.r,i=i.next}else{if(Kc(d._,o._)){t=d,t.next=a,a.previous=t,--l;continue pack}c+=d._.r,d=d.previous}while(i!==d.next);for(o.previous=t,o.next=a,t.next=a.previous=a=o,n=Jc(t);(o=o.next)!==a;)(s=Jc(o))<n&&(t=o,n=s);a=t.next}for(t=[a._],o=a;(o=o.next)!==a;)t.push(o._);for(o=uO(t),l=0;l<r;++l)t=e[l],t.x-=o.x,t.y-=o.y;return o.r}function tu(e){return null==e?null:nu(e)}function nu(e){if("function"!=typeof e)throw new Error;return e}function au(){return 0}function iu(e){return u(e.value)}function ou(e){return function(t){t.children||(t.r=N(0,+e(t)||0))}}function ru(t,a){return function(o){if(r=o.children){var s=r.length,n=t(o)*a||0,r,l,i;if(n)for(l=0;l<s;++l)r[l].r+=n;if(i=eu(r),n)for(l=0;l<s;++l)r[l].r-=n;o.r=i+n}}}function su(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function lu(e){return e.id}function du(e){return e.parentId}function pu(e,t){return e.parent===t.parent?1:2}function cu(e){var t=e.children;return t?t[0]:e.t}function uu(e){var t=e.children;return t?t[t.length-1]:e.t}function mu(e,t,n){var a=n/(t.i-e.i);t.c-=a,t.s+=n,e.c+=a,t.z+=n,t.m+=n}function fu(e){for(var t=0,n=0,a=e.children,o=a.length,i;0<=--o;)i=a[o],i.z+=t,i.m+=t,t+=i.s+(n+=i.c)}function gu(e,t,n){return e.a.parent===t.parent?e.a:n}function _u(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function yu(e){for(var t=new _u(e,0),a=[t],o,r,s,l,i;o=a.pop();)if(s=o._.children)for(o.children=Array(i=s.length),l=i-1;0<=l;--l)a.push(r=o.children[l]=new _u(s[l],l)),r.parent=o;return(t.parent=new _u(null,0)).children=[t],t}function hu(e,t,a,i,o,r){for(var s=[],l=t.children,d=0,p=0,c=l.length,n=t.value,u,m,f,g,_,y,h,b,x,v,S;d<c;){f=o-a,g=r-i;do _=l[p++].value;while(!_&&p<c);for(y=h=_,v=N(g/f,f/g)/(n*e),S=_*_*v,x=N(h/S,S/y);p<c;++p){if(_+=m=l[p].value,m<y&&(y=m),m>h&&(h=m),S=_*_*v,b=N(h/S,S/y),b>x){_-=m;break}x=b}s.push(u={value:_,dice:f<g,children:l.slice(d,p)}),u.dice?gO(u,a,i,o,n?i+=g*_/n:r):xO(u,a,i,n?a+=f*_/n:o,r),n-=_,d=p}return s}function bu(e){sn.call(this,null,e)}function xu(e){return e.values}function vu(e){sn.call(this,null,e)}function Su(e,t,a){for(var o=0,i=t.length,n;o<i;++o)n=t[o],n in a&&e[n](a[n])}function Tu(e,a,o){for(var r=e.data,t=0,i=a.length-1;t<i;++t)r[o[t]]=e[a[t]];r[o[i]]=e.children?e.children.length:0}function ku(e){vu.call(this,e)}function Eu(e){vu.call(this,e)}function Nu(e){sn.call(this,null,e)}function Lu(e){vu.call(this,e)}function Au(e){sn.call(this,{},e)}function Cu(e){var t;return e.parent&&(t=e.parent.data)&&null!=V(t)&&t}function wu(e){vu.call(this,e)}function Ou(e){return e[0]}function Du(e){return e[1]}function Pu(){this._=null}function Ru(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Iu(e,t){var n=t,a=t.R,i=n.U;i?i.L===n?i.L=a:i.R=a:e._=a,a.U=i,n.U=a,n.R=a.L,n.R&&(n.R.U=n),a.L=n}function Mu(e,t){var n=t,a=t.L,i=n.U;i?i.L===n?i.L=a:i.R=a:e._=a,a.U=i,n.U=a,n.L=a.R,n.L&&(n.L.U=n),a.R=n}function Fu(e){for(;e.L;)e=e.L;return e}function Bu(e,t,n,a){var i=[null,null],o=ZO.push(i)-1;return i.left=e,i.right=t,n&&ju(i,e,t,n),a&&ju(i,t,e,a),VO[e.index].halfedges.push(o),VO[t.index].halfedges.push(o),i}function zu(e,t,n){var a=[t,n];return a.left=e,a}function ju(e,t,n,a){e[0]||e[1]?e.left===n?e[1]=a:e[0]=a:(e[0]=a,e.left=t,e.right=n)}function Uu(e,t,n,i,o){var s=e[0],a=e[1],l=s[0],d=s[1],p=a[0],c=a[1],u=0,m=1,f=p-l,g=c-d,_;if(_=t-l,f||!(0<_)){if(_/=f,0>f){if(_<u)return;_<m&&(m=_)}else if(0<f){if(_>m)return;_>u&&(u=_)}if(_=i-l,f||!(0>_)){if(_/=f,0>f){if(_>m)return;_>u&&(u=_)}else if(0<f){if(_<u)return;_<m&&(m=_)}if(_=n-d,g||!(0<_)){if(_/=g,0>g){if(_<u)return;_<m&&(m=_)}else if(0<g){if(_>m)return;_>u&&(u=_)}if(_=o-d,g||!(0>_)){if(_/=g,0>g){if(_>m)return;_>u&&(u=_)}else if(0<g){if(_<u)return;_<m&&(m=_)}return 0<u||1>m?(0<u&&(e[0]=[l+u*f,d+u*g]),1>m&&(e[1]=[l+m*f,d+m*g]),!0):!0}}}}}function $u(e,t,n,a,i){var o=e[1];if(o)return!0;var r=e[0],s=e.left,l=e.right,d=s[0],p=s[1],c=l[0],u=l[1],m=(d+c)/2,f,g;if(u===p){if(m<t||m>=a)return;if(d>c){if(!r)r=[m,n];else if(r[1]>=i)return;o=[m,i]}else{if(!r)r=[m,i];else if(r[1]<n)return;o=[m,n]}}else if(f=(d-c)/(u-p),g=(p+u)/2-f*m,-1>f||1<f){if(d>c){if(!r)r=[(n-g)/f,n];else if(r[1]>=i)return;o=[(i-g)/f,i]}else{if(!r)r=[(i-g)/f,i];else if(r[1]<n)return;o=[(n-g)/f,n]}}else if(p<u){if(!r)r=[t,f*t+g];else if(r[0]>=a)return;o=[a,f*a+g]}else{if(!r)r=[a,f*a+g];else if(r[0]<t)return;o=[t,f*t+g]}return e[0]=r,e[1]=o,!0}function Wu(e,t,n,a){for(var o=ZO.length,i;o--;)$u(i=ZO[o],e,t,n,a)&&Uu(i,e,t,n,a)&&(T(i[0][0]-i[1][0])>WO||T(i[0][1]-i[1][1])>WO)||delete ZO[o]}function Hu(e){return VO[e.index]={site:e,halfedges:[]}}function qu(e,t){var n=e.site,a=t.left,i=t.right;return(n===i&&(i=a,a=n),i)?By(i[1]-a[1],i[0]-a[0]):(n===a?(a=t[1],i=t[0]):(a=t[0],i=t[1]),By(a[0]-i[0],i[1]-a[1]))}function Yu(e,t){return t[+(t.left!==e.site)]}function Vu(e,t){return t[+(t.left===e.site)]}function Gu(){for(var e=0,t=VO.length,n,a,i,o;e<t;++e)if((n=VO[e])&&(o=(a=n.halfedges).length)){var r=Array(o),s=Array(o);for(i=0;i<o;++i)r[i]=i,s[i]=qu(n,ZO[a[i]]);for(r.sort(function(e,t){return s[t]-s[e]}),i=0;i<o;++i)s[i]=a[r[i]];for(i=0;i<o;++i)a[i]=s[i]}}function Zu(e,t,n,a){var i=VO.length,o=!0,r,s,l,d,p,c,u,m,f,g,_,y;for(r=0;r<i;++r)if(s=VO[r]){for(l=s.site,p=s.halfedges,d=p.length;d--;)ZO[p[d]]||p.splice(d,1);for(d=0,c=p.length;d<c;)g=Vu(s,ZO[p[d]]),_=g[0],y=g[1],u=Yu(s,ZO[p[++d%c]]),m=u[0],f=u[1],(T(_-m)>WO||T(y-f)>WO)&&(p.splice(d,0,ZO.push(zu(l,g,T(_-e)<WO&&a-y>WO?[e,T(m-e)<WO?f:a]:T(y-a)<WO&&n-_>WO?[T(f-a)<WO?m:n,a]:T(_-n)<WO&&y-t>WO?[n,T(m-n)<WO?f:t]:T(y-t)<WO&&_-e>WO?[T(f-t)<WO?m:e,t]:null))-1),++c);c&&(o=!1)}if(o){var h=Infinity,b,x,v;for(r=0,o=null;r<i;++r)(s=VO[r])&&(l=s.site,b=l[0]-e,x=l[1]-t,v=b*b+x*x,v<h&&(h=v,o=s));if(o){var S=[e,t],k=[e,a],E=[n,a],N=[n,t];o.halfedges.push(ZO.push(zu(l=o.site,S,k))-1,ZO.push(zu(l,k,E))-1,ZO.push(zu(l,E,N))-1,ZO.push(zu(l,N,S))-1)}}for(r=0;r<i;++r)(s=VO[r])&&(s.halfedges.length||delete VO[r])}function Xu(){Ru(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ku(e){var t=e.P,n=e.N;if(t&&n){var a=t.site,i=e.site,o=n.site;if(a!==o){var r=i[0],s=i[1],l=a[0]-r,p=a[1]-s,c=o[0]-r,m=o[1]-s,f=2*(l*m-p*c);if(!(f>=-HO)){var d=l*l+p*p,g=c*c+m*m,_=(m*d-p*g)/f,h=(l*g-c*d)/f,y=UO.pop()||new Xu;y.arc=e,y.site=i,y.x=_+r,y.y=(y.cy=h+s)+u(_*_+h*h),e.circle=y;for(var b=null,x=GO._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(x.L)x=x.L;else{b=x.P;break}}else if(x.R)x=x.R;else{b=x;break}GO.insert(b,y),b||(qO=y)}}}}function Ju(e){var t=e.circle;t&&(!t.P&&(qO=t.N),GO.remove(t),UO.push(t),Ru(t),e.circle=null)}function Qu(){Ru(this),this.edge=this.site=this.circle=null}function em(e){var t=$O.pop()||new Qu;return t.site=e,t}function tm(e){Ju(e),YO.remove(e),$O.push(e),Ru(e)}function nm(e){var t=e.circle,n=t.x,a=t.cy,i=[n,a],o=e.P,r=e.N,s=[e];tm(e);for(var l=o;l.circle&&T(n-l.circle.x)<WO&&T(a-l.circle.cy)<WO;)o=l.P,s.unshift(l),tm(l),l=o;s.unshift(l),Ju(l);for(var d=r;d.circle&&T(n-d.circle.x)<WO&&T(a-d.circle.cy)<WO;)r=d.N,s.push(d),tm(d),d=r;s.push(d),Ju(d);var p=s.length,c;for(c=1;c<p;++c)d=s[c],l=s[c-1],ju(d.edge,l.site,d.site,i);l=s[0],d=s[p-1],d.edge=Bu(l.site,d.site,null,i),Ku(l),Ku(d)}function am(e){for(var t=e[0],n=e[1],a=YO._,i,o,r,s;a;)if(r=im(a,n)-t,r>WO)a=a.L;else if(s=t-om(a,n),s>WO){if(!a.R){i=a;break}a=a.R}else{r>-WO?(i=a.P,o=a):s>-WO?(i=a,o=a.N):i=o=a;break}Hu(e);var l=em(e);if(YO.insert(i,l),i||o){if(i===o)return Ju(i),o=em(i.site),YO.insert(l,o),l.edge=o.edge=Bu(i.site,l.site),Ku(i),void Ku(o);if(!o)return void(l.edge=Bu(i.site,l.site));Ju(i),Ju(o);var p=i.site,c=p[0],u=p[1],m=e[0]-c,f=e[1]-u,g=o.site,_=g[0]-c,y=g[1]-u,h=2*(m*y-f*_),d=m*m+f*f,b=_*_+y*y,x=[(y*d-f*b)/h+c,(m*b-_*d)/h+u];ju(o.edge,p,g,x),l.edge=Bu(p,e,null,x),o.edge=Bu(e,g,null,x),Ku(i),Ku(o)}}function im(e,t){var n=e.site,a=n[0],i=n[1],o=i-t;if(!o)return a;var r=e.P;if(!r)return-Infinity;n=r.site;var s=n[0],l=n[1],d=l-t;if(!d)return s;var p=s-a,c=1/o-1/d,m=p/d;return c?(-m+u(m*m-2*c*(p*p/(-2*d)-l+d/2+i-o/2)))/c+a:(a+s)/2}function om(e,t){var n=e.N;if(n)return im(n,t);var a=e.site;return a[1]===t?a[0]:Infinity}function rm(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function sm(e,t){return t[1]-e[1]||t[0]-e[0]}function lm(e,t){var n=e.sort(sm).pop(),a,i,o;for(ZO=[],VO=Array(e.length),YO=new Pu,GO=new Pu;;)if(o=qO,n&&(!o||n[1]<o.y||n[1]===o.y&&n[0]<o.x))(n[0]!==a||n[1]!==i)&&(am(n),a=n[0],i=n[1]),n=e.pop();else if(o)nm(o.arc);else break;if(Gu(),t){var r=+t[0][0],s=+t[0][1],l=+t[1][0],d=+t[1][1];Wu(r,s,l,d),Zu(r,s,l,d)}this.edges=ZO,this.cells=VO,YO=GO=ZO=VO=null}function dm(e){sn.call(this,null,e)}function pm(e,t,a,o){if(!t.sprite){var r=e.context,l=e.ratio;r.clearRect(0,0,(tD<<5)/l,cw/l);var d=0,p=0,u=0,f=a.length,n,g,_,y,i;for(--o;++o<f;){if(t=a[o],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/l)+"px "+t.font,n=r.measureText(t.text+"m").width*l,_=t.size<<1,t.rotate){var h=s(t.rotate*eD),b=c(t.rotate*eD),x=n*b,v=n*h,S=_*b,E=_*h;n=N(T(x+E),T(x-E))+31>>5<<5,_=~~N(T(v+S),T(v-S))}else n=n+31>>5<<5;if(_>u&&(u=_),d+n>=tD<<5&&(d=0,p+=u,u=0),p+_>=cw)break;r.translate((d+(n>>1))/l,(p+(_>>1))/l),t.rotate&&r.rotate(t.rotate*eD),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=n,t.height=_,t.xoff=d,t.yoff=p,t.x1=n>>1,t.y1=_>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,d+=n}for(var A=r.getImageData(0,0,(tD<<5)/l,cw/l).data,C=[];0<=--o;)if(t=a[o],t.hasText){for(n=t.width,g=n>>5,_=t.y1-t.y0,y=0;y<_*g;y++)C[y]=0;if(d=t.xoff,null==d)return;p=t.yoff;var w=0,O=-1;for(i=0;i<_;i++){for(y=0;y<n;y++){var D=g*i+(y>>5),k=A[(p+i)*(tD<<5)+(d+y)<<2]?1<<31-y%32:0;C[D]|=k,w|=k}w?O=i:(t.y0++,_--,i--,p++)}t.y1=t.y0+O,t.sprite=C.slice(0,(t.y1-t.y0)*g)}}}function cm(e,t,n){n>>=5;for(var a=e.sprite,o=e.width>>5,r=e.x-(o<<4),s=127&r,l=e.y1-e.y0,d=(e.y+e.y0)*n+(r>>5),p=0,c;p<l;p++){c=0;for(var u=0;u<=o;u++)if((c<<32-s|(u<o?(c=a[p*o+u])>>>s:0))&t[d+u])return!0;d+=n}return!1}function um(e,t){var n=e[0],a=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>a.x&&(a.x=t.x+t.x1),t.y+t.y1>a.y&&(a.y=t.y+t.y1)}function mm(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function fm(t){var n=t[0]/t[1];return function(e){return[n*(e*=.1)*c(e),e*s(e)]}}function gm(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function _m(){try{var e="undefined"!=typeof document&&document.createElement?document.createElement("canvas"):0;if(e&&e.getContext)return e;try{return new(_("canvas"))}catch(t){return new(_("canvas-prebuilt"))}}catch(t){Wy("Canvas unavailable. Run in browser or install node-canvas.")}}function ym(e){return"function"==typeof e?e:function(){return e}}function hm(e){sn.call(this,ch(),e)}function bm(e,t){for(var a=+Infinity,o=-Infinity,r=0,i=t.length,n;r<i;++r)n=e(t[r]),n<a&&(a=n),n>o&&(o=n);return[a,o]}function xm(e){return new Uint8Array(e)}function vm(e){return new Uint16Array(e)}function Sm(e){return new Uint32Array(e)}function Tm(){var e=8,a=[],t=Sm(0),o=Em(0,e),r=Em(0,e);return{data:function(){return a},seen:function(){return t=km(t,a.length)},add:function(e){for(var o=0,i=a.length,r=e.length,n;o<r;++o)n=e[o],n._index=i++,a.push(n)},remove:function(e,s){var l=a.length,n=Array(l-e),d=a,p,t,i;for(t=0;!s[t]&&t<l;++t)n[t]=a[t],d[t]=t;for(i=t;t<l;++t)p=a[t],s[t]?d[t]=-1:(d[t]=i,o[i]=o[t],r[i]=r[t],n[i]=p,p._index=i++),o[t]=0;return a=n,d},size:function(){return a.length},curr:function(){return o},prev:function(){return r},reset:function(e){r[e]=o[e]},all:function(){return 257>e?255:65537>e?65535:4294967295},set:function(e,t){o[e]|=t},clear:function(e,t){o[e]&=~t},resize:function(t,n){var a=o.length;(t>a||n>e)&&(e=N(n,e),o=Em(t,e,o),r=Em(t,e))}}}function km(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Em(e,t,n){var a=(257>t?xm:65537>t?vm:Sm)(e);return n&&a.set(n),a}function Nm(){var e=Sm(0),t=[],a=0;return{insert:function(n,o,r){if(!o.length)return[];var s=a,l=o.length,d=Array(l),p=Sm(l),c,u,m;for(m=0;m<l;++m)d[m]=n(o[m]),p[m]=m;if(d=Lm(d,p),s)c=t,u=e,t=Array(s+l),e=Sm(s+l),Am(r,c,u,s,d,p,l,t,e);else{if(0<r)for(m=0;m<l;++m)p[m]+=r;t=d,e=p}return a=s+l,{index:p,value:d}},remove:function(o,r){var s=a,n,l,i;for(l=0;!r[e[l]]&&l<s;++l);for(i=l;l<s;++l)r[n=e[l]]||(e[i]=n,t[i]=t[l],++i);a=s-o},bisect:function(e,i){var o;return i?o=i.length:(i=t,o=a),[Ix(i,e[0],0,o),Rx(i,e[1],0,o)]},reindex:function(t){for(var o=0,i=a;o<i;++o)e[o]=t[e[o]]},index:function(){return e},size:function(){return a}}}function Lm(e,t){return e.sort.call(t,function(t,n){var a=e[t],i=e[n];return a<i?-1:a>i?1:0}),Gx(e,t)}function Am(e,t,n,a,o,r,s,l,d){var p=0,c=0,u;for(u=0;p<a&&c<s;++u)t[p]<o[c]?(l[u]=t[p],d[u]=n[p++]):(l[u]=o[c],d[u]=r[c++]+e);for(;p<a;++p,++u)l[u]=t[p],d[u]=n[p];for(;c<s;++c,++u)l[u]=o[c],d[u]=r[c]+e}function Cm(e){sn.call(this,Tm(),e),this._indices=null,this._dims=null}function wm(e){sn.call(this,null,e)}function Om(e){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=e)}function Dm(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||Wy("Unrecognized data set: "+t),n[t]}function Pm(e,t){Q(t)||Wy("Second argument to changes must be a changeset.");var n=Dm(this,e);return n.modified=!0,this.pulse(n.input,t)}function Rm(e){var t=e.padding();return N(0,e._viewWidth+t.left+t.right)}function Im(e){var t=e.padding();return N(0,e._viewHeight+t.top+t.bottom)}function Mm(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Fm(e){var t=Mm(e);e._renderer.background(e._background),e._renderer.resize(Rm(e),Im(e),t),e._handler.origin(t)}function Bm(e,t,n){function a(e){var n=o,a;if(e)for(a=t;a;a=a.mark.group)if(a.mark.name===e){n=a;break}return n&&n.mark&&n.mark.interactive?n:{}}function i(e){if(!e)return n;Vy(e)&&(e=a(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var o=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:mh(e),item:mh(t||{}),group:a,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}function zm(e){e=gh({},e);var t=e.defaults;return t&&(qy(t.prevent)&&(t.prevent=Oh(t.prevent)),qy(t.allow)&&(t.allow=Oh(t.allow))),e}function jm(e,t){var n=e._eventConfig.defaults,a=n&&n.prevent,i=n&&n.allow;return!1===a||!0===i?!1:!0===a||!1===i||(a?a[t]:i?!i[t]:e.preventDefault())}function Um(e){return e.item}function $m(e){var t=e.item.mark.source;return t.source||t}function Wm(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Hm(e,t,n,a){var i=fD("div",{class:gD});i.appendChild(fD("span",{class:_D},n.name||n.signal)),t.appendChild(i);var o=qm;switch(n.input){case"checkbox":o=Ym;break;case"select":o=Vm;break;case"radio":o=Gm;break;case"range":o=Zm;}o(e,i,n,a)}function qm(e,t,n,a){var i=fD("input");for(var o in n)"signal"!=o&&"element"!=o&&i.setAttribute("input"==o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=a,t.appendChild(i),i.addEventListener("input",function(){e.update(i.value)}),e.elements=[i],e.set=function(e){i.value=e}}function Ym(e,t,n,a){var i={type:"checkbox",name:n.signal};a&&(i.checked=!0);var o=fD("input",i);t.appendChild(o),o.addEventListener("change",function(){e.update(o.checked)}),e.elements=[o],e.set=function(e){o.checked=!!e||null}}function Vm(e,t,a,n){var o=fD("select",{name:a.signal});a.options.forEach(function(e){var t={value:e};Xm(e,n)&&(t.selected=!0),o.appendChild(fD("option",t,e+""))}),t.appendChild(o),o.addEventListener("change",function(){e.update(a.options[o.selectedIndex])}),e.elements=[o],e.set=function(e){for(var t=0,i=a.options.length;t<i;++t)if(Xm(a.options[t],e))return void(o.selectedIndex=t)}}function Gm(e,t,n,a){var i=fD("span",{class:yD});t.appendChild(i),e.elements=n.options.map(function(t){var o=hD+n.signal+"-"+t,r={id:o,type:"radio",name:n.signal,value:t};Xm(t,a)&&(r.checked=!0);var s=fD("input",r);return s.addEventListener("change",function(){e.update(t)}),i.appendChild(s),i.appendChild(fD("label",{for:o},t+"")),s}),e.set=function(t){for(var a=e.elements,o=0,i=a.length;o<i;++o)Xm(a[o].value,t)&&(a[o].checked=!0)}}function Zm(e,t,n,a){function i(){d.textContent=l.value,e.update(+l.value)}a=a===void 0?(+n.max+ +n.min)/2:a;var o=n.min||S(0,+a)||0,r=n.max||N(100,+a)||100,s=n.step||vn(o,r,100),l=fD("input",{type:"range",name:n.signal,min:o,max:r,step:s});l.value=a;var d=fD("label",{},+a);t.appendChild(l),t.appendChild(d),l.addEventListener("input",i),l.addEventListener("change",i),e.elements=[l],e.set=function(e){l.value=e,d.textContent=e}}function Xm(e,t){return e===t||e+""==t+""}function Km(e,t){if("string"==typeof t)if("undefined"!=typeof document)t=document.querySelector(t);else return e.error("DOM document instance not found."),null;return t.innerHTML="",t}function Jm(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function Qm(e,t){Wy(e+" for \"outer\" push: "+w(t))}function ef(e){this.type=e}function tf(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[];}}/*
  The following expression parser is based on Esprima (http://esprima.org/).
  Original header comment and license for Esprima is included here:

  Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
  Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
  Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
  Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
  Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function nf(e,t){if(!e)throw new Error("ASSERT: "+t)}function af(e){return 48<=e&&57>=e}function of(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function rf(e){return 0<="01234567".indexOf(e)}function sf(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)}function lf(e){return 10===e||13===e||8232===e||8233===e}function df(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||92===e||128<=e&&iP.test(d(e))}function pf(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||48<=e&&57>=e||92===e||128<=e&&oP.test(d(e))}function cf(){for(var e;PP<RP&&(e=DP.charCodeAt(PP),sf(e)||lf(e));)++PP}function uf(e){var t=0,n,a,i;for(a="u"===e?4:2,n=0;n<a;++n)PP<RP&&of(DP[PP])?(i=DP[PP++],t=16*t+"0123456789abcdef".indexOf(i.toLowerCase())):Uf({},YD,nP);return d(t)}function mf(){var e,t,n,a;for(e=DP[PP],t=0,"}"===e&&Uf({},YD,nP);PP<RP&&(e=DP[PP++],!!of(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return((1114111<t||"}"!==e)&&Uf({},YD,nP),65535>=t)?d(t):(n=(t-65536>>10)+55296,a=(1023&t-65536)+56320,d(n,a))}function ff(){var e,t;for(e=DP.charCodeAt(PP++),t=d(e),92===e&&(117!==DP.charCodeAt(PP)&&Uf({},YD,nP),++PP,e=uf("u"),(!e||"\\"===e||!df(e.charCodeAt(0)))&&Uf({},YD,nP),t=e);PP<RP&&(e=DP.charCodeAt(PP),!!pf(e));)++PP,t+=d(e),92===e&&(t=t.substr(0,t.length-1),117!==DP.charCodeAt(PP)&&Uf({},YD,nP),++PP,e=uf("u"),(!e||"\\"===e||!pf(e.charCodeAt(0)))&&Uf({},YD,nP),t+=e);return t}function gf(){var e,t;for(e=PP++;PP<RP;){if(t=DP.charCodeAt(PP),92===t)return PP=e,ff();if(pf(t))++PP;else break}return DP.slice(e,PP)}function _f(){var e,t,n;return e=PP,t=92===DP.charCodeAt(PP)?ff():gf(),n=1===t.length?CD:rP.hasOwnProperty(t)?wD:"null"===t?OD:"true"===t||"false"===t?LD:CD,{type:n,value:t,start:e,end:PP}}function yf(){var e=PP,t=DP.charCodeAt(PP),n=DP[PP],a,i,o,r;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++PP,{type:PD,value:d(t),start:e,end:PP};default:if(a=DP.charCodeAt(PP+1),61===a)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return PP+=2,{type:PD,value:d(t)+d(a),start:e,end:PP};case 33:case 61:return PP+=2,61===DP.charCodeAt(PP)&&++PP,{type:PD,value:DP.slice(e,PP),start:e,end:PP};}}return(r=DP.substr(PP,4),">>>="===r)?(PP+=4,{type:PD,value:r,start:e,end:PP}):(o=r.substr(0,3),">>>"===o||"<<="===o||">>="===o)?(PP+=3,{type:PD,value:o,start:e,end:PP}):(i=o.substr(0,2),n===i[1]&&0<="+-<>&|".indexOf(n)||"=>"===i?(PP+=2,{type:PD,value:i,start:e,end:PP}):0<="<>=!+-*%&|^/".indexOf(n)?(++PP,{type:PD,value:n,start:e,end:PP}):void Uf({},YD,nP))}function hf(e){for(var t="";PP<RP&&!!of(DP[PP]);)t+=DP[PP++];return 0===t.length&&Uf({},YD,nP),df(DP.charCodeAt(PP))&&Uf({},YD,nP),{type:DD,value:parseInt("0x"+t,16),start:e,end:PP}}function bf(e){for(var t="0"+DP[PP++];PP<RP&&!!rf(DP[PP]);)t+=DP[PP++];return(df(DP.charCodeAt(PP))||af(DP.charCodeAt(PP)))&&Uf({},YD,nP),{type:DD,value:parseInt(t,8),octal:!0,start:e,end:PP}}function vf(){var e,t,n;if(n=DP[PP],nf(af(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=PP,e="","."!==n){if(e=DP[PP++],n=DP[PP],"0"===e){if("x"===n||"X"===n)return++PP,hf(t);if(rf(n))return bf(t);n&&af(n.charCodeAt(0))&&Uf({},YD,nP)}for(;af(DP.charCodeAt(PP));)e+=DP[PP++];n=DP[PP]}if("."===n){for(e+=DP[PP++];af(DP.charCodeAt(PP));)e+=DP[PP++];n=DP[PP]}if("e"===n||"E"===n)if(e+=DP[PP++],n=DP[PP],("+"===n||"-"===n)&&(e+=DP[PP++]),af(DP.charCodeAt(PP)))for(;af(DP.charCodeAt(PP));)e+=DP[PP++];else Uf({},YD,nP);return df(DP.charCodeAt(PP))&&Uf({},YD,nP),{type:DD,value:parseFloat(e),start:t,end:PP}}function Sf(){var e="",t=!1,n,a,i,o;for(n=DP[PP],nf("'"===n||"\""===n,"String literal must starts with a quote"),a=PP,++PP;PP<RP;)if(i=DP[PP++],i===n){n="";break}else if("\\"===i)i=DP[PP++],i&&lf(i.charCodeAt(0))?"\r"===i&&"\n"===DP[PP]&&++PP:"u"===i||"x"===i?"{"===DP[PP]?(++PP,e+=mf()):e+=uf(i):"n"===i?e+="\n":"r"===i?e+="\r":"t"===i?e+="\t":"b"===i?e+="\b":"f"===i?e+="\f":"v"===i?e+="\x0B":rf(i)?(o="01234567".indexOf(i),0!==o&&(t=!0),PP<RP&&rf(DP[PP])&&(t=!0,o=8*o+"01234567".indexOf(DP[PP++]),0<="0123".indexOf(i)&&PP<RP&&rf(DP[PP])&&(o=8*o+"01234567".indexOf(DP[PP++]))),e+=d(o)):e+=i;else if(lf(i.charCodeAt(0)))break;else e+=i;return""!==n&&Uf({},YD,nP),{type:RD,value:e,octal:t,start:a,end:PP}}function Tf(e,t){var n=e;0<=t.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return 1114111>=parseInt(t,16)?"x":void Uf({},JD)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(t){Uf({},JD)}try{return new RegExp(e,t)}catch(e){return null}}function kf(){var e,t,n,a,i;for(e=DP[PP],nf("/"===e,"Regular expression literal must start with a slash"),t=DP[PP++],n=!1,a=!1;PP<RP;)if(e=DP[PP++],t+=e,"\\"===e)e=DP[PP++],lf(e.charCodeAt(0))&&Uf({},QD),t+=e;else if(lf(e.charCodeAt(0)))Uf({},QD);else if(n)"]"===e&&(n=!1);else if("/"===e){a=!0;break}else"["===e&&(n=!0);return a||Uf({},QD),i=t.substr(1,t.length-2),{value:i,literal:t}}function Ef(){var e,t,n;for(t="",n="";PP<RP&&(e=DP[PP],!!pf(e.charCodeAt(0)));)++PP,"\\"===e&&PP<RP?Uf({},YD,nP):(n+=e,t+=e);return 0<=n.search(/[^gimuy]/g)&&Uf({},JD,n),{value:n,literal:t}}function Nf(){var e,t,n,a;return IP=null,cf(),e=PP,t=kf(),n=Ef(),a=Tf(t.value,n.value),{literal:t.literal+n.literal,value:a,regex:{pattern:t.value,flags:n.value},start:e,end:PP}}function Lf(e){return e.type===CD||e.type===wD||e.type===LD||e.type===OD}function Af(){var e;return(cf(),PP>=RP)?{type:AD,start:PP,end:PP}:(e=DP.charCodeAt(PP),df(e)?_f():40===e||41===e||59===e?yf():39===e||34===e?Sf():46===e?af(DP.charCodeAt(PP+1))?vf():yf():af(e)?vf():yf())}function Cf(){var e;return e=IP,PP=e.end,IP=Af(),PP=e.end,e}function wf(){var e;e=PP,IP=Af(),PP=e}function Of(e){var t=new ef(ID);return t.elements=e,t}function Df(e,t,n){var a=new ef("||"===e||"&&"===e?UD:MD);return a.operator=e,a.left=t,a.right=n,a}function Pf(e,t){var n=new ef(FD);return n.callee=e,n.arguments=t,n}function Rf(e,t,n){var a=new ef(BD);return a.test=e,a.consequent=t,a.alternate=n,a}function If(e){var t=new ef(zD);return t.name=e,t}function Mf(e){var t=new ef(jD);return t.value=e.value,t.raw=DP.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Ff(e,t,n){var a=new ef($D);return a.computed="["===e,a.object=t,a.property=n,a.computed||(n.member=!0),a}function Bf(e){var t=new ef(WD);return t.properties=e,t}function zf(e,t,n){var a=new ef(HD);return a.key=t,a.value=n,a.kind=e,a}function jf(e,t){var n=new ef(qD);return n.operator=e,n.argument=t,n.prefix=!0,n}function Uf(e,t){var n=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,function(e,t){return nf(t<n.length,"Message reference must be in range"),n[t]}),i;throw i=new Error(a),i.index=PP,i.description=a,i}function $f(e){e.type===AD&&Uf(e,KD),e.type===DD&&Uf(e,VD),e.type===RD&&Uf(e,GD),e.type===CD&&Uf(e,ZD),e.type===wD&&Uf(e,XD),Uf(e,YD,e.value)}function Wf(e){var t=Cf();(t.type!==PD||t.value!==e)&&$f(t)}function Hf(e){return IP.type===PD&&IP.value===e}function qf(e){return IP.type===wD&&IP.value===e}function Yf(){var e=[];for(PP=IP.start,Wf("[");!Hf("]");)Hf(",")?(Cf(),e.push(null)):(e.push(sg()),Hf("]")||Wf(","));return Cf(),Of(e)}function Vf(){var e;return PP=IP.start,e=Cf(),e.type===RD||e.type===DD?(e.octal&&Uf(e,eP),Mf(e)):If(e.value)}function Gf(){var e,t,n,a;return PP=IP.start,e=IP,e.type===CD?(n=Vf(),Wf(":"),a=sg(),zf("init",n,a)):e.type===AD||e.type===PD?void $f(e):(t=Vf(),Wf(":"),a=sg(),zf("init",t,a))}function Zf(){var e=[],t={},n=String,a,i,o;for(PP=IP.start,Wf("{");!Hf("}");)a=Gf(),i=a.key.type===zD?a.key.name:n(a.key.value),o="$"+i,Object.prototype.hasOwnProperty.call(t,o)?Uf({},tP):t[o]=!0,e.push(a),Hf("}")||Wf(",");return Wf("}"),Bf(e)}function Xf(){var e;return Wf("("),e=lg(),Wf(")"),e}function Kf(){var e,t,n;if(Hf("("))return Xf();if(Hf("["))return Yf();if(Hf("{"))return Zf();if(e=IP.type,PP=IP.start,e===CD||sP[IP.value])n=If(Cf().value);else if(e===RD||e===DD)IP.octal&&Uf(IP,eP),n=Mf(Cf());else if(e===wD)throw new Error(aP);else e===LD?(t=Cf(),t.value="true"===t.value,n=Mf(t)):e===OD?(t=Cf(),t.value=null,n=Mf(t)):Hf("/")||Hf("/=")?(n=Mf(Nf()),wf()):$f(Cf());return n}function Jf(){var e=[];if(Wf("("),!Hf(")"))for(;PP<RP&&(e.push(sg()),!Hf(")"));)Wf(",");return Wf(")"),e}function Qf(){var e;return PP=IP.start,e=Cf(),Lf(e)||$f(e),If(e.value)}function eg(){return Wf("."),Qf()}function tg(){var e;return Wf("["),e=lg(),Wf("]"),e}function ng(){var e,t,n;for(e=Kf();;)if(Hf("."))n=eg(),e=Ff(".",e,n);else if(Hf("("))t=Jf(),e=Pf(e,t);else if(Hf("["))n=tg(),e=Ff("[",e,n);else break;return e}function ag(){var e=ng();if(IP.type===PD&&(Hf("++")||Hf("--")))throw new Error(aP);return e}function ig(){var e,t;if(IP.type!==PD&&IP.type!==wD)t=ag();else if(Hf("++")||Hf("--"))throw new Error(aP);else if(Hf("+")||Hf("-")||Hf("~")||Hf("!"))e=Cf(),t=ig(),t=jf(e.value,t);else if(qf("delete")||qf("void")||qf("typeof"))throw new Error(aP);else t=ag();return t}function og(e){var t=0;if(e.type!==PD&&e.type!==wD)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break;default:}return t}function rg(){var e,t,n,a,o,r,s,l,d,p;if(e=IP,d=ig(),a=IP,o=og(a),0===o)return d;for(a.prec=o,Cf(),t=[e,IP],s=ig(),r=[d,a,s];0<(o=og(IP));){for(;2<r.length&&o<=r[r.length-2].prec;)s=r.pop(),l=r.pop().value,d=r.pop(),t.pop(),n=Df(l,d,s),r.push(n);a=Cf(),a.prec=o,r.push(a),t.push(IP),n=ig(),r.push(n)}for(p=r.length-1,n=r[p],t.pop();1<p;)t.pop(),n=Df(r[p-1].value,r[p-2],n),p-=2;return n}function sg(){var e,t,n;return e=rg(),Hf("?")&&(Cf(),t=sg(),Wf(":"),n=sg(),e=Rf(e,t,n)),e}function lg(){var e=sg();if(Hf(","))throw new Error(aP);return e}function dg(t,n,a){var i=t+":"+a,o=cP[i];return o&&o[0]===n||(cP[i]=o=[n,n(a)]),o[1]}function pg(e,t){return dg("timeFormat",ex,t)(e)}function cg(e,t,n){return uP.setMonth(e),uP.setDate(t),pg(uP,n)}function ug(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function mg(e,t){var n;return ph(e)?e:Vy(e)?(n=t.scales[e])&&n.value:void 0}function fg(e,t,n){var a=yP+n;if(!t.hasOwnProperty(a))try{t[a]=e.scaleRef(n)}catch(e){}}function gg(e,t,n,a){if(t[0].type===fP)fg(n,a,t[0].value);else if(t[0].type===gP)for(e in n.scales)fg(n,a,e)}function _g(e){return function(t,n,a){var i=mg(t,(a||this).context);return i&&i.path[e](n)}}function yg(e){var t=this.context.data[e];return t?t.values.value:[]}function hg(e,t,n,a){t[0].type!==fP&&Wy("First argument to data functions must be a string literal.");var i=t[0].value,o=hP+i;a.hasOwnProperty(o)||(a[o]=n.getData(i).tuplesRef())}function bg(e){return e.data}function xg(e,t){var n=yg.call(t,e);return n.root&&n.root.lookup||SP}function vg(e,t){return e===t||e!==e&&t!==t||qy(e)&&qy(t)&&e.length===t.length&&Sg(e,t)}function Sg(e,t){for(var a=0,i=e.length;a<i;++a)if(!vg(e[a],t[a]))return!1;return!0}function Tg(e){return function(t){for(var n in e)if(!vg(t[n],e[n]))return!1;return!0}}function kg(e,t){for(var a=t.fields,o=t.values,r=t.getter||(t.getter=[]),s=a.length,n=0,i;n<s;++n)if(r[n]=r[n]||Gy(a[n]),i=r[n](e),vh(i)&&(i=lh(i)),vh(o[n])&&(o[n]=lh(o[n])),t[kP+a[n]]){if(vh(o[n][0])&&(o[n]=o[n].map(lh)),!TP(i,o[n],!0,!1))return!1;}else if(i!==o[n])return!1;return!0}function Eg(e,t){for(var a=t.intervals,o=a.length,n=0,i,r,s;n<o;++n){if(r=a[n].extent,i=a[n].getter||(a[n].getter=Gy(a[n].field)),s=i(e),!r||r[0]===r[1])return!1;if(vh(s)&&(s=lh(s)),vh(r[0])&&(r=a[n].extent=r.map(lh)),Sh(r[0])&&!TP(s,r))return!1;if(Vy(r[0])&&0>r.indexOf(s))return!1}return!0}function Ng(e,t,a,o){for(var r=this.context.data[e],s=r?r.values.value:[],l=r?r[LP]&&r[LP].value:void 0,d=a===EP,p=s.length,n=0,i,c,u,m,f;n<p;++n)if(i=s[n],l&&d){if(c=c||{},u=c[m=i.unit]||0,-1===u)continue;if(f=o(t,i),c[m]=f?-1:++u,f&&1===l.size)return!0;if(!f&&u===l.get(m).count)return!1}else if(f=o(t,i),d^f)return f;return p&&d}function Lg(e,t,n){return Ng.call(this,e,t,n,kg)}function Ag(e,t,n,a){t[0].type!==fP&&Wy("First argument to indata must be a string literal.");var i=t[0].value,o=2<=t.length&&t[t.length-1].value,r="unit",s=_P+r;o!==EP||a.hasOwnProperty(s)||(a[s]=n.getData(i).indataRef(n,r)),hg(e,t,n,a)}function Cg(e,t,a,o){var r=this.context.data[e],s=r?r.values.value:[],l=r?r[LP]&&r[LP].value:void 0,d=s[0],p=0,i,n,c,u,m;if(d){for(i=t?d.encodings.length:d.fields.length;p<i;++p)if(t&&d.encodings[p]===t||a&&d.fields[p]===a){n=p,u=d[kP+d.fields[p]];break}return l&&1===l.size&&(o=NP),l&&o===EP?(m=s.reduce(function(e,t){var a=e[t.unit]||(e[t.unit]=[]);return a.push({unit:t.unit,value:t.values[n]}),e},{}),c=Object.keys(m).map(function(e){return{unit:e,value:u?Og(m[e],NP):wg(m[e],NP)}})):c=s.map(function(e){return{unit:e.unit,value:e.values[n]}}),u?Og(c,o):wg(c,o)}}function wg(e,t){for(var a={},o=0,r={},s=[],l=0,i=e.length,n,d,p,c;l<i;++l)n=e[l],d=n.unit,c=n.value,a[d]||(a[d]=++o),(p=r[c])||(r[c]=p={value:c,units:{},count:0}),p.units[d]||(p.units[d]=++p.count);for(c in r)p=r[c],t===EP&&p.count!==o||s.push(p.value);return s.length?s:void 0}function Og(e,t){for(var a=t===EP?Pg:Dg,o=0,i=e.length,n,r,s,l;o<i;++o)n=e[o].value,vh(n[0])&&(n=n.map(lh)),s=n[0],l=n[1],s>l&&(l=n[0],s=n[1]),r=r?a(r,s,l):[s,l];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function Dg(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function Pg(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function Rg(e,t,n){return 1===arguments.length?AP[e]:(AP[e]=t,n&&(OP[e]=n),FP&&(FP.functions[e]=wP+e),this)}function Ig(e){return e===jP?zP:e||zP}function Mg(e,t){var n=e.merge?Fg:e.stream?Bg:e.type?zg:Wy("Invalid stream specification: "+w(e));return n(e,t)}function Fg(e,t){var n=e.merge.map(function(e){return Mg(e,t)}),a=jg({merge:n},e,t);return t.addStream(a).id}function Bg(e,t){var n=Mg(e.stream,t),a=jg({stream:n},e,t);return t.addStream(a).id}function zg(e,t){var n=t.event(Ig(e.source),e.type),a=jg({stream:n},e,t);return 1===Object.keys(a).length?n:t.addStream(a).id}function jg(e,t,n){var a=t.between;return a&&(2!==a.length&&Wy("Stream \"between\" parameter must have 2 entries: "+w(t)),e.between=[Mg(a[0],n),Mg(a[1],n)]),a=t.filter?dh(t.filter):[],(t.marktype||t.markname||t.markrole)&&a.push(Ug(t.marktype,t.markname,t.markrole)),t.source===jP&&a.push("inScope(event.item)"),a.length&&(e.filter=BP("("+a.join(")&&(")+")").$expr),null!=(a=t.throttle)&&(e.throttle=+a),null!=(a=t.debounce)&&(e.debounce=+a),t.consume&&(e.consume=!0),e}function Ug(e,t,n){var a="event.item";return a+(e&&"*"!==e?"&&"+a+".mark.marktype==='"+e+"'":"")+(n?"&&"+a+".mark.role==='"+n+"'":"")+(t?"&&"+a+".mark.name==='"+t+"'":"")}function $g(e){return AI.hasOwnProperty(e)}function Wg(e,t,a,i,o){for(var r=0,s=e.length,n;t<s;++t){if(n=e[t],!r&&n===a)return t;o&&0<=o.indexOf(n)?--r:i&&0<=i.indexOf(n)&&++r}return t}function Hg(e){for(var t=[],a=0,o=e.length,n=0;n<o;)n=Wg(e,n,GP,WP+qP,HP+YP),t.push(e.substring(a,n).trim()),a=++n;if(0===t.length)throw"Empty event selector: "+e;return t}function qg(e){return"["===e[0]?Yg(e):Vg(e)}function Yg(e){var t=e.length,n=1,a,i;if(n=Wg(e,n,HP,WP,HP),n===t)throw"Empty between selector: "+e;if(a=Hg(e.substring(1,n)),2!==a.length)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==XP)throw"Expected '>' after between selector: "+e;return(a=a.map(qg),i=qg(e.slice(1).trim()),i.between)?{between:a,stream:i}:(i.between=a,i)}function Vg(e){var t={source:LI},a=[],o=[0,0],r=0,s=0,l=e.length,d=0,i,p;if(e[l-1]===YP){if(d=e.lastIndexOf(qP),0<=d){try{o=Gg(e.substring(d+1,l-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,d).trim(),l=e.length}else throw"Unmatched right brace: "+e;d=0}if(!l)throw e;if(e[0]===ZP&&(r=++d),i=Wg(e,d,VP),i<l&&(a.push(e.substring(s,i).trim()),s=d=++i),d=Wg(e,d,WP),d===l)a.push(e.substring(s,l).trim());else if(a.push(e.substring(s,d).trim()),p=[],s=++d,s===l)throw"Unmatched left bracket: "+e;for(;d<l;){if(d=Wg(e,d,HP),d===l)throw"Unmatched left bracket: "+e;if(p.push(e.substring(s,d).trim()),d<l-1&&e[++d]!==WP)throw"Expected left bracket: "+e;s=++d}if(!(l=a.length)||GT.test(a[l-1]))throw"Invalid event selector: "+e;return 1<l?(t.type=a[1],r?t.markname=a[0].slice(1):$g(a[0])?t.marktype=a[0]:t.source=a[0]):t.type=a[0],"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1)),null!=p&&(t.filter=p),o[0]&&(t.throttle=o[0]),o[1]&&(t.debounce=o[1]),t}function Gg(e){var t=e.split(GP);if(!e.length||2<t.length)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}function Zg(e,t,n,a){this.id=-1,this.type=e,this.value=t,this.params=n,a&&(this.parent=a)}function Xg(e,t,n,a){return new Zg(e,t,n,a)}function Kg(e,t){return Xg("operator",e,t)}function Jg(e){var t={$ref:e.id};return 0>e.id&&(e.refs=e.refs||[]).push(t),t}function Qg(e,t){return t?{$field:e,$name:t}:{$field:e}}function e_(e,t){return{$compare:e,$order:t}}function t_(e){return{$key:e}}function n_(e){return Yy(e)?(e.order===aR?"-":"+")+a_(e.op,e.field):""}function a_(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function i_(e){return e&&e.signal}function o_(e,t){return null==e?t:e}function r_(e){return function(t,n,a){return Xg(e,n,t||void 0,a)}}function s_(e){return PR.hasOwnProperty(e)}function l_(e){return"quantile"===e}function d_(e,t){var n=e.type||"linear";DR.hasOwnProperty(n)||Wy("Unrecognized scale type: "+w(n)),t.addScale(e.name,{type:n,domain:void 0})}function p_(e,t){var n=t.getScale(e.name).params,a;for(a in n.domain=f_(e.domain,e,t),null!=e.range&&(n.range=E_(e,t,n)),null!=e.interpolate&&k_(e.interpolate,n),null!=e.nice&&T_(e.nice,n),e)n.hasOwnProperty(a)||"name"===a||(n[a]=c_(e[a],t))}function c_(e,t){return Yy(e)?e.signal?t.signalRef(e.signal):Wy("Unsupported object: "+w(e)):e}function u_(e,t){return e.signal?t.signalRef(e.signal):e.map(function(e){return c_(e,t)})}function m_(e){Wy("Can not find data set: "+w(e))}function f_(e,t,n){return e?e.signal?n.signalRef(e.signal):(qy(e)?g_:e.fields?y_:__)(e,t,n):void((null!=t.domainMin||null!=t.domainMax)&&Wy("No scale domain defined for domainMin/domainMax to override."))}function g_(e,t,n){return e.map(function(e){return c_(e,n)})}function __(e,t,n){var a=n.getData(e.data);return a||m_(e.data),s_(t.type)?a.valuesRef(n,e.field,x_(e.sort,!1)):l_(t.type)?a.domainRef(n,e.field):a.extentRef(n,e.field)}function y_(e,t,n){var a=e.data,i=e.fields.reduce(function(e,t){return t=Vy(t)?{data:a,field:t}:qy(t)||t.signal?h_(t,n):t,e.push(t),e},[]);return(s_(t.type)?b_:l_(t.type)?v_:S_)(e,n,i)}function h_(e,t){var n="_:vega:_"+wR++,a=sR({});return qy(e)?a.value={$ingest:e}:e.signal&&t.signalRef("setdata("+w(n)+","+e.signal+")"),t.addDataPipeline(n,[a,NR({})]),{data:n,field:"data"}}function b_(e,t,n){var i,o,a,r;return i=n.map(function(e){var n=t.getData(e.data);return n||m_(e.data),n.countsRef(t,e.field)}),o=t.add(iR({groupby:nR,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:i})),a=t.add(sR({pulse:Jg(o)})),r=t.add(CR({field:nR,sort:t.sortRef(x_(e.sort,!0)),pulse:Jg(a)})),Jg(r)}function x_(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?Wy("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&Wy("Multiple domain scales support op count only."):Wy("No field provided for sort aggregate op: "+e.op):Yy(e)?e.field="key":e={field:"key"}),e}function v_(e,t,n){var a=n.map(function(e){var n=t.getData(e.data);return n||m_(e.data),n.domainRef(t,e.field)});return Jg(t.add(yR({values:a})))}function S_(e,t,n){var a=n.map(function(e){var n=t.getData(e.data);return n||m_(e.data),n.extentRef(t,e.field)});return Jg(t.add(_R({extents:a})))}function T_(e,t){t.nice=Yy(e)?{interval:c_(e.interval),step:c_(e.step)}:c_(e)}function k_(e,t){t.interpolate=c_(e.type||e),null!=e.gamma&&(t.interpolateGamma=c_(e.gamma))}function E_(e,t,n){var a=e.range,i=t.config.range;if(a.signal)return t.signalRef(a.signal);if(Vy(a)){if(i&&i.hasOwnProperty(a))return e=gh({},e,{range:i[a]}),E_(e,t,n);"width"===a?a=[0,{signal:"width"}]:"height"===a?a=s_(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Wy("Unrecognized scale range value: "+w(a))}else{if(a.scheme)return n.scheme=c_(a.scheme,t),a.extent&&(n.schemeExtent=u_(a.extent,t)),void(a.count&&(n.schemeCount=c_(a.count,t)));if(a.step)return void(n.rangeStep=c_(a.step,t));if(s_(e.type)&&!qy(a))return f_(a,e,t);qy(a)||Wy("Unsupported range type: "+w(a))}return a.map(function(e){return c_(e,t)})}function N_(e,t){return qy(e)?e.map(function(e){return N_(e,t)}):Yy(e)?e.signal?t.signalRef(e.signal):Wy("Unsupported parameter object: "+w(e)):e}function L_(e,t,n,a){var i,o,r;if(e.signal)i="datum",r=eI(e.signal,t,n,a);else if(e.group||e.parent){for(o=N(1,e.level||1),i="item";0<o--;)i+=".mark.group";e.parent?(r=e.parent,i+=".datum"):r=e.group}else e.datum?(i="datum",r=e.datum):Wy("Invalid field reference: "+w(e));return e.signal||(Vy(r)?(a[r]=1,r=Hy(r).map(w).join("][")):r=L_(r,t,n,a)),i+"["+r+"]"}function A_(e,t){if(!Vy(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}function C_(e,t,n,a){if(Vy(e))i=yP+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=w(i);else{for(var i in t.scales)n[yP+i]=t.scaleRef(i);i=w(yP)+"+"+(e.signal?"("+eI(e.signal,t,n,a)+")":tI(e,t,n,a))}return"_["+i+"]"}function w_(e,t,n,a){var i={},o="var o=item,datum=o.datum,$;",r,s,l;for(r in e)s=e[r],qy(s)?o+=sI(r,s,a,n,i):(l=oI(r,s,a,n,i),o+=rI("o",r,l));return o+=JR(e,t),o+="return 1;",{$expr:o,$fields:Object.keys(i),$output:Object.keys(e)}}function O_(e){return Yy(e)?e:{value:e}}function D_(e,t,n){return null==n?0:(e[t]=Yy(n)&&!qy(n)?n:{value:n},1)}function P_(e,t,n){for(var a in t)n&&n.hasOwnProperty(a)||(e[a]=gh(e[a]||{},t[a]));return e}function R_(e,t,n,a,i,o){var r,s;for(s in o=o||{},o.encoders={$encode:r={}},e=I_(e,t,n,a,i.config),e)r[s]=w_(e[s],t,o,i);return o}function I_(e,t,n,a,i){var o={},r,s,l;for(r in("legend"==n||0===(n+"").indexOf("axis"))&&(n=null),l=n===dI?i.group:n===lI?gh({},i.mark,i[t]):null,l)s=M_(r,e)||("fill"===r||"stroke"===r)&&(M_("fill",e)||M_("stroke",e)),s||(o[r]={value:l[r]});return dh(a).forEach(function(t){var n=i.style&&i.style[t];for(var a in n)M_(a,e)||(o[a]={value:n[a]})}),e=gh({},e),e.enter=gh(o,e.enter),e}function M_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function F_(e,t,a){var o={},r,s,i;for(s=0,i=e.params.length;s<i;++s)r=e.params[s],o[r.name]=B_(r,t,a);return o}function B_(e,t,n){var a=e.type,i=t[e.name];if("index"===a)return j_(e,t,n);return void 0===i?void(e.required&&Wy("Missing required "+w(t.type)+" parameter: "+w(e.name))):"param"===a?U_(e,t,n):"projection"===a?n.projectionRef(t[e.name]):e.array&&!i_(i)?i.map(function(t){return z_(e,t,n)}):z_(e,i,n)}function z_(e,t,n){var a=e.type;if(i_(t))return Y_(a)?Wy("Expression references can not be signals."):V_(a)?n.fieldRef(t):G_(a)?n.compareRef(t):n.signalRef(t.signal);var i=e.expr||V_(a);return i&&W_(t)?BP(t.expr,n):i&&H_(t)?Qg(t.field):Y_(a)?BP(t,n):q_(a)?Jg(n.getData(t).values):V_(a)?Qg(t):G_(a)?n.compareRef(t):t}function j_(e,t,n){return Vy(t.from)||Wy("Lookup \"from\" parameter must be a string literal."),n.getData(t.from).lookupRef(n,t.key)}function U_(e,t,n){var a=t[e.name];return e.array?(qy(a)||Wy("Expected an array of sub-parameters. Instead: "+w(a)),a.map(function(t){return $_(e,t,n)})):$_(e,a,n)}function $_(e,t,a){var o,r,s,l,i;for(l=0,i=e.params.length;l<i;++l){for(s in r=e.params[l],r.key)if(r.key[s]!==t[s]){r=null;break}if(r)break}return r||Wy("Unsupported parameter: "+w(t)),o=gh(F_(r,t,a),r.key),Jg(a.add(bR(o)))}function W_(e){return e&&e.expr}function H_(e){return e&&e.field}function q_(e){return"data"===e}function Y_(e){return"expr"===e}function V_(e){return"field"===e}function G_(e){return"compare"===e}function Z_(e,t,n,a,i){this.scope=e,this.input=t,this.output=n,this.values=a,this.aggregate=i,this.index={}}function X_(e){return Vy(e)?e:null}function K_(e,t,a){var o=a_(a.op,a.field),r;if(t.ops){for(var s=0,i=t.as.length;s<i;++s)if(t.as[s]===o)return;}else t.ops=["count"],t.fields=[null],t.as=["count"];a.op&&(t.ops.push((r=a.op.signal)?e.signalRef(r):a.op),t.fields.push(e.fieldRef(a.field)),t.as.push(o))}function J_(e,t,n,a,i,o,r){var s=t[n]||(t[n]={}),l=n_(o),d=X_(i),p,c;if(null!=d&&(e=t.scope,d+=l?"|"+l:"",p=s[d]),!p){var u=o?{field:nR,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Jg(t.output)};l&&(u.sort=e.sortRef(o)),c=e.add(Xg(a,void 0,u)),r&&(t.index[i]=c),p=Jg(c),null!=d&&(s[d]=p)}return p}function Q_(e,t,n){var a=ty(t,n[1].encode,"fontSize",qR);if(e.size)return{$expr:"Math.max(Math.ceil(Math.sqrt(_.scale(datum))),"+a+")"};var i=ty(t,n[0].encode,"size");return N(p(u(i)),a)}function ey(e){var t={},n=D_(t,"fill",e.fillColor)+D_(t,"stroke",e.strokeColor)+D_(t,"strokeWidth",e.strokeWidth)+D_(t,"strokeDash",e.strokeDash)+D_(t,"cornerRadius",e.cornerRadius);return n?t:void 0}function ty(e,t,n,a){var i=t&&(t.update&&t.update[n]||t.enter&&t.enter[n]);return+(i?i.value:a&&(i=e.config.style[a])&&i[n])}function ny(e,t,n,a){var i=e.text,o=e.orient||t.orient,r=e.anchor||t.anchor,s=o===MR||o===IR?-1:1,l=o===IR||o===FR,d={group:l?"width":"height"},p={},c,u,m,f,g,_;return p.enter=c={opacity:{value:0}},D_(c,"fill",t.color),D_(c,"font",t.font),D_(c,"fontSize",t.fontSize),D_(c,"fontWeight",t.fontWeight),p.exit={opacity:{value:0}},p.update=u={opacity:{value:1},text:Yy(i)?i:{value:i+""},offset:O_((null==e.offset?t.offset:e.offset)||0)},"start"===r?(g=0,_="left"):"end"===r?(g=1,_="right"):(g=0.5,_="center"),m={field:d,mult:g},f=0>s?{value:0}:l?{field:{group:"height"}}:{field:{group:"width"}},l?(u.x=m,u.y=f,u.angle={value:0},u.baseline={value:o===IR?"bottom":"top"}):(u.x=f,u.y=m,u.angle={value:90*s},u.baseline={value:"bottom"}),u.align={value:_},u.limit={field:d},D_(u,"angle",t.angle),D_(u,"baseline",t.baseline),D_(u,"limit",t.limit),mI(_I,uI,e.style||VR,null,a,p,n)}function ay(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(EI(e,t))}),e.on&&e.on.forEach(function(n){DI(n,t,e.name)}),t.addDataPipeline(e.name,iy(e,t,n))}function iy(e,a,o){var r=[],s=null,l=!1,d=!1,p,c,i,n,t;for(e.values?r.push(s=oy({$ingest:e.values,$format:e.format})):e.url?r.push(s=oy({$request:e.url,$format:e.format})):e.source&&(s=p=dh(e.source).map(function(e){return Jg(a.getData(e).output)}),r.push(null)),c=0,i=o.length;c<i;++c)n=o[c],t=n.metadata,s||t.source||r.push(s=oy()),r.push(n),t.generates&&(d=!0),t.modifies&&!d&&(l=!0),t.source?s=n:t.changes&&(s=null);return p&&(i=p.length-1,r[0]=TR({derive:l,pulse:i?p:p[0]}),(l||i)&&r.splice(1,0,oy())),s||r.push(oy()),r.push(NR({})),r}function oy(e){var t=sR({},e);return t.metadata={source:!0},t}function ry(e,t){return{scale:e.scale,range:t}}function sy(e,t,n){return{signal:"datum.index===0 ? "+e+" : datum.index===1 ? "+t+" : "+n}}function ly(e,t){var n=t.config,a,i,o,r,s;return t.background=e.background||n.background,t.eventConfig=n.events,s=Jg(t.root=t.add(Kg())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",kD(e.padding,n)),t.addSignal("autosize",TD(e.autosize,n)),dh(e.signals).forEach(function(e){HI[e.name]||ND(e,t)}),i=t.add(sR()),o=P_({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),o=t.add(pR(R_(o,fI,dI,e.style,t,{pulse:Jg(i)}))),r=t.add(AR({layout:t.objectProperty(e.layout),legendMargin:n.legendMargin,autosize:t.signalRef("autosize"),mark:s,pulse:Jg(o)})),t.operators.pop(),t.pushState(Jg(o),Jg(r),null),WI(e,t,!0),t.operators.push(r),a=t.add(rR({mark:s,pulse:Jg(r)})),a=t.add(kR({pulse:Jg(a)})),a=t.add(NR({pulse:Jg(a)})),t.addData("root",new Z_(t,i,i,a)),t}function dy(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function py(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function cy(e){return(qy(e)?uy:my)(e)}function uy(e){for(var t="[",a=0,i=e.length,n;a<i;++a)n=e[a],t+=(0<a?",":"")+(Yy(n)?n.signal||cy(n):w(n));return t+"]"}function my(e){var t="{",n=0,a,i;for(a in e)i=e[a],t+=(1<++n?",":"")+w(a)+":"+(Yy(i)?i.signal||cy(i):w(i));return t+"}"}function fy(){return{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:XI},area:{fill:XI},image:null,line:{stroke:XI,strokeWidth:ZI},path:{stroke:XI},rect:{fill:XI},rule:{stroke:KI},shape:{stroke:XI},symbol:{fill:XI,size:64},text:{fill:KI,font:VI,fontSize:11},style:{"guide-label":{fill:KI,font:VI,fontSize:10},"guide-title":{fill:KI,font:VI,fontSize:11,fontWeight:"bold"},"group-title":{fill:KI,font:VI,fontSize:13,fontWeight:"bold"},point:{size:GI,strokeWidth:ZI,shape:"circle"},circle:{size:GI,strokeWidth:ZI},square:{size:GI,strokeWidth:ZI,shape:"square"},cell:{fill:"transparent",stroke:QI}},axis:{minExtent:0,maxExtent:200,bandPosition:0.5,domain:!0,domainWidth:1,domainColor:JI,grid:!1,gridWidth:1,gridColor:QI,gridDash:[],gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:JI,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:2},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,entryPadding:5,titlePadding:5,gradientWidth:100,gradientHeight:20,gradientStrokeColor:QI,gradientStrokeWidth:0,gradientLabelBaseline:"top",gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelOffset:8,labelLimit:160,symbolType:"circle",symbolSize:100,symbolFillColor:"transparent",symbolStrokeColor:JI,symbolStrokeWidth:1.5,titleAlign:"left",titleBaseline:"top",titleLimit:180},title:{orient:"top",anchor:"middle",offset:2},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[0.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[0.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function gy(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var a=Function.apply(null,e.concat(t));return n&&n.functions?a.bind(n.functions):a}function _y(e,t){return gy(["_"],e,t)}function yy(e,t){return gy(["datum","_"],e,t)}function hy(e,t){return gy(["event"],e,t)}function by(e,t){return gy(["_","event"],e,t)}function xy(e,t){return gy(["item","_"],e,t)}function vy(e,t,n){n=n||{};var a,i;for(a in e)i=e[a],i&&i.$expr&&i.$params&&vy(i.$params,t,n),n[a]=qy(i)?i.map(function(e){return Sy(e,t)}):Sy(i,t);return n}function Sy(e,t){if(!e||!Yy(e))return e;for(var a=0,i=eM.length,n;a<i;++a)if(n=eM[a],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function Ty(e){return(e+"").toLowerCase()}function ky(e){return"operator"===Ty(e)}function Ey(e){return"collect"===Ty(e)}function Ny(e,t){var n,a;e.params&&(!(n=t.get(e.id))&&Wy("Invalid operator id: "+e.id),a=vy(e.params,t),t.dataflow.connect(n,n.parameters(a)))}function Ly(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Ay(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function Cy(e,t){var n=e.autosize(),a=e.padding();return t-(n&&n.contains===lM?a.left+a.right:0)}function wy(e,t){var n=e.autosize(),a=e.padding();return t-(n&&n.contains===lM?a.top+a.bottom:0)}function Oy(e){function t(){e._autosize=e._resize=1}var n=e._signals,a=n.width,i=n.height,o=n.padding;e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=Cy(e,n.size),t()},{size:a}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=wy(e,n.size),t()},{size:i});var r=e.add(null,t,{pad:o});e._resizeWidth.rank=a.rank+1,e._resizeHeight.rank=i.rank+1,r.rank=o.rank+1}function Dy(e,t){return t.modified&&qy(t.input.value)&&e.indexOf("_:vega:_")}function Py(e,t){return!("parent"===e||t instanceof Nx.Proxy)}function Ry(e,t){var n=this;t=t||{},on.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||QT.Canvas,n._scenegraph=new bo;var a=n._scenegraph.root;n._renderer=null,n._redraw=!0,n._handler=new To().scene(a),n._eventListeners=[],n._preventDefault=!1;var i=sM(n,e,t.functions);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:gh({},e)}}),i.root&&i.root.set(a),a.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(a.items)),n._background=i.background||null,n._eventConfig=zm(i.eventConfig),n._width=n.width(),n._height=n.height(),n._viewWidth=Cy(n,n._width),n._viewHeight=wy(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Oy(n),cD(n)}function Iy(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:Wy("Unrecognized signal name: "+w(t))}var My=Math.E,Fy=Math.asin,By=Math.atan2,zy=Number.MAX_VALUE,jy=Math.SQRT2,Uy=Math.LN10,$y=function(e,t,n){return e.fields=t||[],e.fname=n,e},Wy=function(e){throw Error(e)},Hy=function(e){function t(){a.push(n+e.substring(s,i)),n="",s=i+1}var a=[],o=null,r=0,l=e.length,n="",s,i,d;for(e+="",s=i=0;i<l;++i)if(d=e[i],"\\"===d)n+=e.substring(s,i),s=++i;else if(d===o)t(),o=null,r=-1;else if(o)continue;else s===r&&"\""===d?(s=i+1,o=d):s===r&&"'"===d?(s=i+1,o=d):"."!==d||r?"["===d?(i>s&&t(),r=s=i+1):"]"==d&&(r||Wy("Access path missing open bracket: "+e),0<r&&t(),r=0,s=i+1):i>s?t():s=i+1;return r&&Wy("Access path missing closing bracket: "+e),o&&Wy("Access path missing closing quote: "+e),i>s&&(i++,t()),a},qy=Array.isArray,Yy=function(e){return e===Object(e)},Vy=function(e){return"string"==typeof e},Gy=function(e,t){var n=Hy(e),a="return _["+n.map(w).join("][")+"];";return $y(Function("_",a),[e=1===n.length?n[0]:e],t||e)},Zy=[],Xy=Gy("id"),id=$y(function(e){return e},Zy,"identity"),Ky=$y(function(){return 0},Zy,"zero"),Jy=$y(function(){return 1},Zy,"one"),Qy=$y(function(){return!0},Zy,"true"),eh=$y(function(){return!1},Zy,"false"),th=0,nh=1,ah=2,ih=3,oh=4,rh=function(e){var t=e||th;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=nh&&k("error","ERROR",arguments),this},warn:function(){return t>=ah&&k("warn","WARN",arguments),this},info:function(){return t>=ih&&k("log","INFO",arguments),this},debug:function(){return t>=oh&&k("log","DEBUG",arguments),this}}},sh=function(e){return e[e.length-1]},lh=function(e){return null==e||""===e?null:+e},dh=function(e){return null==e?[]:qy(e)?e:[e]},ph=function(e){return"function"==typeof e},uh=function(e,a){var o=[],r=(e=dh(e)).map(function(e,t){return null==e?null:(o.push(t),ph(e)?e:Hy(e).map(w).join("]["))}),s=o.length-1,n=dh(a),l="var u,v;return ",p,i,c,f,u,g,d,t,_;if(0>s)return null;for(i=0;i<=s;++i)p=o[i],c=r[p],ph(c)?(g="f"+p,f="(u=this."+g+"(a))",u="(v=this."+g+"(b))",(d=d||{})[g]=c):(f="(u=a["+c+"])",u="(v=b["+c+"])"),g="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"===n[p]?(_=-1,t=1):(_=1,t=-1),l+="("+f+"<"+u+"||u==null)&&v!=null?"+t+":(u>v||v==null)&&u!=null?"+_+":"+g+"!==u&&v===v?"+t+":v!==v&&u===u?"+_+(p<s?":":":0");return c=Function("a","b",l+";"),d&&(c=c.bind(d)),e=e.reduce(function(e,t){return ph(t)?(m(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),$y(c,Object.keys(e))},mh=function(e){return ph(e)?e:function(){return e}},fh=function(t,e){function n(){e(i),a=i=null}var a,i;return function(o){i=o,a&&clearTimeout(a),a=setTimeout(n,t)}},gh=function(e){for(var t=1,n=arguments.length,a,i;t<n;++t)for(i in a=arguments[t],a)e[i]=a[i];return e},_h=function(e,t){var o=-1,i=e.length,n,a,r,s,l;if(null==t){for(;++o<i;)if(a=e[o],null!=a&&a>=a){n=r=a;break}for(s=l=o;++o<i;)a=e[o],null!=a&&(n>a&&(n=a,s=o),r<a&&(r=a,l=o))}else{for(;++o<i;)if(a=t(e[o],o,e),null!=a&&a>=a){n=r=a;break}for(s=l=o;++o<i;)a=t(e[o],o,e),null!=a&&(n>a&&(n=a,s=o),r<a&&(r=a,l=o))}return[s,l]},yh={},hh=function(e){function t(e){return n.hasOwnProperty(e)&&n[e]!==yh}var n={},a,i;return a={size:0,empty:0,object:n,has:t,get:function(e){return t(e)?n[e]:void 0},set:function(e,i){return t(e)||(++a.size,n[e]===yh&&--a.empty),n[e]=i,this},delete:function(e){return t(e)&&(--a.size,++a.empty,n[e]=yh),this},clear:function(){a.size=a.empty=0,a.object=n={}},test:function(e){return arguments.length?(i=e,a):i},clean:function(){var e={},t=0,o,r;for(o in n)r=n[o],r===yh||i&&i(r)||(e[o]=r,++t);a.size=t,a.empty=0,a.object=n=e}},e&&Object.keys(e).forEach(function(t){a.set(t,e[t])}),a},bh=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},xh=function(e){return"boolean"==typeof e},vh=function(e){return"[object Date]"===Object.prototype.toString.call(e)},Sh=function(e){return"number"==typeof e},Th=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},kh=function(e){e=e?dh(e):e;var t=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+Hy(e).map(w).join("][")+"]"}).join("+'|'+")+";"):function(){return""};return $y(t,e,"key")},Eh=function(e,t,n,a){var o=t.length,r=n.length;if(!r)return t;if(!o)return n;for(var s=a||new t.constructor(o+r),l=0,d=0,p=0;l<o&&d<r;++p)s[p]=0<e(t[l],n[d])?n[d++]:t[l++];for(;l<o;++l,++p)s[p]=t[l];for(;d<r;++d,++p)s[p]=n[d];return s},Nh=function(e,t){for(var n="";0<=--t;)n+=e;return n},Lh=function(e,t,a,i){var o=a||" ",r=e+"",s=t-r.length;return 0>=s?r:"left"===i?Nh(o,s)+r:"center"===i?Nh(o,~~(s/2))+r+Nh(o,p(s/2)):r+Nh(o,s)},Ah=function(e){return null==e||""===e?null:e&&"false"!=e&&"0"!=e&&!!e},Ch=function(e,t){return t=t||H,null==e||""===e?null:t(e)},wh=function(e){return null==e||""===e?null:e+""},Oh=function(e){for(var t={},a=0,i=e.length;a<i;++a)t[e[a]]=1;return t},Dh=function(t,a,i,o){var r=null==o?"\u2026":o,e=t+"",s=e.length,n=N(0,a-r.length);return s<=a?e:"left"===i?r+e.slice(s-n):"center"===i?e.slice(0,p(n/2))+r+e.slice(s-~~(n/2)):e.slice(0,n)+r},Ph=function(e,a,o){if(e){var r=0,i=e.length,n;if(a)for(;r<i;++r)(n=a(e[r]))&&o(n,r,e);else e.forEach(o)}},Rh=Symbol("vega_id"),Ih=1,Mh="_:mod:_",Fh=te.prototype;Fh.set=function(e,t,n,a){var i=this,o=i[e],r=i[Mh];return null!=t&&0<=t?(o[t]!==n||a)&&(o[t]=n,r[t+":"+e]=-1,r[e]=-1):(o!==n||a)&&(i[e]=n,r[e]=qy(n)?1+n.length:-1),i},Fh.modified=function(e,t){var n=this[Mh],a;if(!arguments.length){for(a in n)if(n[a])return!0;return!1}if(qy(e)){for(a=0;a<e.length;++a)if(n[e[a]])return!0;return!1}return null!=t&&0<=t?t+1<n[e]||!!n[t+":"+e]:!!n[e]},Fh.clear=function(){return this[Mh]={},this};var Bh=0,zh=new te,jh=ne.prototype;jh.targets=function(){return this._targets||(this._targets=q(Xy))},jh.set=function(e){return this.value===e?0:(this.value=e,1)},jh.skip=ae(1),jh.modified=ae(2),jh.parameters=function(e,t){function a(e,n,a){a instanceof ne?(a!==o&&(t&&a.targets().add(o),l.push(a)),s.push({op:a,name:e,index:n})):r.set(e,n,a)}t=!1!==t;var o=this,r=o._argval=o._argval||new te,s=o._argops=o._argops||[],l=[],d,p,c,n;for(d in e)if(p=e[d],d==="pulse")dh(p).forEach(function(e){e instanceof ne?e!==o&&(e.targets().add(o),l.push(e)):Wy("Pulse parameters must be operator instances.")}),o.source=p;else if(qy(p))for(r.set(d,-1,Array(c=p.length)),n=0;n<c;++n)a(d,n,p[n]);else a(d,-1,p);return this.marshall().clear(),l},jh.marshall=function(e){var t=this._argval||zh,a=this._argops,o,r,i,n,s;if(a&&(i=a.length))for(r=0;r<i;++r)o=a[r],n=o.op,s=n.modified()&&n.stamp===e,t.set(o.name,o.index,n.value,s);return t},jh.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},jh.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,this.pulse=t,t||e};var Uh=0,$h=ie.prototype;$h._filter=Qy,$h._apply=id,$h.targets=function(){return this._targets||(this._targets=q(Xy))},$h.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},$h.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),a=this._targets,o=a?a.length:0,n=0;n<o;++n)a[n].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},$h.filter=function(e){var t=oe(e);return this.targets().add(t),t},$h.apply=function(e){var t=oe(null,e);return this.targets().add(t),t},$h.merge=function(){var e=oe();this.targets().add(e);for(var t=0,a=arguments.length;t<a;++t)arguments[t].targets().add(e);return e},$h.throttle=function(e){var n=-1;return this.filter(function(){var t=Date.now();return t-n>e?(n=t,1):0})},$h.debounce=function(e){var t=oe();return this.targets().add(oe(null,null,fh(e,function(n){var e=n.dataflow;t.receive(n),e&&e.run&&e.run()}))),t},$h.between=function(e,t){var n=!1;return e.targets().add(oe(null,null,function(){n=!0})),t.targets().add(oe(null,null,function(){n=!1})),this.filter(function(){return n})};var Wh="$";se.prototype=le.prototype={constructor:se,has:function(e){return Wh+e in this},get:function(e){return this[Wh+e]},set:function(e,t){return this[Wh+e]=t,this},remove:function(e){var t=Wh+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Wh&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Wh&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Wh&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Wh&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Wh&&++e;return e},empty:function(){for(var e in this)if(e[0]===Wh)return!1;return!0},each:function(e){for(var t in this)t[0]===Wh&&e(this[t],t.slice(1),this)}};var Hh=function(){function e(t,s,l,d){if(s>=a.length)return null!=o&&t.sort(o),null==r?t:r(t);for(var p=-1,i=t.length,n=a[s++],c=le(),u=l(),m,f,g;++p<i;)(g=c.get(m=n(f=t[p])+""))?g.push(f):c.set(m,[f]);return c.each(function(t,n){d(u,n,e(t,s,l,d))}),u}function t(e,i){if(++i>a.length)return e;var o=n[i-1],s;return null!=r&&i>=a.length?s=e.entries():(s=[],e.each(function(e,n){s.push({key:n,values:t(e,i)})})),null==o?s:s.sort(function(e,t){return o(e.key,t.key)})}var a=[],n=[],o,r,i;return i={object:function(t){return e(t,0,de,pe)},map:function(t){return e(t,0,ce,ue)},entries:function(n){return t(e(n,0,ce,ue),0)},key:function(e){return a.push(e),i},sortKeys:function(e){return n[a.length-1]=e,i},sortValues:function(e){return o=e,i},rollup:function(e){return r=e,i}}},qh=le.prototype;me.prototype=fe.prototype={constructor:me,has:qh.has,add:function(e){return e+="",this[Wh+e]=e,this},remove:qh.remove,clear:qh.clear,values:qh.keys,size:qh.size,empty:qh.empty,each:qh.each};var Yh={value:function(){}};_e.prototype=ge.prototype={constructor:_e,on:function(e,a){var o=this._,r=ye(e+"",o),s=-1,i=r.length,n;if(2>arguments.length){for(;++s<i;)if((n=(e=r[s]).type)&&(n=he(o[n],e.name)))return n;return}if(null!=a&&"function"!=typeof a)throw new Error("invalid callback: "+a);for(;++s<i;)if(n=(e=r[s]).type)o[n]=be(o[n],e.name,a);else if(null==a)for(n in o)o[n]=be(o[n],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new _e(e)},call:function(e,a){if(0<(i=arguments.length-2))for(var o=Array(i),r=0,i,n;r<i;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=this._[e],r=0,i=n.length;r<i;++r)n[r].value.apply(a,o)},apply:function(e,a,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],t=0,i=r.length;t<i;++t)r[t].value.apply(a,o)}};var Vh=function(e,t){function n(e){var t=r.status,n;if(!t&&ve(r)||200<=t&&300>t||304===t){if(c)try{n=c.call(d,r)}catch(t){return void a.call("error",d,t)}else n=r;a.call("load",d,n)}else a.call("error",d,e)}var a=ge("beforesend","progress","load","error"),i=le(),r=new XMLHttpRequest,o=null,s=null,l=0,d,p,c,u;if("undefined"!=typeof XDomainRequest&&!("withCredentials"in r)&&/^(http(s)?:)?\/\//.test(e)&&(r=new XDomainRequest),"onload"in r?r.onload=r.onerror=r.ontimeout=n:r.onreadystatechange=function(e){3<r.readyState&&n(e)},r.onprogress=function(t){a.call("progress",d,t)},d={header:function(e,t){return(e=(e+"").toLowerCase(),2>arguments.length)?i.get(e):(null==t?i.remove(e):i.set(e,t+""),d)},mimeType:function(e){return arguments.length?(p=null==e?null:e+"",d):p},responseType:function(e){return arguments.length?(u=e,d):u},timeout:function(e){return arguments.length?(l=+e,d):l},user:function(e){return 1>arguments.length?o:(o=null==e?null:e+"",d)},password:function(e){return 1>arguments.length?s:(s=null==e?null:e+"",d)},response:function(e){return c=e,d},get:function(e,t){return d.send("GET",e,t)},post:function(e,t){return d.send("POST",e,t)},send:function(t,n,c){return r.open(t,e,!0,o,s),null==p||i.has("accept")||i.set("accept",p+",*/*"),r.setRequestHeader&&i.each(function(e,t){r.setRequestHeader(t,e)}),null!=p&&r.overrideMimeType&&r.overrideMimeType(p),null!=u&&(r.responseType=u),0<l&&(r.timeout=l),null==c&&"function"==typeof n&&(c=n,n=null),null!=c&&1===c.length&&(c=xe(c)),null!=c&&d.on("error",c).on("load",function(e){c(null,e)}),a.call("beforesend",d,r),r.send(null==n?null:n),d},abort:function(){return r.abort(),d},on:function(){var e=a.on.apply(a,arguments);return e===a?d:e}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return d.get(t)}return d},Gh={},Zh={},Xh=34,Kh=10,Jh=13,Qh=function(e){function t(e,a){function i(){if(n)return Zh;if(p)return p=!1,Gh;var t=l,a,i;if(e.charCodeAt(t)===Xh){for(;l++<s&&e.charCodeAt(l)!==Xh||e.charCodeAt(++l)===Xh;);return(a=l)>=s?n=!0:(i=e.charCodeAt(l++))===Kh?p=!0:i===Jh&&(p=!0,e.charCodeAt(l)===Kh&&++l),e.slice(t+1,a-1).replace(/""/g,"\"")}for(;l<s;){if((i=e.charCodeAt(a=l++))===Kh)p=!0;else if(i===Jh)p=!0,e.charCodeAt(l)===Kh&&++l;else if(i!==o)continue;return e.slice(t,a)}return n=!0,e.slice(t,s)}var r=[],s=e.length,l=0,d=0,n=0>=s,p=!1,c;for(e.charCodeAt(s-1)===Kh&&--s,e.charCodeAt(s-1)===Jh&&--s;(c=i())!==Zh;){for(var t=[];c!==Gh&&c!==Zh;)t.push(c),c=i();a&&null==(t=a(t,d++))||r.push(t)}return r}function n(t){return t.map(a).join(e)}function a(e){return null==e?"":i.test(e+="")?"\""+e.replace(/"/g,"\"\"")+"\"":e}var i=new RegExp("[\""+e+"\n\r]"),o=e.charCodeAt(0);return{parse:function(e,n){var a=t(e,function(e,t){return o?o(e,t-1):void(r=e,o=n?Te(e,n):Se(e))}),o,r;return a.columns=r,a},parseRows:t,format:function(t,n){return null==n&&(n=ke(t)),[n.map(a).join(e)].concat(t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})).join("\n")},formatRows:function(e){return e.map(n).join("\n")}}},eb=Qh(","),tb=Qh("\t"),nb=/^([A-Za-z]+:)?\/\//,ab="file://",ib=["mimeType","responseType","user","password"],ob=function(e){return{options:e||{},sanitize:Le,load:Ne,file:Ce,http:Ae}},rb={boolean:Ah,integer:lh,number:lh,date:Ch,string:wh},sb=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return Ie(e)&&(e=+e)==~~e},Ie,function(e){return!isNaN(Date.parse(e))}],lb=["boolean","integer","number","date"],db=function(e,t){var n=t&&t.property?Gy(t.property):id;return Yy(e)&&!Be(e)?ze(n(e)):n(JSON.parse(e))},pb=function(){},cb=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return $e(e,t)})}:$e(e,t)},ub=function(e,n){function t(t){var n=e.arcs[0>t?~t:t],a=n[0],o;return e.transform?(o=[0,0],n.forEach(function(e){o[0]+=e[0],o[1]+=e[1]})):o=n[n.length-1],0>t?[o,a]:[a,o]}function a(e,t){for(var n in e){var a=e[n];delete t[a.start],delete a.start,delete a.end,a.forEach(function(e){o[0>e?~e:e]=1}),l.push(a)}}var o={},r={},s={},l=[],d=-1;return n.forEach(function(a,o){var r=e.arcs[0>a?~a:a],s;!(3>r.length)||r[1][0]||r[1][1]||(s=n[++d],n[d]=a,n[o]=s)}),n.forEach(function(n){var a=t(n),e=a[0],i=a[1],o,l;if(o=s[e]){if(delete s[o.end],o.push(n),o.end=i,l=r[i]){delete r[l.start];var d=l==o?o:o.concat(l);r[d.start=o.start]=s[d.end=l.end]=d}else r[o.start]=s[o.end]=o;}else if(!(o=r[i]))o=[n],r[o.start=e]=s[o.end=i]=o;else if(delete r[o.start],o.unshift(n),o.start=e,l=s[e]){delete s[l.end];var p=l===o?o:l.concat(o);r[p.start=l.start]=s[p.end=o.end]=p}else r[o.start]=s[o.end]=o}),a(s,r),a(r,s),n.forEach(function(e){o[0>e?~e:e]||l.push([e])}),l},mb=function(e){return We(e,He.apply(this,arguments))},fb={dsv:Fe,csv:Me(","),tsv:Me("\t"),json:db,topojson:function(e,t){var n,a;return(e=db(e,t),t&&(a=t.feature))?(n=e.objects[a])?cb(e,n).features:Wy("Invalid TopoJSON object: "+a):t&&(a=t.mesh)?(n=e.objects[a])?[mb(e,n)]:Wy("Invalid TopoJSON object: "+a):void Wy("Missing TopoJSON feature or mesh parameter.")}},gb=function(e,t){return 1<arguments.length?(fb[e]=t,this):fb.hasOwnProperty(e)?fb[e]:null},_b=new Date,yb=new Date,hb=qe(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});hb.every=function(e){return e=E(e),isFinite(e)&&0<e?1<e?qe(function(t){t.setTime(E(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):hb:null};var bb=1e3,xb=6e4,vb=36e5,Sb=864e5,Tb=6048e5,kb=qe(function(e){e.setTime(E(e/bb)*bb)},function(e,t){e.setTime(+e+t*bb)},function(e,t){return(t-e)/bb},function(e){return e.getUTCSeconds()}),Eb=qe(function(e){e.setTime(E(e/xb)*xb)},function(e,t){e.setTime(+e+t*xb)},function(e,t){return(t-e)/xb},function(e){return e.getMinutes()}),Nb=qe(function(e){var t=e.getTimezoneOffset()*xb%vb;0>t&&(t+=vb),e.setTime(E((+e-t)/vb)*vb+t)},function(e,t){e.setTime(+e+t*vb)},function(e,t){return(t-e)/vb},function(e){return e.getHours()}),Lb=qe(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xb)/Sb},function(e){return e.getDate()-1}),Ab=Ye(0),Cb=Ye(1),wb=Ye(2),Ob=Ye(3),Db=Ye(4),Pb=Ye(5),Rb=Ye(6),Ib=qe(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),Mb=qe(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Mb.every=function(e){return isFinite(e=E(e))&&0<e?qe(function(t){t.setFullYear(E(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var Fb=qe(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*xb)},function(e,t){return(t-e)/xb},function(e){return e.getUTCMinutes()}),Bb=qe(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*vb)},function(e,t){return(t-e)/vb},function(e){return e.getUTCHours()}),zb=qe(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Sb},function(e){return e.getUTCDate()-1}),jb=Ve(0),Ub=Ve(1),$b=Ve(2),Wb=Ve(3),Hb=Ve(4),qb=Ve(5),Yb=Ve(6),Vb=qe(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),Gb=qe(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Gb.every=function(e){return isFinite(e=E(e))&&0<e?qe(function(t){t.setUTCFullYear(E(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var Zb={0:"0","-":"",_:" "},Xb=/^\s*\d+/,Kb=/^%/,Jb=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Qb,ex,nx,ax,ix;qt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ox="%Y-%m-%dT%H:%M:%S.%LZ",rx=Date.prototype.toISOString?function(e){return e.toISOString()}:ax(ox),sx=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:ix(ox),lx=function(e,t,n){t=t||{};var a=gb(t.type||"json");return a||Wy("Unknown data format type: "+t.type),e=a(e,t),t.parse&&Yt(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e},dx={skip:!0},px={},cx=1,ux=2,mx=4,fx=cx|mx,gx=cx|ux|mx,_x=8,yx=16,hx=32,bx=64,xx=Xt.prototype;xx.StopPropagation=px,xx.ADD=cx,xx.REM=ux,xx.MOD=mx,xx.ADD_REM=cx|ux,xx.ADD_MOD=fx,xx.ALL=gx,xx.REFLOW=_x,xx.SOURCE=yx,xx.NO_SOURCE=hx,xx.NO_FIELDS=bx,xx.fork=function(e){return new Xt(this.dataflow).init(this,e)},xx.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?(e=new Xt(this.dataflow).init(this),e.add=e.source,e):e},xx.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&bx)&&(n.fields=e.fields),t&cx?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&ux?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&mx?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&hx?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},xx.runAfter=function(e){this.dataflow.runAfter(e)},xx.changed=function(e){var t=e||gx;return t&cx&&this.add.length||t&ux&&this.rem.length||t&mx&&this.mod.length},xx.reflow=function(e){if(e)return this.fork(gx).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(mx,Qt(this,cx))),this},xx.modifies=function(e){var t=dh(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},xx.modified=function(e){var t=this.fields;return this.mod.length&&t&&(arguments.length?qy(e)?e.some(function(e){return t[e]}):t[e]:!!t)},xx.filter=function(e,t){var n=this;return e&cx&&(n.addF=Kt(n.addF,t)),e&ux&&(n.remF=Kt(n.remF,t)),e&mx&&(n.modF=Kt(n.modF,t)),e&yx&&(n.srcF=Kt(n.srcF,t)),n},xx.materialize=function(e){e=e||gx;var t=this;return e&cx&&t.addF&&(t.add=Jt(t.add,t.addF),t.addF=null),e&ux&&t.remF&&(t.rem=Jt(t.rem,t.remF),t.remF=null),e&mx&&t.modF&&(t.mod=Jt(t.mod,t.modF),t.modF=null),e&yx&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},xx.visit=function(e,t){var n=this,a=t,i,o;return e&yx?(Ph(n.source,n.srcF,a),n):(e&cx&&Ph(n.add,n.addF,a),e&ux&&Ph(n.rem,n.remF,a),e&mx&&Ph(n.mod,n.modF,a),e&_x&&(i=n.source)&&(o=n.add.length+n.mod.length,o===i.length||(o?Ph(i,Qt(n,fx),a):Ph(i,n.srcF,a))),n)};var vx=bh(en,Xt);vx.fork=function(e){var n=new Xt(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&n.ADD&&this.visit(n.ADD,function(e){return n.add.push(e)}),e&n.REM&&this.visit(n.REM,function(e){return n.rem.push(e)}),e&n.MOD&&this.visit(n.MOD,function(e){return n.mod.push(e)})),n},vx.changed=function(e){return this.changes&e},vx.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?qy(e)?e.some(function(e){return n[e]}):n[e]:0},vx.filter=function(){Wy("MultiPulse does not support filtering.")},vx.materialize=function(){Wy("MultiPulse does not support materialization.")},vx.visit=function(e,t){var a=this,o=a.pulses,r=o.length,n=0;if(e&a.SOURCE)for(;n<r;++n)o[n].visit(e,t);else for(;n<r;++n)o[n].stamp===a.stamp&&o[n].visit(e,t);return a};var Sx={skip:!1,force:!1},Tx=tn.prototype;Tx.size=function(){return this.nodes.length},Tx.clear=function(){return this.nodes=[],this},Tx.peek=function(){return this.nodes[0]},Tx.push=function(e){var t=this.nodes;return t.push(e),nn(t,0,t.length-1,this.cmp)},Tx.pop=function(){var e=this.nodes,t=e.pop(),n;return e.length?(n=e[0],e[0]=t,an(e,0,this.cmp)):n=t,n},Tx.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,an(t,0,this.cmp),n},Tx.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&0>this.cmp(n,e)&&(t[0]=e,e=n,an(t,0,this.cmp)),e};var kx=on.prototype;kx.stamp=function(){return this._clock},kx.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},kx.cleanThreshold=1e4,kx.add=function(e,t,n,a){var i=1,o;return e instanceof ne?o=e:e&&e.prototype instanceof ne?o=new e:ph(e)?o=new ne(null,e):(i=0,o=new ne(e,t)),this.rank(o),i&&(a=n,n=t),n&&this.connect(o,o.parameters(n,a)),this.touch(o),o},kx.connect=function(e,t){var a=e.rank,o,i;for(o=0,i=t.length;o<i;++o)if(a<t[o].rank)return void this.rerank(e)},kx.rank=function(e){e.rank=++this._rank},kx.rerank=function(e){for(var t=[e],n,a,o;t.length;)if(this.rank(n=t.pop()),a=n._targets)for(o=a.length;0<=--o;)t.push(n=a[o]),n===e&&Wy("Cycle detected in dataflow graph.")},kx.pulse=function(e,n,a){this.touch(e,a||Sx);var i=new Xt(this,this._clock+(this._pulse?0:1)),o=e.pulse&&e.pulse.source||[];return i.target=e,this._pulses[e.id]=n.pulse(i,o),this},kx.touch=function(e,t){return this._pulse?this._enqueue(e):this._touched.add(e),(t||Sx).skip&&e.skip(!0),this},kx.update=function(e,t,n){var a=n||Sx;return(e.set(t)||a.force)&&this.touch(e,a),this},kx.changeset=ee,kx.ingest=function(e,t,n){return this.pulse(e,this.changeset().insert(lx(t,n)))},kx.request=function(e,t,n){var a=this,i=a._pending||Vt(a);i.requests+=1,a.loader().load(t,{context:"dataflow"}).then(function(t){a.ingest(e,t,n)},function(e){a.error("Loading failed",t,e)}).catch(function(e){a.error("Data ingestion failed",t,e)}).then(i.done,i.done)},kx.events=function(e,t,a,o){var r=this,l=oe(a,o),s=function(t){t.dataflow=r;try{l.receive(t)}catch(e){r.error(e)}finally{r.run()}},d;d="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):dh(e);for(var p=0,i=d.length;p<i;++p)d[p].addEventListener(t,s);return l},kx.on=function(e,t,n,a,i){var o=e instanceof ne?Zt:Gt;return o(this,e,t,n,a,i),this},kx.run=function(e){var t=this,n=0,a=t.logLevel(),i,o,r,s;if(t._pending)return t.info("Awaiting requests, delaying dataflow run."),0;if(t._pulse)return t.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!t._touched.length)return t.info("Dataflow invoked, but nothing to do."),0;t._pulse=new Xt(t,++t._clock,e),a>=ih&&(r=Date.now(),t.debug("-- START PROPAGATION ("+t._clock+") -----")),t._touched.forEach(function(e){t._enqueue(e,!0)}),t._touched=q(Xy);try{for(;0<t._heap.size();){if(i=t._heap.pop(),i.rank!==i.qrank){t._enqueue(i,!0);continue}o=i.run(t._getPulse(i,e)),a>=oh&&t.debug(i.id,o===px?"STOP":o,i),o!==px&&(t._pulse=o,i._targets&&i._targets.forEach(function(e){t._enqueue(e)})),++n}}catch(e){s=e}if(t._pulses={},t._pulse=null,a>=ih&&(r=Date.now()-r,t.info("> Pulse "+t._clock+": "+n+" operators; "+r+"ms")),s&&(t._postrun=[],t.error(s)),t._onrun)try{t._onrun(t,n,s)}catch(e){t.error(e)}if(t._postrun.length){var l=t._postrun;t._postrun=[],l.forEach(function(e){try{e(t)}catch(e){t.error(e)}})}return n},kx.runAsync=function(){return this._pending||Promise.resolve(this.run())},kx.runAfter=function(e,t){if(this._pulse||t)this._postrun.push(e);else try{e(this)}catch(e){this.error(e)}},kx._enqueue=function(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},kx._getPulse=function(e,t){var n=e.source,a=this._clock,i;return n&&qy(n)?(i=n.map(function(e){return e.pulse}),new en(this,a,i,t)):(n=n&&n.pulse,i=this._pulses[e.id],n&&n!==px&&(n.stamp===a&&i.target!==e?i=n:i.source=n.source),i)},kx.error=rn("error"),kx.warn=rn("warn"),kx.info=rn("info"),kx.debug=rn("debug"),kx.logLevel=rn("level");var Ex=bh(sn,ne);Ex.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t},Ex.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},Ex.transform=function(){};var Nx={},Lx={values:fn({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:fn({name:"count",set:"cell.num"}),missing:fn({name:"missing",set:"this.missing"}),valid:fn({name:"valid",set:"this.valid"}),sum:fn({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:fn({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:fn({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:fn({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:fn({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:fn({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:fn({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:fn({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:fn({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:fn({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:fn({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:fn({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:fn({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:fn({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:fn({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:fn({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:fn({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:fn({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Ax=Object.keys(Lx),Cx=function(e){var t=e.maxbins||20,a=e.base||10,o=f(a),r=e.divide||[5,2],s=e.extent[0],d=e.extent[1],c=d-s,u,m,_,y,h,b,i,n;if(e.step)u=e.step;else if(e.steps){for(h=c/t,b=0,i=e.steps.length;b<i&&e.steps[b]<h;++b);u=e.steps[N(0,b-1)]}else{for(m=p(f(t)/o),_=e.minstep||0,u=N(_,g(a,l(f(c)/o)-m));p(c/u)>t;)u*=a;for(b=0,i=r.length;b<i;++b)h=u/r[b],h>=_&&c/h<=t&&(u=h)}return h=f(u),y=0<=h?0:~~(-h/o)+1,n=g(a,-y-1),(e.nice||void 0===e.nice)&&(h=E(s/u+n)*u,s=s<h?h-u:h,d=p(d/u)*u),{start:s,stop:d,step:u}},wx=function(e,t){var o=[],r=e.length,n=-1,i;if(null==t)for(;++n<r;)isNaN(i=hn(e[n]))||o.push(i);else for(;++n<r;)isNaN(i=hn(t(e[n],n,e)))||o.push(i);return o};h.random=Math.random;var Ox=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},Dx=function(e){return 1===e.length&&(e=bn(e)),{left:function(t,n,a,i){for(null==a&&(a=0),null==i&&(i=t.length);a<i;){var o=a+i>>>1;0>e(t[o],n)?a=o+1:i=o}return a},right:function(t,n,a,i){for(null==a&&(a=0),null==i&&(i=t.length);a<i;){var o=a+i>>>1;0<e(t[o],n)?i=o:a=o+1}return a}}},Px=Dx(Ox),Rx=Px.right,Ix=Px.left,Mx=function(e){return null===e?NaN:+e},Fx=function(e,t){var a=e.length,n=0,o=-1,i=0,r=0,s,l;if(null==t)for(;++o<a;)isNaN(s=Mx(e[o]))||(l=s-i,i+=l/++n,r+=l*(s-i));else for(;++o<a;)isNaN(s=Mx(t(e[o],o,e)))||(l=s-i,i+=l/++n,r+=l*(s-i));return 1<n?r/(n-1):void 0},Bx=function(e,t){var a=e.length,n=-1,i,o,r;if(null==t){for(;++n<a;)if(null!=(i=e[n])&&i>=i)for(o=r=i;++n<a;)null!=(i=e[n])&&(o>i&&(o=i),r<i&&(r=i));}else for(;++n<a;)if(null!=(i=t(e[n],n,e))&&i>=i)for(o=r=i;++n<a;)null!=(i=t(e[n],n,e))&&(o>i&&(o=i),r<i&&(r=i));return[o,r]},zx=function(e,t,a){e=+e,t=+t,a=2>(i=arguments.length)?(t=e,e=0,1):3>i?1:+a;for(var o=-1,i=0|N(0,p((t-e)/a)),n=Array(i);++o<i;)n[o]=e+o*a;return n},jx=7.0710678118654755,Ux=3.1622776601683795,$x=1.4142135623730951,Wx=function(e,t,a){var o=-1,i,r,n,s;if(t=+t,e=+e,a=+a,e===t&&0<a)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(s=xn(e,t,a))||!isFinite(s))return[];if(0<s)for(e=p(e/s),t=E(t/s),n=Array(r=p(t-e+1));++o<r;)n[o]=(e+o)*s;else for(e=E(e*s),t=p(t*s),n=Array(r=p(e-t+1));++o<r;)n[o]=(e-o)/s;return i&&n.reverse(),n},Hx=function(e){return p(f(e.length)/r)+1},qx=function(e,t,a){if(null==a&&(a=Mx),!!(l=e.length)){if(0>=(t=+t)||2>l)return+a(e[0],0,e);if(1<=t)return+a(e[l-1],l-1,e);var o=(l-1)*t,i=E(o),r=+a(e[i],i,e),s=+a(e[i+1],i+1,e),l;return r+(s-r)*(o-i)}},Yx=function(e,t){var a=e.length,n=-1,i,o;if(null==t){for(;++n<a;)if(null!=(i=e[n])&&i>=i)for(o=i;++n<a;)null!=(i=e[n])&&i>o&&(o=i);}else for(;++n<a;)if(null!=(i=t(e[n],n,e))&&i>=i)for(o=i;++n<a;)null!=(i=t(e[n],n,e))&&i>o&&(o=i);return o},Vx=function(e){for(var t=e.length,n=-1,a=0,i,o,r;++n<t;)a+=e[n].length;for(o=Array(a);0<=--t;)for(r=e[t],i=r.length;0<=--i;)o[--a]=r[i];return o},Gx=function(e,t){for(var n=t.length,a=Array(n);n--;)a[n]=e[t[n]];return a},Zx=function(e,t){var a=e.length,n=-1,i=0,o;if(null==t)for(;++n<a;)(o=+e[n])&&(i+=o);else for(;++n<a;)(o=+t(e[n],n,e))&&(i+=o);return i},Xx=function(e,t,o,r){var s=wx(e,r),l=s.length,n=t,d,a,i,p;for(i=0,p=Array(n);i<n;++i){for(d=0,a=0;a<l;++a)d+=s[~~(h.random()*l)];p[i]=d/l}return[qx(p.sort(Ox),o/2),qx(p,1-o/2)]},Kx=function(e,t){var n=wx(e,t);return[qx(n.sort(Ox),0.25),qx(n,0.5),qx(n,0.75)]},Jx=function(e,t){var n=NaN,i={},r,l;return i.mean=function(e){return arguments.length?(r=e||0,n=NaN,i):r},i.stdev=function(e){return arguments.length?(l=null==e?1:e,n=NaN,i):l},i.sample=function(){var e=0,t=0,a,i;if(n==n)return e=n,n=NaN,e;do e=2*h.random()-1,t=2*h.random()-1,a=e*e+t*t;while(0===a||1<a);return i=u(-2*f(a)/a),n=r+t*i*l,r+e*i*l},i.pdf=function(e){var t=a(g(e-r,2)/(-2*g(l,2)));return 1/(l*u(2*o))*t},i.cdf=function(e){var t=(e-r)/l,n=T(t),i;if(37<n)i=0;else{var o=a(-n*n/2),s;7.07106781186547>n?(s=0.0352624965998911*n+0.700383064443688,s=s*n+6.37396220353165,s=s*n+33.912866078383,s=s*n+112.079291497871,s=s*n+221.213596169931,s=s*n+220.206867912376,i=o*s,s=0.0883883476483184*n+1.75566716318264,s=s*n+16.064177579207,s=s*n+86.7807322029461,s=s*n+296.564248779674,s=s*n+637.333633378831,s=s*n+793.826512519948,s=s*n+440.413735824752,i/=s):(s=n+0.65,s=n+4/s,s=n+3/s,s=n+2/s,s=n+1/s,i=o/s/2.506628274631)}return 0<t?1-i:i},i.icdf=function(e){if(0>=e||1<=e)return NaN;var t=2*e-1,n=8*(o-3)/(3*o*(4-o)),i=2/(o*n)+f(1-g(t,2))/2,a=f(1-t*t)/n,d=(0<t?1:-1)*u(u(i*i-a)-i);return r+l*jy*d},i.mean(e).stdev(t)},Qx=function(e,t){var a=Jx(),i={},o=0;return i.data=function(n){return arguments.length?(e=n,o=n?n.length:0,i.bandwidth(t)):e},i.bandwidth=function(n){return arguments.length?(t=n,!t&&e&&(t=Sn(e)),i):t},i.sample=function(){return e[~~(h.random()*o)]+t*a.sample()},i.pdf=function(n){for(var r=0,s=0;s<o;++s)r+=a.pdf((n-e[s])/t);return r/t/o},i.cdf=function(n){for(var r=0,s=0;s<o;++s)r+=a.cdf((n-e[s])/t);return r/o},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)},ev=function(e,t){function n(e){var t=[],n=0,a;for(a=0;a<o;++a)n+=t[a]=null==e[a]?1:+e[a];for(a=0;a<o;++a)t[a]/=n;return t}var a={},o=0,s;return a.weights=function(e){return arguments.length?(s=n(t=e||[]),a):t},a.distributions=function(n){return arguments.length?(n?(o=n.length,e=n):(o=0,e=[]),a.weights(t)):e},a.sample=function(){for(var t=h.random(),n=e[o-1],a=s[0],r=0;r<o-1;a+=s[++r])if(t<a){n=e[r];break}return n.sample()},a.pdf=function(t){for(var n=0,a=0;a<o;++a)n+=s[a]*e[a].pdf(t);return n},a.cdf=function(t){for(var n=0,a=0;a<o;++a)n+=s[a]*e[a].cdf(t);return n},a.icdf=function(){throw Error("Mixture icdf not supported.")},a.distributions(e).weights(t)},tv=function(e,t){null==t&&(t=null==e?1:e,e=0);var n={},i,a,o;return n.min=function(e){return arguments.length?(i=e||0,o=a-i,n):i},n.max=function(e){return arguments.length?(a=e||0,o=a-i,n):a},n.sample=function(){return i+o*h.random()},n.pdf=function(e){return e>=i&&e<=a?1/o:0},n.cdf=function(e){return e<i?0:e>a?1:(e-i)/o},n.icdf=function(e){return 0<=e&&1>=e?i+e*o:NaN},n.min(e).max(t)},nv=Tn.prototype;nv.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},nv.add=function(e){this._add.push(e)},nv.rem=function(e){this._rem.push(e)},nv.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e=this._add,t=this._rem,a=this._key,o=e.length,n=t.length,r=Array(o-n),s={},l,i,d;for(l=0;l<n;++l)s[a(t[l])]=1;for(l=0,i=0;l<o;++l)s[a(d=e[l])]?s[a(d)]=0:r[i++]=d;return this._rem=[],this._add=r},nv.distinct=function(e){for(var t=this.values(),a=t.length,n={},i=0,o;0<=--a;)o=e(t[a])+"",n.hasOwnProperty(o)||(n[o]=1,++i);return i},nv.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=_h(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},nv.argmin=function(e){return this.extent(e)[0]||{}},nv.argmax=function(e){return this.extent(e)[1]||{}},nv.min=function(e){var t=this.extent(e)[0];return null==t?+Infinity:e(t)},nv.max=function(e){var t=this.extent(e)[1];return null==t?-Infinity:e(t)},nv.quartile=function(e){return this._get===e&&this._q||(this._q=Kx(this.values(),e),this._get=e),this._q},nv.q1=function(e){return this.quartile(e)[0]},nv.q2=function(e){return this.quartile(e)[1]},nv.q3=function(e){return this.quartile(e)[2]},nv.ci=function(e){return this._get===e&&this._ci||(this._ci=Xx(this.values(),1e3,0.05,e),this._get=e),this._ci},nv.ci0=function(e){return this.ci(e)[0]},nv.ci1=function(e){return this.ci(e)[1]},kn.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ax},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var av=bh(kn,sn);av.transform=function(e,t){var n=this,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i;return this.stamp=a.stamp,this.value&&((i=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=i?this.init(e):{},t.visit(t.SOURCE,function(e){n.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){n.rem(e)}),t.visit(t.ADD,function(e){n.add(e)})),a.modifies(this._outputs),n._drop=!1!==e.drop,e.cross&&1<n._dims.length&&(n._drop=!1,this.cross()),n.changes(a)},av.cross=function(){function e(e){var n,a,i,t;for(n in e)for(i=e[n].tuple,a=0;a<s;++a)r[a][t=i[o[a]]]=t}function t(e,n,l){var d=o[l],p=r[l++],c,u;for(c in p)n[d]=p[c],u=e?e+"|"+c:c,l<s?t(u,n,l):!i[u]&&a.cell(u,n)}var a=this,i=a.value,o=a._dnames,r=o.map(function(){return{}}),s=o.length;e(a._prev),e(i),t("",{},0)},av.init=function(e){function t(e){for(var t=dh(m(e)),o=0,i=t.length,n;o<i;++o)r[n=t[o]]||(r[n]=1,a.push(n))}var a=this._inputs=[],o=this._outputs=[],r={};this._dims=dh(e.groupby),this._dnames=this._dims.map(function(e){var n=v(e);return t(e),o.push(n),n}),this.cellkey=e.key?e.key:cn(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var s=e.fields||[null],l=e.ops||["count"],d=e.as||[],p=s.length,n={},c,u,f,g,_,y;for(p!==l.length&&Wy("Unmatched number of fields and aggregate ops."),y=0;y<p;++y){if(c=s[y],u=l[y],null==c&&"count"!==u&&Wy("Null aggregate field specified."),g=v(c),_=un(u,g,d[y]),o.push(_),"count"===u){this._counts.push(_);continue}f=n[g],f||(t(c),f=n[g]=[],f.field=c,this._measures.push(f)),"count"!==u&&(this._countOnly=!1),f.push(mn(u,_))}return this._measures=this._measures.map(function(e){return yn(e,e.field)}),{}},av.cellkey=cn(),av.cell=function(e,n){var t=this.value[e];return t?0===t.num&&this._drop&&t.stamp<this.stamp?(t.stamp=this.stamp,this._adds[this._alen++]=t):t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t):(t=this.value[e]=this.newcell(e,n),this._adds[this._alen++]=t),t},av.newcell=function(e,a){var t={key:e,num:0,agg:null,tuple:this.newtuple(a,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var o=this._measures,r=o.length,n;for(t.agg=Array(r),n=0;n<r;++n)t.agg[n]=new o[n](t)}return t.store&&(t.data=new Tn),t},av.newtuple=function(e,t){var a=this._dnames,o=this._dims,r={},s,i;for(s=0,i=o.length;s<i;++s)r[a[s]]=o[s](e);return t?J(t.tuple,r):Z(r)},av.add=function(e){var t=this.cellkey(e),a=this.cell(t,e),o,r,i;if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),o=a.agg,(r=0,i=o.length);r<i;++r)o[r].add(o[r].get(e),e)},av.rem=function(e){var t=this.cellkey(e),a=this.cell(t,e),o,r,i;if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),o=a.agg,(r=0,i=o.length);r<i;++r)o[r].rem(o[r].get(e),e)},av.celltuple=function(e){var t=e.tuple,a=this._counts,o,r,i;for(e.store&&e.data.values(),r=0,i=a.length;r<i;++r)t[a[r]]=e.num;if(!this._countOnly)for(o=e.agg,r=0,i=o.length;r<i;++r)o[r].set(t);return t},av.changes=function(e){var t=this._adds,a=this._mods,o=this._prev,r=this._drop,s=e.add,l=e.rem,d=e.mod,p,c,u,i;if(o)for(c in o)p=o[c],(!r||p.num)&&l.push(p.tuple);for(u=0,i=this._alen;u<i;++u)s.push(this.celltuple(t[u])),t[u]=null;for(u=0,i=this._mlen;u<i;++u)p=a[u],(0===p.num&&r?l:d).push(this.celltuple(p)),a[u]=null;return this._alen=this._mlen=0,this._prev=null,e},En.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var iv=bh(En,sn);iv.transform=function(e,t){var n=this._bins(e),a=n.start,i=n.step,o=e.as||["bin0","bin1"],r=o[0],s=o[1],l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(m(e.field))?t.ADD_MOD:t.ADD,t.visit(l,function(e){var t=n(e);e[r]=t,e[s]=null==t?null:a+i*(1+(t-a)/i)}),t.modifies(o)},iv._bins=function(e){if(this.value&&!e.modified())return this.value;var n=e.field,t=Cx(e),i=t.start,o=t.stop,r=t.step,s,a;null!=(s=e.anchor)&&(a=s-(i+r*E((s-i)/r)),i+=a,o+=a);var l=function(e){var t=n(e);return null==t?null:(t=N(i,S(+t,o-r)),i+r*E((t-i)/r))};return l.start=i,l.stop=o,l.step=r,this.value=$y(l,m(n),e.name||"bin_"+v(n))};var ov=function(e,t,n){var a=e,i=t||[],o=n||[],r={},s=0;return{add:function(e){o.push(e)},remove:function(e){r[a(e)]=++s},size:function(){return i.length},data:function(e,t){return s&&(i=i.filter(function(e){return!r[a(e)]}),r={},s=0),t&&e&&i.sort(e),o.length&&(i=e?Eh(e,i,o.sort(e)):i.concat(o),o=[]),i}}};Nn.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};var rv=bh(Nn,sn);rv.transform=function(e,t){var n=t.fork(t.ALL),a=ov(V,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,a.remove),this.modified(o),this.value=n.source=a.data(i,o),n},bh(Ln,ne),Cn.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:"[\\w\"]+"},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var sv=bh(Cn,sn);sv.transform=function(e,t){function n(a){return function(l){for(var d=wn(s(l),e.case,o)||[],p=0,i=d.length,n;p<i;++p)r.test(n=d[p])||a(n)}}var a=this._parameterCheck(e,t),i=this._counts,o=this._match,r=this._stop,s=e.field,l=e.as||["text","count"],d=n(function(e){i[e]=1+(i[e]||0)}),p=n(function(e){i[e]-=1});return a?t.visit(t.SOURCE,d):(t.visit(t.ADD,d),t.visit(t.REM,p)),this._finish(t,l)},sv._parameterCheck=function(e,t){var n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},sv._finish=function(e,n){var a=this._counts,i=this._tuples||(this._tuples={}),o=n[0],r=n[1],s=e.fork(),l,d,p;for(l in a)d=i[l],p=a[l]||0,!d&&p?(i[l]=d=Z({}),d[o]=l,d[r]=p,s.add.push(d)):0===p?(d&&s.rem.push(d),a[l]=null,i[l]=null):d[r]!==p&&(d[r]=p,s.mod.push(d));return s.modifies(n)},On.Definition={type:"Cross",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};var lv=bh(On,sn);lv.transform=function(e,t){var n=t.fork(t.NO_SOURCE),i=this.value,o=e.as||["a","b"],r=o[0],a=o[1],s=!i||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");return s?(i&&(n.rem=i),n.add=this.value=Dn(t.source,r,a,e.filter||Qy)):n.mod=i,n.source=this.value,n.modifies(o)};var dv={kde:Qx,mixture:ev,normal:Jx,uniform:tv},pv="distributions",cv="function",uv="field",mv=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];Rn.Definition={type:"Density",metadata:{generates:!0,source:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:mv.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:mv},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]};var fv=bh(Rn,sn);fv.transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var a=Pn(e.distribution,In(t)),i=e.method||"pdf";"pdf"!==i&&"cdf"!==i&&Wy("Invalid density method: "+i),e.extent||a.data||Wy("Missing density extent parameter."),i=a[i];var o=e.as||["value","density"],r=e.extent||Bx(a.data()),s=(r[1]-r[0])/(e.steps||100),l=zx(r[0],r[1]+s/2,s).map(function(e){var t={};return t[o[0]]=e,t[o[1]]=i(e),Z(t)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n},Mn.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};var gv=bh(Mn,sn);gv.transform=function(e,t){var n=this.value,a=e.field,i=n[0],o=n[1],r=t.ADD,s;s=t.changed()||t.modified(a.fields)||e.modified("field"),s&&(r=t.SOURCE,i=+Infinity,o=-Infinity),t.visit(r,function(e){var t=a(e);null!=t&&(t<i&&(i=t),t>o&&(o=t))}),this.value=[i,o]};var _v=bh(Fn,ne);_v.connect=function(e){return this.targets().add(e),e.source=this},_v.add=function(e){this.value.add.push(e)},_v.rem=function(e){this.value.rem.push(e)},_v.mod=function(e){this.value.mod.push(e)},_v.init=function(e){this.value.init(e,e.NO_SOURCE)},_v.evaluate=function(){return this.value};var yv=bh(Bn,sn);yv.activate=function(e){this._targets[this._targets.active++]=e},yv.subflow=function(e,t,n,a){var i=this.value,o=i.hasOwnProperty(e)&&i[e],r,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=a||(s=this._group[e])&&s.tuple,r=n.dataflow,o=r.add(new Fn(n.fork(n.NO_SOURCE),this)).connect(t(r,e,s)),i[e]=o,this.activate(o)),o},yv.transform=function(e,t){function n(e){return i.subflow(e,r,t)}var a=t.dataflow,i=this,o=e.key,r=e.subflow,s=this._keys,l=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=V(e),a=s.get(t);void 0!==a&&(s.delete(t),n(a).rem(e))}),t.visit(t.ADD,function(e){var t=o(e);s.set(V(e),t),n(t).add(e)}),l||t.modified(o.fields)?t.visit(t.MOD,function(e){var t=V(e),a=s.get(t),i=o(e);a===i?n(i).mod(e):(s.set(t,i),n(a).rem(e),n(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(s.get(V(e))).mod(e)}),l&&t.visit(t.REFLOW,function(e){var t=V(e),a=s.get(t),i=o(e);a!==i&&(s.set(t,i),n(a).rem(e),n(i).add(e))}),s.empty>a.cleanThreshold&&a.runAfter(s.clean),t},bh(zn,ne),Un.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};var hv=bh(Un,sn);hv.transform=function(e,t){function n(n){var t=V(n),a=p(n,e),o=i.get(t);a&&o?(i.delete(t),r.push(n)):a||o?c&&a&&!o&&d.push(n):(i.set(t,1),l.push(n))}var a=t.dataflow,i=this.value,o=t.fork(),r=o.add,l=o.rem,d=o.mod,p=e.expr,c=!0;return t.visit(t.REM,function(e){var t=V(e);i.has(t)?i.delete(t):l.push(e)}),t.visit(t.ADD,function(n){p(n,e)?r.push(n):i.set(V(n),1)}),t.visit(t.MOD,n),e.modified()&&(c=!1,t.visit(t.REFLOW,n)),i.empty>a.cleanThreshold&&a.runAfter(i.clean),o},$n.Definition={type:"Fold",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};var bv=bh($n,sn);bv.transform=function(e,t){function a(e){for(var t=r[V(e)]=Array(m),n=0,a;n<m;++n)a=t[n]=X(e),a[p]=u[n],a[c]=l[n](e),g.add.push(a)}function o(e){for(var t=r[V(e)],a=0,i;a<m;++a)_&1<<a&&(i=K(e,t[a],n),i[p]=u[a],i[c]=l[a](e),g.mod.push(i))}var r=this.value,s=e.modified("fields"),l=e.fields,d=e.as||["key","value"],p=d[0],c=d[1],u=l.map(Wn),m=l.length,n=t.stamp,g=t.fork(t.NO_SOURCE),f=0,_=0,i;if(s){for(i in r)g.rem.push.apply(g.rem,r[i]);r=this.value={},t.visit(t.SOURCE,a)}else{for(t.visit(t.ADD,a);f<m;++f)t.modified(l[f].fields)&&(_|=1<<f);_&&t.visit(t.MOD,o),t.visit(t.REM,function(e){var t=V(e);g.rem.push.apply(g.rem,r[t]),r[t]=null})}return g.modifies(d)},Hn.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};var xv=bh(Hn,sn);xv.transform=function(e,t){var n=e.expr,a=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(a),t.visit(o,function(i){i[a]=n(i,e)})};var vv=bh(qn,sn);vv.transform=function(e,n){var a=this.value,i=n.fork(n.ALL),o=e.size-a.length,r=e.generator,s,l,d;if(0<o){for(s=[];0<=--o;)s.push(d=Z(r(e))),a.push(d);i.add=i.add.length?i.materialize(i.ADD).add.concat(s):s}else l=a.slice(0,-o),i.rem=i.rem.length?i.materialize(i.REM).rem.concat(l):l,a=a.slice(-o);return i.source=this.value=a,i};var Sv={value:"value",median:function(e,t){var a=e.length,n=-1,i=[],o;if(null==t)for(;++n<a;)isNaN(o=Mx(e[n]))||i.push(o);else for(;++n<a;)isNaN(o=Mx(t(e[n],n,e)))||i.push(o);return qx(i.sort(Ox),0.5)},mean:function(e,t){var a=e.length,n=a,o=-1,i=0,r;if(null==t)for(;++o<a;)isNaN(r=Mx(e[o]))?--n:i+=r;else for(;++o<a;)isNaN(r=Mx(t(e[o],o,e)))?--n:i+=r;return n?i/n:void 0},min:function(e,t){var a=e.length,n=-1,i,o;if(null==t){for(;++n<a;)if(null!=(i=e[n])&&i>=i)for(o=i;++n<a;)null!=(i=e[n])&&o>i&&(o=i);}else for(;++n<a;)if(null!=(i=t(e[n],n,e))&&i>=i)for(o=i;++n<a;)null!=(i=t(e[n],n,e))&&o>i&&(o=i);return o},max:Yx},Tv=[];Vn.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};var kv=bh(Vn,sn);kv.transform=function(e,a){var o=a.fork(a.ALL),r=Gn(e),s=Jn(e),d=v(e.field),p=v(e.key),c=(e.groupby||[]).map(v),u=Qn(a.source,e.groupby,e.key,e.keyvals),f=[],_=this.value,y=u.domain.length,m,h,b,x,S,g,i,T,l,n;for(S=0,T=u.length;S<T;++S)for(m=u[S],b=m.values,h=NaN,i=0;i<y;++i)if(null==m[i]){for(x=u.domain[i],n={_impute:!0},(g=0,l=b.length);g<l;++g)n[c[g]]=b[g];n[p]=x,n[d]=isNaN(h)?h=r(m,s):h,f.push(Z(n))}return f.length&&(o.add=o.materialize(o.ADD).add.concat(f)),_.length&&(o.rem=o.materialize(o.REM).rem.concat(_)),this.value=f,o},ea.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Ax},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var Ev=bh(ea,kn);Ev.transform=function(e,t){var n=this,a=e.modified(),i;return n.value&&(a||t.modified(n._inputs))?(i=n.value=a?n.init(e):{},t.visit(t.SOURCE,function(e){n.add(e)})):(i=n.value=n.value||this.init(e),t.visit(t.REM,function(e){n.rem(e)}),t.visit(t.ADD,function(e){n.add(e)})),n.changes(),t.visit(t.SOURCE,function(e){gh(e,i[n.cellkey(e)].tuple)}),t.reflow(a).modifies(this._outputs)},Ev.changes=function(){var e=this._adds,t=this._mods,a,i;for(a=0,i=this._alen;a<i;++a)this.celltuple(e[a]),e[a]=null;for(a=0,i=this._mlen;a<i;++a)this.celltuple(t[a]),t[a]=null;this._alen=this._mlen=0},bh(ta,ne),aa.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};var Nv=bh(aa,sn);Nv.transform=function(e,t){var a=t,o=e.as,r=e.fields,s=e.index,i=e.values,l=null==e.default?null:e.default,d=e.modified(),p=d?t.SOURCE:t.ADD,c=r.length,n,u,m;return i?(u=i.length,1<c&&!o&&Wy("Multi-field lookup requires explicit \"as\" parameter."),o&&o.length!==c*u&&Wy("The \"as\" parameter has too few output field names."),o=o||i.map(v),n=function(e){for(var t=0,n=0,a,d;t<c;++t)if(d=s.get(r[t](e)),null==d)for(a=0;a<u;++a,++n)e[o[n]]=l;else for(a=0;a<u;++a,++n)e[o[n]]=i[a](d)}):(!o&&Wy("Missing output field names."),n=function(e){for(var t=0,n;t<c;++t)n=s.get(r[t](e)),e[o[t]]=null==n?l:n}),d?a=t.reflow(!0):(m=r.some(function(e){return t.modified(e.fields)}),p|=m?t.MOD:0),t.visit(p,n),a.modifies(o)},bh(ia,ne),bh(ra,ne),bh(la,sn),la.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)};var Lv=bh(da,Bn);Lv.transform=function(e,n){var a=this,i=e.subflow,o=e.field;return(e.modified("field")||o&&n.modified(m(o)))&&Wy("PreFacet does not support field modification."),this._targets.active=0,n.visit(n.MOD,function(e){var t=a.subflow(V(e),i,n,e);o?o(e).forEach(function(e){t.mod(e)}):t.mod(e)}),n.visit(n.ADD,function(e){var t=a.subflow(V(e),i,n,e);o?o(e).forEach(function(e){t.add(Z(e))}):t.add(e)}),n.visit(n.REM,function(e){var t=a.subflow(V(e),i,n,e);o?o(e).forEach(function(e){t.rem(e)}):t.rem(e)}),n},pa.Definition={type:"Project",metadata:{generates:!0,changes:!0,modifies:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};var Av=bh(pa,sn);Av.transform=function(e,t){var n=e.fields,a=ca(e.fields,e.as),i=n?function(e,i){return ua(e,i,n,a)}:K,o,r;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),o=t.fork(),t.visit(t.REM,function(e){var t=V(e);o.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=i(e,Z({}));r[V(e)]=t,o.add.push(t)}),t.visit(t.MOD,function(e){o.mod.push(i(e,r[V(e)]))}),o};var Cv=bh(ma,sn);Cv.transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var wv=bh(fa,sn);wv.transform=function(e,t){var n,a;return this.value?a=this.value:(n=t=t.addAll(),a=this.value={}),e.derive&&(n=t.fork(),t.visit(t.REM,function(e){var t=V(e);n.rem.push(a[t]),a[t]=null}),t.visit(t.ADD,function(e){var t=X(e);a[V(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(K(e,a[V(e)]))})),n},ga.Definition={type:"Sample",metadata:{source:!0,changes:!0},params:[{name:"size",type:"number",default:1000}]};var Ov=bh(ga,sn);Ov.transform=function(e,t){function a(e){var t,n;l.length<s?l.push(e):(n=~~((d+1)*h.random()),n<l.length&&n>=c&&(t=l[n],u[V(t)]&&o.rem.push(t),l[n]=e)),++d}var o=t.fork(),r=e.modified("size"),s=e.size,l=this.value,d=this.count,c=0,u=l.reduce(function(e,n){return e[V(n)]=1,e},{});if(t.rem.length&&(t.visit(t.REM,function(e){var t=V(e);u[t]&&(u[t]=-1,o.rem.push(e)),--d}),l=l.filter(function(e){return-1!==u[V(e)]})),(t.rem.length||r)&&l.length<s&&t.source&&(c=d=l.length,t.visit(t.SOURCE,function(e){u[V(e)]||a(e)}),c=-1),r&&l.length>s){for(var p=0,i=l.length-s;p<i;++p)u[V(l[p])]=-1,o.rem.push(l[p]);l=l.slice(i)}return t.mod.length&&t.visit(t.MOD,function(e){u[V(e)]&&o.mod.push(e)}),t.add.length&&t.visit(t.ADD,a),(t.add.length||0>c)&&(o.add=l.filter(function(e){return!u[V(e)]})),this.count=d,this.value=o.source=l,o},_a.Definition={type:"Sequence",metadata:{generates:!0,source:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]};var Dv=bh(_a,sn);Dv.transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,n.source=this.value=zx(e.start,e.stop,e.step||1).map(Z),n.add=t.add.concat(this.value),n}};var Pv=bh(ya,sn);Pv.transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var Rv=bh(ha,sn);Rv.transform=function(e,t){function n(e){o.set(i(e),e)}var a=t.dataflow,i=e.field,o=this.value,r=!0;return e.modified("field")||t.modified(i.fields)?(o.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){o.delete(i(e))}),t.visit(t.ADD,n)):r=!1,this.modified(r),o.empty>a.cleanThreshold&&a.runAfter(o.clean),t.fork()};var Iv=bh(ba,sn);Iv.transform=function(e,t){var n=!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields);n&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var Mv={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,a=t.data;return n&&t.compare(a[n-1],a[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,a=t.data;return n&&t.compare(a[n-1],a[n])?++e:e}}},percent_rank:function(){var e=Mv.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,a=t.data,i=t.compare;if(e<n){for(;n+1<a.length&&!i(a[n],a[n+1]);)++n;e=n}return(1+e)/a.length}}},ntile:function(e,t){t=+t,0<t||Wy("ntile num must be greater than zero.");var n=Mv.cume_dist(),a=n.next;return{init:n.init,next:function(e){return p(t*a(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var a=n.index-t;return 0<=a?e(n.data[a]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var a=n.index+t,i=n.data;return a<i.length?e(i[a]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return t=+t,0<t||Wy("nth_value nth must be greater than zero."),{next:function(n){var a=n.i0+(t-1);return a<n.i1?e(n.data[a]):null}}}},Fv=Object.keys(Mv),Bv=va.prototype;Bv.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},Bv.update=function(e,n){var t=this,a=t.cell,i=t.windows,o=e.data,r=i&&i.length,s;if(a){for(s=e.p0;s<e.i0;++s)a.rem(o[s]);for(s=e.p1;s<e.i1;++s)a.add(o[s]);a.set(n)}for(s=0;s<r;++s)i[s].update(e,n)},Ta.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Fv.concat(Ax)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var zv=bh(Ta,sn);zv.transform=function(e,t){function a(e){return o.group(n(e))}var o=this,r=o.state,s=e.modified(),l,i;this.stamp=t.stamp,(!r||s)&&(r=o.state=new va(e));var n=cn(e.groupby);for(s||t.modified(r.inputs)?(o.value={},t.visit(t.SOURCE,function(e){a(e).add(e)})):(t.visit(t.REM,function(e){a(e).remove(e)}),t.visit(t.ADD,function(e){a(e).add(e)})),l=0,i=o._mlen;l<i;++l)ka(o._mods[l],r,e);return o._mlen=0,o._mods=[],t.reflow(s).modifies(r.outputs)},zv.group=function(e){var t=this,n=t.value[e];return n||(n=t.value[e]=ov(V),n.stamp=-1),n.stamp<t.stamp&&(n.stamp=t.stamp,t._mods[t._mlen++]=n),n};var jv=Object.freeze({aggregate:kn,bin:En,collect:Nn,compare:Ln,countpattern:Cn,cross:On,density:Rn,extent:Mn,facet:Bn,field:zn,filter:Un,fold:$n,formula:Hn,generate:qn,impute:Vn,joinaggregate:ea,key:ta,lookup:aa,multiextent:ia,multivalues:ra,params:la,prefacet:da,project:pa,proxy:ma,relay:fa,sample:ga,sequence:_a,sieve:ya,subflow:Fn,tupleindex:ha,values:ba,window:Ta}),tx=La.prototype;tx.clone=function(){return new La(this)},tx.clear=function(){return this.x1=+zy,this.y1=+zy,this.x2=-zy,this.y2=-zy,this},tx.empty=function(){return this.x1===+zy&&this.y1===+zy&&this.x2===-zy&&this.y2===-zy},tx.set=function(e,t,n,a){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),a<t?(this.y2=t,this.y1=a):(this.y1=t,this.y2=a),this},tx.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},tx.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},tx.round=function(){return this.x1=E(this.x1),this.y1=E(this.y1),this.x2=p(this.x2),this.y2=p(this.y2),this},tx.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},tx.rotate=function(e,t,n){var a=c(e),i=s(e),o=t-t*a+n*i,r=n-t*i-n*a,l=this.x1,d=this.x2,p=this.y1,u=this.y2;return this.clear().add(a*l-i*p+o,i*l+a*p+r).add(a*l-i*u+o,i*l+a*u+r).add(a*d-i*p+o,i*d+a*p+r).add(a*d-i*u+o,i*d+a*u+r)},tx.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},tx.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},tx.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},tx.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},tx.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},tx.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},tx.width=function(){return this.x2-this.x1},tx.height=function(){return this.y2-this.y1};var Uv=0,$v=function(e,t){var n=[],a;return a={id:"gradient_"+Uv++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(e,t){return n.push({offset:e,color:t}),a}}};bh(Ca,Aa);var Wv;try{Wv=_("canvas")}catch(t){try{Wv=_("canvas-prebuilt")}catch(e){Wv=null}}var Hv=function(e,t){var n=wa(null,"canvas");if(n&&n.getContext)n.width=e,n.height=t;else if(Wv)try{n=new Wv(e,t)}catch(t){n=null}return n},qv="undefined"==typeof Image?Wv&&Wv.Image||null:Image,Yv=Ia.prototype;Yv.pending=function(){return this._pending},Yv.sanitizeURL=function(e){var t=this;return Ma(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return Fa(t),e}).catch(function(){return Fa(t),null})},Yv.loadImage=function(e){var t=this;return Ma(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var n=e.href;if(!n||!qv)throw{url:n};var a=new qv;return a.onload=function(){Fa(t),a.loaded=!0},a.onerror=function(){Fa(t),a.loaded=!1},a.src=n,a}).catch(function(n){return Fa(t),{loaded:!1,width:0,height:0,src:n&&n.url||""}})},Yv.ready=function(){var e=this;return new Promise(function(t){function n(a){e.pending()?setTimeout(function(){n(!0)},10):t(a)}n(!1)})};var Vv=o,pi=2*Vv,Gv=1e-6;Ba.prototype=za.prototype={constructor:Ba,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,a){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+a)},bezierCurveTo:function(e,t,n,a,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +a+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,n,a,o,s){e=+e,n=+n,a=+a,o=+o,s=+s;var d=this._x1,p=this._y1,c=a-e,m=o-n,f=d-e,g=p-n,_=f*f+g*g;if(0>s)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(!(_>Gv));else if(!(T(g*c-m*f)>Gv)||!s)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var y=a-d,h=o-p,b=c*c+m*m,x=u(b),v=u(_),S=s*t((Vv-i((b+_-(y*y+h*h))/(2*x*v)))/2),l=S/v,k=S/x;T(l-1)>Gv&&(this._+="L"+(e+l*f)+","+(n+l*g)),this._+="A"+s+","+s+",0,0,"+ +(g*y>f*h)+","+(this._x1=e+k*c)+","+(this._y1=n+k*m)}},arc:function(e,t,n,a,i,o){e=+e,t=+t,n=+n;var l=n*c(a),d=n*s(a),p=e+l,u=t+d,m=1^o,f=o?a-i:i-a;if(0>n)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+p+","+u:(T(this._x1-p)>Gv||T(this._y1-u)>Gv)&&(this._+="L"+p+","+u);n&&(0>f&&(f=f%pi+pi),f>pi-Gv?this._+="A"+n+","+n+",0,1,"+m+","+(e-l)+","+(t-d)+"A"+n+","+n+",0,1,"+m+","+(this._x1=p)+","+(this._y1=u):f>Gv&&(this._+="A"+n+","+n+",0,"+ +(f>=Vv)+","+m+","+(this._x1=e+n*c(i))+","+(this._y1=t+n*s(i))))},rect:function(e,t,n,a){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +a+"h"+-n+"Z"},toString:function(){return this._}};var Zv=function(e){return function(){return e}},Xv=T,Kv=By,Jv=c,Qv=N,eS=S,tS=s,nS=u,aS=1e-12,iS=o,oS=iS/2,rS=2*iS;Za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);}}};var sS=function(e){return new Za(e)},lS=function(){function e(e){var p=e.length,n=!1,c,i,d;for(null==r&&(l=s(d=za())),c=0;c<=p;++c)!(c<p&&o(i=e[c],c,e))==n&&((n=!n)?l.lineStart():l.lineEnd()),n&&l.point(+t(i,c,e),+a(i,c,e));if(d)return l=null,d+""||null}var t=Xa,a=Ka,o=Zv(!0),r=null,s=sS,l=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Zv(+n),e):t},e.y=function(t){return arguments.length?(a="function"==typeof t?t:Zv(+t),e):a},e.defined=function(t){return arguments.length?(o="function"==typeof t?t:Zv(!!t),e):o},e.curve=function(t){return arguments.length?(s=t,null!=r&&(l=s(r)),e):s},e.context=function(t){return arguments.length?(null==t?r=l=null:l=s(r=t),e):r},e},dS=function(){function e(e){var t=e.length,n=!1,m=Array(t),f=Array(t),g,i,_,y,d;for(null==p&&(u=c(d=za())),g=0;g<=t;++g){if(!(g<t&&l(y=e[g],g,e))==n)if(n=!n)i=g,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),_=g-1;_>=i;--_)u.point(m[_],f[_]);u.lineEnd(),u.areaEnd()}n&&(m[g]=+a(y,g,e),f[g]=+r(y,g,e),u.point(o?+o(y,g,e):m[g],s?+s(y,g,e):f[g]))}if(d)return u=null,d+""||null}function t(){return lS().defined(l).curve(c).context(p)}var a=Xa,o=null,r=Zv(0),s=Ka,l=Zv(!0),p=null,c=sS,u=null;return e.x=function(t){return arguments.length?(a="function"==typeof t?t:Zv(+t),o=null,e):a},e.x0=function(t){return arguments.length?(a="function"==typeof t?t:Zv(+t),e):a},e.x1=function(t){return arguments.length?(o=null==t?null:"function"==typeof t?t:Zv(+t),e):o},e.y=function(t){return arguments.length?(r="function"==typeof t?t:Zv(+t),s=null,e):r},e.y0=function(t){return arguments.length?(r="function"==typeof t?t:Zv(+t),e):r},e.y1=function(t){return arguments.length?(s=null==t?null:"function"==typeof t?t:Zv(+t),e):s},e.lineX0=e.lineY0=function(){return t().x(a).y(r)},e.lineY1=function(){return t().x(a).y(s)},e.lineX1=function(){return t().x(o).y(r)},e.defined=function(t){return arguments.length?(l="function"==typeof t?t:Zv(!!t),e):l},e.curve=function(t){return arguments.length?(c=t,null!=p&&(u=c(p)),e):c},e.context=function(t){return arguments.length?(null==t?p=u=null:u=c(p=t),e):p},e},pS={draw:function(e,t){var n=u(t/iS);e.moveTo(n,0),e.arc(0,0,n,0,rS)}},cS=function(){};Qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ja(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ja(this,e,t);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};ei.prototype={areaStart:cS,areaEnd:cS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ja(this,e,t);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};ti.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Ja(this,e,t);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};ni.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,n=this._y,a=e.length-1;if(0<a)for(var o=e[0],r=n[0],s=e[a]-o,l=n[a]-r,d=-1,i;++d<=a;)i=d/a,this._basis.point(this._beta*e[d]+(1-this._beta)*(o+i*s),this._beta*n[d]+(1-this._beta)*(r+i*l));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var uS=function e(t){function n(e){return 1===t?new Qa(e):new ni(e,t)}return n.beta=function(t){return e(+t)},n}(0.85);ii.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ai(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ai(this,e,t);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var mS=function e(t){function n(e){return new ii(e,t)}return n.tension=function(t){return e(+t)},n}(0);oi.prototype={areaStart:cS,areaEnd:cS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ai(this,e,t);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var fS=function e(t){function n(e){return new oi(e,t)}return n.tension=function(t){return e(+t)},n}(0);ri.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ai(this,e,t);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var gS=function e(t){function n(e){return new ri(e,t)}return n.tension=function(t){return e(+t)},n}(0);li.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,a=this._y2-t;this._l23_a=u(this._l23_2a=g(n*n+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:si(this,e,t);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var _S=function e(t){function n(e){return t?new li(e,t):new ii(e,0)}return n.alpha=function(t){return e(+t)},n}(0.5);di.prototype={areaStart:cS,areaEnd:cS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,a=this._y2-t;this._l23_a=u(this._l23_2a=g(n*n+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:si(this,e,t);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var yS=function e(t){function n(e){return t?new di(e,t):new oi(e,0)}return n.alpha=function(t){return e(+t)},n}(0.5);ci.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,a=this._y2-t;this._l23_a=u(this._l23_2a=g(n*n+a*a,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:si(this,e,t);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var hS=function e(t){function n(e){return t?new ci(e,t):new ri(e,0)}return n.alpha=function(t){return e(+t)},n}(0.5);ui.prototype={areaStart:cS,areaEnd:cS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_i(this,this._t0,gi(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_i(this,gi(this,n=fi(this,e,t)),n);break;default:_i(this,this._t0,n=fi(this,e,t));}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(hi.prototype=Object.create(yi.prototype)).point=function(e,t){yi.prototype.point.call(this,t,e)},bi.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,i,o){this._context.bezierCurveTo(t,e,a,n,o,i)}},xi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===a)this._context.lineTo(e[1],t[1]);else for(var n=vi(e),i=vi(t),o=0,r=1;r<a;++o,++r)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],e[r],t[r]);(this._line||0!==this._line&&1===a)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};Si.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(0>=this._t)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};var bS={basis:{curve:function(e){return new Qa(e)}},"basis-closed":{curve:function(e){return new ei(e)}},"basis-open":{curve:function(e){return new ti(e)}},bundle:{curve:uS,tension:"beta",value:0.85},cardinal:{curve:mS,tension:"tension",value:0},"cardinal-open":{curve:gS,tension:"tension",value:0},"cardinal-closed":{curve:fS,tension:"tension",value:0},"catmull-rom":{curve:_S,tension:"alpha",value:0.5},"catmull-rom-closed":{curve:yS,tension:"alpha",value:0.5},"catmull-rom-open":{curve:hS,tension:"alpha",value:0.5},linear:{curve:sS},"linear-closed":{curve:function(e){return new ui(e)}},monotone:{horizontal:function(e){return new hi(e)},vertical:function(e){return new yi(e)}},natural:{curve:function(e){return new xi(e)}},step:{curve:function(e){return new Si(e,0.5)}},"step-after":{curve:function(e){return new Si(e,1)}},"step-before":{curve:function(e){return new Si(e,0)}}},xS={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},vS=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],SS=function(e){var t=[],a,o,r,s,l,d,p,c,i,u,n;for(a=e.slice().replace(vS[0],"###$1").split(vS[1]).slice(1),c=0,u=a.length;c<u;++c){for(o=a[c],r=o.slice(1).trim().replace(vS[2],"$1###$2").split(vS[3]),d=o.charAt(0),s=[d],(i=0,n=r.length);i<n;++i)(l=+r[i])===l&&s.push(l);if(p=xS[d.toLowerCase()],s.length-1>p)for(i=1,n=s.length;i<n;i+=p)t.push([d].concat(s.slice(i,i+p)));else t.push(s)}return t},TS={},kS={},ES=[].join,NS=["l",0,0,0,0,0,0,0],LS=function(e,n,a,o,t){var r=null,s=0,l=0,d=0,p=0,c,u,m,f,g;null==a&&(a=0),null==o&&(o=0),null==t&&(t=1),e.beginPath&&e.beginPath();for(var _=0,i=n.length;_<i;++_){switch(c=n[_],1!==t&&(c=Ni(c,t)),c[0]){case"l":s+=c[1],l+=c[2],e.lineTo(s+a,l+o);break;case"L":s=c[1],l=c[2],e.lineTo(s+a,l+o);break;case"h":s+=c[1],e.lineTo(s+a,l+o);break;case"H":s=c[1],e.lineTo(s+a,l+o);break;case"v":l+=c[1],e.lineTo(s+a,l+o);break;case"V":l=c[1],e.lineTo(s+a,l+o);break;case"m":s+=c[1],l+=c[2],e.moveTo(s+a,l+o);break;case"M":s=c[1],l=c[2],e.moveTo(s+a,l+o);break;case"c":u=s+c[5],m=l+c[6],d=s+c[3],p=l+c[4],e.bezierCurveTo(s+c[1]+a,l+c[2]+o,d+a,p+o,u+a,m+o),s=u,l=m;break;case"C":s=c[5],l=c[6],d=c[3],p=c[4],e.bezierCurveTo(c[1]+a,c[2]+o,d+a,p+o,s+a,l+o);break;case"s":u=s+c[3],m=l+c[4],d=2*s-d,p=2*l-p,e.bezierCurveTo(d+a,p+o,s+c[1]+a,l+c[2]+o,u+a,m+o),d=s+c[1],p=l+c[2],s=u,l=m;break;case"S":u=c[3],m=c[4],d=2*s-d,p=2*l-p,e.bezierCurveTo(d+a,p+o,c[1]+a,c[2]+o,u+a,m+o),s=u,l=m,d=c[1],p=c[2];break;case"q":u=s+c[3],m=l+c[4],d=s+c[1],p=l+c[2],e.quadraticCurveTo(d+a,p+o,u+a,m+o),s=u,l=m;break;case"Q":u=c[3],m=c[4],e.quadraticCurveTo(c[1]+a,c[2]+o,u+a,m+o),s=u,l=m,d=c[1],p=c[2];break;case"t":u=s+c[1],m=l+c[2],null===r[0].match(/[QqTt]/)?(d=s,p=l):"t"===r[0]?(d=2*s-f,p=2*l-g):"q"===r[0]&&(d=2*s-d,p=2*l-p),f=d,g=p,e.quadraticCurveTo(d+a,p+o,u+a,m+o),s=u,l=m,d=s+c[1],p=l+c[2];break;case"T":u=c[1],m=c[2],d=2*s-d,p=2*l-p,e.quadraticCurveTo(d+a,p+o,u+a,m+o),s=u,l=m;break;case"a":Li(e,s+a,l+o,[c[1],c[2],c[3],c[4],c[5],c[6]+s+a,c[7]+l+o]),s+=c[6],l+=c[7];break;case"A":Li(e,s+a,l+o,[c[1],c[2],c[3],c[4],c[5],c[6]+a,c[7]+o]),s=c[6],l=c[7];break;case"z":case"Z":e.closePath();}r=c}},AS=1.7320508075688772/2,CS={circle:{draw:function(e,t){var n=u(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,2*o)}},cross:{draw:function(e,t){var n=u(t)/2,a=n/2.5;e.moveTo(-n,-a),e.lineTo(-n,a),e.lineTo(-a,a),e.lineTo(-a,n),e.lineTo(a,n),e.lineTo(a,a),e.lineTo(n,a),e.lineTo(n,-a),e.lineTo(a,-a),e.lineTo(a,-n),e.lineTo(-a,-n),e.lineTo(-a,-a),e.closePath()}},diamond:{draw:function(e,t){var n=u(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=u(t),a=-n/2;e.rect(a,a,n,n)}},"triangle-up":{draw:function(e,t){var n=u(t)/2,a=AS*n;e.moveTo(0,-a),e.lineTo(-n,a),e.lineTo(n,a),e.closePath()}},"triangle-down":{draw:function(e,t){var n=u(t)/2,a=AS*n;e.moveTo(0,a),e.lineTo(-n,-a),e.lineTo(n,-a),e.closePath()}},"triangle-right":{draw:function(e,t){var n=u(t)/2,a=AS*n;e.moveTo(a,0),e.lineTo(-a,-n),e.lineTo(-a,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=u(t)/2,a=AS*n;e.moveTo(-a,0),e.lineTo(a,-n),e.lineTo(a,n),e.closePath()}}},wS={},OS=function(){function e(e,s,l){var d=null==s?+t.call(this,e):s,p=null==l?+n.call(this,e):l,c=+a.call(this,e),u=+i.call(this,e),m=+o.call(this,e),f;if(r||(r=f=za()),0>=m)r.rect(d,p,c,u);else{var g=d+c,_=p+u;r.moveTo(d+m,p),r.lineTo(g-m,p),r.quadraticCurveTo(g,p,g,p+m),r.lineTo(g,_-m),r.quadraticCurveTo(g,_,g-m,_),r.lineTo(d+m,_),r.quadraticCurveTo(d,_,d,_-m),r.lineTo(d,p+m),r.quadraticCurveTo(d,p,d+m,p),r.closePath()}return f?(r=null,f+""||null):void 0}var t=wi,n=Oi,a=Di,i=Pi,o=Ri(0),r=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Ri(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Ri(+t),e):n},e.width=function(t){return arguments.length?(a="function"==typeof t?t:Ri(+t),e):a},e.height=function(t){return arguments.length?(i="function"==typeof t?t:Ri(+t),e):i},e.cornerRadius=function(t){return arguments.length?(o="function"==typeof t?t:Ri(+t),e):o},e.context=function(t){return arguments.length?(r=null==t?null:t,e):r},e},DS=o,PS=function(){function e(e,o,r){var s=r/2;if(p){var l=i-o,c=e-n;if(l||c){var m=u(l*l+c*c),f=(l/=m)*d,g=(c/=m)*d,_=By(c,l);a.moveTo(n-f,i-g),a.lineTo(e-l*s,o-c*s),a.arc(e,o,s,_-DS,_),a.lineTo(n+f,i+g),a.arc(n,i,d,_,_+DS)}else a.arc(e,o,s,0,2*DS);a.closePath()}else p=1;n=e,i=o,d=s}function t(t){var c=t.length,n=!1,u,i,d;for(null==a&&(a=d=za()),u=0;u<=c;++u)!(u<c&&l(i=t[u],u,t))==n&&(n=!n)&&(p=0),n&&e(+o(i,u,t),+r(i,u,t),+s(i,u,t));if(d)return a=null,d+""||null}var a=null,o,r,s,l,p,n,i,d;return t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(l=e,t):l},t.context=function(e){return arguments.length?(a=null==e?null:e,t):a},t},RS=function(){function e(){var e=+t.apply(this,arguments),d=+n.apply(this,arguments),p=o.apply(this,arguments)-oS,c=s.apply(this,arguments)-oS,u=Xv(c-p),m=c>p,f,g;if(l||(l=f=za()),d<e&&(g=d,d=e,e=g),!(d>aS))l.moveTo(0,0);else if(u>rS-aS)l.moveTo(d*Jv(p),d*tS(p)),l.arc(0,0,d,p,c,!m),e>aS&&(l.moveTo(e*Jv(c),e*tS(c)),l.arc(0,0,e,c,p,m));else{var _=p,y=c,h=p,b=c,x=u,v=u,S=r.apply(this,arguments)/2,T=S>aS&&(i?+i.apply(this,arguments):nS(e*e+d*d)),k=eS(Xv(d-e)/2,+a.apply(this,arguments)),E=k,N=k,A,C;if(T>aS){var w=Ua(T/e*tS(S)),O=Ua(T/d*tS(S));(x-=2*w)>aS?(w*=m?1:-1,h+=w,b-=w):(x=0,h=b=(p+c)/2),(v-=2*O)>aS?(O*=m?1:-1,_+=O,y-=O):(v=0,_=y=(p+c)/2)}var D=d*Jv(_),P=d*tS(_),R=e*Jv(b),I=e*tS(b);if(k>aS){var M=d*Jv(y),F=d*tS(y),B=e*Jv(h),z=e*tS(h);if(u<iS){var j=x>aS?Va(D,P,B,z,M,F,R,I):[R,I],U=D-j[0],$=P-j[1],W=M-j[0],H=F-j[1],q=1/tS(ja((U*W+$*H)/(nS(U*U+$*$)*nS(W*W+H*H)))/2),Y=nS(j[0]*j[0]+j[1]*j[1]);E=eS(k,(e-Y)/(q-1)),N=eS(k,(d-Y)/(q+1))}}v>aS?N>aS?(A=Ga(B,z,D,P,d,N,m),C=Ga(M,F,R,I,d,N,m),l.moveTo(A.cx+A.x01,A.cy+A.y01),N<k?l.arc(A.cx,A.cy,N,Kv(A.y01,A.x01),Kv(C.y01,C.x01),!m):(l.arc(A.cx,A.cy,N,Kv(A.y01,A.x01),Kv(A.y11,A.x11),!m),l.arc(0,0,d,Kv(A.cy+A.y11,A.cx+A.x11),Kv(C.cy+C.y11,C.cx+C.x11),!m),l.arc(C.cx,C.cy,N,Kv(C.y11,C.x11),Kv(C.y01,C.x01),!m))):(l.moveTo(D,P),l.arc(0,0,d,_,y,!m)):l.moveTo(D,P),e>aS&&x>aS?E>aS?(A=Ga(R,I,M,F,e,-E,m),C=Ga(D,P,B,z,e,-E,m),l.lineTo(A.cx+A.x01,A.cy+A.y01),E<k?l.arc(A.cx,A.cy,E,Kv(A.y01,A.x01),Kv(C.y01,C.x01),!m):(l.arc(A.cx,A.cy,E,Kv(A.y01,A.x01),Kv(A.y11,A.x11),!m),l.arc(0,0,e,Kv(A.cy+A.y11,A.cx+A.x11),Kv(C.cy+C.y11,C.cx+C.x11),m),l.arc(C.cx,C.cy,E,Kv(C.y11,C.x11),Kv(C.y01,C.x01),!m))):l.arc(0,0,e,b,h,m):l.lineTo(R,I)}return(l.closePath(),f)?(l=null,f+""||null):void 0}var t=$a,n=Wa,a=Zv(0),i=null,o=Ha,s=qa,r=Ya,l=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,i=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-iS/2;return[Jv(i)*e,tS(i)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Zv(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Zv(+t),e):n},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:Zv(+t),e):a},e.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Zv(+t),e):i},e.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Zv(+t),e):o},e.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:Zv(+t),e):s},e.padAngle=function(t){return arguments.length?(r="function"==typeof t?t:Zv(+t),e):r},e.context=function(t){return arguments.length?(l=null==t?null:t,e):l},e}().startAngle(function(e){return e.startAngle||0}).endAngle(function(e){return e.endAngle||0}).padAngle(function(e){return e.padAngle||0}).innerRadius(function(e){return e.innerRadius||0}).outerRadius(function(e){return e.outerRadius||0}).cornerRadius(y),IS=dS().x(Ii).y1(x).y0(function(e){return(e.y||0)+(e.height||0)}).defined(Mi),MS=dS().y(x).x1(Ii).x0(function(e){return(e.x||0)+(e.width||0)}).defined(Mi),FS=lS().x(Ii).y(x).defined(Mi),BS=OS().x(Ii).y(x).width(function(e){return e.width||0}).height(function(e){return e.height||0}).cornerRadius(y),zS=function(){function e(){var e;if(a||(a=e=za()),t.apply(this,arguments).draw(a,+n.apply(this,arguments)),e)return a=null,e+""||null}var t=Zv(pS),n=Zv(64),a=null;return e.type=function(n){return arguments.length?(t="function"==typeof n?n:Zv(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:Zv(+t),e):n},e.context=function(t){return arguments.length?(a=null==t?null:t,e):a},e}().type(function(e){return Ai(e.shape||"circle")}).size(function(e){return null==e.size?64:e.size}),jS=PS().x(Ii).y(x).defined(Mi).size(function(e){return e.size||1}),US=function(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null==t.strokeWidth?1:+t.strokeWidth),e},$S=2*o,WS=$S/4,HS;Bi.beginPath=zi,Bi.closePath=zi,Bi.moveTo=ji,Bi.lineTo=ji,Bi.rect=function(e,t,n,a){ji(e,t),ji(e+n,t+a)},Bi.quadraticCurveTo=function(e,t,n,a){ji(e,t),ji(n,a)},Bi.bezierCurveTo=function(e,t,n,a,i,o){ji(e,t),ji(n,a),ji(i,o)},Bi.arc=function(e,t,n,a,o,r){function l(e){i=n*c(e),_=n*s(e),i<d&&(d=i),i>p&&(p=i),_<u&&(u=_),_>m&&(m=_)}if(T(o-a)>$S-1e-8)return ji(e-n,t-n),void ji(e+n,t+n);var d=Infinity,p=-Infinity,u=Infinity,m=-Infinity,f,g,i,_;if(l(a),l(o),o!==a)if(a%=$S,0>a&&(a+=$S),o%=$S,0>o&&(o+=$S),o<a&&(r=!r,f=a,a=o,o=f),r)for(o-=$S,f=a-a%WS,g=0;3>g&&f>o;++g,f-=WS)l(f);else for(f=a-a%WS+WS,g=0;3>g&&f<o;++g,f+=WS)l(f);ji(e+d,t+u),ji(e+p,t+m)};var qS=function(e,t,a){for(var o=a.width(),r=a.height(),s=a.x1+t.x1*o,l=a.y1+t.y1*r,d=a.x1+t.x2*o,p=a.y1+t.y2*r,c=t.stops,u=0,i=c.length,n=e.createLinearGradient(s,l,d,p);u<i;++u)n.addColorStop(c[u].offset,c[u].color);return n},YS=function(e,t,n){return n.id?qS(e,n,t.bounds):n},VS=function(e,t,n){return n*=null==t.fillOpacity?1:t.fillOpacity,!!(0<n)&&(e.globalAlpha=n,e.fillStyle=YS(e,t,t.fill),!0)},GS=[],ZS=function(e,t,n){var a=null==(a=t.strokeWidth)?1:a;return!(0>=a)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity,!!(0<n)&&(e.globalAlpha=n,e.strokeStyle=YS(e,t,t.stroke),e.lineWidth=a,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||GS),e.lineDashOffset=t.strokeDashOffset||0),!0))},XS=function(){return!0},KS=function(e,t){return"translate("+e+","+t+")"},JS=function(e){return KS(e.x||0,e.y||0)},QS=function(e,t){function n(e,n){var a=n.x||0,i=n.y||0;e.translate(a,i),e.beginPath(),t(e,n),e.translate(-a,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",JS(n)),e("d",t(null,n))},bound:function(e,n){return t(Bi(e),n),US(e,n).translate(n.x||0,n.y||0)},draw:qi(n),pick:Xi(n)}},eT=QS("arc",function(e,t){return RS.context(e)(t)}),tT=function(e,t){function n(e,n){e.beginPath(),t(e,n)}var a=Zi(n);return{type:e,tag:"path",nested:!0,attr:function(e,n){var a=n.mark.items;a.length&&e("d",t(null,a))},bound:function(e,n){var a=n.items;return 0===a.length?e:(t(Bi(e),a),US(e,a[0]))},draw:Yi(n),pick:function(e,t,n,i,o,r){var s=t.items,l=t.bounds;return s&&s.length&&(!l||l.contains(o,r))?(1<e.pixelRatio&&(n*=e.pixelRatio,i*=e.pixelRatio),a(e,s,n,i)?s[0]:null):null}}},nT=tT("area",function(e,t){var n=t[0],a=n.interpolate||"linear";return("horizontal"===n.orient?MS:IS).curve(Ti(a,n.orient,n.tension)).context(e)(t)}),aT=1,iT=function(e,t,n){var a=e._defs,i=t.clip_id||(t.clip_id="clip"+aT++),o=a.clipping[i]||(a.clipping[i]={id:i});return o.width=n.width||0,o.height=n.height||0,"url(#"+i+")"},oT=0.5,rT={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var i=Ji(t,n),o=t.x||0,r=t.y||0,s=(null==t.width?i.width:t.width)||0,l=(null==t.height?i.height:t.height)||0,d=!1===t.aspect?"none":"xMidYMid";o-=Qi(t.align,s),r-=eo(t.baseline,l),e("href",i.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",KS(o,r)),e("width",s),e("height",l),e("preserveAspectRatio",d)},bound:function(e,t){var n=t.image,a=t.x||0,i=t.y||0,o=(null==t.width?n&&n.width:t.width)||0,r=(null==t.height?n&&n.height:t.height)||0;return a-=Qi(t.align,o),i-=eo(t.baseline,r),e.set(a,i,a+o,i+r)},draw:function(e,t,n){var a=this;Wi(t,function(i){if(!n||n.intersects(i.bounds)){var o=Ji(i,a),r=i.x||0,s=i.y||0,l=(null==i.width?o.width:i.width)||0,d=(null==i.height?o.height:i.height)||0,p,c,u,m;r-=Qi(i.align,l),s-=eo(i.baseline,d),!1!==i.aspect&&(c=o.width/o.height,u=i.width/i.height,c===c&&u===u&&c!==u&&(u<c?(m=l/c,s+=(d-m)/2,d=m):(m=d*c,r+=(l-m)/2,l=m))),o.loaded&&(e.globalAlpha=null==(p=i.opacity)?1:p,e.drawImage(o,r,s,l,d))}})},pick:Gi(),get:Ji,xOffset:Qi,yOffset:eo},sT=tT("line",function(e,t){var n=t[0],a=n.interpolate||"linear";return FS.curve(Ti(a,n.orient,n.tension)).context(e)(t)}),lT={type:"path",tag:"path",nested:!1,attr:function(e,t){e("transform",JS(t)),e("d",t.path)},bound:function(e,t){return to(Bi(e),t)?e.set(0,0,0,0):US(e,t)},draw:qi(to),pick:Xi(to)},dT={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Fi(null,t))},bound:function(e,t){var n,a;return US(e.set(n=t.x||0,a=t.y||0,n+t.width||0,a+t.height||0),t)},draw:qi(no),pick:Xi(no)},pT={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",JS(t)),e("x2",null==t.x2?0:t.x2-(t.x||0)),e("y2",null==t.y2?0:t.y2-(t.y||0))},bound:function(e,t){var n,a;return US(e.set(n=t.x||0,a=t.y||0,null==t.x2?n:t.x2,null==t.y2?a:t.y2),t)},draw:function(e,t,n){Wi(t,function(t){if(!n||n.intersects(t.bounds)){var a=null==t.opacity?1:t.opacity;a&&ao(e,t,a)&&e.stroke()}})},pick:Gi(function(e,t,n,a){return!!e.isPointInStroke&&ao(e,t,1)&&e.isPointInStroke(n,a)})},cT=QS("shape",function(e,t){return(t.mark.shape||t.shape).context(e)(t)}),uT=QS("symbol",function(e,t){return zS.context(e)(t)}),mT={height:po,measureWidth:ro,estimateWidth:io,width:io,canvas:lo},fT,gT;lo(!0);var _T={left:"start",center:"middle",right:"end"},yT=new La,hT={type:"text",tag:"text",nested:!1,attr:function(e,n){var i=n.dx||0,l=(n.dy||0)+fo(n),d=n.x||0,p=n.y||0,u=n.angle||0,a=n.radius||0,r;a&&(r=(n.theta||0)-o/2,d+=a*c(r),p+=a*s(r)),e("text-anchor",_T[n.align]||"start"),u?(r=KS(d,p)+" rotate("+u+")",(i||l)&&(r+=" "+KS(i,l))):r=KS(d+i,p+l),e("transform",r)},bound:go,draw:function(e,t,n){Wi(t,function(a){var i,l,d,p,r,t;(!n||n.intersects(a.bounds))&&(t=co(a))&&(i=null==a.opacity?1:a.opacity,0===i||(e.font=mo(a),e.textAlign=a.align||"left",l=a.x||0,d=a.y||0,(p=a.radius)&&(r=(a.theta||0)-o/2,l+=p*c(r),d+=p*s(r)),a.angle&&(e.save(),e.translate(l,d),e.rotate(a.angle*o/180),l=d=0),l+=a.dx||0,d+=(a.dy||0)+fo(a),a.fill&&VS(e,a,i)&&e.fillText(t,l,d),a.stroke&&ZS(e,a,i)&&e.strokeText(t,l,d),a.angle&&e.restore()))})},pick:Gi(function(e,t,n,i,r,l){if(0>=t.fontSize)return!1;if(!t.angle)return!0;var d=go(yT,t,!0),p=-t.angle*o/180,a=c(p),u=s(p),m=t.x,f=t.y;return d.contains(a*r-u*l+(m-m*a+f*u),u*r+a*l+(f-m*u-f*a))})},bT=tT("trail",function(e,t){return jS.context(e)(t)}),xT={arc:eT,area:nT,group:{type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",JS(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,a=0,i=n.length;a<i;++a)e.union(n[a].bounds);return(t.clip||t.width||t.height)&&US(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var a=this;Wi(t,function(t){var i=t.x||0,o=t.y||0,r=t.width||0,s=t.height||0,l,d;e.save(),e.translate(i,o),(t.stroke||t.fill)&&(d=null==t.opacity?1:t.opacity,0<d&&(e.beginPath(),l=t.stroke?oT:0,Fi(e,t,l,l),t.fill&&VS(e,t,d)&&e.fill(),t.stroke&&ZS(e,t,d)&&e.stroke())),t.clip&&(e.beginPath(),e.rect(0,0,r,s),e.clip()),n&&n.translate(-i,-o),Wi(t,function(t){a.draw(e,t,n)}),n&&n.translate(i,o),e.restore()})},pick:function(e,t,n,a,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;var r=this;return Hi(t,function(s){var l,d,p,c;if(c=s.bounds,!c||c.contains(i,o))return(d=s.x||0,p=s.y||0,e.save(),e.translate(d,p),d=i-d,p=o-p,l=Hi(s,function(e){return Ki(e,d,p)?r.pick(e,n,a,d,p):null}),e.restore(),l)?l:(l=!1!==t.interactive&&(s.fill||s.stroke)&&0<=d&&d<=s.width&&0<=p&&p<=s.height,l?s:null)})},background:function(e,t){var n=t.stroke?oT:0;e("class","background"),e("d",Fi(null,t,n,n))},foreground:function(e,t,n){var a=t.clip?iT(n,t,t):null;e("clip-path",a)}},image:rT,line:sT,path:lT,rect:dT,rule:pT,shape:cT,symbol:uT,text:hT,trail:bT},vT=function(e,t,n){var a=xT[e.mark.marktype],i=t||a.bound;return a.nested&&(e=e.mark),i(e.bounds||(e.bounds=new La),e,n)},ST={mark:null},TT=function(e,t,a){var o=xT[e.marktype],r=o.bound,s=e.items,l=s&&s.length,d,i,n,p;if(o.nested)return l?n=s[0]:(ST.mark=e,n=ST),p=vT(n,r,a),t=t&&t.union(p)||p,t;if(t=t||e.bounds&&e.bounds.clear()||new La,l)for(d=0,i=s.length;d<i;++d)t.union(vT(s[d],r,a));return e.bounds=t},kT=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],ET=bo.prototype;ET.toJSON=function(e){return _o(this.root,e||0)},ET.mark=function(e,t,n){t=t||this.root.items[0];var a=xo(e,t);return t.items[n]=a,a.zindex&&(a.group.zdirty=!0),a};var NT=vo.prototype;NT.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},NT.element=function(){return this._el},NT.origin=function(e){return this._origin=e||[0,0],this},NT.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},NT.on=function(){},NT.off=function(){},NT.handlers=function(){var e=this._handlers,t=[],n;for(n in e)t.push.apply(t,e[n]);return t},NT.eventName=function(e){var t=e.indexOf(".");return 0>t?e:e.slice(0,t)},NT.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(function(n){var i=new MouseEvent(t.type,t),e=wa(null,"a");for(var a in n)e.setAttribute(a,n[a]);e.dispatchEvent(i)}).catch(function(){})},NT.handleTooltip=function(e,t,n){this._el.setAttribute("title",n||"")};var LT=So.prototype;LT.initialize=function(e,t,n,a){return this._el=e,this.resize(t,n,a)},LT.element=function(){return this._el},LT.scene=function(){return this._el&&this._el.firstChild},LT.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},LT.resize=function(e,t,n){return this._width=e,this._height=t,this._origin=n||[0,0],this},LT.dirty=function(){},LT.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},LT._render=function(){},LT.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},LT._load=function(e,t){var n=this,a=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return a},LT.sanitizeURL=function(e){return this._load("sanitizeURL",e)},LT.loadImage=function(e){return this._load("loadImage",e)};var AT=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]},CT=bh(To,vo);CT.initialize=function(e,t,n){var a=this._canvas=e&&Oa(e,"canvas");if(a){var i=this;this.events.forEach(function(e){a.addEventListener(e,function(t){CT[e]?CT[e].call(i,t):i.fire(e,t)})})}return vo.prototype.initialize.call(this,e,t,n)},CT.canvas=function(){return this._canvas},CT.context=function(){return this._canvas.getContext("2d")},CT.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],CT.DOMMouseScroll=function(e){this.fire("mousewheel",e)},CT.mousemove=ko("mousemove","mouseover","mouseout"),CT.dragover=ko("dragover","dragenter","dragleave"),CT.mouseout=Eo("mouseout"),CT.dragleave=Eo("dragleave"),CT.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},CT.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},CT.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},CT.touchmove=function(e){this.fire("touchmove",e,!0)},CT.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},CT.fire=function(e,t,n){var o=n?this._touch:this._active,a=this._handlers[e],r,i;if("click"===e&&o&&o.href?this.handleHref(t,o,o.href):("mouseover"===e||"mouseout"===e)&&o&&o.tooltip&&this.handleTooltip(t,o,"mouseover"===e?o.tooltip:null),a)for(t.vegaType=e,r=0,i=a.length;r<i;++r)a[r].handler.call(this._obj,t,o)},CT.on=function(e,t){var n=this.eventName(e),a=this._handlers;return(a[n]||(a[n]=[])).push({type:e,handler:t}),this},CT.off=function(e,t){var n=this.eventName(e),a=this._handlers[n],o;if(a){for(o=a.length;0<=--o;)a[o].type===e&&(t&&a[o].handler!==t||a.splice(o,1));return this}},CT.pickEvent=function(e){var t=AT(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},CT.pick=function(e,t,n,a,i){var o=this.context(),r=xT[e.marktype];return r.pick.call(this,o,e,t,n,a,i)};var wT=function(e,t){var n=t.group;e.save(),e.beginPath(),e.rect(0,0,n.width||0,n.height||0),e.clip()},OT="undefined"==typeof window?1:window.devicePixelRatio||1,DT=function(e,t,n,a){var i="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,o=e.getContext("2d"),r=i?OT:1;return e.width=t*r,e.height=n*r,1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=r,o.setTransform(r,0,0,r,r*a[0],r*a[1]),e},PT=bh(No,So),RT=So.prototype,IT=new La;PT.initialize=function(e,t,n,a){return this._canvas=Hv(1,1),e&&(Pa(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),RT.initialize.call(this,e,t,n,a)},PT.resize=function(e,t,n){return RT.resize.call(this,e,t,n),DT(this._canvas,this._width,this._height,this._origin),this._redraw=!0,this},PT.canvas=function(){return this._canvas},PT.context=function(){return this._canvas?this._canvas.getContext("2d"):null},PT.dirty=function(e){var t=Ao(e.bounds,e.mark.group);this._dirty.union(t)},PT._render=function(e){var t=this.context(),n=this._origin,a=this._width,i=this._height,o=this._dirty;return t.save(),this._redraw||o.empty()?(this._redraw=!1,o=null):o=Lo(t,o,n),this.clear(-n[0],-n[1],a,i),this.draw(t,e,o),t.restore(),this._dirty.clear(),this},PT.draw=function(e,t,n){var a=xT[t.marktype];t.clip&&wT(e,t),a.draw.call(this,e,t,n),t.clip&&e.restore()},PT.clear=function(e,t,n,a){var i=this.context();i.clearRect(e,t,n,a),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,a))};var MT=bh(Co,vo);MT.initialize=function(e,t,n){var a=this._svg;return a&&(a.removeEventListener("click",this._hrefHandler),a.removeEventListener("mouseover",this._tooltipHandler),a.removeEventListener("mouseout",this._tooltipHandler)),this._svg=a=e&&Oa(e,"svg"),a&&(a.addEventListener("click",this._hrefHandler),a.addEventListener("mouseover",this._tooltipHandler),a.addEventListener("mouseout",this._tooltipHandler)),vo.prototype.initialize.call(this,e,t,n)},MT.svg=function(){return this._svg},MT.on=function(e,t){var n=this.eventName(e),a=this._handlers,i={type:e,handler:t,listener:wo(this,t)};return(a[n]||(a[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener),this},MT.off=function(e,t){var n=this.eventName(e),a=this._svg,o=this._handlers[n],r;if(o){for(r=o.length;0<=--r;)(o[r].type!==e||t)&&o[r].handler!==t||(this._svg&&a.removeEventListener(n,o[r].listener),o.splice(r,1));return this}};var FT={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},BT={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},zT=Object.keys(BT),jT=FT.xmlns,ns=bh(Po,So),UT=So.prototype;ns.initialize=function(e,t,n,a){return e&&(this._svg=Da(e,0,"svg",jT),this._svg.setAttribute("class","marks"),Pa(e,1),this._root=Da(this._svg,0,"g",jT),Pa(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),UT.initialize.call(this,e,t,n,a)},ns.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),UT.background.apply(this,arguments)},ns.resize=function(e,t,n){return UT.resize.call(this,e,t,n),this._svg&&(this._svg.setAttribute("width",this._width),this._svg.setAttribute("height",this._height),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},ns.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width,height:this._height,viewBox:"0 0 "+this._width+" "+this._height};for(var t in FT)e[t]=FT[t];return Oo("svg",e)+this._svg.innerHTML+Do("svg")},ns._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),Pa(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},ns.updateDefs=function(){var e=this._svg,t=this._defs,n=t.el,a=0,i;for(i in t.gradient)n||(t.el=n=Da(e,0,"defs",jT)),Ro(n,t.gradient[i],a++);for(i in t.clipping)n||(t.el=n=Da(e,0,"defs",jT)),Io(n,t.clipping[i],a++);n&&(0==a?(e.removeChild(n),t.el=null):Pa(n,a))},ns._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},ns.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},ns.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},ns._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t=++this._dirtyID,a,r,s,l,d,i,n;for(d=0,i=e.length;d<i;++d){if(a=e[d],r=a.mark,r.marktype!==s&&(s=r.marktype,l=xT[s]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,r.dirty=t,Mo(r.group,t)),a.exit){l.nested&&r.items.length?(n=r.items[0],n._svg&&this._update(l,n._svg,n)):a._svg&&(n=a._svg.parentNode,n&&n.removeChild(a._svg)),a._svg=null;continue}a=l.nested?r.items[0]:a,a._update===t||(a._svg&&a._svg.ownerSVGElement?this._update(l,a._svg,a):(this._dirtyAll=!1,Mo(a,t)),a._update=t)}return!this._dirtyAll},ns.draw=function(e,t,n){function a(e){var t=o.isDirty(e),n=Bo(e,i,d,r.tag);t&&(o._update(r,n,e),l&&Fo(o,n,e)),d=n,++p}if(!this.isDirty(t))return t._svg;var o=this,r=xT[t.marktype],s=!1===t.interactive?"none":null,l="g"===r.tag,d=null,p=0,i;return i=Bo(t,e,n,"g"),i.setAttribute("class",Ra(t)),!l&&s&&i.style.setProperty("pointer-events",s),t.clip&&i.setAttribute("clip-path",iT(o,t,t.group)),r.nested?t.items.length&&a(t.items[0]):Wi(t,a),Pa(i,p),i};var $T=null,WT=null,HT={group:function(e,t,n){WT=t.__values__,$T=t.childNodes[1],e.foreground(zo,n,this),$T=t.childNodes[0],e.background(zo,n,this);var a=!1===n.mark.interactive?"none":null;a!==WT.events&&($T.style.setProperty("pointer-events",a),WT.events=a)},text:function(e,t,n){var a=co(n);a!==WT.text&&(t.textContent=a,WT.text=a),a=mo(n),a!==WT.font&&(t.style.setProperty("font",a),WT.font=a)}};ns._update=function(e,t,n){$T=t,WT=t.__values__,e.attr(zo,n,this);var a=HT[e.type];a&&a.call(this,e,t,n),this.style($T,n)},ns.style=function(e,t){if(null!=t){var a,i,n,o,r;for(a=0,i=zT.length;a<i;++a)n=zT[a],r=t[n],r===WT[n]||(o=BT[n],null==r?"fill"===o?e.style.setProperty(o,"none"):e.style.removeProperty(o):(r.id&&(this._defs.gradient[r.id]=r,r="url("+jo()+"#"+r.id+")"),e.style.setProperty(o,r+"")),WT[n]=r)}};var qT=bh(Uo,So),YT=So.prototype;qT.resize=function(e,n,a){YT.resize.call(this,e,n,a);var i=this._origin,o=this._text,t={class:"marks",width:this._width,height:this._height,viewBox:"0 0 "+this._width+" "+this._height};for(var r in FT)t[r]=FT[r];return o.head=Oo("svg",t),o.root=Oo("g",{transform:"translate("+i+")"}),o.foot=Do("g")+Do("svg"),this},qT.svg=function(){var e=this._text;return e.head+e.defs+e.root+e.body+e.foot},qT._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},qT.buildDefs=function(){var e=this._defs,t="",n,a,i,o;for(a in e.gradient){for(i=e.gradient[a],o=i.stops,t+=Oo("linearGradient",{id:a,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2}),n=0;n<o.length;++n)t+=Oo("stop",{offset:o[n].offset,"stop-color":o[n].color})+Do("stop");t+=Do("linearGradient")}for(a in e.clipping)i=e.clipping[a],t+=Oo("clipPath",{id:a}),t+=Oo("rect",{x:0,y:0,width:i.width,height:i.height})+Do("rect"),t+=Do("clipPath");return 0<t.length?Oo("defs")+t+Do("defs"):""};var VT;qT.attributes=function(e,t){return VT={},e($o,t,this),VT},qT.href=function(e){var t=this,n=e.href,a;if(n){if(a=t._hrefs&&t._hrefs[n])return a;t.sanitizeURL(n).then(function(e){e["xlink:href"]=e.href,e.href=null,(t._hrefs||(t._hrefs={}))[n]=e})}return null},qT.mark=function(e){function t(t){var l=n.href(t);l&&(r+=Oo("a",l)),s="g"===i?null:Wo(t,e,i,o),r+=Oo(i,n.attributes(a.attr,t),s),"text"===i?r+=Ho(co(t)):"g"===i&&(r+=Oo("path",n.attributes(a.background,t),Wo(t,e,"bgrect",o))+Do("path"),r+=Oo("g",n.attributes(a.foreground,t))+n.markGroup(t)+Do("g")),r+=Do(i),l&&(r+=Do("a"))}var n=this,a=xT[e.marktype],i=a.tag,o=this._defs,r="",s;return"g"!==i&&!1===e.interactive&&(s="style=\"pointer-events: none;\""),r+=Oo("g",{class:Ra(e),"clip-path":e.clip?iT(n,e,e.group):null},s),a.nested?e.items&&e.items.length&&t(e.items[0]):Wi(e,t),r+Do("g")},qT.markGroup=function(e){var t=this,n="";return Wi(e,function(e){n+=t.mark(e)}),n};var ZT="canvas",XT="png",KT="svg",JT="none",QT={Canvas:ZT,PNG:XT,SVG:KT,None:JT},ek={};ek[ZT]=ek[XT]={renderer:No,headless:No,handler:To},ek[KT]={renderer:Po,headless:Uo,handler:Co},ek[JT]={};var tk=1e-9,nk=bh(Zo,sn),ak=new La;nk.transform=function(e,t){var n=t.dataflow,a=e.mark,i=a.marktype,o=xT[i],r=o.bound,s=a.clip,l=a.bounds,d;return o.nested?(a.items.length&&n.dirty(a.items[0]),l=Xo(a,r),a.items.forEach(function(e){e.bounds.clear().union(l)})):"group"===i||e.modified()?(t.visit(t.MOD,function(e){n.dirty(e)}),l.clear(),a.items.forEach(function(e){l.union(Xo(e,r))})):(d=t.changed(t.REM),t.visit(t.ADD,function(e){l.union(Xo(e,r))}),t.visit(t.MOD,function(e){d=d||l.alignsWith(e.bounds),n.dirty(e),l.union(Xo(e,r))}),d&&!s&&(l.clear(),a.items.forEach(function(e){l.union(e.bounds)}))),s&&l.intersect(ak.set(0,0,a.group.width,a.group.height)),t.modifies("bounds")};var ik=":vega_identifier:";Ko.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};var ok=bh(Ko,sn);ok.transform=function(e,t){var n=Jo(t.dataflow),a=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++a)}),n.set(this.value=a),t};var rk=bh(Qo,sn);rk.transform=function(e,t){var n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,er(e),e.index),n.group.context=e.context,!e.context.group&&(e.context.group=n.group),n.source=this,this.value=n);var a="group"===n.marktype?Ca:Aa;return t.visit(t.ADD,function(e){a.call(e,n)}),n.items=t.source,t};var sk="top",lk="left",dk="right",pk="bottom",ck=bh(tr,sn),uk={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&nr(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};ck.transform=function(e,t){var n=uk[e.method]||uk.parity,a=t.materialize(t.SOURCE).source;if(a){e.sort&&(a=a.slice().sort(e.sort)),"greedy"===e.method&&(a=a.filter(ir)),a.forEach(function(e){e.opacity=1});var i=a;if(3<=i.length&&ar(i)){t=t.reflow(e.modified()).modifies("opacity");do i=n(i);while(3<=i.length&&ar(i));3>i.length&&!sh(a).opacity&&(1<i.length&&(sh(i).opacity=0),sh(a).opacity=1)}if(e.boundScale){var o=or(e.boundScale,e.boundOrient,e.boundTolerance);a.forEach(function(e){o(e)||(e.opacity=0)})}return t}};var mk=bh(rr,sn);mk.transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var a=t.source&&t.source[0];a&&(a.mark.zdirty=!0)}};var fk="axis",gk="legend",_k="row-header",yk="row-footer",hk="row-title",bk="column-header",xk="column-footer",vk="column-title",Sk="fit",Tk="pad",kk="none",Ek="padding",Nk="axis",Lk="title",Ak="frame",Ck="legend",wk="scope",Ok="row-header",Dk="row-footer",Pk="column-header",Rk="column-footer",Ik=0.5,Mk=new La,Fk=bh(hr,sn);Fk.transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&gr(n,t,e.layout),br(n,t,e)}),t};var Bk=Object.freeze({bound:Zo,identifier:Ko,mark:Qo,overlap:tr,render:rr,viewlayout:hr}),zk="log",jk="pow",Uk="sqrt",$k="band",Wk="point",Hk="linear",qk="ordinal",Yk="quantile",Vk="quantize",Gk="threshold",Zk="bin-ordinal",Xk="sequential",Kk=function(e){return function(n){var a=n[0],i=n[1],o;return i<a&&(o=a,a=i,i=o),[e.invert(a),e.invert(i)]}},Jk=function(e){return function(a){var o=e.range(),r=a[0],s=a[1],l=-1,d,p,t,i;for(s<r&&(p=r,r=s,s=p),t=0,i=o.length;t<i;++t)o[t]>=r&&o[t]<=s&&(0>l&&(l=t),d=t);if(!(0>l))return r=e.invertExtent(o[l]),s=e.invertExtent(o[d]),[void 0===r[0]?r[1]:r[0],void 0===s[1]?s[0]:s[1]]}},Qk=function(e,t,n){var a=e-t+2*n;return e?0<a?a:1:0},eE=Array.prototype,tE=eE.map,nE=eE.slice,aE={name:"implicit"},iE=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e},oE=0.7,rE=1/oE,sE=/^#([0-9a-f]{3})$/,lE=/^#([0-9a-f]{6})$/,dE=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,pE=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,cE=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,uE=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,mE=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,fE=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,gE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iE(Cr,wr,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),iE(Ir,Rr,Ar(Cr,{brighter:function(e){return e=null==e?rE:g(rE,e),new Ir(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?oE:g(oE,e),new Ir(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var e=this.opacity;return e=isNaN(e)?1:N(0,S(1,e)),(1===e?"rgb(":"rgba(")+N(0,S(255,l(this.r)||0))+", "+N(0,S(255,l(this.g)||0))+", "+N(0,S(255,l(this.b)||0))+(1===e?")":", "+e+")")}})),iE(zr,Br,Ar(Cr,{brighter:function(e){return e=null==e?rE:g(rE,e),new zr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?oE:g(oE,e),new zr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(0>this.h),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(0.5>n?n:1-n)*t,i=2*n-a;return new Ir(jr(240<=e?e-240:e+120,i,a),jr(e,i,a),jr(120>e?e+240:e-120,i,a),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var _E=o/180,yE=180/o,hE=18,Kn=0.95047,Xn=1,Yn=1.08883,Zn=4/29,bE=6/29,xE=3*bE*bE,vE=bE*bE*bE;iE(Wr,$r,Ar(Cr,{brighter:function(e){return new Wr(this.l+hE*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Wr(this.l-hE*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=Xn*qr(e),t=Kn*qr(t),n=Yn*qr(n),new Ir(Yr(3.2404542*t-1.5371385*e-0.4985314*n),Yr(-0.969266*t+1.8760108*e+0.041556*n),Yr(0.0556434*t-0.2040259*e+1.0572252*n),this.opacity)}})),iE(Xr,Zr,Ar(Cr,{brighter:function(e){return new Xr(this.h,this.c,this.l+hE*(null==e?1:e),this.opacity)},darker:function(e){return new Xr(this.h,this.c,this.l-hE*(null==e?1:e),this.opacity)},rgb:function(){return Ur(this).rgb()}}));var SE=-0.14861,A=+1.78277,B=-0.29227,C=-0.90649,D=+1.97294,TE=D*C,kE=D*A,EE=A*B-C*SE;iE(Qr,Jr,Ar(Cr,{brighter:function(e){return e=null==e?rE:g(rE,e),new Qr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?oE:g(oE,e),new Qr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*_E,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),a=c(e),i=s(e);return new Ir(255*(t+n*(SE*a+A*i)),255*(t+n*(B*a+C*i)),255*(t+n*(D*a)),this.opacity)}}));var NE=function(e){var a=e.length-1;return function(n){var t=0>=n?n=0:1<=n?(n=1,a-1):E(n*a),i=e[t],o=e[t+1],r=0<t?e[t-1]:2*i-o,s=t<a-1?e[t+2]:2*o-i;return es((n-t/a)*a,r,i,o,s)}},LE=function(e){var a=e.length;return function(n){var t=E((0>(n%=1)?++n:n)*a),i=e[(t+a-1)%a],o=e[t%a],r=e[(t+1)%a],s=e[(t+2)%a];return es((n-t/a)*a,i,o,r,s)}},AE=function(e){return function(){return e}},CE=function e(t){function n(e,t){var n=a((e=Rr(e)).r,(t=Rr(t)).r),i=a(e.g,t.g),o=a(e.b,t.b),r=rs(e.opacity,t.opacity);return function(a){return e.r=n(a),e.g=i(a),e.b=o(a),e.opacity=r(a),e+""}}var a=os(t);return n.gamma=e,n}(1),wE=ss(NE),OE=ss(LE),DE=function(e,t){var n=t?t.length:0,a=e?S(n,e.length):0,o=Array(n),r=Array(n),s;for(s=0;s<a;++s)o[s]=zE(e[s],t[s]);for(;s<n;++s)r[s]=t[s];return function(e){for(s=0;s<a;++s)r[s]=o[s](e);return r}},PE=function(e,n){var i=new Date;return e=+e,n-=e,function(a){return i.setTime(e+n*a),i}},RE=function(e,n){return e=+e,n-=e,function(a){return e+n*a}},IE=function(e,t){var n={},i={},o;for(o in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)o in e?n[o]=zE(e[o],t[o]):i[o]=t[o];return function(e){for(o in n)i[o]=n[o](e);return i}},ME=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,FE=new RegExp(ME.source,"g"),BE=function(e,n){var t=ME.lastIndex=FE.lastIndex=0,a=-1,r=[],s=[],o,l,d;for(e+="",n+="";(o=ME.exec(e))&&(l=FE.exec(n));)(d=l.index)>t&&(d=n.slice(t,d),r[a]?r[a]+=d:r[++a]=d),(o=o[0])===(l=l[0])?r[a]?r[a]+=l:r[++a]=l:(r[++a]=null,s.push({i:a,x:RE(o,l)})),t=FE.lastIndex;return t<n.length&&(d=n.slice(t),r[a]?r[a]+=d:r[++a]=d),2>r.length?s[0]?ds(s[0].x):ls(n):(n=s.length,function(e){for(var t=0,a;t<n;++t)r[(a=s[t]).i]=a.x(e);return r.join("")})},zE=function(e,n){var a=typeof n,t;return null==n||"boolean"==a?AE(n):("number"==a?RE:"string"==a?(t=wr(n))?(n=t,CE):BE:n instanceof wr?CE:n instanceof Date?PE:Array.isArray(n)?DE:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?IE:RE)(e,n)},jE=function(e,n){return e=+e,n-=e,function(a){return l(e+n*a)}},UE=180/o,$E={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},WE=function(t,i,o,r,s,l){var d,p,c;return(d=u(t*t+i*i))&&(t/=d,i/=d),(c=t*o+i*r)&&(o-=t*c,r-=i*c),(p=u(o*o+r*r))&&(o/=p,r/=p,c/=p),t*r<i*o&&(t=-t,i=-i,c=-c,d=-d),{translateX:s,translateY:l,rotate:By(i,t)*UE,skewX:n(c)*UE,scaleX:d,scaleY:p}},HE=ps(function(e){return"none"===e?$E:(re||(re=document.createElement("DIV"),uN=document.documentElement,mN=document.defaultView),re.style.transform=e,e=mN.getComputedStyle(uN.appendChild(re),null).getPropertyValue("transform"),uN.removeChild(re),e=e.slice(7,-1).split(","),WE(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),qE=ps(function(e){return null==e?$E:(fN||(fN=document.createElementNS("http://www.w3.org/2000/svg","g")),fN.setAttribute("transform",e),!(e=fN.transform.baseVal.consolidate()))?$E:(e=e.matrix,WE(e.a,e.b,e.c,e.d,e.e,e.f))},", ",")",")"),YE=jy,VE=2,GE=4,ZE=fs(is),XE=fs(rs),KE=gs(is),JE=gs(rs),QE=_s(is),eN=_s(rs),tN=Object.freeze({interpolate:zE,interpolateArray:DE,interpolateBasis:NE,interpolateBasisClosed:LE,interpolateDate:PE,interpolateNumber:RE,interpolateObject:IE,interpolateRound:jE,interpolateString:BE,interpolateTransformCss:HE,interpolateTransformSvg:qE,interpolateZoom:function(e,t){var n=e[0],o=e[1],r=e[2],s=t[0],l=t[1],d=t[2],p=s-n,c=l-o,m=p*p+c*c,g,i;if(m<1e-12)i=f(d/r)/YE,g=function(e){return[n+e*p,o+e*c,r*a(YE*e*i)]};else{var _=u(m),y=(d*d-r*r+GE*m)/(2*r*VE*_),h=(d*d-r*r-GE*m)/(2*d*VE*_),b=f(u(y*y+1)-y),x=f(u(h*h+1)-h);i=(x-b)/YE,g=function(e){var t=e*i,a=cs(b),s=r/(VE*_)*(a*ms(YE*t+b)-us(b));return[n+s*p,o+s*c,r*a/cs(YE*t+b)]}}return g.duration=1e3*i,g},interpolateRgb:CE,interpolateRgbBasis:wE,interpolateRgbBasisClosed:OE,interpolateHsl:ZE,interpolateHslLong:XE,interpolateLab:function(e,t){var n=rs((e=$r(e)).l,(t=$r(t)).l),i=rs(e.a,t.a),a=rs(e.b,t.b),o=rs(e.opacity,t.opacity);return function(r){return e.l=n(r),e.a=i(r),e.b=a(r),e.opacity=o(r),e+""}},interpolateHcl:KE,interpolateHclLong:JE,interpolateCubehelix:QE,interpolateCubehelixLong:eN,quantize:function(e,t){for(var n=Array(t),a=0;a<t;++a)n[a]=e(a/(t-1));return n}}),nN=function(e){return function(){return e}},aN=function(e){return+e},iN=[0,1],oN=function(e,t){if(0>(a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e")))return null;var n=e.slice(0,a),a;return[1<n.length?n[0]+n.slice(2):n,+e.slice(a+1)]},rN=function(e){return e=oN(T(e)),e?e[1]:NaN},sN=function(e,n){return function(a,o){for(var r=a.length,i=[],t=0,s=e[0],l=0;0<r&&0<s&&(l+s+1>o&&(s=N(1,o-l)),i.push(a.substring(r-=s,r+s)),!((l+=s+1)>o));)s=e[t=(t+1)%e.length];return i.reverse().join(n)}},lN=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},dN=function(e,t){var n=oN(e,t);if(!n)return e+"";var a=n[0],i=n[1];return 0>i?"0."+Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+Array(i-a.length+2).join("0")},pN={"":function(e,t){e=e.toPrecision(t);out:for(var a=e.length,n=1,i=-1,o;n<a;++n)switch(e[n]){case".":i=o=n;break;case"0":0===i&&(i=n),o=n;break;case"e":break out;default:0<i&&(i=0);}return 0<i?e.slice(0,i)+e.slice(o+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return l(e).toString(2)},c:function(e){return e+""},d:function(e){return l(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return l(e).toString(8)},p:function(e,t){return dN(100*e,t)},r:dN,s:function(e,t){var a=oN(e,t);if(!a)return e+"";var o=a[0],r=a[1],s=r-(gN=3*N(-8,S(8,E(r/3))))+1,i=o.length;return s===i?o:s>i?o+Array(s-i+1).join("0"):0<s?o.slice(0,s)+"."+o.slice(s):"0."+Array(1-s).join("0")+oN(e,N(0,t+s-1))[0]},X:function(e){return l(e).toString(16).toUpperCase()},x:function(e){return l(e).toString(16)}},cN=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,re,uN,mN,fN,gN;ks.prototype=Es.prototype,Es.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":N(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+N(0,0|this.precision))+this.type};var _N=function(e){return e},yN=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],hN=function(e){function t(e){function t(e){var t=y,p=h,v,i,n;if("c"===_)p=b(e)+p,e="";else{e=+e;var c=0>e;if(e=b(T(e),g),c&&0==+e&&(c=!1),t=(c?"("===d?d:"-":"-"===d||"("===d?"":d)+t,p=p+("s"===_?yN[8+gN/3]:"")+(c&&"("===d?")":""),x)for(v=-1,i=e.length;++v<i;)if(n=e.charCodeAt(v),48>n||57<n){p=(46===n?o+e.slice(v+1):e.slice(v))+p,e=e.slice(0,v);break}}f&&!u&&(e=a(e,Infinity));var S=t.length+e.length+p.length,k=S<m?Array(m-S+1).join(s):"";switch(f&&u&&(e=a(k+e,k.length?m-p.length:Infinity),k=""),l){case"<":e=t+e+p+k;break;case"=":e=t+k+e+p;break;case"^":e=k.slice(0,S=k.length>>1)+t+e+p+k.slice(S);break;default:e=k+t+e+p;}return r(e)}e=ks(e);var s=e.fill,l=e.align,d=e.sign,p=e.symbol,u=e.zero,m=e.width,f=e.comma,g=e.precision,_=e.type,y="$"===p?n[0]:"#"===p&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",h="$"===p?n[1]:/[%p]/.test(_)?i:"",b=pN[_],x=!_||/[defgprs%]/.test(_);return g=null==g?_?6:12:/[gprs]/.test(_)?N(1,S(21,g)):N(0,S(20,g)),t.toString=function(){return e+""},t}var a=e.grouping&&e.thousands?sN(e.grouping,e.thousands):_N,n=e.currency,o=e.decimal,r=e.numerals?lN(e.numerals):_N,i=e.percent||"%";return{format:t,formatPrefix:function(n,a){var i=t((n=ks(n),n.type="f",n)),o=3*N(-8,S(8,E(rN(a)/3))),r=g(10,-o),s=yN[8+o/3];return function(e){return i(r*e)+s}}}},bN,xN,vN;Ns({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var SN=function(e){return N(0,-rN(T(e)))},TN=function(e,t){return N(0,3*N(-8,S(8,E(rN(t)/3)))-rN(T(e)))},kN=function(e,t){return e=T(e),t=T(t)-e,N(0,rN(t)-rN(e))+1},EN=function(e,t,n){var a=e[0],i=e[e.length-1],o=vn(a,i,null==t?10:t),r;switch(n=ks(null==n?",f":n),n.type){case"s":{var s=N(T(a),T(i));return null!=n.precision||isNaN(r=TN(o,s))||(n.precision=r),vN(n,s)}case"":case"e":case"g":case"p":case"r":{null!=n.precision||isNaN(r=kN(o,N(T(a),T(i))))||(n.precision=r-("e"===n.type));break}case"f":case"%":{null!=n.precision||isNaN(r=SN(o))||(n.precision=r-2*("%"===n.type));break}}return xN(n)},NN=function(e,n){e=e.slice();var a=0,i=e.length-1,o=e[a],r=e[i],s;return r<o&&(s=a,a=i,i=s,s=o,o=r,r=s),e[a]=n.floor(o),e[i]=n.ceil(r),e},LN=1e3,AN=60*LN,CN=60*AN,wN=24*CN,ON=7*wN,DN=30*wN,PN=365*wN,RN=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})},IN=RN("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),MN=RN("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),FN=RN("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),BN=RN("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");eN(Jr(300,0.5,0),Jr(-240,0.5,1));var zN=eN(Jr(-100,0.75,0.35),Jr(80,1.5,0.8)),jN=eN(Jr(260,0.75,0.35),Jr(80,1.5,0.8)),UN=Jr(),$N=qs(RN("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),WN=qs(RN("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),HN=qs(RN("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),qN=qs(RN("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),YN=Array.prototype.map,VN=Array.prototype.slice,GN={identity:Cs,linear:As,log:Ms,ordinal:Lr,pow:Bs,sqrt:function(){return Bs().exponent(0.5)},quantile:zs,quantize:js,threshold:Us,time:function(){return Hs(Mb,Ib,Ab,Lb,Nb,Eb,kb,hb,ex).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return Hs(Gb,Vb,jb,zb,Bb,Fb,kb,hb,ax).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:Ys,point:function(){return Vs(Ys().paddingInner(1))},sequential:Ks,"bin-linear":Zs,"bin-ordinal":Xs};for(var ZN in GN)Qs(ZN,GN[ZN]);var XN=el("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),KN=el("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),JN=[,,,].concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(el),QN=function(e){for(var t=0|e.length/6,n=Array(t),a=0;a<t;)n[a]="#"+e.slice(6*a,6*++a);return n},eL=QN("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),tL=QN("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),nL=QN("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),aL=QN("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),iL=QN("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),oL=QN("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),rL=QN("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),sL=QN("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),lL=function(e){return wE(e[e.length-1])},dL=[,,,].concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(QN),pL=lL(dL),cL=[,,,].concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(QN),uL=lL(cL),mL=[,,,].concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(QN),fL=lL(mL),gL=[,,,].concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(QN),_L=lL(gL),yL=[,,,].concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(QN),hL=lL(yL),bL=[,,,].concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(QN),xL=lL(bL),vL=[,,,].concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(QN),SL=lL(vL),TL=[,,,].concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(QN),kL=lL(TL),EL=[,,,].concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(QN),NL=lL(EL),LL=[,,,].concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(QN),AL=lL(LL),CL=[,,,].concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(QN),wL=lL(CL),OL=[,,,].concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(QN),DL=lL(OL),PL=[,,,].concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(QN),RL=lL(PL),IL=[,,,].concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(QN),ML=lL(IL),FL=[,,,].concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(QN),BL=lL(FL),zL=[,,,].concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(QN),jL=lL(zL),UL=[,,,].concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(QN),$L=lL(UL),WL=[,,,].concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(QN),HL=lL(WL),qL=[,,,].concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(QN),YL=lL(qL),VL=[,,,].concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(QN),GL=lL(VL),ZL=[,,,].concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(QN),XL=lL(ZL),KL=[,,,].concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(QN),JL=lL(KL),QL=[,,,].concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(QN),eA=lL(QL),tA=[,,,].concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(QN),nA=lL(tA),aA=[,,,].concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(QN),iA=lL(aA),oA=[,,,].concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(QN),rA=lL(oA),sA=[,,,].concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(QN),lA=lL(sA),dA=Object.freeze({schemeAccent:eL,schemeDark2:tL,schemePaired:nL,schemePastel1:aL,schemePastel2:iL,schemeSet1:oL,schemeSet2:rL,schemeSet3:sL,interpolateBrBG:pL,schemeBrBG:dL,interpolatePRGn:uL,schemePRGn:cL,interpolatePiYG:fL,schemePiYG:mL,interpolatePuOr:_L,schemePuOr:gL,interpolateRdBu:hL,schemeRdBu:yL,interpolateRdGy:xL,schemeRdGy:bL,interpolateRdYlBu:SL,schemeRdYlBu:vL,interpolateRdYlGn:kL,schemeRdYlGn:TL,interpolateSpectral:NL,schemeSpectral:EL,interpolateBuGn:AL,schemeBuGn:LL,interpolateBuPu:wL,schemeBuPu:CL,interpolateGnBu:DL,schemeGnBu:OL,interpolateOrRd:RL,schemeOrRd:PL,interpolatePuBuGn:ML,schemePuBuGn:IL,interpolatePuBu:BL,schemePuBu:FL,interpolatePuRd:jL,schemePuRd:zL,interpolateRdPu:$L,schemeRdPu:UL,interpolateYlGnBu:HL,schemeYlGnBu:WL,interpolateYlGn:YL,schemeYlGn:qL,interpolateYlOrBr:GL,schemeYlOrBr:VL,interpolateYlOrRd:XL,schemeYlOrRd:ZL,interpolateBlues:JL,schemeBlues:KL,interpolateGreens:eA,schemeGreens:QL,interpolateGreys:nA,schemeGreys:tA,interpolatePurples:iA,schemePurples:aA,interpolateReds:rA,schemeReds:oA,interpolateOranges:lA,schemeOranges:sA}),pA={blueorange:JN},cA={category10:IN,category20:BN,category20b:MN,category20c:FN,accent:eL,dark2:tL,paired:nL,pastel1:aL,pastel2:iL,set1:oL,set2:rL,set3:sL,tableau10:XN,tableau20:KN,viridis:$N,magma:WN,inferno:HN,plasma:qN,blueorange:wE(sh(JN))};tl("blues","Blues"),tl("greens","Greens"),tl("greys","Greys"),tl("purples","Purples"),tl("reds","Reds"),tl("oranges","Oranges"),tl("brownbluegreen","BrBG"),tl("purplegreen","PRGn"),tl("pinkyellowgreen","PiYG"),tl("purpleorange","PuOr"),tl("redblue","RdBu"),tl("redgrey","RdGy"),tl("redyellowblue","RdYlBu"),tl("redyellowgreen","RdYlGn"),tl("spectral","Spectral"),tl("bluegreen","BuGn"),tl("bluepurple","BuPu"),tl("greenblue","GnBu"),tl("orangered","OrRd"),tl("purplebluegreen","PuBuGn"),tl("purpleblue","PuBu"),tl("purplered","PuRd"),tl("redpurple","RdPu"),tl("yellowgreenblue","YlGnBu"),tl("yellowgreen","YlGn"),tl("yelloworangebrown","YlOrBr"),tl("yelloworangered","YlOrRd");var uA=function(e,t){if(1<arguments.length)return cA[e]=t,this;var n=e.split("-");return e=n[0],n=+n[1]+1,n&&pA.hasOwnProperty(e)?pA[e][n-1]:!n&&cA.hasOwnProperty(e)?cA[e]:void 0},mA={millisecond:hb,second:kb,minute:Eb,hour:Nb,day:Lb,week:Ab,month:Ib,year:Mb},fA={millisecond:hb,second:kb,minute:Fb,hour:Bb,day:zb,week:jb,month:Vb,year:Gb},gA=bh(yl,sn);gA.transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=this.value,i=e.scale,o=e.tickCount?e.tickCount:e.values?e.values.length:dl(i,e.count),r=e.format||ul(i,o,e.formatSpecifier),s=e.values?pl(i,e.values,o):cl(i,o);return a&&(n.rem=a),a=s.map(function(e,t){return Z({index:t/(s.length-1),value:e,label:r(e)})}),e.extra&&a.push(Z({index:-1,extra:{value:a[0].value},label:""})),n.source=a,n.add=a,this.value=a,n};var _A=bh(hl,sn);_A.transform=function(e,t){var n=t.dataflow,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||bl,o=e.key||V,r=this.value;return qy(a.encode)&&(a.encode=null),r||(t=t.addAll(),this.value=r=hh().test(xl),r.lookup=function(e){return r.get(o(e))}),(e.modified("key")||t.modified(o))&&Wy("DataJoin does not support modified key function or fields."),t.visit(t.ADD,function(e){var t=o(e),n=r.get(t);n?n.exit?(r.empty--,a.add.push(n)):a.mod.push(n):(r.set(t,n=i(e)),a.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=o(e),n=r.get(t);n&&(n.datum=e,a.mod.push(n))}),t.visit(t.REM,function(e){var t=o(e),n=r.get(t);e!==n.datum||n.exit||(a.rem.push(n),n.exit=!0,++r.empty)}),t.changed(t.ADD_MOD)&&a.modifies("datum"),e.clean&&r.empty>n.cleanThreshold&&n.runAfter(r.clean),a};var yA=bh(vl,sn);yA.transform=function(e,t){var n=t.fork(t.ADD_REM),a=e.encoders,i=t.encode;if(qy(i))if(n.changed()||i.every(function(t){return a[t]}))i=i[0];else return t.StopPropagation;var o="enter"===i,r=a.update||eh,s=a.enter||eh,l=a.exit||eh,d=(i&&!o?a[i]:r)||eh;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(n){s(n,e),r(n,e),d!==eh&&d!==r&&d(n,e)}),n.modifies(s.output),n.modifies(r.output),d!==eh&&d!==r&&n.modifies(d.output)),t.changed(t.REM)&&l!==eh&&(t.visit(t.REM,function(n){l(n,e)}),n.modifies(l.output)),o||d!==eh){var p=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(p,function(a){var t=s(a,e);(d(a,e)||t)&&n.mod.push(a)}),n.mod.length&&n.modifies(s.output)):t.visit(p,function(a){d(a,e)&&n.mod.push(a)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation};var hA={};hA[Yk]=function(e){var t=[-Infinity].concat(e.quantiles());return t.max=+Infinity,t},hA[Vk]=function(e){var t=e.domain(),a=t[0],o=sh(t),r=e.range().length,n=Array(r),s=0;for(n[0]=-Infinity;++s<r;)n[s]=(s*o-(s-r)*a)/r;return n.max=+Infinity,n},hA[Gk]=function(e){var t=[-Infinity].concat(e.domain());return t.max=+Infinity,t},hA["bin-linear"]=Tl,hA[Zk]=Tl;var bA=bh(Al,sn);bA.transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=0,i=this.value,o="gradient"===e.type,r=e.scale,s=null==e.count?5:dl(r,e.count),d=e.format||ul(r,s,e.formatSpecifier),p=e.values||Sl(r,s,o);if(d=kl(r,d),i&&(n.rem=i),o)var c=e.values?r.domain():p,u=al(r,c[0],sh(c));else{var m=e.size,f;ph(m)?(!e.values&&0===r(p[0])&&(p=p.slice(1)),f=p.reduce(function(t,n){return N(t,m(n,e))},0)):m=mh(f=m||8)}return i=p.map(function(n,i){var r=Z({index:i,label:d(n,i,p),value:n});return o?r.perc=u(n):(r.offset=f,r.size=m(n,e),r.total=l(a),a+=r.size),r}),n.source=i,n.add=i,this.value=i,n};var xA=hh({line:Rl,"line-radial":function(e,t,n,a){return Rl(t*c(e),t*s(e),a*c(n),a*s(n))},arc:Il,"arc-radial":function(e,t,n,a){return Il(t*c(e),t*s(e),a*c(n),a*s(n))},curve:Ml,"curve-radial":function(e,t,n,a){return Ml(t*c(e),t*s(e),a*c(n),a*s(n))},"orthogonal-horizontal":function(e,t,n,a){return"M"+e+","+t+"V"+a+"H"+n},"orthogonal-vertical":function(e,t,n,a){return"M"+e+","+t+"H"+n+"V"+a},"orthogonal-radial":function(e,t,n,a){var i=c(e),r=s(e),l=c(n),d=s(n),p=T(n-e)>o?n<=e:n>e;return"M"+t*i+","+t*r+"A"+t+","+t+" 0 0,"+(p?1:0)+" "+t*l+","+t*d+"L"+a*l+","+a*d},"diagonal-horizontal":function(e,t,n,a){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+a+" "+n+","+a},"diagonal-vertical":function(e,t,n,a){var i=(t+a)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+a},"diagonal-radial":function(e,t,n,a){var i=c(e),o=s(e),r=c(n),l=s(n),d=(t+a)/2;return"M"+t*i+","+t*o+"C"+d*i+","+d*o+" "+d*r+","+d*l+" "+a*r+","+a*l}});Pl.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]};var vA=bh(Pl,sn);vA.transform=function(e,t){var n=e.sourceX||Cl,a=e.sourceY||wl,i=e.targetX||Ol,o=e.targetY||Dl,r=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",d=xA.get(l+"-"+s)||xA.get(l);return d||Wy("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[r]=d(n(e),a(e),i(e),o(e))}),t.reflow(e.modified()).modifies(r)},Fl.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};var SA=bh(Fl,sn);SA.transform=function(e,r){var s=e.as||["startAngle","endAngle"],l=s[0],d=s[1],p=e.field||Jy,c=e.startAngle||0,u=null==e.endAngle?2*o:e.endAngle,m=r.source,f=m.map(p),g=f.length,n=c,a=(u-c)/Zx(f),_=zx(g),y,i,t;for(e.sort&&_.sort(function(e,t){return f[e]-f[t]}),y=0;y<g;++y)t=f[_[y]],i=m[_[y]],i[l]=n,i[d]=n+=t*a;return this.value=f,r.reflow(e.modified()).modifies(s)};var TA=5,kA=Oh([Hk,jk,Uk]),EA=Oh([Hk,zk,jk,Uk,"time","utc"]),NA=Oh(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]),LA=bh(Bl,sn);LA.transform=function(e,t){var n=t.dataflow,a=this.value,i;for(i in(!a||e.modified("type"))&&(this.value=a=Qs((e.type||Hk).toLowerCase())()),e)if(!NA[i]){if("padding"===i&&EA[a.type])continue;ph(a[i])?a[i](e[i]):n.warn("Unsupported scale property: "+i)}return $l(a,e,zl(a,e,n)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var AA=bh(Gl,sn);AA.transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};Zl.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]};var CA=bh(Zl,sn);CA.transform=function(e,t){var a=e.as||["y0","y1"],o=a[0],r=a[1],s=e.field||Jy,l=e.offset==="center"?Xl:e.offset==="normalize"?Kl:Jl,d,p,i,n;for(d=Ql(t.source,e.groupby,e.sort,s),p=0,i=d.length,n=d.max;p<i;++p)l(d[p],n,s,o,r);return t.reflow(e.modified()).modifies(a)};var wA=Object.freeze({axisticks:yl,datajoin:hl,encode:vl,legendentries:Al,linkpath:Pl,pie:Fl,scale:Bl,sortitems:Gl,stack:Zl,validTicks:pl}),OA=Array.prototype,DA=OA.slice,PA=function(e,t){return e-t},RA=function(e){for(var t=0,a=e.length,n=e[a-1][1]*e[0][0]-e[a-1][0]*e[0][1];++t<a;)n+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return n},IA=function(e){return function(){return e}},MA=function(e,t){for(var a=-1,i=t.length,n;++a<i;)if(n=ed(e,t[a]))return n;return 0},FA=function(){},BA=[[],[[[1,1.5],[0.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[0.5,1]]],[[[1,0.5],[1.5,1]]],[[[1,0.5],[0.5,1]],[[1,1.5],[1.5,1]]],[[[1,0.5],[1,1.5]]],[[[1,0.5],[0.5,1]]],[[[0.5,1],[1,0.5]]],[[[1,1.5],[1,0.5]]],[[[0.5,1],[1,1.5]],[[1.5,1],[1,0.5]]],[[[1.5,1],[1,0.5]]],[[[0.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[0.5,1],[1,1.5]]],[]],zA=function(){function e(e){var n=r(e);if(!Array.isArray(n)){var a=Bx(e),i=a[0],o=a[1];n=vn(i,o,n),n=zx(E(i/n)*n,E(o/n)*n,n)}else n=n.slice().sort(PA);var l=n.map(function(n){var a=[],i=[];return t(e,n,function(t){s(t,e,n),0<RA(t)?a.push([t]):i.push(t)}),i.forEach(function(e){for(var t=0,i=a.length,n;t<i;++t)if(-1!==MA((n=a[t])[0],e))return void n.push(e)}),a});return l.map(function(e,t){return{type:"MultiPolygon",value:n[t],coordinates:e}})}function t(e,t,a){function r(e){var t=[e[0][0]+d,e[0][1]+p],i=[e[1][0]+d,e[1][1]+p],o=n(t),r=n(i),c,u;(c=l[o])?(u=s[r])?(delete l[c.end],delete s[u.start],c==u?(c.ring.push(i),a(c.ring)):s[c.start]=l[u.end]={start:c.start,end:u.end,ring:c.ring.concat(u.ring)}):(delete l[c.end],c.ring.push(i),l[c.end=r]=c):(c=s[r])?(u=l[o])?(delete s[c.start],delete l[u.end],c===u?(c.ring.push(i),a(c.ring)):s[u.start]=l[c.end]={start:u.start,end:c.end,ring:u.ring.concat(c.ring)}):(delete s[c.start],c.ring.unshift(t),s[c.start=o]=c):s[o]=l[r]={start:o,end:r,ring:[t,i]}}var s=[],l=[],d,p,c,u,m,f;for(d=p=-1,u=e[0]>=t,BA[u<<1].forEach(r);++d<i-1;)c=u,u=e[d+1]>=t,BA[c|u<<1].forEach(r);for(BA[u<<0].forEach(r);++p<o-1;){for(d=-1,u=e[p*i+i]>=t,m=e[p*i]>=t,BA[u<<1|m<<2].forEach(r);++d<i-1;)c=u,u=e[p*i+i+d+1]>=t,f=m,m=e[p*i+d+1]>=t,BA[c|u<<1|m<<2|f<<3].forEach(r);BA[u|m<<3].forEach(r)}for(d=-1,m=e[p*i]>=t,BA[m<<2].forEach(r);++d<i-1;)f=m,m=e[p*i+d+1]>=t,BA[m<<2|f<<3].forEach(r);BA[m<<3].forEach(r)}function n(e){return 2*e[0]+4*(e[1]*(i+1))}function a(e,t,n){e.forEach(function(e){var a=e[0],r=e[1],s=0|a,l=0|r,d=t[l*i+s],p;0<a&&a<i&&s===a&&(p=t[l*i+s-1],e[0]=a+(n-p)/(d-p)-0.5),0<r&&r<o&&l===r&&(p=t[(l-1)*i+s],e[1]=r+(n-p)/(d-p)-0.5)})}var i=1,o=1,r=Hx,s=a;return e.size=function(t){if(!arguments.length)return[i,o];var n=p(t[0]),a=p(t[1]);if(!(0<n)||!(0<a))throw new Error("invalid size");return i=n,o=a,e},e.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:Array.isArray(t)?IA(DA.call(t)):IA(t),e):r},e.smooth=function(t){return arguments.length?(s=t?a:FA,e):s===a},e},jA=function(){function e(e){var a=new Float32Array(o*S),i=new Float32Array(o*S);e.forEach(function(e,t,n){var i=c(e,t,n)+_>>v,r=h(e,t,n)+_>>v;0<=i&&i<o&&0<=r&&r<S&&++a[i+r*o]}),od({width:o,height:S,data:a},{width:o,height:S,data:i},x>>v),rd({width:o,height:S,data:i},{width:o,height:S,data:a},x>>v),od({width:o,height:S,data:a},{width:o,height:S,data:i},x>>v),rd({width:o,height:S,data:i},{width:o,height:S,data:a},x>>v),od({width:o,height:S,data:a},{width:o,height:S,data:i},x>>v),rd({width:o,height:S,data:i},{width:o,height:S,data:a},x>>v);var r=T(a);if(!Array.isArray(r)){var s=Yx(a);r=vn(0,s,r),r=zx(0,E(s/r)*r,r),r.shift()}return zA().thresholds(r).size([o,S])(a).map(t)}function t(e){return e.value*=g(2,-2*v),e.coordinates.forEach(a),e}function a(e){e.forEach(i)}function i(e){e.forEach(s)}function s(e){e[0]=e[0]*g(2,v)-_,e[1]=e[1]*g(2,v)-_}function d(){return _=3*x,o=y+2*_>>v,S=b+2*_>>v,e}var c=sd,h=ld,y=960,b=500,x=20,v=2,_=3*x,o=y+2*_>>v,S=b+2*_>>v,T=IA(20);return e.x=function(t){return arguments.length?(c="function"==typeof t?t:IA(+t),e):c},e.y=function(t){return arguments.length?(h="function"==typeof t?t:IA(+t),e):h},e.size=function(e){if(!arguments.length)return[y,b];var t=p(e[0]),n=p(e[1]);if(!(0<=t)&&!(0<=t))throw new Error("invalid size");return y=t,b=n,d()},e.cellSize=function(e){if(!arguments.length)return 1<<v;if(!(1<=(e=+e)))throw new Error("invalid cell size");return v=E(f(e)/r),d()},e.thresholds=function(t){return arguments.length?(T="function"==typeof t?t:Array.isArray(t)?IA(DA.call(t)):IA(t),e):T},e.bandwidth=function(e){if(!arguments.length)return u(x*(x+1));if(!(0<=(e=+e)))throw new Error("invalid bandwidth");return x=l((u(4*e*e+1)-1)/2),d()},e},UA=["values","size"],$A=["x","y","size","cellSize","bandwidth"];dd.Definition={type:"Contour",metadata:{generates:!0,source:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"number",default:!1},{name:"thresholds",type:"number",array:!0}]};var WA=bh(dd,sn);WA.transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=e.count||10,i,o,r;return e.values?(i=zA(),o=UA,r=e.values):(i=jA(),o=$A,r=t.materialize(t.SOURCE).source),i.thresholds(e.thresholds||(e.nice?a:pd(a))),o.forEach(function(t){null!=e[t]&&i[t](e[t])}),this.value&&(n.rem=this.value),this.value=n.source=n.add=i(r).map(Z),n};var HA="FeatureCollection";cd.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};var qA=bh(cd,sn);qA.transform=function(e,t){var n=this._features,a=this._points,i=e.fields,o=i&&i[0],r=i&&i[1],s=e.geojson,l=t.ADD,d;d=e.modified()||t.changed(t.REM)||t.modified(m(s))||o&&t.modified(m(o))||r&&t.modified(m(r)),(!this.value||d)&&(l=t.SOURCE,this._features=n=[],this._points=a=[]),s&&t.visit(l,function(e){n.push(s(e))}),o&&r&&(t.visit(l,function(e){var t=o(e),n=r(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&a.push([t,n])}),n=n.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:a}})),this.value={type:HA,features:n}};var YA=function(){return new ud};ud.prototype={constructor:ud,reset:function(){this.s=this.t=0},add:function(e){md(VA,e,this.t),md(this,VA.s,this.s),this.s?this.t+=VA.t:this.s=VA.t},valueOf:function(){return this.s}};var VA=new ud,GA=1e-6,ZA=o,XA=ZA/2,KA=ZA/4,JA=2*ZA,QA=180/ZA,eC=ZA/180,tC=T,nC=n,aC=By,iC=c,oC=p,rC=a,sC=f,lC=g,dC=s,pC=e||function(e){return 0<e?1:0>e?-1:0},cC=u,uC=t,mC={Feature:function(e,t){yd(e.geometry,t)},FeatureCollection:function(e,t){for(var a=e.features,o=-1,i=a.length;++o<i;)yd(a[o].geometry,t)}},fC={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)e=a[o],t.point(e[0],e[1],e[2])},LineString:function(e,t){hd(e.coordinates,t,0)},MultiLineString:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)hd(a[o],t,0)},Polygon:function(e,t){bd(e.coordinates,t)},MultiPolygon:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)bd(a[o],t)},GeometryCollection:function(e,t){for(var a=e.geometries,o=-1,i=a.length;++o<i;)yd(a[o],t)}},gC=function(e,t){e&&mC.hasOwnProperty(e.type)?mC[e.type](e,t):yd(e,t)},_C=YA(),yC=YA(),hC=YA(),bC=function(e,t){function n(n,a){return n=e(n,a),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,a){return n=t.invert(n,a),n&&e.invert(n[0],n[1])}),n};Ld.invert=Ld;var xC=function(e){function t(t){return t=e(t[0]*eC,t[1]*eC),t[0]*=QA,t[1]*=QA,t}return e=Ad(e[0]*eC,e[1]*eC,2<e.length?e[2]*eC:0),t.invert=function(t){return t=e.invert(t[0]*eC,t[1]*eC),t[0]*=QA,t[1]*=QA,t},t},vC=function(){var e=[],t;return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:_d,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},SC=function(e,t,n,a,i,o){var s=e[0],l=e[1],d=t[0],p=t[1],c=0,u=1,m=d-s,f=p-l,g;if(g=n-s,m||!(0<g)){if(g/=m,0>m){if(g<c)return;g<u&&(u=g)}else if(0<m){if(g>u)return;g>c&&(c=g)}if(g=i-s,m||!(0>g)){if(g/=m,0>m){if(g>u)return;g>c&&(c=g)}else if(0<m){if(g<c)return;g<u&&(u=g)}if(g=a-l,f||!(0<g)){if(g/=f,0>f){if(g<c)return;g<u&&(u=g)}else if(0<f){if(g>u)return;g>c&&(c=g)}if(g=o-l,f||!(0>g)){if(g/=f,0>f){if(g>u)return;g>c&&(c=g)}else if(0<f){if(g<c)return;g<u&&(u=g)}return 0<c&&(e[0]=s+c*m,e[1]=l+c*f),1>u&&(t[0]=s+u*m,t[1]=l+u*f),!0}}}}},TC=function(e,t){return tC(e[0]-t[0])<GA&&tC(e[1]-t[1])<GA},kC=function(e,t,a,o,r){var s=[],l=[],d,i;if(e.forEach(function(e){if(!(0>=(i=e.length-1))){var t=e[0],a=e[i],i,n;if(TC(t,a)){for(r.lineStart(),d=0;d<i;++d)r.point((t=e[d])[0],t[1]);return void r.lineEnd()}s.push(n=new Rd(t,e,null,!0)),l.push(n.o=new Rd(t,null,n,!1)),s.push(n=new Rd(a,e,null,!1)),l.push(n.o=new Rd(a,null,n,!0))}}),!!s.length){for(l.sort(t),Id(s),Id(l),(d=0,i=l.length);d<i;++d)l[d].e=a=!a;for(var n=s[0],p,c;;){for(var u=n,m=!0;u.v;)if((u=u.n)===n)return;p=u.z,r.lineStart();do{if(u.v=u.o.v=!0,u.e){if(m)for(d=0,i=p.length;d<i;++d)r.point((c=p[d])[0],c[1]);else o(u.x,u.n.x,1,r);u=u.n}else{if(m)for(p=u.p.z,d=p.length-1;0<=d;--d)r.point((c=p[d])[0],c[1]);else o(u.x,u.p.x,-1,r);u=u.p}u=u.o,p=u.z,m=!m}while(!u.v);r.lineEnd()}}},EC=1e9,NC=-EC,LC=YA(),AC=function(e,t){var a=t[0],o=t[1],r=[dC(a),-iC(a),0],s=0,l=0;LC.reset();for(var d=0,i=e.length;d<i;++d)if(y=(_=e[d]).length)for(var n=_[y-1],p=n[0],c=n[1]/2+KA,u=dC(c),f=iC(c),g=0,_,y;g<y;++g,p=h,u=x,f=v,n=m){var m=_[g],h=m[0],b=m[1]/2+KA,x=dC(b),v=iC(b),S=h-p,T=0<=S?1:-1,E=T*S,N=E>ZA,A=u*x;if(LC.add(aC(A*T*dC(E),f*v+A*iC(E))),s+=N?S+T*JA:S,N^p>=a^h>=a){var k=Td(vd(n),vd(m));Nd(k);var C=Td(r,k);Nd(C);var w=(N^0<=S?-1:1)*gd(C[2]);(o>w||o===w&&(k[0]||k[1]))&&(l+=N^0<=S?1:-1)}}return(s<-GA||s<GA&&LC<-GA)^1&l},CC=YA(),wC={sphere:_d,point:_d,lineStart:function(){wC.point=Bd,wC.lineEnd=Fd},lineEnd:_d,polygonStart:_d,polygonEnd:_d},OC=function(e){return CC.reset(),gC(e,wC),+CC},DC=[null,null],PC={type:"LineString",coordinates:DC},RC=function(e,t){return DC[0]=e,DC[1]=t,OC(PC)},IC={Sphere:function(){return!0},Point:function(e,t){return Ud(e.coordinates,t)},MultiPoint:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)if(Ud(a[o],t))return!0;return!1},LineString:function(e,t){return $d(e.coordinates,t)},MultiLineString:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)if($d(a[o],t))return!0;return!1},Polygon:function(e,t){return Wd(e.coordinates,t)},MultiPolygon:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)if(Wd(a[o],t))return!0;return!1},GeometryCollection:function(e,t){for(var a=e.geometries,o=-1,i=a.length;++o<i;)if(jd(a[o],t))return!0;return!1}},MC=function(e){return e},FC=YA(),BC=YA(),zC={point:_d,lineStart:_d,lineEnd:_d,polygonStart:function(){zC.lineStart=Zd,zC.lineEnd=Jd},polygonEnd:function(){zC.lineStart=zC.lineEnd=zC.point=_d,FC.add(tC(BC)),BC.reset()},result:function(){return FC.reset(),FC/2}},jC=Infinity,UC=jC,$C=-jC,WC=$C,HC={point:function(e,t){e<jC&&(jC=e),e>$C&&($C=e),t<UC&&(UC=t),t>WC&&(WC=t)},lineStart:_d,lineEnd:_d,polygonStart:_d,polygonEnd:_d,result:function(){var e=[[jC,UC],[$C,WC]];return $C=WC=-(UC=jC=Infinity),e}},qC=0,YC=0,VC=0,GC=0,ZC=0,XC=0,KC=0,JC=0,QC=0,ew={point:Qd,lineStart:ep,lineEnd:ap,polygonStart:function(){ew.lineStart=ip,ew.lineEnd=op},polygonEnd:function(){ew.point=Qd,ew.lineStart=ep,ew.lineEnd=ap},result:function(){var e=QC?[KC/QC,JC/QC]:XC?[GC/XC,ZC/XC]:VC?[qC/VC,YC/VC]:[NaN,NaN];return qC=YC=VC=GC=ZC=XC=KC=JC=QC=0,e}},tw,nw,aw,iw,ow,rw,sw,lw,dw,pw,uw;lp.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,JA);break}}},result:_d};var mw=YA(),fw={point:_d,lineStart:function(){fw.point=dp},lineEnd:function(){gw&&pp(_w,yw),fw.point=_d},polygonStart:function(){gw=!0},polygonEnd:function(){gw=null},result:function(){return mw.reset(),+mw}},gw,_w,yw,hw,bw;cp.prototype={_radius:4.5,_circle:up(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{null==this._circle&&(this._circle=up(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var xw=function(e,t){function n(e){return e&&("function"==typeof a&&o.pointRadius(+a.apply(this,arguments)),gC(e,i(o))),o.result()}var a=4.5,i,o;return n.area=function(e){return gC(e,i(zC)),zC.result()},n.measure=function(e){return gC(e,i(fw)),fw.result()},n.bounds=function(e){return gC(e,i(HC)),HC.result()},n.centroid=function(e){return gC(e,i(ew)),ew.result()},n.projection=function(t){return arguments.length?(i=null==t?(e=null,MC):(e=t).stream,n):e},n.context=function(e){return arguments.length?(o=null==e?(t=null,new cp):new lp(t=e),"function"!=typeof a&&o.pointRadius(a),n):t},n.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(o.pointRadius(+e),+e),n):a},n.projection(e).context(t)},vw=function(e,t,n,a){return function(i,o){function r(t,n){var a=i(t,n);e(t=a[0],n=a[1])&&o.point(t,n)}function s(e,t){var n=i(e,t);m.point(n[0],n[1])}function l(){h.point=s,m.lineStart()}function d(){h.point=r,m.lineEnd()}function p(e,t){v.push([e,t]);var n=i(e,t);_.point(n[0],n[1])}function c(){_.lineStart(),v=[]}function u(){p(v[0][0],v[0][1]),_.lineEnd();var e=_.clean(),t=g.result(),a=t.length,r,i,s,l;if(v.pop(),b.push(v),v=null,!!a){if(1&e){if(s=t[0],0<(i=s.length-1)){for(y||(o.polygonStart(),y=!0),o.lineStart(),r=0;r<i;++r)o.point((l=s[r])[0],l[1]);o.lineEnd()}return}1<a&&2&e&&t.push(t.pop().concat(t.shift())),x.push(t.filter(mp))}}var m=t(o),f=i.invert(a[0],a[1]),g=vC(),_=t(g),y=!1,h={point:r,lineStart:l,lineEnd:d,polygonStart:function(){h.point=p,h.lineStart=c,h.lineEnd=u,x=[],b=[]},polygonEnd:function(){h.point=r,h.lineStart=l,h.lineEnd=d,x=Vx(x);var e=AC(b,f);x.length?(!y&&(o.polygonStart(),y=!0),kC(x,fp,e,n,o)):e&&(!y&&(o.polygonStart(),y=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),y&&(o.polygonEnd(),y=!1),x=b=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b,x,v;return h}},Sw=vw(function(){return!0},function(e){var t=NaN,n=NaN,a=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,r){var s=0<o?ZA:-ZA,l=tC(o-t);tC(l-ZA)<GA?(e.point(t,n=0<(n+r)/2?XA:-XA),e.point(a,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):a!==s&&l>=ZA&&(tC(t-a)<GA&&(t-=a*GA),tC(o-s)<GA&&(o-=s*GA),n=gp(t,n,o,r),e.point(a,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=r),a=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}},function(e,t,n,a){var i;if(null==e)i=n*XA,a.point(-ZA,i),a.point(0,i),a.point(ZA,i),a.point(ZA,0),a.point(ZA,-i),a.point(0,-i),a.point(-ZA,-i),a.point(-ZA,0),a.point(-ZA,i);else if(tC(e[0]-t[0])>GA){var o=e[0]<t[0]?ZA:-ZA;i=n*o/2,a.point(-o,i),a.point(0,i),a.point(o,i)}else a.point(t[0],t[1])},[-ZA,-XA]),Tw=function(e,t){function n(e,t){return iC(e)*iC(t)>o}function a(e,n,a){var i=vd(e),r=vd(n),s=[1,0,0],l=Td(i,r),d=Sd(l,l),p=l[0],c=d-p*p;if(!c)return!a&&e;var m=Td(s,l),f=Ed(s,o*d/c),g=Ed(l,-o*p/c);kd(f,g);var _=m,u=Sd(f,_),y=Sd(_,_),h=u*u-y*(Sd(f,f)-1);if(!(0>h)){var b=cC(h),t=Ed(_,(-u-b)/y);if(kd(t,f),t=xd(t),!a)return t;var x=e[0],v=n[0],S=e[1],T=n[1],k;v<x&&(k=x,x=v,v=k);var E=v-x,N=tC(E-ZA)<GA;if(!N&&T<S&&(k=S,S=T,T=k),N||E<GA?N?0<S+T^t[1]<(tC(t[0]-x)<GA?S:T):S<=t[1]&&t[1]<=T:E>ZA^(x<=t[0]&&t[0]<=v)){var A=Ed(_,(-u+b)/y);return kd(A,f),[t,xd(A)]}}}function i(t,n){var a=s?e:ZA-e,i=0;return t<-a?i|=1:t>a&&(i|=2),n<-a?i|=4:n>a&&(i|=8),i}var o=iC(e),s=0<o,r=tC(o)>GA;return vw(n,function(e){var o,l,d,p,u;return{lineStart:function(){p=d=!1,u=1},point:function(m,f){var g=[m,f],_=n(m,f),y=s?_?0:i(m,f):_?i(m+(0>m?ZA:-ZA),f):0,c;if(!o&&(p=d=_)&&e.lineStart(),_!==d&&(c=a(o,g),(!c||TC(o,c)||TC(g,c))&&(g[0]+=GA,g[1]+=GA,_=n(g[0],g[1]))),_!==d)u=0,_?(e.lineStart(),c=a(g,o),e.point(c[0],c[1])):(c=a(o,g),e.point(c[0],c[1]),e.lineEnd()),o=c;else if(r&&o&&s^_){var h;!(y&l)&&(h=a(g,o,!0))&&(u=0,s?(e.lineStart(),e.point(h[0][0],h[0][1]),e.point(h[1][0],h[1][1]),e.lineEnd()):(e.point(h[1][0],h[1][1]),e.lineEnd(),e.lineStart(),e.point(h[0][0],h[0][1])))}!_||o&&TC(o,g)||e.point(g[0],g[1]),o=g,d=_,l=y},lineEnd:function(){d&&e.lineEnd(),o=null},clean:function(){return u|(p&&d)<<1}}},function(n,a,i,o){Dd(o,e,t,i,n,a)},s?[0,-e]:[-ZA,e-ZA])};yp.prototype={constructor:yp,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var kw=16,Ew=iC(30*eC),Nw=function(e,t){return+t?vp(e,t):xp(e)},Lw=_p({point:function(e,t){this.stream.point(e*eC,t*eC)}}),Aw=function(){return kp(Np).scale(155.424).center([0,33.6442])},Cw=function(){return Aw().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-0.6,38.7])},ww=Ap(function(e){return cC(2/(1+e))});ww.invert=Cp(function(e){return 2*gd(e/2)});var Ow=Ap(function(e){return(e=fd(e))&&e/dC(e)});Ow.invert=Cp(function(e){return e});wp.invert=function(e,t){return[e,2*nC(rC(t))-XA]};Rp.invert=Rp;Mp.invert=Cp(nC);Fp.invert=Cp(gd);Bp.invert=Cp(function(e){return 2*nC(e)});zp.invert=function(e,t){return[-t,2*nC(rC(e))-XA]};var Dw=xw(),Pw=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],Rw={albers:Cw,albersusa:function(){function e(e){var t=e[0],n=e[1];return c=null,(l.point(t,n),c)||(d.point(t,n),c)||(p.point(t,n),c)}function t(){return r=s=null,e}var n=Cw(),a=Aw().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i=Aw().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o={point:function(e,t){c=[e,t]}},r,s,l,d,p,c;return e.invert=function(e){var o=n.scale(),r=n.translate(),t=(e[0]-r[0])/o,s=(e[1]-r[1])/o;return(0.12<=s&&0.234>s&&-0.425<=t&&-0.214>t?a:0.166<=s&&0.234>s&&-0.214<=t&&-0.115>t?i:n).invert(e)},e.stream=function(e){return r&&s===e?r:r=Lp([n.stream(s=e),a.stream(e),i.stream(e)])},e.precision=function(e){return arguments.length?(n.precision(e),a.precision(e),i.precision(e),t()):n.precision()},e.scale=function(t){return arguments.length?(n.scale(t),a.scale(0.35*t),i.scale(t),e.translate(n.translate())):n.scale()},e.translate=function(e){if(!arguments.length)return n.translate();var r=n.scale(),s=+e[0],c=+e[1];return l=n.translate(e).clipExtent([[s-0.455*r,c-0.238*r],[s+0.455*r,c+0.238*r]]).stream(o),d=a.translate([s-0.307*r,c+0.201*r]).clipExtent([[s-0.425*r+GA,c+0.12*r+GA],[s-0.214*r-GA,c+0.234*r-GA]]).stream(o),p=i.translate([s-0.205*r,c+0.212*r]).clipExtent([[s-0.214*r+GA,c+0.166*r+GA],[s-0.115*r-GA,c+0.234*r-GA]]).stream(o),t()},e.fitExtent=function(t,n){return hp(e,t,n)},e.fitSize=function(t,n){return bp(e,t,n)},e.scale(1070)},azimuthalequalarea:function(){return Sp(ww).scale(124.75).clipAngle(180-1e-3)},azimuthalequidistant:function(){return Sp(Ow).scale(79.4188).clipAngle(180-1e-3)},conicconformal:function(){return kp(Pp).scale(109.5).parallels([30,30])},conicequalarea:Aw,conicequidistant:function(){return kp(Ip).scale(131.154).center([0,13.9389])},equirectangular:function(){return Sp(Rp).scale(152.63)},gnomonic:function(){return Sp(Mp).scale(144.049).clipAngle(60)},mercator:function(){return Op(wp).scale(961/JA)},orthographic:function(){return Sp(Fp).scale(249.5).clipAngle(90+GA)},stereographic:function(){return Sp(Bp).scale(250).clipAngle(142)},transversemercator:function(){var e=Op(zp),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],2<e.length?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)}};for(var Iw in Rw)Up(Iw,Rw[Iw]);Wp.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"as",type:"string",default:"path"}]};var Mw=bh(Wp,sn);Mw.transform=function(e,t){function n(e){e[r]=i(o(e))}var a=t.fork(t.ALL),i=this.value,o=e.field||id,r=e.as||"path",s;return!i||e.modified()?(this.value=i=$p(e.projection).context(null),a.materialize().reflow().visit(a.SOURCE,n)):(i.context(null),s=o===id||t.modified(o.fields),a.visit(s?a.ADD_MOD:a.ADD,n)),a.modifies(r)},Hp.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};var Fw=bh(Hp,sn);Fw.transform=function(e,t){function n(e){var t=a([i(e),o(e)]);t?(e[s]=t[0],e[l]=t[1]):(e[s]=void 0,e[l]=void 0)}var a=e.projection,i=e.fields[0],o=e.fields[1],r=e.as||["x","y"],s=r[0],l=r[1],d;return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(d=t.modified(i.fields)||t.modified(o.fields),t.visit(d?t.ADD_MOD:t.ADD,n)),t.modifies(r)},qp.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"as",type:"string",default:"shape"}]};var Bw=bh(qp,sn);Bw.transform=function(e,t){var n=t.fork(t.ALL),a=this.value,i=e.field||Gy("datum"),o=e.as||"shape",r=n.ADD_MOD;return(!a||e.modified())&&(this.value=a=Yp($p(e.projection),i),n.materialize().reflow(),r=n.SOURCE),n.visit(r,function(e){e[o]=a}),n.modifies(o)},Vp.Definition={type:"Graticule",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};var zw=bh(Vp,sn);zw.transform=function(e,n){var a=n.fork(),i=this.value,o=this.generator,r;if(!i.length||e.modified())for(var t in e)ph(o[t])&&o[t](e[t]);return r=o(),i.length?a.mod.push(J(i[0],r)):a.add.push(Z(r)),i[0]=r,a.source=i,a};var jw=bh(Gp,sn);jw.transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=Xp(e.type),Pw.forEach(function(t){null!=e[t]&&Kp(n,t,e[t])})):Pw.forEach(function(t){e.modified(t)&&Kp(n,t,e[t])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&Zp(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var Uw=Object.freeze({contour:dd,geojson:cd,geopath:Wp,geopoint:Hp,geoshape:qp,graticule:Vp,projection:Gp}),$w=function(e){return function(){return e}},Ww=function(){return 1e-6*(Math.random()-0.5)},Hw=function(e,t,n,a,i){this.node=e,this.x0=t,this.y0=n,this.x1=a,this.y1=i},qw=nc.prototype=ac.prototype;qw.copy=function(){var e=new ac(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,a;if(!t)return e;if(!t.length)return e._root=ic(t),e;for(n=[{source:t,target:e._root=[,,,,]}];t=n.pop();)for(var o=0;4>o;++o)(a=t.source[o])&&(a.length?n.push({source:a,target:t.target[o]=[,,,,]}):t.target[o]=ic(a));return e},qw.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Qp(this.cover(t,n),t,n,e)},qw.addAll=function(e){var t=e.length,n=Array(t),a=Array(t),o=Infinity,r=Infinity,s=-Infinity,l=-Infinity,p,d,i,c;for(d=0;d<t;++d)isNaN(i=+this._x.call(null,p=e[d]))||isNaN(c=+this._y.call(null,p))||(n[d]=i,a[d]=c,i<o&&(o=i),i>s&&(s=i),c<r&&(r=c),c>l&&(l=c));for(s<o&&(o=this._x0,s=this._x1),l<r&&(r=this._y0,l=this._y1),this.cover(o,r).cover(s,l),d=0;d<t;++d)Qp(this,n[d],a[d],e[d]);return this},qw.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,a=this._y0,o=this._x1,r=this._y1;if(isNaN(n))o=(n=E(e))+1,r=(a=E(t))+1;else if(n>e||e>o||a>t||t>r){var s=o-n,l=this._root,d,p;switch(p=(t<(a+r)/2)<<1|e<(n+o)/2){case 0:{do d=[,,,,],d[p]=l,l=d;while((s*=2,o=n+s,r=a+s,e>o||t>r));break}case 1:{do d=[,,,,],d[p]=l,l=d;while((s*=2,n=o-s,r=a+s,n>e||t>r));break}case 2:{do d=[,,,,],d[p]=l,l=d;while((s*=2,o=n+s,a=r-s,e>o||a>t));break}case 3:{do d=[,,,,],d[p]=l,l=d;while((s*=2,n=o-s,a=r-s,n>e||a>t));break}}this._root&&this._root.length&&(this._root=l)}else return this;return this._x0=n,this._y0=a,this._x1=o,this._y1=r,this},qw.data=function(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e},qw.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},qw.find=function(e,t,n){var a=this._x0,o=this._y0,r=this._x1,s=this._y1,l=[],p=this._root,c,m,f,g,_,y,h;for(p&&l.push(new Hw(p,a,o,r,s)),null==n?n=Infinity:(a=e-n,o=t-n,r=e+n,s=t+n,n*=n);y=l.pop();)if(!(!(p=y.node)||(m=y.x0)>r||(f=y.y0)>s||(g=y.x1)<a||(_=y.y1)<o))if(p.length){var i=(m+g)/2,b=(f+_)/2;l.push(new Hw(p[3],i,b,g,_),new Hw(p[2],m,b,i,_),new Hw(p[1],i,f,g,b),new Hw(p[0],m,f,i,b)),(h=(t>=b)<<1|e>=i)&&(y=l[l.length-1],l[l.length-1]=l[l.length-1-h],l[l.length-1-h]=y)}else{var x=e-+this._x.call(null,p.data),v=t-+this._y.call(null,p.data),S=x*x+v*v;if(S<n){var T=u(n=S);a=e-T,o=t-T,r=e+T,s=t+T,c=p.data}}return c},qw.remove=function(e){if(isNaN(c=+this._x.call(null,e))||isNaN(u=+this._y.call(null,e)))return this;var t=this._root,n=this._x0,a=this._y0,o=this._x1,r=this._y1,s,l,d,p,c,u,m,f,g,_,y,i;if(!t)return this;if(t.length)for(;;){if((g=c>=(m=(n+o)/2))?n=m:o=m,(_=u>=(f=(a+r)/2))?a=f:r=f,(s=t,!(t=t[y=_<<1|g])))return this;if(!t.length)break;(s[3&y+1]||s[3&y+2]||s[3&y+3])&&(l=s,i=y)}for(;t.data!==e;)if(d=t,!(t=t.next))return this;return((p=t.next)&&delete t.next,d)?(p?d.next=p:delete d.next,this):s?(p?s[y]=p:delete s[y],(t=s[0]||s[1]||s[2]||s[3])&&t===(s[3]||s[2]||s[1]||s[0])&&!t.length&&(l?l[i]=t:this._root=t),this):(this._root=p,this)},qw.removeAll=function(e){for(var t=0,a=e.length;t<a;++t)this.remove(e[t]);return this},qw.root=function(){return this._root},qw.size=function(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e},qw.visit=function(e){var t=[],n=this._root,a,i,o,r,s,l;for(n&&t.push(new Hw(n,this._x0,this._y0,this._x1,this._y1));a=t.pop();)if(!e(n=a.node,o=a.x0,r=a.y0,s=a.x1,l=a.y1)&&n.length){var d=(o+s)/2,p=(r+l)/2;(i=n[3])&&t.push(new Hw(i,d,p,s,l)),(i=n[2])&&t.push(new Hw(i,o,p,d,l)),(i=n[1])&&t.push(new Hw(i,d,r,s,p)),(i=n[0])&&t.push(new Hw(i,o,r,d,p))}return this},qw.visitAfter=function(e){var t=[],n=[],a;for(this._root&&t.push(new Hw(this._root,this._x0,this._y0,this._x1,this._y1));a=t.pop();){var i=a.node;if(i.length){var o=a.x0,r=a.y0,s=a.x1,l=a.y1,d=(o+s)/2,p=(r+l)/2,c;(c=i[0])&&t.push(new Hw(c,o,r,d,p)),(c=i[1])&&t.push(new Hw(c,d,r,s,p)),(c=i[2])&&t.push(new Hw(c,o,p,d,l)),(c=i[3])&&t.push(new Hw(c,d,p,s,l))}n.push(a)}for(;a=n.pop();)e(a.node,a.x0,a.y0,a.x1,a.y1);return this},qw.x=function(e){return arguments.length?(this._x=e,this):this._x},qw.y=function(e){return arguments.length?(this._y=e,this):this._y};var Yw=0,Vw=0,Gw=0,Zw=1e3,Xw=0,Kw=0,Jw=0,Qw="object"==typeof performance&&performance.now?performance:Date,eO="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)},tO,nO;cc.prototype=uc.prototype={constructor:cc,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?dc():+n)+(null==t?0:+t),this._next||nO===this||(nO?nO._next=this:tO=this,nO=this),this._call=e,this._time=n,yc()},stop:function(){this._call&&(this._call=null,this._time=Infinity,yc())}};var aO=function(e){function t(){n(),y.call("tick",h),r<l&&(_.stop(),y.call("end",h))}function n(){var t=e.length,n,a;for(r+=(p-r)*d,f.each(function(e){e(r)}),n=0;n<t;++n)a=e[n],null==a.fx?a.x+=a.vx*=m:(a.x=a.fx,a.vx=0),null==a.fy?a.y+=a.vy*=m:(a.y=a.fy,a.vy=0)}function a(){for(var t=0,a=e.length,n;t<a;++t){if(n=e[t],n.index=t,isNaN(n.x)||isNaN(n.y)){var i=10*u(t),r=t*(o*(3-2.23606797749979));n.x=i*c(r),n.y=i*s(r)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function i(t){return t.initialize&&t.initialize(e),t}var r=1,l=1e-3,d=1-g(l,1/300),p=0,m=0.6,f=le(),_=uc(t),y=ge("tick","end"),h;return null==e&&(e=[]),a(),h={tick:n,restart:function(){return _.restart(t),h},stop:function(){return _.stop(),h},nodes:function(t){return arguments.length?(e=t,a(),f.each(i),h):e},alpha:function(e){return arguments.length?(r=+e,h):r},alphaMin:function(e){return arguments.length?(l=+e,h):l},alphaDecay:function(e){return arguments.length?(d=+e,h):+d},alphaTarget:function(e){return arguments.length?(p=+e,h):p},velocityDecay:function(e){return arguments.length?(m=1-e,h):1-m},force:function(e,t){return 1<arguments.length?(null==t?f.remove(e):f.set(e,i(t)),h):f.get(e)},find:function(t,a,o){var r=0,i=e.length,n,s,l,d,p;for(null==o?o=Infinity:o*=o,r=0;r<i;++r)d=e[r],n=t-d.x,s=a-d.y,l=n*n+s*s,l<o&&(p=d,o=l);return p},on:function(e,t){return 1<arguments.length?(y.on(e,t),h):y.on(e)}}},iO={center:function(e,t){function n(){var o=a.length,n=0,r=0,s,i;for(s=0;s<o;++s)i=a[s],n+=i.x,r+=i.y;for(n=n/o-e,r=r/o-t,s=0;s<o;++s)i=a[s],i.x-=n,i.y-=r}var a;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){a=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n},collide:function(e){function t(){function e(e,t,n,a,o){var s=e.data,d=e.r,_=f+d;if(s){if(s.index>p.index){var r=c-s.x-s.vx,h=m-s.y-s.vy,y=r*r+h*h;y<_*_&&(0==r&&(r=Ww(),y+=r*r),0==h&&(h=Ww(),y+=h*h),y=(_-(y=u(y)))/y*i,p.vx+=(r*=y)*(_=(d*=d)/(g+d)),p.vy+=(h*=y)*_,s.vx-=r*(_=1-_),s.vy-=h*_)}return}return t>c+_||a<c-_||n>m+_||o<m-_}for(var t=r.length,n=0,l,d,p,c,m,f,g;n<o;++n)for(d=nc(r,oc,rc).visitAfter(a),l=0;l<t;++l)p=r[l],f=s[p.index],g=f*f,c=p.x+p.vx,m=p.y+p.vy,d.visit(e)}function a(e){if(e.data)return e.r=s[e.data.index];for(var t=e.r=0;4>t;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function n(){if(r){var t=r.length,n,a;for(s=Array(t),n=0;n<t;++n)a=r[n],s[a.index]=+e(a,n,r)}}var i=1,o=1,r,s;return"function"!=typeof e&&(e=$w(null==e?1:+e)),t.initialize=function(e){r=e,n()},t.iterations=function(e){return arguments.length?(o=+e,t):o},t.strength=function(e){return arguments.length?(i=+e,t):i},t.radius=function(a){return arguments.length?(e="function"==typeof a?a:$w(+a),n(),t):e},t},nbody:function(){function e(e){var t=l.length,n=nc(l,hc,bc).visitAfter(a),r;for(p=e,r=0;r<t;++r)d=l[r],n.visit(o)}function t(){if(l){var e=l.length,t,n;for(c=Array(e),t=0;t<e;++t)n=l[t],c[n.index]=+r(n,t,l)}}function a(e){var t=0,n,a,o,r,s;if(e.length){for(o=r=s=0;4>s;++s)(n=e[s])&&(a=n.value)&&(t+=a,o+=a*n.x,r+=a*n.y);e.x=o/t,e.y=r/t}else{n=e,n.x=n.data.x,n.y=n.data.y;do t+=c[n.data.index];while(n=n.next)}e.value=t}function o(e,t,a,o){if(!e.value)return!0;var r=e.x-d.x,m=e.y-d.y,f=o-t,g=r*r+m*m;if(f*f/s<g)return g<i&&(0==r&&(r=Ww(),g+=r*r),0==m&&(m=Ww(),g+=m*m),g<n&&(g=u(n*g)),d.vx+=r*e.value*p/g,d.vy+=m*e.value*p/g),!0;if(!(e.length||g>=i)){(e.data!==d||e.next)&&(0===r&&(r=Ww(),g+=r*r),0===m&&(m=Ww(),g+=m*m),g<n&&(g=u(n*g)));do e.data!==d&&(f=c[e.data.index]*p/g,d.vx+=r*f,d.vy+=m*f);while(e=e.next)}}var r=$w(-30),n=1,i=Infinity,s=0.81,l,d,p,c;return e.initialize=function(e){l=e,t()},e.strength=function(n){return arguments.length?(r="function"==typeof n?n:$w(+n),t(),e):r},e.distanceMin=function(t){return arguments.length?(n=t*t,e):u(n)},e.distanceMax=function(t){return arguments.length?(i=t*t,e):u(i)},e.theta=function(t){return arguments.length?(s=t*t,e):u(s)},e},link:function(e){function t(t){for(var a=0,o=e.length;a<d;++a)for(var n=0,i,r,s,m,f,g,l;n<o;++n)i=e[n],r=i.source,s=i.target,m=s.x+s.vx-r.x-r.vx||Ww(),f=s.y+s.vy-r.y-r.vy||Ww(),g=u(m*m+f*f),g=(g-c[n])/g*t*p[n],m*=g,f*=g,s.vx-=m*(l=_[n]),s.vy-=f*l,r.vx+=m*(l=1-l),r.vy+=f*l}function n(){if(f){var t=f.length,n=e.length,s=le(f,r),l,i;for(l=0,g=Array(t);l<n;++l)i=e[l],i.index=l,"object"!=typeof i.source&&(i.source=lc(s,i.source)),"object"!=typeof i.target&&(i.target=lc(s,i.target)),g[i.source.index]=(g[i.source.index]||0)+1,g[i.target.index]=(g[i.target.index]||0)+1;for(l=0,_=Array(n);l<n;++l)i=e[l],_[l]=g[i.source.index]/(g[i.source.index]+g[i.target.index]);p=Array(n),a(),c=Array(n),o()}}function a(){if(f)for(var t=0,a=e.length;t<a;++t)p[t]=+s(e[t],t,e)}function o(){if(f)for(var t=0,a=e.length;t<a;++t)c[t]=+l(e[t],t,e)}var r=sc,s=function(e){return 1/S(g[e.source.index],g[e.target.index])},l=$w(30),d=1,p,c,f,g,_;return null==e&&(e=[]),t.initialize=function(e){f=e,n()},t.links=function(a){return arguments.length?(e=a,n(),t):e},t.id=function(e){return arguments.length?(r=e,t):r},t.iterations=function(e){return arguments.length?(d=+e,t):d},t.strength=function(e){return arguments.length?(s="function"==typeof e?e:$w(+e),a(),t):s},t.distance=function(e){return arguments.length?(l="function"==typeof e?e:$w(+e),o(),t):l},t},x:function(e){function t(e){for(var t=0,a=o.length,n;t<a;++t)n=o[t],n.vx+=(s[t]-n.x)*r[t]*e}function n(){if(o){var t=o.length,n;for(r=Array(t),s=Array(t),n=0;n<t;++n)r[n]=isNaN(s[n]=+e(o[n],n,o))?0:+a(o[n],n,o)}}var a=$w(0.1),o,r,s;return"function"!=typeof e&&(e=$w(null==e?0:+e)),t.initialize=function(e){o=e,n()},t.strength=function(e){return arguments.length?(a="function"==typeof e?e:$w(+e),n(),t):a},t.x=function(a){return arguments.length?(e="function"==typeof a?a:$w(+a),n(),t):e},t},y:function(e){function t(e){for(var t=0,a=o.length,n;t<a;++t)n=o[t],n.vy+=(s[t]-n.y)*r[t]*e}function n(){if(o){var t=o.length,n;for(r=Array(t),s=Array(t),n=0;n<t;++n)r[n]=isNaN(s[n]=+e(o[n],n,o))?0:+a(o[n],n,o)}}var a=$w(0.1),o,r,s;return"function"!=typeof e&&(e=$w(null==e?0:+e)),t.initialize=function(e){o=e,n()},t.strength=function(e){return arguments.length?(a="function"==typeof e?e:$w(+e),n(),t):a},t.y=function(a){return arguments.length?(e="function"==typeof a?a:$w(+a),n(),t):e},t}},oO="forces",rO=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],sO=["static","iterations"],lO=["x","y","vx","vy"];xc.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:0.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:0.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:0.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:0.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:0.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:0.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:lO}]};var dO=bh(xc,sn);dO.transform=function(e,t){var n=this.value,a=t.changed(t.ADD_REM),i=e.modified(rO),o=e.iterations||300;if(n?(a&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Tc(n,e,0,t)):(this.value=n=Sc(t.source,e),n.on("tick",vc(t.dataflow,this)),!e.static&&(a=!0,n.tick()),t.modifies("index")),i||a||e.modified(sO)||t.changed()&&e.restart)if(n.alpha(N(n.alpha(),e.alpha||1)).alphaDecay(1-g(n.alphaMin(),1/o)),e.static)for(n.stop();0<=--o;)n.tick();else if(n.stopped()&&n.restart(),!a)return t.StopPropagation;return this.finish(e,t)},dO.finish=function(e,t){for(var a=t.dataflow,o=this._argops,r=0,s=o.length,l;r<s;++r)if(l=o[r],l.name===oO&&"link"===l.op._argval.force)for(var d=l.op._argops,p=0,i=d.length,n;p<i;++p)if("links"===d[p].name&&(n=d[p].op.source)){a.pulse(n,a.changeset().reflow());break}return t.reflow(e.modified()).modifies(lO)};var pO=Object.freeze({force:xc});jc.prototype=Mc.prototype={constructor:jc,count:function(){return this.eachAfter(Rc)},each:function(e){var t=this,a=[t],o,r,s,i;do for(o=a.reverse(),a=[];t=o.pop();)if(e(t),r=t.children,r)for(s=0,i=r.length;s<i;++s)a.push(r[s]);while(a.length);return this},eachAfter:function(e){for(var t=this,a=[t],o=[],r,s,i;t=a.pop();)if(o.push(t),r=t.children,r)for(s=0,i=r.length;s<i;++s)a.push(r[s]);for(;t=o.pop();)e(t);return this},eachBefore:function(e){for(var t=this,n=[t],a,o;t=n.pop();)if(e(t),a=t.children,a)for(o=a.length-1;0<=o;--o)n.push(a[o]);return this},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,a=t.children,o=a&&a.length;0<=--o;)n+=a[o].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=Ic(t,e),a=[t];t!==n;)t=t.parent,a.push(t);for(var i=a.length;e!==n;)a.splice(i,0,e),e=e.parent;return a},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return Mc(this).eachBefore(Bc)}};var cO=Array.prototype.slice,uO=function(t){for(var a=0,i=(t=Uc(cO.call(t))).length,n=[],o,r;a<i;)o=t[a],r&&Hc(r,o)?++a:(r=Yc(n=$c(n,o)),a=0);return r},mO=function(e){return function(){return e}},fO=function(e){e.x0=l(e.x0),e.y0=l(e.y0),e.x1=l(e.x1),e.y1=l(e.y1)},gO=function(e,t,a,o,r){for(var s=e.children,l=-1,i=s.length,n=e.value&&(o-t)/e.value,d;++l<i;)d=s[l],d.y0=a,d.y1=r,d.x0=t,d.x1=t+=d.value*n},_O="$",yO={depth:-1},hO={},bO=function(){function e(e){var o=e.length,n=Array(o),r={},s,l,i,d,p,c,u;for(l=0;l<o;++l)s=e[l],p=n[l]=new jc(s),null!=(c=t(s,l,e))&&(c+="")&&(u=_O+(p.id=c),r[u]=u in r?hO:p);for(l=0;l<o;++l)if(p=n[l],c=a(e[l],l,e),null==c||!(c+="")){if(i)throw new Error("multiple roots");i=p}else{if(d=r[_O+c],!d)throw new Error("missing: "+c);if(d===hO)throw new Error("ambiguous: "+c);d.children?d.children.push(p):d.children=[p],p.parent=d}if(!i)throw new Error("no root");if(i.parent=yO,i.eachBefore(function(e){e.depth=e.parent.depth+1,--o}).eachBefore(zc),i.parent=null,0<o)throw new Error("cycle");return i}var t=lu,a=du;return e.id=function(n){return arguments.length?(t=nu(n),e):t},e.parentId=function(t){return arguments.length?(a=nu(t),e):a},e};_u.prototype=Object.create(jc.prototype);var xO=function(e,t,a,o,r){for(var s=e.children,l=-1,i=s.length,n=e.value&&(r-a)/e.value,d;++l<i;)d=s[l],d.x0=t,d.x1=o,d.y0=a,d.y1=a+=d.value*n},vO=(1+2.23606797749979)/2,SO=function e(t){function n(e,n,a,i,o){hu(t,e,n,a,i,o)}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(vO),TO=function(){function e(e){return e.x0=e.y0=0,e.x1=i,e.y1=o,e.eachBefore(t),r=[0],a&&e.eachBefore(fO),e}function t(e){var t=r[e.depth],a=e.x0+t,i=e.y0+t,o=e.x1-t,p=e.y1-t;o<a&&(a=o=(a+o)/2),p<i&&(i=p=(i+p)/2),e.x0=a,e.y0=i,e.x1=o,e.y1=p,e.children&&(t=r[e.depth+1]=s(e)/2,a+=u(e)-t,i+=l(e)-t,o-=d(e)-t,p-=c(e)-t,o<a&&(a=o=(a+o)/2),p<i&&(i=p=(i+p)/2),n(e,a,i,o,p))}var n=SO,a=!1,i=1,o=1,r=[0],s=au,l=au,d=au,c=au,u=au;return e.round=function(t){return arguments.length?(a=!!t,e):a},e.size=function(t){return arguments.length?(i=+t[0],o=+t[1],e):[i,o]},e.tile=function(t){return arguments.length?(n=nu(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(s="function"==typeof t?t:mO(+t),e):s},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(l="function"==typeof t?t:mO(+t),e):l},e.paddingRight=function(t){return arguments.length?(d="function"==typeof t?t:mO(+t),e):d},e.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:mO(+t),e):c},e.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:mO(+t),e):u},e},kO=function e(t){function n(e,a,o,r,s){if((c=e._squarify)&&c.ratio===t)for(var l=-1,d=c.length,p=e.value,c,u,m,f,i;++l<d;){for(u=c[l],m=u.children,(f=u.value=0,i=m.length);f<i;++f)u.value+=m[f].value;u.dice?gO(u,a,o,r,o+=(s-o)*u.value/p):xO(u,a,o,a+=(r-a)*u.value/p,s),p-=u.value}else e._squarify=c=hu(t,e,a,o,r,s),c.ratio=t}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(vO);bu.Definition={type:"Nest",metadata:{treesource:!0,source:!0,generates:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"key",type:"field"},{name:"generate",type:"boolean"}]};var EO=bh(bu,sn);EO.transform=function(e,t){t.source||Wy("Nest transform requires an upstream data source.");var n=e.key||V,a=e.generate,i=e.modified(),o=a||i?t.fork(t.ALL):t,r,s,l;return(!this.value||i||t.changed())&&(a&&this.value&&(o.materialize(o.REM),this.value.each(function(e){e.children&&o.rem.push(e)})),r=dh(e.keys).reduce(function(e,t){return e.key(t),e},Hh()).entries(t.source),this.value=s=Mc({values:r},xu),a&&(o.materialize(o.ADD),o.source=o.source.slice(),s.each(function(e){e.children&&(e=Z(e.data),o.add.push(e),o.source.push(e))})),l=s.lookup={},s.each(function(e){null!=V(e.data)&&(l[n(e.data)]=e)})),o.source.root=this.value,o};var NO=bh(vu,sn);NO.transform=function(e,t){t.source&&t.source.root||Wy(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),a=this.fields,i=t.source.root,o=e.as||a;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),Su(n,this.params,e);try{this.value=n(i)}catch(e){Wy(e)}return i.each(function(e){Tu(e,a,o)}),t.reflow(e.modified()).modifies(o).modifies("leaf")};var LO=["x","y","r","depth","children"];ku.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:LO}]};var AO=bh(ku,vu);AO.layout=function(){function e(e){return e.x=n/2,e.y=a/2,t?e.eachBefore(ou(t)).eachAfter(ru(i,0.5)).eachBefore(su(1)):e.eachBefore(ou(iu)).eachAfter(ru(au,1)).eachAfter(ru(i,e.r/S(n,a))).eachBefore(su(S(n,a)/(2*e.r))),e}var t=null,n=1,a=1,i=au;return e.radius=function(n){return arguments.length?(t=tu(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],a=+t[1],e):[n,a]},e.padding=function(t){return arguments.length?(i="function"==typeof t?t:mO(+t),e):i},e},AO.params=["size","padding"],AO.fields=LO;var CO=["x0","y0","x1","y1","depth","children"];Eu.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:CO}]};var wO=bh(Eu,vu);wO.layout=function(){function e(e){var s=e.height+1;return e.x0=e.y0=o,e.x1=a,e.y1=i/s,e.eachBefore(t(i,s)),r&&e.eachBefore(fO),e}function t(e,t){return function(n){n.children&&gO(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var a=n.x0,i=n.y0,r=n.x1-o,s=n.y1-o;r<a&&(a=r=(a+r)/2),s<i&&(i=s=(i+s)/2),n.x0=a,n.y0=i,n.x1=r,n.y1=s}}var a=1,i=1,o=0,r=!1;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(a=+t[0],i=+t[1],e):[a,i]},e.padding=function(t){return arguments.length?(o=+t,e):o},e},wO.params=["size","round","padding"],wO.fields=CO,Nu.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};var OO=bh(Nu,sn);OO.transform=function(e,t){t.source||Wy("Stratify transform requires an upstream data source.");var n=e.modified(),a=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields),i,o;return a&&(i=bO().id(e.key).parentId(e.parentKey)(t.source),o=i.lookup={},i.each(function(t){o[e.key(t.data)]=t}),this.value=i),t.source.root=this.value,n?t.fork(t.ALL):t};var DO={tidy:function(){function e(e){var p=yu(e);if(p.eachAfter(n),p.parent.m=-p.z,p.eachBefore(a),d)e.eachBefore(i);else{var t=e,c=e,u=e;e.eachBefore(function(e){e.x<t.x&&(t=e),e.x>c.x&&(c=e),e.depth>u.depth&&(u=e)});var m=t===c?1:o(t,c)/2,s=m-t.x,f=r/(c.x+m+s),g=l/(u.depth||1);e.eachBefore(function(e){e.x=(e.x+s)*f,e.y=e.depth*g})}return e}function n(e){var n=e.children,a=e.parent.children,i=e.i?a[e.i-1]:null;if(n){fu(e);var r=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+o(e._,i._),e.m=e.z-r):e.z=r}else i&&(e.z=i.z+o(e._,i._));e.parent.A=t(e,i,e.parent.A||a[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function t(e,t,n){if(t){for(var a=e,i=e,r=t,s=a.parent.children[0],l=a.m,d=i.m,p=r.m,c=s.m,u;r=uu(r),a=cu(a),r&&a;)s=cu(s),i=uu(i),i.a=e,u=r.z+p-a.z-l+o(r._,a._),0<u&&(mu(gu(r,e,n),e,u),l+=u,d+=u),p+=r.m,l+=a.m,c+=s.m,d+=i.m;r&&!uu(i)&&(i.t=r,i.m+=p-d),a&&!cu(s)&&(s.t=a,s.m+=l-c,n=e)}return n}function i(e){e.x*=r,e.y=e.depth*l}var o=pu,r=1,l=1,d=null;return e.separation=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(d=!1,r=+t[0],l=+t[1],e):d?null:[r,l]},e.nodeSize=function(t){return arguments.length?(d=!0,r=+t[0],l=+t[1],e):d?[r,l]:null},e},cluster:function(){function e(e){var o=0,r;e.eachAfter(function(e){var n=e.children;n?(e.x=Ac(n),e.y=wc(n)):(e.x=r?o+=t(e,r):0,e.y=0,r=e)});var s=Dc(e),l=Pc(e),d=s.x-t(s,l)/2,p=l.x+t(l,s)/2;return e.eachAfter(i?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*a}:function(t){t.x=(t.x-d)/(p-d)*n,t.y=(1-(e.y?t.y/e.y:1))*a})}var t=Lc,n=1,a=1,i=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(i=!1,n=+t[0],a=+t[1],e):i?null:[n,a]},e.nodeSize=function(t){return arguments.length?(i=!0,n=+t[0],a=+t[1],e):i?[n,a]:null},e}},PO=["x","y","depth","children"];Lu.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:PO}]};var RO=bh(Lu,vu);RO.layout=function(e){var t=e||"tidy";return DO.hasOwnProperty(t)?DO[t]():void Wy("Unrecognized Tree layout method: "+t)},RO.params=["size","nodeSize","separation"],RO.fields=PO,Au.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[{name:"key",type:"field"}]};var IO=bh(Au,sn);IO.transform=function(e,t){function a(e){var t=i[e];t&&(s[e]=1,l.mod.push(t))}t.source&&t.source.root||Wy("TreeLinks transform requires a backing tree data source.");var n=t.source.root,o=n.lookup,i=this.value,r=e.key||V,s={},l=t.fork();return t.visit(t.REM,function(e){var t=r(e),n=i[t];n&&(delete i[t],l.rem.push(n))}),t.visit(t.ADD,function(e){var n=r(e),a;(a=Cu(o[n]))&&(l.add.push(i[n]=Z({source:a,target:e})),s[n]=1)}),t.visit(t.MOD,function(e){var t=r(e),l=o[t],d=l.children;if(a(t),d)for(var p=0,i=d.length;p<i;++p)s[t=r(d[p].data)]||a(t)}),l};var MO={binary:function(e,t,a,o,r){function s(e,t,a,i,o,r,d){if(e>=t-1){var p=l[e];return p.x0=i,p.y0=o,p.x1=r,void(p.y1=d)}for(var c=n[e],u=a/2+c,m=e+1,f=t-1;m<f;){var g=m+f>>>1;n[g]<u?m=g+1:f=g}u-n[m-1]<n[m]-u&&e+1<m&&--m;var _=n[m]-c,y=a-_;if(r-i>d-o){var h=(i*y+r*_)/a;s(e,m,_,i,o,h,d),s(m,t,y,h,o,r,d)}else{var b=(o*y+d*_)/a;s(e,m,_,i,o,r,b),s(m,t,y,i,b,r,d)}}var l=e.children,d=l.length,n=Array(d+1),p,i;for(n[0]=i=p=0;p<d;++p)n[p+1]=i+=l[p].value;s(0,d,e.value,t,a,o,r)},dice:gO,slice:xO,slicedice:function(e,t,n,a,i){(1&e.depth?xO:gO)(e,t,n,a,i)},squarify:SO,resquarify:kO},FO=["x0","y0","x1","y1","depth","children"];wu.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:FO}]};var BO=bh(wu,vu);BO.layout=function(){var e=TO();return e.ratio=function(n){var a=e.tile();a.ratio&&e.tile(a.ratio(n))},e.method=function(t){MO.hasOwnProperty(t)?e.tile(MO[t]):Wy("Unrecognized Treemap layout method: "+t)},e},BO.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],BO.fields=FO;var zO=Object.freeze({nest:bu,pack:ku,partition:Eu,stratify:Nu,tree:Lu,treelinks:Au,treemap:wu}),jO=function(e){return function(){return e}};Pu.prototype={constructor:Pu,insert:function(e,t){var n,a,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Fu(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)a=n.U,n===a.L?(i=a.R,i&&i.C?(n.C=i.C=!1,a.C=!0,e=a):(e===n.R&&(Iu(this,n),e=n,n=e.U),n.C=!1,a.C=!0,Mu(this,a))):(i=a.L,i&&i.C?(n.C=i.C=!1,a.C=!0,e=a):(e===n.L&&(Mu(this,n),e=n,n=e.U),n.C=!1,a.C=!0,Iu(this,a))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n=e.L,a=e.R,i,o,r;if(o=n?a?Fu(a):n:a,t?t.L===e?t.L=o:t.R=o:this._=o,n&&a?(r=o.C,o.C=e.C,o.L=n,n.U=o,o===a?(o.U=t,t=o,e=o.R):(t=o.U,o.U=e.U,e=o.R,t.L=e,o.R=a,a.U=o)):(r=e.C,e=o),e&&(e.U=t),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===t.L){if(i=t.R,i.C&&(i.C=!1,t.C=!0,Iu(this,t),i=t.R),i.L&&i.L.C||i.R&&i.R.C){i.R&&i.R.C||(i.L.C=!1,i.C=!0,Mu(this,i),i=t.R),i.C=t.C,t.C=i.R.C=!1,Iu(this,t),e=this._;break}}else if(i=t.L,i.C&&(i.C=!1,t.C=!0,Mu(this,t),i=t.L),i.L&&i.L.C||i.R&&i.R.C){i.L&&i.L.C||(i.R.C=!1,i.C=!0,Iu(this,i),i=t.L),i.C=t.C,t.C=i.L.C=!1,Mu(this,t),e=this._;break}i.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};var UO=[],$O=[],WO=1e-6,HO=1e-12,qO,YO,VO,GO,ZO;lm.prototype={constructor:lm,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return Yu(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,a){if(d=(l=n.halfedges).length)for(var i=n.site,o=-1,r=t[l[d-1]],s=r.left===i?r.right:r.left,l,d,p;++o<d;)p=s,r=t[l[o]],s=r.left===i?r.right:r.left,p&&s&&a<p.index&&a<s.index&&0>rm(i,p,s)&&e.push([i.data,p.data,s.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,a){for(var i=this,o=i._found||0,r=i.cells.length,n,s;!(s=i.cells[o]);)if(++o>=r)return null;var l=e-s.site[0],d=t-s.site[1],p=l*l+d*d;do s=i.cells[n=o],o=null,s.halfedges.forEach(function(n){var a=i.edges[n],r=a.left;if(r!==s.site&&r||(r=a.right)){var l=e-r[0],d=t-r[1],c=l*l+d*d;c<p&&(p=c,o=r.index)}});while(null!==o);return i._found=n,null==a||p<=a*a?s.site:null}};var XO=function(){function e(e){return new lm(e.map(function(a,o){var i=[l(t(a,o,e)/WO)*WO,l(n(a,o,e)/WO)*WO];return i.index=o,i.data=a,i}),a)}var t=Ou,n=Du,a=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(n){return arguments.length?(t="function"==typeof n?n:jO(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:jO(+t),e):n},e.extent=function(t){return arguments.length?(a=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):a&&[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},e.size=function(t){return arguments.length?(a=null==t?null:[[0,0],[+t[0],+t[1]]],e):a&&[a[1][0]-a[0][0],a[1][1]-a[0][1]]},e};dm.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-100000,-100000],[100000,100000]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var KO=bh(dm,sn),JO=[[-100000,-100000],[100000,100000]];KO.transform=function(e,t){var a=e.as||"path",o=t.source,r,s,l,i;for(r=XO().x(e.x).y(e.y),e.size?r.size(e.size):r.extent(e.extent||JO),this.value=r=r(o),s=r.polygons(),(l=0,i=o.length);l<i;++l)o[l][a]=s[l]?"M"+s[l].join("L")+"Z":null;return t.reflow(e.modified()).modifies(a)};var QO=Object.freeze({voronoi:dm}),eD=o/180,tD=64,cw=2048,ch=function(){function e(e){e.width=e.height=1;var t=u(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(tD<<5)/t,e.height=cw/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function t(e,o,l){for(var d=o.x,p=o.y,c=u(a[0]*a[0]+a[1]*a[1]),m=n(a),s=.5>r()?1:-1,f=-s,t,g,_;(t=m(f+=s))&&(g=~~t[0],_=~~t[1],!(S(T(g),T(_))>=c));)if(o.x=d+g,o.y=p+_,!(0>o.x+o.x0||0>o.y+o.y0||o.x+o.x1>a[0]||o.y+o.y1>a[1])&&(!l||!cm(o,e,a[0]))&&(!l||mm(o,l))){for(var y=o.sprite,b=o.width>>5,v=a[0]>>5,k=o.x-(b<<4),E=127&k,N=o.y1-o.y0,h=(o.y+o.y0)*v+(k>>5),x=0,A;x<N;x++){A=0;for(var C=0;C<=b;C++)e[h+C]|=A<<32-E|(C<b?(A=y[x*b+C])>>>E:0);h+=v}return o.sprite=null,!0}return!1}var a=[256,256],n=fm,o=[],r=Math.random,i={},s,l,p,c,m,f,g;return i.layout=function(){for(var u=e(_m()),_=gm((a[0]>>5)*a[1]),y=null,h=o.length,n=-1,i=[],b=o.map(function(e){return{text:s(e),font:l(e),style:c(e),weight:m(e),rotate:f(e),size:~~p(e),padding:g(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size}),x;++n<h;)x=b[n],x.x=a[0]*(r()+.5)>>1,x.y=a[1]*(r()+.5)>>1,pm(u,x,b,n),x.hasText&&t(_,x,y)&&(i.push(x),y?um(y,x):y=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=a[0]>>1,x.y-=a[1]>>1);return i},i.words=function(e){return arguments.length?(o=e,i):o},i.size=function(e){return arguments.length?(a=[+e[0],+e[1]],i):a},i.font=function(e){return arguments.length?(l=ym(e),i):l},i.fontStyle=function(e){return arguments.length?(c=ym(e),i):c},i.fontWeight=function(e){return arguments.length?(m=ym(e),i):m},i.rotate=function(e){return arguments.length?(f=ym(e),i):f},i.text=function(e){return arguments.length?(s=ym(e),i):s},i.spiral=function(e){return arguments.length?(n=nD[e]||e,i):n},i.fontSize=function(e){return arguments.length?(p=ym(e),i):p},i.padding=function(e){return arguments.length?(g=ym(e),i):g},i.random=function(e){return arguments.length?(r=e,i):r},i},nD={archimedean:fm,rectangular:function(e){var n=4,a=n*e[0]/e[1],i=0,o=0;return function(e){var t=0>e?-1:1;switch(3&u(1+4*t*e)-t){case 0:i+=a;break;case 1:o+=n;break;case 2:i-=a;break;default:o-=n;}return[i,o]}}},aD=["x","y","font","fontSize","fontStyle","fontWeight","angle"],iD=["text","font","rotate","fontSize","fontStyle","fontWeight"];hm.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:aD}]};var oD=bh(hm,sn);oD.transform=function(e,a){var o=e.modified();if(o||a.changed(a.ADD_REM)||iD.some(function(t){var n=e[t];return ph(n)&&a.modified(n.fields)})){var r=a.materialize(a.SOURCE).source,s=this.value,l=e.as||aD,d=e.fontSize||14,p;if(ph(d)?p=e.fontSizeRange:d=mh(d),p){var c=d,u=Qs("sqrt")().domain(bm(c,r)).range(p);d=function(e){return u(c(e))}}r.forEach(function(e){e[l[0]]=NaN,e[l[1]]=NaN,e[l[3]]=0});for(var m=s.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(d).random(h.random).layout(),f=s.size(),g=f[0]>>1,_=f[1]>>1,y=0,i=m.length,n,b;y<i;++y)n=m[y],b=n.datum,b[l[0]]=n.x+g,b[l[1]]=n.y+_,b[l[2]]=n.font,b[l[3]]=n.size,b[l[4]]=n.style,b[l[5]]=n.weight,b[l[6]]=n.rotate;return a.reflow(o).modifies(l)}};var rD=Object.freeze({wordcloud:hm}),sD=function(e,t,n){var a=1<<t;return{one:a,zero:~a,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n=this,o=n.bisect(n.range,e.value),r=e.index,s=o[0],l=o[1],d=r.length,p;for(p=0;p<s;++p)t[r[p]]|=a;for(p=l;p<d;++p)t[r[p]]|=a;return n}}};Cm.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var lD=bh(Cm,sn);lD.transform=function(e,t){if(!this._dims)return this.init(e,t);var n=e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)});return n?this.reinit(e,t):this.eval(e,t)},lD.init=function(e,t){for(var n=e.fields,a=e.query,o=this._indices={},r=this._dims=[],s=a.length,l=0,i,d;l<s;++l)i=n[l].fname,d=o[i]||(o[i]=Nm()),r.push(sD(d,l,a[l]));return this.eval(e,t)},lD.reinit=function(e,t){var a=t.materialize().fork(),o=e.fields,r=e.query,s=this._indices,l=this._dims,d=this.value,p=d.curr(),c=d.prev(),u=d.all(),g=a.rem=a.add,_=a.mod,y=r.length,m={},h,b,x,v,S,T,k,i,n;if(c.set(p),t.rem.length&&(S=this.remove(e,t,a)),t.add.length&&d.add(t.add),t.mod.length)for(T={},v=t.mod,k=0,i=v.length;k<i;++k)T[v[k]._index]=1;for(k=0;k<y;++k)n=o[k],(!l[k]||e.modified("fields",k)||t.modified(n.fields))&&(x=n.fname,!(h=m[x])&&(s[x]=b=Nm(),m[x]=h=b.insert(n,t.source,0)),l[k]=sD(b,k,r[k]).onAdd(h,p));for(k=0,i=d.data().length;k<i;++k)if(S[k])continue;else c[k]===p[k]?T[k]&&p[k]!==u&&_.push(k):g.push(k);return d.mask=(1<<y)-1,a},lD.eval=function(e,t){var n=t.materialize().fork(),a=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<a)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<a)-1),t.mod.length&&(this.modify(t,n),i|=(1<<a)-1),this.value.mask=i,n},lD.insert=function(e,t,a){var i=t.add,o=this.value,r=this._dims,s=this._indices,l=e.fields,d={},p=a.add,c=o.size(),u=c+i.length,n=r.length,m,f,g;o.resize(u,n),o.add(i);var _=o.curr(),y=o.prev(),h=o.all();for(m=0;m<n;++m)f=l[m].fname,g=d[f]||(d[f]=s[f].insert(l[m],i,c)),r[m].onAdd(g,_);for(;c<u;++c)y[c]=h,_[c]!==h&&p.push(c)},lD.modify=function(e,t){var a=t.mod,o=this.value,r=o.curr(),s=o.all(),l=e.mod,d,i,n;for(d=0,i=l.length;d<i;++d)n=l[d]._index,r[n]!==s&&a.push(n)},lD.remove=function(e,t,a){var o=this._indices,r=this.value,s=r.curr(),l=r.prev(),d=r.all(),p={},c=a.rem,u=t.rem,m,i,n,g;for(m=0,i=u.length;m<i;++m)n=u[m]._index,p[n]=1,l[n]=g=s[n],s[n]=d,g!==d&&c.push(n);for(n in o)o[n].remove(i,p);return this.reindex(t,i,p),p},lD.reindex=function(e,t,n){var a=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var o in a)a[o].reindex(e)})},lD.update=function(e,t,n){var a=this._dims,o=e.query,r=t.stamp,s=a.length,l=0,d,i;for(n.filters=0,i=0;i<s;++i)e.modified("query",i)&&(d=i,++l);if(1==l)l=a[d].one,this.incrementOne(a[d],o[d],n.add,n.rem);else for(i=0,l=0;i<s;++i)e.modified("query",i)&&(l|=a[i].one,this.incrementAll(a[i],o[i],r,n.add),n.rem=n.add);return l},lD.incrementAll=function(e,t,n,a){var o=this.value,r=o.seen(),s=o.curr(),l=o.prev(),d=e.index(),p=e.bisect(e.range),c=e.bisect(t),u=c[0],m=c[1],f=p[0],g=p[1],_=e.one,y,i,h;if(u<f)for(y=u,i=S(f,m);y<i;++y)h=d[y],r[h]!==n&&(l[h]=s[h],r[h]=n,a.push(h)),s[h]^=_;else if(u>f)for(y=f,i=S(u,g);y<i;++y)h=d[y],r[h]!==n&&(l[h]=s[h],r[h]=n,a.push(h)),s[h]^=_;if(m>g)for(y=N(u,g),i=m;y<i;++y)h=d[y],r[h]!==n&&(l[h]=s[h],r[h]=n,a.push(h)),s[h]^=_;else if(m<g)for(y=N(f,m),i=g;y<i;++y)h=d[y],r[h]!==n&&(l[h]=s[h],r[h]=n,a.push(h)),s[h]^=_;e.range=t.slice()},lD.incrementOne=function(e,t,n,a){var o=this.value,r=o.curr(),s=e.index(),l=e.bisect(e.range),d=e.bisect(t),p=d[0],c=d[1],u=l[0],m=l[1],f=e.one,g,i,_;if(p<u)for(g=p,i=S(u,c);g<i;++g)_=s[g],r[_]^=f,n.push(_);else if(p>u)for(g=u,i=S(p,m);g<i;++g)_=s[g],r[_]^=f,a.push(_);if(c>m)for(g=N(p,m),i=c;g<i;++g)_=s[g],r[_]^=f,n.push(_);else if(c<m)for(g=N(u,c),i=m;g<i;++g)_=s[g],r[_]^=f,a.push(_);e.range=t.slice()},wm.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};var dD=bh(wm,sn);dD.transform=function(e,t){var n=~(e.ignore||0),a=e.filter,i=a.mask;if(0==(i&n))return t.StopPropagation;var o=t.fork(t.ALL),r=a.data(),s=a.curr(),l=a.prev(),d=function(e){return s[e]&n?null:r[e]};return o.filter(o.MOD,d),i&i-1?(o.filter(o.ADD,function(e){var t=s[e]&n,a=!t&&t^l[e]&n;return a?r[e]:null}),o.filter(o.REM,function(e){var t=s[e]&n,a=t&&!(t^(t^l[e]&n));return a?r[e]:null})):(o.filter(o.ADD,d),o.filter(o.REM,function(e){return(s[e]&n)===i?r[e]:null})),o.filter(o.SOURCE,function(e){return d(e._index)})};var pD=Object.freeze({crossfilter:Cm,resolvefilter:wm}),xf="default",cD=function(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:xf,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var a=t.value,i=a?Vy(a)?a:a.user:xf,o=n.item&&n.item.cursor||null;return a&&i===a.user&&o==a.item?a:{user:i,item:o}}),e.add(null,function(e){var t=e.cursor,n=this.value;return Vy(t)||(n=t.item,t=t.user),Om(t&&t!==xf?t:n||t),n},{cursor:t})},uD=function(t,n,a){var i=t._renderer.scene(),o,r,e;return i&&(e=Mm(t),r=n.changedTouches?n.changedTouches[0]:n,o=AT(r,i),o[0]-=e[0],o[1]-=e[1]),n.dataflow=t,n.vega=Bm(t,a,o),n.item=a,n},mD="view",fD=function(e,t,n){var a=document.createElement(e);for(var i in t)a.setAttribute(i,t[i]);return null!=n&&(a.textContent=n),a},gD="vega-bind",_D="vega-bind-name",yD="vega-bind-radio",hD="vega-option-",bD=function(e,t,n){if(t){var a=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){i.source=!0,e.signal(a.signal,t).run()}},a.debounce&&(i.update=fh(a.debounce,i.update))),Vy(t)&&(t=document.querySelector(t)),Hm(i,t,a,e.signal(a.signal)),i.active||(e.on(e._signals[a.signal],null,function(){i.source?i.source=!1:i.set(e.signal(a.signal))}),i.active=!0),i}},xD=function(e,t,n,a){return t=t||new a(e.loader()),t.initialize(n,Rm(e),Im(e),Mm(e)).background(e._background)},vD=function(e,t,n,a){var i=new a().scene(e.scenegraph().root).initialize(n,Mm(e),e);return t&&(i.handleTooltip=t.handleTooltip,t.handlers().forEach(function(e){i.on(e.type,e.handler)})),i},SD=function(e,t){var n=qo(t);return n&&n.headless?e.runAsync().then(function(){return xD(e,null,null,n.headless).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)},TD=function(e,t){return e=e||t.autosize,Yy(e)?e:(e=e||"pad",{type:e})},kD=function(e,t){return e=e||t.padding,Yy(e)?e:(e=+e||0,{top:e,bottom:e,left:e,right:e})},ED=["value","update","react","bind"],ND=function(e,t){var n=e.name;if(e.push==="outer")t.signals[n]||Qm("No prior signal definition",n),ED.forEach(function(t){void 0!==e[t]&&Qm("Invalid property ",t)});else{var a=t.addSignal(n,e.value);!1===e.react&&(a.react=!1),e.bind&&t.addBinding(n,e.bind)}};ef.prototype.visit=function(e){var t=this,a,o,i;if(e(t))return 1;for(a=tf(t),o=0,i=a.length;o<i;++o)if(a[o].visit(e))return 1};var LD=1,AD=2,CD=3,wD=4,OD=5,DD=6,PD=7,RD=8,ID="ArrayExpression",MD="BinaryExpression",FD="CallExpression",BD="ConditionalExpression",zD="Identifier",jD="Literal",UD="LogicalExpression",$D="MemberExpression",WD="ObjectExpression",HD="Property",qD="UnaryExpression",YD="Unexpected token %0",VD="Unexpected number",GD="Unexpected string",ZD="Unexpected identifier",XD="Unexpected reserved word",KD="Unexpected end of input",JD="Invalid regular expression",QD="Invalid regular expression: missing /",eP="Octal literals are not allowed in strict mode.",tP="Duplicate data property in object literal not allowed in strict mode",nP="ILLEGAL",aP="Disabled.",iP=/[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]/,oP=/[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]/,rP={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},sP={if:1,this:1},lP=function(e){DP=e,PP=0,RP=DP.length,IP=null,wf();var t=lg();if(IP.type!==AD)throw new Error("Unexpect token after expression.");return t},dP={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},pP=function(e){function t(t,n,a,i){var o=e(n[0]);return a&&(o=a+"("+o+")",0===a.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(0>i?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,a){return function(i){return t(e,i,n,a)}}var a="new Date",i="String",o="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){3>t.length&&Wy("Missing arguments to clamp function."),3<t.length&&Wy("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:a,date:n("getDate",a,0),day:n("getDay",a,0),year:n("getFullYear",a,0),month:n("getMonth",a,0),hours:n("getHours",a,0),minutes:n("getMinutes",a,0),seconds:n("getSeconds",a,0),milliseconds:n("getMilliseconds",a,0),time:n("getTime",a,0),timezoneoffset:n("getTimezoneOffset",a,0),utcdate:n("getUTCDate",a,0),utcday:n("getUTCDay",a,0),utcyear:n("getUTCFullYear",a,0),utcmonth:n("getUTCMonth",a,0),utchours:n("getUTCHours",a,0),utcminutes:n("getUTCMinutes",a,0),utcseconds:n("getUTCSeconds",a,0),utcmilliseconds:n("getUTCMilliseconds",a,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),replace:n("replace",i),regexp:o,test:n("test",o),if:function(t){3>t.length&&Wy("Missing arguments to if function."),3<t.length&&Wy("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}},cP={},uP=new Date(2e3,0,1),mP="undefined"!=typeof window&&window||null,fP="Literal",gP="Identifier",_P="@",yP="%",hP=":",bP=_g("area"),xP=_g("bounds"),vP=_g("centroid"),SP={},TP=function(e,n,a,i){var o=n[0],r=n[n.length-1],s;return o>r&&(s=o,o=r,r=s),a=void 0===a||a,i=void 0===i||i,(a?o<=e:o<e)&&(i?e<=r:e<r)},kP="bin_",EP="intersect",NP="union",LP="index:unit",AP={random:function(){return h.random()},isArray:qy,isBoolean:xh,isDate:vh,isNumber:Sh,isObject:Yy,isRegExp:Th,isString:Vy,isTuple:Y,toBoolean:Ah,toDate:Ch,toNumber:lh,toString:wh,pad:Lh,peek:sh,truncate:Dh,rgb:Rr,lab:$r,hcl:Zr,hsl:Br,sequence:zx,format:function(e,t){return dg("format",xN,t)(e)},utcFormat:function(e,t){return dg("utcFormat",ax,t)(e)},utcParse:function(e,t){return dg("utcParse",ix,t)(e)},timeFormat:pg,timeParse:function(e,t){return dg("timeParse",nx,t)(e)},monthFormat:function(e){return cg(e,1,"%B")},monthAbbrevFormat:function(e){return cg(e,1,"%b")},dayFormat:function(e){return cg(0,2+e,"%A")},dayAbbrevFormat:function(e){return cg(0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},warn:function(){return ug(this.context.dataflow,"warn",arguments)},info:function(){return ug(this.context.dataflow,"info",arguments)},debug:function(){return ug(this.context.dataflow,"debug",arguments)},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},clampRange:function(e,t,n){var a=e[0],i=e[1],o;return i<a&&(o=i,i=a,a=o),o=i-a,o>=n-t?[t,n]:[S(N(a,t),n-o),S(N(i,o),n)]},pinchDistance:function(e){var n=e.touches,t=n[0].clientX-n[1].clientX,a=n[0].clientY-n[1].clientY;return u(t*t+a*a)},pinchAngle:function(e){var n=e.touches;return By(n[0].clientY-n[1].clientY,n[0].clientX-n[1].clientX)},screen:function(){return mP?mP.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){return mP?[mP.innerWidth,mP.innerHeight]:[void 0,void 0]},span:function(e){return e[e.length-1]-e[0]||0},bandspace:function(e,t,n){return Qk(e||0,t||0,n||0)},inrange:TP,setdata:function(e,t){var n=this.context.dataflow,a=this.context.data[e],i=a.input;return n.pulse(i,n.changeset().remove(Qy).insert(t)),1},panLinear:M,panLog:F,panPow:z,zoomLinear:U,zoomLog:$,zoomPow:W,encode:function(e,t,n){if(e){var a=this.context.dataflow,i=e.mark.source;a.pulse(i,a.changeset().encode(e,t))}return n===void 0?e:n},modify:function(e,t,n,a,i,o){var r=this.context.dataflow,s=this.context.data[e],l=s.input,d=s.changes,p=r.stamp(),c,u;if(!1===r._trigger||!(l.value.length||t||a))return 0;if((!d||d.stamp<p)&&(s.changes=d=r.changeset(),d.stamp=p,r.runAfter(function(){s.modified=!0,r.pulse(l,d).run()},!0)),n&&(c=!0===n?Qy:qy(n)||Y(n)?n:Tg(n),d.remove(c)),t&&d.insert(t),a&&(c=Tg(a),l.value.some(c)?d.remove(c):d.insert(a)),i)for(u in o)d.modify(i,u,o[u]);return 1}},CP=["view","item","group","xy","x","y"],wP="this.",OP={},DP,PP,RP,IP;/**
 * Span-preserving range clamp. If the span of the input range is less
 * than (max - min) and an endpoint exceeds either the min or max value,
 * the range is translated such that the span is preserved and one
 * endpoint touches the boundary of the min/max range.
 * If the span exceeds (max - min), the range [min, max] is returned.
 */Rg("bandwidth",function(e,t){var n=mg(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},gg),Rg("copy",function(e,t){var n=mg(e,(t||this).context);return n?n.copy():void 0},gg),Rg("domain",function(e,t){var n=mg(e,(t||this).context);return n?n.domain():[]},gg),Rg("range",function(e,t){var n=mg(e,(t||this).context);return n&&n.range?n.range():[]},gg),Rg("invert",function(e,t,n){var a=mg(e,(n||this).context);return a?qy(t)?(a.invertRange||a.invert)(t):(a.invert||a.invertExtent)(t):void 0},gg),Rg("scale",function(e,t,n){var a=mg(e,(n||this).context);return a?a(t):void 0},gg),Rg("gradient",function(e,t,a,o){var r=$v(t,a),s=e.domain(),l=s[0],d=s[s.length-1],p=al(e,l,d);e.ticks&&(s=e.ticks(+o||15),l!==s[0]&&s.unshift(l),d!==s[s.length-1]&&s.push(d));for(var c=0,i=s.length;c<i;++c)r.stop(p(s[c]),e(s[c]));return r},gg),Rg("geoArea",bP,gg),Rg("geoBounds",xP,gg),Rg("geoCentroid",vP,gg),Rg("indata",function(e,t,n){var a=this.context.data[e]["index:"+t],i=a?a.value.get(n):void 0;return i?i.count:i},function(e,t,n,a){t[0].type!==fP&&Wy("First argument to indata must be a string literal."),t[1].type!==fP&&Wy("Second argument to indata must be a string literal.");var i=t[0].value,o=t[1].value,r=_P+o;a.hasOwnProperty(r)||(a[r]=n.getData(i).indataRef(n,o))}),Rg("data",yg,hg),Rg("vlSingle",Lg,hg),Rg("vlSingleDomain",Cg,hg),Rg("vlMulti",Lg,Ag),Rg("vlMultiDomain",Cg,Ag),Rg("vlInterval",function(e,t,n){return Ng.call(this,e,t,n,Eg)},hg),Rg("vlIntervalDomain",function(e,t,a,o){var r=this.context.data[e],s=r?r.values.value:[],l=s[0],d=0,i,n,p,c,u;if(l){for(i=l.intervals.length;d<i;++d)if(n=l.intervals[d],t&&n.encoding===t||a&&n.field===a){if(!n.extent)return;p=d,u=2<n.extent.length;break}return c=s.reduce(function(e,t){var n=t.intervals[p].extent,a=u?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return u?e.push.apply(e,a):e.push(a),e},[]),u?wg(c,o):Og(c,o)}},hg),Rg("treePath",function(e,n,a){var i=xg(e,this),o=i[n],r=i[a];return o&&r?o.path(r).map(bg):void 0},hg),Rg("treeAncestors",function(e,t){var a=xg(e,this)[t];return a?a.ancestors().map(bg):void 0},hg);var MP={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+w("$"+e)+"]"},functions:function(e){var t=pP(e);for(var n in CP.forEach(function(e){t[e]="event.vega."+e}),AP)t[n]=wP+n;return t},constants:dP,visitors:OP},FP=function(e){function t(e){if(Vy(e))return e;var t=m[e.type];return null==t&&Wy("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(d),fields:Object.keys(c)};return d={},c={},n}e=e||{};var a=e.whitelist?Oh(e.whitelist):{},i=e.blacklist?Oh(e.blacklist):{},o=e.constants||dP,r=(e.functions||pP)(t),s=e.globalvar,l=e.fieldvar,d={},c={},u=0,p=ph(s)?s:function(e){return s+"[\""+e+"\"]"},m={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return 0<u?t:i.hasOwnProperty(t)?Wy("Illegal identifier: "+t):o.hasOwnProperty(t)?o[t]:a.hasOwnProperty(t)?t:(d[t]=1,p(t))},MemberExpression:function(e){var n=!e.computed,a=t(e.object);n&&(u+=1);var i=t(e.property);return a===l&&(c[i]=1),n&&(u-=1),a+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&Wy("Illegal callee type: "+e.callee.type);var n=e.callee.name,a=e.arguments,i=r.hasOwnProperty(n)&&r[n];return i||Wy("Unrecognized function: "+n),ph(i)?i(a):i+"("+a.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){u+=1;var n=t(e.key);return u-=1,n+":"+t(e.value)}};return n.functions=r,n.constants=o,n}(MP),BP=function(e,t,n){var a={},i,o;try{i=lP(e)}catch(t){Wy("Expression parse error: "+w(e))}return i.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,i=MP.visitors[n];i&&i(n,e.arguments,t,a)}}),o=FP(i),o.globals.forEach(function(e){var n="$"+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))}),{$expr:n?n+"return("+o.code+");":o.code,$fields:o.fields,$params:a}},zP="view",jP="scope",UP=function(e,t){return e.signal?t.getSignal(e.signal).id:e.scale?t.getScale(e.scale).id:Mg(e,t)},$P=function(e,t,n){return LI=t||"view",AI=n||KP,Hg(e.trim()).map(qg)},WP="[",HP="]",qP="{",YP="}",VP=":",GP=",",ZP="@",XP=">",GT=/[[\]{}]/,KP={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},JP="var datum=event.item&&event.item.datum;",QP=function(e,t,n){var a=e.events,i=e.update,o=e.encode,r=[],s="",l;a||Wy("Signal update missing events specification."),Vy(a)&&(a=$P(a)),a=dh(a).filter(function(e){return e.signal||e.scale?(r.push(e),0):1}),a.length&&r.push(1<a.length?{merge:a}:a[0]),null!=o&&(i&&Wy("Signal encode and update are mutually exclusive."),i="encode(item(),"+w(o)+")"),s=Vy(i)?BP(i,t,JP):null==i.expr?null==i.value?null==i.signal?Wy("Invalid signal update specification."):{$expr:"_.value",$params:{value:t.signalRef(i.signal)}}:i.value:BP(i.expr,t,JP),l={target:n,update:s},e.force&&(l.options={force:!0}),r.forEach(function(e){e={source:UP(e,t)},t.addUpdate(gh(e,l))})},eR=function(e,t){var n=t.getSignal(e.name);if(e.update){var a=BP(e.update,t);n.update=a.$expr,n.params=a.$params}e.on&&e.on.forEach(function(e){QP(e,t,n.id)})},tR={$tupleid:1,toString:function(){return":_tupleid_:"}},nR=Qg("key"),aR="descending",iR=r_("aggregate"),oR=r_("axisticks"),rR=r_("bound"),sR=r_("collect"),lR=r_("compare"),dR=r_("datajoin"),pR=r_("encode"),cR=r_("facet"),uR=r_("field"),mR=r_("key"),fR=r_("legendentries"),gR=r_("mark"),_R=r_("multiextent"),yR=r_("multivalues"),hR=r_("overlap"),bR=r_("params"),xR=r_("prefacet"),vR=r_("projection"),SR=r_("proxy"),TR=r_("relay"),kR=r_("render"),ER=r_("scale"),NR=r_("sieve"),LR=r_("sortitems"),AR=r_("viewlayout"),CR=r_("values"),wR=0,OR=["identity","ordinal","band","point","bin-linear","bin-ordinal","linear","pow","sqrt","log","sequential","time","utc","quantize","quantile","threshold"],DR=Oh(OR),PR=Oh(OR.slice(1,6)),RR=function(e,t){var n={};for(var a in e)"name"!=a&&(n[a]=N_(e[a],t));t.addProjection(e.name,n)},IR="top",MR="left",FR="bottom",BR="index",zR="label",jR="offset",UR="perc",$R="size",WR="total",HR="value",qR="guide-label",YR="guide-title",VR="group-title",GR=["shape","size","fill","stroke","strokeDash","opacity"],ZR={name:1,interactive:1},XR=Oh(["rule"]),KR=Oh(["group","image","rect"]),JR=function(e,t){var n="";return XR[t]?n:(e.x2&&(e.x?(KR[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(KR[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)},QR=function(e,t,n,i){function a(e,o,r,s){var l=oI(null,o,t,n,i),a=oI(null,r,t,n,i),d=oI(null,s,t,n,i);return"this."+e+"("+[l,a,d].join(",")+").toString()"}return e.c?a("hcl",e.h,e.c,e.l):e.h||e.s?a("hsl",e.h,e.s,e.l):e.l||e.a?a("lab",e.l,e.a,e.b):e.r||e.g||e.b?a("rgb",e.r,e.g,e.b):null},eI=function(e,t,n,a){var i=BP(e,t);return i.$fields.forEach(function(e){a[e]=1}),gh(n,i.$params),i.$expr},tI=function(e,t,n,a){return L_(Yy(e)?e:{datum:e},t,n,a)},nI=function(e,t,n,a,i){var o=C_(e.scale,n,a,i),r,s,l;return null==e.range?(void 0!==t&&(t=o+"("+t+")"),e.band&&(l=A_(e.scale,n))&&(s=o+".bandwidth",r=+e.band,r=s+"()"+(1===r?"":"*"+r),0>l&&(r="("+s+"?"+r+":0)"),t=(t?t+"+":"")+r,e.extra&&(t="(datum.extra?"+o+"(datum.extra.value):"+t+")")),null==t&&(t="0")):(r=+e.range,s=o+".range()",t=0===r?s+"[0]":"($="+s+","+(1===r?"$[$.length-1]":"$[0]+"+r+"*($[$.length-1]-$[0])")+")"),t},aI=function(e,t,n,a){return"this.gradient("+C_(e.gradient,t,n,a)+","+w(e.start)+","+w(e.stop)+","+w(e.count)+")"},iI=function(e,t,n,a){return Yy(e)?"("+oI(null,e,t,n,a)+")":e},oI=function(e,t,n,a,i){if(null!=t.gradient)return aI(t,n,a,i);var o=t.signal?eI(t.signal,n,a,i):t.color?QR(t.color,n,a,i):null==t.field?void 0===t.value?void 0:w(t.value):tI(t.field,n,a,i);return null!=t.scale&&(o=nI(t,o,n,a,i)),void 0===o&&(o=null),null!=t.exponent&&(o="Math.pow("+o+","+iI(t.exponent,n,a,i)+")"),null!=t.mult&&(o+="*"+iI(t.mult,n,a,i)),null!=t.offset&&(o+="+"+iI(t.offset,n,a,i)),t.round&&(o="Math.round("+o+")"),o},rI=function(e,t,n){return e+"["+w(t)+"]="+n+";"},sI=function(e,t,n,a,i){var o="";return t.forEach(function(t){var r=oI(e,t,n,a,i);o+=t.test?eI(t.test,n,a,i)+"?"+r+":":r}),rI("o",e,o)},lI="mark",dI="frame",pI="scope",cI="legend-label",uI="title",mI=function(e,t,n,a,i,o,r){return{type:e,name:r?r.name:void 0,role:t,style:r&&r.style||n,key:a,from:i,interactive:!!(r&&r.interactive),encode:P_(o,r,ZR)}},fI="group",gI="rule",_I="text",yI=function(e,t,n,a){var i={value:0},o={},r,s;return o.enter=r={opacity:i,x:i,y:i},D_(r,"width",n.gradientWidth),D_(r,"height",n.gradientHeight),D_(r,"stroke",n.gradientStrokeColor),D_(r,"strokeWidth",n.gradientStrokeWidth),o.exit={opacity:i},o.update=s={x:i,y:i,fill:{gradient:t},opacity:{value:1}},D_(s,"width",n.gradientWidth),D_(s,"height",n.gradientHeight),mI("rect","legend-gradient",null,void 0,void 0,o,a)},hI=function(e,t,n,a){var i={value:0},o={},r,s;return o.enter=r={opacity:i},D_(r,"fill",t.labelColor),D_(r,"font",t.labelFont),D_(r,"fontSize",t.labelFontSize),D_(r,"baseline",t.gradientLabelBaseline),D_(r,"limit",t.gradientLabelLimit),o.exit={opacity:i},o.update=s={opacity:{value:1},text:{field:zR}},r.x=s.x={field:UR,mult:t.gradientWidth},r.y=s.y={value:t.gradientHeight,offset:t.gradientLabelOffset},r.align=s.align={signal:"datum."+UR+"<=0?\"left\":datum."+UR+">=1?\"right\":\"center\""},mI(_I,cI,qR,UR,a,o,n)},bI=function(e,t,n,a){var i={value:0},o={},r,s;return o.enter=r={opacity:i},D_(r,"align",t.labelAlign),D_(r,"baseline",t.labelBaseline),D_(r,"fill",t.labelColor),D_(r,"font",t.labelFont),D_(r,"fontSize",t.labelFontSize),D_(r,"limit",t.labelLimit),o.exit={opacity:i},o.update=s={opacity:{value:1},text:{field:zR}},r.x=s.x={field:jR,offset:t.labelOffset},r.y=s.y={field:$R,mult:0.5,offset:{field:WR,offset:{field:{group:"entryPadding"},mult:{field:BR}}}},mI(_I,cI,qR,HR,a,o,n)},xI=function(e,t,n,a){var i={value:0},o={},r,s;return o.enter=r={opacity:i},D_(r,"shape",t.symbolType),D_(r,"size",t.symbolSize),D_(r,"strokeWidth",t.symbolStrokeWidth),e.fill||(D_(r,"fill",t.symbolFillColor),D_(r,"stroke",t.symbolStrokeColor)),o.exit={opacity:i},o.update=s={opacity:{value:1}},r.x=s.x={field:jR,mult:0.5},r.y=s.y={field:$R,mult:0.5,offset:{field:WR,offset:{field:{group:"entryPadding"},mult:{field:BR}}}},GR.forEach(function(t){e[t]&&(s[t]=r[t]={scale:e[t],field:HR})}),mI("symbol","legend-symbol",null,HR,a,o,n)},vI=function(e,t,n,a){var i={value:0},o=e.title,r={},s;return r.enter=s={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:i},D_(s,"align",t.titleAlign),D_(s,"baseline",t.titleBaseline),D_(s,"fill",t.titleColor),D_(s,"font",t.titleFont),D_(s,"fontSize",t.titleFontSize),D_(s,"fontWeight",t.titleFontWeight),D_(s,"limit",t.titleLimit),r.exit={opacity:i},r.update={opacity:{value:1},text:o&&o.signal?{signal:o.signal}:{value:o+""}},mI(_I,"legend-title",YR,null,a,r,n)},SI=function(e,t,n,a,i,o,r){return{type:fI,name:n,role:e,style:t,from:a,interactive:i,encode:o,marks:r}},TI=function(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===fI?pI:t||lI:t},kI=function(e){return{clip:e.clip||!1,interactive:!1!==e.interactive,marktype:e.type,name:e.name||void 0,role:e.role||TI(e),zindex:+e.zindex||void 0}},EI=function(e,n){var a=ln(e.type);a||Wy("Unrecognized transform type: "+w(e.type));var i=Xg(a.type.toLowerCase(),null,F_(a,e,n));return e.signal&&n.addSignal(e.signal,n.proxy(i)),i.metadata=a.metadata||{},i},NI=function(e,t,n){var a,i,o,r,s;return e?(a=e.facet)&&(!t&&Wy("Only group marks can be faceted."),null==a.field?(i=n.keyRef(a.groupby),e.data?s=Jg(n.getData(e.data).aggregate):(o=EI(gh({type:"aggregate",groupby:dh(a.groupby)},a.aggregate)),o.params.key=i,o.params.pulse=Jg(n.getData(a.data).output),r=s=Jg(n.add(o)))):r=s=Jg(n.getData(a.data).output)):r=Jg(n.add(sR(null,[{}]))),r||(r=e.$ref?e:Jg(n.getData(e.data).output)),{key:i,pulse:r,parent:s}},LI,AI;Z_.fromEntries=function(e,t){var a=t.length,n=1,i=t[0],o=t[a-1],r=t[a-2],s=null;for(e.add(t[0]);n<a;++n)t[n].params.pulse=Jg(t[n-1]),e.add(t[n]),"aggregate"===t[n].type&&(s=t[n]);return new Z_(e,i,r,o,s)};var CI=Z_.prototype;CI.countsRef=function(e,t,n){var i=this,o=i.counts||(i.counts={}),r=X_(t),s,l,d;return null!=r&&(e=i.scope,s=o[r]),s?n&&n.field&&K_(e,s.agg.params,n):(d={groupby:e.fieldRef(t,"key"),pulse:Jg(i.output)},n&&n.field&&K_(e,d,n),l=e.add(iR(d)),s=e.add(sR({pulse:Jg(l)})),s={agg:l,ref:Jg(s)},null!=r&&(o[r]=s)),s.ref},CI.tuplesRef=function(){return Jg(this.values)},CI.extentRef=function(e,t){return J_(e,this,"extent","extent",t,!1)},CI.domainRef=function(e,t){return J_(e,this,"domain","values",t,!1)},CI.valuesRef=function(e,t,n){return J_(e,this,"vals","values",t,n||!0)},CI.lookupRef=function(e,t){return J_(e,this,"lookup","tupleindex",t,!1)},CI.indataRef=function(e,t){return J_(e,this,"indata","tupleindex",t,!0,!0)};var wI=function(e,t,n){var a=e.from.facet,i=a.name,o=Jg(t.getData(a.data).output),r,s,l,d;a.name||Wy("Facet must have a name: "+w(a)),a.data||Wy("Facet must reference a data set: "+w(a)),a.field?d=t.add(xR({field:t.fieldRef(a.field),pulse:o})):a.groupby?d=t.add(cR({key:t.keyRef(a.groupby),group:Jg(t.proxy(n.parent)),pulse:o})):Wy("Facet must specify groupby or field: "+w(a)),r=t.fork(),s=r.add(sR()),l=r.add(NR({pulse:Jg(s)})),r.addData(i,new Z_(r,s,s,l)),r.addSignal("parent",null),d.params.subflow={$subflow:WI(e,r).toRuntime()}},OI=function(e,t,n){var a=t.add(xR({pulse:n.pulse})),i=t.fork();i.add(NR()),i.addSignal("parent",null),a.params.subflow={$subflow:WI(e,i).toRuntime()}},DI=function(e,t,n){var a=e.remove,i=e.insert,o=e.toggle,r=e.modify,s=e.values,l=t.add(Kg()),d,p;d="if("+e.trigger+",modify(\""+n+"\","+[i,a,o,r,s].map(function(e){return null==e?"null":e}).join(",")+"),0)",p=BP(d,t),l.update=p.$expr,l.params=p.$params},PI=function(e,t){var n=TI(e),a=e.type===fI,i=e.from&&e.from.facet,o=e.layout||n===pI||n===dI,r=n===lI||o||i,s=e.overlap,l,d,p,c,u,m,f,g,_,y,h,b,x;p=NI(e.from,a,t),d=t.add(dR({key:p.key||(e.key?Qg(e.key):void 0),pulse:p.pulse,clean:!a})),_=Jg(d),d=c=t.add(sR({pulse:_})),d=t.add(gR({markdef:kI(e),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Jg(d)})),y=Jg(d),d=t.add(pR(R_(e.encode,e.type,n,e.style,t,{pulse:y}))),d.params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=EI(e,t);(n.metadata.generates||n.metadata.changes)&&Wy("Mark transforms should not generate new data."),n.params.pulse=Jg(d),t.add(d=n)}),e.sort&&(d=t.add(LR({sort:t.compareRef(e.sort),pulse:Jg(d)}))),h=Jg(d),(i||o)&&(o=t.add(AR({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:y,pulse:h})),b=Jg(o)),u=t.add(rR({mark:y,pulse:b||h})),x=Jg(u),a&&(r&&(l=t.operators,l.pop(),o&&l.pop()),t.pushState(h,b||x,_),i?wI(e,t,p):r?OI(e,t,p):WI(e,t),t.popState(),r&&(o&&l.push(o),l.push(u))),s&&(d={method:!0===s.method?"parity":s.method,pulse:x},s.order&&(d.sort=t.compareRef({field:s.order})),s.bound&&(d.boundScale=t.scaleRef(s.bound.scale),d.boundOrient=s.bound.orient,d.boundTolerance=s.bound.tolerance),x=Jg(t.add(hR(d)))),m=t.add(kR({pulse:x})),f=t.add(NR({pulse:Jg(m)},void 0,t.parent())),null!=e.name&&(g=e.name,t.addData(g,new Z_(t,c,m,f)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&Wy("Marks only support modify triggers."),DI(e,t,g)}))},RI=function(e,t){var n=e.type||"symbol",a=t.config.legend,i=e.encode||{},o=i.legend||{},r=o.name||void 0,s=!!o.interactive,l=o.style,d=e.size||e.shape||e.fill||e.stroke||e.strokeDash||e.opacity,p,c,u,m,f,g,_,y;return d||Wy("Missing valid scale for legend."),p={orient:o_(e.orient,a.orient),title:null!=e.title},c=Jg(t.add(sR(null,[p]))),o=P_({enter:ey(a),update:{offset:O_(o_(e.offset,a.offset)),padding:O_(o_(e.padding,a.padding)),titlePadding:O_(o_(e.titlePadding,a.titlePadding))}},o,ZR),g={update:{x:{field:{group:"padding"}},y:{field:{group:"padding"}},entryPadding:O_(o_(e.entryPadding,a.entryPadding))}},"gradient"===n?(u=Jg(t.add(fR({type:"gradient",scale:t.scaleRef(d),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),y=[yI(e,d,a,i.gradient),hI(e,a,i.labels,u)]):(u=Jg(t.add(fR(_={scale:t.scaleRef(d),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),y=[xI(e,a,i.symbols,u),bI(e,a,i.labels,u)],_.size=Q_(e,t,y)),y=[SI("legend-entry",null,null,c,s,g,y)],p.title&&(f=vI(e,a,i.title,c),g.update.y.offset={field:{group:"titlePadding"},offset:ty(t,f.encode,"fontSize",YR)},y.push(f)),m=SI("legend",l,r,c,s,o,y),e.zindex&&(m.zindex=e.zindex),PI(m,t)},II=function(e,t){e=Vy(e)?{text:e}:e;var n=t.config.title,a=gh({},e.encode),i,o,r;return i={orient:null==e.orient?n.orient:e.orient},o=Jg(t.add(sR(null,[i]))),a.name=e.name,a.interactive=e.interactive,r=ny(e,n,a,o),e.zindex&&(r.zindex=e.zindex),PI(r,t)},MI=function(e,t){var n=t.config,a=e.orient,i=a===IR||a===FR?n.axisX:n.axisY,o=n["axis"+a[0].toUpperCase()+a.slice(1)],r="band"===t.scaleType(e.scale)&&n.axisBand;return i||o||r?gh({},n.axis,i,o,r):n.axis},FI=function(e,t,n,a){var i=e.orient,o={value:0},r={},s,l,d,p,c;return r.enter=s={opacity:o},D_(s,"stroke",t.domainColor),D_(s,"strokeWidth",t.domainWidth),r.exit={opacity:o},r.update=l={opacity:{value:1}},i===IR||i===FR?(d="x",c="y"):(d="y",c="x"),p=d+"2",s[c]=o,l[d]=s[d]=ry(e,0),l[p]=s[p]=ry(e,1),mI(gI,"axis-domain",null,null,a,r,n)},BI=function(e,t,n,a){var i=e.orient,o=e.gridScale,r=i===MR||i===IR?1:-1,l=r*e.offset||0,d={value:0},p={},c,m,f,g,_,u,y,h;return p.enter=c={opacity:d},D_(c,"stroke",t.gridColor),D_(c,"strokeWidth",t.gridWidth),D_(c,"strokeDash",t.gridDash),p.exit=m={opacity:d},p.update=f={},D_(f,"opacity",t.gridOpacity),g={scale:e.scale,field:HR,band:t.bandPosition,round:t.tickRound,extra:t.tickExtra,offset:t.tickOffset},i===IR||i===FR?(_="x",u="y",h="height"):(_="y",u="x",h="width"),y=u+"2",f[_]=c[_]=m[_]=g,o?(c[u]={scale:o,range:0,mult:r,offset:l},f[y]=c[y]={scale:o,range:1,mult:r,offset:l}):(c[u]={value:l},f[y]=c[y]={signal:h,mult:r,offset:l}),mI(gI,"axis-grid",null,HR,a,p,n)},zI=function(e,t,n,a,i){var o=e.orient,r=o===MR||o===IR?-1:1,s={value:0},l={},d,p,c,u,m;return l.enter=d={opacity:s},D_(d,"stroke",t.tickColor),D_(d,"strokeWidth",t.tickWidth),l.exit=p={opacity:s},l.update=c={opacity:{value:1}},u=O_(i),u.mult=r,m={scale:e.scale,field:HR,band:t.bandPosition,round:t.tickRound,extra:t.tickExtra,offset:t.tickOffset},o===IR||o===FR?(c.y=d.y=s,c.y2=d.y2=u,c.x=d.x=p.x=m):(c.x=d.x=s,c.x2=d.x2=u,c.y=d.y=p.y=m),mI(gI,"axis-tick",null,HR,a,l,n)},jI=function(e,t,n,a,i){var o=e.orient,r=o===MR||o===IR?-1:1,s=e.scale,l=o_(e.labelPadding,t.labelPadding),d=o_(e.labelBound,t.labelBound),p=o_(e.labelFlush,t.labelFlush),c=o_(e.labelOverlap,t.labelOverlap),u={value:0},m={},f,g,_,y,h;return m.enter=f={opacity:u},D_(f,"angle",t.labelAngle),D_(f,"fill",t.labelColor),D_(f,"font",t.labelFont),D_(f,"fontSize",t.labelFontSize),D_(f,"limit",t.labelLimit),m.exit=g={opacity:u},m.update=_={opacity:{value:1},text:{field:zR}},y=O_(i),y.mult=r,y.offset=O_(l),y.offset.mult=r,h={scale:s,field:HR,band:0.5,offset:t.tickOffset},o===IR||o===FR?(_.y=f.y=y,_.x=f.x=g.x=h,D_(_,"align",p?sy("\"left\"","\"right\"","\"center\""):"center"),p&&Sh(p)&&(p=T(+p),D_(_,"dx",sy(-p,p,0))),D_(_,"baseline",o===IR?"bottom":"top")):(_.x=f.x=y,_.y=f.y=g.y=h,D_(_,"align",o==="right"?"left":"right"),D_(_,"baseline",p?sy("\"bottom\"","\"top\"","\"middle\""):"middle"),p&&Sh(p)&&(p=T(+p),D_(_,"dy",sy(p,-p,0)))),e=mI(_I,"axis-label",qR,HR,a,m,n),(c||d)&&(e.overlap={method:c,order:"datum.index",bound:d?{scale:s,orient:o,tolerance:+d}:null}),e},UI=function(e,t,n,a){var i=e.orient,o=e.title,r=i===MR||i===IR?-1:1,s=i===IR||i===FR,l={},d,p,c;return l.enter=d={opacity:{value:0}},D_(d,"align",t.titleAlign),D_(d,"fill",t.titleColor),D_(d,"font",t.titleFont),D_(d,"fontSize",t.titleFontSize),D_(d,"fontWeight",t.titleFontWeight),D_(d,"limit",t.titleLimit),l.exit={opacity:{value:0}},l.update=p={opacity:{value:1},text:o&&o.signal?{signal:o.signal}:{value:o+""}},c={scale:e.scale,range:0.5},s?(p.x=c,p.angle={value:0},p.baseline={value:i===IR?"bottom":"top"}):(p.y=c,p.angle={value:90*r},p.baseline={value:"bottom"}),D_(p,"angle",t.titleAngle),D_(p,"baseline",t.titleBaseline),D_(p,"x",t.titleX)||!s||M_("x",n)||(l.enter.auto={value:!0}),D_(p,"y",t.titleY)||s||M_("y",n)||(l.enter.auto={value:!0}),mI(_I,"axis-title",YR,null,a,l,n)},$I=function(e,t){var n=MI(e,t),a=e.encode||{},i=a.axis||{},o=i.name||void 0,r=!!i.interactive,s=i.style,l,d,p,c,u,m;return l={orient:e.orient,ticks:!!o_(e.ticks,n.ticks),labels:!!o_(e.labels,n.labels),grid:!!o_(e.grid,n.grid),domain:!!o_(e.domain,n.domain),title:!!o_(e.title,!1)},d=Jg(t.add(sR({},[l]))),i=P_({update:{range:{signal:"abs(span(range(\""+e.scale+"\")))"},offset:O_(o_(e.offset,0)),position:O_(o_(e.position,0)),titlePadding:O_(o_(e.titlePadding,n.titlePadding)),minExtent:O_(o_(e.minExtent,n.minExtent)),maxExtent:O_(o_(e.maxExtent,n.maxExtent))}},a.axis,ZR),p=Jg(t.add(oR({scale:t.scaleRef(e.scale),extra:n.tickExtra,count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),m=[],l.grid&&m.push(BI(e,n,a.grid,p)),l.ticks&&(c=o_(e.tickSize,n.tickSize),m.push(zI(e,n,a.ticks,p,c))),l.labels&&(c=l.ticks?c:0,m.push(jI(e,n,a.labels,p,c))),l.domain&&m.push(FI(e,n,a.domain,d)),l.title&&m.push(UI(e,n,a.title,d)),u=SI("axis",s,o,d,r,i,m),e.zindex&&(u.zindex=e.zindex),PI(u,t)},WI=function(e,t,n){var a=dh(e.signals),i=dh(e.scales);return n||a.forEach(function(e){ND(e,t)}),dh(e.projections).forEach(function(e){RR(e,t)}),i.forEach(function(e){d_(e,t)}),dh(e.data).forEach(function(e){ay(e,t)}),i.forEach(function(e){p_(e,t)}),a.forEach(function(e){eR(e,t)}),dh(e.axes).forEach(function(e){$I(e,t)}),dh(e.marks).forEach(function(e){PI(e,t)}),dh(e.legends).forEach(function(e){RI(e,t)}),e.title&&II(e.title,t),t.parseLambdas(),t},HI=Oh(["width","height","padding","autosize"]),qI=dy.prototype=py.prototype;qI.fork=function(){return new py(this)},qI.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},qI.id=function(){return(this._subid?this._subid+":":0)+this._id++},qI.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},qI.proxy=function(e){var t=e instanceof Zg?Jg(e):e;return this.add(SR({value:t}))},qI.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},qI.addUpdate=function(e){return this.updates.push(e),e},qI.finish=function(){function e(e,t,n){var a,i;e&&(a=e.data||(e.data={}),i=a[t]||(a[t]=[]),i.push(n))}var t,n;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data)for(var a in n=this.data[t],e(n.input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values"),n.index)e(n.index[a],t,"index:"+a);return this},qI.pushState=function(e,t,n){this._encode.push(Jg(this.add(NR({pulse:e})))),this._parent.push(t),this._lookup.push(n?Jg(this.proxy(n)):null),this._markpath.push(-1)},qI.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},qI.parent=function(){return sh(this._parent)},qI.encode=function(){return sh(this._encode)},qI.lookup=function(){return sh(this._lookup)},qI.markpath=function(){var e=this._markpath;return++e[e.length-1]},qI.fieldRef=function(e,t){if(Vy(e))return Qg(e,t);e.signal||Wy("Unsupported field reference: "+w(e));var n=e.signal,a=this.field[n],i;return a||(i={name:this.signalRef(n)},t&&(i.as=t),this.field[n]=a=Jg(this.add(uR(i)))),a},qI.compareRef=function(e){function t(e){return i_(e)?(a=!0,Jg(n[e.signal])):e}var n=this.signals,a=!1,i=dh(e.field).map(t),o=dh(e.order).map(t);return a?Jg(this.add(lR({fields:i,orders:o}))):e_(i,o)},qI.keyRef=function(e){var t=this.signals,n=!1;return e=dh(e).map(function(e){return i_(e)?(n=!0,Jg(t[e.signal])):e}),n?Jg(this.add(mR({fields:e}))):t_(e)},qI.sortRef=function(e){if(!e)return e;var t=[a_(e.op,e.field),tR],n=e.order||"ascending";return n.signal?Jg(this.add(lR({fields:t,orders:[n=this.signalRef(n.signal),n]}))):e_(t,[n,n])},qI.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var a=this.id();this.streams.push({id:a,source:e,type:t}),this.events[n]=a}return this.events[n]},qI.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&Wy("Duplicate signal name: "+w(e));var n=t instanceof Zg?t:this.add(Kg(t));return this.signals[e]=n},qI.getSignal=function(e){return this.signals[e]||Wy("Unrecognized signal name: "+w(e)),this.signals[e]},qI.signalRef=function(e){return this.signals[e]?Jg(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(Kg(null))),Jg(this.lambdas[e]))},qI.parseLambdas=function(){for(var t=Object.keys(this.lambdas),a=0,i=t.length;a<i;++a){var n=t[a],o=BP(n,this),e=this.lambdas[n];e.params=o.$params,e.update=o.$expr}},qI.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},qI.objectProperty=function(e){return e&&Yy(e)?this.signalRef(e.signal||cy(e)):e},qI.addBinding=function(e,t){this.bindings||Wy("Nested signals do not support binding: "+w(e)),this.bindings.push(gh({signal:e},t))},qI.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&Wy("Duplicate scale or projection name: "+w(e)),this.scales[e]=this.add(t)},qI.addScale=function(e,t){this.addScaleProj(e,ER(t))},qI.addProjection=function(e,t){this.addScaleProj(e,vR(t))},qI.getScale=function(e){return this.scales[e]||Wy("Unrecognized scale name: "+w(e)),this.scales[e]},qI.projectionRef=qI.scaleRef=function(e){return Jg(this.getScale(e))},qI.projectionType=qI.scaleType=function(e){return this.getScale(e).params.type},qI.addData=function(e,t){return this.data.hasOwnProperty(e)&&Wy("Duplicate data set name: "+w(e)),this.data[e]=t},qI.getData=function(e){return this.data[e]||Wy("Undefined data set name: "+w(e)),this.data[e]},qI.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&Wy("Duplicate data set name: "+w(e)),this.addData(e,Z_.fromEntries(this,t))};var YI=function(e){var t=fy();return(e||[]).forEach(function(e){var n,a;if(e)for(n in e)if("style"===n)for(n in a=t.style||(t.style={}),e.style)a[n]=gh(a[n]||{},e.style[n]);else t[n]=gh(t[n]||{},e[n])}),t},VI="sans-serif",GI=30,ZI=2,XI="#4c78a8",KI="#000",JI="#888",QI="#ddd",eM=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||Wy("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key;return t.fn[n]||(t.fn[n]=kh(e.$key))}},{key:"$expr",parse:function(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=$y(yy(e.$expr,t),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Gy(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n=e.$encode,a={},i,o;for(i in n)o=n[i],a[i]=$y(xy(o.$expr,t),o.$fields),a[i].output=o.$output;return a}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,a=dh(e.$compare).map(function(e){return e&&e.$tupleid?V:e});return t.fn[n]||(t.fn[n]=uh(a,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,a,i){var o=iM(n,t.fork()),r=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),r}}},{key:"$tupleid",parse:function(){return V}}],tM=function(e,t){ky(e.type)||!e.type?t.operator(e,e.update?_y(e.update,t):null):t.transform(e,e.type)},nM=function(e,t){var n=null==e.filter?void 0:hy(e.filter,t),a=null==e.stream?void 0:t.get(e.stream),i;e.source?a=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(t.get.bind(t)),a=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(t.get.bind(t)),a=a.between(i[0],i[1])),e.filter&&(a=a.filter(n)),null!=e.throttle&&(a=a.throttle(+e.throttle)),null!=e.debounce&&(a=a.debounce(+e.debounce)),null==a&&Wy("Invalid stream definition: "+JSON.stringify(e)),e.consume&&a.consume(!0),t.stream(e,a)},aM=function(e,t){var n=t.get(e.source),a=null,i=e.update,o;n||Wy("Source not defined: "+e.source),a=e.target&&e.target.$expr?hy(e.target.$expr,t):t.get(e.target),i&&i.$expr&&(i.$params&&(o=vy(i.$params,t)),i=by(i.$expr,t)),t.update(e,n,a,i,o)},iM=function(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){tM(e,t)}),n.forEach(function(e){Ny(e,t)}),(e.streams||[]).forEach(function(e){nM(e,t)}),(e.updates||[]).forEach(function(e){aM(e,t)}),t.resolve()},oM={skip:!0},rM=function(e,t,n){return new Ly(e,t,n)};Ly.prototype=Ay.prototype={fork:function(){var e=new Ay(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n=this,a=n.dataflow,i;if(n.set(e.id,t),Ey(e.type)&&(i=e.value)&&(i.$ingest?a.ingest(t,i.$ingest,i.$format):i.$request?a.request(t,i.$request,i.$format):a.pulse(t,a.changeset().insert(i))),e.root&&(n.root=t),e.parent){var o=n.get(e.parent.$ref);o?(a.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(function(){o=n.get(e.parent.$ref),a.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(var r in e.data)i=n.data[r]||(n.data[r]={}),e.data[r].forEach(function(e){i[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[Ty(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,a,i){this.dataflow.on(t,n,a,i,e.options)},getState:function(e){var t=this,n={};if(e.signals){var a=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(a[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var a=t.data[n];e.data(n,a)&&(i[n]=a.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n},setState:function(e){var t=this,n=t.dataflow,a=e.data,i=e.signals;Object.keys(i||{}).forEach(function(e){n.update(t.signals[e],i[e],oM)}),Object.keys(a||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(Qy).insert(a[e]))}),(e.subcontext||[]).forEach(function(e,n){var a=t.subcontext[n];a&&a.setState(e)})}};var sM=function(e,t,n){return iM(t,rM(e,Nx,n||AP))},lM="padding",dM=bh(Ry,on);dM.run=function(e){if(on.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(t){this.error(t)}return this},dM.render=function(){return this._renderer&&(this._resize&&(this._resize=0,Fm(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},dM.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},dM.container=function(){return this._el},dM.scenegraph=function(){return this._scenegraph},dM.signal=function(e,t,n){var a=Iy(this,e);return 1===arguments.length?a.value:this.update(a,t,n)},dM.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},dM.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},dM.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},dM.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},dM.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},dM.renderer=function(e){return arguments.length?(qo(e)||Wy("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._renderType},dM.loader=function(e){return arguments.length?(e!==this._loader&&(on.prototype.loader.call(this,e),this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._loader},dM.resize=function(){return this._autosize=1,this},dM._resizeView=function(e,t,n,a,i,o){this.runAfter(function(r){var s=0;r._autosize=0,r.width()!==n&&(s=1,r.width(n),r._resizeWidth.skip(!0)),r.height()!==a&&(s=1,r.height(a),r._resizeHeight.skip(!0)),r._viewWidth!==e&&(r._resize=1,r._viewWidth=e),r._viewHeight!==t&&(r._resize=1,r._viewHeight=t),(r._origin[0]!==i[0]||r._origin[1]!==i[1])&&(r._resize=1,r._origin=i),s&&r.run("enter"),o&&r.runAfter(function(){r.resize()})})},dM.addEventListener=function(e,t){return this._handler.on(e,t),this},dM.removeEventListener=function(e,t){return this._handler.off(e,t),this},dM.addSignalListener=function(e,t){var n=Iy(this,e),a=function(){t(e,n.value)};return a.handler=t,this.on(n,null,a),this},dM.removeSignalListener=function(e,n){var a=Iy(this,e),i=a._targets||[],t=i.filter(function(e){var t=e._update;return t&&t.handler===n});return t.length&&i.remove(t[0]),this},dM.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},dM.tooltipHandler=function(e){var t=this._handler;return arguments.length?(t.handleTooltip=e||vo.prototype.handleTooltip,this):t.handleTooltip},dM.events=function(t,a,e){var o=this,r=new ie(e),s=function(n,e){t===mD&&jm(o,a)&&n.preventDefault();try{r.receive(uD(o,n,e))}catch(e){o.error(e)}finally{o.run()}},l;if(t===mD)return o.addEventListener(a,s),r;if(t==="window"?"undefined"!=typeof window&&(l=[window]):"undefined"!=typeof document&&(l=document.querySelectorAll(t)),!l)return o.warn("Can not resolve event source: "+t),r;for(var d=0,i=l.length;d<i;++d)l[d].addEventListener(a,s);return o._eventListeners.push({type:a,sources:l,handler:s}),r},dM.finalize=function(){for(var t=this._eventListeners,a=t.length,n,i;0<=--a;)for(i=t[a],n=i.sources.length;0<=--n;)i.sources[n].removeEventListener(i.type,i.handler)},dM.hover=function(e,t){return e=[e||"hover"],t=[t||"update",e],this.on(this.events("view","mouseover",Um),$m,Wm(e)),this.on(this.events("view","mouseout",Um),$m,Wm(t)),this},dM.data=function(e){return Dm(this,e).values.value},dM.change=Pm,dM.insert=function(e,t){return Pm.call(this,e,ee().insert(t))},dM.remove=function(e,t){return Pm.call(this,e,ee().remove(t))},dM.initialize=function(e,t){var n=this,a=n._renderType,i=qo(a),o,r;return e=n._el=e?Km(n,e):null,i||n.error("Unrecognized renderer type: "+a),o=i.handler||To,r=e?i.renderer:i.headless,n._renderer=r?xD(n,n._renderer,e,r):null,n._handler=vD(n,n._handler,e,o),n._redraw=!0,e&&(t=t?Km(n,t):e.appendChild(fD("div",{class:"vega-bindings"})),n._bind.forEach(function(e){e.param.element&&Km(n,e.param.element)}),n._bind.forEach(function(e){bD(n,e.param.element||t,e)})),n},dM.toImageURL=function(e){return e!==QT.Canvas&&e!==QT.SVG&&e!==QT.PNG?Promise.reject("Unrecognized image type: "+e):SD(this,e).then(function(t){return e===QT.SVG?Jm(t.svg(),"image/svg+xml"):t.canvas().toDataURL("image/png")})},dM.toCanvas=function(){return SD(this,QT.Canvas).then(function(e){return e.canvas()})},dM.toSVG=function(){return SD(this,QT.SVG).then(function(e){return e.svg()})},dM.getState=function(e){return this._runtime.getState(e||{data:Dy,signals:Py,recurse:!0})},dM.setState=function(e){var t=this;return t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0}),this},gh(Nx,jv,Bk,wA,Uw,pO,zO,QO,rD,pD),h.version="3.0.4",h.Dataflow=on,h.EventStream=ie,h.Parameters=te,h.Pulse=Xt,h.MultiPulse=en,h.Operator=ne,h.Transform=sn,h.changeset=ee,h.ingest=Z,h.isTuple=Y,h.definition=ln,h.transform=dn,h.transforms=Nx,h.tupleid=V,h.scale=Qs,h.scheme=uA,h.interpolate=ol,h.interpolateRange=nl,h.timeInterval=sl,h.utcInterval=ll,h.projection=Up,h.View=Ry,h.parse=function(e,t){return Yy(e)||Wy("Input Vega specification must be an object."),ly(e,new dy(YI([t,e.config]))).toRuntime()},h.expressionFunction=Rg,h.formatLocale=Ns,h.timeFormatLocale=qt,h.runtime=iM,h.runtimeContext=rM,h.bin=Cx,h.bootstrapCI=Xx,h.quartiles=Kx,h.setRandom=function(e){h.random=e},h.randomInteger=function(e,t){null==t&&(t=e,e=0);var n={},i,a,o;return n.min=function(e){return arguments.length?(i=e||0,o=a-i,n):i},n.max=function(e){return arguments.length?(a=e||0,o=a-i,n):a},n.sample=function(){return i+E(o*h.random())},n.pdf=function(e){return e===E(e)&&e>=i&&e<a?1/o:0},n.cdf=function(e){var t=E(e);return t<i?0:t>=a?1:(t-i+1)/o},n.icdf=function(e){return 0<=e&&1>=e?i-1+E(e*o):NaN},n.min(e).max(t)},h.randomKDE=Qx,h.randomMixture=ev,h.randomNormal=Jx,h.randomUniform=tv,h.accessor=$y,h.accessorName=v,h.accessorFields=m,h.id=Xy,h.identity=id,h.zero=Ky,h.one=Jy,h.truthy=Qy,h.falsy=eh,h.logger=rh,h.None=th,h.Error=nh,h.Warn=ah,h.Info=ih,h.Debug=oh,h.panLinear=M,h.panLog=F,h.panPow=z,h.zoomLinear=U,h.zoomLog=$,h.zoomPow=W,h.array=dh,h.compare=uh,h.constant=mh,h.debounce=fh,h.error=Wy,h.extend=gh,h.extentIndex=_h,h.fastmap=hh,h.field=Gy,h.inherits=bh,h.isArray=qy,h.isBoolean=xh,h.isDate=vh,h.isFunction=ph,h.isNumber=Sh,h.isObject=Yy,h.isRegExp=Th,h.isString=Vy,h.key=kh,h.merge=Eh,h.pad=Lh,h.peek=sh,h.repeat=Nh,h.splitAccessPath=Hy,h.stringValue=w,h.toBoolean=Ah,h.toDate=Ch,h.toNumber=lh,h.toString=wh,h.toSet=Oh,h.truncate=Dh,h.visitArray=Ph,h.loader=ob,h.read=lx,h.inferType=De,h.inferTypes=Pe,h.typeParsers=rb,h.formats=gb,h.Bounds=La,h.Gradient=$v,h.GroupItem=Ca,h.ResourceLoader=Ia,h.Item=Aa,h.Scenegraph=bo,h.Handler=vo,h.Renderer=So,h.CanvasHandler=To,h.CanvasRenderer=No,h.SVGHandler=Co,h.SVGRenderer=Po,h.SVGStringRenderer=Uo,h.RenderType=QT,h.renderModule=qo,h.Marks=xT,h.boundContext=Bi,h.boundStroke=US,h.boundItem=vT,h.boundMark=TT,h.pathCurves=Ti,h.pathSymbols=Ai,h.pathRectangle=OS,h.pathTrail=PS,h.pathParse=SS,h.pathRender=LS,h.point=AT,h.canvas=Hv,h.domCreate=wa,h.domFind=Oa,h.domChild=Da,h.domClear=Pa,h.openTag=Oo,h.closeTag=Do,h.font=mo,h.textMetrics=mT,h.resetSVGClipId=function(){aT=1},h.sceneEqual=Yo,h.pathEqual=Vo,h.sceneToJSON=_o,h.sceneFromJSON=yo,h.sceneZOrder=$i,h.sceneVisit=Wi,h.scenePickVisit=Hi,Object.defineProperty(h,"__esModule",{value:!0})})}).call(this,_("buffer").Buffer)},{buffer:14,canvas:14,"canvas-prebuilt":14,fs:14}],590:[function(e,t,n){function a(){}var i=e("indexof"),o=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},r=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},s=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(e,t,n){e[t]=n}}}(),l=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];a.prototype={};var d=n.Script=function(e){return this instanceof d?void(this.code=e):new d(e)};d.prototype.runInContext=function(e){if(!(e instanceof a))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,d=n.eval,p=n.execScript;!d&&p&&(p.call(n,"null"),d=n.eval),r(o(e),function(t){n[t]=e[t]}),r(l,function(t){e[t]&&(n[t]=e[t])});var c=o(n),u=d.call(n,this.code);return r(o(n),function(t){(t in e||-1===i(c,t))&&(e[t]=n[t])}),r(l,function(t){t in e||s(e,t,n[t])}),document.body.removeChild(t),u},d.prototype.runInThisContext=function(){return eval(this.code)},d.prototype.runInNewContext=function(e){var t=d.createContext(e),n=this.runInContext(t);return r(o(t),function(n){e[n]=t[n]}),n},r(o(d.prototype),function(e){n[e]=d[e]=function(t){var n=d(t);return n[e].apply(n,[].slice.call(arguments,1))}}),n.createScript=function(e){return n.Script(e)},n.createContext=d.createContext=function(e){var t=new a;return"object"==typeof e&&r(o(e),function(n){t[n]=e[n]}),t}},{indexof:140}],591:[function(e,t,n){"use strict";function a(){}function o(e){for(var t=e.length,n=Array(t),a=0;a<t;++a)n[a]=e[a];return n}function i(e,n){return function(a){return e(a)&&n(a)}}function s(e,n,t){try{return e.f(n)}catch(n){return t._e(n),c}}function r(e){e._start=function(e){e.next=e._n,e.error=e._e,e.complete=e._c,this.start(e)},e._stop=e.stop}var l=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},d=e("symbol-observable"),c={};n.NO=c;var p={_n:a,_e:a,_c:a};n.NO_IL=p;var u=function(){function e(e,t){this._stream=e,this._listener=t}return e.prototype.unsubscribe=function(){this._stream.removeListener(this._listener)},e}(),m=function(){function e(e){this._listener=e}return e.prototype.next=function(e){this._listener._n(e)},e.prototype.error=function(e){this._listener._e(e)},e.prototype.complete=function(){this._listener._c()},e}(),f=function(){function e(e){this.type="fromObservable",this.ins=e,this.active=!1}return e.prototype._start=function(e){this.out=e,this.active=!0,this._sub=this.ins.subscribe(new m(e)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),g=function(){function e(e){this.type="merge",this.insArr=e,this.out=c,this.ac=0}return e.prototype._start=function(e){this.out=e;var t=this.insArr,n=t.length;this.ac=n;for(var a=0;a<n;a++)t[a]._add(this)},e.prototype._stop=function(){for(var e=this.insArr,t=e.length,n=0;n<t;n++)e[n]._remove(this);this.out=c},e.prototype._n=function(e){var t=this.out;t===c||t._n(e)},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){if(0>=--this.ac){var e=this.out;if(e===c)return;e._c()}},e}(),_=function(){function e(e,t,n){this.i=e,this.out=t,this.p=n,n.ils.push(this)}return e.prototype._n=function(e){var t=this.p,n=this.out;if(n!==c&&t.up(e,this.i)){for(var o=t.vals,a=o.length,r=Array(a),s=0;s<a;++s)r[s]=o[s];n._n(r)}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.p;e.out===c||0==--e.Nc&&e.out._c()},e}(),y=function(){function e(e){this.type="combine",this.insArr=e,this.out=c,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(e,t){var n=this.vals[t],a=this.Nn?n===c?--this.Nn:this.Nn:0;return this.vals[t]=e,0===a},e.prototype._start=function(e){this.out=e;var t=this.insArr,a=this.Nc=this.Nn=t.length,n=this.vals=Array(a);if(0===a)e._n([]),e._c();else for(var o=0;o<a;o++)n[o]=c,t[o]._add(new _(o,e,this))},e.prototype._stop=function(){for(var e=this.insArr,t=e.length,n=this.ils,a=0;a<t;a++)e[a]._remove(n[a]);this.out=c,this.ils=[],this.vals=[]},e}(),h=function(){function e(e){this.type="fromArray",this.a=e}return e.prototype._start=function(e){for(var t=this.a,a=0,i=t.length;a<i;a++)e._n(t[a]);e._c()},e.prototype._stop=function(){},e}(),b=function(){function e(e){this.type="fromPromise",this.on=!1,this.p=e}return e.prototype._start=function(t){var e=this;this.on=!0,this.p.then(function(n){e.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(a,function(e){setTimeout(function(){throw e})})},e.prototype._stop=function(){this.on=!1},e}(),x=function(){function e(e){this.type="periodic",this.period=e,this.intervalID=-1,this.i=0}return e.prototype._start=function(e){var t=this;this.intervalID=setInterval(function(){e._n(t.i++)},this.period)},e.prototype._stop=function(){-1!==this.intervalID&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),v=function(){function e(e,t){this.type="debug",this.ins=e,this.out=c,this.s=a,this.l="","string"==typeof t?this.l=t:"function"==typeof t&&(this.s=t)}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=this.s,i=this.l;if(n!==a)try{n(e)}catch(n){t._e(n)}else i?console.log(i+":",e):console.log(e);t._n(e)}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),S=function(){function e(e,t){this.type="drop",this.ins=t,this.out=c,this.max=e,this.dropped=0}return e.prototype._start=function(e){this.out=e,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;t===c||this.dropped++>=this.max&&t._n(e)},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),T=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.end()},e}(),k=function(){function e(e,t){this.type="endWhen",this.ins=t,this.out=c,this.o=e,this.oil=p}return e.prototype._start=function(e){this.out=e,this.o._add(this.oil=new T(e,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=c,this.oil=p},e.prototype.end=function(){var e=this.out;e===c||e._c()},e.prototype._n=function(e){var t=this.out;t===c||t._n(e)},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){this.end()},e}(),E=function(){function e(e,t){this.type="filter",this.ins=t,this.out=c,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=s(this,e,t);n!==c&&n&&t._n(e)}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),N=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(e){this.out._n(e)},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.inner=c,this.op.less()},e}(),A=function(){function e(e){this.type="flatten",this.ins=e,this.out=c,this.open=!0,this.inner=c,this.il=p}return e.prototype._start=function(e){this.out=e,this.open=!0,this.inner=c,this.il=p,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==c&&this.inner._remove(this.il),this.out=c,this.open=!0,this.inner=c,this.il=p},e.prototype.less=function(){var e=this.out;e!==c&&(this.open||this.inner!==c||e._c())},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=this,a=n.inner,i=n.il;a!==c&&i!==p&&a._remove(i),(this.inner=e)._add(this.il=new N(t,this))}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){this.open=!1,this.less()},e}(),C=function(){function e(e,t,n){var a=this;this.type="fold",this.ins=n,this.out=c,this.f=function(n){return e(a.acc,n)},this.acc=this.seed=t}return e.prototype._start=function(e){this.out=e,this.acc=this.seed,e._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c,this.acc=this.seed},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=s(this,e,t);n===c||t._n(this.acc=n)}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),w=function(){function e(e){this.type="last",this.ins=e,this.out=c,this.has=!1,this.val=c}return e.prototype._start=function(e){this.out=e,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c,this.val=c},e.prototype._n=function(e){this.has=!0,this.val=e},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||(this.has?(e._n(this.val),e._c()):e._e(new Error("last() failed because input stream completed")))},e}(),O=function(){function e(e,t){this.type="map",this.ins=t,this.out=c,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=s(this,e,t);n===c||t._n(n)}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),D=function(){function e(e){this.type="remember",this.ins=e,this.out=c}return e.prototype._start=function(e){this.out=e,this.ins._add(e)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=c},e}(),P=function(){function e(e,t){this.type="replaceError",this.ins=t,this.out=c,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;t===c||t._n(e)},e.prototype._e=function(e){var t=this.out;if(t!==c)try{this.ins._remove(this),(this.ins=this.f(e))._add(this)}catch(n){t._e(n)}},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),R=function(){function e(e,t){this.type="startWith",this.ins=e,this.out=c,this.val=t}return e.prototype._start=function(e){this.out=e,this.out._n(this.val),this.ins._add(e)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=c},e}(),I=function(){function e(e,t){this.type="take",this.ins=t,this.out=c,this.max=e,this.taken=0}return e.prototype._start=function(e){this.out=e,this.taken=0,0>=this.max?e._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=++this.taken;n<this.max?t._n(e):n===this.max&&(t._n(e),t._c())}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),M=function(){function e(e){this._prod=e||c,this._ils=[],this._stopID=c,this._dl=c,this._d=!1,this._target=c,this._err=c}return e.prototype._n=function(e){var t=this._ils,n=t.length;if(this._d&&this._dl._n(e),1==n)t[0]._n(e);else{if(0==n)return;for(var a=o(t),r=0;r<n;r++)a[r]._n(e)}},e.prototype._e=function(e){if(this._err===c){this._err=e;var t=this._ils,n=t.length;if(this._x(),this._d&&this._dl._e(e),1==n)t[0]._e(e);else{if(0==n)return;for(var a=o(t),r=0;r<n;r++)a[r]._e(e)}if(!this._d&&0==n)throw this._err}},e.prototype._c=function(){var e=this._ils,t=e.length;if(this._x(),this._d&&this._dl._c(),1==t)e[0]._c();else{if(0==t)return;for(var n=o(e),a=0;a<t;a++)n[a]._c()}},e.prototype._x=function(){0===this._ils.length||(this._prod!==c&&this._prod._stop(),this._err=c,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=c,this._stopID=c},e.prototype._add=function(e){var t=this._target;if(t!==c)return t._add(e);var n=this._ils;if(n.push(e),!(1<n.length))if(this._stopID!==c)clearTimeout(this._stopID),this._stopID=c;else{var a=this._prod;a!==c&&a._start(this)}},e.prototype._remove=function(e){var t=this,n=this._target;if(n!==c)return n._remove(e);var o=this._ils,a=o.indexOf(e);-1<a&&(o.splice(a,1),this._prod!==c&&0>=o.length?(this._err=c,this._stopID=setTimeout(function(){return t._stopNow()})):1===o.length&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(e,t){if(-1!==t.indexOf(e))return!0;if(e.out===this)return!0;if(e.out&&e.out!==c)return this._hasNoSinks(e.out,t.concat(e));if(e._ils){for(var n=0,a=e._ils.length;n<a;n++)if(!this._hasNoSinks(e._ils[n],t.concat(e)))return!1;return!0}return!1},e.prototype.ctor=function(){return this instanceof F?F:e},e.prototype.addListener=function(e){e._n=e.next||a,e._e=e.error||a,e._c=e.complete||a,this._add(e)},e.prototype.removeListener=function(e){this._remove(e)},e.prototype.subscribe=function(e){return this.addListener(e),new u(this,e)},e.prototype[d.default]=function(){return this},e.create=function(t){if(t){if("function"!=typeof t.start||"function"!=typeof t.stop)throw new Error("producer requires both start and stop functions");r(t)}return new e(t)},e.createWithMemory=function(e){return e&&r(e),new F(e)},e.never=function(){return new e({_start:a,_stop:a})},e.empty=function(){return new e({_start:function(e){e._c()},_stop:a})},e.throw=function(t){return new e({_start:function(e){e._e(t)},_stop:a})},e.from=function(t){if("function"==typeof t[d.default])return e.fromObservable(t);if("function"==typeof t.then)return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.fromArray(t)},e.fromArray=function(t){return new e(new h(t))},e.fromPromise=function(t){return new e(new b(t))},e.fromObservable=function(t){return t.endWhen?t:new e(new f(t))},e.periodic=function(t){return new e(new x(t))},e.prototype._map=function(e){return new(this.ctor())(new O(e,this))},e.prototype.map=function(e){return this._map(e)},e.prototype.mapTo=function(e){var t=this.map(function(){return e}),n=t._prod;return n.type="mapTo",t},e.prototype.filter=function(t){var n=this._prod;return n instanceof E?new e(new E(i(n.f,t),n.ins)):new e(new E(t,this))},e.prototype.take=function(e){return new(this.ctor())(new I(e,this))},e.prototype.drop=function(t){return new e(new S(t,this))},e.prototype.last=function(){return new e(new w(this))},e.prototype.startWith=function(e){return new F(new R(this,e))},e.prototype.endWhen=function(e){return new(this.ctor())(new k(e,this))},e.prototype.fold=function(e,t){return new F(new C(e,t,this))},e.prototype.replaceError=function(e){return new(this.ctor())(new P(e,this))},e.prototype.flatten=function(){this._prod;return new e(new A(this))},e.prototype.compose=function(e){return e(this)},e.prototype.remember=function(){return new F(new D(this))},e.prototype.debug=function(e){return new(this.ctor())(new v(this,e))},e.prototype.imitate=function(e){if(e instanceof F)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=e;for(var t=this._ils,n=t.length,a=0;a<n;a++)e._add(t[a]);this._ils=[]},e.prototype.shamefullySendNext=function(e){this._n(e)},e.prototype.shamefullySendError=function(e){this._e(e)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(e){e?(this._d=!0,e._n=e.next||a,e._e=e.error||a,e._c=e.complete||a,this._dl=e):(this._d=!1,this._dl=c)},e}();M.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new M(new g(e))},M.combine=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new M(new y(e))},n.Stream=M;var F=function(e){function t(t){var n=e.call(this,t)||this;return n._has=!1,n}return l(t,e),t.prototype._n=function(t){this._v=t,this._has=!0,e.prototype._n.call(this,t)},t.prototype._add=function(e){var t=this._target;if(t!==c)return t._add(e);var n=this._ils;if(n.push(e),1<n.length)return void(this._has&&e._n(this._v));if(this._stopID!==c)this._has&&e._n(this._v),clearTimeout(this._stopID),this._stopID=c;else if(this._has)e._n(this._v);else{var a=this._prod;a!==c&&a._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(e){return this._map(e)},t.prototype.mapTo=function(t){return e.prototype.mapTo.call(this,t)},t.prototype.take=function(t){return e.prototype.take.call(this,t)},t.prototype.endWhen=function(t){return e.prototype.endWhen.call(this,t)},t.prototype.replaceError=function(t){return e.prototype.replaceError.call(this,t)},t.prototype.remember=function(){return this},t.prototype.debug=function(t){return e.prototype.debug.call(this,t)},t}(M);n.MemoryStream=F,Object.defineProperty(n,"__esModule",{value:!0}),n.default=M},{"symbol-observable":459}],592:[function(e,t){var n,a,o;o=e("./Utils"),a=e("./Inline"),n=function(){function e(){}return e.indentation=4,e.prototype.dump=function(e,t,n,r,s){var l,i,d,p,c,u,m;if(null==t&&(t=0),null==n&&(n=0),null==r&&(r=!1),null==s&&(s=null),p="",c=n?o.strRepeat(" ",n):"",0>=t||"object"!=typeof e||e instanceof Date||o.isEmpty(e))p+=c+a.dump(e,r,s);else if(e instanceof Array)for(l=0,d=e.length;l<d;l++)u=e[l],m=0>=t-1||"object"!=typeof u||o.isEmpty(u),p+=c+"-"+(m?" ":"\n")+this.dump(u,t-1,m?0:n+this.indentation,r,s)+(m?"\n":"");else for(i in e)u=e[i],m=0>=t-1||"object"!=typeof u||o.isEmpty(u),p+=c+a.dump(i,r,s)+":"+(m?" ":"\n")+this.dump(u,t-1,m?0:n+this.indentation,r,s)+(m?"\n":"");return p},e}(),t.exports=n},{"./Inline":597,"./Utils":601}],593:[function(e,t){var n,a;a=e("./Pattern"),n=function(){function e(){}var t;return e.LIST_ESCAPEES=["\\","\\\\","\\\"","\"","\0","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\x0B","\f","\r","\x0E","\x0F","\x10","\x11","\x12","\x13","\x14","\x15","\x16","\x17","\x18","\x19","\x1A","\x1B","\x1C","\x1D","\x1E","\x1F",(t=d)(133),t(160),t(8232),t(8233)],e.LIST_ESCAPED=["\\\\","\\\"","\\\"","\\\"","\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],e.MAPPING_ESCAPEES_TO_ESCAPED=function(){var t,n,a,i;for(a={},t=n=0,i=e.LIST_ESCAPEES.length;0<=i?n<i:n>i;t=0<=i?++n:--n)a[e.LIST_ESCAPEES[t]]=e.LIST_ESCAPED[t];return a}(),e.PATTERN_CHARACTERS_TO_ESCAPE=new a("[\\x00-\\x1f]|\xC2\x85|\xC2\xA0|\xE2\x80\xA8|\xE2\x80\xA9"),e.PATTERN_MAPPING_ESCAPEES=new a(e.LIST_ESCAPEES.join("|").split("\\").join("\\\\")),e.PATTERN_SINGLE_QUOTING=new a("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),e.requiresDoubleQuoting=function(e){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(e)},e.escapeWithDoubleQuotes=function(e){var t;return t=this.PATTERN_MAPPING_ESCAPEES.replace(e,function(e){return function(t){return e.MAPPING_ESCAPEES_TO_ESCAPED[t]}}(this)),"\""+t+"\""},e.requiresSingleQuoting=function(e){return this.PATTERN_SINGLE_QUOTING.test(e)},e.escapeWithSingleQuotes=function(e){return"'"+e.replace(/'/g,"''")+"'"},e}(),t.exports=n},{"./Pattern":599}],594:[function(e,t){var n=function(e,t){function n(){this.constructor=e}for(var i in t)a.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,i;i=function(e){function t(e,t,n){this.message=e,this.parsedLine=t,this.snippet=n}return n(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<DumpException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<DumpException> "+this.message},t}(Error),t.exports=i},{}],595:[function(e,t){var n=function(e,t){function n(){this.constructor=e}for(var i in t)a.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,i;i=function(e){function t(e,t,n){this.message=e,this.parsedLine=t,this.snippet=n}return n(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseException> "+this.message},t}(Error),t.exports=i},{}],596:[function(e,t){var n=function(e,t){function n(){this.constructor=e}for(var i in t)a.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,i;i=function(e){function t(e,t,n){this.message=e,this.parsedLine=t,this.snippet=n}return n(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseMore> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseMore> "+this.message},t}(Error),t.exports=i},{}],597:[function(e,t){var n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},a,i,o,r,s,l,d,p;l=e("./Pattern"),d=e("./Unescaper"),i=e("./Escaper"),p=e("./Utils"),r=e("./Exception/ParseException"),s=e("./Exception/ParseMore"),a=e("./Exception/DumpException"),o=function(){function e(){}return e.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')",e.PATTERN_TRAILING_COMMENTS=new l("^\\s*#.*$"),e.PATTERN_QUOTED_SCALAR=new l("^"+e.REGEX_QUOTED_STRING),e.PATTERN_THOUSAND_NUMERIC_SCALAR=new l("^(-|\\+)?[0-9,]+(\\.[0-9]+)?$"),e.PATTERN_SCALAR_BY_DELIMITERS={},e.settings={},e.configure=function(e,t){null==e&&(e=null),null==t&&(t=null),this.settings.exceptionOnInvalidType=e,this.settings.objectDecoder=t},e.parse=function(e,t,n){var a,i;if(null==t&&(t=!1),null==n&&(n=null),this.settings.exceptionOnInvalidType=t,this.settings.objectDecoder=n,null==e)return"";if(e=p.trim(e),0===e.length)return"";switch(a={exceptionOnInvalidType:t,objectDecoder:n,i:0},e.charAt(0)){case"[":i=this.parseSequence(e,a),++a.i;break;case"{":i=this.parseMapping(e,a),++a.i;break;default:i=this.parseScalar(e,null,["\"","'"],a);}if(""!==this.PATTERN_TRAILING_COMMENTS.replace(e.slice(a.i),""))throw new r("Unexpected characters near \""+e.slice(a.i)+"\".");return i},e.dump=function(e,t,n){var a,o,r;return(null==t&&(t=!1),null==n&&(n=null),null==e)?"null":(r=typeof e,"object"===r)?e instanceof Date?e.toISOString():null!=n&&(o=n(e),"string"==typeof o||null!=o)?o:this.dumpObject(e):"boolean"===r?e?"true":"false":p.isDigits(e)?"string"===r?"'"+e+"'":parseInt(e)+"":p.isNumeric(e)?"string"===r?"'"+e+"'":parseFloat(e)+"":"number"===r?2e308===e?".Inf":-2e308===e?"-.Inf":isNaN(e)?".NaN":e:i.requiresDoubleQuoting(e)?i.escapeWithDoubleQuotes(e):i.requiresSingleQuoting(e)?i.escapeWithSingleQuotes(e):""===e?"\"\"":p.PATTERN_DATE.test(e)?"'"+e+"'":"null"===(a=e.toLowerCase())||"~"===a||"true"===a||"false"===a?"'"+e+"'":e},e.dumpObject=function(e,t,n){var a,i,o,r,s;if(null==n&&(n=null),e instanceof Array){for(r=[],a=0,o=e.length;a<o;a++)s=e[a],r.push(this.dump(s));return"["+r.join(", ")+"]"}for(i in r=[],e)s=e[i],r.push(this.dump(i)+": "+this.dump(s));return"{"+r.join(", ")+"}"},e.parseScalar=function(e,t,a,o,s){var d,i,c,u,m,f,g,_,y;if(null==t&&(t=null),null==a&&(a=["\"","'"]),null==o&&(o=null),null==s&&(s=!0),null==o&&(o={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),d=o.i,(f=e.charAt(d),!(0<=n.call(a,f)))){if(!t)u=e.slice(d),d+=u.length,_=u.indexOf(" #"),-1!==_&&(u=p.rtrim(u.slice(0,_)));else if(i=t.join("|"),m=this.PATTERN_SCALAR_BY_DELIMITERS[i],null==m&&(m=new l("^(.+?)("+i+")"),this.PATTERN_SCALAR_BY_DELIMITERS[i]=m),c=m.exec(e.slice(d)))u=c[1],d+=u.length;else throw new r("Malformed inline YAML string ("+e+").");s&&(u=this.evaluateScalar(u,o))}else if(u=this.parseQuotedScalar(e,o),d=o.i,null!=t&&(y=p.ltrim(e.slice(d)," "),g=y.charAt(0),!(0<=n.call(t,g))))throw new r("Unexpected characters ("+e.slice(d)+").");return o.i=d,u},e.parseQuotedScalar=function(e,t){var n,a,i;if(n=t.i,!(a=this.PATTERN_QUOTED_SCALAR.exec(e.slice(n))))throw new s("Malformed inline YAML string ("+e.slice(n)+").");return i=a[0].substr(1,a[0].length-2),i="\""===e.charAt(n)?d.unescapeDoubleQuotedString(i):d.unescapeSingleQuotedString(i),n+=a[0].length,t.i=n,i},e.parseSequence=function(e,t){var n,a,i,o,r,l;for(o=[],i=e.length,n=t.i,n+=1;n<i;){switch(t.i=n,e.charAt(n)){case"[":o.push(this.parseSequence(e,t)),n=t.i;break;case"{":o.push(this.parseMapping(e,t)),n=t.i;break;case"]":return o;case",":case" ":case"\n":break;default:if(a="\""===(r=e.charAt(n))||"'"===r,l=this.parseScalar(e,[",","]"],["\"","'"],t),n=t.i,!a&&"string"==typeof l&&(-1!==l.indexOf(": ")||-1!==l.indexOf(":\n")))try{l=this.parseMapping("{"+l+"}")}catch(e){}o.push(l),--n;}++n}throw new s("Malformed inline YAML string "+e)},e.parseMapping=function(e,t){var n,a,i,o,r,l,d;for(r={},o=e.length,a=t.i,a+=1,l=!1;a<o;){switch(t.i=a,e.charAt(a)){case" ":case",":case"\n":++a,t.i=a,l=!0;break;case"}":return r;}if(l){l=!1;continue}for(i=this.parseScalar(e,[":"," ","\n"],["\"","'"],t,!1),a=t.i,n=!1;a<o;){switch(t.i=a,e.charAt(a)){case"[":d=this.parseSequence(e,t),a=t.i,void 0===r[i]&&(r[i]=d),n=!0;break;case"{":d=this.parseMapping(e,t),a=t.i,void 0===r[i]&&(r[i]=d),n=!0;break;case":":case" ":case"\n":break;default:d=this.parseScalar(e,[",","}"],["\"","'"],t),a=t.i,void 0===r[i]&&(r[i]=d),n=!0,--a;}if(++a,n)break}}throw new s("Malformed inline YAML string "+e)},e.evaluateScalar=function(e,t){var n,a,i,o,s,l,d,c,u,m,f;switch(e=p.trim(e),u=e.toLowerCase(),u){case"null":case"":case"~":return null;case"true":return!0;case"false":return!1;case".inf":return 2e308;case".nan":return 0/0;case"-.inf":return 2e308;default:switch(o=u.charAt(0),o){case"!":switch(s=e.indexOf(" "),l=-1===s?u:u.slice(0,s),l){case"!":return-1===s?null:parseInt(this.parseScalar(e.slice(2)));case"!str":return p.ltrim(e.slice(4));case"!!str":return p.ltrim(e.slice(5));case"!!int":return parseInt(this.parseScalar(e.slice(5)));case"!!bool":return p.parseBoolean(this.parseScalar(e.slice(6)),!1);case"!!float":return parseFloat(this.parseScalar(e.slice(7)));case"!!timestamp":return p.stringToDate(p.ltrim(e.slice(11)));default:if(null==t&&(t={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),d=t.objectDecoder,i=t.exceptionOnInvalidType,d)return f=p.rtrim(e),s=f.indexOf(" "),-1===s?d(f,null):(m=p.ltrim(f.slice(s+1)),0<m.length||(m=null),d(f.slice(0,s),m));if(i)throw new r("Custom object support when parsing a YAML file has been disabled.");return null;}break;case"0":return"0x"===e.slice(0,2)?p.hexDec(e):p.isDigits(e)?p.octDec(e):p.isNumeric(e)?parseFloat(e):e;break;case"+":return p.isDigits(e)?(c=e,n=parseInt(c),c===n+""?n:c):p.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;case"-":return p.isDigits(e.slice(1))?"0"===e.charAt(1)?-p.octDec(e.slice(1)):(c=e.slice(1),n=parseInt(c),c===n+""?-n:-c):p.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;default:return(a=p.stringToDate(e))?a:p.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;}}},e}(),t.exports=o},{"./Escaper":593,"./Exception/DumpException":594,"./Exception/ParseException":595,"./Exception/ParseMore":596,"./Pattern":599,"./Unescaper":600,"./Utils":601}],598:[function(e,t){var n,a,i,o,r,s;n=e("./Inline"),r=e("./Pattern"),s=e("./Utils"),a=e("./Exception/ParseException"),i=e("./Exception/ParseMore"),o=function(){function t(e){this.offset=null==e?0:e,this.lines=[],this.currentLineNb=-1,this.currentLine="",this.refs={}}return t.prototype.PATTERN_FOLDED_SCALAR_ALL=new r("^(?:(?<type>![^\\|>]*)\\s+)?(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),t.prototype.PATTERN_FOLDED_SCALAR_END=new r("(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),t.prototype.PATTERN_SEQUENCE_ITEM=new r("^\\-((?<leadspaces>\\s+)(?<value>.+?))?\\s*$"),t.prototype.PATTERN_ANCHOR_VALUE=new r("^&(?<ref>[^ ]+) *(?<value>.*)"),t.prototype.PATTERN_COMPACT_NOTATION=new r("^(?<key>"+n.REGEX_QUOTED_STRING+"|[^ '\"\\{\\[].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),t.prototype.PATTERN_MAPPING_ITEM=new r("^(?<key>"+n.REGEX_QUOTED_STRING+"|[^ '\"\\[\\{].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),t.prototype.PATTERN_DECIMAL=new r("\\d+"),t.prototype.PATTERN_INDENT_SPACES=new r("^ +"),t.prototype.PATTERN_TRAILING_LINES=new r("(\n*)$"),t.prototype.PATTERN_YAML_HEADER=new r("^\\%YAML[: ][\\d\\.]+.*\n","m"),t.prototype.PATTERN_LEADING_COMMENTS=new r("^(\\#.*?\n)+","m"),t.prototype.PATTERN_DOCUMENT_MARKER_START=new r("^\\-\\-\\-.*?\n","m"),t.prototype.PATTERN_DOCUMENT_MARKER_END=new r("^\\.\\.\\.\\s*$","m"),t.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION={},t.prototype.CONTEXT_NONE=0,t.prototype.CONTEXT_SEQUENCE=1,t.prototype.CONTEXT_MAPPING=2,t.prototype.parse=function(o,r,d){var p,u,f,g,c,_,y,e,h,i,b,x,v,S,T,l,k,E,N,A,C,w,m,O,D,P,R,I,M,F,B,z,j,U,$,W;for(null==r&&(r=!1),null==d&&(d=null),this.currentLineNb=-1,this.currentLine="",this.lines=this.cleanup(o).split("\n"),_=null,c=this.CONTEXT_NONE,u=!1;this.moveToNextLine();)if(!this.isCurrentLineEmpty()){if("\t"===this.currentLine[0])throw new a("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine);if(b=O=!1,W=this.PATTERN_SEQUENCE_ITEM.exec(this.currentLine)){if(this.CONTEXT_MAPPING===c)throw new a("You cannot define a sequence item when in a mapping");c=this.CONTEXT_SEQUENCE,null==_&&(_=[]),null!=W.value&&(m=this.PATTERN_ANCHOR_VALUE.exec(W.value))&&(b=m.ref,W.value=m.value),null!=W.value&&""!==s.trim(W.value," ")&&0!==s.ltrim(W.value," ").indexOf("#")?(null==(F=W.leadspaces)?void 0:F.length)&&(m=this.PATTERN_COMPACT_NOTATION.exec(W.value))?(g=this.getRealCurrentLineNb(),M=new t(g),M.refs=this.refs,f=W.value,i=this.getCurrentLineIndentation(),this.isNextLineIndented(!1)&&(f+="\n"+this.getNextEmbedBlock(i+W.leadspaces.length+1,!0)),_.push(M.parse(f,r,d))):_.push(this.parseValue(W.value,r,d)):this.currentLineNb<this.lines.length-1&&!this.isNextLineUnIndentedCollection()?(g=this.getRealCurrentLineNb()+1,M=new t(g),M.refs=this.refs,_.push(M.parse(this.getNextEmbedBlock(null,!0),r,d))):_.push(null)}else if((W=this.PATTERN_MAPPING_ITEM.exec(this.currentLine))&&-1===W.key.indexOf(" #")){if(this.CONTEXT_SEQUENCE===c)throw new a("You cannot define a mapping item when in a sequence");c=this.CONTEXT_MAPPING,null==_&&(_={}),n.configure(r,d);try{S=n.parseScalar(W.key)}catch(e){throw y=e,y.parsedLine=this.getRealCurrentLineNb()+1,y.snippet=this.currentLine,y}if("<<"!==S)null!=W.value&&(m=this.PATTERN_ANCHOR_VALUE.exec(W.value))&&(b=m.ref,W.value=m.value);else if(O=!0,u=!0,0===(null==(B=W.value)?void 0:B.indexOf("*"))){if(j=W.value.slice(1),null==this.refs[j])throw new a("Reference \""+j+"\" does not exist.",this.getRealCurrentLineNb()+1,this.currentLine);if(U=this.refs[j],"object"!=typeof U)throw new a("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(U instanceof Array)for(h=x=0,k=U.length;x<k;h=++x)o=U[h],null==_[P=h+""]&&(_[P]=o);else for(S in U)o=U[S],null==_[S]&&(_[S]=o)}else{if(o=null!=W.value&&""!==W.value?W.value:this.getNextEmbedBlock(),g=this.getRealCurrentLineNb()+1,M=new t(g),M.refs=this.refs,R=M.parse(o,r),"object"!=typeof R)throw new a("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(R instanceof Array)for(T=0,E=R.length;T<E;T++){if(I=R[T],"object"!=typeof I)throw new a("Merge items must be objects.",this.getRealCurrentLineNb()+1,I);if(I instanceof Array)for(h=w=0,N=I.length;w<N;h=++w)o=I[h],v=h+"",_.hasOwnProperty(v)||(_[v]=o);else for(S in I)o=I[S],_.hasOwnProperty(S)||(_[S]=o)}else for(S in R)o=R[S],_.hasOwnProperty(S)||(_[S]=o)}O||(null!=W.value&&""!==s.trim(W.value," ")&&0!==s.ltrim(W.value," ").indexOf("#")?($=this.parseValue(W.value,r,d),(u||void 0===_[S])&&(_[S]=$)):this.isNextLineIndented()||this.isNextLineUnIndentedCollection()?(g=this.getRealCurrentLineNb()+1,M=new t(g),M.refs=this.refs,$=M.parse(this.getNextEmbedBlock(),r,d),(u||void 0===_[S])&&(_[S]=$)):(u||void 0===_[S])&&(_[S]=null))}else{if(C=this.lines.length,1===C||2===C&&s.isEmpty(this.lines[1])){try{o=n.parse(this.lines[0],r,d)}catch(e){throw y=e,y.parsedLine=this.getRealCurrentLineNb()+1,y.snippet=this.currentLine,y}if("object"==typeof o){if(o instanceof Array)e=o[0];else for(S in o){e=o[S];break}if("string"==typeof e&&0===e.indexOf("*")){for(_=[],D=0,A=o.length;D<A;D++)p=o[D],_.push(this.refs[p.slice(1)]);o=_}}return o}if("["===(z=s.ltrim(o).charAt(0))||"{"===z)try{return n.parse(o,r,d)}catch(e){throw y=e,y.parsedLine=this.getRealCurrentLineNb()+1,y.snippet=this.currentLine,y}throw new a("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(b)if(_ instanceof Array)this.refs[b]=_[_.length-1];else{for(S in l=null,_)l=S;this.refs[b]=_[l]}}return s.isEmpty(_)?null:_},t.prototype.getRealCurrentLineNb=function(){return this.currentLineNb+this.offset},t.prototype.getCurrentLineIndentation=function(){return this.currentLine.length-s.ltrim(this.currentLine," ").length},t.prototype.getNextEmbedBlock=function(e,t){var n,i,o,r,l,d,p;if(null==e&&(e=null),null==t&&(t=!1),this.moveToNextLine(),null!=e)r=e;else if(r=this.getCurrentLineIndentation(),p=this.isStringUnIndentedCollectionItem(this.currentLine),!this.isCurrentLineEmpty()&&0===r&&!p)throw new a("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine);for(n=[this.currentLine.slice(r)],t||(o=this.isStringUnIndentedCollectionItem(this.currentLine)),d=this.PATTERN_FOLDED_SCALAR_END,l=!d.test(this.currentLine);this.moveToNextLine();)if(i=this.getCurrentLineIndentation(),i===r&&(l=!d.test(this.currentLine)),!(l&&this.isCurrentLineComment())){if(this.isCurrentLineBlank()){n.push(this.currentLine.slice(r));continue}if(o&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&i===r){this.moveToPreviousLine();break}if(i>=r)n.push(this.currentLine.slice(r));else if("#"===s.ltrim(this.currentLine).charAt(0));else if(0===i){this.moveToPreviousLine();break}else throw new a("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}return n.join("\n")},t.prototype.moveToNextLine=function(){return!(this.currentLineNb>=this.lines.length-1)&&(this.currentLine=this.lines[++this.currentLineNb],!0)},t.prototype.moveToPreviousLine=function(){this.currentLine=this.lines[--this.currentLineNb]},t.prototype.parseValue=function(t,o,r){var l,e,d,p,c,u,m,f;if(0===t.indexOf("*")){if(c=t.indexOf("#"),t=-1===c?t.slice(1):t.substr(1,c-2),void 0===this.refs[t])throw new a("Reference \""+t+"\" does not exist.",this.currentLine);return this.refs[t]}if(d=this.PATTERN_FOLDED_SCALAR_ALL.exec(t))return p=null==(u=d.modifiers)?"":u,e=T(parseInt(p)),isNaN(e)&&(e=0),f=this.parseFoldedScalar(d.separator,this.PATTERN_DECIMAL.replace(p,""),e),null==d.type?f:(n.configure(o,r),n.parseScalar(d.type+" "+f));if("["===(m=t.charAt(0))||"{"===m||"\""===m||"'"===m)for(;;)try{return n.parse(t,o,r)}catch(e){if(l=e,l instanceof i&&this.moveToNextLine())t+="\n"+s.trim(this.currentLine," ");else throw l.parsedLine=this.getRealCurrentLineNb()+1,l.snippet=this.currentLine,l}else return this.isNextLineIndented()&&(t+="\n"+this.getNextEmbedBlock()),n.parse(t,o,r)},t.prototype.parseFoldedScalar=function(e,n,a){var i,o,l,d,p,c,u,m,f,g;if(null==n&&(n=""),null==a&&(a=0),u=this.moveToNextLine(),!u)return"";for(i=this.isCurrentLineBlank(),g="";u&&i;)(u=this.moveToNextLine())&&(g+="\n",i=this.isCurrentLineBlank());if(0===a&&(p=this.PATTERN_INDENT_SPACES.exec(this.currentLine))&&(a=p[0].length),0<a)for(m=this.PATTERN_FOLDED_SCALAR_BY_INDENTATION[a],null==m&&(m=new r("^ {"+a+"}(.*)$"),t.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION[a]=m);u&&(i||(p=m.exec(this.currentLine)));)g+=i?this.currentLine.slice(a):p[1],(u=this.moveToNextLine())&&(g+="\n",i=this.isCurrentLineBlank());else u&&(g+="\n");if(u&&this.moveToPreviousLine(),">"===e){for(c="",f=g.split("\n"),(o=0,l=f.length);o<l;o++)d=f[o],0===d.length||" "===d.charAt(0)?c=s.rtrim(c," ")+d+"\n":c+=d+" ";g=c}return"+"!==n&&(g=s.rtrim(g)),""===n?g=this.PATTERN_TRAILING_LINES.replace(g,"\n"):"-"===n&&(g=this.PATTERN_TRAILING_LINES.replace(g,"")),g},t.prototype.isNextLineIndented=function(e){var t,n,a;if(null==e&&(e=!0),n=this.getCurrentLineIndentation(),t=!this.moveToNextLine(),e)for(;!t&&this.isCurrentLineEmpty();)t=!this.moveToNextLine();else for(;!t&&this.isCurrentLineBlank();)t=!this.moveToNextLine();return!t&&(a=!1,this.getCurrentLineIndentation()>n&&(a=!0),this.moveToPreviousLine(),a)},t.prototype.isCurrentLineEmpty=function(){var e;return e=s.trim(this.currentLine," "),0===e.length||"#"===e.charAt(0)},t.prototype.isCurrentLineBlank=function(){return""===s.trim(this.currentLine," ")},t.prototype.isCurrentLineComment=function(){var e;return e=s.ltrim(this.currentLine," "),"#"===e.charAt(0)},t.prototype.cleanup=function(e){var t,n,a,i,o,r,l,d,p,c,u,m,f,g;for(-1!==e.indexOf("\r")&&(e=e.split("\r\n").join("\n").split("\r").join("\n")),t=0,c=this.PATTERN_YAML_HEADER.replaceAll(e,""),e=c[0],t=c[1],this.offset+=t,u=this.PATTERN_LEADING_COMMENTS.replaceAll(e,"",1),g=u[0],t=u[1],1===t&&(this.offset+=s.subStrCount(e,"\n")-s.subStrCount(g,"\n"),e=g),m=this.PATTERN_DOCUMENT_MARKER_START.replaceAll(e,"",1),g=m[0],t=m[1],1===t&&(this.offset+=s.subStrCount(e,"\n")-s.subStrCount(g,"\n"),e=g,e=this.PATTERN_DOCUMENT_MARKER_END.replace(e,"")),p=e.split("\n"),f=-1,(i=0,r=p.length);i<r;i++)(d=p[i],0!==s.trim(d," ").length)&&(a=d.length-s.ltrim(d).length,(-1===f||a<f)&&(f=a));if(0<f){for(n=o=0,l=p.length;o<l;n=++o)d=p[n],p[n]=d.slice(f);e=p.join("\n")}return e},t.prototype.isNextLineUnIndentedCollection=function(e){var t,n;for(null==e&&(e=null),null==e&&(e=this.getCurrentLineIndentation()),t=this.moveToNextLine();t&&this.isCurrentLineEmpty();)t=this.moveToNextLine();return!1!==t&&(n=!1,this.getCurrentLineIndentation()===e&&this.isStringUnIndentedCollectionItem(this.currentLine)&&(n=!0),this.moveToPreviousLine(),n)},t.prototype.isStringUnIndentedCollectionItem=function(){return"-"===this.currentLine||"- "===this.currentLine.slice(0,2)},t}(),t.exports=o},{"./Exception/ParseException":595,"./Exception/ParseMore":596,"./Inline":597,"./Pattern":599,"./Utils":601}],599:[function(e,t){var n;n=function(){function e(e,t){var n,a,o,r,i,s,l,d,p;for(null==t&&(t=""),o="",i=e.length,s=null,a=0,r=0;r<i;){if(n=e.charAt(r),"\\"===n)o+=e.slice(r,+(r+1)+1||9e9),r++;else if("("!==n)o+=n;else if(!(r<i-2))o+=n;else if(d=e.slice(r,+(r+2)+1||9e9),"(?:"===d)r+=2,o+=d;else if("(?<"===d)for(a++,r+=2,l="";r+1<i;){if(p=e.charAt(r+1),">"===p){o+="(",r++,0<l.length&&(null==s&&(s={}),s[l]=a);break}else l+=p;r++}else o+=n,a++;r++}this.rawRegex=e,this.cleanedRegex=o,this.regex=new RegExp(this.cleanedRegex,"g"+t.replace("g","")),this.mapping=s}return e.prototype.regex=null,e.prototype.rawRegex=null,e.prototype.cleanedRegex=null,e.prototype.mapping=null,e.prototype.exec=function(e){var t,n,a,i;if(this.regex.lastIndex=0,n=this.regex.exec(e),null==n)return null;if(null!=this.mapping)for(a in i=this.mapping,i)t=i[a],n[a]=n[t];return n},e.prototype.test=function(e){return this.regex.lastIndex=0,this.regex.test(e)},e.prototype.replace=function(e,t){return this.regex.lastIndex=0,e.replace(this.regex,t)},e.prototype.replaceAll=function(e,t,n){var a;for(null==n&&(n=0),this.regex.lastIndex=0,a=0;this.regex.test(e)&&(0===n||a<n);)this.regex.lastIndex=0,e=e.replace(this.regex,t),a++;return[e,a]},e}(),t.exports=n},{}],600:[function(e,t){var n,a,i;i=e("./Utils"),n=e("./Pattern"),a=function(){function e(){}return e.PATTERN_ESCAPED_CHARACTER=new n("\\\\([0abt\tnvfre \"\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})"),e.unescapeSingleQuotedString=function(e){return e.replace(/\'\'/g,"'")},e.unescapeDoubleQuotedString=function(e){return null==this._unescapeCallback&&(this._unescapeCallback=function(e){return function(t){return e.unescapeCharacter(t)}}(this)),this.PATTERN_ESCAPED_CHARACTER.replace(e,this._unescapeCallback)},e.unescapeCharacter=function(e){var t;switch(t=d,e.charAt(1)){case"0":return t(0);case"a":return t(7);case"b":return t(8);case"t":return"\t";case"\t":return"\t";case"n":return"\n";case"v":return t(11);case"f":return t(12);case"r":return t(13);case"e":return t(27);case" ":return" ";case"\"":return"\"";case"/":return"/";case"\\":return"\\";case"N":return t(133);case"_":return t(160);case"L":return t(8232);case"P":return t(8233);case"x":return i.utf8chr(i.hexDec(e.substr(2,2)));case"u":return i.utf8chr(i.hexDec(e.substr(2,4)));case"U":return i.utf8chr(i.hexDec(e.substr(2,8)));default:return"";}},e}(),t.exports=a},{"./Pattern":599,"./Utils":601}],601:[function(e,t){var n={}.hasOwnProperty,a,i;a=e("./Pattern"),i=function(){function t(){}return t.REGEX_LEFT_TRIM_BY_CHAR={},t.REGEX_RIGHT_TRIM_BY_CHAR={},t.REGEX_SPACES=/\s+/g,t.REGEX_DIGITS=/^\d+$/,t.REGEX_OCTAL=/[^0-7]/gi,t.REGEX_HEXADECIMAL=/[^a-f0-9]/gi,t.PATTERN_DATE=new a("^(?<year>[0-9][0-9][0-9][0-9])-(?<month>[0-9][0-9]?)-(?<day>[0-9][0-9]?)(?:(?:[Tt]|[ \t]+)(?<hour>[0-9][0-9]?):(?<minute>[0-9][0-9]):(?<second>[0-9][0-9])(?:.(?<fraction>[0-9]*))?(?:[ \t]*(?<tz>Z|(?<tz_sign>[-+])(?<tz_hour>[0-9][0-9]?)(?::(?<tz_minute>[0-9][0-9]))?))?)?$","i"),t.LOCAL_TIMEZONE_OFFSET=1e3*(60*new Date().getTimezoneOffset()),t.trim=function(e,t){var n,a;return null==t&&(t="\\s"),n=this.REGEX_LEFT_TRIM_BY_CHAR[t],null==n&&(this.REGEX_LEFT_TRIM_BY_CHAR[t]=n=new RegExp("^"+t+""+t+"*")),n.lastIndex=0,a=this.REGEX_RIGHT_TRIM_BY_CHAR[t],null==a&&(this.REGEX_RIGHT_TRIM_BY_CHAR[t]=a=new RegExp(t+""+t+"*$")),a.lastIndex=0,e.replace(n,"").replace(a,"")},t.ltrim=function(e,t){var n;return null==t&&(t="\\s"),n=this.REGEX_LEFT_TRIM_BY_CHAR[t],null==n&&(this.REGEX_LEFT_TRIM_BY_CHAR[t]=n=new RegExp("^"+t+""+t+"*")),n.lastIndex=0,e.replace(n,"")},t.rtrim=function(e,t){var n;return null==t&&(t="\\s"),n=this.REGEX_RIGHT_TRIM_BY_CHAR[t],null==n&&(this.REGEX_RIGHT_TRIM_BY_CHAR[t]=n=new RegExp(t+""+t+"*$")),n.lastIndex=0,e.replace(n,"")},t.isEmpty=function(e){return!e||""===e||"0"===e||e instanceof Array&&0===e.length||this.isEmptyObject(e)},t.isEmptyObject=function(e){var t;return e instanceof Object&&0===function(){var a;for(t in a=[],e)n.call(e,t)&&a.push(t);return a}().length},t.subStrCount=function(e,t,n,a){var o,r,i,s,l,d;for(o=0,e=""+e,t=""+t,null!=n&&(e=e.slice(n)),null!=a&&(e=e.slice(0,a)),s=e.length,d=t.length,(r=i=0,l=s);0<=l?i<l:i>l;r=0<=l?++i:--i)t===e.slice(r,d)&&(o++,r+=d-1);return o},t.isDigits=function(e){return this.REGEX_DIGITS.lastIndex=0,this.REGEX_DIGITS.test(e)},t.octDec=function(e){return this.REGEX_OCTAL.lastIndex=0,parseInt((e+"").replace(this.REGEX_OCTAL,""),8)},t.hexDec=function(e){return this.REGEX_HEXADECIMAL.lastIndex=0,e=this.trim(e),"0x"===(e+"").slice(0,2)&&(e=(e+"").slice(2)),parseInt((e+"").replace(this.REGEX_HEXADECIMAL,""),16)},t.utf8chr=function(e){var t;return t=d,128>(e%=2097152)?t(e):2048>e?t(192|e>>6)+t(128|63&e):65536>e?t(224|e>>12)+t(128|63&e>>6)+t(128|63&e):t(240|e>>18)+t(128|63&e>>12)+t(128|63&e>>6)+t(128|63&e)},t.parseBoolean=function(e,t){var n;return null==t&&(t=!0),"string"==typeof e?(n=e.toLowerCase(),(t||"no"!==n)&&"0"!==n&&"false"!==n&&""!==n):!!e},t.isNumeric=function(e){return this.REGEX_SPACES.lastIndex=0,"number"==typeof e||"string"==typeof e&&!isNaN(e)&&""!==e.replace(this.REGEX_SPACES,"")},t.stringToDate=function(e){var t,n,a,i,o,r,s,l,d,p,c,u;if(null==e||!e.length)return null;if(o=this.PATTERN_DATE.exec(e),!o)return null;if(u=parseInt(o.year,10),s=parseInt(o.month,10)-1,n=parseInt(o.day,10),null==o.hour)return t=new Date(Date.UTC(u,s,n)),t;if(i=parseInt(o.hour,10),r=parseInt(o.minute,10),l=parseInt(o.second,10),null!=o.fraction){for(a=o.fraction.slice(0,3);3>a.length;)a+="0";a=parseInt(a,10)}else a=0;return null!=o.tz&&(d=parseInt(o.tz_hour,10),p=null==o.tz_minute?0:parseInt(o.tz_minute,10),c=6e4*(60*d+p),"-"===o.tz_sign&&(c*=-1)),t=new Date(Date.UTC(u,s,n,i,r,l,a)),c&&t.setTime(t.getTime()-c),t},t.strRepeat=function(e,t){var n,a;for(a="",n=0;n<t;)a+=e,n++;return a},t.getStringFromFile=function(t,n){var a,i,o,r,s,l,d,p;if(null==n&&(n=null),p=null,"undefined"!=typeof window&&null!==window)if(window.XMLHttpRequest)p=new XMLHttpRequest;else if(window.ActiveXObject)for(l=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],o=0,r=l.length;o<r;o++){s=l[o];try{p=new ActiveXObject(s)}catch(e){}}return null==p?(d=e,i=d("fs"),null==n?(a=i.readFileSync(t),null==a?null:a+""):i.readFile(t,function(e,t){return e?n(null):n(t+"")})):null==n?(p.open("GET",t,!1),p.send(null),200===p.status||0===p.status?p.responseText:null):(p.onreadystatechange=function(){if(4===p.readyState)return 200===p.status||0===p.status?n(p.responseText):n(null)},p.open("GET",t,!0),p.send(null))},t}(),t.exports=i},{"./Pattern":599}],602:[function(e,t){var n,a,i,o;a=e("./Parser"),n=e("./Dumper"),i=e("./Utils"),o=function(){function e(){}return e.parse=function(e,t,n){return null==t&&(t=!1),null==n&&(n=null),new a().parse(e,t,n)},e.parseFile=function(e,t,n,a){var o;return null==t&&(t=null),null==n&&(n=!1),null==a&&(a=null),null==t?(o=i.getStringFromFile(e),null==o?null:this.parse(o,n,a)):i.getStringFromFile(e,function(e){return function(i){var o;o=null,null!=i&&(o=e.parse(i,n,a)),t(o)}}(this))},e.dump=function(e,t,a,i,o){var r;return null==t&&(t=2),null==a&&(a=4),null==i&&(i=!1),null==o&&(o=null),r=new n,r.indentation=a,r.dump(e,t,0,i,o)},e.stringify=function(e,t,n,a,i){return this.dump(e,t,n,a,i)},e.load=function(e,t,n,a){return this.parseFile(e,t,n,a)},e}(),"undefined"!=typeof window&&null!==window&&(window.YAML=o),("undefined"==typeof window||null===window)&&(this.YAML=o),t.exports=o},{"./Dumper":592,"./Parser":598,"./Utils":601}],603:[function(e,t){t.exports={name:"vega-multi-view",version:"1.1.5",description:"Add multiple separate Vega views to a page and connect the signals of these views",license:"MIT",author:"abudaan",main:"dist/index.js",browser:"dist/index.js",module:"index.js",repository:"git://github.com/abudaan/vega-multi-view.git",bugs:{url:"https://github.com/abudaan/vega-multi-view/issues"},keywords:["vega","leaflet","tile maps","signals"],scripts:{prebuild:"rm -rf build && mkdir build","gulp:build":"gulp build",compile:"babel ./src --out-dir ./dist",update:"npm run compile && npm run gulp:build",prepublish:"npm run update",postpublish:"git push && git push --tags"},dependencies:{"fetch-helpers":"git+https://github.com/abudaan/fetch-helpers.git",ramda:"^0.23.0",vega:"^3.0.5","vega-as-leaflet-layer":"^1.1.5","vega-tooltip":"^0.4.4",xstream:"^10.9.0"},devDependencies:{"babel-cli":"^6.26.0","babel-eslint":"^7.2.3","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.0","babel-preset-flow":"^6.23.0","babel-preset-stage-0":"^6.24.1",babelify:"^7.3.0",browserify:"^14.4.0",eslint:"^4.6.1","eslint-config-airbnb-base":"^12.0.0","eslint-plugin-flowtype":"^2.35.1","eslint-plugin-import":"^2.7.0","flow-bin":"0.42.0",gulp:"github:gulpjs/gulp#4.0","gulp-autoprefixer":"^4.0.0","gulp-babel-minify":"^0.2.0","gulp-concat":"^2.6.1","gulp-copy":"^1.0.1","gulp-filter":"^5.0.1","gulp-sass":"^3.1.0","gulp-sourcemaps":"^2.6.1","gulp-util":"^3.0.8","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"}}},{}],604:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.version=n.showSpecInTab=n.addViews=n.removeViews=void 0;var i=e("babel-runtime/core-js/json/stringify"),o=a(i),r=e("babel-runtime/helpers/slicedToArray"),l=a(r),s=e("babel-runtime/regenerator"),d=a(s),p=e("babel-runtime/helpers/extends"),c=a(p),u=e("babel-runtime/core-js/promise"),m=a(u),f=e("babel-runtime/helpers/asyncToGenerator"),g=a(f),_=e("ramda"),y=a(_),h=e("vega"),b=e("vega-as-leaflet-layer"),x=a(b),S=e("fetch-helpers"),T=e("./util/debug"),k=a(T),E=e("./util/add-tooltips"),N=a(E),A=e("./util/signals"),C=a(A),w=e("./util/add-elements"),O=a(w),D=e("./util/add-styling"),P=a(D),R=e("./util/load-specs"),I=e("../package.json"),M=y.default.addIndex(y.default.map),F={},B=function(e,t,n){e.forEach(function(e){var a=e.view,i=e.vmvConfig,o=e.element;if(null!==a)if(!0===i.leaflet){var r={view:e.view,renderer:e.renderer||t,container:n,mapElement:o};(0,x.default)(r)}else a.renderer(i.renderer||t).initialize(o)})},z=function(e,n){var t=M(function(){var e=(0,g.default)(d.default.mark(function e(a){var i,o,t,r,s;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,e.prev=1,o=a.spec.type||n,e.next=5,(0,R.loadSpec)(a.spec,o);case 5:i=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error(e.t0);case 11:if(null!==i){e.next=13;break}return e.abrupt("return",m.default.resolve({id:a.id,spec:"Vega spec "+a.spec+" could not be loaded",view:null,vmvConfig:null}));case 13:return t=(0,c.default)({},i),r=a.vmvConfig||{styling:{}},!1===y.default.isNil(t.vmvConfig)&&(r=(0,c.default)({},t.vmvConfig),delete t.vmvConfig),y.default.isNil(r.styling)&&(r.styling={}),s=new h.View((0,h.parse)(t)),e.abrupt("return",new m.default(function(e){e({id:a.id,spec:t,view:s,vmvConfig:r})}));case 19:case"end":return e.stop();}},e,void 0,[[1,8]])}));return function(){return e.apply(this,arguments)}}(),e);return m.default.all(t)},j=n.removeViews=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=y.default.flatten(t);return a.forEach(function(e){var t=F[e];if(!1===y.default.isNil(t)){var n=t.element;null!==n&&n.parentNode.removeChild(n),delete F[e]}}),F},U=n.addViews=function(){var e=(0,g.default)(d.default.mark(function e(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,a,i,o,r,s,p,c,u,f,g,_,h,b,x,v,T,E,A,w,D,R,I,M;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,"string"!=typeof a){e.next=13;break}if(0!==a.length){e.next=4;break}return e.abrupt("return",m.default.reject(new Error("You have passed an empty string!")));case 4:return e.prev=4,e.next=7,(0,S.load)(a,n);case 7:a=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](4),console.error(e.t0);case 13:return i=a,o=i.run,r=void 0===o||o,s=i.hover,p=void 0!==s&&s,c=i.specs,u=i.element,f=i.renderer,g=void 0===f?"canvas":f,_=i.debug,h=void 0!==_&&_,b=i.overwrite,x=void 0!==b&&b,v=i.styling,T=void 0===v?{}:v,(0,P.default)("global",T,document.body),E=void 0,A=y.default.splitWhen(function(e){return y.default.isNil(F[e])},y.default.keys(c)),w=(0,l.default)(A,2),D=w[0],R=w[1],x?(j(D),1===D.length?console.info("view with id \""+D[0]+"\" is overwritten"):1<D.length&&console.info("views with ids \""+D.join("\", \"")+"\" is overwritten"),E=y.default.keys(c)):(1===D.length?console.warn("view with id \""+D[0]+"\" already exist!"):1<D.length&&console.warn("views with ids \""+D.join("\", \"")+"\" already exist!"),E=R),E=y.default.map(function(e){var t=c[e],n={spec:t,id:e};if(Array.isArray(t))if(2===t.length){var a=(0,l.default)(t,2);n.spec=a[0],n.vmvConfig=a[1]}else if(1===t.length){var i=(0,l.default)(t,1);n.spec=i[0]}return n},E),I=document.body,"string"==typeof u?(I=document.getElementById(u),y.default.isNil(I)&&(I=document.createElement("div"),I.id=u,document.body.appendChild(I))):u instanceof HTMLElement?(I=u,null===document.getElementById(u)&&document.body.appendChild(I)):"undefined"!=typeof u&&console.warn("invalid element, using document.body instead"),e.next=23,z(E,n);case 23:if(M=e.sent,M=(0,O.default)(M,I),(0,N.default)(M),(0,C.default)(M),!h){e.next=30;break}return e.next=30,(0,k.default)(M);case 30:return e.abrupt("return",new m.default(function(e){setTimeout(function(){B(M,g,I),M.forEach(function(e){null!==e.view&&((!0===e.vmvConfig.run||!0===r&&!1!==e.vmvConfig.run)&&e.view.run(),(!0===e.vmvConfig.hover||!0===p&&!1!==e.vmvConfig.hover)&&e.view.hover(),(0,P.default)(e.id,e.vmvConfig.styling,e.element,T)),F[e.id]=e}),e(F)},0)}));case 31:case"end":return e.stop();}},e,void 0,[[4,10]])}));return function(){return e.apply(this,arguments)}}(),$=n.showSpecInTab=function(e){var t=(0,o.default)(e,null,4),n=window.open();n.document.open(),n.document.write("< html > <body><pre>"+t+"</pre></body></html > "),n.document.close()},W="vega-multi-view "+I.version;n.version=W},{"../package.json":603,"./util/add-elements":605,"./util/add-styling":606,"./util/add-tooltips":607,"./util/debug":608,"./util/load-specs":609,"./util/signals":610,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/asyncToGenerator":8,"babel-runtime/helpers/extends":9,"babel-runtime/helpers/slicedToArray":10,"babel-runtime/regenerator":12,"fetch-helpers":138,ramda:148,vega:589,"vega-as-leaflet-layer":466}],605:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/helpers/extends"),o=a(i),r=e("ramda"),s=a(r);n.default=function(e,t){return s.default.map(function(e){if(null===e.view)return(0,o.default)({},e,{element:null});var n=e.vmvConfig.element,a=null;if("string"==typeof n)a=document.getElementById(n),null===a&&(a=document.createElement("div"),a.id=n,t.appendChild(a));else if(n instanceof HTMLElement)null===document.getElementById(n.id)&&t.appendChild(n),a=n;else{if("undefined"!=typeof n)return console.error("element \""+n+"\" is not an id or a valid HTMLElement"),(0,o.default)({},e,{element:null});a=document.createElement("div"),a.id=e.id,t.appendChild(a)}return(0,o.default)({},e,{element:a})},e)}},{"babel-runtime/helpers/extends":9,ramda:148}],606:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/helpers/toConsumableArray"),o=a(i),r=e("ramda"),s=a(r),l=document.getElementsByTagName("head").item(0),d=0;n.default=function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=t.url,r=void 0===i?null:i,s=t.css,p=void 0===s?null:s,c=t.cssAppend,u=void 0===c||c,m=t.addToHead,f=t.classes,g=void 0===f?null:f,_=t.classesAppend,y=[],h=[];if("string"==typeof g?y=[g]:Array.isArray(g)&&(y=g),"string"==typeof a.classes?h=[a.classes]:Array.isArray(a.classes)&&(h=a.classes),n.className=!0===(void 0===_||_)?[].concat((0,o.default)(h),(0,o.default)(y)).join(" "):0<y.length?y.join(" "):0<h.length?h.join(" "):"",!0===(void 0!==m&&m))if("string"==typeof p){var b=document.getElementById("style-"+e);null===b&&(b=document.createElement("style"),b.id="style-"+e,b.type="text/css",l.appendChild(b));var x=document.createTextNode(p);!1===u&&(b.innerHTML=""),b.appendChild(x)}else if("string"==typeof r){var v=document.querySelectorAll("id^="+e);!1===u&&v.forEach(function(e){l.removeChild(e)});var S=document.createElement("link");S.id="id-"+d,S.type="text/css",S.setAttribute("rel","stylesheet"),S.setAttribute("href",r),l.appendChild(S),d+=1}}},{"babel-runtime/helpers/toConsumableArray":11,ramda:148}],607:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("vega-tooltip");n.default=function(e){e.forEach(function(e){null!==e.view&&"undefined"!=typeof e.vmvConfig.tooltipOptions&&(0,a.vega)(e.view,e.vmvConfig.tooltipOptions)})}},{"vega-tooltip":583}],608:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/core-js/promise"),o=a(i),r=e("ramda"),s=a(r);n.default=function(e){s.default.forEach(function(e){var t=e.spec,n=e.view;s.default.forEach(function(e){n.addSignalListener(e.name,function(e,n){console.log("[SIGNAL] %s %s %O",t.description||" - ",e,n)})},t.signals||[])},e);var t=s.default.map(function(e){return new o.default(function(t){var n=e.spec,a=e.view;(s.default.isNil(n.data)||0===n.data.length)&&t();var i=n.data.length,o=0,r=setInterval(function(){s.default.forEach(function(e){var s=a.data(e.name);null!==s&&(console.log("[DATA] %s %s %O",n.description||" - ",e.name,s),o+=1),o===i&&(clearInterval(r),t())},n.data)},10)})},e);return o.default.all(t)}},{"babel-runtime/core-js/promise":7,ramda:148}],609:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.loadSpecs=n.loadSpec=void 0;var i=e("babel-runtime/regenerator"),o=a(i),r=e("babel-runtime/core-js/promise"),s=a(r),l=e("babel-runtime/helpers/asyncToGenerator"),d=a(l),p=e("fetch-helpers"),c=n.loadSpec=function(e,t){return(0,p.load)(e,t)},u=n.loadSpecs=function(){var e=(0,d.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,s.default.all(t.map(function(){var e=(0,d.default)(o.default.mark(function e(t){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.fetchJSON)(t);case 2:a=e.sent,n.push(a);case 4:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},{"babel-runtime/core-js/promise":7,"babel-runtime/helpers/asyncToGenerator":8,"babel-runtime/regenerator":12,"fetch-helpers":138}],610:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/helpers/extends"),o=a(i),r=e("ramda"),l=a(r),s=e("xstream"),d=a(s),p=0,c=function(e){var t=e.vmvConfig,n=e.view,a={};if(l.default.isNil(t.publish))return a;var i=t.publish;return!1===Array.isArray(i)&&(i=[i]),l.default.forEach(function(e){try{var t=d.default.create({start:function(t){n.addSignalListener(e.signal,function(e,n){t.next(n)})},stop:function(){n.removeSignalListener(e.signal)},id:p});p+=1,a[e.as]=t}catch(t){console.error(t.message)}},i),a},u=function(e,t){var n=e.view,a=e.spec,i=e.vmvConfig;if(!l.default.isNil(i.subscribe)){var o=i.subscribe;!1===Array.isArray(o)&&(o=[o]),l.default.forEach(function(e){var i=t[e.signal];return l.default.isNil(i)?void console.error("no stream for signal \""+e.signal+"\""):l.default.isNil(l.default.find(l.default.propEq("name",e.as))(a.signals))?void console.error("no signal \""+e.as+"\" found in spec"):void i.addListener({next:function(t){n.signal(e.as,t).run()},error:function(e){console.error("Stream "+i.id+" error: "+e)},complete:function(){console.log("Stream "+i.id+" is done")}})},o)}};n.default=function(e){var t={};l.default.forEach(function(e){null!==e.view&&(t=(0,o.default)({},t,c(e)))},l.default.values(e)),l.default.forEach(function(e){null!==e.view&&u(e,t)},l.default.values(e))}},{"babel-runtime/helpers/extends":9,ramda:148,xstream:591}]},{},[604])(604)});