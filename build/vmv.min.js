(function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.vmv=e()}})(function(){var e=Math.sign,t=Math.tan,n=Math.atan,a=Math.exp,i=Math.acos,s=Math.sin,c=Math.cos,o=Math.PI,u=Math.sqrt,l=Math.round,S=Math.min,p=Math.ceil,r=Math.LN2,f=Math.log,T=Math.abs,g=Math.pow,N=Math.max,E=Math.floor,d=String.fromCharCode,m,_,y;return function d(p,e,t){function a(i,o){if(!e[i]){if(!p[i]){var r="function"==typeof require&&require;if(!o&&r)return r(i,!0);if(n)return n(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=e[i]={exports:{}};p[i][0].call(c.exports,function(t){var e=p[i][1][t];return a(e?e:t)},c,c.exports,d,p,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,i=0;i<t.length;i++)a(t[i]);return a}({1:[function(e,t){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":50}],2:[function(e,t){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":51}],3:[function(e,t){t.exports={default:e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":52}],4:[function(e,t){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":53}],5:[function(e,t){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":54}],6:[function(e,t){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":55}],7:[function(e,t){t.exports={default:e("core-js/library/fn/object/entries"),__esModule:!0}},{"core-js/library/fn/object/entries":56}],8:[function(e,t){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":57}],9:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../core-js/promise"),i=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default(function(e,n){function a(o,r){try{var l=t[o](r),s=l.value}catch(e){return void n(e)}return l.done?void e(s):i.default.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}},{"../core-js/promise":8}],10:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../core-js/object/define-property"),i=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},{"../core-js/object/define-property":6}],11:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../core-js/object/assign"),i=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default=i.default||function(e){for(var t=1,n;t<arguments.length;t++)for(var a in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}},{"../core-js/object/assign":5}],12:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/is-iterable"),o=a(i),r=e("../core-js/get-iterator"),l=a(r);n.default=function(){function e(e,t){var n=[],a=!0,i=!1,o;try{for(var r=(0,l.default)(e),s;!(a=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));a=!0);}catch(e){i=!0,o=e}finally{try{!a&&r["return"]&&r["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},{"../core-js/get-iterator":2,"../core-js/is-iterable":3}],13:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../core-js/array/from"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},{"../core-js/array/from":1}],14:[function(e,t){/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=function(){return this}()||Function("return this")(),a=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime"),i=a&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=e("./runtime"),a)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},{"./runtime":15}],15:[function(e,t){!function(e){"use strict";function n(e,t,n,a){var o=t&&t.prototype instanceof i?t:i,r=Object.create(o.prototype),l=new f(a||[]);return r._invoke=d(e,n,l),r}function a(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function r(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(n,i,o,r){var l=a(e[n],e,i);if("throw"===l.type)r(l.arg);else{var s=l.arg,d=s.value;return d&&"object"==typeof d&&y.call(d,"__await")?Promise.resolve(d.__await).then(function(e){t("next",e,o,r)},function(e){t("throw",e,o,r)}):Promise.resolve(d).then(function(e){s.value=e,o(s)},r)}}var n;this._invoke=function(e,a){function i(){return new Promise(function(n,i){t(e,a,n,i)})}return n=n?n.then(i,i):i()}}function d(e,t,n){var i=k;return function(o,r){if(i==N)throw new Error("Generator is already running");if(i==A){if("throw"===o)throw r;return g()}for(n.method=o,n.arg=r;;){var l=n.delegate;if(l){var s=p(l,n);if(s){if(s===w)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i==k)throw i=A,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=N;var d=a(e,t,n);if("normal"===d.type){if(i=n.done?A:E,d.arg===w)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(i=A,n.method="throw",n.arg=d.arg)}}}function p(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,p(e,t),"throw"===t.method))return w;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var i=a(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,w;var o=i.arg;if(!o)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w;if(o.done)t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0);else return o;return t.delegate=null,w}function c(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function u(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(c,this),this.reset(!0)}function m(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:g}}function g(){return{value:void 0,done:!0}}var _=Object.prototype,y=_.hasOwnProperty,h="function"==typeof Symbol?Symbol:{},b=h.iterator||"@@iterator",x=h.asyncIterator||"@@asyncIterator",v=h.toStringTag||"@@toStringTag",S="object"==typeof t,T=e.regeneratorRuntime;if(T)return void(S&&(t.exports=T));T=e.regeneratorRuntime=S?t.exports:{},T.wrap=n;var k="suspendedStart",E="suspendedYield",N="executing",A="completed",w={},C={};C[b]=function(){return this};var O=Object.getPrototypeOf,D=O&&O(O(m([])));D&&D!==_&&y.call(D,b)&&(C=D);var P=r.prototype=i.prototype=Object.create(C);o.prototype=P.constructor=r,r.constructor=o,r[v]=o.displayName="GeneratorFunction",T.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},T.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,r):(e.__proto__=r,!(v in e)&&(e[v]="GeneratorFunction")),e.prototype=Object.create(P),e},T.awrap=function(e){return{__await:e}},l(s.prototype),s.prototype[x]=function(){return this},T.AsyncIterator=s,T.async=function(e,t,a,i){var o=new s(n(e,t,a,i));return T.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},l(P),P[v]="Generator",P[b]=function(){return this},P.toString=function(){return"[object Generator]"},T.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},T.values=m,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(u),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,a){return o.type="throw",o.arg=e,n.next=t,a&&(n.method="next",n.arg=void 0),!!a}if(this.done)throw e;for(var n=this,a=this.tryEntries.length-1;0<=a;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var r=y.call(i,"catchLoc"),l=y.call(i,"finallyLoc");if(r&&l){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(r){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);}else if(!l)throw new Error("try statement without catch or finally");else if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1,a;0<=n;--n)if(a=this.tryEntries[n],a.tryLoc<=this.prev&&y.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1,n;0<=t;--t)if(n=this.tryEntries[t],n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),u(n),w},catch:function(e){for(var t=this.tryEntries.length-1,n;0<=t;--t)if(n=this.tryEntries[t],n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;u(n)}return i}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:m(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}}}(function(){return this}()||Function("return this")())},{}],16:[function(e,t){t.exports=e("regenerator-runtime")},{"regenerator-runtime":14}],17:[function(e,t,n){"use strict";function a(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return l[63&e>>18]+l[63&e>>12]+l[63&e>>6]+l[63&e]}function r(e,t,n){for(var a=[],r=t,i;r<n;r+=3)i=(e[r]<<16)+(e[r+1]<<8)+e[r+2],a.push(o(i));return a.join("")}n.byteLength=function(e){return 3*e.length/4-a(e)},n.toByteArray=function(e){var t=e.length,n,i,o,r,l;r=a(e),l=new d(3*t/4-r),i=0<r?t-4:t;var p=0;for(n=0;n<i;n+=4)o=s[e.charCodeAt(n)]<<18|s[e.charCodeAt(n+1)]<<12|s[e.charCodeAt(n+2)]<<6|s[e.charCodeAt(n+3)],l[p++]=255&o>>16,l[p++]=255&o>>8,l[p++]=255&o;return 2===r?(o=s[e.charCodeAt(n)]<<2|s[e.charCodeAt(n+1)]>>4,l[p++]=255&o):1===r&&(o=s[e.charCodeAt(n)]<<10|s[e.charCodeAt(n+1)]<<4|s[e.charCodeAt(n+2)]>>2,l[p++]=255&o>>8,l[p++]=255&o),l},n.fromByteArray=function(e){for(var t=e.length,n=t%3,a="",o=[],s=16383,d=0,i=t-n,p;d<i;d+=s)o.push(r(e,d,d+s>i?i:d+s));return 1==n?(p=e[t-1],a+=l[p>>2],a+=l[63&p<<4],a+="=="):2==n&&(p=(e[t-2]<<8)+e[t-1],a+=l[p>>10],a+=l[63&p>>4],a+=l[63&p<<2],a+="="),o.push(a),o.join("")};for(var l=[],s=[],d="undefined"==typeof Uint8Array?Array:Uint8Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,i=p.length;c<i;++c)l[c]=p[c],s[p.charCodeAt(c)]=c;s[45]=62,s[95]=63},{}],18:[function(){},{}],19:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],20:[function(e,t){(function(n){function a(e,t){if(!(this instanceof a))return new a(e,t);if(this._bsontype="Binary",e instanceof Number?(this.sub_type=e,this.position=0):(this.sub_type=null==t?i:t,this.position=0),null!=e&&!(e instanceof Number)){if("string"!=typeof e)this.buffer=e;else if("undefined"!=typeof o)this.buffer=new o(e);else if("undefined"!=typeof Uint8Array||"[object Array]"==Object.prototype.toString.call(e))this.buffer=r(e);else throw new Error("only String, Buffer, Uint8Array or Array accepted");this.position=e.length}else this.buffer="undefined"==typeof o?"undefined"==typeof Uint8Array?Array(a.BUFFER_SIZE):new Uint8Array(new ArrayBuffer(a.BUFFER_SIZE)):new o(a.BUFFER_SIZE),this.position=0}if("undefined"!=typeof n)var o=e("buffer").Buffer;a.prototype.put=function(e){if(null!=e.length&&"number"!=typeof e&&1!=e.length)throw new Error("only accepts single character String, Uint8Array or Array");if("number"!=typeof e&&0>e||255<e)throw new Error("only accepts number in a valid unsigned byte range 0-255");var t=null;if(t="string"==typeof e?e.charCodeAt(0):null==e.length?e:e[0],this.buffer.length>this.position)this.buffer[this.position++]=t;else if("undefined"!=typeof o&&o.isBuffer(this.buffer)){var n=new o(a.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=t}else{var n=null;n="[object Uint8Array]"==Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(a.BUFFER_SIZE+this.buffer.length)):Array(a.BUFFER_SIZE+this.buffer.length);for(var r=0;r<this.buffer.length;r++)n[r]=this.buffer[r];this.buffer=n,this.buffer[this.position++]=t}},a.prototype.write=function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if("undefined"!=typeof o&&o.isBuffer(this.buffer))n=new o(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if("[object Uint8Array]"==Object.prototype.toString.call(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var a=0;a<this.position;a++)n[a]=this.buffer[a]}this.buffer=n}if("undefined"!=typeof o&&o.isBuffer(e)&&o.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if("undefined"!=typeof o&&"string"==typeof e&&o.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if("[object Uint8Array]"==Object.prototype.toString.call(e)||"[object Array]"==Object.prototype.toString.call(e)&&"string"!=typeof e){for(var a=0;a<e.length;a++)this.buffer[t++]=e[a];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var a=0;a<e.length;a++)this.buffer[t++]=e.charCodeAt(a);this.position=t>this.position?t:this.position}},a.prototype.read=function(e,t){if(t=t&&0<t?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var n="undefined"==typeof Uint8Array?Array(t):new Uint8Array(new ArrayBuffer(t)),a=0;a<t;a++)n[a]=this.buffer[e++];return n},a.prototype.value=function(e){if(e=null!=e&&e,e&&"undefined"!=typeof o&&o.isBuffer(this.buffer)&&this.buffer.length==this.position)return this.buffer;if("undefined"!=typeof o&&o.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t="[object Uint8Array]"==Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return l(this.buffer,0,this.position)},a.prototype.length=function(){return this.position},a.prototype.toJSON=function(){return null==this.buffer?"":this.buffer.toString("base64")},a.prototype.toString=function(e){return null==this.buffer?"":this.buffer.slice(0,this.position).toString(e)};var i=0,r=function(e){for(var t="undefined"==typeof Uint8Array?Array(e.length):new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},l=function(e,t,n){for(var a="",o=t;o<n;o++)a+=d(e[o]);return a};a.BUFFER_SIZE=256,a.SUBTYPE_DEFAULT=0,a.SUBTYPE_FUNCTION=1,a.SUBTYPE_BYTE_ARRAY=2,a.SUBTYPE_UUID_OLD=3,a.SUBTYPE_UUID=4,a.SUBTYPE_MD5=5,a.SUBTYPE_USER_DEFINED=128,t.exports=a,t.exports.Binary=a}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{buffer:39}],21:[function(e,t){(function(n){"use strict";var a=e("./float_parser").writeIEEE754,i=e("./float_parser").readIEEE754,o=e("./map"),r=e("./long"),l=e("./double"),s=e("./timestamp"),d=e("./objectid"),p=e("./regexp"),c=e("./symbol"),u=e("./int_32"),f=e("./code"),m=e("./decimal128"),g=e("./min_key"),_=e("./max_key"),y=e("./db_ref"),h=e("./binary"),b=e("./parser/deserializer"),x=e("./parser/serializer"),v=e("./parser/calculate_size"),S=new n(17825792),T=function(){};T.prototype.serialize=function(e,t){t=t||{};var a="boolean"==typeof t.checkKeys&&t.checkKeys,i="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,o="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,r=x(S,e,a,0,0,i,o,[]),l=new n(r);return S.copy(l,0,0,l.length),l},T.prototype.serializeWithBufferAndIndex=function(e,t,n){n=n||{};var a="boolean"==typeof n.checkKeys&&n.checkKeys,i="boolean"==typeof n.serializeFunctions&&n.serializeFunctions,o="boolean"!=typeof n.ignoreUndefined||n.ignoreUndefined,r="number"==typeof n.index?n.index:0,l=x(S,e,a,r||0,0,i,o);return S.copy(t,r,0,l),l-1},T.prototype.deserialize=function(e,t){return b(e,t)},T.prototype.calculateObjectSize=function(e,t){t=t||{};var n=!("boolean"!=typeof t.serializeFunctions)&&t.serializeFunctions,a="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return v(e,n,a)},T.prototype.deserializeStream=function(e,t,n,a,o,r){r=null==r?{}:r;for(var l=t,s=0,i;s<n;s++)i=e[l]|e[l+1]<<8|e[l+2]<<16|e[l+3]<<24,r.index=l,a[o+s]=this.deserialize(e,r),l+=i;return l},T.BSON_INT32_MAX=2147483647,T.BSON_INT32_MIN=-2147483648,T.BSON_INT64_MAX=9223372036854776000,T.BSON_INT64_MIN=-9223372036854776000,T.JS_INT_MAX=9007199254740992,T.JS_INT_MIN=-9007199254740992;var k=r.fromNumber(9007199254740992),E=r.fromNumber(-9007199254740992);T.BSON_DATA_NUMBER=1,T.BSON_DATA_STRING=2,T.BSON_DATA_OBJECT=3,T.BSON_DATA_ARRAY=4,T.BSON_DATA_BINARY=5,T.BSON_DATA_OID=7,T.BSON_DATA_BOOLEAN=8,T.BSON_DATA_DATE=9,T.BSON_DATA_NULL=10,T.BSON_DATA_REGEXP=11,T.BSON_DATA_CODE=13,T.BSON_DATA_SYMBOL=14,T.BSON_DATA_CODE_W_SCOPE=15,T.BSON_DATA_INT=16,T.BSON_DATA_TIMESTAMP=17,T.BSON_DATA_LONG=18,T.BSON_DATA_MIN_KEY=255,T.BSON_DATA_MAX_KEY=127,T.BSON_BINARY_SUBTYPE_DEFAULT=0,T.BSON_BINARY_SUBTYPE_FUNCTION=1,T.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,T.BSON_BINARY_SUBTYPE_UUID=3,T.BSON_BINARY_SUBTYPE_MD5=4,T.BSON_BINARY_SUBTYPE_USER_DEFINED=128,t.exports=T,t.exports.Code=f,t.exports.Map=o,t.exports.Symbol=c,t.exports.BSON=T,t.exports.DBRef=y,t.exports.Binary=h,t.exports.ObjectID=d,t.exports.Long=r,t.exports.Timestamp=s,t.exports.Double=l,t.exports.Int32=u,t.exports.MinKey=g,t.exports.MaxKey=_,t.exports.BSONRegExp=p,t.exports.Decimal128=m}).call(this,e("buffer").Buffer)},{"./binary":20,"./code":22,"./db_ref":23,"./decimal128":24,"./double":25,"./float_parser":26,"./int_32":27,"./long":28,"./map":29,"./max_key":30,"./min_key":31,"./objectid":32,"./parser/calculate_size":33,"./parser/deserializer":34,"./parser/serializer":35,"./regexp":36,"./symbol":37,"./timestamp":38,buffer:39}],22:[function(e,t){var n=function e(t,n){return this instanceof e?void(this._bsontype="Code",this.code=t,this.scope=n):new e(t,n)};n.prototype.toJSON=function(){return{scope:this.scope,code:this.code}},t.exports=n,t.exports.Code=n},{}],23:[function(e,t){function n(e,t,a){return this instanceof n?void(this._bsontype="DBRef",this.namespace=e,this.oid=t,this.db=a):new n(e,t,a)}n.prototype.toJSON=function(){return{$ref:this.namespace,$id:this.oid,$db:null==this.db?"":this.db}},t.exports=n,t.exports.DBRef=n},{}],24:[function(e,t){(function(n){"use strict";var a=e("./long"),o=/^(\+|\-)?(\d+|(\d*\.\d*))?(E|e)?([\-\+])?(\d+)?$/,r=/^(\+|\-)?(Infinity|inf)$/i,l=/^(\+|\-)?NaN$/i,i=6111,s=-6176,d=6176,p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,124],c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,248],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,120],f=/^([\-\+])?(\d+)?$/,m=function(e){return!isNaN(parseInt(e,10))},g=function(e){var t=a.fromNumber(1000000000),n=a.fromNumber(0),o=0;if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:n};for(var o=0;3>=o;o++)n=n.shiftLeft(32),n=n.add(new a(e.parts[o],0)),e.parts[o]=n.div(t).low_,n=n.modulo(t);return{quotient:e,rem:n}},_=function(e,t){if(!e&&!t)return{high:a.fromNumber(0),low:a.fromNumber(0)};var n=e.shiftRightUnsigned(32),i=new a(e.getLowBits(),0),o=t.shiftRightUnsigned(32),r=new a(t.getLowBits(),0),l=n.multiply(o),s=n.multiply(r),d=i.multiply(o),p=i.multiply(r);return l=l.add(s.shiftRightUnsigned(32)),s=new a(s.getLowBits(),0).add(d).add(p.shiftRightUnsigned(32)),l=l.add(s.shiftRightUnsigned(32)),p=s.shiftLeft(32).add(new a(p.getLowBits(),0)),{high:l,low:p}},y=function(e,t){var n=e.high_>>>0,a=t.high_>>>0;if(n<a)return!0;if(n==a){var i=e.low_>>>0,o=t.low_>>>0;if(i<o)return!0}return!1},h=function(e){this._bsontype="Decimal128",this.bytes=e};h.fromString=function(e){var t=!1,g=!1,b=!1,x=0,v=0,S=0,T=0,k=0,E=[0],N=0,A=0,w=0,C=0,O=0,D=0,P=[0,0],R=[0,0],I=0,M=0;e=e.trim();var F=e.match(o),B=e.match(r),z=e.match(l);if(!F&&!B&&!z||0==e.length)throw new Error(""+e+" not a valid Decimal128 string");if(F&&F[4]&&void 0===F[2])throw new Error(""+e+" not a valid Decimal128 string");if(("+"==e[M]||"-"==e[M])&&(t="-"==e[M++]),!m(e[M])&&"."!=e[M]){if("i"==e[M]||"I"==e[M])return new h(new n(t?c:u));if("N"==e[M])return new h(new n(p))}for(;m(e[M])||"."==e[M];){if("."==e[M]){if(g)return new h(new n(p));g=!0,++M;continue}34>N&&("0"!=e[M]||b)&&(!b&&(k=v),b=!0,E[A++]=parseInt(e[M],10),++N),b&&++S,g&&++T,++v,++M}if(g&&!v)throw new Error(""+e+" not a valid Decimal128 string");if("e"==e[M]||"E"==e[M]){var j=e.substr(++M).match(f);if(!j||!j[2])return new h(new n(p));O=parseInt(j[0],10),M+=j[0].length}if(e[M])return new h(new n(p));if(w=0,!N)w=0,C=0,E[0]=0,S=1,N=1,x=0;else if(C=N-1,x=S,0!=O&&1!=x)for(;"0"==e[k+x-1];)--x;for(O<=T&&16384<T-O?O=s:O-=T;O>i;){if(++C,C-w>34){var U=E.join("");if(U.match(/^0+$/)){O=i;break}else return new h(new n(t?c:u))}--O}for(;O<s||N<S;){if(0==C){O=s,x=0;break}if(N<S?--S:--C,O<i)++O;else{var U=E.join("");if(U.match(/^0+$/)){O=i;break}else return new h(new n(t?c:u))}}if(C-w+1<x&&"0"!=e[x]){var $=v;g&&O==s&&(++k,++$);var W=parseInt(e[k+C+1],10),q=0;if(5<=W&&(q=1,5==W)){q=1==E[C]%2;for(var D=k+C+2;D<$;D++)if(parseInt(e[D],10)){q=1;break}}if(q)for(var H=C;0<=H&&!!(9<++E[H]);H--)if(E[H]=0,0==H)if(O<i)++O,E[H]=1;else return new h(new n(t?c:u))}if(P=a.fromNumber(0),R=a.fromNumber(0),0==x)P=a.fromNumber(0),R=a.fromNumber(0);else if(17>C-w){var H=w;for(R=a.fromNumber(E[H++]),P=new a(0,0);H<=C;H++)R=R.multiply(a.fromNumber(10)),R=R.add(a.fromNumber(E[H]))}else{var H=w;for(P=a.fromNumber(E[H++]);H<=C-17;H++)P=P.multiply(a.fromNumber(10)),P=P.add(a.fromNumber(E[H]));for(R=a.fromNumber(E[H++]);H<=C;H++)R=R.multiply(a.fromNumber(10)),R=R.add(a.fromNumber(E[H]))}var Y=_(P,a.fromString("100000000000000000"));Y.low=Y.low.add(R),y(Y.low,R)&&(Y.high=Y.high.add(a.fromNumber(1)));var I=O+d,V={low:a.fromNumber(0),high:a.fromNumber(0)};Y.high.shiftRightUnsigned(49).and(a.fromNumber(1)).equals(a.fromNumber)?(V.high=V.high.or(a.fromNumber(3).shiftLeft(61)),V.high=V.high.or(a.fromNumber(I).and(a.fromNumber(16383).shiftLeft(47))),V.high=V.high.or(Y.high.and(a.fromNumber(0x7fffffffffff)))):(V.high=V.high.or(a.fromNumber(16383&I).shiftLeft(49)),V.high=V.high.or(Y.high.and(a.fromNumber(562949953421311)))),V.low=Y.low,t&&(V.high=V.high.or(a.fromString("9223372036854775808")));var G=new n(16),M=0;return G[M++]=255&V.low.low_,G[M++]=255&V.low.low_>>8,G[M++]=255&V.low.low_>>16,G[M++]=255&V.low.low_>>24,G[M++]=255&V.low.high_,G[M++]=255&V.low.high_>>8,G[M++]=255&V.low.high_>>16,G[M++]=255&V.low.high_>>24,G[M++]=255&V.high.low_,G[M++]=255&V.high.low_>>8,G[M++]=255&V.high.low_>>16,G[M++]=255&V.high.low_>>24,G[M++]=255&V.high.high_,G[M++]=255&V.high.high_>>8,G[M++]=255&V.high.high_>>16,G[M++]=255&V.high.high_>>24,new h(G)};var b=16383,d=6176;h.prototype.toString=function(){for(var e=0,t=Array(36),n=0,i,o,r,l,s,p;n<t.length;n++)t[n]=0;var c=0,u=!1,f={parts:[,,,,]},m=[],c=0,_=this.bytes,y,h,x,n,v,S;l=_[c++]|_[c++]<<8|_[c++]<<16|_[c++]<<24,r=_[c++]|_[c++]<<8|_[c++]<<16|_[c++]<<24,o=_[c++]|_[c++]<<8|_[c++]<<16|_[c++]<<24,i=_[c++]|_[c++]<<8|_[c++]<<16|_[c++]<<24;var c=0,T={low:new a(l,r),high:new a(o,i)};if(T.high.lessThan(a.ZERO)&&m.push("-"),s=i>>26&31,3==s>>3){if(s==30)return m.join("")+"Infinity";if(s==31)return"NaN";p=i>>15&b,x=8+(1&i>>14)}else x=7&i>>14,p=i>>17&b;if(y=p-d,f.parts[0]=(16383&i)+((15&x)<<14),f.parts[1]=o,f.parts[2]=r,f.parts[3]=l,0==f.parts[0]&&0==f.parts[1]&&0==f.parts[2]&&0==f.parts[3])u=!0;else for(var S=3;0<=S;S--){var k=0,A=g(f);if(f=A.quotient,k=A.rem.low_,k)for(var v=8;0<=v;v--)t[9*S+v]=k%10,k=E(k/10)}if(u)e=1,t[c]=0;else{e=36;for(var n=0;!t[c];)n++,--e,++c}if(h=e-1+y,34<=h||-7>=h||0<y){m.push(t[c++]),--e,e&&m.push(".");for(var n=0;n<e;n++)m.push(t[c++]);m.push("E"),0<h?m.push("+"+h):m.push(h)}else if(0<=y)for(var n=0;n<e;n++)m.push(t[c++]);else{var w=e+y;if(0<w)for(var n=0;n<w;n++)m.push(t[c++]);else m.push("0");for(m.push(".");0>w++;)m.push("0");for(var n=0;n<e-N(w-1,0);n++)m.push(t[c++])}return m.join("")},h.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.exports=h,t.exports.Decimal128=h}).call(this,e("buffer").Buffer)},{"./long":28,buffer:39}],25:[function(e,t){function n(e){return this instanceof n?void(this._bsontype="Double",this.value=e):new n(e)}n.prototype.valueOf=function(){return this.value},n.prototype.toJSON=function(){return this.value},t.exports=n,t.exports.Double=n},{}],26:[function(e,t,n){n.readIEEE754=function(t,n,a,o,r){var l="big"===a,p=8*r-o-1,c=(1<<p)-1,u=c>>1,f=-7,_=l?0:r-1,i=l?1:-1,d=t[n+_],s,e;for(_+=i,s=d&(1<<-f)-1,d>>=-f,f+=p;0<f;s=256*s+t[n+_],_+=i,f-=8);for(e=s&(1<<-f)-1,s>>=-f,f+=o;0<f;e=256*e+t[n+_],_+=i,f-=8);if(0===s)s=1-u;else{if(s===c)return e?NaN:(d?-1:1)*Infinity;e+=g(2,o),s-=u}return(d?-1:1)*e*g(2,s-o)},n.writeIEEE754=function(t,n,a,o,l,p){var u="big"===o,_=8*p-l-1,y=(1<<_)-1,h=y>>1,b=23===l?5.960464477539063e-8-6.617444900424222e-24:0,x=u?p-1:0,i=u?-1:1,d=0>n||0===n&&0>1/n?1:0,s,v,m;for(n=T(n),isNaN(n)||n===Infinity?(v=isNaN(n)?1:0,s=y):(s=E(f(n)/r),1>n*(m=g(2,-s))&&(s--,m*=2),n+=1<=s+h?b/m:b*g(2,1-h),2<=n*m&&(s++,m/=2),s+h>=y?(v=0,s=y):1<=s+h?(v=(n*m-1)*g(2,l),s+=h):(v=n*g(2,h-1)*g(2,l),s=0));8<=l;t[a+x]=255&v,x+=i,v/=256,l-=8);for(s=s<<l|v,_+=l;0<_;t[a+x]=255&s,x+=i,s/=256,_-=8);t[a+x-i]|=128*d}},{}],27:[function(e,t){var n=function(e){return this instanceof n?void(this._bsontype="Int32",this.value=e):new n(e)};n.prototype.valueOf=function(){return this.value},n.prototype.toJSON=function(){return this.value},t.exports=n,t.exports.Int32=n},{}],28:[function(e,t){//     http://www.apache.org/licenses/LICENSE-2.0
function n(e,t){return this instanceof n?void(this._bsontype="Long",this.low_=0|e,this.high_=0|t):new n(e,t)}n.prototype.toInt=function(){return this.low_},n.prototype.toNumber=function(){return this.high_*n.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},n.prototype.toJSON=function(){return this.toString()},n.prototype.toString=function(e){var t=e||10;if(2>t||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(n.MIN_VALUE)){var a=n.fromNumber(t),i=this.div(a),o=i.multiply(a).subtract(this);return i.toString(t)+o.toInt().toString(t)}return"-"+this.negate().toString(t)}for(var r=n.fromNumber(g(t,6)),o=this,l="";;){var s=o.div(r),d=o.subtract(s.multiply(r)).toInt(),p=d.toString(t);if(o=s,o.isZero())return p+l;for(;6>p.length;)p="0"+p;l=""+p+l}},n.prototype.getHighBits=function(){return this.high_},n.prototype.getLowBits=function(){return this.low_},n.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:n.TWO_PWR_32_DBL_+this.low_},n.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(n.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0==this.high_?this.low_:this.high_,t=31;0<t&&0==(e&1<<t);t--);return 0==this.high_?t+1:t+33},n.prototype.isZero=function(){return 0==this.high_&&0==this.low_},n.prototype.isNegative=function(){return 0>this.high_},n.prototype.isOdd=function(){return 1==(1&this.low_)},n.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},n.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},n.prototype.lessThan=function(e){return 0>this.compare(e)},n.prototype.lessThanOrEqual=function(e){return 0>=this.compare(e)},n.prototype.greaterThan=function(e){return 0<this.compare(e)},n.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},n.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.subtract(e).isNegative()?-1:1},n.prototype.negate=function(){return this.equals(n.MIN_VALUE)?n.MIN_VALUE:this.not().add(n.ONE)},n.prototype.add=function(e){var t=this.high_>>>16,a=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,r=e.high_>>>16,l=65535&e.high_,s=e.low_>>>16,d=65535&e.low_,p=0,c=0,u=0,f=0;return f+=o+d,u+=f>>>16,f&=65535,u+=i+s,c+=u>>>16,u&=65535,c+=a+l,p+=c>>>16,c&=65535,p+=t+r,p&=65535,n.fromBits(u<<16|f,p<<16|c)},n.prototype.subtract=function(e){return this.add(e.negate())},n.prototype.multiply=function(e){if(this.isZero())return n.ZERO;if(e.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE))return e.isOdd()?n.MIN_VALUE:n.ZERO;if(e.equals(n.MIN_VALUE))return this.isOdd()?n.MIN_VALUE:n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(n.TWO_PWR_24_)&&e.lessThan(n.TWO_PWR_24_))return n.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,a=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,r=e.high_>>>16,l=65535&e.high_,s=e.low_>>>16,d=65535&e.low_,p=0,c=0,u=0,f=0;return f+=o*d,u+=f>>>16,f&=65535,u+=i*d,c+=u>>>16,u&=65535,u+=o*s,c+=u>>>16,u&=65535,c+=a*d,p+=c>>>16,c&=65535,c+=i*s,p+=c>>>16,c&=65535,c+=o*l,p+=c>>>16,c&=65535,p+=t*d+a*s+i*l+o*r,p&=65535,n.fromBits(u<<16|f,p<<16|c)},n.prototype.div=function(e){if(e.isZero())throw Error("division by zero");else if(this.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE)){if(e.equals(n.ONE)||e.equals(n.NEG_ONE))return n.MIN_VALUE;if(e.equals(n.MIN_VALUE))return n.ONE;var t=this.shiftRight(1),a=t.div(e).shiftLeft(1);if(a.equals(n.ZERO))return e.isNegative()?n.ONE:n.NEG_ONE;var i=this.subtract(e.multiply(a)),o=a.add(i.div(e));return o}if(e.equals(n.MIN_VALUE))return n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(var l=n.ZERO,i=this;i.greaterThanOrEqual(e);){for(var a=N(1,E(i.toNumber()/e.toNumber())),s=p(f(a)/r),d=48>=s?1:g(2,s-48),c=n.fromNumber(a),u=c.multiply(e);u.isNegative()||u.greaterThan(i);)a-=d,c=n.fromNumber(a),u=c.multiply(e);c.isZero()&&(c=n.ONE),l=l.add(c),i=i.subtract(u)}return l},n.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},n.prototype.not=function(){return n.fromBits(~this.low_,~this.high_)},n.prototype.and=function(e){return n.fromBits(this.low_&e.low_,this.high_&e.high_)},n.prototype.or=function(e){return n.fromBits(this.low_|e.low_,this.high_|e.high_)},n.prototype.xor=function(e){return n.fromBits(this.low_^e.low_,this.high_^e.high_)},n.prototype.shiftLeft=function(e){if(e&=63,0==e)return this;var t=this.low_;if(32>e){var a=this.high_;return n.fromBits(t<<e,a<<e|t>>>32-e)}return n.fromBits(0,t<<e-32)},n.prototype.shiftRight=function(e){if(e&=63,0==e)return this;var t=this.high_;if(32>e){var a=this.low_;return n.fromBits(a>>>e|t<<32-e,t>>e)}return n.fromBits(t>>e-32,0<=t?0:-1)},n.prototype.shiftRightUnsigned=function(e){if(e&=63,0==e)return this;var t=this.high_;if(32>e){var a=this.low_;return n.fromBits(a>>>e|t<<32-e,t>>>e)}return 32==e?n.fromBits(t,0):n.fromBits(t>>>e-32,0)},n.fromInt=function(e){if(-128<=e&&128>e){var t=n.INT_CACHE_[e];if(t)return t}var a=new n(0|e,0>e?-1:0);return-128<=e&&128>e&&(n.INT_CACHE_[e]=a),a},n.fromNumber=function(e){return isNaN(e)||!isFinite(e)?n.ZERO:e<=-n.TWO_PWR_63_DBL_?n.MIN_VALUE:e+1>=n.TWO_PWR_63_DBL_?n.MAX_VALUE:0>e?n.fromNumber(-e).negate():new n(0|e%n.TWO_PWR_32_DBL_,0|e/n.TWO_PWR_32_DBL_)},n.fromBits=function(e,t){return new n(e,t)},n.fromString=function(e,t){if(0==e.length)throw Error("number format error: empty string");var a=t||10;if(2>a||36<a)throw Error("radix out of range: "+a);if("-"==e.charAt(0))return n.fromString(e.substring(1),a).negate();if(0<=e.indexOf("-"))throw Error("number format error: interior \"-\" character: "+e);for(var o=n.fromNumber(g(a,8)),r=n.ZERO,l=0;l<e.length;l+=8){var i=S(8,e.length-l),s=parseInt(e.substring(l,l+i),a);if(8>i){var d=n.fromNumber(g(a,i));r=r.multiply(d).add(n.fromNumber(s))}else r=r.multiply(o),r=r.add(n.fromNumber(s))}return r},n.INT_CACHE_={},n.TWO_PWR_16_DBL_=65536,n.TWO_PWR_24_DBL_=16777216,n.TWO_PWR_32_DBL_=n.TWO_PWR_16_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_31_DBL_=n.TWO_PWR_32_DBL_/2,n.TWO_PWR_48_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_64_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_32_DBL_,n.TWO_PWR_63_DBL_=n.TWO_PWR_64_DBL_/2,n.ZERO=n.fromInt(0),n.ONE=n.fromInt(1),n.NEG_ONE=n.fromInt(-1),n.MAX_VALUE=n.fromBits(-1,2147483647),n.MIN_VALUE=n.fromBits(0,-2147483648),n.TWO_PWR_24_=n.fromInt(16777216),t.exports=n,t.exports.Long=n},{}],29:[function(e,t){(function(e){"use strict";if("undefined"!=typeof e.Map)t.exports=e.Map,t.exports.Map=e.Map;else{var n=function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var n=e[t],a=n[0],i=n[1];this._keys.push(a),this._values[a]={v:i,i:this._keys.length-1}}};n.prototype.clear=function(){this._keys=[],this._values={}},n.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},n.prototype.entries=function(){var e=this,t=0;return{next:function(){var n=e._keys[t++];return{value:n===void 0?void 0:[n,e._values[n].v],done:!(n!==void 0)}}}},n.prototype.forEach=function(e,t){t=t||this;for(var n=0,a;n<this._keys.length;n++)a=this._keys[n],e.call(t,this._values[a].v,a,t)},n.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},n.prototype.has=function(e){return null!=this._values[e]},n.prototype.keys=function(){var e=this,t=0;return{next:function(){var n=e._keys[t++];return{value:n===void 0?void 0:n,done:!(n!==void 0)}}}},n.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},n.prototype.values=function(){var e=this,t=0;return{next:function(){var n=e._keys[t++];return{value:n===void 0?void 0:e._values[n].v,done:!(n!==void 0)}}}},Object.defineProperty(n.prototype,"size",{enumerable:!0,get:function(){return this._keys.length}}),t.exports=n,t.exports.Map=n}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],30:[function(e,t){function n(){return this instanceof n?void(this._bsontype="MaxKey"):new n}t.exports=n,t.exports.MaxKey=n},{}],31:[function(e,t){function n(){return this instanceof n?void(this._bsontype="MinKey"):new n}t.exports=n,t.exports.MinKey=n},{}],32:[function(e,t){(function(e,a){var n=parseInt(16777215*Math.random(),10),o=/^[0-9a-fA-F]{24}$/,r=!1;try{a&&a.from&&(r=!0)}catch(e){}for(var l=function e(t){if(t instanceof e)return t;if(!(this instanceof e))return new e(t);if(this._bsontype="ObjectID",null==t||"number"==typeof t)return this.id=this.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var n=e.isValid(t);if(!n&&null!=t)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");else{if(n&&"string"==typeof t&&24==t.length&&r)return new e(new a(t,"hex"));if(n&&"string"==typeof t&&24==t.length)return e.createFromHexString(t);if(null!=t&&12===t.length)this.id=t;else{if(null!=t&&t.toHexString)return t;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}}e.cacheHexString&&(this.__id=this.toString("hex"))},s=[],d=0;256>d;d++)s[d]=(15>=d?"0":"")+d.toString(16);l.prototype.toHexString=function(){if(l.cacheHexString&&this.__id)return this.__id;var e="";if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof c)return e=u(this.id),l.cacheHexString&&(this.__id=e),e;for(var t=0;t<this.id.length;t++)e+=s[this.id.charCodeAt(t)];return l.cacheHexString&&(this.__id=e),e},l.prototype.get_inc=function(){return l.index=(l.index+1)%16777215},l.prototype.getInc=function(){return this.get_inc()},l.prototype.generate=function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var i=("undefined"==typeof e?E(1e5*Math.random()):e.pid)%65535,o=this.get_inc(),r=new a(12);return r[3]=255&t,r[2]=255&t>>8,r[1]=255&t>>16,r[0]=255&t>>24,r[6]=255&n,r[5]=255&n>>8,r[4]=255&n>>16,r[8]=255&i,r[7]=255&i>>8,r[11]=255&o,r[10]=255&o>>8,r[9]=255&o>>16,r},l.prototype.toString=function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()},l.prototype.inspect=l.prototype.toString,l.prototype.toJSON=function(){return this.toHexString()},l.prototype.equals=function(e){return e instanceof l?this.toString()==e.toString():"string"==typeof e&&l.isValid(e)&&12==e.length&&this.id instanceof c?e===this.id.toString("binary"):"string"==typeof e&&l.isValid(e)&&24==e.length?e.toLowerCase()===this.toHexString():"string"==typeof e&&l.isValid(e)&&12==e.length?e===this.id:null!=e&&(e instanceof l||e.toHexString)&&e.toHexString()===this.toHexString()},l.prototype.getTimestamp=function(){var e=new Date,t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return e.setTime(1e3*E(t)),e},l.index=~~(16777215*Math.random()),l.createPk=function(){return new l},l.createFromTime=function(e){var t=new a([0,0,0,0,0,0,0,0,0,0,0,0]);return t[3]=255&e,t[2]=255&e>>8,t[1]=255&e>>16,t[0]=255&e>>24,new l(t)};for(var p=[],d=0;10>d;)p[48+d]=d++;for(;16>d;)p[55+d]=p[87+d]=d++;var c=a,u=function(e){return e.toString("hex")};l.createFromHexString=function(e){if("undefined"==typeof e||null!=e&&24!=e.length)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(r)return new l(new a(e,"hex"));for(var t=new c(12),o=0,n=0;24>n;)t[o++]=p[e.charCodeAt(n++)]<<4|p[e.charCodeAt(n++)];return new l(t)},l.isValid=function(e){return null!=e&&(!("number"!=typeof e)||("string"==typeof e?12==e.length||24==e.length&&o.test(e):!!(e instanceof l)||!!(e instanceof c)||!!e.toHexString&&(12==e.id.length||24==e.id.length&&o.test(e.id))))},Object.defineProperty(l.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=255&e>>8,this.id[1]=255&e>>16,this.id[0]=255&e>>24}}),t.exports=l,t.exports.ObjectID=l,t.exports.ObjectId=l}).call(this,e("_process"),e("buffer").Buffer)},{_process:153,buffer:39}],33:[function(e,t){(function(n){"use strict";function a(e,t,a,i,o){switch(t&&t.toBSON&&(t=t.toBSON()),typeof t){case"string":return 1+n.byteLength(e,"utf8")+1+4+n.byteLength(t,"utf8")+1;case"number":return E(t)===t&&t>=x.JS_INT_MIN&&t<=x.JS_INT_MAX?t>=x.BSON_INT32_MIN&&t<=x.BSON_INT32_MAX?(null==e?0:n.byteLength(e,"utf8")+1)+5:(null==e?0:n.byteLength(e,"utf8")+1)+9:(null==e?0:n.byteLength(e,"utf8")+1)+9;case"undefined":return i||!o?(null==e?0:n.byteLength(e,"utf8")+1)+1:0;case"boolean":return(null==e?0:n.byteLength(e,"utf8")+1)+2;case"object":if(null==t||t instanceof m||t instanceof g||"MinKey"==t._bsontype||"MaxKey"==t._bsontype)return(null==e?0:n.byteLength(e,"utf8")+1)+1;if(t instanceof d||"ObjectID"==t._bsontype)return(null==e?0:n.byteLength(e,"utf8")+1)+13;if(t instanceof Date||h(t))return(null==e?0:n.byteLength(e,"utf8")+1)+9;if("undefined"!=typeof n&&n.isBuffer(t))return(null==e?0:n.byteLength(e,"utf8")+1)+6+t.length;if(t instanceof r||t instanceof l||t instanceof s||"Long"==t._bsontype||"Double"==t._bsontype||"Timestamp"==t._bsontype)return(null==e?0:n.byteLength(e,"utf8")+1)+9;if(t instanceof f||"Decimal128"==t._bsontype)return(null==e?0:n.byteLength(e,"utf8")+1)+17;if(t instanceof u||"Code"==t._bsontype)return null!=t.scope&&0<Object.keys(t.scope).length?(null==e?0:n.byteLength(e,"utf8")+1)+1+4+4+n.byteLength(t.code.toString(),"utf8")+1+b(t.scope,a,o):(null==e?0:n.byteLength(e,"utf8")+1)+1+4+n.byteLength(t.code.toString(),"utf8")+1;if(t instanceof y||"Binary"==t._bsontype)return t.sub_type==y.SUBTYPE_BYTE_ARRAY?(null==e?0:n.byteLength(e,"utf8")+1)+(t.position+1+4+1+4):(null==e?0:n.byteLength(e,"utf8")+1)+(t.position+1+4+1);if(t instanceof p||"Symbol"==t._bsontype)return(null==e?0:n.byteLength(e,"utf8")+1)+n.byteLength(t.value,"utf8")+4+1+1;if(t instanceof _||"DBRef"==t._bsontype){var v={$ref:t.namespace,$id:t.oid};return null!=t.db&&(v.$db=t.db),(null==e?0:n.byteLength(e,"utf8")+1)+1+b(v,a,o)}return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)?(null==e?0:n.byteLength(e,"utf8")+1)+1+n.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:t instanceof c||"BSONRegExp"==t._bsontype?(null==e?0:n.byteLength(e,"utf8")+1)+1+n.byteLength(t.pattern,"utf8")+1+n.byteLength(t.options,"utf8")+1:(null==e?0:n.byteLength(e,"utf8")+1)+b(t,a,o)+1;case"function":if(t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)||"[object RegExp]"==String.call(t))return(null==e?0:n.byteLength(e,"utf8")+1)+1+n.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(a&&null!=t.scope&&0<Object.keys(t.scope).length)return(null==e?0:n.byteLength(e,"utf8")+1)+1+4+4+n.byteLength(t.toString(),"utf8")+1+b(t.scope,a,o);if(a)return(null==e?0:n.byteLength(e,"utf8")+1)+1+4+n.byteLength(t.toString(),"utf8")+1;}return 0}var i=e("../float_parser").writeIEEE754,o=e("../float_parser").readIEEE754,r=e("../long").Long,l=e("../double").Double,s=e("../timestamp").Timestamp,d=e("../objectid").ObjectID,p=e("../symbol").Symbol,c=e("../regexp").BSONRegExp,u=e("../code").Code,f=e("../decimal128"),m=e("../min_key").MinKey,g=e("../max_key").MaxKey,_=e("../db_ref").DBRef,y=e("../binary").Binary,h=function(e){return"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)},b=function(e,t,n){var o=5;if(Array.isArray(e))for(var r=0;r<e.length;r++)o+=a(r.toString(),e[r],t,!0,n);else for(var i in e.toBSON&&(e=e.toBSON()),e)o+=a(i,e[i],t,!1,n);return o},x={};x.BSON_INT32_MAX=2147483647,x.BSON_INT32_MIN=-2147483648,x.JS_INT_MAX=9007199254740992,x.JS_INT_MIN=-9007199254740992,t.exports=b}).call(this,e("buffer").Buffer)},{"../binary":20,"../code":22,"../db_ref":23,"../decimal128":24,"../double":25,"../float_parser":26,"../long":28,"../max_key":30,"../min_key":31,"../objectid":32,"../regexp":36,"../symbol":37,"../timestamp":38,buffer:39}],34:[function(e,t,n){(function(n){"use strict";var a=e("../float_parser").readIEEE754,i=e("util").format,o=e("../long").Long,r=e("../double").Double,l=e("../timestamp").Timestamp,s=e("../objectid").ObjectID,d=e("../symbol").Symbol,p=e("../code").Code,c=e("../min_key").MinKey,u=e("../max_key").MaxKey,f=e("../decimal128"),m=e("../int_32"),g=e("../db_ref").DBRef,_=e("../regexp").BSONRegExp,y=e("../binary").Binary,h=function(e,t,n){t=null==t?{}:t;var a=t&&t.index?t.index:0,i=e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]<<24;if(5>i||e.length<i||i+a>e.length)throw new Error("corrupt bson message");if(0!=e[a+i-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return b(e,a,t,n)},b=function(e,t,a,h){var N=null!=a.evalFunctions&&a.evalFunctions,A=null!=a.cacheFunctions&&a.cacheFunctions,w=null!=a.cacheFunctionsCrc32&&a.cacheFunctionsCrc32,C=null==a.fieldsAsRaw?null:a.fieldsAsRaw,O=null!=a.raw&&a.raw,D="boolean"==typeof a.bsonRegExp&&a.bsonRegExp,P=null!=a.promoteBuffers&&a.promoteBuffers,R=null==a.promoteLongs||a.promoteLongs,I=null==a.promoteValues||a.promoteValues,M=t;if(5>e.length)throw new Error("corrupt bson message < 5 bytes long");var F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(5>F||F>e.length)throw new Error("corrupt bson message");for(var B=h?[]:{},z=0,j;j=e[t++],0!=j;){for(var U=t;0!==e[U]&&U<e.length;)U++;if(U>=e.length)throw new Error("Bad BSON Document: illegal CString");var i=h?z++:e.toString("utf8",t,U);if(t=U+1,j==S.BSON_DATA_STRING){var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(0>=$||$>e.length-t||0!=e[t+$-1])throw new Error("bad string length in bson");B[i]=e.toString("utf8",t,t+$-1),t+=$}else if(j==S.BSON_DATA_OID){var W=new n(12);e.copy(W,0,t,t+12),B[i]=new s(W),t+=12}else if(j==S.BSON_DATA_INT&&!1==I)B[i]=new m(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(j==S.BSON_DATA_INT)B[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(j==S.BSON_DATA_NUMBER&&!1==I)B[i]=new r(e.readDoubleLE(t)),t+=8;else if(j==S.BSON_DATA_NUMBER)B[i]=e.readDoubleLE(t),t+=8;else if(j==S.BSON_DATA_DATE){var q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,H=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;B[i]=new Date(new o(q,H).toNumber())}else if(j==S.BSON_DATA_BOOLEAN){if(0!=e[t]&&1!=e[t])throw new Error("illegal boolean type value");B[i]=1==e[t++]}else if(j==S.BSON_DATA_OBJECT){var Y=t,V=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(0>=V||V>e.length-t)throw new Error("bad embedded document length in bson");B[i]=O?e.slice(t,t+V):b(e,Y,a,!1),t+=V}else if(j==S.BSON_DATA_ARRAY){var Y=t,V=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,G=a,Z=t+V;if(C&&C[i]){for(var X in G={},a)G[X]=a[X];G.raw=!0}if(B[i]=b(e,Y,G,!0),t+=V,0!=e[t-1])throw new Error("invalid array terminator byte");if(t!=Z)throw new Error("corrupted array bson")}else if(j==S.BSON_DATA_UNDEFINED)B[i]=void 0;else if(j==S.BSON_DATA_NULL)B[i]=null;else if(j==S.BSON_DATA_LONG){var q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,H=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,K=new o(q,H);B[i]=R&&!0==I?K.lessThanOrEqual(k)&&K.greaterThanOrEqual(E)?K.toNumber():K:K}else if(j==S.BSON_DATA_DECIMAL128){var J=new n(16);e.copy(J,0,t,t+16),t+=16;var Q=new f(J);B[i]=Q.toObject?Q.toObject():Q}else if(j==S.BSON_DATA_BINARY){var ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,te=ee,ne=e[t++];if(0>ee)throw new Error("Negative binary type element size found");if(ee>e.length)throw new Error("Binary type size larger than document size");if(null!=e.slice){if(ne==y.SUBTYPE_BYTE_ARRAY){if(ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,0>ee)throw new Error("Negative binary type element size found for subtype 0x02");if(ee>te-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(ee<te-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}B[i]=P&&I?e.slice(t,t+ee):new y(e.slice(t,t+ee),ne)}else{var ae="undefined"==typeof Uint8Array?Array(ee):new Uint8Array(new ArrayBuffer(ee));if(ne==y.SUBTYPE_BYTE_ARRAY){if(ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,0>ee)throw new Error("Negative binary type element size found for subtype 0x02");if(ee>te-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(ee<te-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(var U=0;U<ee;U++)ae[U]=e[t+U];B[i]=P&&I?ae:new y(ae,ne)}t+=ee}else if(j==S.BSON_DATA_REGEXP&&!1==D){for(var U=t;0!==e[U]&&U<e.length;)U++;if(U>=e.length)throw new Error("Bad BSON Document: illegal CString");var ie=e.toString("utf8",t,U);t=U+1;for(var U=t;0!==e[U]&&U<e.length;)U++;if(U>=e.length)throw new Error("Bad BSON Document: illegal CString");var oe=e.toString("utf8",t,U);t=U+1;for(var re=Array(oe.length),U=0;U<oe.length;U++)switch(oe[U]){case"m":re[U]="m";break;case"s":re[U]="g";break;case"i":re[U]="i";}B[i]=new RegExp(ie,re.join(""))}else if(j==S.BSON_DATA_REGEXP&&!0==D){for(var U=t;0!==e[U]&&U<e.length;)U++;if(U>=e.length)throw new Error("Bad BSON Document: illegal CString");var ie=e.toString("utf8",t,U);t=U+1;for(var U=t;0!==e[U]&&U<e.length;)U++;if(U>=e.length)throw new Error("Bad BSON Document: illegal CString");var oe=e.toString("utf8",t,U);t=U+1,B[i]=new _(ie,oe)}else if(j==S.BSON_DATA_SYMBOL){var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(0>=$||$>e.length-t||0!=e[t+$-1])throw new Error("bad string length in bson");B[i]=new d(e.toString("utf8",t,t+$-1)),t+=$}else if(j==S.BSON_DATA_TIMESTAMP){var q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,H=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;B[i]=new l(q,H)}else if(j==S.BSON_DATA_MIN_KEY)B[i]=new c;else if(j==S.BSON_DATA_MAX_KEY)B[i]=new u;else if(j==S.BSON_DATA_CODE){var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(0>=$||$>e.length-t||0!=e[t+$-1])throw new Error("bad string length in bson");var le=e.toString("utf8",t,t+$-1);if(N){var se=null;if(A){var de=w?crc32(le):le;B[i]=x(T,de,le,B)}else B[i]=v(le)}else B[i]=new p(le);t+=$}else if(j==S.BSON_DATA_CODE_W_SCOPE){var pe=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(13>pe)throw new Error("code_w_scope total size shorter minimum expected length");var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(0>=$||$>e.length-t||0!=e[t+$-1])throw new Error("bad string length in bson");var le=e.toString("utf8",t,t+$-1);t+=$;var Y=t,V=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,ce=b(e,Y,a,!1);if(t+=V,pe<8+V+$)throw new Error("code_w_scope total size is to short, truncating scope");if(pe>8+V+$)throw new Error("code_w_scope total size is to long, clips outer document");if(N){var se=null;if(A){var de=w?crc32(le):le;B[i]=x(T,de,le,B)}else B[i]=v(le);B[i].scope=ce}else B[i]=new p(le,ce)}else if(j==S.BSON_DATA_DBPOINTER){var $=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(0>=$||$>e.length-t||0!=e[t+$-1])throw new Error("bad string length in bson");var ue=e.toString("utf8",t,t+$-1);t+=$;var fe=new n(12);e.copy(fe,0,t,t+12);var W=new s(fe);t+=12;var me=ue.split("."),ge=me.shift(),_e=me.join(".");B[i]=new g(_e,W,ge)}else throw new Error("Detected unknown BSON type "+j.toString(16)+" for fieldname \""+i+"\", are you using the latest BSON parser")}if(F!=t-M){if(h)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}return null!=B.$id&&(B=new g(B.$ref,B.$id,B.$db)),B},x=function(e,t,n,a){var i=null;return null==e[t]&&(eval("value = "+n),e[t]=i),e[t].bind(a)},v=function(e){var t=null;return eval("value = "+e),t},S={},T=S.functionCache={};S.BSON_DATA_NUMBER=1,S.BSON_DATA_STRING=2,S.BSON_DATA_OBJECT=3,S.BSON_DATA_ARRAY=4,S.BSON_DATA_BINARY=5,S.BSON_DATA_UNDEFINED=6,S.BSON_DATA_OID=7,S.BSON_DATA_BOOLEAN=8,S.BSON_DATA_DATE=9,S.BSON_DATA_NULL=10,S.BSON_DATA_REGEXP=11,S.BSON_DATA_DBPOINTER=12,S.BSON_DATA_CODE=13,S.BSON_DATA_SYMBOL=14,S.BSON_DATA_CODE_W_SCOPE=15,S.BSON_DATA_INT=16,S.BSON_DATA_TIMESTAMP=17,S.BSON_DATA_LONG=18,S.BSON_DATA_DECIMAL128=19,S.BSON_DATA_MIN_KEY=255,S.BSON_DATA_MAX_KEY=127,S.BSON_BINARY_SUBTYPE_DEFAULT=0,S.BSON_BINARY_SUBTYPE_FUNCTION=1,S.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,S.BSON_BINARY_SUBTYPE_UUID=3,S.BSON_BINARY_SUBTYPE_MD5=4,S.BSON_BINARY_SUBTYPE_USER_DEFINED=128,S.BSON_INT32_MAX=2147483647,S.BSON_INT32_MIN=-2147483648,S.BSON_INT64_MAX=9223372036854776000,S.BSON_INT64_MIN=-9223372036854776000,S.JS_INT_MAX=9007199254740992,S.JS_INT_MIN=-9007199254740992;var k=o.fromNumber(9007199254740992),E=o.fromNumber(-9007199254740992);t.exports=h}).call(this,e("buffer").Buffer)},{"../binary":20,"../code":22,"../db_ref":23,"../decimal128":24,"../double":25,"../float_parser":26,"../int_32":27,"../long":28,"../max_key":30,"../min_key":31,"../objectid":32,"../regexp":36,"../symbol":37,"../timestamp":38,buffer:39,util:468}],35:[function(e,t){(function(n){"use strict";var a=e("../float_parser").writeIEEE754,i=e("../float_parser").readIEEE754,o=e("../long").Long,r=e("../map"),l=e("../double").Double,s=e("../timestamp").Timestamp,d=e("../objectid").ObjectID,p=e("../symbol").Symbol,c=e("../code").Code,u=e("../regexp").BSONRegExp,f=e("../int_32").Int32,m=e("../min_key").MinKey,g=e("../max_key").MaxKey,_=e("../decimal128"),y=e("../db_ref").DBRef,h=e("../binary").Binary;try{var b=Uint8Array}catch(t){var b=n}var x=/\x00/,v=function(e){return"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)},S=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},T=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_STRING;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a=a+o+1,e[a-1]=0;var r=e.write(n,a+4,"utf8");return e[a+3]=255&r+1>>24,e[a+2]=255&r+1>>16,e[a+1]=255&r+1>>8,e[a]=255&r+1,a=a+4+r,e[a++]=0,a},k=function(e,t,n,i,r){if(!(E(n)===n&&n>=Y.JS_INT_MIN&&n<=Y.JS_INT_MAX)){e[i++]=Y.BSON_DATA_NUMBER;var l=r?e.write(t,i,"ascii"):e.write(t,i,"utf8");i+=l,e[i++]=0,a(e,n,i,"little",52,8),i+=8}else if(n>=Y.BSON_INT32_MIN&&n<=Y.BSON_INT32_MAX){e[i++]=Y.BSON_DATA_INT;var l=r?e.write(t,i,"ascii"):e.write(t,i,"utf8");i+=l,e[i++]=0,e[i++]=255&n,e[i++]=255&n>>8,e[i++]=255&n>>16,e[i++]=255&n>>24}else if(n>=Y.JS_INT_MIN&&n<=Y.JS_INT_MAX){e[i++]=Y.BSON_DATA_NUMBER;var l=r?e.write(t,i,"ascii"):e.write(t,i,"utf8");i+=l,e[i++]=0,a(e,n,i,"little",52,8),i+=8}else{e[i++]=Y.BSON_DATA_LONG;var l=r?e.write(t,i,"ascii"):e.write(t,i,"utf8");i+=l,e[i++]=0;var s=o.fromNumber(n),d=s.getLowBits(),p=s.getHighBits();e[i++]=255&d,e[i++]=255&d>>8,e[i++]=255&d>>16,e[i++]=255&d>>24,e[i++]=255&p,e[i++]=255&p>>8,e[i++]=255&p>>16,e[i++]=255&p>>24}return i},N=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_NULL;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");return a+=o,e[a++]=0,a},A=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_BOOLEAN;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");return a+=o,e[a++]=0,e[a++]=n?1:0,a},w=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_DATE;var r=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=r,e[a++]=0;var l=o.fromNumber(n.getTime()),s=l.getLowBits(),d=l.getHighBits();return e[a++]=255&s,e[a++]=255&s>>8,e[a++]=255&s>>16,e[a++]=255&s>>24,e[a++]=255&d,e[a++]=255&d>>8,e[a++]=255&d>>16,e[a++]=255&d>>24,a},C=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_REGEXP;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");if(a+=o,e[a++]=0,n.source&&null!=n.source.match(x))throw Error("value "+n.source+" must not contain null bytes");return a+=e.write(n.source,a,"utf8"),e[a++]=0,n.global&&(e[a++]=115),n.ignoreCase&&(e[a++]=105),n.multiline&&(e[a++]=109),e[a++]=0,a},O=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_REGEXP;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");if(a+=o,e[a++]=0,null!=n.pattern.match(x))throw Error("pattern "+n.pattern+" must not contain null bytes");return a+=e.write(n.pattern,a,"utf8"),e[a++]=0,a+=e.write(n.options.split("").sort().join(""),a,"utf8"),e[a++]=0,a},D=function(e,t,n,a,i){e[a++]=null===n?Y.BSON_DATA_NULL:n instanceof m?Y.BSON_DATA_MIN_KEY:Y.BSON_DATA_MAX_KEY;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");return a+=o,e[a++]=0,a},P=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_OID;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");if(a+=o,e[a++]=0,"string"==typeof n.id)e.write(n.id,a,"binary");else if(n.id&&n.id.copy)n.id.copy(e,a,0,12);else throw new Error("object ["+JSON.stringify(n)+"] is not a valid ObjectId");return a+12},R=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_BINARY;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=o,e[a++]=0;var r=n.length;return e[a++]=255&r,e[a++]=255&r>>8,e[a++]=255&r>>16,e[a++]=255&r>>24,e[a++]=Y.BSON_BINARY_SUBTYPE_DEFAULT,n.copy(e,a,0,r),a+=r,a},I=function(e,t,n,a,o,r,l,s,d,p){for(var c=0;c<p.length;c++)if(p[c]===n)throw new Error("cyclic dependency detected");p.push(n),e[a++]=Array.isArray(n)?Y.BSON_DATA_ARRAY:Y.BSON_DATA_OBJECT;var i=d?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=i,e[a++]=0;var u=H(e,n,o,a,r+1,l,s,p);p.pop();return u},M=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_DECIMAL128;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");return a+=o,e[a++]=0,n.bytes.copy(e,a,0,16),a+16},F=function(e,t,n,a,i){e[a++]="Long"==n._bsontype?Y.BSON_DATA_LONG:Y.BSON_DATA_TIMESTAMP;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=o,e[a++]=0;var r=n.getLowBits(),l=n.getHighBits();return e[a++]=255&r,e[a++]=255&r>>8,e[a++]=255&r>>16,e[a++]=255&r>>24,e[a++]=255&l,e[a++]=255&l>>8,e[a++]=255&l>>16,e[a++]=255&l>>24,a},B=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_INT;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");return a+=o,e[a++]=0,e[a++]=255&n,e[a++]=255&n>>8,e[a++]=255&n>>16,e[a++]=255&n>>24,a},z=function(e,t,n,i,o){e[i++]=Y.BSON_DATA_NUMBER;var r=o?e.write(t,i,"ascii"):e.write(t,i,"utf8");return i+=r,e[i++]=0,a(e,n,i,"little",52,8),i+=8,i},j=function(e,t,n,a,i,o,r){e[a++]=Y.BSON_DATA_CODE;var l=r?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=l,e[a++]=0;var s=n.toString(),d=e.write(s,a+4,"utf8")+1;return e[a]=255&d,e[a+1]=255&d>>8,e[a+2]=255&d>>16,e[a+3]=255&d>>24,a=a+4+d-1,e[a++]=0,a},U=function(e,t,n,a,i,o,r,l,s){if(n.scope&&"object"==typeof n.scope){e[a++]=Y.BSON_DATA_CODE_W_SCOPE;var d=s?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=d,e[a++]=0;var p=a,c="string"==typeof n.code?n.code:n.code.toString();a+=4;var u=e.write(c,a+4,"utf8")+1;e[a]=255&u,e[a+1]=255&u>>8,e[a+2]=255&u>>16,e[a+3]=255&u>>24,e[a+4+u-1]=0,a=a+u+4;var f=H(e,n.scope,i,a,o+1,r,l);a=f-1;var m=f-p;e[p++]=255&m,e[p++]=255&m>>8,e[p++]=255&m>>16,e[p++]=255&m>>24,e[a++]=0}else{e[a++]=Y.BSON_DATA_CODE;var d=s?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=d,e[a++]=0;var c=n.code.toString(),g=e.write(c,a+4,"utf8")+1;e[a]=255&g,e[a+1]=255&g>>8,e[a+2]=255&g>>16,e[a+3]=255&g>>24,a=a+4+g-1,e[a++]=0}return a},$=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_BINARY;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=o,e[a++]=0;var r=n.value(!0),l=n.position;return n.sub_type==h.SUBTYPE_BYTE_ARRAY&&(l+=4),e[a++]=255&l,e[a++]=255&l>>8,e[a++]=255&l>>16,e[a++]=255&l>>24,e[a++]=n.sub_type,n.sub_type==h.SUBTYPE_BYTE_ARRAY&&(l-=4,e[a++]=255&l,e[a++]=255&l>>8,e[a++]=255&l>>16,e[a++]=255&l>>24),r.copy(e,a,0,n.position),a+=n.position,a},W=function(e,t,n,a,i){e[a++]=Y.BSON_DATA_SYMBOL;var o=i?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=o,e[a++]=0;var r=e.write(n.value,a+4,"utf8")+1;return e[a]=255&r,e[a+1]=255&r>>8,e[a+2]=255&r>>16,e[a+3]=255&r>>24,a=a+4+r-1,e[a++]=0,a},q=function(e,t,n,a,i,o,r){e[a++]=Y.BSON_DATA_OBJECT;var l=r?e.write(t,a,"ascii"):e.write(t,a,"utf8");a+=l,e[a++]=0;var s=a,d;d=null==n.db?H(e,{$ref:n.namespace,$id:n.oid},!1,a,i+1,o):H(e,{$ref:n.namespace,$id:n.oid,$db:n.db},!1,a,i+1,o);var p=d-s;return e[s++]=255&p,e[s++]=255&p>>8,e[s++]=255&p>>16,e[s++]=255&p>>24,d},H=function(e,t,a,o,l,s,d,p){o=o||0,p=p||[],p.push(t);var c=o+4,u=this;if(Array.isArray(t))for(var f=0;f<t.length;f++){var i=""+f,m=t[f];if(m&&m.toBSON){if("function"!=typeof m.toBSON)throw new Error("toBSON is not a function");m=m.toBSON()}var g=typeof m;"string"==g?c=T(e,i,m,c,!0):"number"==g?c=k(e,i,m,c,!0):"boolean"==g?c=A(e,i,m,c,!0):m instanceof Date||v(m)?c=w(e,i,m,c,!0):void 0===m?c=N(e,i,m,c,!0):null===m?c=N(e,i,m,c,!0):"ObjectID"==m._bsontype?c=P(e,i,m,c,!0):n.isBuffer(m)?c=R(e,i,m,c,!0):m instanceof RegExp||S(m)?c=C(e,i,m,c,!0):"object"==g&&null==m._bsontype?c=I(e,i,m,c,a,l,s,d,!0,p):"object"==g&&"Decimal128"==m._bsontype?c=M(e,i,m,c,!0):"Long"==m._bsontype||"Timestamp"==m._bsontype?c=F(e,i,m,c,!0):"Double"==m._bsontype?c=z(e,i,m,c,!0):"function"==typeof m&&s?c=j(e,i,m,c,a,l,s,!0):"Code"==m._bsontype?c=U(e,i,m,c,a,l,s,d,!0):"Binary"==m._bsontype?c=$(e,i,m,c,!0):"Symbol"==m._bsontype?c=W(e,i,m,c,!0):"DBRef"==m._bsontype?c=q(e,i,m,c,l,s,!0):"BSONRegExp"==m._bsontype?c=O(e,i,m,c,!0):"Int32"==m._bsontype?c=B(e,i,m,c,!0):("MinKey"==m._bsontype||"MaxKey"==m._bsontype)&&(c=D(e,i,m,c,!0))}else if(t instanceof r){for(var _=t.entries(),y=!1,h;!y;)if(h=_.next(),y=h.done,!y){var i=h.value[0],m=h.value[1],g=typeof m;if("$db"!=i&&"$ref"!=i&&"$id"!=i){if(null!=i.match(x))throw Error("key "+i+" must not contain null bytes");if(a)if("$"==i[0])throw Error("key "+i+" must not start with '$'");else if(!!~i.indexOf("."))throw Error("key "+i+" must not contain '.'")}"string"==g?c=T(e,i,m,c):"number"==g?c=k(e,i,m,c):"boolean"==g?c=A(e,i,m,c):m instanceof Date||v(m)?c=w(e,i,m,c):void 0===m&&!0==d||(null===m||void 0===m?c=N(e,i,m,c):"ObjectID"==m._bsontype?c=P(e,i,m,c):n.isBuffer(m)?c=R(e,i,m,c):m instanceof RegExp||S(m)?c=C(e,i,m,c):"object"==g&&null==m._bsontype?c=I(e,i,m,c,a,l,s,d,!1,p):"object"==g&&"Decimal128"==m._bsontype?c=M(e,i,m,c):"Long"==m._bsontype||"Timestamp"==m._bsontype?c=F(e,i,m,c):"Double"==m._bsontype?c=z(e,i,m,c):"Code"==m._bsontype?c=U(e,i,m,c,a,l,s,d):"function"==typeof m&&s?c=j(e,i,m,c,a,l,s):"Binary"==m._bsontype?c=$(e,i,m,c):"Symbol"==m._bsontype?c=W(e,i,m,c):"DBRef"==m._bsontype?c=q(e,i,m,c,l,s):"BSONRegExp"==m._bsontype?c=O(e,i,m,c):"Int32"==m._bsontype?c=B(e,i,m,c):("MinKey"==m._bsontype||"MaxKey"==m._bsontype)&&(c=D(e,i,m,c)))}}else{if(t.toBSON){if("function"!=typeof t.toBSON)throw new Error("toBSON is not a function");if(t=t.toBSON(),null!=t&&"object"!=typeof t)throw new Error("toBSON function did not return an object")}for(var i in t){var m=t[i];if(m&&m.toBSON){if("function"!=typeof m.toBSON)throw new Error("toBSON is not a function");m=m.toBSON()}var g=typeof m;if("$db"!=i&&"$ref"!=i&&"$id"!=i){if(null!=i.match(x))throw Error("key "+i+" must not contain null bytes");if(a)if("$"==i[0])throw Error("key "+i+" must not start with '$'");else if(!!~i.indexOf("."))throw Error("key "+i+" must not contain '.'")}"string"==g?c=T(e,i,m,c):"number"==g?c=k(e,i,m,c):"boolean"==g?c=A(e,i,m,c):m instanceof Date||v(m)?c=w(e,i,m,c):void 0===m&&!0==d||(null===m||void 0===m?c=N(e,i,m,c):"ObjectID"==m._bsontype?c=P(e,i,m,c):n.isBuffer(m)?c=R(e,i,m,c):m instanceof RegExp||S(m)?c=C(e,i,m,c):"object"==g&&null==m._bsontype?c=I(e,i,m,c,a,l,s,d,!1,p):"object"==g&&"Decimal128"==m._bsontype?c=M(e,i,m,c):"Long"==m._bsontype||"Timestamp"==m._bsontype?c=F(e,i,m,c):"Double"==m._bsontype?c=z(e,i,m,c):"Code"==m._bsontype?c=U(e,i,m,c,a,l,s,d):"function"==typeof m&&s?c=j(e,i,m,c,a,l,s):"Binary"==m._bsontype?c=$(e,i,m,c):"Symbol"==m._bsontype?c=W(e,i,m,c):"DBRef"==m._bsontype?c=q(e,i,m,c,l,s):"BSONRegExp"==m._bsontype?c=O(e,i,m,c):"Int32"==m._bsontype?c=B(e,i,m,c):("MinKey"==m._bsontype||"MaxKey"==m._bsontype)&&(c=D(e,i,m,c)))}}p.pop(),e[c++]=0;var b=c-o;return e[o++]=255&b,e[o++]=255&b>>8,e[o++]=255&b>>16,e[o++]=255&b>>24,c},Y={},V=Y.functionCache={};Y.BSON_DATA_NUMBER=1,Y.BSON_DATA_STRING=2,Y.BSON_DATA_OBJECT=3,Y.BSON_DATA_ARRAY=4,Y.BSON_DATA_BINARY=5,Y.BSON_DATA_UNDEFINED=6,Y.BSON_DATA_OID=7,Y.BSON_DATA_BOOLEAN=8,Y.BSON_DATA_DATE=9,Y.BSON_DATA_NULL=10,Y.BSON_DATA_REGEXP=11,Y.BSON_DATA_CODE=13,Y.BSON_DATA_SYMBOL=14,Y.BSON_DATA_CODE_W_SCOPE=15,Y.BSON_DATA_INT=16,Y.BSON_DATA_TIMESTAMP=17,Y.BSON_DATA_LONG=18,Y.BSON_DATA_DECIMAL128=19,Y.BSON_DATA_MIN_KEY=255,Y.BSON_DATA_MAX_KEY=127,Y.BSON_BINARY_SUBTYPE_DEFAULT=0,Y.BSON_BINARY_SUBTYPE_FUNCTION=1,Y.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,Y.BSON_BINARY_SUBTYPE_UUID=3,Y.BSON_BINARY_SUBTYPE_MD5=4,Y.BSON_BINARY_SUBTYPE_USER_DEFINED=128,Y.BSON_INT32_MAX=2147483647,Y.BSON_INT32_MIN=-2147483648,Y.BSON_INT64_MAX=9223372036854776000,Y.BSON_INT64_MIN=-9223372036854776000,Y.JS_INT_MAX=9007199254740992,Y.JS_INT_MIN=-9007199254740992;var G=o.fromNumber(9007199254740992),Z=o.fromNumber(-9007199254740992);t.exports=H}).call(this,e("buffer").Buffer)},{"../binary":20,"../code":22,"../db_ref":23,"../decimal128":24,"../double":25,"../float_parser":26,"../int_32":27,"../long":28,"../map":29,"../max_key":30,"../min_key":31,"../objectid":32,"../regexp":36,"../symbol":37,"../timestamp":38,buffer:39}],36:[function(e,t){function n(e,t){if(!(this instanceof n))return new n;this._bsontype="BSONRegExp",this.pattern=e||"",this.options=t||"";for(var a=0;a<this.options.length;a++)if("i"!=this.options[a]&&"m"!=this.options[a]&&"x"!=this.options[a]&&"l"!=this.options[a]&&"s"!=this.options[a]&&"u"!=this.options[a])throw new Error("the regular expression options ["+this.options[a]+"] is not supported")}t.exports=n,t.exports.BSONRegExp=n},{}],37:[function(e,t){function n(e){return this instanceof n?void(this._bsontype="Symbol",this.value=e):new n(e)}n.prototype.valueOf=function(){return this.value},n.prototype.toString=function(){return this.value},n.prototype.inspect=function(){return this.value},n.prototype.toJSON=function(){return this.value},t.exports=n,t.exports.Symbol=n},{}],38:[function(e,t){//     http://www.apache.org/licenses/LICENSE-2.0
function n(e,t){return this instanceof n?void(this._bsontype="Timestamp",this.low_=0|e,this.high_=0|t):new n(e,t)}n.prototype.toInt=function(){return this.low_},n.prototype.toNumber=function(){return this.high_*n.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},n.prototype.toJSON=function(){return this.toString()},n.prototype.toString=function(e){var t=e||10;if(2>t||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(n.MIN_VALUE)){var a=n.fromNumber(t),i=this.div(a),o=i.multiply(a).subtract(this);return i.toString(t)+o.toInt().toString(t)}return"-"+this.negate().toString(t)}for(var r=n.fromNumber(g(t,6)),o=this,l="";;){var s=o.div(r),d=o.subtract(s.multiply(r)).toInt(),p=d.toString(t);if(o=s,o.isZero())return p+l;for(;6>p.length;)p="0"+p;l=""+p+l}},n.prototype.getHighBits=function(){return this.high_},n.prototype.getLowBits=function(){return this.low_},n.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:n.TWO_PWR_32_DBL_+this.low_},n.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(n.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0==this.high_?this.low_:this.high_,t=31;0<t&&0==(e&1<<t);t--);return 0==this.high_?t+1:t+33},n.prototype.isZero=function(){return 0==this.high_&&0==this.low_},n.prototype.isNegative=function(){return 0>this.high_},n.prototype.isOdd=function(){return 1==(1&this.low_)},n.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},n.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},n.prototype.lessThan=function(e){return 0>this.compare(e)},n.prototype.lessThanOrEqual=function(e){return 0>=this.compare(e)},n.prototype.greaterThan=function(e){return 0<this.compare(e)},n.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},n.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.subtract(e).isNegative()?-1:1},n.prototype.negate=function(){return this.equals(n.MIN_VALUE)?n.MIN_VALUE:this.not().add(n.ONE)},n.prototype.add=function(e){var t=this.high_>>>16,a=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,r=e.high_>>>16,l=65535&e.high_,s=e.low_>>>16,d=65535&e.low_,p=0,c=0,u=0,f=0;return f+=o+d,u+=f>>>16,f&=65535,u+=i+s,c+=u>>>16,u&=65535,c+=a+l,p+=c>>>16,c&=65535,p+=t+r,p&=65535,n.fromBits(u<<16|f,p<<16|c)},n.prototype.subtract=function(e){return this.add(e.negate())},n.prototype.multiply=function(e){if(this.isZero())return n.ZERO;if(e.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE))return e.isOdd()?n.MIN_VALUE:n.ZERO;if(e.equals(n.MIN_VALUE))return this.isOdd()?n.MIN_VALUE:n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(n.TWO_PWR_24_)&&e.lessThan(n.TWO_PWR_24_))return n.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,a=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,r=e.high_>>>16,l=65535&e.high_,s=e.low_>>>16,d=65535&e.low_,p=0,c=0,u=0,f=0;return f+=o*d,u+=f>>>16,f&=65535,u+=i*d,c+=u>>>16,u&=65535,u+=o*s,c+=u>>>16,u&=65535,c+=a*d,p+=c>>>16,c&=65535,c+=i*s,p+=c>>>16,c&=65535,c+=o*l,p+=c>>>16,c&=65535,p+=t*d+a*s+i*l+o*r,p&=65535,n.fromBits(u<<16|f,p<<16|c)},n.prototype.div=function(e){if(e.isZero())throw Error("division by zero");else if(this.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE)){if(e.equals(n.ONE)||e.equals(n.NEG_ONE))return n.MIN_VALUE;if(e.equals(n.MIN_VALUE))return n.ONE;var t=this.shiftRight(1),a=t.div(e).shiftLeft(1);if(a.equals(n.ZERO))return e.isNegative()?n.ONE:n.NEG_ONE;var i=this.subtract(e.multiply(a)),o=a.add(i.div(e));return o}if(e.equals(n.MIN_VALUE))return n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(var l=n.ZERO,i=this;i.greaterThanOrEqual(e);){for(var a=N(1,E(i.toNumber()/e.toNumber())),s=p(f(a)/r),d=48>=s?1:g(2,s-48),c=n.fromNumber(a),u=c.multiply(e);u.isNegative()||u.greaterThan(i);)a-=d,c=n.fromNumber(a),u=c.multiply(e);c.isZero()&&(c=n.ONE),l=l.add(c),i=i.subtract(u)}return l},n.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},n.prototype.not=function(){return n.fromBits(~this.low_,~this.high_)},n.prototype.and=function(e){return n.fromBits(this.low_&e.low_,this.high_&e.high_)},n.prototype.or=function(e){return n.fromBits(this.low_|e.low_,this.high_|e.high_)},n.prototype.xor=function(e){return n.fromBits(this.low_^e.low_,this.high_^e.high_)},n.prototype.shiftLeft=function(e){if(e&=63,0==e)return this;var t=this.low_;if(32>e){var a=this.high_;return n.fromBits(t<<e,a<<e|t>>>32-e)}return n.fromBits(0,t<<e-32)},n.prototype.shiftRight=function(e){if(e&=63,0==e)return this;var t=this.high_;if(32>e){var a=this.low_;return n.fromBits(a>>>e|t<<32-e,t>>e)}return n.fromBits(t>>e-32,0<=t?0:-1)},n.prototype.shiftRightUnsigned=function(e){if(e&=63,0==e)return this;var t=this.high_;if(32>e){var a=this.low_;return n.fromBits(a>>>e|t<<32-e,t>>>e)}return 32==e?n.fromBits(t,0):n.fromBits(t>>>e-32,0)},n.fromInt=function(e){if(-128<=e&&128>e){var t=n.INT_CACHE_[e];if(t)return t}var a=new n(0|e,0>e?-1:0);return-128<=e&&128>e&&(n.INT_CACHE_[e]=a),a},n.fromNumber=function(e){return isNaN(e)||!isFinite(e)?n.ZERO:e<=-n.TWO_PWR_63_DBL_?n.MIN_VALUE:e+1>=n.TWO_PWR_63_DBL_?n.MAX_VALUE:0>e?n.fromNumber(-e).negate():new n(0|e%n.TWO_PWR_32_DBL_,0|e/n.TWO_PWR_32_DBL_)},n.fromBits=function(e,t){return new n(e,t)},n.fromString=function(e,t){if(0==e.length)throw Error("number format error: empty string");var a=t||10;if(2>a||36<a)throw Error("radix out of range: "+a);if("-"==e.charAt(0))return n.fromString(e.substring(1),a).negate();if(0<=e.indexOf("-"))throw Error("number format error: interior \"-\" character: "+e);for(var o=n.fromNumber(g(a,8)),r=n.ZERO,l=0;l<e.length;l+=8){var i=S(8,e.length-l),s=parseInt(e.substring(l,l+i),a);if(8>i){var d=n.fromNumber(g(a,i));r=r.multiply(d).add(n.fromNumber(s))}else r=r.multiply(o),r=r.add(n.fromNumber(s))}return r},n.INT_CACHE_={},n.TWO_PWR_16_DBL_=65536,n.TWO_PWR_24_DBL_=16777216,n.TWO_PWR_32_DBL_=n.TWO_PWR_16_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_31_DBL_=n.TWO_PWR_32_DBL_/2,n.TWO_PWR_48_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_64_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_32_DBL_,n.TWO_PWR_63_DBL_=n.TWO_PWR_64_DBL_/2,n.ZERO=n.fromInt(0),n.ONE=n.fromInt(1),n.NEG_ONE=n.fromInt(-1),n.MAX_VALUE=n.fromBits(-1,2147483647),n.MIN_VALUE=n.fromBits(0,-2147483648),n.TWO_PWR_24_=n.fromInt(16777216),t.exports=n,t.exports.Timestamp=n},{}],39:[function(e,t,n){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */"use strict";function a(e){if(e>Q)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return s(e)}return i(e,t,n)}function i(e,t,n){if("number"==typeof e)throw new TypeError("\"value\" argument must not be a number");return G(e)?u(e,t,n):"string"==typeof e?p(e,t):f(e)}function r(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");else if(0>e)throw new RangeError("\"size\" argument must not be negative")}function l(e,t,n){return r(e),0>=e?a(e):void 0===t?a(e):"string"==typeof n?a(e).fill(t,n):a(e).fill(t)}function s(e){return r(e),a(0>e?0:0|m(e))}function p(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw new TypeError("\"encoding\" must be a valid string encoding");var n=0|_(e,t),i=a(n),r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}function c(e){for(var t=0>e.length?0:0|m(e.length),n=a(t),o=0;o<t;o+=1)n[o]=255&e[o];return n}function u(e,t,n){if(0>t||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");var a;return a=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),a.__proto__=o.prototype,a}function f(e){if(o.isBuffer(e)){var t=0|m(e.length),n=a(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(e){if(Z(e)||"length"in e)return"number"!=typeof e.length||X(e.length)?a(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=Q)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Q.toString(16)+" bytes");return 0|e}function _(e,t){if(o.isBuffer(e))return e.length;if(Z(e)||G(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(a)return W(e).length;t=(""+t).toLowerCase(),a=!0;}}function y(e,t,n){var a=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0;}}function h(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function b(e,t,n,a,i){if(0===e.length)return-1;if("string"==typeof n?(a=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,X(n)&&(n=i?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(0>n)if(i)n=0;else return-1;if("string"==typeof t&&(t=o.from(t,a)),o.isBuffer(t))return 0===t.length?-1:x(e,t,n,a,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):x(e,[t],n,a,i);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,a,o){function r(e,t){return 1==l?e[t]:e.readUInt16BE(t*l)}var l=1,s=e.length,d=t.length;if(void 0!==a&&(a=(a+"").toLowerCase(),"ucs2"===a||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(2>e.length||2>t.length)return-1;l=2,s/=2,d/=2,n/=2}var p;if(o){var i=-1;for(p=n;p<s;p++)if(r(e,p)!==r(t,-1==i?0:p-i))-1!=i&&(p-=p-i),i=-1;else if(-1==i&&(i=p),p-i+1===d)return i*l}else for(n+d>s&&(n=s-d),p=n;0<=p;p--){for(var c=!0,u=0;u<d;u++)if(r(e,p+u)!==r(t,u)){c=!1;break}if(c)return p}return-1}function v(e,t,n,a){n=+n||0;var o=e.length-n;a?(a=+a,a>o&&(a=o)):a=o;var r=t.length;if(0!=r%2)throw new TypeError("Invalid hex string");a>r/2&&(a=r/2);for(var l=0,i;l<a;++l){if(i=parseInt(t.substr(2*l,2),16),X(i))return l;e[n+l]=i}return l}function T(e,t,n,a){return V(W(t,e.length-n),e,n,a)}function k(e,t,n,a){return V(q(t),e,n,a)}function E(e,t,n,a){return k(e,t,n,a)}function N(e,t,n,a){return V(Y(t),e,n,a)}function A(e,t,n,a){return V(H(t,e.length-n),e,n,a)}function w(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function C(e,t,n){n=S(e.length,n);for(var a=[],o=t;o<n;){var i=e[o],r=null,l=239<i?4:223<i?3:191<i?2:1;if(o+l<=n){var s,d,p,c;1==l?128>i&&(r=i):2==l?(s=e[o+1],128==(192&s)&&(c=(31&i)<<6|63&s,127<c&&(r=c))):3==l?(s=e[o+1],d=e[o+2],128==(192&s)&&128==(192&d)&&(c=(15&i)<<12|(63&s)<<6|63&d,2047<c&&(55296>c||57343<c)&&(r=c))):4==l?(s=e[o+1],d=e[o+2],p=e[o+3],128==(192&s)&&128==(192&d)&&128==(192&p)&&(c=(15&i)<<18|(63&s)<<12|(63&d)<<6|63&p,65535<c&&1114112>c&&(r=c))):void 0}null===r?(r=65533,l=1):65535<r&&(r-=65536,a.push(55296|1023&r>>>10),r=56320|1023&r),a.push(r),o+=l}return O(a)}function O(e){var t=e.length;if(t<=ee)return d.apply(String,e);for(var n="",a=0;a<t;)n+=d.apply(String,e.slice(a,a+=ee));return n}function D(e,t,n){var a="";n=S(e.length,n);for(var o=t;o<n;++o)a+=d(127&e[o]);return a}function P(e,t,n){var a="";n=S(e.length,n);for(var o=t;o<n;++o)a+=d(e[o]);return a}function R(e,t,n){var a=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>a)&&(n=a);for(var o="",r=t;r<n;++r)o+=$(e[r]);return o}function I(e,t,n){for(var a=e.slice(t,n),o="",r=0;r<a.length;r+=2)o+=d(a[r]+256*a[r+1]);return o}function M(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,n,a,i,r){if(!o.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>i||t<r)throw new RangeError("\"value\" argument is out of bounds");if(n+a>e.length)throw new RangeError("Index out of range")}function B(e,t,n,a){if(n+a>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function z(e,t,n,a,i){return t=+t,n>>>=0,i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,a,23,4),n+4}function j(e,t,n,a,i){return t=+t,n>>>=0,i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,a,52,8),n+8}function U(e){if(e=e.trim().replace(te,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function $(e){return 16>e?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||Infinity;for(var n=e.length,a=null,o=[],r=0,i;r<n;++r){if(i=e.charCodeAt(r),55295<i&&57344>i){if(!a){if(56319<i){-1<(t-=3)&&o.push(239,191,189);continue}else if(r+1===n){-1<(t-=3)&&o.push(239,191,189);continue}a=i;continue}if(56320>i){-1<(t-=3)&&o.push(239,191,189),a=i;continue}i=(a-55296<<10|i-56320)+65536}else a&&-1<(t-=3)&&o.push(239,191,189);if(a=null,128>i){if(0>(t-=1))break;o.push(i)}else if(2048>i){if(0>(t-=2))break;o.push(192|i>>6,128|63&i)}else if(65536>i){if(0>(t-=3))break;o.push(224|i>>12,128|63&i>>6,128|63&i)}else if(1114112>i){if(0>(t-=4))break;o.push(240|i>>18,128|63&i>>12,128|63&i>>6,128|63&i)}else throw new Error("Invalid code point")}return o}function q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n=[],a=0,i,o,r;a<e.length&&!(0>(t-=2));++a)i=e.charCodeAt(a),o=i>>8,r=i%256,n.push(r),n.push(o);return n}function Y(e){return K.toByteArray(U(e))}function V(e,t,n,a){for(var o=0;o<a&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function G(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function Z(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function X(e){return e!==e}var K=e("base64-js"),J=e("ieee754");n.Buffer=o,n.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},n.INSPECT_MAX_BYTES=50;var Q=2147483647;n.kMaxLength=Q,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,n){return i(e,t,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,n){return l(e,t,n)},o.allocUnsafe=function(e){return s(e)},o.allocUnsafeSlow=function(e){return s(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,r=0,i=S(n,a);r<i;++r)if(e[r]!==t[r]){n=e[r],a=t[r];break}return n<a?-1:a<n?1:0},o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return o.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var r=e[n];if(!o.isBuffer(r))throw new TypeError("\"list\" argument must be an Array of Buffers");r.copy(a,i),i+=r.length}return a},o.byteLength=_,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,a,r){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===a&&(a=0),void 0===r&&(r=this.length),0>t||n>e.length||0>a||r>this.length)throw new RangeError("out of range index");if(a>=r&&t>=n)return 0;if(a>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,a>>>=0,r>>>=0,this===e)return 0;for(var l=r-a,s=n-t,d=S(l,s),p=this.slice(a,r),c=e.slice(t,n),u=0;u<d;++u)if(p[u]!==c[u]){l=p[u],s=c[u];break}return l<s?-1:s<l?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,a){if(void 0===t)a="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)a=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===a&&(a="utf8")):(a=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-t;if((void 0===n||n>i)&&(n=i),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var o=!1;;)switch(a){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return N(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),o=!0;}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var a=this.subarray(e,t);return a.__proto__=o.prototype,a},o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var a=this[e],o=1,r=0;++r<t&&(o*=256);)a+=this[e+r]*o;return a},o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var a=this[e+--t],i=1;0<t&&(i*=256);)a+=this[e+--t]*i;return a},o.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var a=this[e],o=1,r=0;++r<t&&(o*=256);)a+=this[e+r]*o;return o*=128,a>=o&&(a-=g(2,8*t)),a},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var a=t,i=1,o=this[e+--a];0<a&&(i*=256);)o+=this[e+--a]*i;return i*=128,o>=i&&(o-=g(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,a){if(e=+e,t>>>=0,n>>>=0,!a){var o=g(2,8*n)-1;F(this,e,t,n,o,0)}var r=1,l=0;for(this[t]=255&e;++l<n&&(r*=256);)this[t+l]=255&e/r;return t+n},o.prototype.writeUIntBE=function(e,t,n,a){if(e=+e,t>>>=0,n>>>=0,!a){var o=g(2,8*n)-1;F(this,e,t,n,o,0)}var r=n-1,i=1;for(this[t+r]=255&e;0<=--r&&(i*=256);)this[t+r]=255&e/i;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t>>>=0,!a){var o=g(2,8*n-1);F(this,e,t,n,o-1,-o)}var r=0,i=1,l=0;for(this[t]=255&e;++r<n&&(i*=256);)0>e&&0==l&&0!==this[t+r-1]&&(l=1),this[t+r]=255&(e/i>>0)-l;return t+n},o.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t>>>=0,!a){var o=g(2,8*n-1);F(this,e,t,n,o-1,-o)}var r=n-1,i=1,l=0;for(this[t+r]=255&e;0<=--r&&(i*=256);)0>e&&0==l&&0!==this[t+r+1]&&(l=1),this[t+r]=255&(e/i>>0)-l;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),0<a&&a<n&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var o=a-n,r;if(this===e&&n<t&&t<a)for(r=o-1;0<=r;--r)e[r+t]=this[r+n];else if(1e3>o)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},o.prototype.fill=function(e,t,n,a){if("string"==typeof e){if("string"==typeof t?(a=t,t=0,n=this.length):"string"==typeof n&&(a=n,n=this.length),1===e.length){var r=e.charCodeAt(0);256>r&&(e=r)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!o.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var l;if("number"==typeof e)for(l=t;l<n;++l)this[l]=e;else{var i=o.isBuffer(e)?e:new o(e,a),s=i.length;for(l=0;l<n-t;++l)this[l+t]=i[l%s]}return this};var te=/[^+/0-9A-Za-z-_]/g},{"base64-js":17,ieee754:145}],40:[function(e,t,n){(function(t,a,i){(function(){var r={}.hasOwnProperty,o,l,s,p,c,u,f,m,g,_,y,h,b,x,v,S,T,k,E,N,A;if(m=e("fs"),N=e("vm"),S=e("path"),o=e("./lexer").Lexer,v=e("./parser").parser,_=e("./helpers"),l=e("./sourcemap"),x=e("../../package.json"),n.VERSION=x.version,n.FILE_EXTENSIONS=[".coffee",".litcoffee",".coffee.md"],n.helpers=_,s=function(e){switch(!1){case"function"!=typeof i:return new i(e).toString("base64");case"function"!=typeof btoa:return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return d("0x"+t)}));default:throw new Error("Unable to base64 encode inline sourcemap.");}},A=function(e){return function(t,n){var a;null==n&&(n={});try{return e.call(this,t,n)}catch(e){if(a=e,"string"!=typeof t)throw a;throw _.updateSyntaxError(a,t,n.filename)}}},E={},k={},n.compile=p=A(function(e,t){var n,a,o,r,d,p,c,u,f,m,i,g,y,h,x,S,T,N,A,w,C,O,D,P;if(S=_.merge,r=_.extend,t=r({},t),u=t.sourceMap||t.inlineMap||null==t.filename,d=t.filename||"<anonymous>",E[d]=e,u&&(x=new l),D=b.tokenize(e,t),t.referencedVars=function(){var e,t,n;for(n=[],e=0,t=D.length;e<t;e++)O=D[e],"IDENTIFIER"===O[0]&&n.push(O[1]);return n}(),null==t.bare||!0!==t.bare)for(m=0,y=D.length;m<y;m++)if(O=D[m],"IMPORT"===(N=O[0])||"EXPORT"===N){t.bare=!0;break}for(c=v.parse(D).compileToFragments(t),a=0,t.header&&(a+=1),t.shiftLine&&(a+=1),n=0,g="",(i=0,h=c.length);i<h;i++)p=c[i],u&&(p.locationData&&!/^[;\s]*$/.test(p.code)&&x.add([p.locationData.first_line,p.locationData.first_column],[a,n],{noReplace:!0}),T=_.count(p.code,"\n"),a+=T,T?n=p.code.length-(p.code.lastIndexOf("\n")+1):n+=p.code.length),g+=p.code;return t.header&&(f="Generated by CoffeeScript "+this.VERSION,g="// "+f+"\n"+g),u&&(P=x.generate(t,e),k[d]=x),t.inlineMap&&(o=s(JSON.stringify(P)),w="//# sourceMappingURL=data:application/json;base64,"+o,C="//# sourceURL="+(null==(A=t.filename)?"coffeescript":A),g=g+"\n"+w+"\n"+C),t.sourceMap?{js:g,sourceMap:x,v3SourceMap:JSON.stringify(P,null,2)}:g}),n.tokens=A(function(e,t){return b.tokenize(e,t)}),n.nodes=A(function(e,t){return"string"==typeof e?v.parse(b.tokenize(e,t)):v.parse(e)}),n.run=function(n,a){var i,o,r,l;return null==a&&(a={}),r=e.main,r.filename=t.argv[1]=a.filename?m.realpathSync(a.filename):"<anonymous>",r.moduleCache&&(r.moduleCache={}),o=null==a.filename?m.realpathSync("."):S.dirname(m.realpathSync(a.filename)),r.paths=e("module")._nodeModulePaths(o),(!_.isCoffee(r.filename)||e.extensions)&&(i=p(n,a),n=null==(l=i.js)?i:l),r._compile(n,r.filename)},n.eval=function(n,l){var s,d,c,u,f,i,m,g,_,y,o,h,b,x,T,k,E;if(null==l&&(l={}),!!(n=n.trim())){if(u=null==(h=N.Script.createContext)?N.createContext:h,i=null==(b=N.isContext)?function(){return l.sandbox instanceof u().constructor}:b,u){if(null!=l.sandbox){if(i(l.sandbox))k=l.sandbox;else for(g in k=u(),x=l.sandbox,x)r.call(x,g)&&(E=x[g],k[g]=E);k.global=k.root=k.GLOBAL=k}else k=a;if(k.__filename=l.filename||"eval",k.__dirname=S.dirname(k.__filename),!(k!==a||k.module||k.require)){for(s=e("module"),k.module=d=new s(l.modulename||"eval"),k.require=c=function(e){return s._load(e,d,!0)},d.filename=k.__filename,T=Object.getOwnPropertyNames(e),(f=0,_=T.length);f<_;f++)o=T[f],"paths"!==o&&"arguments"!==o&&"caller"!==o&&(c[o]=e[o]);c.paths=d.paths=s._nodeModulePaths(t.cwd()),c.resolve=function(e){return s._resolveFilename(e,d)}}}for(g in y={},l)r.call(l,g)&&(E=l[g],y[g]=E);return y.bare=!0,m=p(n,y),k===a?N.runInThisContext(m):N.runInContext(m,k)}},n.register=function(){return e("./register")},e.extensions)for(T=this.FILE_EXTENSIONS,u=function(t){var n;return null==(n=e.extensions)[t]?n[t]=function(){throw new Error("Use CoffeeScript.register() or require the coffee-script/register module to require "+t+" files.")}:n[t]},(y=0,h=T.length);y<h;y++)c=T[y],u(c);n._compileFile=function(e,t,n){var a,i,o,r;null==t&&(t=!1),null==n&&(n=!1),o=m.readFileSync(e,"utf8"),r=65279===o.charCodeAt(0)?o.substring(1):o;try{a=p(r,{filename:e,sourceMap:t,inlineMap:n,sourceFiles:[e],literate:_.isLiterate(e)})}catch(t){throw i=t,_.updateSyntaxError(i,r,e)}return a},b=new o,v.lexer={lex:function(){var e,t;return t=v.tokens[this.pos++],t?(e=t[0],this.yytext=t[1],this.yylloc=t[2],v.errorToken=t.origin||t,this.yylineno=this.yylloc.first_line):e="",e},setInput:function(e){return v.tokens=e,this.pos=0},upcomingInput:function(){return""}},v.yy=e("./nodes"),v.yy.parseError=function(e,t){var n,a,i,o,r,l;return r=t.token,o=v.errorToken,l=v.tokens,a=o[0],i=o[1],n=o[2],i=function(){switch(!1){case o!==l[l.length-1]:return"end of input";case"INDENT"!==a&&"OUTDENT"!==a:return"indentation";case"IDENTIFIER"!==a&&"NUMBER"!==a&&"INFINITY"!==a&&"STRING"!==a&&"STRING_START"!==a&&"REGEX"!==a&&"REGEX_START"!==a:return a.replace(/_START$/,"").toLowerCase();default:return _.nameWhitespaceCharacter(i);}}(),_.throwSyntaxError("unexpected "+i,n)},f=function(e,t){var n,a,i,o,r,l,s,d,p,c,u,f;return o=void 0,i="",e.isNative()?i="native":(e.isEval()?(o=e.getScriptNameOrSourceURL(),!o&&(i=e.getEvalOrigin()+", ")):o=e.getFileName(),o||(o="<anonymous>"),d=e.getLineNumber(),a=e.getColumnNumber(),c=t(o,d,a),i=c?o+":"+c[0]+":"+c[1]:o+":"+d+":"+a),r=e.getFunctionName(),l=e.isConstructor(),s=!(e.isToplevel()||l),s?(p=e.getMethodName(),f=e.getTypeName(),r?(u=n="",f&&r.indexOf(f)&&(u=f+"."),p&&r.indexOf("."+p)!==r.length-p.length-1&&(n=" [as "+p+"]"),""+u+r+n+" ("+i+")"):f+"."+(p||"<anonymous>")+" ("+i+")"):l?"new "+(r||"<anonymous>")+" ("+i+")":r?r+" ("+i+")":i},g=function(e){var t;return null==k[e]?null==k["<anonymous>"]?null==E[e]?null:(t=p(E[e],{filename:e,sourceMap:!0,literate:_.isLiterate(e)}),t.sourceMap):k["<anonymous>"]:k[e]},Error.prepareStackTrace=function(e,t){var a,i,o;return o=function(e,t,n){var a,i;return i=g(e),null!=i&&(a=i.sourceLocation([t-1,n-1])),null==a?null:[a[0]+1,a[1]+1]},i=function(){var e,i,r;for(r=[],e=0,i=t.length;e<i&&(a=t[e],a.getFunction()!==n.run);e++)r.push("    at "+f(a,o));return r}(),e.toString()+"\n"+i.join("\n")+"\n"}}).call(this)}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e("buffer").Buffer)},{"../../package.json":49,"./helpers":41,"./lexer":42,"./nodes":43,"./parser":44,"./register":45,"./sourcemap":48,_process:153,buffer:39,fs:19,module:19,path:152,vm:593}],41:[function(e,t,n){(function(e){(function(){var t,a,o,i,r,l;n.starts=function(e,t,n){return t===e.substr(n,t.length)},n.ends=function(e,t,n){var a;return a=t.length,t===e.substr(e.length-a-(n||0),a)},n.repeat=r=function(e,t){var n;for(n="";0<t;)1&t&&(n+=e),t>>>=1,e+=e;return n},n.compact=function(e){var t,n,a,i;for(i=[],t=0,a=e.length;t<a;t++)n=e[t],n&&i.push(n);return i},n.count=function(e,t){var n,a;if(n=a=0,!t.length)return 1/0;for(;a=1+e.indexOf(t,a);)n++;return n},n.merge=function(e,t){return a(a({},e),t)},a=n.extend=function(e,t){var n,a;for(n in t)a=t[n],e[n]=a;return e},n.flatten=o=function(e){var t,n,a,i;for(n=[],a=0,i=e.length;a<i;a++)t=e[a],"[object Array]"===Object.prototype.toString.call(t)?n=n.concat(o(t)):n.push(t);return n},n.del=function(e,t){var n;return n=e[t],delete e[t],n},n.some=null==(i=Array.prototype.some)?function(t){var n,e,a,i;for(i=this,e=0,a=i.length;e<a;e++)if(n=i[e],t(n))return!0;return!1}:i,n.invertLiterate=function(e){var t,n,a;return a=!0,n=function(){var n,i,o,r;for(o=e.split("\n"),r=[],(n=0,i=o.length);n<i;n++)t=o[n],a&&/^([ ]{4}|[ ]{0,3}\t)/.test(t)?r.push(t):(a=/^\s*$/.test(t))?r.push(t):r.push("# "+t);return r}(),n.join("\n")},t=function(e,t){return t?{first_line:e.first_line,first_column:e.first_column,last_line:t.last_line,last_column:t.last_column}:e},n.addLocationDataFn=function(e,n){return function(a){return"object"!=typeof a||!a.updateLocationDataIfMissing||a.updateLocationDataIfMissing(t(e,n)),a}},n.locationDataToString=function(e){var t;return"2"in e&&"first_line"in e[2]?t=e[2]:"first_line"in e&&(t=e),t?t.first_line+1+":"+(t.first_column+1)+"-"+(t.last_line+1+":"+(t.last_column+1)):"No location data"},n.baseFileName=function(e,t,n){var a,i;return(null==t&&(t=!1),null==n&&(n=!1),i=n?/\\|\//:/\//,a=e.split(i),e=a[a.length-1],!(t&&0<=e.indexOf(".")))?e:(a=e.split("."),a.pop(),"coffee"===a[a.length-1]&&1<a.length&&a.pop(),a.join("."))},n.isCoffee=function(e){return /\.((lit)?coffee|coffee\.md)$/.test(e)},n.isLiterate=function(e){return /\.(litcoffee|coffee\.md)$/.test(e)},n.throwSyntaxError=function(e,t){var n;throw n=new SyntaxError(e),n.location=t,n.toString=l,n.stack=n.toString(),n},n.updateSyntaxError=function(e,t,n){return e.toString===l&&(e.code||(e.code=t),e.filename||(e.filename=n),e.stack=e.toString()),e},l=function(){var t,n,a,i,o,l,s,d,p,c,u,f,m,g,_;return this.code&&this.location?(u=this.location,s=u.first_line,l=u.first_column,p=u.last_line,d=u.last_column,null==p&&(p=s),null==d&&(d=l),o=this.filename||"[stdin]",t=this.code.split("\n")[s],_=l,i=s===p?d+1:t.length,c=t.slice(0,_).replace(/[^\s]/g," ")+r("^",i-_),"undefined"!=typeof e&&null!==e&&(a=(null==(f=e.stdout)?void 0:f.isTTY)&&(null==(m=e.env)||!m.NODE_DISABLE_COLORS)),(null==(g=this.colorful)?a:g)&&(n=function(e){return"\x1B[1;31m"+e+"\x1B[0m"},t=t.slice(0,_)+n(t.slice(_,i))+t.slice(i),c=n(c)),o+":"+(s+1)+":"+(l+1)+": error: "+this.message+"\n"+t+"\n"+c):Error.prototype.toString.call(this)},n.nameWhitespaceCharacter=function(e){return" "===e?"space":"\n"===e?"newline":"\r"===e?"carriage return":"\t"===e?"tab":e}}).call(this)}).call(this,e("_process"))},{_process:153}],42:[function(e,t,n){(function(){var t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},a=[].slice,i,o,r,l,s,d,c,u,f,m,g,_,y,h,b,x,v,S,T,k,N,A,w,C,O,D,P,R,I,M,F,B,z,j,U,$,W,q,H,Y,V,G,Z,X,K,J,Q,ee,te,ne,ae,ie,oe,re,le,se,de,pe,ce,ue,fe,me,ge,_e,ye,he,be,xe;_e=e("./rewriter"),Y=_e.Rewriter,N=_e.INVERSES,ye=e("./helpers"),pe=ye.count,be=ye.starts,de=ye.compact,he=ye.repeat,ce=ye.invertLiterate,ge=ye.locationDataToString,xe=ye.throwSyntaxError,n.Lexer=P=function(){function e(){}return e.prototype.tokenize=function(e,t){var n,a,o,r;for(null==t&&(t={}),this.literate=t.literate,this.indent=0,this.baseIndent=0,this.indebt=0,this.outdebt=0,this.indents=[],this.ends=[],this.tokens=[],this.seenFor=!1,this.seenImport=!1,this.seenExport=!1,this.importSpecifierList=!1,this.exportSpecifierList=!1,this.chunkLine=t.line||0,this.chunkColumn=t.column||0,e=this.clean(e),o=0;this.chunk=e.slice(o);)if(n=this.identifierToken()||this.commentToken()||this.whitespaceToken()||this.lineToken()||this.stringToken()||this.numberToken()||this.regexToken()||this.jsToken()||this.literalToken(),r=this.getLineAndColumnFromChunk(n),this.chunkLine=r[0],this.chunkColumn=r[1],o+=n,t.untilBalanced&&0===this.ends.length)return{tokens:this.tokens,index:o};return this.closeIndentation(),(a=this.ends.pop())&&this.error("missing "+a.tag,a.origin[2]),!1===t.rewrite?this.tokens:new Y().rewrite(this.tokens)},e.prototype.clean=function(e){return e.charCodeAt(0)===i&&(e=e.slice(1)),e=e.replace(/\r/g,"").replace(ne,""),se.test(e)&&(e="\n"+e,this.chunkLine--),this.literate&&(e=ce(e)),e},e.prototype.identifierToken=function(){var e,n,a,i,o,r,l,p,u,f,m,g,_,y,h,b,x,v,T;return(l=S.exec(this.chunk))?(r=l[0],i=l[1],n=l[2],o=i.length,p=void 0,"own"===i&&"FOR"===this.tag())?(this.token("OWN",i),i.length):"from"===i&&"YIELD"===this.tag()?(this.token("FROM",i),i.length):"as"===i&&this.seenImport&&("*"===this.value()?this.tokens[this.tokens.length-1][0]="IMPORT_ALL":(f=this.value(),0<=t.call(c,f))&&(this.tokens[this.tokens.length-1][0]="IDENTIFIER"),"DEFAULT"===(m=this.tag())||"IMPORT_ALL"===m||"IDENTIFIER"===m)?(this.token("AS",i),i.length):"as"===i&&this.seenExport&&("IDENTIFIER"===(g=this.tag())||"DEFAULT"===g)?(this.token("AS",i),i.length):"default"===i&&this.seenExport&&("EXPORT"===(_=this.tag())||"AS"===_)?(this.token("DEFAULT",i),i.length):(y=this.tokens,u=y[y.length-1],v=n||null!=u&&("."===(h=u[0])||"?."===h||"::"===h||"?::"===h||!u.spaced&&"@"===u[0])?"PROPERTY":"IDENTIFIER","IDENTIFIER"===v&&(0<=t.call(w,i)||0<=t.call(c,i))&&!(this.exportSpecifierList&&0<=t.call(c,i))?(v=i.toUpperCase(),"WHEN"===v&&(b=this.tag(),0<=t.call(O,b))?v="LEADING_WHEN":"FOR"===v?this.seenFor=!0:"UNLESS"===v?v="IF":"IMPORT"===v?this.seenImport=!0:"EXPORT"===v?this.seenExport=!0:0<=t.call(ae,v)?v="UNARY":0<=t.call(q,v)&&("INSTANCEOF"!==v&&this.seenFor?(v="FOR"+v,this.seenFor=!1):(v="RELATION","!"===this.value()&&(p=this.tokens.pop(),i="!"+i)))):"IDENTIFIER"===v&&this.seenFor&&"from"===i&&ue(u)&&(v="FORFROM",this.seenFor=!1),"IDENTIFIER"===v&&0<=t.call(H,i)&&this.error("reserved word '"+i+"'",{length:i.length}),"PROPERTY"!==v&&(0<=t.call(s,i)&&(e=i,i=d[i]),v=function(){return"!"===i?"UNARY":"=="===i||"!="===i?"COMPARE":"true"===i||"false"===i?"BOOL":"break"===i||"continue"===i||"debugger"===i?"STATEMENT":"&&"===i||"||"===i?i:v}()),T=this.token(v,i,0,o),e&&(T.origin=[v,e,T[2]]),p&&(x=[p[2].first_line,p[2].first_column],T[2].first_line=x[0],T[2].first_column=x[1]),n&&(a=r.lastIndexOf(":"),this.token(":",":",a,n.length)),r.length):0},e.prototype.numberToken=function(){var e,t,n,a,i,o,r;if(!(n=F.exec(this.chunk)))return 0;switch(a=n[0],t=a.length,!1){case!/^0[BOX]/.test(a):this.error("radix prefix in '"+a+"' must be lowercase",{offset:1});break;case!/^(?!0x).*E/.test(a):this.error("exponential notation in '"+a+"' must be indicated with a lowercase 'e'",{offset:a.indexOf("E")});break;case!/^0\d*[89]/.test(a):this.error("decimal literal '"+a+"' must not be prefixed with '0'",{length:t});break;case!/^0\d+/.test(a):this.error("octal literal '"+a+"' must be prefixed with '0o'",{length:t});}return e=function(){switch(a.charAt(1)){case"b":return 2;case"o":return 8;case"x":return 16;default:return null;}}(),i=null==e?parseFloat(a):parseInt(a.slice(2),e),("b"===(o=a.charAt(1))||"o"===o)&&(a="0x"+i.toString(16)),r=2e308===i?"INFINITY":"NUMBER",this.token(r,a,0,t),t},e.prototype.stringToken=function(){var e,t,n,a,o,r,l,i,s,d,p,c,u,f,m,g;if(p=(ee.exec(this.chunk)||[])[0],!p)return 0;if(this.tokens.length&&"from"===this.value()&&(this.seenImport||this.seenExport)&&(this.tokens[this.tokens.length-1][0]="FROM"),f=function(){return"'"===p?Q:"\""===p?X:"'''"===p?h:"\"\"\""===p?_:void 0}(),r=3===p.length,c=this.matchWithInterpolations(f,p),g=c.tokens,o=c.index,e=g.length-1,n=p.charAt(0),r){for(i=null,a=function(){var e,t,n;for(n=[],l=e=0,t=g.length;e<t;l=++e)m=g[l],"NEOSTRING"===m[0]&&n.push(m[1]);return n}().join("#{}");d=y.exec(a);)t=d[1],(null===i||0<(u=t.length)&&u<i.length)&&(i=t);i&&(s=RegExp("\\n"+i,"g")),this.mergeInterpolationTokens(g,{delimiter:n},function(t){return function(n,a){return n=t.formatString(n,{delimiter:p}),s&&(n=n.replace(s,"\n")),0===a&&(n=n.replace(C,"")),a===e&&(n=n.replace(te,"")),n}}(this))}else this.mergeInterpolationTokens(g,{delimiter:n},function(t){return function(n,a){return n=t.formatString(n,{delimiter:p}),n=n.replace(G,function(t,i){return 0===a&&0===i||a===e&&i+t.length===n.length?"":" "}),n}}(this));return o},e.prototype.commentToken=function(){var e,t,n;return(n=this.chunk.match(u))?(e=n[0],t=n[1],t&&((n=g.exec(e))&&this.error("block comments cannot contain "+n[0],{offset:n.index,length:n[0].length}),0<=t.indexOf("\n")&&(t=t.replace(RegExp("\\n"+he(" ",this.indent),"g"),"\n")),this.token("HERECOMMENT",t,0,e.length)),e.length):0},e.prototype.jsToken=function(){var e,t;return"`"===this.chunk.charAt(0)&&(e=v.exec(this.chunk)||A.exec(this.chunk))?(t=e[1].replace(/\\+(`|$)/g,function(e){return e.slice(-p(e.length/2))}),this.token("JS",t,0,e[0].length),e[0].length):0},e.prototype.regexToken=function(){var e,n,a,i,o,l,s,d,p,c,u,f,m;switch(!1){case!(l=$.exec(this.chunk)):this.error("regular expressions cannot begin with "+l[2],{offset:l.index+l[1].length});break;case!(l=this.matchWithInterpolations(b,"///")):m=l.tokens,o=l.index;break;case!(l=j.exec(this.chunk)):if(f=l[0],e=l[1],n=l[2],this.validateEscapes(e,{isRegex:!0,offsetInChunk:1}),e=this.formatRegex(e,{delimiter:"/"}),o=f.length,p=this.tokens,d=p[p.length-1],d)if(d.spaced&&(c=d[0],0<=t.call(r,c))){if(!n||z.test(f))return 0;}else if(u=d[0],0<=t.call(M,u))return 0;n||this.error("missing / (unclosed regex)");break;default:return 0;}switch(i=U.exec(this.chunk.slice(o))[0],a=o+i.length,s=this.makeToken("REGEX",null,0,a),!1){case!!le.test(i):this.error("invalid regular expression flags "+i,{offset:o,length:i.length});break;case!(f||1===m.length):null==e&&(e=this.formatHeregex(m[0][1])),this.token("REGEX",""+this.makeDelimitedLiteral(e,{delimiter:"/"})+i,0,a,s);break;default:this.token("REGEX_START","(",0,0,s),this.token("IDENTIFIER","RegExp",0,0),this.token("CALL_START","(",0,0),this.mergeInterpolationTokens(m,{delimiter:"\"",double:!0},this.formatHeregex),i&&(this.token(",",",",o-1,0),this.token("STRING","\""+i+"\"",o-1,i.length)),this.token(")",")",a-1,0),this.token("REGEX_END",")",a-1,0);}return a},e.prototype.lineToken=function(){var e,t,n,a,i;if(!(n=I.exec(this.chunk)))return 0;if(t=n[0],this.seenFor=!1,this.importSpecifierList||(this.seenImport=!1),this.exportSpecifierList||(this.seenExport=!1),i=t.length-1-t.lastIndexOf("\n"),a=this.unfinished(),i-this.indebt===this.indent)return a?this.suppressNewlines():this.newlineToken(0),t.length;if(i>this.indent){if(a)return this.indebt=i-this.indent,this.suppressNewlines(),t.length;if(!this.tokens.length)return this.baseIndent=this.indent=i,t.length;e=i-this.indent+this.outdebt,this.token("INDENT",e,t.length-i,i),this.indents.push(e),this.ends.push({tag:"OUTDENT"}),this.outdebt=this.indebt=0,this.indent=i}else i<this.baseIndent?this.error("missing indentation",{offset:t.length}):(this.indebt=0,this.outdentToken(this.indent-i,a,t.length));return t.length},e.prototype.outdentToken=function(e,n,a){var i,o,r,l;for(i=this.indent-e;0<e;)r=this.indents[this.indents.length-1],r?r===this.outdebt?(e-=this.outdebt,this.outdebt=0):r<this.outdebt?(this.outdebt-=r,e-=r):(o=this.indents.pop()+this.outdebt,a&&(l=this.chunk[a],0<=t.call(T,l))&&(i-=o-e,e=o),this.outdebt=0,this.pair("OUTDENT"),this.token("OUTDENT",e,0,a),e-=o):e=0;for(o&&(this.outdebt-=e);";"===this.value();)this.tokens.pop();return"TERMINATOR"===this.tag()||n||this.token("TERMINATOR","\n",a,0),this.indent=i,this},e.prototype.whitespaceToken=function(){var e,t,n,a;return(e=se.exec(this.chunk))||(t="\n"===this.chunk.charAt(0))?(a=this.tokens,n=a[a.length-1],n&&(n[e?"spaced":"newLine"]=!0),e?e[0].length:0):0},e.prototype.newlineToken=function(e){for(;";"===this.value();)this.tokens.pop();return"TERMINATOR"!==this.tag()&&this.token("TERMINATOR","\n",e,0),this},e.prototype.suppressNewlines=function(){return"\\"===this.value()&&this.tokens.pop(),this},e.prototype.literalToken=function(){var e,n,i,o,s,d,p,c,u,g,_,y,h;if((e=B.exec(this.chunk))?(h=e[0],l.test(h)&&this.tagParameters()):h=this.chunk.charAt(0),_=h,s=this.tokens,o=s[s.length-1],o&&0<=t.call(["="].concat(a.call(m)),h)&&(g=!1,"="!==h||"||"!==(d=o[1])&&"&&"!==d||o.spaced||(o[0]="COMPOUND_ASSIGN",o[1]+="=",o=this.tokens[this.tokens.length-2],g=!0),o&&"PROPERTY"!==o[0]&&(i=null==(p=o.origin)?o:p,n=fe(o[1],i[1]),n&&this.error(n,i[2])),g))return h.length;if("{"===h&&this.seenImport?this.importSpecifierList=!0:this.importSpecifierList&&"}"===h?this.importSpecifierList=!1:"{"===h&&"EXPORT"===(null==o?void 0:o[0])?this.exportSpecifierList=!0:this.exportSpecifierList&&"}"===h&&(this.exportSpecifierList=!1),";"===h)this.seenFor=this.seenImport=this.seenExport=!1,_="TERMINATOR";else if("*"===h&&"EXPORT"===o[0])_="EXPORT_ALL";else if(0<=t.call(R,h))_="MATH";else if(0<=t.call(f,h))_="COMPARE";else if(0<=t.call(m,h))_="COMPOUND_ASSIGN";else if(0<=t.call(ae,h))_="UNARY";else if(0<=t.call(ie,h))_="UNARY_MATH";else if(0<=t.call(V,h))_="SHIFT";else if("?"===h&&(null==o?void 0:o.spaced))_="BIN?";else if(o&&!o.spaced)if("("===h&&(c=o[0],0<=t.call(r,c)))"?"===o[0]&&(o[0]="FUNC_EXIST"),_="CALL_START";else if("["===h&&(u=o[0],0<=t.call(k,u)))switch(_="INDEX_START",o[0]){case"?":o[0]="INDEX_SOAK";}return y=this.makeToken(_,h),"("===h||"{"===h||"["===h?this.ends.push({tag:N[h],origin:y}):")"===h||"}"===h||"]"===h?this.pair(h):void 0,(this.tokens.push(y),h.length)},e.prototype.tagParameters=function(){var e,t,n,a;if(")"!==this.tag())return this;for(t=[],a=this.tokens,e=a.length,a[--e][0]="PARAM_END";n=a[--e];)switch(n[0]){case")":t.push(n);break;case"(":case"CALL_START":if(t.length)t.pop();else return"("===n[0]?(n[0]="PARAM_START",this):this;}return this},e.prototype.closeIndentation=function(){return this.outdentToken(this.indent)},e.prototype.matchWithInterpolations=function(t,n){var a,i,o,r,l,s,d,p,c,u,f,m,g,_,y;if(y=[],p=n.length,this.chunk.slice(0,p)!==n)return null;for(g=this.chunk.slice(p);_=t.exec(g)[0],this.validateEscapes(_,{isRegex:"/"===n.charAt(0),offsetInChunk:p}),y.push(this.makeToken("NEOSTRING",_,p)),g=g.slice(_.length),p+=_.length,"#{"===g.slice(0,2);)u=this.getLineAndColumnFromChunk(p+1),s=u[0],i=u[1],f=new e().tokenize(g.slice(1),{line:s,column:i,untilBalanced:!0}),d=f.tokens,r=f.index,r+=1,c=d[0],a=d[d.length-1],c[0]=c[1]="(",a[0]=a[1]=")",a.origin=["","end of interpolation",a[2]],"TERMINATOR"===(null==(m=d[1])?void 0:m[0])&&d.splice(1,1),y.push(["TOKENS",d]),g=g.slice(r),p+=r;return g.slice(0,n.length)!==n&&this.error("missing "+n,{length:n.length}),o=y[0],l=y[y.length-1],o[2].first_column-=n.length,"\n"===l[1].substr(-1)?(l[2].last_line+=1,l[2].last_column=n.length-1):l[2].last_column+=n.length,0===l[1].length&&(l[2].last_column-=1),{tokens:y,index:p+n.length}},e.prototype.mergeInterpolationTokens=function(e,t,n){var a,o,r,l,i,s,d,p,c,u,f,m,g,_,y,h;for(1<e.length&&(c=this.token("STRING_START","(",0,0)),r=this.tokens.length,(l=i=0,d=e.length);i<d;l=++i){switch(_=e[l],g=_[0],h=_[1],g){case"TOKENS":if(2===h.length)continue;p=h[0],y=h;break;case"NEOSTRING":if(a=n.call(this,_[1],l),0===a.length)if(0===l)o=this.tokens.length;else continue;2===l&&null!=o&&this.tokens.splice(o,2),_[0]="STRING",_[1]=this.makeDelimitedLiteral(a,t),p=_,y=[_];}this.tokens.length>r&&(u=this.token("+","+"),u[2]={first_line:p[2].first_line,first_column:p[2].first_column,last_line:p[2].first_line,last_column:p[2].first_column}),(f=this.tokens).push.apply(f,y)}if(c)return s=e[e.length-1],c.origin=["STRING",null,{first_line:c[2].first_line,first_column:c[2].first_column,last_line:s[2].last_line,last_column:s[2].last_column}],m=this.token("STRING_END",")"),m[2]={first_line:s[2].last_line,first_column:s[2].last_column,last_line:s[2].last_line,last_column:s[2].last_column}},e.prototype.pair=function(e){var t,n,a,i,o;return a=this.ends,n=a[a.length-1],e===(o=null==n?void 0:n.tag)?this.ends.pop():("OUTDENT"!==o&&this.error("unmatched "+e),i=this.indents,t=i[i.length-1],this.outdentToken(t,!0),this.pair(e))},e.prototype.getLineAndColumnFromChunk=function(e){var t,n,a,i,o;return 0===e?[this.chunkLine,this.chunkColumn]:(o=e>=this.chunk.length?this.chunk:this.chunk.slice(0,+(e-1)+1||9e9),a=pe(o,"\n"),t=this.chunkColumn,0<a?(i=o.split("\n"),n=i[i.length-1],t=n.length):t+=o.length,[this.chunkLine+a,t])},e.prototype.makeToken=function(e,t,n,a){var i,o,r,l,s;return null==n&&(n=0),null==a&&(a=t.length),o={},r=this.getLineAndColumnFromChunk(n),o.first_line=r[0],o.first_column=r[1],i=0<a?a-1:0,l=this.getLineAndColumnFromChunk(n+i),o.last_line=l[0],o.last_column=l[1],s=[e,t,o],s},e.prototype.token=function(e,t,n,a,i){var o;return o=this.makeToken(e,t,n,a),i&&(o.origin=i),this.tokens.push(o),o},e.prototype.tag=function(){var e,t;return e=this.tokens,t=e[e.length-1],null==t?void 0:t[0]},e.prototype.value=function(){var e,t;return e=this.tokens,t=e[e.length-1],null==t?void 0:t[1]},e.prototype.unfinished=function(){var e;return D.test(this.chunk)||(e=this.tag(),0<=t.call(oe,e))},e.prototype.formatString=function(e,t){return this.replaceUnicodeCodePointEscapes(e.replace(J,"$1"),t)},e.prototype.formatHeregex=function(e){return this.formatRegex(e.replace(x,"$1$2"),{delimiter:"///"})},e.prototype.formatRegex=function(e,t){return this.replaceUnicodeCodePointEscapes(e,t)},e.prototype.unicodeCodePointToUnicodeEscapes=function(e){var t,n,a;return(a=function(e){var t;return t=e.toString(16),"\\u"+he("0",4-t.length)+t},65536>e)?a(e):(t=E((e-65536)/1024)+55296,n=(e-65536)%1024+56320,""+a(t)+a(n))},e.prototype.replaceUnicodeCodePointEscapes=function(e,t){return e.replace(re,function(e){return function(n,a,i,o){var r;return a?a:(r=parseInt(i,16),1114111<r&&e.error("unicode code point escapes greater than \\u{10ffff} are not allowed",{offset:o+t.delimiter.length,length:i.length+4}),e.unicodeCodePointToUnicodeEscapes(r))}}(this))},e.prototype.validateEscapes=function(e,t){var n,a,i,o,r,l,s,d,p,c;if(null==t&&(t={}),o=t.isRegex?W:K,r=o.exec(e),!!r)return r[0],n=r[1],s=r[2],a=r[3],c=r[4],p=r[5],l=s?"octal escape sequences are not allowed":"invalid escape sequence",i="\\"+(s||a||c||p),this.error(l+" "+i,{offset:(null==(d=t.offsetInChunk)?0:d)+r.index+n.length,length:i.length})},e.prototype.makeDelimitedLiteral=function(e,t){var n;return null==t&&(t={}),""===e&&"/"===t.delimiter&&(e="(?:)"),n=RegExp("(\\\\\\\\)|(\\\\0(?=[1-7]))|\\\\?("+t.delimiter+")|\\\\?(?:(\\n)|(\\r)|(\\u2028)|(\\u2029))|(\\\\.)","g"),e=e.replace(n,function(e,n,a,i,o,r,l,s,d){switch(!1){case!n:return t.double?n+n:n;case!a:return"\\x00";case!i:return"\\"+i;case!o:return"\\n";case!r:return"\\r";case!l:return"\\u2028";case!s:return"\\u2029";case!d:return t.double?"\\"+d:d;}}),""+t.delimiter+e+t.delimiter},e.prototype.error=function(e,t){var n,a,i,o,r,l;return null==t&&(t={}),i="first_line"in t?t:(r=this.getLineAndColumnFromChunk(null==(o=t.offset)?0:o),a=r[0],n=r[1],r,{first_line:a,first_column:n,last_column:n+(null==(l=t.length)?1:l)-1}),xe(e,i)},e}(),fe=function(e,n){switch(null==n&&(n=e),!1){case 0>t.call(a.call(w).concat(a.call(c)),e):return"keyword '"+n+"' can't be assigned";case 0>t.call(Z,e):return"'"+n+"' can't be assigned";case 0>t.call(H,e):return"reserved word '"+n+"' can't be assigned";default:return!1;}},n.isUnassignable=fe,ue=function(e){var t;return"IDENTIFIER"===e[0]?("from"===e[1]&&(e[1][0]="IDENTIFIER",!0),!0):"FOR"!==e[0]&&("{"===(t=e[1])||"["===t||","===t||":"===t?!1:!0)},w=["true","false","null","this","new","delete","typeof","in","instanceof","return","throw","break","continue","debugger","yield","if","else","switch","for","while","do","try","catch","finally","class","extends","super","import","export","default"],c=["undefined","Infinity","NaN","then","unless","until","loop","of","by","when"],d={and:"&&",or:"||",is:"==",isnt:"!=",not:"!",yes:"true",no:"false",on:"true",off:"false"},s=function(){var e;for(me in e=[],d)e.push(me);return e}(),c=c.concat(s),H=["case","function","var","void","with","const","let","enum","native","implements","interface","package","private","protected","public","static"],Z=["arguments","eval"],n.JS_FORBIDDEN=w.concat(H).concat(Z),i=65279,S=/^(?!\d)((?:(?!\s)[$\w\x7f-\uffff])+)([^\n\S]*:(?!:))?/,F=/^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i,B=/^(?:[-=]>|[-+*\/%<>&|^!?=]=|>>>=?|([-+:])\1|([&|<>*\/%])\2=?|\?(\.|::)|\.{2,3})/,se=/^[^\n\S]+/,u=/^###([^#][\s\S]*?)(?:###[^\n\S]*|###$)|^(?:\s*#(?!##[^#]).*)+/,l=/^[-=]>/,I=/^(?:\n[^\n\S]*)+/,A=/^`(?!``)((?:[^`\\]|\\[\s\S])*)`/,v=/^```((?:[^`\\]|\\[\s\S]|`(?!``))*)```/,ee=/^(?:'''|"""|'|")/,Q=/^(?:[^\\']|\\[\s\S])*/,X=/^(?:[^\\"#]|\\[\s\S]|\#(?!\{))*/,h=/^(?:[^\\']|\\[\s\S]|'(?!''))*/,_=/^(?:[^\\"#]|\\[\s\S]|"(?!"")|\#(?!\{))*/,J=/((?:\\\\)+)|\\[^\S\n]*\n\s*/g,G=/\s*\n\s*/g,y=/\n+([^\n\S]*)(?=\S)/g,j=/^\/(?!\/)((?:[^[\/\n\\]|\\[^\n]|\[(?:\\[^\n]|[^\]\n\\])*\])*)(\/)?/,U=/^\w*/,le=/^(?!.*(.).*\1)[imguy]*$/,b=/^(?:[^\\\/#]|\\[\s\S]|\/(?!\/\/)|\#(?!\{))*/,x=/((?:\\\\)+)|\\(\s)|\s+(?:#.*)?/g,$=/^(\/|\/{3}\s*)(\*)/,z=/^\/=?\s/,g=/\*\//,D=/^\s*(?:,|\??\.(?![.\d])|::)/,K=/((?:^|[^\\])(?:\\\\)*)\\(?:(0[0-7]|[1-7])|(x(?![\da-fA-F]{2}).{0,2})|(u\{(?![\da-fA-F]{1,}\})[^}]*\}?)|(u(?!\{|[\da-fA-F]{4}).{0,4}))/,W=/((?:^|[^\\])(?:\\\\)*)\\(?:(0[0-7])|(x(?![\da-fA-F]{2}).{0,2})|(u\{(?![\da-fA-F]{1,}\})[^}]*\}?)|(u(?!\{|[\da-fA-F]{4}).{0,4}))/,re=/(\\\\)|\\u\{([\da-fA-F]+)\}/g,C=/^[^\n\S]*\n/,te=/\n[^\n\S]*$/,ne=/\s+$/,m=["-=","+=","/=","*=","%=","||=","&&=","?=","<<=",">>=",">>>=","&=","^=","|=","**=","//=","%%="],ae=["NEW","TYPEOF","DELETE","DO"],ie=["!","~"],V=["<<",">>",">>>"],f=["==","!=","<",">","<=",">="],R=["*","/","%","//","%%"],q=["IN","OF","INSTANCEOF"],o=["TRUE","FALSE"],r=["IDENTIFIER","PROPERTY",")","]","?","@","THIS","SUPER"],k=r.concat(["NUMBER","INFINITY","NAN","STRING","STRING_END","REGEX","REGEX_END","BOOL","NULL","UNDEFINED","}","::"]),M=k.concat(["++","--"]),O=["INDENT","OUTDENT","TERMINATOR"],T=[")","}","]"],oe=["\\",".","?.","?::","UNARY","MATH","UNARY_MATH","+","-","**","SHIFT","RELATION","COMPARE","&","^","|","&&","||","BIN?","THROW","EXTENDS","DEFAULT"]}).call(this)},{"./helpers":41,"./rewriter":46}],43:[function(e,t,n){(function(){var t=function(e,t){function n(){this.constructor=e}for(var i in t)a.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},s=[].slice,r,d,c,o,u,l,f,p,m,g,_,y,h,b,x,v,S,k,E,N,A,w,C,O,D,P,R,I,M,F,B,z,U,$,j,W,q,H,Y,V,G,Z,X,K,J,Q,ee,te,ne,ae,ie,oe,re,le,se,de,pe,ce,ue,fe,me,ge,_e,ye,he,be,xe,ve,Se,Te,ke,Ee,Ne,Le,Ae,we,Ce,Oe,De,Pe,Re,Ie,Me,Fe,Be,ze,je,Ue,$e,We,qe,He,Ye,Ve,Ge,Ze,Xe,Ke,Je,Qe;Error.stackTraceLimit=2e308,fe=e("./scope").Scope,Ve=e("./lexer"),We=Ve.isUnassignable,U=Ve.JS_FORBIDDEN,Ge=e("./helpers"),Re=Ge.compact,Be=Ge.flatten,Fe=Ge.extend,He=Ge.merge,Ie=Ge.del,Xe=Ge.starts,Me=Ge.ends,Ze=Ge.some,Pe=Ge.addLocationDataFn,qe=Ge.locationDataToString,Ke=Ge.throwSyntaxError,n.extend=Fe,n.addLocationDataFn=Pe,Oe=function(){return!0},J=function(){return!1},Se=function(){return this},K=function(){return this.negated=!this.negated,this},n.CodeFragment=g=function(){function e(e,t){var n;this.code=""+t,this.locationData=null==e?void 0:e.locationData,this.type=(null==e||null==(n=e.constructor)?void 0:n.name)||"unknown"}return e.prototype.toString=function(){return""+this.code+(this.locationData?": "+qe(this.locationData):"")},e}(),ze=function(e){var t;return function(){var n,a,i;for(i=[],n=0,a=e.length;n<a;n++)t=e[n],i.push(t.code);return i}().join("")},n.Base=o=function(){function e(){}return e.prototype.compile=function(e,t){return ze(this.compileToFragments(e,t))},e.prototype.compileToFragments=function(e,t){var n;return e=Fe({},e),t&&(e.level=t),n=this.unfoldSoak(e)||this,n.tab=e.indent,e.level!==Y&&n.isStatement(e)?n.compileClosure(e):n.compileNode(e)},e.prototype.compileClosure=function(e){var t,n,a,i,o,l,s;return(i=this.jumps())&&i.error("cannot use a pure statement in an expression"),e.sharedScope=!0,a=new m([],u.wrap([this])),t=[],((n=this.contains(Ue))||this.contains($e))&&(t=[new ke],n?(o="apply",t.push(new w("arguments"))):o="call",a=new we(a,[new r(new le(o))])),l=new f(a,t).compileNode(e),(a.isGenerator||(null==(s=a.base)?void 0:s.isGenerator))&&(l.unshift(this.makeCode("(yield* ")),l.push(this.makeCode(")"))),l},e.prototype.cache=function(e,t,n){var a,i,o;return a=null==n?this.isComplex():n(this),a?(i=new w(e.scope.freeVariable("ref")),o=new c(i,this),t?[o.compileToFragments(e,t),[this.makeCode(i.value)]]:[o,i]):(i=t?this.compileToFragments(e,t):this,[i,i])},e.prototype.cacheToCodeFragments=function(e){return[ze(e[0]),ze(e[1])]},e.prototype.makeReturn=function(e){var t;return t=this.unwrapAll(),e?new f(new V(e+".push"),[t]):new ce(t)},e.prototype.contains=function(e){var t;return t=void 0,this.traverseChildren(!1,function(a){if(e(a))return t=a,!1}),t},e.prototype.lastNonComment=function(e){var t;for(t=e.length;t--;)if(!(e[t]instanceof _))return e[t];return null},e.prototype.toString=function(e,t){var n;return null==e&&(e=""),null==t&&(t=this.constructor.name),n="\n"+e+t,this.soak&&(n+="?"),this.eachChild(function(t){return n+=t.toString(e+ve)}),n},e.prototype.eachChild=function(e){var t,n,a,i,o,r,l,s;if(!this.children)return this;for(l=this.children,a=0,o=l.length;a<o;a++)if(t=l[a],this[t])for(s=Be([this[t]]),i=0,r=s.length;i<r;i++)if(n=s[i],!1===e(n))return this;return this},e.prototype.traverseChildren=function(e,t){return this.eachChild(function(n){var a;if(a=t(n),!1!==a)return n.traverseChildren(e,t)})},e.prototype.invert=function(){return new ae("!",this)},e.prototype.unwrapAll=function(){var e;for(e=this;e!==(e=e.unwrap());)continue;return e},e.prototype.children=[],e.prototype.isStatement=J,e.prototype.jumps=J,e.prototype.isComplex=Oe,e.prototype.isChainable=J,e.prototype.isAssignable=J,e.prototype.isNumber=J,e.prototype.unwrap=Se,e.prototype.unfoldSoak=J,e.prototype.assigns=J,e.prototype.updateLocationDataIfMissing=function(e){return this.locationData?this:(this.locationData=e,this.eachChild(function(t){return t.updateLocationDataIfMissing(e)}))},e.prototype.error=function(e){return Ke(e,this.locationData)},e.prototype.makeCode=function(e){return new g(this,e)},e.prototype.wrapInBraces=function(e){return[].concat(this.makeCode("("),e,this.makeCode(")"))},e.prototype.joinFragmentArrays=function(e,t){var n,a,o,i,r;for(n=[],o=i=0,r=e.length;i<r;o=++i)a=e[o],o&&n.push(this.makeCode(t)),n=n.concat(a);return n},e}(),n.Block=u=function(e){function n(e){this.expressions=Re(Be(e||[]))}return t(n,e),n.prototype.children=["expressions"],n.prototype.push=function(e){return this.expressions.push(e),this},n.prototype.pop=function(){return this.expressions.pop()},n.prototype.unshift=function(e){return this.expressions.unshift(e),this},n.prototype.unwrap=function(){return 1===this.expressions.length?this.expressions[0]:this},n.prototype.isEmpty=function(){return!this.expressions.length},n.prototype.isStatement=function(e){var t,n,a,i;for(i=this.expressions,n=0,a=i.length;n<a;n++)if(t=i[n],t.isStatement(e))return!0;return!1},n.prototype.jumps=function(e){var t,n,a,i,o;for(o=this.expressions,n=0,i=o.length;n<i;n++)if(t=o[n],a=t.jumps(e))return a},n.prototype.makeReturn=function(e){var t,n;for(n=this.expressions.length;n--;)if(t=this.expressions[n],!(t instanceof _)){this.expressions[n]=t.makeReturn(e),t instanceof ce&&!t.expression&&this.expressions.splice(n,1);break}return this},n.prototype.compileToFragments=function(e,t){return null==e&&(e={}),e.scope?n.__super__.compileToFragments.call(this,e,t):this.compileRoot(e)},n.prototype.compileNode=function(e){var t,a,i,o,r,l,s,d,p;for(this.tab=e.indent,p=e.level===Y,a=[],d=this.expressions,(o=r=0,l=d.length);r<l;o=++r)s=d[o],s=s.unwrapAll(),s=s.unfoldSoak(e)||s,s instanceof n?a.push(s.compileNode(e)):p?(s.front=!0,i=s.compileToFragments(e),!s.isStatement(e)&&(i.unshift(this.makeCode(""+this.tab)),i.push(this.makeCode(";"))),a.push(i)):a.push(s.compileToFragments(e,W));return p?this.spaced?[].concat(this.joinFragmentArrays(a,"\n\n"),this.makeCode("\n")):this.joinFragmentArrays(a,"\n"):(t=a.length?this.joinFragmentArrays(a,", "):[this.makeCode("void 0")],1<a.length&&e.level>=W?this.wrapInBraces(t):t)},n.prototype.compileRoot=function(e){var t,n,a,i,o,r,l,s,d,p,c;for(e.indent=e.bare?"":ve,e.level=Y,this.spaced=!0,e.scope=new fe(null,this,null,null==(d=e.referencedVars)?[]:d),p=e.locals||[],(i=0,o=p.length);i<o;i++)r=p[i],e.scope.parameter(r);return l=[],e.bare||(s=function(){var e,n,i,o;for(i=this.expressions,o=[],(a=e=0,n=i.length);e<n&&(t=i[a],!!(t.unwrap()instanceof _));a=++e)o.push(t);return o}.call(this),c=this.expressions.slice(s.length),this.expressions=s,s.length&&(l=this.compileNode(He(e,{indent:""})),l.push(this.makeCode("\n"))),this.expressions=c),n=this.compileWithDeclarations(e),e.bare?n:[].concat(l,this.makeCode("(function() {\n"),n,this.makeCode("\n}).call(this);\n"))},n.prototype.compileWithDeclarations=function(e){var t,n,a,o,r,i,l,s,d,p,c,u,f,m;for(o=[],s=[],d=this.expressions,(r=i=0,l=d.length);i<l&&(a=d[r],a=a.unwrap(),!!(a instanceof _||a instanceof V));r=++i);return e=He(e,{level:Y}),r&&(u=this.expressions.splice(r,9e9),p=[this.spaced,!1],m=p[0],this.spaced=p[1],c=[this.compileNode(e),m],o=c[0],this.spaced=c[1],this.expressions=u),s=this.compileNode(e),f=e.scope,f.expressions===this&&(n=e.scope.hasDeclarations(),t=f.hasAssignments,n||t?(r&&o.push(this.makeCode("\n")),o.push(this.makeCode(this.tab+"var ")),n&&o.push(this.makeCode(f.declaredVariables().join(", "))),t&&(n&&o.push(this.makeCode(",\n"+(this.tab+ve))),o.push(this.makeCode(f.assignedVariables().join(",\n"+(this.tab+ve))))),o.push(this.makeCode(";\n"+(this.spaced?"\n":"")))):o.length&&s.length&&o.push(this.makeCode("\n"))),o.concat(s)},n.wrap=function(e){return 1===e.length&&e[0]instanceof n?e[0]:new n(e)},n}(o),n.Literal=V=function(e){function n(e){this.value=e}return t(n,e),n.prototype.isComplex=J,n.prototype.assigns=function(e){return e===this.value},n.prototype.compileNode=function(){return[this.makeCode(this.value)]},n.prototype.toString=function(){return" "+(this.isStatement()?n.__super__.toString.apply(this,arguments):this.constructor.name)+": "+this.value},n}(o),n.NumberLiteral=te=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(V),n.InfinityLiteral=z=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(){return[this.makeCode("2e308")]},n}(te),n.NaNLiteral=Q=function(e){function n(){n.__super__.constructor.call(this,"NaN")}return t(n,e),n.prototype.compileNode=function(e){var t;return t=[this.makeCode("0/0")],e.level>=q?this.wrapInBraces(t):t},n}(te),n.StringLiteral=ye=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(V),n.RegexLiteral=de=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(V),n.PassthroughLiteral=re=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(V),n.IdentifierLiteral=w=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isAssignable=Oe,n}(V),n.PropertyName=le=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isAssignable=Oe,n}(V),n.StatementLiteral=_e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isStatement=Oe,n.prototype.makeReturn=Se,n.prototype.jumps=function(e){return"break"!==this.value||(null==e?void 0:e.loop)||(null==e?void 0:e.block)?"continue"!==this.value||null!=e&&e.loop?void 0:this:this},n.prototype.compileNode=function(){return[this.makeCode(""+this.tab+this.value+";")]},n}(V),n.ThisLiteral=ke=function(e){function n(){n.__super__.constructor.call(this,"this")}return t(n,e),n.prototype.compileNode=function(e){var t,n;return t=(null==(n=e.scope.method)?void 0:n.bound)?e.scope.method.context:this.value,[this.makeCode(t)]},n}(V),n.UndefinedLiteral=Ae=function(e){function n(){n.__super__.constructor.call(this,"undefined")}return t(n,e),n.prototype.compileNode=function(e){return[this.makeCode(e.level>=$?"(void 0)":"void 0")]},n}(V),n.NullLiteral=ee=function(e){function n(){n.__super__.constructor.call(this,"null")}return t(n,e),n}(V),n.BooleanLiteral=l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(V),n.Return=ce=function(e){function n(e){this.expression=e}return t(n,e),n.prototype.children=["expression"],n.prototype.isStatement=Oe,n.prototype.makeReturn=Se,n.prototype.jumps=Se,n.prototype.compileToFragments=function(e,t){var a,i;return a=null==(i=this.expression)?void 0:i.makeReturn(),a&&!(a instanceof n)?a.compileToFragments(e,t):n.__super__.compileToFragments.call(this,e,t)},n.prototype.compileNode=function(e){var t;return t=[],t.push(this.makeCode(this.tab+("return"+(this.expression?" ":"")))),this.expression&&(t=t.concat(this.expression.compileToFragments(e,H))),t.push(this.makeCode(";")),t},n}(o),n.YieldReturn=De=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){return null==e.scope.parent&&this.error("yield can only occur inside functions"),n.__super__.compileNode.apply(this,arguments)},n}(ce),n.Value=we=function(e){function n(e,t,a){return!t&&e instanceof n?e:(this.base=e,this.properties=t||[],a&&(this[a]=!0),this)}return t(n,e),n.prototype.children=["base","properties"],n.prototype.add=function(e){return this.properties=this.properties.concat(e),this},n.prototype.hasProperties=function(){return!!this.properties.length},n.prototype.bareLiteral=function(e){return!this.properties.length&&this.base instanceof e},n.prototype.isArray=function(){return this.bareLiteral(d)},n.prototype.isRange=function(){return this.bareLiteral(se)},n.prototype.isComplex=function(){return this.hasProperties()||this.base.isComplex()},n.prototype.isAssignable=function(){return this.hasProperties()||this.base.isAssignable()},n.prototype.isNumber=function(){return this.bareLiteral(te)},n.prototype.isString=function(){return this.bareLiteral(ye)},n.prototype.isRegex=function(){return this.bareLiteral(de)},n.prototype.isUndefined=function(){return this.bareLiteral(Ae)},n.prototype.isNull=function(){return this.bareLiteral(ee)},n.prototype.isBoolean=function(){return this.bareLiteral(l)},n.prototype.isAtomic=function(){var e,t,n,a;for(a=this.properties.concat(this.base),e=0,t=a.length;e<t;e++)if(n=a[e],n.soak||n instanceof f)return!1;return!0},n.prototype.isNotCallable=function(){return this.isNumber()||this.isString()||this.isRegex()||this.isArray()||this.isRange()||this.isSplice()||this.isObject()||this.isUndefined()||this.isNull()||this.isBoolean()},n.prototype.isStatement=function(e){return!this.properties.length&&this.base.isStatement(e)},n.prototype.assigns=function(e){return!this.properties.length&&this.base.assigns(e)},n.prototype.jumps=function(e){return!this.properties.length&&this.base.jumps(e)},n.prototype.isObject=function(e){return!this.properties.length&&this.base instanceof ne&&(!e||this.base.generated)},n.prototype.isSplice=function(){var e,t;return t=this.properties,e=t[t.length-1],e instanceof me},n.prototype.looksStatic=function(e){var t;return this.base.value===e&&1===this.properties.length&&"prototype"!==(null==(t=this.properties[0].name)?void 0:t.value)},n.prototype.unwrap=function(){return this.properties.length?this:this.base},n.prototype.cacheReference=function(e){var t,a,i,o,r;return(r=this.properties,i=r[r.length-1],2>this.properties.length&&!this.base.isComplex()&&(null==i||!i.isComplex()))?[this,this]:(t=new n(this.base,this.properties.slice(0,-1)),t.isComplex()&&(a=new w(e.scope.freeVariable("base")),t=new n(new oe(new c(a,t)))),!i)?[t,a]:(i.isComplex()&&(o=new w(e.scope.freeVariable("name")),i=new B(new c(o,i.index)),o=new B(o)),[t.add(i),new n(a||t.base,[o||i])])},n.prototype.compileNode=function(e){var t,n,a,i,o;for(this.base.front=this.front,o=this.properties,t=this.base.compileToFragments(e,o.length?$:null),o.length&&ue.test(ze(t))&&t.push(this.makeCode(".")),(n=0,a=o.length);n<a;n++)i=o[n],t.push.apply(t,i.compileToFragments(e));return t},n.prototype.unfoldSoak=function(e){return null==this.unfoldedSoak?this.unfoldedSoak=function(t){return function(){var a,o,i,r,l,s,d,p,u,f;if(i=t.base.unfoldSoak(e))return(p=i.body.properties).push.apply(p,t.properties),i;for(u=t.properties,o=r=0,l=u.length;r<l;o=++r)if(s=u[o],!!s.soak)return s.soak=!1,a=new n(t.base,t.properties.slice(0,o)),f=new n(t.base,t.properties.slice(o)),a.isComplex()&&(d=new w(e.scope.freeVariable("ref")),a=new oe(new c(d,a)),f.base=d),new C(new y(a),f,{soak:!0});return!1}}(this)():this.unfoldedSoak},n}(o),n.Comment=_=function(e){function n(e){this.comment=e}return t(n,e),n.prototype.isStatement=Oe,n.prototype.makeReturn=Se,n.prototype.compileNode=function(e,t){var n,a;return a=this.comment.replace(/^(\s*)#(?=\s)/gm,"$1 *"),n="/*"+Ye(a,this.tab)+(0<=i.call(a,"\n")?"\n"+this.tab:"")+" */",(t||e.level)===Y&&(n=e.indent+n),[this.makeCode("\n"),this.makeCode(n)]},n}(o),n.Call=f=function(e){function n(e,t,n){this.variable=e,this.args=null==t?[]:t,this.soak=n,this.isNew=!1,this.variable instanceof we&&this.variable.isNotCallable()&&this.variable.error("literal is not a function")}return t(n,e),n.prototype.children=["variable","args"],n.prototype.updateLocationDataIfMissing=function(e){var t,a;return this.locationData&&this.needsUpdatedStartLocation&&(this.locationData.first_line=e.first_line,this.locationData.first_column=e.first_column,t=(null==(a=this.variable)?void 0:a.base)||this.variable,t.needsUpdatedStartLocation&&(this.variable.locationData.first_line=e.first_line,this.variable.locationData.first_column=e.first_column,t.updateLocationDataIfMissing(e)),delete this.needsUpdatedStartLocation),n.__super__.updateLocationDataIfMissing.apply(this,arguments)},n.prototype.newInstance=function(){var e,t;return e=(null==(t=this.variable)?void 0:t.base)||this.variable,e instanceof n&&!e.isNew?e.newInstance():this.isNew=!0,this.needsUpdatedStartLocation=!0,this},n.prototype.unfoldSoak=function(e){var t,a,i,o,r,l,s,d,p;if(this.soak){if(this instanceof be)o=new V(this.superReference(e)),p=new we(o);else{if(a=Je(e,this,"variable"))return a;s=new we(this.variable).cacheReference(e),o=s[0],p=s[1]}return p=new n(p,this.args),p.isNew=this.isNew,o=new V("typeof "+o.compile(e)+" === \"function\""),new C(o,new we(p),{soak:!0})}for(t=this,l=[];;){if(t.variable instanceof n){l.push(t),t=t.variable;continue}if(!(t.variable instanceof we))break;if(l.push(t),!((t=t.variable.base)instanceof n))break}for(d=l.reverse(),i=0,r=d.length;i<r;i++)t=d[i],a&&(t.variable instanceof n?t.variable=a:t.variable.base=a),a=Je(e,t,"variable");return a},n.prototype.compileNode=function(e){var t,n,a,i,o,r,l,s,d,p;if(null!=(d=this.variable)&&(d.front=this.front),i=ge.compileSplattedArray(e,this.args,!0),i.length)return this.compileSplat(e,i);for(a=[],p=this.args,(n=r=0,l=p.length);r<l;n=++r)t=p[n],n&&a.push(this.makeCode(", ")),a.push.apply(a,t.compileToFragments(e,W));return o=[],this instanceof be?(s=this.superReference(e)+(".call("+this.superThis(e)),a.length&&(s+=", "),o.push(this.makeCode(s))):(this.isNew&&o.push(this.makeCode("new ")),o.push.apply(o,this.variable.compileToFragments(e,$)),o.push(this.makeCode("("))),o.push.apply(o,a),o.push(this.makeCode(")")),o},n.prototype.compileSplat=function(e,t){var n,a,i,o,r,l;return this instanceof be?[].concat(this.makeCode(this.superReference(e)+".apply("+this.superThis(e)+", "),t,this.makeCode(")")):this.isNew?(o=this.tab+ve,[].concat(this.makeCode("(function(func, args, ctor) {\n"+o+"ctor.prototype = func.prototype;\n"+o+"var child = new ctor, result = func.apply(child, args);\n"+o+"return Object(result) === result ? result : child;\n"+this.tab+"})("),this.variable.compileToFragments(e,W),this.makeCode(", "),t,this.makeCode(", function(){})"))):(n=[],a=new we(this.variable),(r=a.properties.pop())&&a.isComplex()?(l=e.scope.freeVariable("ref"),n=n.concat(this.makeCode("("+l+" = "),a.compileToFragments(e,W),this.makeCode(")"),r.compileToFragments(e))):(i=a.compileToFragments(e,$),ue.test(ze(i))&&(i=this.wrapInBraces(i)),r?(l=ze(i),i.push.apply(i,r.compileToFragments(e))):l="null",n=n.concat(i)),n=n.concat(this.makeCode(".apply("+l+", "),t,this.makeCode(")")))},n}(o),n.SuperCall=be=function(e){function n(e){n.__super__.constructor.call(this,null,null==e?[new ge(new w("arguments"))]:e),this.isBare=null!=e}return t(n,e),n.prototype.superReference=function(e){var t,n,a,i,o,l,s,d;return o=e.scope.namedMethod(),(null==o?void 0:o.klass)?(i=o.klass,l=o.name,d=o.variable,i.isComplex()&&(a=new w(e.scope.parent.freeVariable("base")),n=new we(new oe(new c(a,i))),d.base=n,d.properties.splice(0,i.properties.length)),(l.isComplex()||l instanceof B&&l.index.isAssignable())&&(s=new w(e.scope.parent.freeVariable("name")),l=new B(new c(s,l.index)),d.properties.pop(),d.properties.push(l)),t=[new r(new le("__super__"))],o["static"]&&t.push(new r(new le("constructor"))),t.push(null==s?l:new B(s)),new we(null==a?i:a,t).compile(e)):(null==o?void 0:o.ctor)?o.name+".__super__.constructor":this.error("cannot call super outside of an instance method.")},n.prototype.superThis=function(e){var t;return t=e.scope.method,t&&!t.klass&&t.context||"this"},n}(f),n.RegexWithInterpolations=pe=function(e){function n(e){null==e&&(e=[]),n.__super__.constructor.call(this,new we(new w("RegExp")),e,!1)}return t(n,e),n}(f),n.TaggedTemplateCall=Te=function(e){function n(e,t,a){t instanceof ye&&(t=new he(u.wrap([new we(t)]))),n.__super__.constructor.call(this,e,[t],a)}return t(n,e),n.prototype.compileNode=function(e){return e.inTaggedTemplateCall=!0,this.variable.compileToFragments(e,$).concat(this.args[0].compileToFragments(e,W))},n}(f),n.Extends=N=function(e){function n(e,t){this.child=e,this.parent=t}return t(n,e),n.prototype.children=["child","parent"],n.prototype.compileToFragments=function(e){return new f(new we(new V(Qe("extend",e))),[this.child,this.parent]).compileToFragments(e)},n}(o),n.Access=r=function(e){function n(e,t){this.name=e,this.soak="soak"===t}return t(n,e),n.prototype.children=["name"],n.prototype.compileToFragments=function(e){var t,n,a;return t=this.name.compileToFragments(e),n=this.name.unwrap(),n instanceof le?(a=n.value,0<=i.call(U,a))?[this.makeCode("[\"")].concat(s.call(t),[this.makeCode("\"]")]):[this.makeCode(".")].concat(s.call(t)):[this.makeCode("[")].concat(s.call(t),[this.makeCode("]")])},n.prototype.isComplex=J,n}(o),n.Index=B=function(e){function n(e){this.index=e}return t(n,e),n.prototype.children=["index"],n.prototype.compileToFragments=function(e){return[].concat(this.makeCode("["),this.index.compileToFragments(e,H),this.makeCode("]"))},n.prototype.isComplex=function(){return this.index.isComplex()},n}(o),n.Range=se=function(e){function n(e,t,n){this.from=e,this.to=t,this.exclusive="exclusive"===n,this.equals=this.exclusive?"":"="}return t(n,e),n.prototype.children=["from","to"],n.prototype.compileVariables=function(e){var t,n,a,i,o;return e=He(e,{top:!0}),t=Ie(e,"isComplex"),n=this.cacheToCodeFragments(this.from.cache(e,W,t)),this.fromC=n[0],this.fromVar=n[1],a=this.cacheToCodeFragments(this.to.cache(e,W,t)),this.toC=a[0],this.toVar=a[1],(o=Ie(e,"step"))&&(i=this.cacheToCodeFragments(o.cache(e,W,t)),this.step=i[0],this.stepVar=i[1]),this.fromNum=this.from.isNumber()?+this.fromVar:null,this.toNum=this.to.isNumber()?+this.toVar:null,this.stepNum=(null==o?void 0:o.isNumber())?+this.stepVar:null},n.prototype.compileNode=function(e){var t,n,a,i,o,r,l,s,d,p,c,u,f,m;return(this.fromVar||this.compileVariables(e),!e.index)?this.compileArray(e):(l=null!=this.fromNum&&null!=this.toNum,o=Ie(e,"index"),r=Ie(e,"name"),d=r&&r!==o,m=o+" = "+this.fromC,this.toC!==this.toVar&&(m+=", "+this.toC),this.step!==this.stepVar&&(m+=", "+this.step),p=[o+" <"+this.equals,o+" >"+this.equals],s=p[0],i=p[1],n=null==this.stepNum?l?(c=[this.fromNum,this.toNum],a=c[0],f=c[1],c,a<=f?s+" "+f:i+" "+f):(t=this.stepVar?this.stepVar+" > 0":this.fromVar+" <= "+this.toVar,t+" ? "+s+" "+this.toVar+" : "+i+" "+this.toVar):0<this.stepNum?s+" "+this.toVar:i+" "+this.toVar,u=this.stepVar?o+" += "+this.stepVar:l?d?a<=f?"++"+o:"--"+o:a<=f?o+"++":o+"--":d?t+" ? ++"+o+" : --"+o:t+" ? "+o+"++ : "+o+"--",d&&(m=r+" = "+m),d&&(u=r+" = "+u),[this.makeCode(m+"; "+n+"; "+u)])},n.prototype.compileArray=function(e){var t,n,a,o,r,i,l,s,d,p,c,u,f,m;return(l=null!=this.fromNum&&null!=this.toNum,l&&20>=T(this.fromNum-this.toNum))?(p=function(){f=[];for(var e=c=this.fromNum,t=this.toNum;c<=t?e<=t:e>=t;c<=t?e++:e--)f.push(e);return f}.apply(this),this.exclusive&&p.pop(),[this.makeCode("["+p.join(", ")+"]")]):(i=this.tab+ve,r=e.scope.freeVariable("i",{single:!0}),u=e.scope.freeVariable("results"),d="\n"+i+u+" = [];",l?(e.index=r,n=ze(this.compileNode(e))):(m=r+" = "+this.fromC+(this.toC===this.toVar?"":", "+this.toC),a=this.fromVar+" <= "+this.toVar,n="var "+m+"; "+a+" ? "+r+" <"+this.equals+" "+this.toVar+" : "+r+" >"+this.equals+" "+this.toVar+"; "+a+" ? "+r+"++ : "+r+"--"),s="{ "+u+".push("+r+"); }\n"+i+"return "+u+";\n"+e.indent,o=function(e){return null==e?void 0:e.contains(Ue)},(o(this.from)||o(this.to))&&(t=", arguments"),[this.makeCode("(function() {"+d+"\n"+i+"for ("+n+")"+s+"}).apply(this"+(null==t?"":t)+")")])},n}(o),n.Slice=me=function(e){function n(e){this.range=e,n.__super__.constructor.call(this)}return t(n,e),n.prototype.children=["range"],n.prototype.compileNode=function(e){var t,n,a,i,o,r,l;return o=this.range,r=o.to,a=o.from,i=a&&a.compileToFragments(e,H)||[this.makeCode("0")],r&&(t=r.compileToFragments(e,H),n=ze(t),(this.range.exclusive||-1!=+n)&&(l=", "+(this.range.exclusive?n:r.isNumber()?""+(+n+1):(t=r.compileToFragments(e,$),"+"+ze(t)+" + 1 || 9e9")))),[this.makeCode(".slice("+ze(i)+(l||"")+")")]},n}(o),n.Obj=ne=function(e){function n(e,t){this.generated=null!=t&&t,this.objects=this.properties=e||[]}return t(n,e),n.prototype.children=["properties"],n.prototype.compileNode=function(e){var t,n,a,o,i,s,d,p,u,f,m,l,g,y,h,b,x,v,S,T,k;if(S=this.properties,this.generated)for(d=0,g=S.length;d<g;d++)b=S[d],b instanceof we&&b.error("cannot have an implicit value in an implicit object");for(n=u=0,y=S.length;u<y&&(v=S[n],!((v.variable||v).base instanceof oe));n=++u);for(a=n<S.length,i=e.indent+=ve,l=this.lastNonComment(this.properties),t=[],a&&(x=e.scope.freeVariable("obj"),t.push(this.makeCode("(\n"+i+x+" = "))),t.push(this.makeCode("{"+(0===S.length||0===n?"}":"\n"))),(o=m=0,h=S.length);m<h;o=++m)v=S[o],o===n&&(0!==o&&t.push(this.makeCode("\n"+i+"}")),t.push(this.makeCode(",\n"))),p=o===S.length-1||o===n-1?"":v===l||v instanceof _?"\n":",\n",s=v instanceof _?"":i,a&&o<n&&(s+=ve),v instanceof c&&("object"!==v.context&&v.operatorToken.error("unexpected "+v.operatorToken.value),v.variable instanceof we&&v.variable.hasProperties()&&v.variable.error("invalid object key")),v instanceof we&&v["this"]&&(v=new c(v.properties[0].name,v,"object")),v instanceof _||(o<n?!(v instanceof c)&&(v=new c(v,v,"object")):(v instanceof c?(f=v.variable,k=v.value):(T=v.base.cache(e),f=T[0],k=T[1],f instanceof w&&(f=new le(f.value))),v=new c(new we(new w(x),[new r(f)]),k))),s&&t.push(this.makeCode(s)),t.push.apply(t,v.compileToFragments(e,Y)),p&&t.push(this.makeCode(p));return a?t.push(this.makeCode(",\n"+i+x+"\n"+this.tab+")")):0!==S.length&&t.push(this.makeCode("\n"+this.tab+"}")),this.front&&!a?this.wrapInBraces(t):t},n.prototype.assigns=function(e){var t,n,a,i;for(i=this.properties,t=0,n=i.length;t<n;t++)if(a=i[t],a.assigns(e))return!0;return!1},n}(o),n.Arr=d=function(e){function n(e){this.objects=e||[]}return t(n,e),n.prototype.children=["objects"],n.prototype.compileNode=function(e){var t,n,a,i,o,r,l;if(!this.objects.length)return[this.makeCode("[]")];if(e.indent+=ve,t=ge.compileSplattedArray(e,this.objects),t.length)return t;for(t=[],n=function(){var t,n,a,i;for(a=this.objects,i=[],(t=0,n=a.length);t<n;t++)l=a[t],i.push(l.compileToFragments(e,W));return i}.call(this),(i=o=0,r=n.length);o<r;i=++o)a=n[i],i&&t.push(this.makeCode(", ")),t.push.apply(t,a);return 0<=ze(t).indexOf("\n")?(t.unshift(this.makeCode("[\n"+e.indent)),t.push(this.makeCode("\n"+this.tab+"]"))):(t.unshift(this.makeCode("[")),t.push(this.makeCode("]"))),t},n.prototype.assigns=function(e){var t,n,a,i;for(i=this.objects,t=0,n=i.length;t<n;t++)if(a=i[t],a.assigns(e))return!0;return!1},n}(o),n.Class=p=function(e){function n(e,t,n){this.variable=e,this.parent=t,this.body=null==n?new u:n,this.boundFuncs=[],this.body.classBody=!0}return t(n,e),n.prototype.children=["variable","parent","body"],n.prototype.defaultClassVariableName="_Class",n.prototype.determineName=function(){var e,t,n,a,o;return this.variable?(a=this.variable.properties,o=a[a.length-1],n=o?o instanceof r&&o.name:this.variable.base,!(n instanceof w||n instanceof le))?this.defaultClassVariableName:(t=n.value,o||(e=We(t),e&&this.variable.error(e)),0<=i.call(U,t)?"_"+t:t):this.defaultClassVariableName},n.prototype.setContext=function(e){return this.body.traverseChildren(!1,function(t){return!t.classBody&&(t instanceof ke?t.value=e:t instanceof m&&t.bound?t.context=e:void 0)})},n.prototype.addBoundFunctions=function(e){var t,n,a,i,o;for(o=this.boundFuncs,n=0,a=o.length;n<a;n++)t=o[n],i=new we(new ke(),[new r(t)]).compile(e),this.ctor.body.unshift(new V(i+" = "+Qe("bind",e)+"("+i+", this)"))},n.prototype.addProperties=function(e,t,n){var a,i,o,l,s,d;return d=e.base.properties.slice(0),l=function(){var e;for(e=[];i=d.shift();)i instanceof c&&(o=i.variable.base,delete i.context,s=i.value,"constructor"===o.value?(this.ctor&&i.error("cannot define more than one constructor in a class"),s.bound&&i.error("cannot define a constructor as a bound function"),s instanceof m?i=this.ctor=s:(this.externalCtor=n.classScope.freeVariable("ctor"),i=new c(new w(this.externalCtor),s))):i.variable["this"]?s["static"]=!0:(a=o.isComplex()?new B(o):new r(o),i.variable=new we(new w(t),[new r(new le("prototype")),a]),s instanceof m&&s.bound&&(this.boundFuncs.push(o),s.bound=!1))),e.push(i);return e}.call(this),Re(l)},n.prototype.walkBody=function(e,t){return this.traverseChildren(!1,function(a){return function(o){var r,l,s,i,d,p,f;if(r=!0,o instanceof n)return!1;if(o instanceof u){for(f=l=o.expressions,s=i=0,d=f.length;i<d;s=++i)p=f[s],p instanceof c&&p.variable.looksStatic(e)?p.value["static"]=!0:p instanceof we&&p.isObject(!0)&&(r=!1,l[s]=a.addProperties(p,e,t));o.expressions=l=Be(l)}return r&&!(o instanceof n)}}(this))},n.prototype.hoistDirectivePrologue=function(){var e,t,n;for(t=0,e=this.body.expressions;(n=e[t])&&n instanceof _||n instanceof we&&n.isString();)++t;return this.directives=e.splice(0,t)},n.prototype.ensureConstructor=function(e){return this.ctor||(this.ctor=new m,this.externalCtor?this.ctor.body.push(new V(this.externalCtor+".apply(this, arguments)")):this.parent&&this.ctor.body.push(new V(e+".__super__.constructor.apply(this, arguments)")),this.ctor.body.makeReturn(),this.body.expressions.unshift(this.ctor)),this.ctor.ctor=this.ctor.name=e,this.ctor.klass=null,this.ctor.noReturn=!0},n.prototype.compileNode=function(e){var t,n,a,i,o,r,l,s,d;return(i=this.body.jumps())&&i.error("Class bodies cannot contain pure statements"),(n=this.body.contains(Ue))&&n.error("Class bodies shouldn't reference arguments"),l=this.determineName(),r=new w(l),a=new m([],u.wrap([this.body])),t=[],e.classScope=a.makeScope(e.scope),this.hoistDirectivePrologue(),this.setContext(l),this.walkBody(l,e),this.ensureConstructor(l),this.addBoundFunctions(e),this.body.spaced=!0,this.body.expressions.push(r),this.parent&&(d=new w(e.classScope.freeVariable("superClass",{reserve:!1})),this.body.expressions.unshift(new N(r,d)),a.params.push(new ie(d)),t.push(this.parent)),(s=this.body.expressions).unshift.apply(s,this.directives),o=new oe(new f(a,t)),this.variable&&(o=new c(this.variable,o,null,{moduleDeclaration:this.moduleDeclaration})),o.compileToFragments(e)},n}(o),n.ModuleDeclaration=G=function(e){function n(e,t){this.clause=e,this.source=t,this.checkSource()}return t(n,e),n.prototype.children=["clause","source"],n.prototype.isStatement=Oe,n.prototype.jumps=Se,n.prototype.makeReturn=Se,n.prototype.checkSource=function(){if(null!=this.source&&this.source instanceof he)return this.source.error("the name of the module to be imported from must be an uninterpolated string")},n.prototype.checkScope=function(e,t){if(0!==e.indent.length)return this.error(t+" statements must be at top-level scope")},n}(o),n.ImportDeclaration=D=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){var t,n;return this.checkScope(e,"import"),e.importedSymbols=[],t=[],t.push(this.makeCode(this.tab+"import ")),null!=this.clause&&t.push.apply(t,this.clause.compileNode(e)),null!=(null==(n=this.source)?void 0:n.value)&&(null!==this.clause&&t.push(this.makeCode(" from ")),t.push(this.makeCode(this.source.value))),t.push(this.makeCode(";")),t},n}(G),n.ImportClause=O=function(e){function n(e,t){this.defaultBinding=e,this.namedImports=t}return t(n,e),n.prototype.children=["defaultBinding","namedImports"],n.prototype.compileNode=function(e){var t;return t=[],null!=this.defaultBinding&&(t.push.apply(t,this.defaultBinding.compileNode(e)),null!=this.namedImports&&t.push(this.makeCode(", "))),null!=this.namedImports&&t.push.apply(t,this.namedImports.compileNode(e)),t},n}(o),n.ExportDeclaration=x=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){var t,n;return this.checkScope(e,"export"),t=[],t.push(this.makeCode(this.tab+"export ")),this instanceof v&&t.push(this.makeCode("default ")),!(this instanceof v)&&(this.clause instanceof c||this.clause instanceof p)&&(this.clause instanceof p&&!this.clause.variable&&this.clause.error("anonymous classes cannot be exported"),t.push(this.makeCode("var ")),this.clause.moduleDeclaration="export"),t=null!=this.clause.body&&this.clause.body instanceof u?t.concat(this.clause.compileToFragments(e,Y)):t.concat(this.clause.compileNode(e)),null!=(null==(n=this.source)?void 0:n.value)&&t.push(this.makeCode(" from "+this.source.value)),t.push(this.makeCode(";")),t},n}(G),n.ExportNamedDeclaration=S=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(x),n.ExportDefaultDeclaration=v=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(x),n.ExportAllDeclaration=b=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(x),n.ModuleSpecifierList=X=function(e){function n(e){this.specifiers=e}return t(n,e),n.prototype.children=["specifiers"],n.prototype.compileNode=function(e){var t,n,a,i,o,r,l;if(t=[],e.indent+=ve,n=function(){var t,n,a,i;for(a=this.specifiers,i=[],(t=0,n=a.length);t<n;t++)l=a[t],i.push(l.compileToFragments(e,W));return i}.call(this),0!==this.specifiers.length){for(t.push(this.makeCode("{\n"+e.indent)),i=o=0,r=n.length;o<r;i=++o)a=n[i],i&&t.push(this.makeCode(",\n"+e.indent)),t.push.apply(t,a);t.push(this.makeCode("\n}"))}else t.push(this.makeCode("{}"));return t},n}(o),n.ImportSpecifierList=M=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(X),n.ExportSpecifierList=E=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(X),n.ModuleSpecifier=Z=function(e){function n(e,t,n){this.original=e,this.alias=t,this.moduleDeclarationType=n,this.identifier=null==this.alias?this.original.value:this.alias.value}return t(n,e),n.prototype.children=["original","alias"],n.prototype.compileNode=function(e){var t;return e.scope.find(this.identifier,this.moduleDeclarationType),t=[],t.push(this.makeCode(this.original.value)),null!=this.alias&&t.push(this.makeCode(" as "+this.alias.value)),t},n}(o),n.ImportSpecifier=I=function(e){function n(e,t){n.__super__.constructor.call(this,e,t,"import")}return t(n,e),n.prototype.compileNode=function(e){var t;return(t=this.identifier,0<=i.call(e.importedSymbols,t))||e.scope.check(this.identifier)?this.error("'"+this.identifier+"' has already been declared"):e.importedSymbols.push(this.identifier),n.__super__.compileNode.call(this,e)},n}(Z),n.ImportDefaultSpecifier=P=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(I),n.ImportNamespaceSpecifier=R=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(I),n.ExportSpecifier=k=function(e){function n(e,t){n.__super__.constructor.call(this,e,t,"export")}return t(n,e),n}(Z),n.Assign=c=function(e){function n(e,t,n,a){this.variable=e,this.value=t,this.context=n,null==a&&(a={}),this.param=a.param,this.subpattern=a.subpattern,this.operatorToken=a.operatorToken,this.moduleDeclaration=a.moduleDeclaration}return t(n,e),n.prototype.children=["variable","value"],n.prototype.isStatement=function(e){return(null==e?void 0:e.level)===Y&&null!=this.context&&(this.moduleDeclaration||0<=i.call(this.context,"?"))},n.prototype.checkAssignability=function(e,t){if(Object.prototype.hasOwnProperty.call(e.scope.positions,t.value)&&"import"===e.scope.variables[e.scope.positions[t.value]].type)return t.error("'"+t.value+"' is read-only")},n.prototype.assigns=function(e){return this["object"===this.context?"value":"variable"].assigns(e)},n.prototype.unfoldSoak=function(e){return Je(e,this,"variable")},n.prototype.compileNode=function(e){var t,n,a,o,r,l,d,p,c,u,f,g,_,y,h;if(a=this.variable instanceof we){if(this.variable.isArray()||this.variable.isObject())return this.compilePatternMatch(e);if(this.variable.isSplice())return this.compileSplice(e);if("||="===(p=this.context)||"&&="===p||"?="===p)return this.compileConditional(e);if("**="===(c=this.context)||"//="===c||"%%="===c)return this.compileSpecialMath(e)}return(this.value instanceof m&&(this.value["static"]?(this.value.klass=this.variable.base,this.value.name=this.variable.properties[0],this.value.variable=this.variable):2<=(null==(u=this.variable.properties)?void 0:u.length)&&(f=this.variable.properties,l=3<=f.length?s.call(f,0,o=f.length-2):(o=0,[]),d=f[o++],r=f[o++],"prototype"===(null==(g=d.name)?void 0:g.value)&&(this.value.klass=new we(this.variable.base,l),this.value.name=r,this.value.variable=this.variable))),this.context||(h=this.variable.unwrapAll(),!h.isAssignable()&&this.variable.error("'"+this.variable.compile(e)+"' can't be assigned"),("function"!=typeof h.hasProperties||!h.hasProperties())&&(this.moduleDeclaration?(this.checkAssignability(e,h),e.scope.add(h.value,this.moduleDeclaration)):this.param?e.scope.add(h.value,"var"):(this.checkAssignability(e,h),e.scope.find(h.value)))),y=this.value.compileToFragments(e,W),a&&this.variable.base instanceof ne&&(this.variable.front=!0),n=this.variable.compileToFragments(e,W),"object"===this.context)?((_=ze(n),0<=i.call(U,_))&&(n.unshift(this.makeCode("\"")),n.push(this.makeCode("\""))),n.concat(this.makeCode(": "),y)):(t=n.concat(this.makeCode(" "+(this.context||"=")+" "),y),e.level<=W?t:this.wrapInBraces(t))},n.prototype.compilePatternMatch=function(e){var t,a,o,l,d,p,c,i,u,f,m,g,_,y,b,x,v,S,T,k,E,N,A,C,O,D,P,R;if(C=e.level===Y,D=this.value,x=this.variable.base.objects,!(v=x.length))return o=D.compileToFragments(e),e.level>=q?this.wrapInBraces(o):o;if(b=x[0],1===v&&b instanceof h&&b.error("Destructuring assignment has no target"),u=this.variable.isObject(),C&&1===v&&!(b instanceof ge))return l=null,b instanceof n&&"object"===b.context?(T=b,k=T.variable,i=k.base,b=T.value,b instanceof n&&(l=b.value,b=b.variable)):(b instanceof n&&(l=b.value,b=b.variable),i=u?b["this"]?b.properties[0].name:new le(b.unwrap().value):new te(0)),t=i.unwrap()instanceof le,D=new we(D),D.properties.push(new(t?r:B)(i)),_=We(b.unwrap().value),_&&b.error(_),l&&(D=new ae("?",D,l)),new n(b,D,null,{param:this.param}).compileToFragments(e,Y);for(P=D.compileToFragments(e,W),R=ze(P),a=[],d=!1,(!(D.unwrap()instanceof w)||this.variable.assigns(R))&&(a.push([this.makeCode((S=e.scope.freeVariable("ref"))+" = ")].concat(s.call(P))),P=[this.makeCode(S)],R=S),(c=m=0,g=x.length);m<g;c=++m){if(b=x[c],i=c,!d&&b instanceof ge)y=b.name.unwrap().value,b=b.unwrap(),O=v+" <= "+R+".length ? "+Qe("slice",e)+".call("+R+", "+c,(A=v-c-1)?(f=e.scope.freeVariable("i",{single:!0}),O+=", "+f+" = "+R+".length - "+A+") : ("+f+" = "+c+", [])"):O+=") : []",O=new V(O),d=f+"++";else if(!d&&b instanceof h){(A=v-c-1)&&(1===A?d=R+".length - 1":(f=e.scope.freeVariable("i",{single:!0}),O=new V(f+" = "+R+".length - "+A),d=f+"++",a.push(O.compileToFragments(e,W))));continue}else(b instanceof ge||b instanceof h)&&b.error("multiple splats/expansions are disallowed in an assignment"),l=null,b instanceof n&&"object"===b.context?(E=b,N=E.variable,i=N.base,b=E.value,b instanceof n&&(l=b.value,b=b.variable)):(b instanceof n&&(l=b.value,b=b.variable),i=u?b["this"]?b.properties[0].name:new le(b.unwrap().value):new V(d||i)),y=b.unwrap().value,t=i.unwrap()instanceof le,O=new we(new V(R),[new(t?r:B)(i)]),l&&(O=new ae("?",O,l));null!=y&&(_=We(y),_&&b.error(_)),a.push(new n(b,O,null,{param:this.param,subpattern:!0}).compileToFragments(e,W))}return C||this.subpattern||a.push(P),p=this.joinFragmentArrays(a,", "),e.level<W?p:this.wrapInBraces(p)},n.prototype.compileConditional=function(e){var t,a,o,r;return o=this.variable.cacheReference(e),a=o[0],r=o[1],a.properties.length||!(a.base instanceof V)||a.base instanceof ke||e.scope.check(a.base.value)||this.variable.error("the variable \""+a.base.value+"\" can't be assigned with "+this.context+" because it has not been declared before"),0<=i.call(this.context,"?")?(e.isExistentialEquals=!0,new C(new y(a),r,{type:"if"}).addElse(new n(r,this.value,"=")).compileToFragments(e)):(t=new ae(this.context.slice(0,-1),a,new n(r,this.value,"=")).compileToFragments(e),e.level<=W?t:this.wrapInBraces(t))},n.prototype.compileSpecialMath=function(e){var t,a,i;return a=this.variable.cacheReference(e),t=a[0],i=a[1],new n(t,new ae(this.context.slice(0,-1),i,this.value)).compileToFragments(e)},n.prototype.compileSplice=function(e){var t,n,a,i,o,r,l,s,d,p,c,u;return l=this.variable.properties.pop().range,a=l.from,p=l.to,n=l.exclusive,r=this.variable.compile(e),a?(s=this.cacheToCodeFragments(a.cache(e,q)),i=s[0],o=s[1]):i=o="0",p?(null==a?void 0:a.isNumber())&&p.isNumber()?(p=p.compile(e)-o,!n&&(p+=1)):(p=p.compile(e,$)+" - "+o,!n&&(p+=" + 1")):p="9e9",d=this.value.cache(e,W),c=d[0],u=d[1],t=[].concat(this.makeCode("[].splice.apply("+r+", ["+i+", "+p+"].concat("),c,this.makeCode(")), "),u),e.level>Y?this.wrapInBraces(t):t},n}(o),n.Code=m=function(e){function n(e,t,n){this.params=e||[],this.body=t||new u,this.bound="boundfunc"===n,this.isGenerator=!!this.body.contains(function(e){return e instanceof ae&&e.isYield()||e instanceof De})}return t(n,e),n.prototype.children=["params","body"],n.prototype.isStatement=function(){return!!this.ctor},n.prototype.jumps=J,n.prototype.makeScope=function(e){return new fe(e,this.body,this)},n.prototype.compileNode=function(e){var t,a,o,g,_,y,b,x,l,v,S,T,k,E,N,A,O,p,m,D,P,r,R,I,M,F,B,z,j,U,W,q,H;if(this.bound&&(null==(R=e.scope.method)?void 0:R.bound)&&(this.context=e.scope.method.context),this.bound&&!this.context)return this.context="_this",H=new n([new ie(new w(this.context))],new u([this])),a=new f(H,[new ke]),a.updateLocationDataIfMissing(this.locationData),a.compileNode(e);for(e.scope=Ie(e,"classScope")||this.makeScope(e.scope),e.scope.shared=Ie(e,"sharedScope"),e.indent+=ve,delete e.bare,delete e.isExistentialEquals,m=[],g=[],I=this.params,(y=0,l=I.length);y<l;y++)p=I[y],p instanceof h||e.scope.parameter(p.asReference(e));for(M=this.params,b=0,v=M.length;b<v;b++)if(p=M[b],!!(p.splat||p instanceof h)){for(F=this.params,x=0,S=F.length;x<S;x++)O=F[x],!(O instanceof h)&&O.name.value&&e.scope.add(O.name.value,"var",!0);j=new c(new we(new d(function(){var t,n,a,i;for(a=this.params,i=[],(n=0,t=a.length);n<t;n++)O=a[n],i.push(O.asReference(e));return i}.call(this))),new we(new w("arguments")));break}for(B=this.params,A=0,T=B.length;A<T;A++)p=B[A],p.isComplex()?(W=r=p.asReference(e),p.value&&(W=new ae("?",r,p.value)),g.push(new c(new we(p.name),W,"=",{param:!0}))):(r=p,p.value&&(N=new V(r.name.value+" == null"),W=new c(new we(p.name),p.value,"="),g.push(new C(N,W)))),j||m.push(r);for(q=this.body.isEmpty(),j&&g.unshift(j),g.length&&(z=this.body.expressions).unshift.apply(z,g),(_=D=0,k=m.length);D<k;_=++D)O=m[_],m[_]=O.compileToFragments(e),e.scope.parameter(ze(m[_]));for(U=[],this.eachParamName(function(e,t){return 0<=i.call(U,e)&&t.error("multiple parameters named "+e),U.push(e)}),q||this.noReturn||this.body.makeReturn(),o="function",this.isGenerator&&(o+="*"),this.ctor&&(o+=" "+this.name),o+="(",t=[this.makeCode(o)],(_=P=0,E=m.length);P<E;_=++P)O=m[_],_&&t.push(this.makeCode(", ")),t.push.apply(t,O);return t.push(this.makeCode(") {")),this.body.isEmpty()||(t=t.concat(this.makeCode("\n"),this.body.compileWithDeclarations(e),this.makeCode("\n"+this.tab))),t.push(this.makeCode("}")),this.ctor?[this.makeCode(this.tab)].concat(s.call(t)):this.front||e.level>=$?this.wrapInBraces(t):t},n.prototype.eachParamName=function(e){var t,n,a,i,o;for(i=this.params,o=[],(t=0,n=i.length);t<n;t++)a=i[t],o.push(a.eachName(e));return o},n.prototype.traverseChildren=function(e,t){if(e)return n.__super__.traverseChildren.call(this,e,t)},n}(o),n.Param=ie=function(e){function n(e,t,n){var a,i;this.name=e,this.value=t,this.splat=n,a=We(this.name.unwrapAll().value),a&&this.name.error(a),this.name instanceof ne&&this.name.generated&&(i=this.name.objects[0].operatorToken,i.error("unexpected "+i.value))}return t(n,e),n.prototype.children=["name","value"],n.prototype.compileToFragments=function(e){return this.name.compileToFragments(e,W)},n.prototype.asReference=function(e){var t,n;return this.reference?this.reference:(n=this.name,n["this"]?(t=n.properties[0].name.value,0<=i.call(U,t)&&(t="_"+t),n=new w(e.scope.freeVariable(t))):n.isComplex()&&(n=new w(e.scope.freeVariable("arg"))),n=new we(n),this.splat&&(n=new ge(n)),n.updateLocationDataIfMissing(this.locationData),this.reference=n)},n.prototype.isComplex=function(){return this.name.isComplex()},n.prototype.eachName=function(e,t){var n,a,i,o,r,l,s;if(null==t&&(t=this.name),n=function(t){return e("@"+t.properties[0].name.value,t)},t instanceof V)return e(t.value,t);if(t instanceof we)return n(t);for(s=null==(l=t.objects)?[]:l,a=0,i=s.length;a<i;a++)r=s[a],r instanceof c&&null==r.context&&(r=r.variable),r instanceof c?(r.value instanceof c&&(r=r.value),this.eachName(e,r.value.unwrap())):r instanceof ge?(o=r.name.unwrap(),e(o.value,o)):r instanceof we?r.isArray()||r.isObject()?this.eachName(e,r.base):r["this"]?n(r):e(r.base.value,r.base):!(r instanceof h)&&r.error("illegal parameter "+r.compile())},n}(o),n.Splat=ge=function(e){function n(e){this.name=e.compile?e:new V(e)}return t(n,e),n.prototype.children=["name"],n.prototype.isAssignable=Oe,n.prototype.assigns=function(e){return this.name.assigns(e)},n.prototype.compileToFragments=function(e){return this.name.compileToFragments(e)},n.prototype.unwrap=function(){return this.name},n.compileSplattedArray=function(e,t,a){var o,r,l,s,d,p,i,c,u,f,m;for(i=-1;(m=t[++i])&&!(m instanceof n);)continue;if(i>=t.length)return[];if(1===t.length)return m=t[0],d=m.compileToFragments(e,W),a?d:[].concat(m.makeCode(Qe("slice",e)+".call("),d,m.makeCode(")"));for(o=t.slice(i),p=c=0,f=o.length;c<f;p=++c)m=o[p],l=m.compileToFragments(e,W),o[p]=m instanceof n?[].concat(m.makeCode(Qe("slice",e)+".call("),l,m.makeCode(")")):[].concat(m.makeCode("["),l,m.makeCode("]"));return 0===i?(m=t[0],s=m.joinFragmentArrays(o.slice(1),", "),o[0].concat(m.makeCode(".concat("),s,m.makeCode(")"))):(r=function(){var n,a,o,r;for(o=t.slice(0,i),r=[],(n=0,a=o.length);n<a;n++)m=o[n],r.push(m.compileToFragments(e,W));return r}(),r=t[0].joinFragmentArrays(r,", "),s=t[i].joinFragmentArrays(o,", "),u=t[t.length-1],[].concat(t[0].makeCode("["),r,t[i].makeCode("].concat("),s,u.makeCode(")")))},n}(o),n.Expansion=h=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isComplex=J,n.prototype.compileNode=function(){return this.error("Expansion must be used inside a destructuring assignment or parameter list")},n.prototype.asReference=function(){return this},n.prototype.eachName=function(){},n}(o),n.While=Ce=function(e){function n(e,t){this.condition=(null==t?void 0:t.invert)?e.invert():e,this.guard=null==t?void 0:t.guard}return t(n,e),n.prototype.children=["condition","guard","body"],n.prototype.isStatement=Oe,n.prototype.makeReturn=function(e){return e?n.__super__.makeReturn.apply(this,arguments):(this.returns=!this.jumps({loop:!0}),this)},n.prototype.addBody=function(e){return this.body=e,this},n.prototype.jumps=function(){var e,t,n,a,i;if(e=this.body.expressions,!e.length)return!1;for(t=0,a=e.length;t<a;t++)if(i=e[t],n=i.jumps({loop:!0}))return n;return!1},n.prototype.compileNode=function(e){var t,n,a,i;return e.indent+=ve,i="",n=this.body,n.isEmpty()?n=this.makeCode(""):(this.returns&&(n.makeReturn(a=e.scope.freeVariable("results")),i=""+this.tab+a+" = [];\n"),this.guard&&(1<n.expressions.length?n.expressions.unshift(new C(new oe(this.guard).invert(),new _e("continue"))):this.guard&&(n=u.wrap([new C(this.guard,n)]))),n=[].concat(this.makeCode("\n"),n.compileToFragments(e,Y),this.makeCode("\n"+this.tab))),t=[].concat(this.makeCode(i+this.tab+"while ("),this.condition.compileToFragments(e,H),this.makeCode(") {"),n,this.makeCode("}")),this.returns&&t.push(this.makeCode("\n"+this.tab+"return "+a+";")),t},n}(o),n.Op=ae=function(e){function n(e,t,n,i){if("in"===e)return new F(t,n);if("do"===e)return this.generateDo(t);if("new"===e){if(t instanceof f&&!t["do"]&&!t.isNew)return t.newInstance();(t instanceof m&&t.bound||t["do"])&&(t=new oe(t))}return this.operator=a[e]||e,this.first=t,this.second=n,this.flip=!!i,this}var a,o;return t(n,e),a={"==":"===","!=":"!==",of:"in",yieldfrom:"yield*"},o={"!==":"===","===":"!=="},n.prototype.children=["first","second"],n.prototype.isNumber=function(){var e;return this.isUnary()&&("+"===(e=this.operator)||"-"===e)&&this.first instanceof we&&this.first.isNumber()},n.prototype.isYield=function(){var e;return"yield"===(e=this.operator)||"yield*"===e},n.prototype.isUnary=function(){return!this.second},n.prototype.isComplex=function(){return!this.isNumber()},n.prototype.isChainable=function(){var e;return"<"===(e=this.operator)||">"===e||">="===e||"<="===e||"==="===e||"!=="===e},n.prototype.invert=function(){var e,t,a,i,r;if(this.isChainable()&&this.first.isChainable()){for(e=!0,t=this;t&&t.operator;)e&&(e=t.operator in o),t=t.first;if(!e)return new oe(this).invert();for(t=this;t&&t.operator;)t.invert=!t.invert,t.operator=o[t.operator],t=t.first;return this}return(i=o[this.operator])?(this.operator=i,this.first.unwrap()instanceof n&&this.first.invert(),this):this.second?new oe(this).invert():"!"===this.operator&&(a=this.first.unwrap())instanceof n&&("!"===(r=a.operator)||"in"===r||"instanceof"===r)?a:new n("!",this)},n.prototype.unfoldSoak=function(e){var t;return("++"===(t=this.operator)||"--"===t||"delete"===t)&&Je(e,this,"first")},n.prototype.generateDo=function(e){var t,n,a,i,o,r,l,s;for(r=[],n=e instanceof c&&(l=e.value.unwrap())instanceof m?l:e,s=n.params||[],(a=0,i=s.length);a<i;a++)o=s[a],o.value?(r.push(o.value),delete o.value):r.push(o);return t=new f(e,r),t["do"]=!0,t},n.prototype.compileNode=function(e){var t,n,a,i,o,r;if(n=this.isChainable()&&this.first.isChainable(),n||(this.first.front=this.front),"delete"===this.operator&&e.scope.check(this.first.unwrapAll().value)&&this.error("delete operand may not be argument or var"),("--"===(o=this.operator)||"++"===o)&&(i=We(this.first.unwrapAll().value),i&&this.first.error(i)),this.isYield())return this.compileYield(e);if(this.isUnary())return this.compileUnary(e);if(n)return this.compileChain(e);switch(this.operator){case"?":return this.compileExistence(e);case"**":return this.compilePower(e);case"//":return this.compileFloorDivision(e);case"%%":return this.compileModulo(e);default:return a=this.first.compileToFragments(e,q),r=this.second.compileToFragments(e,q),t=[].concat(a,this.makeCode(" "+this.operator+" "),r),e.level<=q?t:this.wrapInBraces(t);}},n.prototype.compileChain=function(e){var t,n,a,i;return a=this.first.second.cache(e),this.first.second=a[0],i=a[1],n=this.first.compileToFragments(e,q),t=n.concat(this.makeCode(" "+(this.invert?"&&":"||")+" "),i.compileToFragments(e),this.makeCode(" "+this.operator+" "),this.second.compileToFragments(e,q)),this.wrapInBraces(t)},n.prototype.compileExistence=function(e){var t,n;return this.first.isComplex()?(n=new w(e.scope.freeVariable("ref")),t=new oe(new c(n,this.first))):(t=this.first,n=t),new C(new y(t),n,{type:"if"}).addElse(this.second).compileToFragments(e)},n.prototype.compileUnary=function(e){var t,a,i;return(a=[],t=this.operator,a.push([this.makeCode(t)]),"!"===t&&this.first instanceof y)?(this.first.negated=!this.first.negated,this.first.compileToFragments(e)):e.level>=$?new oe(this).compileToFragments(e):(i="+"===t||"-"===t,("new"===t||"typeof"===t||"delete"===t||i&&this.first instanceof n&&this.first.operator===t)&&a.push([this.makeCode(" ")]),(i&&this.first instanceof n||"new"===t&&this.first.isStatement(e))&&(this.first=new oe(this.first)),a.push(this.first.compileToFragments(e,q)),this.flip&&a.reverse(),this.joinFragmentArrays(a,""))},n.prototype.compileYield=function(e){var t,n,a;return n=[],t=this.operator,null==e.scope.parent&&this.error("yield can only occur inside functions"),0<=i.call(Object.keys(this.first),"expression")&&!(this.first instanceof Ee)?null!=this.first.expression&&n.push(this.first.expression.compileToFragments(e,q)):(e.level>=H&&n.push([this.makeCode("(")]),n.push([this.makeCode(t)]),""!==(null==(a=this.first.base)?void 0:a.value)&&n.push([this.makeCode(" ")]),n.push(this.first.compileToFragments(e,q)),e.level>=H&&n.push([this.makeCode(")")])),this.joinFragmentArrays(n,"")},n.prototype.compilePower=function(e){var t;return t=new we(new w("Math"),[new r(new le("pow"))]),new f(t,[this.first,this.second]).compileToFragments(e)},n.prototype.compileFloorDivision=function(e){var t,a,i;return a=new we(new w("Math"),[new r(new le("floor"))]),i=this.second.isComplex()?new oe(this.second):this.second,t=new n("/",this.first,i),new f(a,[t]).compileToFragments(e)},n.prototype.compileModulo=function(e){var t;return t=new we(new V(Qe("modulo",e))),new f(t,[this.first,this.second]).compileToFragments(e)},n.prototype.toString=function(e){return n.__super__.toString.call(this,e,this.constructor.name+" "+this.operator)},n}(o),n.In=F=function(e){function n(e,t){this.object=e,this.array=t}return t(n,e),n.prototype.children=["object","array"],n.prototype.invert=K,n.prototype.compileNode=function(e){var t,n,a,i,o;if(this.array instanceof we&&this.array.isArray()&&this.array.base.objects.length){for(o=this.array.base.objects,n=0,a=o.length;n<a;n++)if(i=o[n],!!(i instanceof ge)){t=!0;break}if(!t)return this.compileOrTest(e)}return this.compileLoopTest(e)},n.prototype.compileOrTest=function(e){var t,n,a,i,o,r,l,s,d,p,c,u;for(s=this.object.cache(e,q),c=s[0],l=s[1],d=this.negated?[" !== "," && "]:[" === "," || "],t=d[0],n=d[1],u=[],p=this.array.base.objects,(a=o=0,r=p.length);o<r;a=++o)i=p[a],a&&u.push(this.makeCode(n)),u=u.concat(a?l:c,this.makeCode(t),i.compileToFragments(e,$));return e.level<q?u:this.wrapInBraces(u)},n.prototype.compileLoopTest=function(e){var t,n,a,i;return(a=this.object.cache(e,W),i=a[0],n=a[1],t=[].concat(this.makeCode(Qe("indexOf",e)+".call("),this.array.compileToFragments(e,W),this.makeCode(", "),n,this.makeCode(") "+(this.negated?"< 0":">= 0"))),ze(i)===ze(n))?t:(t=i.concat(this.makeCode(", "),t),e.level<W?t:this.wrapInBraces(t))},n.prototype.toString=function(e){return n.__super__.toString.call(this,e,this.constructor.name+(this.negated?"!":""))},n}(o),n.Try=Ne=function(e){function n(e,t,n,a){this.attempt=e,this.errorVariable=t,this.recovery=n,this.ensure=a}return t(n,e),n.prototype.children=["attempt","recovery","ensure"],n.prototype.isStatement=Oe,n.prototype.jumps=function(e){var t;return this.attempt.jumps(e)||(null==(t=this.recovery)?void 0:t.jumps(e))},n.prototype.makeReturn=function(e){return this.attempt&&(this.attempt=this.attempt.makeReturn(e)),this.recovery&&(this.recovery=this.recovery.makeReturn(e)),this},n.prototype.compileNode=function(e){var t,n,a,i,o,r;return e.indent+=ve,r=this.attempt.compileToFragments(e,Y),t=this.recovery?(a=e.scope.freeVariable("error",{reserve:!1}),o=new w(a),this.errorVariable?(i=We(this.errorVariable.unwrapAll().value),i?this.errorVariable.error(i):void 0,this.recovery.unshift(new c(this.errorVariable,o))):void 0,[].concat(this.makeCode(" catch ("),o.compileToFragments(e),this.makeCode(") {\n"),this.recovery.compileToFragments(e,Y),this.makeCode("\n"+this.tab+"}"))):this.ensure||this.recovery?[]:(a=e.scope.freeVariable("error",{reserve:!1}),[this.makeCode(" catch ("+a+") {}")]),n=this.ensure?[].concat(this.makeCode(" finally {\n"),this.ensure.compileToFragments(e,Y),this.makeCode("\n"+this.tab+"}")):[],[].concat(this.makeCode(this.tab+"try {\n"),r,this.makeCode("\n"+this.tab+"}"),t,n)},n}(o),n.Throw=Ee=function(e){function n(e){this.expression=e}return t(n,e),n.prototype.children=["expression"],n.prototype.isStatement=Oe,n.prototype.jumps=J,n.prototype.makeReturn=Se,n.prototype.compileNode=function(e){return[].concat(this.makeCode(this.tab+"throw "),this.expression.compileToFragments(e),this.makeCode(";"))},n}(o),n.Existence=y=function(e){function n(e){this.expression=e}return t(n,e),n.prototype.children=["expression"],n.prototype.invert=K,n.prototype.compileNode=function(e){var t,n,a,i;return this.expression.front=this.front,a=this.expression.compile(e,q),this.expression.unwrap()instanceof w&&!e.scope.check(a)?(i=this.negated?["===","||"]:["!==","&&"],t=i[0],n=i[1],a="typeof "+a+" "+t+" \"undefined\" "+n+" "+a+" "+t+" null"):a=a+" "+(this.negated?"==":"!=")+" null",[this.makeCode(e.level<=j?a:"("+a+")")]},n}(o),n.Parens=oe=function(e){function n(e){this.body=e}return t(n,e),n.prototype.children=["body"],n.prototype.unwrap=function(){return this.body},n.prototype.isComplex=function(){return this.body.isComplex()},n.prototype.compileNode=function(e){var t,n,a;return(n=this.body.unwrap(),n instanceof we&&n.isAtomic())?(n.front=this.front,n.compileToFragments(e)):(a=n.compileToFragments(e,H),t=e.level<q&&(n instanceof ae||n instanceof f||n instanceof A&&n.returns)&&(e.level<j||3>=a.length),t?a:this.wrapInBraces(a))},n}(o),n.StringWithInterpolations=he=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.compileNode=function(e){var t,a,i,o,r,l,s;if(!e.inTaggedTemplateCall)return n.__super__.compileNode.apply(this,arguments);for(i=this.body.unwrap(),a=[],i.traverseChildren(!1,function(e){return e instanceof ye?(a.push(e),!0):!(e instanceof oe)||(a.push(e),!1)}),o=[],o.push(this.makeCode("`")),(r=0,l=a.length);r<l;r++)t=a[r],t instanceof ye?(s=t.value.slice(1,-1),s=s.replace(/(\\*)(`|\$\{)/g,function(e,t,n){return 0==t.length%2?t+"\\"+n:e}),o.push(this.makeCode(s))):(o.push(this.makeCode("${")),o.push.apply(o,t.compileToFragments(e,H)),o.push(this.makeCode("}")));return o.push(this.makeCode("`")),o},n}(oe),n.For=A=function(e){function n(e,t){var n;this.source=t.source,this.guard=t.guard,this.step=t.step,this.name=t.name,this.index=t.index,this.body=u.wrap([e]),this.own=!!t.own,this.object=!!t.object,this.from=!!t.from,this.from&&this.index&&this.index.error("cannot use index with for-from"),this.own&&!this.object&&t.ownTag.error("cannot use own with for-"+(this.from?"from":"in")),this.object&&(n=[this.index,this.name],this.name=n[0],this.index=n[1]),this.index instanceof we&&!this.index.isAssignable()&&this.index.error("index cannot be a pattern matching expression"),this.range=this.source instanceof we&&this.source.base instanceof se&&!this.source.properties.length&&!this.from,this.pattern=this.name instanceof we,this.range&&this.index&&this.index.error("indexes do not apply to range loops"),this.range&&this.pattern&&this.name.error("cannot pattern match over range loops"),this.returns=!1}return t(n,e),n.prototype.children=["body","source","guard","step"],n.prototype.compileNode=function(e){var t,n,a,i,o,r,l,s,d,p,f,m,g,_,y,h,b,x,v,S,T,k,E,N,A,O,D,P,R,I,M,F,B,z;return t=u.wrap([this.body]),E=t.expressions,x=E[E.length-1],(null==x?void 0:x.jumps())instanceof ce&&(this.returns=!1),R=this.range?this.source.base:this.source,P=e.scope,this.pattern||(S=this.name&&this.name.compile(e,W)),_=this.index&&this.index.compile(e,W),S&&!this.pattern&&P.find(S),_&&!(this.index instanceof we)&&P.find(_),this.returns&&(D=P.freeVariable("results")),this.from?this.pattern&&(y=P.freeVariable("x",{single:!0})):y=this.object&&_||P.freeVariable("i",{single:!0}),h=(this.range||this.from)&&S||_||y,b=h===y?"":h+" = ",this.step&&!this.range&&(N=this.cacheToCodeFragments(this.step.cache(e,W,je)),I=N[0],F=N[1],this.step.isNumber()&&(M=+F)),this.pattern&&(S=y),z="",f="",l="",m=this.tab+ve,this.range?p=R.compileToFragments(He(e,{index:y,name:S,step:this.step,isComplex:je})):(B=this.source.compile(e,W),(S||this.own)&&!(this.source.unwrap()instanceof w)&&(l+=""+this.tab+(k=P.freeVariable("ref"))+" = "+B+";\n",B=k),S&&!this.pattern&&!this.from&&(T=S+" = "+B+"["+h+"]"),!this.object&&!this.from&&(I!==F&&(l+=""+this.tab+I+";\n"),d=0>M,!(this.step&&null!=M&&d)&&(v=P.freeVariable("len")),o=""+b+y+" = 0, "+v+" = "+B+".length",r=""+b+y+" = "+B+".length - 1",a=y+" < "+v,i=y+" >= 0",this.step?(null==M?(a=F+" > 0 ? "+a+" : "+i,o="("+F+" > 0 ? ("+o+") : "+r+")"):d&&(a=i,o=r),g=y+" += "+F):g=""+(h===y?y+"++":"++"+y),p=[this.makeCode(o+"; "+a+"; "+b+g)])),this.returns&&(A=""+this.tab+D+" = [];\n",O="\n"+this.tab+"return "+D+";",t.makeReturn(D)),this.guard&&(1<t.expressions.length?t.expressions.unshift(new C(new oe(this.guard).invert(),new _e("continue"))):this.guard&&(t=u.wrap([new C(this.guard,t)]))),this.pattern&&t.expressions.unshift(new c(this.name,this.from?new w(h):new V(B+"["+h+"]"))),s=[].concat(this.makeCode(l),this.pluckDirectCall(e,t)),T&&(z="\n"+m+T+";"),this.object?(p=[this.makeCode(h+" in "+B)],this.own&&(f="\n"+m+"if (!"+Qe("hasProp",e)+".call("+B+", "+h+")) continue;")):this.from&&(p=[this.makeCode(h+" of "+B)]),n=t.compileToFragments(He(e,{indent:m}),Y),n&&0<n.length&&(n=[].concat(this.makeCode("\n"),n,this.makeCode("\n"))),[].concat(s,this.makeCode(""+(A||"")+this.tab+"for ("),p,this.makeCode(") {"+f+z),n,this.makeCode(this.tab+"}"+(O||"")))},n.prototype.pluckDirectCall=function(e,t){var n,a,i,o,r,l,s,d,p,u,g,_,y,h,b,x;for(a=[],p=t.expressions,(r=l=0,s=p.length);l<s;r=++l)(i=p[r],i=i.unwrapAll(),!!(i instanceof f))&&(x=null==(u=i.variable)?void 0:u.unwrapAll(),!!(x instanceof m||x instanceof we&&(null==(g=x.base)?void 0:g.unwrapAll())instanceof m&&1===x.properties.length&&("call"===(_=null==(y=x.properties[0].name)?void 0:y.value)||"apply"===_)))&&(o=(null==(h=x.base)?void 0:h.unwrapAll())||x,d=new w(e.scope.freeVariable("fn")),n=new we(d),x.base&&(b=[n,x],x.base=b[0],n=b[1]),t.expressions[r]=new f(n,i.args),a=a.concat(this.makeCode(this.tab),new c(d,o).compileToFragments(e,Y),this.makeCode(";\n")));return a},n}(Ce),n.Switch=xe=function(e){function n(e,t,n){this.subject=e,this.cases=t,this.otherwise=n}return t(n,e),n.prototype.children=["subject","cases","otherwise"],n.prototype.isStatement=Oe,n.prototype.jumps=function(e){var t,n,a,i,o,r,l,s;for(null==e&&(e={block:!0}),r=this.cases,(a=0,o=r.length);a<o;a++)if(l=r[a],n=l[0],t=l[1],i=t.jumps(e))return i;return null==(s=this.otherwise)?void 0:s.jumps(e)},n.prototype.makeReturn=function(e){var t,n,a,i,o;for(i=this.cases,t=0,n=i.length;t<n;t++)a=i[t],a[1].makeReturn(e);return e&&(this.otherwise||(this.otherwise=new u([new V("void 0")]))),null!=(o=this.otherwise)&&o.makeReturn(e),this},n.prototype.compileNode=function(e){var t,n,a,o,r,l,d,i,p,c,u,f,m,g,_,y;for(i=e.indent+ve,p=e.indent=i+ve,l=[].concat(this.makeCode(this.tab+"switch ("),this.subject?this.subject.compileToFragments(e,H):this.makeCode("false"),this.makeCode(") {\n")),g=this.cases,(d=c=0,f=g.length);c<f;d=++c){for(_=g[d],o=_[0],t=_[1],y=Be([o]),(u=0,m=y.length);u<m;u++)a=y[u],this.subject||(a=a.invert()),l=l.concat(this.makeCode(i+"case "),a.compileToFragments(e,H),this.makeCode(":\n"));if(0<(n=t.compileToFragments(e,Y)).length&&(l=l.concat(n,this.makeCode("\n"))),d===this.cases.length-1&&!this.otherwise)break;(r=this.lastNonComment(t.expressions),!(r instanceof ce||r instanceof V&&r.jumps()&&"debugger"!==r.value))&&l.push(a.makeCode(p+"break;\n"))}return this.otherwise&&this.otherwise.expressions.length&&l.push.apply(l,[this.makeCode(i+"default:\n")].concat(s.call(this.otherwise.compileToFragments(e,Y)),[this.makeCode("\n")])),l.push(this.makeCode(this.tab+"}")),l},n}(o),n.If=C=function(e){function n(e,t,n){this.body=t,null==n&&(n={}),this.condition="unless"===n.type?e.invert():e,this.elseBody=null,this.isChain=!1,this.soak=n.soak}return t(n,e),n.prototype.children=["condition","body","elseBody"],n.prototype.bodyNode=function(){var e;return null==(e=this.body)?void 0:e.unwrap()},n.prototype.elseBodyNode=function(){var e;return null==(e=this.elseBody)?void 0:e.unwrap()},n.prototype.addElse=function(e){return this.isChain?this.elseBodyNode().addElse(e):(this.isChain=e instanceof n,this.elseBody=this.ensureBlock(e),this.elseBody.updateLocationDataIfMissing(e.locationData)),this},n.prototype.isStatement=function(e){var t;return(null==e?void 0:e.level)===Y||this.bodyNode().isStatement(e)||(null==(t=this.elseBodyNode())?void 0:t.isStatement(e))},n.prototype.jumps=function(e){var t;return this.body.jumps(e)||(null==(t=this.elseBody)?void 0:t.jumps(e))},n.prototype.compileNode=function(e){return this.isStatement(e)?this.compileStatement(e):this.compileExpression(e)},n.prototype.makeReturn=function(e){return e&&(this.elseBody||(this.elseBody=new u([new V("void 0")]))),this.body&&(this.body=new u([this.body.makeReturn(e)])),this.elseBody&&(this.elseBody=new u([this.elseBody.makeReturn(e)])),this},n.prototype.ensureBlock=function(e){return e instanceof u?e:new u([e])},n.prototype.compileStatement=function(e){var t,a,i,o,r,l,s;return(i=Ie(e,"chainChild"),r=Ie(e,"isExistentialEquals"),r)?new n(this.condition.invert(),this.elseBodyNode(),{type:"if"}).compileToFragments(e):(s=e.indent+ve,o=this.condition.compileToFragments(e,H),a=this.ensureBlock(this.body).compileToFragments(He(e,{indent:s})),l=[].concat(this.makeCode("if ("),o,this.makeCode(") {\n"),a,this.makeCode("\n"+this.tab+"}")),i||l.unshift(this.makeCode(this.tab)),!this.elseBody)?l:(t=l.concat(this.makeCode(" else ")),this.isChain?(e.chainChild=!0,t=t.concat(this.elseBody.unwrap().compileToFragments(e,Y))):t=t.concat(this.makeCode("{\n"),this.elseBody.compileToFragments(He(e,{indent:s}),Y),this.makeCode("\n"+this.tab+"}")),t)},n.prototype.compileExpression=function(e){var t,n,a,i;return a=this.condition.compileToFragments(e,j),n=this.bodyNode().compileToFragments(e,W),t=this.elseBodyNode()?this.elseBodyNode().compileToFragments(e,W):[this.makeCode("void 0")],i=a.concat(this.makeCode(" ? "),n,this.makeCode(" : "),t),e.level>=j?this.wrapInBraces(i):i},n.prototype.unfoldSoak=function(){return this.soak&&this},n}(o),Le={extend:function(e){return"function(child, parent) { for (var key in parent) { if ("+Qe("hasProp",e)+".call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; }"},bind:function(){return"function(fn, me){ return function(){ return fn.apply(me, arguments); }; }"},indexOf:function(){return"[].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; }"},modulo:function(){return"function(a, b) { return (+a % (b = +b) + b) % b; }"},hasProp:function(){return"{}.hasOwnProperty"},slice:function(){return"[].slice"}},Y=1,H=2,W=3,j=4,q=5,$=6,ve="  ",ue=/^[+-]?\d+$/,Qe=function(e,t){var n,a;return a=t.scope.root,e in a.utilities?a.utilities[e]:(n=a.freeVariable(e),a.assign(n,Le[e](t)),a.utilities[e]=n)},Ye=function(e,t){return e=e.replace(/\n/g,"$&"+t),e.replace(/\s+$/,"")},Ue=function(e){return e instanceof w&&"arguments"===e.value},$e=function(e){return e instanceof ke||e instanceof m&&e.bound||e instanceof be},je=function(e){return e.isComplex()||("function"==typeof e.isAssignable?e.isAssignable():void 0)},Je=function(e,t,n){var a;if(a=t[n].unfoldSoak(e))return t[n]=a.body,a.body=new we(t),a}}).call(this)},{"./helpers":41,"./lexer":42,"./scope":47}],44:[function(e,t,n){(function(a){var i=function(){function e(){this.yy={}}var t=function(e,t,n,a){for(n=n||{},a=e.length;a--;n[e[a]]=t);return n},n=[1,22],a=[1,25],i=[1,83],o=[1,79],r=[1,84],l=[1,85],s=[1,81],d=[1,82],p=[1,56],c=[1,58],u=[1,59],f=[1,60],m=[1,61],g=[1,62],_=[1,49],y=[1,50],h=[1,32],b=[1,68],x=[1,69],v=[1,78],S=[1,47],T=[1,51],k=[1,52],E=[1,67],N=[1,65],A=[1,66],w=[1,64],C=[1,42],O=[1,48],D=[1,63],P=[1,73],R=[1,74],I=[1,75],M=[1,76],F=[1,46],B=[1,72],z=[1,34],j=[1,35],U=[1,36],$=[1,37],W=[1,38],q=[1,39],H=[1,86],Y=[1,6,32,42,131],V=[1,101],G=[1,89],Z=[1,88],X=[1,87],K=[1,90],J=[1,91],Q=[1,92],ee=[1,93],te=[1,94],ne=[1,95],ae=[1,96],ie=[1,97],oe=[1,98],re=[1,99],le=[1,100],se=[1,104],de=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],pe=[2,167],ce=[1,110],ue=[1,111],fe=[1,112],me=[1,113],ge=[1,115],_e=[1,116],ye=[1,109],he=[1,6,32,42,131,133,135,139,156],be=[2,27],xe=[1,123],ve=[1,121],Se=[1,6,31,32,40,41,42,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Te=[2,95],ke=[1,6,31,32,42,46,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Ee=[2,74],Ne=[1,128],Le=[1,133],Ae=[1,134],we=[1,136],Ce=[1,6,31,32,40,41,42,55,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Oe=[2,92],De=[1,6,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Pe=[2,64],Re=[1,161],Ie=[1,167],Me=[1,179],Fe=[1,181],Be=[1,176],ze=[1,183],je=[1,185],Ue=[1,6,31,32,40,41,42,55,66,71,74,82,83,84,85,87,89,90,94,96,113,114,115,120,122,131,133,134,135,139,140,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],$e=[2,111],We=[1,6,31,32,40,41,42,58,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],qe=[1,6,31,32,40,41,42,46,58,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],He=[40,41,114],Ye=[1,242],Ve=[1,241],Ge=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156],Ze=[2,72],Xe=[1,251],Ke=[6,31,32,66,71],Je=[6,31,32,55,66,71,74],Qe=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,164,166,167,168,169,170,171,172,173,174],et=[40,41,82,83,84,85,87,90,113,114],tt=[1,270],nt=[2,62],at=[1,281],it=[1,283],ot=[1,288],rt=[1,290],lt=[2,188],st=[1,6,31,32,40,41,42,55,66,71,74,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],dt=[1,299],pt=[6,31,32,71,115,120],ct=[1,6,31,32,40,41,42,55,58,66,71,74,82,83,84,85,87,89,90,94,96,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],ut=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,140,156],ft=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,134,140,156],mt=[146,147,148],gt=[71,146,147,148],_t=[6,31,94],yt=[1,313],ht=[6,31,32,71,94],bt=[6,31,32,58,71,94],xt=[6,31,32,55,58,71,94],vt=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,166,167,168,169,170,171,172,173,174],St=[12,28,34,38,40,41,44,45,48,49,50,51,52,53,61,63,64,68,69,89,92,95,97,105,112,117,118,119,125,129,130,133,135,137,139,149,155,157,158,159,160,161,162],Tt=[2,177],kt=[6,31,32],Et=[2,73],Nt=[1,325],Lt=[1,326],At=[1,6,31,32,42,66,71,74,89,94,115,120,122,127,128,131,133,134,135,139,140,151,153,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],wt=[32,151,153],Ct=[1,6,32,42,66,71,74,89,94,115,120,122,131,134,140,156],Ot=[1,353],Dt=[1,359],Pt=[1,6,32,42,131,156],Rt=[2,87],It=[1,370],Mt=[1,371],Ft=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,151,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Bt=[1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,135,139,140,156],zt=[1,384],jt=[1,385],Ut=[6,31,32,94],$t=[6,31,32,71],Wt=[1,6,31,32,42,66,71,74,89,94,115,120,122,127,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],qt=[31,71],Ht=[1,411],Yt=[1,412],Vt=[1,418],Gt=[1,419],Zt={trace:function(){},yy:{},symbols_:{error:2,Root:3,Body:4,Line:5,TERMINATOR:6,Expression:7,Statement:8,YieldReturn:9,Return:10,Comment:11,STATEMENT:12,Import:13,Export:14,Value:15,Invocation:16,Code:17,Operation:18,Assign:19,If:20,Try:21,While:22,For:23,Switch:24,Class:25,Throw:26,Yield:27,YIELD:28,FROM:29,Block:30,INDENT:31,OUTDENT:32,Identifier:33,IDENTIFIER:34,Property:35,PROPERTY:36,AlphaNumeric:37,NUMBER:38,String:39,STRING:40,STRING_START:41,STRING_END:42,Regex:43,REGEX:44,REGEX_START:45,REGEX_END:46,Literal:47,JS:48,UNDEFINED:49,NULL:50,BOOL:51,INFINITY:52,NAN:53,Assignable:54,"=":55,AssignObj:56,ObjAssignable:57,":":58,SimpleObjAssignable:59,ThisProperty:60,RETURN:61,Object:62,HERECOMMENT:63,PARAM_START:64,ParamList:65,PARAM_END:66,FuncGlyph:67,"->":68,"=>":69,OptComma:70,",":71,Param:72,ParamVar:73,"...":74,Array:75,Splat:76,SimpleAssignable:77,Accessor:78,Parenthetical:79,Range:80,This:81,".":82,"?.":83,"::":84,"?::":85,Index:86,INDEX_START:87,IndexValue:88,INDEX_END:89,INDEX_SOAK:90,Slice:91,"{":92,AssignList:93,"}":94,CLASS:95,EXTENDS:96,IMPORT:97,ImportDefaultSpecifier:98,ImportNamespaceSpecifier:99,ImportSpecifierList:100,ImportSpecifier:101,AS:102,DEFAULT:103,IMPORT_ALL:104,EXPORT:105,ExportSpecifierList:106,EXPORT_ALL:107,ExportSpecifier:108,OptFuncExist:109,Arguments:110,Super:111,SUPER:112,FUNC_EXIST:113,CALL_START:114,CALL_END:115,ArgList:116,THIS:117,"@":118,"[":119,"]":120,RangeDots:121,"..":122,Arg:123,SimpleArgs:124,TRY:125,Catch:126,FINALLY:127,CATCH:128,THROW:129,"(":130,")":131,WhileSource:132,WHILE:133,WHEN:134,UNTIL:135,Loop:136,LOOP:137,ForBody:138,FOR:139,BY:140,ForStart:141,ForSource:142,ForVariables:143,OWN:144,ForValue:145,FORIN:146,FOROF:147,FORFROM:148,SWITCH:149,Whens:150,ELSE:151,When:152,LEADING_WHEN:153,IfBlock:154,IF:155,POST_IF:156,UNARY:157,UNARY_MATH:158,"-":159,"+":160,"--":161,"++":162,"?":163,MATH:164,"**":165,SHIFT:166,COMPARE:167,"&":168,"^":169,"|":170,"&&":171,"||":172,"BIN?":173,RELATION:174,COMPOUND_ASSIGN:175,$accept:0,$end:1},terminals_:{2:"error",6:"TERMINATOR",12:"STATEMENT",28:"YIELD",29:"FROM",31:"INDENT",32:"OUTDENT",34:"IDENTIFIER",36:"PROPERTY",38:"NUMBER",40:"STRING",41:"STRING_START",42:"STRING_END",44:"REGEX",45:"REGEX_START",46:"REGEX_END",48:"JS",49:"UNDEFINED",50:"NULL",51:"BOOL",52:"INFINITY",53:"NAN",55:"=",58:":",61:"RETURN",63:"HERECOMMENT",64:"PARAM_START",66:"PARAM_END",68:"->",69:"=>",71:",",74:"...",82:".",83:"?.",84:"::",85:"?::",87:"INDEX_START",89:"INDEX_END",90:"INDEX_SOAK",92:"{",94:"}",95:"CLASS",96:"EXTENDS",97:"IMPORT",102:"AS",103:"DEFAULT",104:"IMPORT_ALL",105:"EXPORT",107:"EXPORT_ALL",112:"SUPER",113:"FUNC_EXIST",114:"CALL_START",115:"CALL_END",117:"THIS",118:"@",119:"[",120:"]",122:"..",125:"TRY",127:"FINALLY",128:"CATCH",129:"THROW",130:"(",131:")",133:"WHILE",134:"WHEN",135:"UNTIL",137:"LOOP",139:"FOR",140:"BY",144:"OWN",146:"FORIN",147:"FOROF",148:"FORFROM",149:"SWITCH",151:"ELSE",153:"LEADING_WHEN",155:"IF",156:"POST_IF",157:"UNARY",158:"UNARY_MATH",159:"-",160:"+",161:"--",162:"++",163:"?",164:"MATH",165:"**",166:"SHIFT",167:"COMPARE",168:"&",169:"^",170:"|",171:"&&",172:"||",173:"BIN?",174:"RELATION",175:"COMPOUND_ASSIGN"},productions_:[0,[3,0],[3,1],[4,1],[4,3],[4,2],[5,1],[5,1],[5,1],[8,1],[8,1],[8,1],[8,1],[8,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[27,1],[27,2],[27,3],[30,2],[30,3],[33,1],[35,1],[37,1],[37,1],[39,1],[39,3],[43,1],[43,3],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[19,3],[19,4],[19,5],[56,1],[56,3],[56,5],[56,3],[56,5],[56,1],[59,1],[59,1],[59,1],[57,1],[57,1],[10,2],[10,4],[10,1],[9,3],[9,2],[11,1],[17,5],[17,2],[67,1],[67,1],[70,0],[70,1],[65,0],[65,1],[65,3],[65,4],[65,6],[72,1],[72,2],[72,3],[72,1],[73,1],[73,1],[73,1],[73,1],[76,2],[77,1],[77,2],[77,2],[77,1],[54,1],[54,1],[54,1],[15,1],[15,1],[15,1],[15,1],[15,1],[78,2],[78,2],[78,2],[78,2],[78,1],[78,1],[86,3],[86,2],[88,1],[88,1],[62,4],[93,0],[93,1],[93,3],[93,4],[93,6],[25,1],[25,2],[25,3],[25,4],[25,2],[25,3],[25,4],[25,5],[13,2],[13,4],[13,4],[13,5],[13,7],[13,6],[13,9],[100,1],[100,3],[100,4],[100,4],[100,6],[101,1],[101,3],[101,1],[101,3],[98,1],[99,3],[14,3],[14,5],[14,2],[14,4],[14,5],[14,6],[14,3],[14,4],[14,7],[106,1],[106,3],[106,4],[106,4],[106,6],[108,1],[108,3],[108,3],[108,1],[108,3],[16,3],[16,3],[16,3],[16,1],[111,1],[111,2],[109,0],[109,1],[110,2],[110,4],[81,1],[81,1],[60,2],[75,2],[75,4],[121,1],[121,1],[80,5],[91,3],[91,2],[91,2],[91,1],[116,1],[116,3],[116,4],[116,4],[116,6],[123,1],[123,1],[123,1],[124,1],[124,3],[21,2],[21,3],[21,4],[21,5],[126,3],[126,3],[126,2],[26,2],[79,3],[79,5],[132,2],[132,4],[132,2],[132,4],[22,2],[22,2],[22,2],[22,1],[136,2],[136,2],[23,2],[23,2],[23,2],[138,2],[138,4],[138,2],[141,2],[141,3],[145,1],[145,1],[145,1],[145,1],[143,1],[143,3],[142,2],[142,2],[142,4],[142,4],[142,4],[142,6],[142,6],[142,2],[142,4],[24,5],[24,7],[24,4],[24,6],[150,1],[150,2],[152,3],[152,4],[154,3],[154,5],[20,1],[20,3],[20,3],[20,3],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,5],[18,4],[18,3]],performAction:function(e,t,n,a,i,o,r){var l=o.length-1;switch(i){case 1:return this.$=a.addLocationDataFn(r[l],r[l])(new a.Block);break;case 2:return this.$=o[l];break;case 3:this.$=a.addLocationDataFn(r[l],r[l])(a.Block.wrap([o[l]]));break;case 4:this.$=a.addLocationDataFn(r[l-2],r[l])(o[l-2].push(o[l]));break;case 5:this.$=o[l-1];break;case 6:case 7:case 8:case 9:case 10:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 35:case 40:case 42:case 56:case 57:case 58:case 59:case 60:case 61:case 72:case 73:case 83:case 84:case 85:case 86:case 91:case 92:case 95:case 99:case 105:case 164:case 188:case 189:case 191:case 221:case 222:case 240:case 246:this.$=o[l];break;case 11:this.$=a.addLocationDataFn(r[l],r[l])(new a.StatementLiteral(o[l]));break;case 27:this.$=a.addLocationDataFn(r[l],r[l])(new a.Op(o[l],new a.Value(new a.Literal(""))));break;case 28:case 250:case 251:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Op(o[l-1],o[l]));break;case 29:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Op(o[l-2].concat(o[l-1]),o[l]));break;case 30:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Block);break;case 31:case 106:this.$=a.addLocationDataFn(r[l-2],r[l])(o[l-1]);break;case 32:this.$=a.addLocationDataFn(r[l],r[l])(new a.IdentifierLiteral(o[l]));break;case 33:this.$=a.addLocationDataFn(r[l],r[l])(new a.PropertyName(o[l]));break;case 34:this.$=a.addLocationDataFn(r[l],r[l])(new a.NumberLiteral(o[l]));break;case 36:this.$=a.addLocationDataFn(r[l],r[l])(new a.StringLiteral(o[l]));break;case 37:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.StringWithInterpolations(o[l-1]));break;case 38:this.$=a.addLocationDataFn(r[l],r[l])(new a.RegexLiteral(o[l]));break;case 39:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.RegexWithInterpolations(o[l-1].args));break;case 41:this.$=a.addLocationDataFn(r[l],r[l])(new a.PassthroughLiteral(o[l]));break;case 43:this.$=a.addLocationDataFn(r[l],r[l])(new a.UndefinedLiteral);break;case 44:this.$=a.addLocationDataFn(r[l],r[l])(new a.NullLiteral);break;case 45:this.$=a.addLocationDataFn(r[l],r[l])(new a.BooleanLiteral(o[l]));break;case 46:this.$=a.addLocationDataFn(r[l],r[l])(new a.InfinityLiteral(o[l]));break;case 47:this.$=a.addLocationDataFn(r[l],r[l])(new a.NaNLiteral);break;case 48:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Assign(o[l-2],o[l]));break;case 49:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.Assign(o[l-3],o[l]));break;case 50:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.Assign(o[l-4],o[l-1]));break;case 51:case 88:case 93:case 94:case 96:case 97:case 98:case 223:case 224:this.$=a.addLocationDataFn(r[l],r[l])(new a.Value(o[l]));break;case 52:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Assign(a.addLocationDataFn(r[l-2])(new a.Value(o[l-2])),o[l],"object",{operatorToken:a.addLocationDataFn(r[l-1])(new a.Literal(o[l-1]))}));break;case 53:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.Assign(a.addLocationDataFn(r[l-4])(new a.Value(o[l-4])),o[l-1],"object",{operatorToken:a.addLocationDataFn(r[l-3])(new a.Literal(o[l-3]))}));break;case 54:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Assign(a.addLocationDataFn(r[l-2])(new a.Value(o[l-2])),o[l],null,{operatorToken:a.addLocationDataFn(r[l-1])(new a.Literal(o[l-1]))}));break;case 55:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.Assign(a.addLocationDataFn(r[l-4])(new a.Value(o[l-4])),o[l-1],null,{operatorToken:a.addLocationDataFn(r[l-3])(new a.Literal(o[l-3]))}));break;case 62:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Return(o[l]));break;case 63:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.Return(new a.Value(o[l-1])));break;case 64:this.$=a.addLocationDataFn(r[l],r[l])(new a.Return);break;case 65:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.YieldReturn(o[l]));break;case 66:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.YieldReturn);break;case 67:this.$=a.addLocationDataFn(r[l],r[l])(new a.Comment(o[l]));break;case 68:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.Code(o[l-3],o[l],o[l-1]));break;case 69:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Code([],o[l],o[l-1]));break;case 70:this.$=a.addLocationDataFn(r[l],r[l])("func");break;case 71:this.$=a.addLocationDataFn(r[l],r[l])("boundfunc");break;case 74:case 111:this.$=a.addLocationDataFn(r[l],r[l])([]);break;case 75:case 112:case 131:case 151:case 183:case 225:this.$=a.addLocationDataFn(r[l],r[l])([o[l]]);break;case 76:case 113:case 132:case 152:case 184:this.$=a.addLocationDataFn(r[l-2],r[l])(o[l-2].concat(o[l]));break;case 77:case 114:case 133:case 153:case 185:this.$=a.addLocationDataFn(r[l-3],r[l])(o[l-3].concat(o[l]));break;case 78:case 115:case 135:case 155:case 187:this.$=a.addLocationDataFn(r[l-5],r[l])(o[l-5].concat(o[l-2]));break;case 79:this.$=a.addLocationDataFn(r[l],r[l])(new a.Param(o[l]));break;case 80:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Param(o[l-1],null,!0));break;case 81:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Param(o[l-2],o[l]));break;case 82:case 190:this.$=a.addLocationDataFn(r[l],r[l])(new a.Expansion);break;case 87:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Splat(o[l-1]));break;case 89:this.$=a.addLocationDataFn(r[l-1],r[l])(o[l-1].add(o[l]));break;case 90:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Value(o[l-1],[].concat(o[l])));break;case 100:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Access(o[l]));break;case 101:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Access(o[l],"soak"));break;case 102:this.$=a.addLocationDataFn(r[l-1],r[l])([a.addLocationDataFn(r[l-1])(new a.Access(new a.PropertyName("prototype"))),a.addLocationDataFn(r[l])(new a.Access(o[l]))]);break;case 103:this.$=a.addLocationDataFn(r[l-1],r[l])([a.addLocationDataFn(r[l-1])(new a.Access(new a.PropertyName("prototype"),"soak")),a.addLocationDataFn(r[l])(new a.Access(o[l]))]);break;case 104:this.$=a.addLocationDataFn(r[l],r[l])(new a.Access(new a.PropertyName("prototype")));break;case 107:this.$=a.addLocationDataFn(r[l-1],r[l])(a.extend(o[l],{soak:!0}));break;case 108:this.$=a.addLocationDataFn(r[l],r[l])(new a.Index(o[l]));break;case 109:this.$=a.addLocationDataFn(r[l],r[l])(new a.Slice(o[l]));break;case 110:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.Obj(o[l-2],o[l-3].generated));break;case 116:this.$=a.addLocationDataFn(r[l],r[l])(new a.Class);break;case 117:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Class(null,null,o[l]));break;case 118:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Class(null,o[l]));break;case 119:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.Class(null,o[l-1],o[l]));break;case 120:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Class(o[l]));break;case 121:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Class(o[l-1],null,o[l]));break;case 122:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.Class(o[l-2],o[l]));break;case 123:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.Class(o[l-3],o[l-1],o[l]));break;case 124:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.ImportDeclaration(null,o[l]));break;case 125:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.ImportDeclaration(new a.ImportClause(o[l-2],null),o[l]));break;case 126:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.ImportDeclaration(new a.ImportClause(null,o[l-2]),o[l]));break;case 127:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.ImportDeclaration(new a.ImportClause(null,new a.ImportSpecifierList([])),o[l]));break;case 128:this.$=a.addLocationDataFn(r[l-6],r[l])(new a.ImportDeclaration(new a.ImportClause(null,new a.ImportSpecifierList(o[l-4])),o[l]));break;case 129:this.$=a.addLocationDataFn(r[l-5],r[l])(new a.ImportDeclaration(new a.ImportClause(o[l-4],o[l-2]),o[l]));break;case 130:this.$=a.addLocationDataFn(r[l-8],r[l])(new a.ImportDeclaration(new a.ImportClause(o[l-7],new a.ImportSpecifierList(o[l-4])),o[l]));break;case 134:case 154:case 170:case 186:this.$=a.addLocationDataFn(r[l-3],r[l])(o[l-2]);break;case 136:this.$=a.addLocationDataFn(r[l],r[l])(new a.ImportSpecifier(o[l]));break;case 137:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.ImportSpecifier(o[l-2],o[l]));break;case 138:this.$=a.addLocationDataFn(r[l],r[l])(new a.ImportSpecifier(new a.Literal(o[l])));break;case 139:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.ImportSpecifier(new a.Literal(o[l-2]),o[l]));break;case 140:this.$=a.addLocationDataFn(r[l],r[l])(new a.ImportDefaultSpecifier(o[l]));break;case 141:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.ImportNamespaceSpecifier(new a.Literal(o[l-2]),o[l]));break;case 142:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.ExportNamedDeclaration(new a.ExportSpecifierList([])));break;case 143:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.ExportNamedDeclaration(new a.ExportSpecifierList(o[l-2])));break;case 144:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.ExportNamedDeclaration(o[l]));break;case 145:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.ExportNamedDeclaration(new a.Assign(o[l-2],o[l],null,{moduleDeclaration:"export"})));break;case 146:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.ExportNamedDeclaration(new a.Assign(o[l-3],o[l],null,{moduleDeclaration:"export"})));break;case 147:this.$=a.addLocationDataFn(r[l-5],r[l])(new a.ExportNamedDeclaration(new a.Assign(o[l-4],o[l-1],null,{moduleDeclaration:"export"})));break;case 148:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.ExportDefaultDeclaration(o[l]));break;case 149:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.ExportAllDeclaration(new a.Literal(o[l-2]),o[l]));break;case 150:this.$=a.addLocationDataFn(r[l-6],r[l])(new a.ExportNamedDeclaration(new a.ExportSpecifierList(o[l-4]),o[l]));break;case 156:this.$=a.addLocationDataFn(r[l],r[l])(new a.ExportSpecifier(o[l]));break;case 157:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.ExportSpecifier(o[l-2],o[l]));break;case 158:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.ExportSpecifier(o[l-2],new a.Literal(o[l])));break;case 159:this.$=a.addLocationDataFn(r[l],r[l])(new a.ExportSpecifier(new a.Literal(o[l])));break;case 160:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.ExportSpecifier(new a.Literal(o[l-2]),o[l]));break;case 161:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.TaggedTemplateCall(o[l-2],o[l],o[l-1]));break;case 162:case 163:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Call(o[l-2],o[l],o[l-1]));break;case 165:this.$=a.addLocationDataFn(r[l],r[l])(new a.SuperCall);break;case 166:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.SuperCall(o[l]));break;case 167:this.$=a.addLocationDataFn(r[l],r[l])(!1);break;case 168:this.$=a.addLocationDataFn(r[l],r[l])(!0);break;case 169:this.$=a.addLocationDataFn(r[l-1],r[l])([]);break;case 171:case 172:this.$=a.addLocationDataFn(r[l],r[l])(new a.Value(new a.ThisLiteral()));break;case 173:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Value(a.addLocationDataFn(r[l-1])(new a.ThisLiteral),[a.addLocationDataFn(r[l])(new a.Access(o[l]))],"this"));break;case 174:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Arr([]));break;case 175:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.Arr(o[l-2]));break;case 176:this.$=a.addLocationDataFn(r[l],r[l])("inclusive");break;case 177:this.$=a.addLocationDataFn(r[l],r[l])("exclusive");break;case 178:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.Range(o[l-3],o[l-1],o[l-2]));break;case 179:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Range(o[l-2],o[l],o[l-1]));break;case 180:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Range(o[l-1],null,o[l]));break;case 181:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Range(null,o[l],o[l-1]));break;case 182:this.$=a.addLocationDataFn(r[l],r[l])(new a.Range(null,null,o[l]));break;case 192:this.$=a.addLocationDataFn(r[l-2],r[l])([].concat(o[l-2],o[l]));break;case 193:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Try(o[l]));break;case 194:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Try(o[l-1],o[l][0],o[l][1]));break;case 195:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.Try(o[l-2],null,null,o[l]));break;case 196:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.Try(o[l-3],o[l-2][0],o[l-2][1],o[l]));break;case 197:this.$=a.addLocationDataFn(r[l-2],r[l])([o[l-1],o[l]]);break;case 198:this.$=a.addLocationDataFn(r[l-2],r[l])([a.addLocationDataFn(r[l-1])(new a.Value(o[l-1])),o[l]]);break;case 199:this.$=a.addLocationDataFn(r[l-1],r[l])([null,o[l]]);break;case 200:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Throw(o[l]));break;case 201:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Parens(o[l-1]));break;case 202:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.Parens(o[l-2]));break;case 203:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.While(o[l]));break;case 204:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.While(o[l-2],{guard:o[l]}));break;case 205:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.While(o[l],{invert:!0}));break;case 206:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.While(o[l-2],{invert:!0,guard:o[l]}));break;case 207:this.$=a.addLocationDataFn(r[l-1],r[l])(o[l-1].addBody(o[l]));break;case 208:case 209:this.$=a.addLocationDataFn(r[l-1],r[l])(o[l].addBody(a.addLocationDataFn(r[l-1])(a.Block.wrap([o[l-1]]))));break;case 210:this.$=a.addLocationDataFn(r[l],r[l])(o[l]);break;case 211:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.While(a.addLocationDataFn(r[l-1])(new a.BooleanLiteral("true"))).addBody(o[l]));break;case 212:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.While(a.addLocationDataFn(r[l-1])(new a.BooleanLiteral("true"))).addBody(a.addLocationDataFn(r[l])(a.Block.wrap([o[l]]))));break;case 213:case 214:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.For(o[l-1],o[l]));break;case 215:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.For(o[l],o[l-1]));break;case 216:this.$=a.addLocationDataFn(r[l-1],r[l])({source:a.addLocationDataFn(r[l])(new a.Value(o[l]))});break;case 217:this.$=a.addLocationDataFn(r[l-3],r[l])({source:a.addLocationDataFn(r[l-2])(new a.Value(o[l-2])),step:o[l]});break;case 218:this.$=a.addLocationDataFn(r[l-1],r[l])(function(){return o[l].own=o[l-1].own,o[l].ownTag=o[l-1].ownTag,o[l].name=o[l-1][0],o[l].index=o[l-1][1],o[l]}());break;case 219:this.$=a.addLocationDataFn(r[l-1],r[l])(o[l]);break;case 220:this.$=a.addLocationDataFn(r[l-2],r[l])(function(){return o[l].own=!0,o[l].ownTag=a.addLocationDataFn(r[l-1])(new a.Literal(o[l-1])),o[l]}());break;case 226:this.$=a.addLocationDataFn(r[l-2],r[l])([o[l-2],o[l]]);break;case 227:this.$=a.addLocationDataFn(r[l-1],r[l])({source:o[l]});break;case 228:this.$=a.addLocationDataFn(r[l-1],r[l])({source:o[l],object:!0});break;case 229:this.$=a.addLocationDataFn(r[l-3],r[l])({source:o[l-2],guard:o[l]});break;case 230:this.$=a.addLocationDataFn(r[l-3],r[l])({source:o[l-2],guard:o[l],object:!0});break;case 231:this.$=a.addLocationDataFn(r[l-3],r[l])({source:o[l-2],step:o[l]});break;case 232:this.$=a.addLocationDataFn(r[l-5],r[l])({source:o[l-4],guard:o[l-2],step:o[l]});break;case 233:this.$=a.addLocationDataFn(r[l-5],r[l])({source:o[l-4],step:o[l-2],guard:o[l]});break;case 234:this.$=a.addLocationDataFn(r[l-1],r[l])({source:o[l],from:!0});break;case 235:this.$=a.addLocationDataFn(r[l-3],r[l])({source:o[l-2],guard:o[l],from:!0});break;case 236:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.Switch(o[l-3],o[l-1]));break;case 237:this.$=a.addLocationDataFn(r[l-6],r[l])(new a.Switch(o[l-5],o[l-3],o[l-1]));break;case 238:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.Switch(null,o[l-1]));break;case 239:this.$=a.addLocationDataFn(r[l-5],r[l])(new a.Switch(null,o[l-3],o[l-1]));break;case 241:this.$=a.addLocationDataFn(r[l-1],r[l])(o[l-1].concat(o[l]));break;case 242:this.$=a.addLocationDataFn(r[l-2],r[l])([[o[l-1],o[l]]]);break;case 243:this.$=a.addLocationDataFn(r[l-3],r[l])([[o[l-2],o[l-1]]]);break;case 244:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.If(o[l-1],o[l],{type:o[l-2]}));break;case 245:this.$=a.addLocationDataFn(r[l-4],r[l])(o[l-4].addElse(a.addLocationDataFn(r[l-2],r[l])(new a.If(o[l-1],o[l],{type:o[l-2]}))));break;case 247:this.$=a.addLocationDataFn(r[l-2],r[l])(o[l-2].addElse(o[l]));break;case 248:case 249:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.If(o[l],a.addLocationDataFn(r[l-2])(a.Block.wrap([o[l-2]])),{type:o[l-1],statement:!0}));break;case 252:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Op("-",o[l]));break;case 253:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Op("+",o[l]));break;case 254:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Op("--",o[l]));break;case 255:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Op("++",o[l]));break;case 256:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Op("--",o[l-1],null,!0));break;case 257:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Op("++",o[l-1],null,!0));break;case 258:this.$=a.addLocationDataFn(r[l-1],r[l])(new a.Existence(o[l-1]));break;case 259:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Op("+",o[l-2],o[l]));break;case 260:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Op("-",o[l-2],o[l]));break;case 261:case 262:case 263:case 264:case 265:case 266:case 267:case 268:case 269:case 270:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Op(o[l-1],o[l-2],o[l]));break;case 271:this.$=a.addLocationDataFn(r[l-2],r[l])(function(){return"!"===o[l-1].charAt(0)?new a.Op(o[l-1].slice(1),o[l-2],o[l]).invert():new a.Op(o[l-1],o[l-2],o[l])}());break;case 272:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Assign(o[l-2],o[l],o[l-1]));break;case 273:this.$=a.addLocationDataFn(r[l-4],r[l])(new a.Assign(o[l-4],o[l-1],o[l-3]));break;case 274:this.$=a.addLocationDataFn(r[l-3],r[l])(new a.Assign(o[l-3],o[l],o[l-2]));break;case 275:this.$=a.addLocationDataFn(r[l-2],r[l])(new a.Extends(o[l-2],o[l]));}},table:[{1:[2,1],3:1,4:2,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:a,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{1:[3]},{1:[2,2],6:H},t(Y,[2,3]),t(Y,[2,6],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(Y,[2,7],{141:77,132:105,138:106,133:P,135:R,139:M,156:se}),t(Y,[2,8]),t(de,[2,14],{109:107,78:108,86:114,40:pe,41:pe,114:pe,82:ce,83:ue,84:fe,85:me,87:ge,90:_e,113:ye}),t(de,[2,15],{86:114,109:117,78:118,82:ce,83:ue,84:fe,85:me,87:ge,90:_e,113:ye,114:pe}),t(de,[2,16]),t(de,[2,17]),t(de,[2,18]),t(de,[2,19]),t(de,[2,20]),t(de,[2,21]),t(de,[2,22]),t(de,[2,23]),t(de,[2,24]),t(de,[2,25]),t(de,[2,26]),t(he,[2,9]),t(he,[2,10]),t(he,[2,11]),t(he,[2,12]),t(he,[2,13]),t([1,6,32,42,131,133,135,139,156,163,164,165,166,167,168,169,170,171,172,173,174],be,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,7:120,8:122,12:n,28:xe,29:ve,34:i,38:o,40:r,41:l,44:s,45:d,48:p,49:c,50:u,51:f,52:m,53:g,61:[1,119],63:y,64:h,68:b,69:x,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:w,125:C,129:O,130:D,137:I,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:q}),t(Se,Te,{55:[1,124]}),t(Se,[2,96]),t(Se,[2,97]),t(Se,[2,98]),t(Se,[2,99]),t(ke,[2,164]),t([6,31,66,71],Ee,{65:125,72:126,73:127,33:129,60:130,75:131,62:132,34:i,74:Ne,92:v,118:Le,119:Ae}),{30:135,31:we},{7:137,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:138,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:139,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:140,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{15:142,16:143,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:144,60:71,62:54,75:53,77:141,79:28,80:29,81:30,92:v,111:31,112:E,117:N,118:A,119:w,130:D},{15:142,16:143,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:144,60:71,62:54,75:53,77:145,79:28,80:29,81:30,92:v,111:31,112:E,117:N,118:A,119:w,130:D},t(Ce,Oe,{96:[1,149],161:[1,146],162:[1,147],175:[1,148]}),t(de,[2,246],{151:[1,150]}),{30:151,31:we},{30:152,31:we},t(de,[2,210]),{30:153,31:we},{7:154,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,155],33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(De,[2,116],{47:27,79:28,80:29,81:30,111:31,75:53,62:54,37:55,43:57,33:70,60:71,39:80,15:142,16:143,54:144,30:156,77:158,31:we,34:i,38:o,40:r,41:l,44:s,45:d,48:p,49:c,50:u,51:f,52:m,53:g,92:v,96:[1,157],112:E,117:N,118:A,119:w,130:D}),{7:159,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(he,Pe,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,7:160,12:n,28:xe,31:Re,34:i,38:o,40:r,41:l,44:s,45:d,48:p,49:c,50:u,51:f,52:m,53:g,61:_,63:y,64:h,68:b,69:x,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:w,125:C,129:O,130:D,137:I,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:q}),t([1,6,31,32,42,71,94,131,133,135,139,156],[2,67]),{33:166,34:i,39:162,40:r,41:l,92:[1,165],98:163,99:164,104:Ie},{25:169,33:170,34:i,92:[1,168],95:S,103:[1,171],107:[1,172]},t(Ce,[2,93]),t(Ce,[2,94]),t(Se,[2,40]),t(Se,[2,41]),t(Se,[2,42]),t(Se,[2,43]),t(Se,[2,44]),t(Se,[2,45]),t(Se,[2,46]),t(Se,[2,47]),{4:173,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:a,31:[1,174],33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:175,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,116:177,117:N,118:A,119:w,120:Be,123:178,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(Se,[2,171]),t(Se,[2,172],{35:182,36:ze}),t([1,6,31,32,42,46,66,71,74,82,83,84,85,87,89,90,94,113,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],[2,165],{110:184,114:je}),{31:[2,70]},{31:[2,71]},t(Ue,[2,88]),t(Ue,[2,91]),{7:186,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:187,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:188,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:190,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,30:189,31:we,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{33:195,34:i,60:196,62:198,75:197,80:191,92:v,118:Le,119:w,143:192,144:[1,193],145:194},{142:199,146:[1,200],147:[1,201],148:[1,202]},t([6,31,71,94],$e,{39:80,93:203,56:204,57:205,59:206,11:207,37:208,33:209,35:210,60:211,34:i,36:ze,38:o,40:r,41:l,63:y,118:Le}),t(We,[2,34]),t(We,[2,35]),t(Se,[2,38]),{15:142,16:212,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:144,60:71,62:54,75:53,77:213,79:28,80:29,81:30,92:v,111:31,112:E,117:N,118:A,119:w,130:D},t([1,6,29,31,32,40,41,42,55,58,66,71,74,82,83,84,85,87,89,90,94,96,102,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],[2,32]),t(qe,[2,36]),{4:214,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:a,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(Y,[2,5],{7:4,8:5,9:6,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,5:215,12:n,28:a,34:i,38:o,40:r,41:l,44:s,45:d,48:p,49:c,50:u,51:f,52:m,53:g,61:_,63:y,64:h,68:b,69:x,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:w,125:C,129:O,130:D,133:P,135:R,137:I,139:M,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:q}),t(de,[2,258]),{7:216,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:217,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:218,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:219,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:220,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:221,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:222,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:223,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:224,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:225,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:226,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:227,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:228,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:229,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(de,[2,209]),t(de,[2,214]),{7:230,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(de,[2,208]),t(de,[2,213]),{39:231,40:r,41:l,110:232,114:je},t(Ue,[2,89]),t(He,[2,168]),{35:233,36:ze},{35:234,36:ze},t(Ue,[2,104],{35:235,36:ze}),{35:236,36:ze},t(Ue,[2,105]),{7:238,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Ye,75:53,77:40,79:28,80:29,81:30,88:237,91:239,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,121:240,122:Ve,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{86:243,87:ge,90:_e},{110:244,114:je},t(Ue,[2,90]),t(Y,[2,66],{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,7:245,12:n,28:xe,31:Re,34:i,38:o,40:r,41:l,44:s,45:d,48:p,49:c,50:u,51:f,52:m,53:g,61:_,63:y,64:h,68:b,69:x,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:w,125:C,129:O,130:D,133:Pe,135:Pe,139:Pe,156:Pe,137:I,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:q}),t(Ge,[2,28],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{7:246,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{132:105,133:P,135:R,138:106,139:M,141:77,156:se},t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,163,164,165,166,167,168,169,170,171,172,173,174],be,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,7:120,8:122,12:n,28:xe,29:ve,34:i,38:o,40:r,41:l,44:s,45:d,48:p,49:c,50:u,51:f,52:m,53:g,61:_,63:y,64:h,68:b,69:x,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:w,125:C,129:O,130:D,137:I,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:q}),{6:[1,248],7:247,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,249],33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t([6,31],Ze,{70:252,66:[1,250],71:Xe}),t(Ke,[2,75]),t(Ke,[2,79],{55:[1,254],74:[1,253]}),t(Ke,[2,82]),t(Je,[2,83]),t(Je,[2,84]),t(Je,[2,85]),t(Je,[2,86]),{35:182,36:ze},{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,116:177,117:N,118:A,119:w,120:Be,123:178,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(de,[2,69]),{4:257,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:a,32:[1,256],33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,159,160,164,165,166,167,168,169,170,171,172,173,174],[2,250],{141:77,132:102,138:103,163:X}),t(Qe,[2,251],{141:77,132:102,138:103,163:X,165:J}),t(Qe,[2,252],{141:77,132:102,138:103,163:X,165:J}),t(Qe,[2,253],{141:77,132:102,138:103,163:X,165:J}),t(de,[2,254],{40:Oe,41:Oe,82:Oe,83:Oe,84:Oe,85:Oe,87:Oe,90:Oe,113:Oe,114:Oe}),t(He,pe,{109:107,78:108,86:114,82:ce,83:ue,84:fe,85:me,87:ge,90:_e,113:ye}),{78:118,82:ce,83:ue,84:fe,85:me,86:114,87:ge,90:_e,109:117,113:ye,114:pe},t(et,Te),t(de,[2,255],{40:Oe,41:Oe,82:Oe,83:Oe,84:Oe,85:Oe,87:Oe,90:Oe,113:Oe,114:Oe}),t(de,[2,256]),t(de,[2,257]),{6:[1,260],7:258,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,259],33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:261,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{30:262,31:we,155:[1,263]},t(de,[2,193],{126:264,127:[1,265],128:[1,266]}),t(de,[2,207]),t(de,[2,215]),{31:[1,267],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},{150:268,152:269,153:tt},t(de,[2,117]),{7:271,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(De,[2,120],{30:272,31:we,40:Oe,41:Oe,82:Oe,83:Oe,84:Oe,85:Oe,87:Oe,90:Oe,113:Oe,114:Oe,96:[1,273]}),t(Ge,[2,200],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(he,nt,{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{62:274,92:v},t(he,[2,124]),{29:[1,275],71:[1,276]},{29:[1,277]},{31:at,33:282,34:i,94:[1,278],100:279,101:280,103:it},t([29,71],[2,140]),{102:[1,284]},{31:ot,33:289,34:i,94:[1,285],103:rt,106:286,108:287},t(he,[2,144]),{55:[1,291]},{7:292,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{29:[1,293]},{6:H,131:[1,294]},{4:295,5:3,7:4,8:5,9:6,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:a,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t([6,31,71,120],lt,{141:77,132:102,138:103,121:296,74:[1,297],122:Ve,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(st,[2,174]),t([6,31,120],Ze,{70:298,71:dt}),t(pt,[2,183]),{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,116:300,117:N,118:A,119:w,123:178,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(pt,[2,189]),t(pt,[2,190]),t(ct,[2,173]),t(ct,[2,33]),t(ke,[2,166]),{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,115:[1,301],116:302,117:N,118:A,119:w,123:178,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{30:303,31:we,132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},t(ut,[2,203],{141:77,132:102,138:103,133:P,134:[1,304],135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(ut,[2,205],{141:77,132:102,138:103,133:P,134:[1,305],135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(de,[2,211]),t(ft,[2,212],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],[2,216],{140:[1,306]}),t(mt,[2,219]),{33:195,34:i,60:196,62:198,75:197,92:v,118:Le,119:Ae,143:307,145:194},t(mt,[2,225],{71:[1,308]}),t(gt,[2,221]),t(gt,[2,222]),t(gt,[2,223]),t(gt,[2,224]),t(de,[2,218]),{7:309,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:310,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:311,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(_t,Ze,{70:312,71:yt}),t(ht,[2,112]),t(ht,[2,51],{58:[1,314]}),t(bt,[2,60],{55:[1,315]}),t(ht,[2,56]),t(bt,[2,61]),t(xt,[2,57]),t(xt,[2,58]),t(xt,[2,59]),{46:[1,316],78:118,82:ce,83:ue,84:fe,85:me,86:114,87:ge,90:_e,109:117,113:ye,114:pe},t(et,Oe),{6:H,42:[1,317]},t(Y,[2,4]),t(vt,[2,259],{141:77,132:102,138:103,163:X,164:K,165:J}),t(vt,[2,260],{141:77,132:102,138:103,163:X,164:K,165:J}),t(Qe,[2,261],{141:77,132:102,138:103,163:X,165:J}),t(Qe,[2,262],{141:77,132:102,138:103,163:X,165:J}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,166,167,168,169,170,171,172,173,174],[2,263],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,167,168,169,170,171,172,173],[2,264],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,174:le}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,168,169,170,171,172,173],[2,265],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,174:le}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,169,170,171,172,173],[2,266],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,174:le}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,170,171,172,173],[2,267],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,174:le}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,171,172,173],[2,268],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,174:le}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,172,173],[2,269],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,174:le}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,173],[2,270],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,174:le}),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,140,156,167,168,169,170,171,172,173,174],[2,271],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q}),t(ft,[2,249],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(ft,[2,248],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(ke,[2,161]),t(ke,[2,162]),t(Ue,[2,100]),t(Ue,[2,101]),t(Ue,[2,102]),t(Ue,[2,103]),{89:[1,318]},{74:Ye,89:[2,108],121:319,122:Ve,132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},{89:[2,109]},{7:320,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,89:[2,182],92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(St,[2,176]),t(St,Tt),t(Ue,[2,107]),t(ke,[2,163]),t(Y,[2,65],{141:77,132:102,138:103,133:nt,135:nt,139:nt,156:nt,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(Ge,[2,29],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(Ge,[2,48],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{7:321,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:322,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{67:323,68:b,69:x},t(kt,Et,{73:127,33:129,60:130,75:131,62:132,72:324,34:i,74:Ne,92:v,118:Le,119:Ae}),{6:Nt,31:Lt},t(Ke,[2,80]),{7:327,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(pt,lt,{141:77,132:102,138:103,74:[1,328],133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(At,[2,30]),{6:H,32:[1,329]},t(Ge,[2,272],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{7:330,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:331,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(Ge,[2,275],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(de,[2,247]),{7:332,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(de,[2,194],{127:[1,333]}),{30:334,31:we},{30:337,31:we,33:335,34:i,62:336,92:v},{150:338,152:269,153:tt},{32:[1,339],151:[1,340],152:341,153:tt},t(wt,[2,240]),{7:343,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,124:342,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(Ct,[2,118],{141:77,132:102,138:103,30:344,31:we,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(de,[2,121]),{7:345,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{32:[1,346]},{39:347,40:r,41:l},{92:[1,349],99:348,104:Ie},{39:350,40:r,41:l},{29:[1,351]},t(_t,Ze,{70:352,71:Ot}),t(ht,[2,131]),{31:at,33:282,34:i,100:354,101:280,103:it},t(ht,[2,136],{102:[1,355]}),t(ht,[2,138],{102:[1,356]}),{33:357,34:i},t(he,[2,142]),t(_t,Ze,{70:358,71:Dt}),t(ht,[2,151]),{31:ot,33:289,34:i,103:rt,106:360,108:287},t(ht,[2,156],{102:[1,361]}),t(ht,[2,159],{102:[1,362]}),{6:[1,364],7:363,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,365],33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(Pt,[2,148],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{39:366,40:r,41:l},t(Se,[2,201]),{6:H,32:[1,367]},{7:368,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t([12,28,34,38,40,41,44,45,48,49,50,51,52,53,61,63,64,68,69,92,95,97,105,112,117,118,119,125,129,130,133,135,137,139,149,155,157,158,159,160,161,162],Tt,{6:Rt,31:Rt,71:Rt,120:Rt}),{6:It,31:Mt,120:[1,369]},t([6,31,32,115,120],Et,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,67:33,77:40,154:41,132:43,136:44,138:45,75:53,62:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,76:180,7:255,123:372,12:n,28:xe,34:i,38:o,40:r,41:l,44:s,45:d,48:p,49:c,50:u,51:f,52:m,53:g,61:_,63:y,64:h,68:b,69:x,74:Fe,92:v,95:S,97:T,105:k,112:E,117:N,118:A,119:w,125:C,129:O,130:D,133:P,135:R,137:I,139:M,149:F,155:B,157:z,158:j,159:U,160:$,161:W,162:q}),t(kt,Ze,{70:373,71:dt}),t(ke,[2,169]),t([6,31,115],Ze,{70:374,71:dt}),t(Ft,[2,244]),{7:375,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:376,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:377,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(mt,[2,220]),{33:195,34:i,60:196,62:198,75:197,92:v,118:Le,119:Ae,145:378},t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,135,139,156],[2,227],{141:77,132:102,138:103,134:[1,379],140:[1,380],159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(Bt,[2,228],{141:77,132:102,138:103,134:[1,381],159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(Bt,[2,234],{141:77,132:102,138:103,134:[1,382],159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{6:zt,31:jt,94:[1,383]},t(Ut,Et,{39:80,57:205,59:206,11:207,37:208,33:209,35:210,60:211,56:386,34:i,36:ze,38:o,40:r,41:l,63:y,118:Le}),{7:387,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,388],33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:389,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:[1,390],33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(Se,[2,39]),t(qe,[2,37]),t(Ue,[2,106]),{7:391,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,89:[2,180],92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{89:[2,181],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},t(Ge,[2,49],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{32:[1,392],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},{30:393,31:we},t(Ke,[2,76]),{33:129,34:i,60:130,62:132,72:394,73:127,74:Ne,75:131,92:v,118:Le,119:Ae},t($t,Ee,{72:126,73:127,33:129,60:130,75:131,62:132,65:395,34:i,74:Ne,92:v,118:Le,119:Ae}),t(Ke,[2,81],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(pt,Rt),t(At,[2,31]),{32:[1,396],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},t(Ge,[2,274],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{30:397,31:we,132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},{30:398,31:we},t(de,[2,195]),{30:399,31:we},{30:400,31:we},t(Wt,[2,199]),{32:[1,401],151:[1,402],152:341,153:tt},t(de,[2,238]),{30:403,31:we},t(wt,[2,241]),{30:404,31:we,71:[1,405]},t(qt,[2,191],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(de,[2,119]),t(Ct,[2,122],{141:77,132:102,138:103,30:406,31:we,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(he,[2,63]),t(he,[2,125]),{29:[1,407]},{31:at,33:282,34:i,100:408,101:280,103:it},t(he,[2,126]),{39:409,40:r,41:l},{6:Ht,31:Yt,94:[1,410]},t(Ut,Et,{33:282,101:413,34:i,103:it}),t(kt,Ze,{70:414,71:Ot}),{33:415,34:i},{33:416,34:i},{29:[2,141]},{6:Vt,31:Gt,94:[1,417]},t(Ut,Et,{33:289,108:420,34:i,103:rt}),t(kt,Ze,{70:421,71:Dt}),{33:422,34:i,103:[1,423]},{33:424,34:i},t(Pt,[2,145],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{7:425,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:426,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(he,[2,149]),{131:[1,427]},{120:[1,428],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},t(st,[2,175]),{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,123:429,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:255,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,31:Me,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,74:Fe,75:53,76:180,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,116:430,117:N,118:A,119:w,123:178,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(pt,[2,184]),{6:It,31:Mt,32:[1,431]},{6:It,31:Mt,115:[1,432]},t(ft,[2,204],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(ft,[2,206],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(ft,[2,217],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(mt,[2,226]),{7:433,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:434,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:435,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:436,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(st,[2,110]),{11:207,33:209,34:i,35:210,36:ze,37:208,38:o,39:80,40:r,41:l,56:437,57:205,59:206,60:211,63:y,118:Le},t($t,$e,{39:80,56:204,57:205,59:206,11:207,37:208,33:209,35:210,60:211,93:438,34:i,36:ze,38:o,40:r,41:l,63:y,118:Le}),t(ht,[2,113]),t(ht,[2,52],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{7:439,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(ht,[2,54],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{7:440,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{89:[2,179],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},t(de,[2,50]),t(de,[2,68]),t(Ke,[2,77]),t(kt,Ze,{70:441,71:Xe}),t(de,[2,273]),t(Ft,[2,245]),t(de,[2,196]),t(Wt,[2,197]),t(Wt,[2,198]),t(de,[2,236]),{30:442,31:we},{32:[1,443]},t(wt,[2,242],{6:[1,444]}),{7:445,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},t(de,[2,123]),{39:446,40:r,41:l},t(_t,Ze,{70:447,71:Ot}),t(he,[2,127]),{29:[1,448]},{33:282,34:i,101:449,103:it},{31:at,33:282,34:i,100:450,101:280,103:it},t(ht,[2,132]),{6:Ht,31:Yt,32:[1,451]},t(ht,[2,137]),t(ht,[2,139]),t(he,[2,143],{29:[1,452]}),{33:289,34:i,103:rt,108:453},{31:ot,33:289,34:i,103:rt,106:454,108:287},t(ht,[2,152]),{6:Vt,31:Gt,32:[1,455]},t(ht,[2,157]),t(ht,[2,158]),t(ht,[2,160]),t(Pt,[2,146],{141:77,132:102,138:103,133:P,135:R,139:M,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),{32:[1,456],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},t(Se,[2,202]),t(Se,[2,178]),t(pt,[2,185]),t(kt,Ze,{70:457,71:dt}),t(pt,[2,186]),t(ke,[2,170]),t([1,6,31,32,42,66,71,74,89,94,115,120,122,131,133,134,135,139,156],[2,229],{141:77,132:102,138:103,140:[1,458],159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(Bt,[2,231],{141:77,132:102,138:103,134:[1,459],159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(Ge,[2,230],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(Ge,[2,235],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(ht,[2,114]),t(kt,Ze,{70:460,71:yt}),{32:[1,461],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},{32:[1,462],132:102,133:P,135:R,138:103,139:M,141:77,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le},{6:Nt,31:Lt,32:[1,463]},{32:[1,464]},t(de,[2,239]),t(wt,[2,243]),t(qt,[2,192],{141:77,132:102,138:103,133:P,135:R,139:M,156:V,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(he,[2,129]),{6:Ht,31:Yt,94:[1,465]},{39:466,40:r,41:l},t(ht,[2,133]),t(kt,Ze,{70:467,71:Ot}),t(ht,[2,134]),{39:468,40:r,41:l},t(ht,[2,153]),t(kt,Ze,{70:469,71:Dt}),t(ht,[2,154]),t(he,[2,147]),{6:It,31:Mt,32:[1,470]},{7:471,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{7:472,8:122,10:20,11:21,12:n,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:xe,33:70,34:i,37:55,38:o,39:80,40:r,41:l,43:57,44:s,45:d,47:27,48:p,49:c,50:u,51:f,52:m,53:g,54:26,60:71,61:_,62:54,63:y,64:h,67:33,68:b,69:x,75:53,77:40,79:28,80:29,81:30,92:v,95:S,97:T,105:k,111:31,112:E,117:N,118:A,119:w,125:C,129:O,130:D,132:43,133:P,135:R,136:44,137:I,138:45,139:M,141:77,149:F,154:41,155:B,157:z,158:j,159:U,160:$,161:W,162:q},{6:zt,31:jt,32:[1,473]},t(ht,[2,53]),t(ht,[2,55]),t(Ke,[2,78]),t(de,[2,237]),{29:[1,474]},t(he,[2,128]),{6:Ht,31:Yt,32:[1,475]},t(he,[2,150]),{6:Vt,31:Gt,32:[1,476]},t(pt,[2,187]),t(Ge,[2,232],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(Ge,[2,233],{141:77,132:102,138:103,159:G,160:Z,163:X,164:K,165:J,166:Q,167:ee,168:te,169:ne,170:ae,171:ie,172:oe,173:re,174:le}),t(ht,[2,115]),{39:477,40:r,41:l},t(ht,[2,135]),t(ht,[2,155]),t(he,[2,130])],defaultActions:{68:[2,70],69:[2,71],239:[2,109],357:[2,141]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{function n(e,t){this.message=e,this.hash=t}throw n.prototype=Error,new n(e,t)}},parse:function(e){var t=this,n=[0],a=[null],i=[],o=this.table,l="",s=0,d=0,c=0,u=1,f=i.slice.call(arguments,1),m=Object.create(this.lexer),g={yy:{}};for(var _ in this.yy)Object.prototype.hasOwnProperty.call(this.yy,_)&&(g.yy[_]=this.yy[_]);m.setInput(e,g.yy),g.yy.lexer=m,g.yy.parser=this,"undefined"==typeof m.yylloc&&(m.yylloc={});var y=m.yylloc;i.push(y);var h=m.options&&m.options.ranges;this.parseError="function"==typeof g.yy.parseError?g.yy.parseError:Object.getPrototypeOf(this).parseError;_token_stack:var b=function(){var e;return e=m.lex()||u,"number"!=typeof e&&(e=t.symbols_[e]||e),e};for(var x={},v,S,T,k,E,N,p,A,w;;){if(T=n[n.length-1],this.defaultActions[T]?k=this.defaultActions[T]:((null===v||"undefined"==typeof v)&&(v=b()),k=o[T]&&o[T][v]),"undefined"==typeof k||!k.length||!k[0]){var C="";for(N in w=[],o[T])this.terminals_[N]&&N>2&&w.push("'"+this.terminals_[N]+"'");C=m.showPosition?"Parse error on line "+(s+1)+":\n"+m.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(s+1)+": Unexpected "+(v==u?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(C,{text:m.match,token:this.terminals_[v]||v,line:m.yylineno,loc:y,expected:w})}if(k[0]instanceof Array&&1<k.length)throw new Error("Parse Error: multiple actions possible at state: "+T+", token: "+v);switch(k[0]){case 1:n.push(v),a.push(m.yytext),i.push(m.yylloc),n.push(k[1]),v=null,S?(v=S,S=null):(d=m.yyleng,l=m.yytext,s=m.yylineno,y=m.yylloc,0<c&&c--);break;case 2:if(p=this.productions_[k[1]][1],x.$=a[a.length-p],x._$={first_line:i[i.length-(p||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(p||1)].first_column,last_column:i[i.length-1].last_column},h&&(x._$.range=[i[i.length-(p||1)].range[0],i[i.length-1].range[1]]),E=this.performAction.apply(x,[l,d,s,g.yy,k[1],a,i].concat(f)),"undefined"!=typeof E)return E;p&&(n=n.slice(0,2*(-1*p)),a=a.slice(0,-1*p),i=i.slice(0,-1*p)),n.push(this.productions_[k[1]][0]),a.push(x.$),i.push(x._$),A=o[n[n.length-2]][n[n.length-1]],n.push(A);break;case 3:return!0;}}return!0}};return e.prototype=Zt,Zt.Parser=e,new e}();"undefined"!=typeof e&&"undefined"!=typeof n&&(n.parser=i,n.Parser=i.Parser,n.parse=function(){return i.parse.apply(i,arguments)},n.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),a.exit(1));var i="",o=e("fs");return"undefined"!=typeof o&&null!==o&&(i=o.readFileSync(e("path").normalize(t[1]),"utf8")),n.parser.parse(i)},"undefined"!=typeof t&&e.main===t&&n.main(a.argv.slice(1)))}).call(this,e("_process"))},{_process:153,fs:19,path:152}],45:[function(e){(function(){var t,n,a,o,r,l,s,d,p,i,c,u,f;if(t=e("./coffee-script"),o=e("child_process"),d=e("./helpers"),u=e("path"),c=function(e,n){var a;return a=t._compileFile(n,!1,!0),e._compile(a,n)},e.extensions){for(f=t.FILE_EXTENSIONS,p=0,i=f.length;p<i;p++)r=f[p],e.extensions[r]=c;n=e("module"),l=function(e){var t,a;for(a=u.basename(e).split("."),""===a[0]&&a.shift();a.shift();)if(t="."+a.join("."),n._extensions[t])return t;return".js"},n.prototype.load=function(e){var t;return this.filename=e,this.paths=n._nodeModulePaths(u.dirname(e)),t=l(e),n._extensions[t](this,e),this.loaded=!0}}o&&(s=o.fork,a=e.resolve("../../bin/coffee"),o.fork=function(e,t,n){return d.isCoffee(e)&&(!Array.isArray(t)&&(n=t||{},t=[]),t=[e].concat(t),e=a),s(e,t,n)})}).call(this)},{"./coffee-script":40,"./helpers":41,child_process:19,module:19,path:152}],46:[function(e,t,n){(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice,a,o,r,l,d,p,c,u,f,i,m,s,g,_,y,h,b,x,v,S;for(y=function(e,t,n){var a;return a=[e,t],a.generated=!0,n&&(a.origin=n),a},n.Rewriter=s=function(){function n(){}return n.prototype.rewrite=function(e){return this.tokens=e,this.removeLeadingNewlines(),this.closeOpenCalls(),this.closeOpenIndexes(),this.normalizeLines(),this.tagPostfixConditionals(),this.addImplicitBracesAndParens(),this.addLocationDataToGeneratedTokens(),this.fixOutdentLocationData(),this.tokens},n.prototype.scanTokens=function(e){var t,n,a;for(a=this.tokens,t=0;n=a[t];)t+=e.call(this,n,t,a);return!0},n.prototype.detectEnd=function(t,n,a){var i,o,r,s,p;for(p=this.tokens,i=0;s=p[t];){if(0===i&&n.call(this,s,t))return a.call(this,s,t);if(!s||0>i)return a.call(this,s,t-1);(o=s[0],0<=e.call(d,o))?i+=1:(r=s[0],0<=e.call(l,r))&&(i-=1),t+=1}return t-1},n.prototype.removeLeadingNewlines=function(){var e,t,n,a,i;for(a=this.tokens,e=t=0,n=a.length;t<n&&(i=a[e][0],"TERMINATOR"===i);e=++t);if(e)return this.tokens.splice(0,e)},n.prototype.closeOpenCalls=function(){var e,t;return t=function(e,t){var n;return")"===(n=e[0])||"CALL_END"===n||"OUTDENT"===e[0]&&")"===this.tag(t-1)},e=function(e,t){return this.tokens["OUTDENT"===e[0]?t-1:t][0]="CALL_END"},this.scanTokens(function(n,a){return"CALL_START"===n[0]&&this.detectEnd(a+1,t,e),1})},n.prototype.closeOpenIndexes=function(){var e,t;return t=function(e){var t;return"]"===(t=e[0])||"INDEX_END"===t},e=function(e){return e[0]="INDEX_END"},this.scanTokens(function(n,a){return"INDEX_START"===n[0]&&this.detectEnd(a+1,t,e),1})},n.prototype.indexOfTag=function(){var n,a,i,o,r,l,s;for(a=arguments[0],r=2<=arguments.length?t.call(arguments,1):[],n=0,(i=o=0,l=r.length);0<=l?o<l:o>l;i=0<=l?++o:--o){for(;"HERECOMMENT"===this.tag(a+i+n);)n+=2;if(null!=r[i]&&("string"==typeof r[i]&&(r[i]=[r[i]]),s=this.tag(a+i+n),0>e.call(r[i],s)))return-1}return a+i+n-1},n.prototype.looksObjectish=function(t){var n,a;return-1<this.indexOfTag(t,"@",null,":")||-1<this.indexOfTag(t,null,":")||(a=this.indexOfTag(t,d),-1<a&&(n=null,this.detectEnd(a+1,function(t){var n;return n=t[0],0<=e.call(l,n)},function(e,t){return n=t}),":"===this.tag(n+1)))},n.prototype.findTagsBackwards=function(t,n){var a,i,o,r,s,p,c;for(a=[];0<=t&&(a.length||(r=this.tag(t),0>e.call(n,r))&&((s=this.tag(t),0>e.call(d,s))||this.tokens[t].generated)&&(p=this.tag(t),0>e.call(m,p)));)(i=this.tag(t),0<=e.call(l,i))&&a.push(this.tag(t)),(o=this.tag(t),0<=e.call(d,o))&&a.length&&a.pop(),t-=1;return c=this.tag(t),0<=e.call(n,c)},n.prototype.addImplicitBracesAndParens=function(){var t,n;return t=[],n=null,this.scanTokens(function(a,r,i){var g,_,h,b,x,v,S,T,E,N,A,k,w,C,O,D,P,R,I,M,F,B,z,s,j,U,$,W,q,H,Y,V,G;if(G=a[0],O=(D=0<r?i[r-1]:[])[0],w=(r<i.length-1?i[r+1]:[])[0],W=function(){return t[t.length-1]},q=r,h=function(e){return r-q+e},T=function(e){var t;return null==e||null==(t=e[2])?void 0:t.ours},N=function(e){return T(e)&&"{"===(null==e?void 0:e[0])},E=function(e){return T(e)&&"("===(null==e?void 0:e[0])},b=function(){return T(W())},x=function(){return E(W())},S=function(){return N(W())},v=function(){var e;return b&&"CONTROL"===(null==(e=W())?void 0:e[0])},H=function(e){var n;if(n=null==e?r:e,t.push(["(",n,{ours:!0}]),i.splice(n,0,y("CALL_START","(",["","implicit function call",a[2]])),null==e)return r+=1},g=function(){return t.pop(),i.splice(r,0,y("CALL_END",")",["","end of input",a[2]])),r+=1},Y=function(e,n){var o,l;if(null==n&&(n=!0),o=null==e?r:e,t.push(["{",o,{sameLine:!0,startsLine:n,ours:!0}]),l=new String("{"),l.generated=!0,i.splice(o,0,y("{",l,a)),null==e)return r+=1},_=function(e){return e=null==e?r:e,t.pop(),i.splice(e,0,y("}","}",a)),r+=1},x()&&("IF"===G||"TRY"===G||"FINALLY"===G||"CATCH"===G||"CLASS"===G||"SWITCH"===G))return t.push(["CONTROL",r,{ours:!0}]),h(1);if("INDENT"===G&&b()){if("=>"!==O&&"->"!==O&&"["!==O&&"("!==O&&","!==O&&"{"!==O&&"TRY"!==O&&"ELSE"!==O&&"="!==O)for(;x();)g();return v()&&t.pop(),t.push([G,r]),h(1)}if(0<=e.call(d,G))return t.push([G,r]),h(1);if(0<=e.call(l,G)){for(;b();)x()?g():S()?_():t.pop();n=t.pop()}if((0<=e.call(u,G)&&a.spaced||"?"===G&&0<r&&!i[r-1].spaced)&&(0<=e.call(p,w)||0<=e.call(f,w)&&(null==(P=i[r+1])||!P.spaced)&&(null==(R=i[r+1])||!R.newLine)))return"?"===G&&(G=a[0]="FUNC_EXIST"),H(r+1),h(2);if(0<=e.call(u,G)&&-1<this.indexOfTag(r+1,"INDENT")&&this.looksObjectish(r+2)&&!this.findTagsBackwards(r,["CLASS","EXTENDS","IF","CATCH","SWITCH","LEADING_WHEN","FOR","WHILE","UNTIL"]))return H(r+1),t.push(["INDENT",r+2]),h(3);if(":"===G){for(z=function(){var t;switch(!1){case(t=this.tag(r-1),0>e.call(l,t)):return n[1];case"@"!==this.tag(r-2):return r-2;default:return r-1;}}.call(this);"HERECOMMENT"===this.tag(z-2);)z-=2;return(this.insideForDeclaration="FOR"===w,V=0===z||(I=this.tag(z-1),0<=e.call(m,I))||i[z-1].newLine,W()&&(M=W(),$=M[0],j=M[1],("{"===$||"INDENT"===$&&"{"===this.tag(j-1))&&(V||","===this.tag(z-1)||"{"===this.tag(z-1))))?h(1):(Y(z,!!V),h(2))}if(0<=e.call(m,G))for(A=t.length-1;0<=A&&(U=t[A],!!T(U));A+=-1)N(U)&&(U[2].sameLine=!1);if(k="OUTDENT"===O||D.newLine,0<=e.call(c,G)||0<=e.call(o,G)&&k)for(;b();)if(F=W(),$=F[0],j=F[1],B=F[2],s=B.sameLine,V=B.startsLine,x()&&","!==O)g();else if(S()&&!this.insideForDeclaration&&s&&"TERMINATOR"!==G&&":"!==O)_();else if(S()&&"TERMINATOR"===G&&","!==O&&!(V&&this.looksObjectish(r+1))){if("HERECOMMENT"===w)return h(1);_()}else break;if(","===G&&!this.looksObjectish(r+1)&&S()&&!this.insideForDeclaration&&("TERMINATOR"!==w||!this.looksObjectish(r+2)))for(C="OUTDENT"===w?1:0;S();)_(r+C);return h(1)})},n.prototype.addLocationDataToGeneratedTokens=function(){return this.scanTokens(function(e,t,n){var a,i,o,r,l,s;return e[2]?1:e.generated||e.explicit?("{"===e[0]&&(o=null==(l=n[t+1])?void 0:l[2])?(i=o.first_line,a=o.first_column):(r=null==(s=n[t-1])?void 0:s[2])?(i=r.last_line,a=r.last_column):i=a=0,e[2]={first_line:i,first_column:a,last_line:i,last_column:a},1):1})},n.prototype.fixOutdentLocationData=function(){return this.scanTokens(function(e,t,n){var a;return"OUTDENT"===e[0]||e.generated&&"CALL_END"===e[0]||e.generated&&"}"===e[0]?(a=n[t-1][2],e[2]={first_line:a.last_line,first_column:a.last_column,last_line:a.last_line,last_column:a.last_column},1):1})},n.prototype.normalizeLines=function(){var n,a,l,s,d;return d=l=s=null,a=function(t,n){var a,i,l,s;return";"!==t[1]&&(a=t[0],0<=e.call(g,a))&&!("TERMINATOR"===t[0]&&(i=this.tag(n+1),0<=e.call(r,i)))&&("ELSE"!==t[0]||"THEN"===d)&&("CATCH"!==(l=t[0])&&"FINALLY"!==l||"->"!==d&&"=>"!==d)||(s=t[0],0<=e.call(o,s))&&(this.tokens[n-1].newLine||"OUTDENT"===this.tokens[n-1][0])},n=function(e,t){return this.tokens.splice(","===this.tag(t-1)?t-1:t,0,s)},this.scanTokens(function(o,p,i){var c,u,f,m,g,y;if(y=o[0],"TERMINATOR"===y){if("ELSE"===this.tag(p+1)&&"OUTDENT"!==this.tag(p-1))return i.splice.apply(i,[p,1].concat(t.call(this.indentation()))),1;if(f=this.tag(p+1),0<=e.call(r,f))return i.splice(p,1),0}if("CATCH"===y)for(c=u=1;2>=u;c=++u)if("OUTDENT"===(m=this.tag(p+c))||"TERMINATOR"===m||"FINALLY"===m)return i.splice.apply(i,[p+c,0].concat(t.call(this.indentation()))),2+c;return 0<=e.call(_,y)&&"INDENT"!==this.tag(p+1)&&("ELSE"!==y||"IF"!==this.tag(p+1))?(d=y,g=this.indentation(i[p]),l=g[0],s=g[1],"THEN"===d&&(l.fromThen=!0),i.splice(p+1,0,l),this.detectEnd(p+2,a,n),"THEN"===y&&i.splice(p,1),1):1})},n.prototype.tagPostfixConditionals=function(){var t,n,a;return a=null,n=function(t,n){var a,i;return i=t[0],a=this.tokens[n-1][0],"TERMINATOR"===i||"INDENT"===i&&0>e.call(_,a)},t=function(e){if("INDENT"!==e[0]||e.generated&&!e.fromThen)return a[0]="POST_"+a[0]},this.scanTokens(function(e,o){return"IF"===e[0]?(a=e,this.detectEnd(o+1,n,t),1):1})},n.prototype.indentation=function(e){var t,n;return t=["INDENT",2],n=["OUTDENT",2],e?(t.generated=n.generated=!0,t.origin=n.origin=e):t.explicit=n.explicit=!0,[t,n]},n.prototype.generate=y,n.prototype.tag=function(e){var t;return null==(t=this.tokens[e])?void 0:t[0]},n}(),a=[["(",")"],["[","]"],["{","}"],["INDENT","OUTDENT"],["CALL_START","CALL_END"],["PARAM_START","PARAM_END"],["INDEX_START","INDEX_END"],["STRING_START","STRING_END"],["REGEX_START","REGEX_END"]],n.INVERSES=i={},d=[],l=[],(h=0,x=a.length);h<x;h++)v=a[h],b=v[0],S=v[1],d.push(i[S]=b),l.push(i[b]=S);r=["CATCH","THEN","ELSE","FINALLY"].concat(l),u=["IDENTIFIER","PROPERTY","SUPER",")","CALL_END","]","INDEX_END","@","THIS"],p=["IDENTIFIER","PROPERTY","NUMBER","INFINITY","NAN","STRING","STRING_START","REGEX","REGEX_START","JS","NEW","PARAM_START","CLASS","IF","TRY","SWITCH","THIS","UNDEFINED","NULL","BOOL","UNARY","YIELD","UNARY_MATH","SUPER","THROW","@","->","=>","[","(","{","--","++"],f=["+","-"],c=["POST_IF","FOR","WHILE","UNTIL","WHEN","BY","LOOP","TERMINATOR"],_=["ELSE","->","=>","TRY","FINALLY","THEN"],g=["TERMINATOR","CATCH","FINALLY","ELSE","OUTDENT","LEADING_WHEN"],m=["TERMINATOR","INDENT","OUTDENT"],o=[".","?.","::","?::"]}).call(this)},{}],47:[function(e,t,n){(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},t;n.Scope=t=function(){function t(e,t,n,a){var i,o;this.parent=e,this.expressions=t,this.method=n,this.referencedVars=a,this.variables=[{name:"arguments",type:"arguments"}],this.positions={},this.parent||(this.utilities={}),this.root=null==(i=null==(o=this.parent)?void 0:o.root)?this:i}return t.prototype.add=function(e,t,n){return this.shared&&!n?this.parent.add(e,t,n):Object.prototype.hasOwnProperty.call(this.positions,e)?this.variables[this.positions[e]].type=t:this.positions[e]=this.variables.push({name:e,type:t})-1},t.prototype.namedMethod=function(){var e;return(null==(e=this.method)?void 0:e.name)||!this.parent?this.method:this.parent.namedMethod()},t.prototype.find=function(e,t){return(null==t&&(t="var"),!!this.check(e))||(this.add(e,t),!1)},t.prototype.parameter=function(e){return this.shared&&this.parent.check(e,!0)?void 0:this.add(e,"param")},t.prototype.check=function(e){var t;return!!(this.type(e)||(null==(t=this.parent)?void 0:t.check(e)))},t.prototype.temporary=function(e,t,n){var a,i,o,r,l,s;return null==n&&(n=!1),n?(s=e.charCodeAt(0),i=122,a=i-s,r=s+t%(a+1),o=d(r),l=E(t/(a+1)),""+o+(l||"")):""+e+(t||"")},t.prototype.type=function(e){var t,n,a,i;for(a=this.variables,t=0,n=a.length;t<n;t++)if(i=a[t],i.name===e)return i.type;return null},t.prototype.freeVariable=function(t,n){var a,i,o;for(null==n&&(n={}),a=0;o=this.temporary(t,a,n.single),!!(this.check(o)||0<=e.call(this.root.referencedVars,o));)a++;return(null==(i=n.reserve)||i)&&this.add(o,"var",!0),o},t.prototype.assign=function(e,t){return this.add(e,{value:t,assigned:!0},!0),this.hasAssignments=!0},t.prototype.hasDeclarations=function(){return!!this.declaredVariables().length},t.prototype.declaredVariables=function(){var e;return function(){var t,n,a,i;for(a=this.variables,i=[],(t=0,n=a.length);t<n;t++)e=a[t],"var"===e.type&&i.push(e.name);return i}.call(this).sort()},t.prototype.assignedVariables=function(){var e,t,n,a,i;for(n=this.variables,a=[],(e=0,t=n.length);e<t;e++)i=n[e],i.type.assigned&&a.push(i.name+" = "+i.type.value);return a},t}()}).call(this)},{}],48:[function(e,t){(function(){var e,n;e=function(){function e(e){this.line=e,this.columns=[]}return e.prototype.add=function(e,t,n){var a,i;return i=t[0],a=t[1],null==n&&(n={}),this.columns[e]&&n.noReplace?void 0:this.columns[e]={line:this.line,column:e,sourceLine:i,sourceColumn:a}},e.prototype.sourceLocation=function(e){for(var t;!((t=this.columns[e])||0>=e);)e--;return t&&[t.sourceLine,t.sourceColumn]},e}(),n=function(){function t(){this.lines=[]}var n,a,i,o;return t.prototype.add=function(t,n,a){var i,o,r,l;return null==a&&(a={}),r=n[0],o=n[1],l=(i=this.lines)[r]||(i[r]=new e(r)),l.add(o,t,a)},t.prototype.sourceLocation=function(e){var t,n,a;for(n=e[0],t=e[1];!((a=this.lines[n])||0>=n);)n--;return a&&a.sourceLocation(t)},t.prototype.generate=function(e,t){var n,a,i,o,r,l,s,d,p,c,u,f,m,g,_,y;for(null==e&&(e={}),null==t&&(t=null),y=0,o=0,l=0,r=0,f=!1,n="",m=this.lines,(c=a=0,s=m.length);a<s;c=++a)if(p=m[c],p)for(g=p.columns,i=0,d=g.length;i<d;i++)if(u=g[i],!!u){for(;y<u.line;)o=0,f=!1,n+=";",y++;f&&(n+=",",f=!1),n+=this.encodeVlq(u.column-o),o=u.column,n+=this.encodeVlq(0),n+=this.encodeVlq(u.sourceLine-l),l=u.sourceLine,n+=this.encodeVlq(u.sourceColumn-r),r=u.sourceColumn,f=!0}return _={version:3,file:e.generatedFile||"",sourceRoot:e.sourceRoot||"",sources:e.sourceFiles||[""],names:[],mappings:n},e.inlineMap&&(_.sourcesContent=[t]),_},i=5,a=1<<i,o=a-1,t.prototype.encodeVlq=function(e){var t,n,r,l;for(t="",r=0>e?1:0,l=(T(e)<<1)+r;l||!t;)n=l&o,l>>=i,l&&(n|=a),t+=this.encodeBase64(n);return t},n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.prototype.encodeBase64=function(e){return n[e]||function(){throw new Error("Cannot Base64 encode value: "+e)}()},t}(),t.exports=n}).call(this)},{}],49:[function(e,t){t.exports={name:"coffee-script",description:"Unfancy JavaScript",keywords:["javascript","language","coffeescript","compiler"],author:"Jeremy Ashkenas",version:"1.12.7",license:"MIT",engines:{node:">=0.8.0"},directories:{lib:"./lib/coffee-script"},main:"./lib/coffee-script/coffee-script",bin:{coffee:"./bin/coffee",cake:"./bin/cake"},files:["bin","lib","register.js","repl.js"],scripts:{test:"node ./bin/cake test","test-harmony":"node --harmony ./bin/cake test"},homepage:"http://coffeescript.org",bugs:"https://github.com/jashkenas/coffeescript/issues",repository:{type:"git",url:"git://github.com/jashkenas/coffeescript.git"},devDependencies:{docco:"~0.7.0","google-closure-compiler-js":"^20170626.0.0","highlight.js":"~9.12.0",jison:">=0.4.17","markdown-it":"^8.3.1",underscore:"~1.8.3"}}},{}],50:[function(e,t){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":65,"../../modules/es6.array.from":126,"../../modules/es6.string.iterator":132}],51:[function(e,t){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":124,"../modules/es6.string.iterator":132,"../modules/web.dom.iterable":136}],52:[function(e,t){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":125,"../modules/es6.string.iterator":132,"../modules/web.dom.iterable":136}],53:[function(e,t){var n=e("../../modules/_core"),a=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(){return a.stringify.apply(a,arguments)}},{"../../modules/_core":65}],54:[function(e,t){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":65,"../../modules/es6.object.assign":128}],55:[function(e,t){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,a){return n.defineProperty(e,t,a)}},{"../../modules/_core":65,"../../modules/es6.object.define-property":129}],56:[function(e,t){e("../../modules/es7.object.entries"),t.exports=e("../../modules/_core").Object.entries},{"../../modules/_core":65,"../../modules/es7.object.entries":133}],57:[function(e,t){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),t.exports=e("../modules/_core").Promise},{"../modules/_core":65,"../modules/es6.object.to-string":130,"../modules/es6.promise":131,"../modules/es6.string.iterator":132,"../modules/es7.promise.finally":134,"../modules/es7.promise.try":135,"../modules/web.dom.iterable":136}],58:[function(e,t){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],59:[function(e,t){t.exports=function(){}},{}],60:[function(e,t){t.exports=function(e,t,n,a){if(!(e instanceof t)||a!==void 0&&a in e)throw TypeError(n+": incorrect invocation!");return e}},{}],61:[function(e,t){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":83}],62:[function(e,t){var n=e("./_to-iobject"),a=e("./_to-length"),i=e("./_to-absolute-index");t.exports=function(e){return function(t,o,r){var l=n(t),s=a(l.length),d=i(r,s),p;if(e&&o!=o){for(;s>d;)if(p=l[d++],p!=p)return!0;}else for(;s>d;d++)if((e||d in l)&&l[d]===o)return e||d||0;return!e&&-1}}},{"./_to-absolute-index":115,"./_to-iobject":117,"./_to-length":118}],63:[function(e,t){var n=e("./_cof"),a=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(t){}};t.exports=function(e){var t,r,l;return e===void 0?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),a))?r:i?n(t):"Object"==(l=n(t))&&"function"==typeof t.callee?"Arguments":l}},{"./_cof":64,"./_wks":122}],64:[function(e,t){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],65:[function(e,t){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},{}],66:[function(e,t){"use strict";var n=e("./_object-dp"),a=e("./_property-desc");t.exports=function(e,t,i){t in e?n.f(e,t,a(0,i)):e[t]=i}},{"./_object-dp":95,"./_property-desc":105}],67:[function(e,t){var n=e("./_a-function");t.exports=function(e,t,a){return(n(e),void 0===t)?e:1===a?function(n){return e.call(t,n)}:2===a?function(n,a){return e.call(t,n,a)}:3===a?function(n,a,i){return e.call(t,n,a,i)}:function(){return e.apply(t,arguments)}}},{"./_a-function":58}],68:[function(e,t){t.exports=function(e){if(e==void 0)throw TypeError("Can't call method on  "+e);return e}},{}],69:[function(e,t){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":73}],70:[function(e,t){var n=e("./_is-object"),a=e("./_global").document,i=n(a)&&n(a.createElement);t.exports=function(e){return i?a.createElement(e):{}}},{"./_global":75,"./_is-object":83}],71:[function(e,t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],72:[function(e,t){var n=e("./_global"),a=e("./_core"),i=e("./_ctx"),o=e("./_hide"),r="prototype",l=function(e,t,s){var d=e&l.F,p=e&l.G,c=e&l.S,u=e&l.P,f=e&l.B,m=e&l.W,g=p?a:a[t]||(a[t]={}),_=g[r],y=p?n:c?n[t]:(n[t]||{})[r],h,b,x;for(h in p&&(s=t),s)b=!d&&y&&void 0!==y[h],b&&h in g||(x=b?y[h]:s[h],g[h]=p&&"function"!=typeof y[h]?s[h]:f&&b?i(x,n):m&&y[h]==x?function(e){var t=function(t,n,a){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n);}return new e(t,n,a)}return e.apply(this,arguments)};return t[r]=e[r],t}(x):u&&"function"==typeof x?i(Function.call,x):x,u&&((g.virtual||(g.virtual={}))[h]=x,e&l.R&&_&&!_[h]&&o(_,h,x)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},{"./_core":65,"./_ctx":67,"./_global":75,"./_hide":77}],73:[function(e,t){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],74:[function(e,t,n){var a=e("./_ctx"),i=e("./_iter-call"),o=e("./_is-array-iter"),r=e("./_an-object"),l=e("./_to-length"),s=e("./core.get-iterator-method"),d={},p={},n=t.exports=function(e,t,n,c,u){var m=u?function(){return e}:s(e),g=a(n,c,t?2:1),f=0,_,y,h,b;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(_=l(e.length);_>f;f++)if(b=t?g(r(y=e[f])[0],y[1]):g(e[f]),b===d||b===p)return b;}else for(h=m.call(e);!(y=h.next()).done;)if(b=i(h,g,y.value,t),b===d||b===p)return b};n.BREAK=d,n.RETURN=p},{"./_an-object":61,"./_ctx":67,"./_is-array-iter":82,"./_iter-call":84,"./_to-length":118,"./core.get-iterator-method":123}],75:[function(e,t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],76:[function(e,t){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],77:[function(e,t){var n=e("./_object-dp"),a=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,i){return n.f(e,t,a(1,i))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":69,"./_object-dp":95,"./_property-desc":105}],78:[function(e,t){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":75}],79:[function(e,t){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":69,"./_dom-create":70,"./_fails":73}],80:[function(e,t){t.exports=function(e,t,n){var a=n===void 0;switch(t.length){case 0:return a?e():e.call(n);case 1:return a?e(t[0]):e.call(n,t[0]);case 2:return a?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);}return e.apply(n,t)}},{}],81:[function(e,t){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":64}],82:[function(e,t){var n=e("./_iterators"),a=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return e!==void 0&&(n.Array===e||i[a]===e)}},{"./_iterators":89,"./_wks":122}],83:[function(e,t){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],84:[function(e,t){var n=e("./_an-object");t.exports=function(t,e,a,i){try{return i?e(n(a)[0],a[1]):e(a)}catch(a){var o=t["return"];throw void 0!==o&&n(o.call(t)),a}}},{"./_an-object":61}],85:[function(e,t){"use strict";var n=e("./_object-create"),a=e("./_property-desc"),i=e("./_set-to-string-tag"),o={};e("./_hide")(o,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(o,{next:a(1,r)}),i(e,t+" Iterator")}},{"./_hide":77,"./_object-create":94,"./_property-desc":105,"./_set-to-string-tag":109,"./_wks":122}],86:[function(e,t){"use strict";var n=e("./_library"),a=e("./_export"),i=e("./_redefine"),o=e("./_hide"),r=e("./_has"),l=e("./_iterators"),s=e("./_iter-create"),d=e("./_set-to-string-tag"),p=e("./_object-gpo"),c=e("./_wks")("iterator"),u=!([].keys&&"next"in[].keys()),f="keys",m="values",g=function(){return this};t.exports=function(e,t,_,y,h,b,x){s(_,t,y);var v=function(e){return!u&&e in E?E[e]:e===f?function(){return new _(this,e)}:e===m?function(){return new _(this,e)}:function(){return new _(this,e)}},S=t+" Iterator",T=h==m,k=!1,E=e.prototype,N=E[c]||E["@@iterator"]||h&&E[h],A=!u&&N||v(h),w=h?T?v("entries"):A:void 0,C="Array"==t?E.entries||N:N,O,D,P;if(C&&(P=p(C.call(new e)),P!==Object.prototype&&P.next&&(d(P,S,!0),!n&&!r(P,c)&&o(P,c,g))),T&&N&&N.name!==m&&(k=!0,A=function(){return N.call(this)}),(!n||x)&&(u||k||!E[c])&&o(E,c,A),l[t]=A,l[S]=g,h)if(O={values:T?A:v(m),keys:b?A:v(f),entries:w},x)for(D in O)D in E||i(E,D,O[D]);else a(a.P+a.F*(u||k),t,O);return O}},{"./_export":72,"./_has":76,"./_hide":77,"./_iter-create":85,"./_iterators":89,"./_library":90,"./_object-gpo":98,"./_redefine":107,"./_set-to-string-tag":109,"./_wks":122}],87:[function(e,t){var n=e("./_wks")("iterator"),a=!1;try{var i=[7][n]();i["return"]=function(){a=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(e,t){if(!t&&!a)return!1;var i=!1;try{var o=[7],r=o[n]();r.next=function(){return{done:i=!0}},o[n]=function(){return r},e(o)}catch(t){}return i}},{"./_wks":122}],88:[function(e,t){t.exports=function(e,t){return{value:t,done:!!e}}},{}],89:[function(e,t){t.exports={}},{}],90:[function(e,t){t.exports=!0},{}],91:[function(e,t){var n=e("./_global"),a=e("./_task").set,i=n.MutationObserver||n.WebKitMutationObserver,o=n.process,r=n.Promise,l="process"==e("./_cof")(o);t.exports=function(){var e=function(){var e,n;for(l&&(e=o.domain)&&e.exit();t;){n=t.fn,t=t.next;try{n()}catch(n){throw t?d():s=void 0,n}}s=void 0,e&&e.enter()},t,s,d;if(l)d=function(){o.nextTick(e)};else if(i&&!(n.navigator&&n.navigator.standalone)){var p=!0,c=document.createTextNode("");new i(e).observe(c,{characterData:!0}),d=function(){c.data=p=!p}}else if(r&&r.resolve){var u=r.resolve();d=function(){u.then(e)}}else d=function(){a.call(n,e)};return function(e){var n={fn:e,next:void 0};s&&(s.next=n),t||(t=n,d()),s=n}}},{"./_cof":64,"./_global":75,"./_task":114}],92:[function(e,t){"use strict";function n(e){var t,n;this.promise=new e(function(e,a){if(t!=void 0||n!=void 0)throw TypeError("Bad Promise constructor");t=e,n=a}),this.resolve=a(t),this.reject=a(n)}var a=e("./_a-function");t.exports.f=function(e){return new n(e)}},{"./_a-function":58}],93:[function(e,t){"use strict";var n=e("./_object-keys"),a=e("./_object-gops"),i=e("./_object-pie"),o=e("./_to-object"),r=e("./_iobject"),l=Object.assign;t.exports=!l||e("./_fails")(function(){var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=a})?function(e){for(var t=o(e),l=arguments.length,s=1,d=a.f,p=i.f;l>s;)for(var c=r(arguments[s++]),u=d?n(c).concat(d(c)):n(c),f=u.length,m=0,g;f>m;)p.call(c,g=u[m++])&&(t[g]=c[g]);return t}:l},{"./_fails":73,"./_iobject":81,"./_object-gops":97,"./_object-keys":100,"./_object-pie":101,"./_to-object":119}],94:[function(e,t){var n=e("./_an-object"),a=e("./_object-dps"),o=e("./_enum-bug-keys"),i=e("./_shared-key")("IE_PROTO"),r=function(){},l="prototype",s=function(){var t=e("./_dom-create")("iframe"),n=o.length,a="<",i=">",r;for(t.style.display="none",e("./_html").appendChild(t),t.src="javascript:",r=t.contentWindow.document,r.open(),r.write(a+"script"+i+"document.F=Object"+a+"/script"+i),r.close(),s=r.F;n--;)delete s[l][o[n]];return s()};t.exports=Object.create||function(e,t){var o;return null===e?o=s():(r[l]=n(e),o=new r,r[l]=null,o[i]=e),void 0===t?o:a(o,t)}},{"./_an-object":61,"./_dom-create":70,"./_enum-bug-keys":71,"./_html":78,"./_object-dps":96,"./_shared-key":110}],95:[function(e,t,n){var a=e("./_an-object"),i=e("./_ie8-dom-define"),o=e("./_to-primitive"),r=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(a(e),t=o(t,!0),a(n),i)try{return r(e,t,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":61,"./_descriptors":69,"./_ie8-dom-define":79,"./_to-primitive":120}],96:[function(e,t){var n=e("./_object-dp"),a=e("./_an-object"),o=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){a(e);for(var r=o(t),l=r.length,s=0,i;l>s;)n.f(e,i=r[s++],t[i]);return e}},{"./_an-object":61,"./_descriptors":69,"./_object-dp":95,"./_object-keys":100}],97:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],98:[function(e,t){var n=e("./_has"),a=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=a(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},{"./_has":76,"./_shared-key":110,"./_to-object":119}],99:[function(e,t){var n=e("./_has"),a=e("./_to-iobject"),o=e("./_array-includes")(!1),i=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r=a(e),l=0,s=[],d;for(d in r)d!=i&&n(r,d)&&s.push(d);for(;t.length>l;)n(r,d=t[l++])&&(~o(s,d)||s.push(d));return s}},{"./_array-includes":62,"./_has":76,"./_shared-key":110,"./_to-iobject":117}],100:[function(e,t){var n=e("./_object-keys-internal"),a=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,a)}},{"./_enum-bug-keys":71,"./_object-keys-internal":99}],101:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],102:[function(e,t){var n=e("./_object-keys"),a=e("./_to-iobject"),o=e("./_object-pie").f;t.exports=function(e){return function(t){for(var r=a(t),l=n(r),s=l.length,d=0,i=[],p;s>d;)o.call(r,p=l[d++])&&i.push(e?[p,r[p]]:r[p]);return i}}},{"./_object-keys":100,"./_object-pie":101,"./_to-iobject":117}],103:[function(e,t){t.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},{}],104:[function(e,t){var n=e("./_an-object"),a=e("./_is-object"),i=e("./_new-promise-capability");t.exports=function(e,t){if(n(e),a(t)&&t.constructor===e)return t;var o=i.f(e),r=o.resolve;return r(t),o.promise}},{"./_an-object":61,"./_is-object":83,"./_new-promise-capability":92}],105:[function(e,t){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],106:[function(e,t){var n=e("./_hide");t.exports=function(e,t,a){for(var i in t)a&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},{"./_hide":77}],107:[function(e,t){t.exports=e("./_hide")},{"./_hide":77}],108:[function(e,t){"use strict";var n=e("./_global"),a=e("./_core"),i=e("./_object-dp"),o=e("./_descriptors"),r=e("./_wks")("species");t.exports=function(e){var t="function"==typeof a[e]?a[e]:n[e];o&&t&&!t[r]&&i.f(t,r,{configurable:!0,get:function(){return this}})}},{"./_core":65,"./_descriptors":69,"./_global":75,"./_object-dp":95,"./_wks":122}],109:[function(e,t){var n=e("./_object-dp").f,a=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,o){e&&!a(e=o?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./_has":76,"./_object-dp":95,"./_wks":122}],110:[function(e,t){var n=e("./_shared")("keys"),a=e("./_uid");t.exports=function(e){return n[e]||(n[e]=a(e))}},{"./_shared":111,"./_uid":121}],111:[function(e,t){var n=e("./_global"),a="__core-js_shared__",i=n[a]||(n[a]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":75}],112:[function(e,t){var n=e("./_an-object"),a=e("./_a-function"),i=e("./_wks")("species");t.exports=function(e,t){var o=n(e).constructor,r;return o===void 0||(r=n(o)[i])==void 0?t:a(r)}},{"./_a-function":58,"./_an-object":61,"./_wks":122}],113:[function(e,t){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,r){var d=o(t)+"",s=n(r),i=d.length,l,a;return 0>s||s>=i?e?"":void 0:(l=d.charCodeAt(s),55296>l||56319<l||s+1===i||56320>(a=d.charCodeAt(s+1))||57343<a?e?d.charAt(s):l:e?d.slice(s,s+2):(l-55296<<10)+(a-56320)+65536)}}},{"./_defined":68,"./_to-integer":116}],114:[function(e,t){var n=e("./_ctx"),a=e("./_invoke"),i=e("./_html"),o=e("./_dom-create"),r=e("./_global"),l=r.process,s=r.setImmediate,d=r.clearImmediate,p=r.MessageChannel,c=r.Dispatch,u=0,f={},m="onreadystatechange",g=function(){var e=+this;if(f.hasOwnProperty(e)){var t=f[e];delete f[e],t()}},_=function(e){g.call(e.data)},y,h,b;s&&d||(s=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return f[++u]=function(){a("function"==typeof e?e:Function(e),t)},y(u),u},d=function(e){delete f[e]},"process"==e("./_cof")(l)?y=function(e){l.nextTick(n(g,e,1))}:c&&c.now?y=function(e){c.now(n(g,e,1))}:p?(h=new p,b=h.port2,h.port1.onmessage=_,y=n(b.postMessage,b,1)):r.addEventListener&&"function"==typeof postMessage&&!r.importScripts?(y=function(e){r.postMessage(e+"","*")},r.addEventListener("message",_,!1)):m in o("script")?y=function(e){i.appendChild(o("script"))[m]=function(){i.removeChild(this),g.call(e)}}:y=function(e){setTimeout(n(g,e,1),0)}),t.exports={set:s,clear:d}},{"./_cof":64,"./_ctx":67,"./_dom-create":70,"./_global":75,"./_html":78,"./_invoke":80}],115:[function(e,t){var n=e("./_to-integer");t.exports=function(e,t){return e=n(e),0>e?N(e+t,0):S(e,t)}},{"./_to-integer":116}],116:[function(e,t){t.exports=function(e){return isNaN(e=+e)?0:(0<e?E:p)(e)}},{}],117:[function(e,t){var n=e("./_iobject"),a=e("./_defined");t.exports=function(e){return n(a(e))}},{"./_defined":68,"./_iobject":81}],118:[function(e,t){var n=e("./_to-integer");t.exports=function(e){return 0<e?S(n(e),9007199254740991):0}},{"./_to-integer":116}],119:[function(e,t){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":68}],120:[function(e,t){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var a,i;if(t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;if("function"==typeof(a=e.valueOf)&&!n(i=a.call(e)))return i;if(!t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":83}],121:[function(e,t){var n=0,a=Math.random();t.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++n+a).toString(36))}},{}],122:[function(e,t){var n=e("./_shared")("wks"),a=e("./_uid"),i=e("./_global").Symbol,o="function"==typeof i,r=t.exports=function(e){return n[e]||(n[e]=o&&i[e]||(o?i:a)("Symbol."+e))};r.store=n},{"./_global":75,"./_shared":111,"./_uid":121}],123:[function(e,t){var n=e("./_classof"),a=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(e!=void 0)return e[a]||e["@@iterator"]||i[n(e)]}},{"./_classof":63,"./_core":65,"./_iterators":89,"./_wks":122}],124:[function(e,t){var n=e("./_an-object"),a=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":61,"./_core":65,"./core.get-iterator-method":123}],125:[function(e,t){var n=e("./_classof"),a=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").isIterable=function(e){var t=Object(e);return t[a]!==void 0||"@@iterator"in t||i.hasOwnProperty(n(t))}},{"./_classof":63,"./_core":65,"./_iterators":89,"./_wks":122}],126:[function(e){"use strict";var t=e("./_ctx"),n=e("./_export"),a=e("./_to-object"),i=e("./_iter-call"),o=e("./_is-array-iter"),r=e("./_to-length"),l=e("./_create-property"),s=e("./core.get-iterator-method");n(n.S+n.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var n=a(e),d="function"==typeof this?this:Array,p=arguments.length,c=1<p?arguments[1]:void 0,u=void 0!==c,f=0,m=s(n),g,_,y,h;if(u&&(c=t(c,2<p?arguments[2]:void 0,2)),void 0!=m&&!(d==Array&&o(m)))for(h=m.call(n),_=new d;!(y=h.next()).done;f++)l(_,f,u?i(h,c,[y.value,f],!0):y.value);else for(g=r(n.length),_=new d(g);g>f;f++)l(_,f,u?c(n[f],f):n[f]);return _.length=f,_}})},{"./_create-property":66,"./_ctx":67,"./_export":72,"./_is-array-iter":82,"./_iter-call":84,"./_iter-detect":87,"./_to-length":118,"./_to-object":119,"./core.get-iterator-method":123}],127:[function(e,t){"use strict";var n=e("./_add-to-unscopables"),a=e("./_iter-step"),i=e("./_iterators"),o=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,a(1)):"keys"==t?a(0,n):"values"==t?a(0,e[n]):a(0,[n,e[n]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":59,"./_iter-define":86,"./_iter-step":88,"./_iterators":89,"./_to-iobject":117}],128:[function(e){var t=e("./_export");t(t.S+t.F,"Object",{assign:e("./_object-assign")})},{"./_export":72,"./_object-assign":93}],129:[function(e){var t=e("./_export");t(t.S+t.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":69,"./_export":72,"./_object-dp":95}],130:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],131:[function(e){"use strict";var t=e("./_library"),n=e("./_global"),a=e("./_ctx"),i=e("./_classof"),o=e("./_export"),r=e("./_is-object"),l=e("./_a-function"),s=e("./_an-instance"),d=e("./_for-of"),p=e("./_species-constructor"),c=e("./_task").set,u=e("./_microtask")(),f=e("./_new-promise-capability"),m=e("./_perform"),g=e("./_promise-resolve"),_="Promise",y=n.TypeError,h=n.process,b=n[_],x="process"==i(h),v=function(){},S=P=f.f,T=!!function(){try{var t=b.resolve(1),n=(t.constructor={})[e("./_wks")("species")]=function(e){e(v,v)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(v)instanceof n}catch(t){}}(),k=function(e){var t;return r(e)&&"function"==typeof(t=e.then)&&t},E=function(e,t){if(!e._n){e._n=!0;var n=e._c;u(function(){for(var a=e._v,o=1==e._s,r=0,i=function(t){var n=o?t.ok:t.fail,i=t.resolve,r=t.reject,l=t.domain,s,d;try{n?(!o&&(2==e._h&&w(e),e._h=1),!0===n?s=a:(l&&l.enter(),s=n(a),l&&l.exit()),s===t.promise?r(y("Promise-chain cycle")):(d=k(s))?d.call(s,i,r):i(s)):r(a)}catch(t){r(t)}};n.length>r;)i(n[r++]);e._c=[],e._n=!1,t&&!e._h&&N(e)})}},N=function(e){c.call(n,function(){var t=e._v,a=A(e),i,o,r;if(a&&(i=m(function(){x?h.emit("unhandledRejection",t,e):(o=n.onunhandledrejection)?o({promise:e,reason:t}):(r=n.console)&&r.error&&r.error("Unhandled promise rejection",t)}),e._h=x||A(e)?2:1),e._a=void 0,a&&i.e)throw i.v})},A=function(e){return 1!==e._h&&0===(e._a||e._c).length},w=function(e){c.call(n,function(){var t;x?h.emit("rejectionHandled",e):(t=n.onrejectionhandled)&&t({promise:e,reason:e._v})})},C=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),E(t,!0))},O=function(e){var t=this,n;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw y("Promise can't be resolved itself");(n=k(e))?u(function(){var i={_w:t,_d:!1};try{n.call(e,a(O,i,1),a(C,i,1))}catch(t){C.call(i,t)}}):(t._v=e,t._s=1,E(t,!1))}catch(n){C.call({_w:t,_d:!1},n)}}},D,P,R,I;T||(b=function(e){s(this,b,_,"_h"),l(e),D.call(this);try{e(a(O,this,1),a(C,this,1))}catch(e){C.call(this,e)}},D=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},D.prototype=e("./_redefine-all")(b.prototype,{then:function(e,t){var n=S(p(this,b));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=x?h.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&E(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),R=function(){var e=new D;this.promise=e,this.resolve=a(O,e,1),this.reject=a(C,e,1)},f.f=S=function(e){return e===b||e===I?new R(e):P(e)}),o(o.G+o.W+o.F*!T,{Promise:b}),e("./_set-to-string-tag")(b,_),e("./_set-species")(_),I=e("./_core")[_],o(o.S+o.F*!T,_,{reject:function(e){var t=S(this),n=t.reject;return n(e),t.promise}}),o(o.S+o.F*(t||!T),_,{resolve:function(e){return g(t&&this===I?b:this,e)}}),o(o.S+o.F*!(T&&e("./_iter-detect")(function(e){b.all(e)["catch"](v)})),_,{all:function(e){var t=this,n=S(t),a=n.resolve,i=n.reject,o=m(function(){var n=[],o=0,r=1;d(e,!1,function(e){var l=o++,s=!1;n.push(void 0),r++,t.resolve(e).then(function(e){s||(s=!0,n[l]=e,--r||a(n))},i)}),--r||a(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=S(t),a=n.reject,i=m(function(){d(e,!1,function(e){t.resolve(e).then(n.resolve,a)})});return i.e&&a(i.v),n.promise}})},{"./_a-function":58,"./_an-instance":60,"./_classof":63,"./_core":65,"./_ctx":67,"./_export":72,"./_for-of":74,"./_global":75,"./_is-object":83,"./_iter-detect":87,"./_library":90,"./_microtask":91,"./_new-promise-capability":92,"./_perform":103,"./_promise-resolve":104,"./_redefine-all":106,"./_set-species":108,"./_set-to-string-tag":109,"./_species-constructor":112,"./_task":114,"./_wks":122}],132:[function(e){"use strict";var t=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=e+"",this._i=0},function(){var e=this._t,n=this._i,a;return n>=e.length?{value:void 0,done:!0}:(a=t(e,n),this._i+=a.length,{value:a,done:!1})})},{"./_iter-define":86,"./_string-at":113}],133:[function(e){var t=e("./_export"),n=e("./_object-to-array")(!0);t(t.S,"Object",{entries:function(e){return n(e)}})},{"./_export":72,"./_object-to-array":102}],134:[function(e){"use strict";var t=e("./_export"),n=e("./_core"),a=e("./_global"),i=e("./_species-constructor"),o=e("./_promise-resolve");t(t.P+t.R,"Promise",{finally:function(t){var r=i(this,n.Promise||a.Promise),e="function"==typeof t;return this.then(e?function(e){return o(r,t()).then(function(){return e})}:t,e?function(n){return o(r,t()).then(function(){throw n})}:t)}})},{"./_core":65,"./_export":72,"./_global":75,"./_promise-resolve":104,"./_species-constructor":112}],135:[function(e){"use strict";var t=e("./_export"),n=e("./_new-promise-capability"),a=e("./_perform");t(t.S,"Promise",{try:function(e){var t=n.f(this),i=a(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}})},{"./_export":72,"./_new-promise-capability":92,"./_perform":103}],136:[function(e){e("./es6.array.iterator");for(var t=e("./_global"),n=e("./_hide"),a=e("./_iterators"),o=e("./_wks")("toStringTag"),r="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<r.length;l++){var i=r[l],s=t[i],d=s&&s.prototype;d&&!d[o]&&n(d,o,i),a[i]=a.Array}},{"./_global":75,"./_hide":77,"./_iterators":89,"./_wks":122,"./es6.array.iterator":127}],137:[function(e,t){"use strict";var n=e("./stringify"),a=e("./parse");t.exports={stringify:n,parse:a}},{"./parse":138,"./stringify":139}],138:[function(e,t){"use strict";function n(e,t){return t}function a(e){return e.toString().match(/^function\s*([^( ]+)/)[1]}function i(e){var t=e.constructor.name;return null==t?a(e.constructor):t}function o(e,t){var n=e.locationData,a=n.first_line,i=n.first_column,o="",r="";return null!=a&&(o=a+1),null!=i&&(r=i+1),"Syntax error on line "+o+", column "+r+": "+t}function r(e){return d(e)}function l(e){return d(e)}function s(e){var t=i(e);if("Value"!==t)throw new SyntaxError(o(e,t+" used as key"));var n=e.base.value;switch(n.charAt(0)){case"'":case"\"":return r(n);default:return n;}}var d=e("vm").runInThisContext,p=e("coffee-script").nodes,c={Block:function(e,t){var n;if(n=e.expressions,!n||1!==n.length)throw new SyntaxError(o(e,"One top level value expected"));return t(n[0])},Value:function(e,t){return t(e.base)},Bool:function(e){return"true"===e.val},BooleanLiteral:function(e){return"true"===e.value},Null:function(){return null},NullLiteral:function(){return null},Literal:function(e){var t=e.value;try{switch(t.charAt(0)){case"'":case"\"":return r(t);case"/":return l(t);default:return JSON.parse(t);}}catch(t){throw new SyntaxError(o(e,t.message))}},NumberLiteral:function(e){return+e.value},StringLiteral:function(e){return r(e.value)},RegexLiteral:function(e){return l(e.value)},Arr:function(e,t){return e.objects.map(t)},Obj:function(e,t,n){return e.properties.reduce(function(e,a){var i=a.variable,o=a.value;if(!i)return e;var r=s(i);return o=t(o),e[r]=n.call(e,r,o),e},{})},Op:function(e,t){if(null!=e.second){var n=t(e.first),a=t(e.second);switch(e.operator){case"-":return n-a;case"+":return n+a;case"*":return n*a;case"/":return n/a;case"%":return n%a;case"&":return n&a;case"|":return n|a;case"^":return n^a;case"<<":return n<<a;case">>>":return n>>>a;case">>":return n>>a;default:throw new SyntaxError(o(e,"Unknown binary operator "+e.operator));}}else switch(e.operator){case"-":return-t(e.first);case"~":return~t(e.first);default:throw new SyntaxError(o(e,"Unknown unary operator "+e.operator));}},Parens:function(e,t){var n;if(n=e.body.expressions,!n||1!==n.length)throw new SyntaxError(o(e,"Parenthesis may only contain one expression"));return t(n[0])}};t.exports=function(e,t){function a(e){var n=i(e),r=c[n];if(!r)throw new SyntaxError(o(e,"Unexpected "+n));return r(e,a,t)}if(null==t&&(t=n),"function"!=typeof t)throw new TypeError("reviver has to be a function");var r=p(e.toString("utf8")),l=a(r);if(t===n)return l;return t.call({"":l},"",l)}},{"coffee-script":40,vm:593}],139:[function(e,t){"use strict";function n(e,t){return 0<=e.indexOf(t)}function a(e){return e&&"\n"+e+"\n"}function i(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function o(e){switch(typeof e){case"string":return e.slice(0,10);case"number":var t=N(0,S(10,E(e)));return y.slice(0,t);default:return 0;}}function r(e,t){return e+t}function l(e,t){return""===t?t:t.split("\n").map(r.bind(null,e)).join("\n")}function s(e){return"'"+JSON.stringify(e).slice(1,-1).replace(/\\"/g,"\"").replace(/'/g,"\\'")+"'"}function d(e){return n(e,"'")&&!n(e,"\"")?"double":"single"}function p(e){return("single"===d(e)?s:JSON.stringify)(e)}function c(e,t,n){return Object.keys(n).map(function(a){var o=n[a];a.match(g)||(a=p(a));var r=e(o,{bracesRequired:!t});return t&&(r=i(o)&&0<Object.keys(o).length?"\n"+l(t,r):" "+r),a+":"+r})}function u(e,t,n){var i=n.map(function(t){return e(t,{bracesRequired:!0})}),o=t?a(l(t,i.join("\n"))):i.join(",");return"["+o+"]"}function f(e,t,n,i){var o=i.bracesRequired,r=c(e,t,n);if(0===r.length)return"{}";if(t){var s=r.join("\n");return o?"{"+a(l(t,s))+"}":s}var d=r.join(",");return o?"{"+d+"}":d}function m(e,t,n){var i;return-1!==n.indexOf("\n")&&t?(i=n.replace(/\\/g,"\\\\").replace(_,"\\'''"),"'''"+a(l(t,i))+"'''"):p(n)}var g=/^[a-z_$][a-z0-9_$]*$/i,_=/'''/g,y="          ";t.exports=function(e,t,n){function a(e,t){switch(null==t&&(t={}),typeof e){case"boolean":return""+e;case"number":return isFinite(e)?""+e:"null";case"string":return m(a,n,e,t);case"object":return null===e?"null":Array.isArray(e)?u(a,n,e,t):f(a,n,e,t);default:}}if("function"!=typeof e&&"undefined"!=typeof e){n=o(n);var i=JSON.parse(JSON.stringify(e,t));return a(i)}}},{}],140:[function(e,t,n){(function(e,a){"object"==typeof n&&"undefined"!=typeof t?a(n):"function"==typeof m&&m.amd?m(["exports"],a):a(e.d3=e.d3||{})})(this,function(e){"use strict";function t(e){return new n(e)}function n(e){if(!(u=c.exec(e)))throw new Error("invalid format: "+e);var t=u[1]||" ",n=u[2]||">",a=u[3]||"-",i=u[4]||"",o=!!u[5],r=u[6]&&+u[6],l=!!u[7],s=u[8]&&+u[8].slice(1),d=u[9]||"",u;"n"===d?(l=!0,d="g"):!p[d]&&(d=""),(o||"0"===t&&"="===n)&&(o=!0,t="0",n="="),this.fill=t,this.align=n,this.sign=a,this.symbol=i,this.zero=o,this.width=r,this.comma=l,this.precision=s,this.type=d}function a(t){return y=_(t),e.format=y.format,e.formatPrefix=y.formatPrefix,y}var o=function(e,t){if(0>(a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e")))return null;var n=e.slice(0,a),a;return[1<n.length?n[0]+n.slice(2):n,+e.slice(a+1)]},i=function(e){return e=o(T(e)),e?e[1]:NaN},r=function(e,n){return function(a,o){for(var r=a.length,i=[],t=0,l=e[0],s=0;0<r&&0<l&&(s+l+1>o&&(l=N(1,o-s)),i.push(a.substring(r-=l,r+l)),!((s+=l+1)>o));)l=e[t=(t+1)%e.length];return i.reverse().join(n)}},s=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},d=function(e,t){var n=o(e,t);if(!n)return e+"";var a=n[0],i=n[1];return 0>i?"0."+Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+Array(i-a.length+2).join("0")},p={"":function(e,t){e=e.toPrecision(t);out:for(var a=e.length,n=1,i=-1,o;n<a;++n)switch(e[n]){case".":i=o=n;break;case"0":0===i&&(i=n),o=n;break;case"e":break out;default:0<i&&(i=0);}return 0<i?e.slice(0,i)+e.slice(o+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return l(e).toString(2)},c:function(e){return e+""},d:function(e){return l(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return l(e).toString(8)},p:function(e,t){return d(100*e,t)},r:d,s:function(e,t){var a=o(e,t);if(!a)return e+"";var r=a[0],l=a[1],s=l-(u=3*N(-8,S(8,E(l/3))))+1,i=r.length;return s===i?r:s>i?r+Array(s-i+1).join("0"):0<s?r.slice(0,s)+"."+r.slice(s):"0."+Array(1-s).join("0")+o(e,N(0,t+s-1))[0]},X:function(e){return l(e).toString(16).toUpperCase()},x:function(e){return l(e).toString(16)}},c=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,u;t.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":N(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+N(0,0|this.precision))+this.type};var f=function(e){return e},m=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],_=function(e){function n(e){function n(e){var t=x,o=v,p,f,n;if("c"===b)o=k(e)+o,e="";else{e=+e;var c=0>e;if(e=k(T(e),h),c&&0==+e&&(c=!1),t=(c?"("===s?s:"-":"-"===s||"("===s?"":s)+t,o=("s"===b?m[8+u/3]:"")+o+(c&&"("===s?")":""),E)for(p=-1,f=e.length;++p<f;)if(n=e.charCodeAt(p),48>n||57<n){o=(46===n?l+e.slice(p+1):e.slice(p))+o,e=e.slice(0,p);break}}y&&!g&&(e=a(e,Infinity));var S=t.length+e.length+o.length,N=S<_?Array(_-S+1).join(r):"";switch(y&&g&&(e=a(N+e,N.length?_-o.length:Infinity),N=""),i){case"<":e=t+e+o+N;break;case"=":e=t+N+e+o;break;case"^":e=N.slice(0,S=N.length>>1)+t+e+o+N.slice(S);break;default:e=N+t+e+o;}return d(e)}e=t(e);var r=e.fill,i=e.align,s=e.sign,f=e.symbol,g=e.zero,_=e.width,y=e.comma,h=e.precision,b=e.type,x="$"===f?o[0]:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",v="$"===f?o[1]:/[%p]/.test(b)?c:"",k=p[b],E=!b||/[defgprs%]/.test(b);return h=null==h?b?6:12:/[gprs]/.test(b)?N(1,S(21,h)):N(0,S(20,h)),n.toString=function(){return e+""},n}var a=e.grouping&&e.thousands?r(e.grouping,e.thousands):f,o=e.currency,l=e.decimal,d=e.numerals?s(e.numerals):f,c=e.percent||"%";return{format:n,formatPrefix:function(a,o){var r=n((a=t(a),a.type="f",a)),l=3*N(-8,S(8,E(i(o)/3))),s=g(10,-l),d=m[8+l/3];return function(e){return r(s*e)+d}}}},y;a({decimal:".",thousands:",",grouping:[3],currency:["$",""]});e.formatDefaultLocale=a,e.formatLocale=_,e.formatSpecifier=t,e.precisionFixed=function(e){return N(0,-i(T(e)))},e.precisionPrefix=function(e,t){return N(0,3*N(-8,S(8,E(i(t)/3)))-i(T(e)))},e.precisionRound=function(e,t){return e=T(e),t=T(t)-e,N(0,i(t)-i(e))+1},Object.defineProperty(e,"__esModule",{value:!0})})},{}],141:[function(e,t,n){(function(e,a){"object"==typeof n&&"undefined"!=typeof t?a(n):"function"==typeof m&&m.amd?m(["exports"],a):a(e.d3=e.d3||{})})(this,function(e){"use strict";function t(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ee&&t.documentElement.namespaceURI===ee?t.createElement(e):t.createElementNS(n,e)}}function n(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function a(){return new i}function i(){this._="@"+(++ie).toString(36)}function o(e,t,n){return e=r(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function r(t,n,a){return function(i){var o=e.event;e.event=i;try{t.call(this,this.__data__,n,a)}finally{e.event=o}}}function l(e){return e.trim().split(/^|\s+/).map(function(e){var n="",a=e.indexOf(".");return 0<=a&&(n=e.slice(a+1),e=e.slice(0,a)),{type:e,name:n}})}function s(e){return function(){var t=this.__on;if(t){for(var n=0,a=-1,i=t.length,r;n<i;++n)(r=t[n],(!e.type||r.type===e.type)&&r.name===e.name)?this.removeEventListener(r.type,r.listener,r.capture):t[++a]=r;++a?t.length=a:delete this.__on}}}function d(e,t,n){var a=de.hasOwnProperty(e.type)?o:r;return function(r,l,i){var s=this.__on,d=a(t,l,i),p;if(s)for(var o=0,c=s.length;o<c;++o)if((p=s[o]).type===e.type&&p.name===e.name)return this.removeEventListener(p.type,p.listener,p.capture),this.addEventListener(p.type,p.listener=d,p.capture=n),void(p.value=t);this.addEventListener(e.type,d,n),p={type:e.type,name:e.name,value:t,listener:d,capture:n},s?s.push(p):this.__on=[p]}}function p(){}function c(){return[]}function u(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function f(e,t,n,a,o,r){for(var l=0,i=t.length,s=r.length,d;l<s;++l)(d=t[l])?(d.__data__=r[l],a[l]=d):n[l]=new u(e,r[l]);for(;l<i;++l)(d=t[l])&&(o[l]=d)}function g(e,t,n,a,o,r,l){var s={},d=t.length,p=r.length,c=Array(d),f,i,m;for(f=0;f<d;++f)(i=t[f])&&(c[f]=m=ye+l.call(i,i.__data__,f,t),m in s?o[f]=i:s[m]=i);for(f=0;f<p;++f)m=ye+l.call(e,r[f],f,r),(i=s[m])?(a[f]=i,i.__data__=r[f],s[m]=null):n[f]=new u(e,r[f]);for(f=0;f<d;++f)(i=t[f])&&s[c[f]]===i&&(o[f]=i)}function _(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function m(e){return function(){this.removeAttribute(e)}}function y(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h(e,t){return function(){this.setAttribute(e,t)}}function b(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function x(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function v(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function T(e){return function(){this.style.removeProperty(e)}}function k(e,t,n){return function(){this.style.setProperty(e,t,n)}}function E(e,t,n){return function(){var a=t.apply(this,arguments);null==a?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function N(e,t){return e.style.getPropertyValue(t)||he(e).getComputedStyle(e,null).getPropertyValue(t)}function A(e){return function(){delete this[e]}}function w(e,t){return function(){this[e]=t}}function C(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function O(e){return e.trim().split(/^|\s+/)}function D(e){return e.classList||new P(e)}function P(e){this._node=e,this._names=O(e.getAttribute("class")||"")}function R(e,t){for(var a=D(e),o=-1,i=t.length;++o<i;)a.add(t[o])}function I(e,t){for(var a=D(e),o=-1,i=t.length;++o<i;)a.remove(t[o])}function M(e){return function(){R(this,e)}}function F(e){return function(){I(this,e)}}function B(e,t){return function(){(t.apply(this,arguments)?R:I)(this,e)}}function z(){this.textContent=""}function j(e){return function(){this.textContent=e}}function U(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function $(){this.innerHTML=""}function W(e){return function(){this.innerHTML=e}}function q(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function H(){this.nextSibling&&this.parentNode.appendChild(this)}function Y(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function V(){return null}function G(){var e=this.parentNode;e&&e.removeChild(this)}function Z(e,t,n){var a=he(e),i=a.CustomEvent;"function"==typeof i?i=new i(t,n):(i=a.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function X(e,t){return function(){return Z(this,e,t)}}function K(e,t){return function(){return Z(this,e,t.apply(this,arguments))}}function J(e,t){this._groups=e,this._parents=t}function Q(){return new J([[document.documentElement]],be)}var ee="http://www.w3.org/1999/xhtml",te={svg:"http://www.w3.org/2000/svg",xhtml:ee,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ne=function(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),te.hasOwnProperty(t)?{space:te[t],local:e}:e},ae=function(e){var a=ne(e);return(a.local?n:t)(a)},ie=0;i.prototype=a.prototype={constructor:i,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var oe=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var re=document.documentElement;if(!re.matches){var le=re.webkitMatchesSelector||re.msMatchesSelector||re.mozMatchesSelector||re.oMatchesSelector;oe=function(e){return function(){return le.call(this,e)}}}}var se=oe,de={};if(e.event=null,"undefined"!=typeof document){var pe=document.documentElement;"onmouseenter"in pe||(de={mouseenter:"mouseover",mouseleave:"mouseout"})}var ce=function(){for(var t=e.event,n;n=t.sourceEvent;)t=n;return t},ue=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a=a.matrixTransform(e.getScreenCTM().inverse()),[a.x,a.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]},fe=function(e){return null==e?p:function(){return this.querySelector(e)}},me=function(e){return null==e?c:function(){return this.querySelectorAll(e)}},ge=function(e){return Array(e.length)};u.prototype={constructor:u,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var _e=function(e){return function(){return e}},ye="$",he=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};P.prototype={add:function(e){var t=this._names.indexOf(e);0>t&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var be=[null];J.prototype=Q.prototype={constructor:J,select:function(e){"function"!=typeof e&&(e=fe(e));for(var t=this._groups,a=t.length,o=Array(a),r=0;r<a;++r)for(var l=t[r],s=l.length,n=o[r]=Array(s),d=0,i,p;d<s;++d)(i=l[d])&&(p=e.call(i,i.__data__,d,l))&&("__data__"in i&&(p.__data__=i.__data__),n[d]=p);return new J(o,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=me(e));for(var t=this._groups,a=t.length,o=[],r=[],l=0;l<a;++l)for(var s=t[l],d=s.length,n=0,i;n<d;++n)(i=s[n])&&(o.push(e.call(i,i.__data__,n,s)),r.push(i));return new J(o,r)},filter:function(e){"function"!=typeof e&&(e=se(e));for(var t=this._groups,a=t.length,o=Array(a),r=0;r<a;++r)for(var l=t[r],s=l.length,n=o[r]=[],d=0,i;d<s;++d)(i=l[d])&&e.call(i,i.__data__,d,l)&&n.push(i);return new J(o,this._parents)},data:function(e,t){if(!e)return m=Array(this.size()),p=-1,this.each(function(e){m[++p]=e}),m;var n=t?g:f,a=this._parents,i=this._groups;"function"!=typeof e&&(e=_e(e));for(var o=i.length,r=Array(o),l=Array(o),s=Array(o),p=0;p<o;++p){var d=a[p],c=i[p],u=c.length,m=e.call(d,d&&d.__data__,p,a),_=m.length,y=l[p]=Array(_),h=r[p]=Array(_),b=s[p]=Array(u);n(d,c,y,h,b,m,t);for(var x=0,v=0,S,T;x<_;++x)if(S=y[x]){for(x>=v&&(v=x+1);!(T=h[v])&&++v<_;);S._next=T||null}}return r=new J(r,a),r._enter=l,r._exit=s,r},enter:function(){return new J(this._enter||this._groups.map(ge),this._parents)},exit:function(){return new J(this._exit||this._groups.map(ge),this._parents)},merge:function(e){for(var t=this._groups,a=e._groups,o=t.length,r=a.length,l=S(o,r),s=Array(o),d=0;d<l;++d)for(var p=t[d],c=a[d],u=p.length,n=s[d]=Array(u),f=0,i;f<u;++f)(i=p[f]||c[f])&&(n[f]=i);for(;d<o;++d)s[d]=t[d];return new J(s,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a=e[t],o=a.length-1,i=a[o],r;0<=--o;)(r=a[o])&&(i&&i!==r.nextSibling&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=_);for(var a=this._groups,o=a.length,r=Array(o),l=0;l<o;++l){for(var s=a[l],d=s.length,n=r[l]=Array(d),p=0,i;p<d;++p)(i=s[p])&&(n[p]=i);n.sort(t)}return new J(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var o=e[t],r=0,i=o.length,n;r<i;++r)if(n=o[r],n)return n;return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,a=0,o=t.length;a<o;++a)for(var r=t[a],l=0,i=r.length,n;l<i;++l)(n=r[l])&&e.call(n,n.__data__,l,r);return this},attr:function(e,t){var n=ne(e);if(2>arguments.length){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((null==t?n.local?y:m:"function"==typeof t?n.local?v:x:n.local?b:h)(n,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?T:"function"==typeof t?E:k)(e,t,null==n?"":n)):N(this.node(),e)},property:function(e,t){return 1<arguments.length?this.each((null==t?A:"function"==typeof t?C:w)(e,t)):this.node()[e]},classed:function(e,t){var a=O(e+"");if(2>arguments.length){for(var o=D(this.node()),r=-1,i=a.length;++r<i;)if(!o.contains(a[r]))return!1;return!0}return this.each(("function"==typeof t?B:t?M:F)(a,t))},text:function(e){return arguments.length?this.each(null==e?z:("function"==typeof e?U:j)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?$:("function"==typeof e?q:W)(e)):this.node().innerHTML},raise:function(){return this.each(H)},lower:function(){return this.each(Y)},append:function(e){var t="function"==typeof e?e:ae(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:ae(e),a=null==t?V:"function"==typeof t?t:fe(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})},remove:function(){return this.each(G)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,a,r){var p=l(e+""),c=p.length,n,i;if(2>arguments.length){var t=this.node().__on;if(t)for(var u=0,f=t.length,m;u<f;++u)for(n=0,m=t[u];n<c;++n)if((i=p[n]).type===m.type&&i.name===m.name)return m.value;return}for(t=a?d:s,null==r&&(r=!1),n=0;n<c;++n)this.each(t(p[n],a,r));return this},dispatch:function(e,t){return this.each(("function"==typeof t?K:X)(e,t))}};e.creator=ae,e.local=a,e.matcher=se,e.mouse=function(e){var t=ce();return t.changedTouches&&(t=t.changedTouches[0]),ue(e,t)},e.namespace=ne,e.namespaces=te,e.clientPoint=ue,e.select=function(e){return"string"==typeof e?new J([[document.querySelector(e)]],[document.documentElement]):new J([[e]],be)},e.selectAll=function(e){return"string"==typeof e?new J([document.querySelectorAll(e)],[document.documentElement]):new J([null==e?[]:e],be)},e.selection=Q,e.selector=fe,e.selectorAll=me,e.style=N,e.touch=function(e,t,a){3>arguments.length&&(a=t,t=ce().changedTouches);for(var o=0,i=t?t.length:0,n;o<i;++o)if((n=t[o]).identifier===a)return ue(e,n);return null},e.touches=function(e,t){null==t&&(t=ce().touches);for(var a=0,i=t?t.length:0,n=Array(i);a<i;++a)n[a]=ue(e,t[a]);return n},e.window=he,e.customEvent=function(t,n,a,i){var o=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(a,i)}finally{e.event=o}},Object.defineProperty(e,"__esModule",{value:!0})})},{}],142:[function(e,t,n){(function(a,i){"object"==typeof n&&"undefined"!=typeof t?i(n,e("d3-time")):"function"==typeof m&&m.amd?m(["exports","d3-time"],i):i(a.d3=a.d3||{},a.d3)})(this,function(e,t){"use strict";function n(e){if(0<=e.y&&100>e.y){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function a(e){if(0<=e.y&&100>e.y){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function o(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function i(e){function i(e,t){return function(a){var o=[],r=-1,i=0,l=e.length,n,s,d;for(a instanceof Date||(a=new Date(+a));++r<l;)37===e.charCodeAt(r)&&(o.push(e.slice(i,r)),null==(s=ge[n=e.charAt(++r)])?s="e"===n?" ":"0":n=e.charAt(++r),(d=t[n])&&(n=d(a,s)),o.push(n),i=r+1);return o.push(e.slice(i,r)),o.join("")}}function r(e,n){return function(r){var s=o(1900),d=l(s,e,r+="",0),i,p;if(d!=r.length)return null;if("Q"in s)return new Date(s.Q);if("p"in s&&(s.H=s.H%12+12*s.p),"V"in s){if(1>s.V||53<s.V)return null;"w"in s||(s.w=1),"Z"in s?(i=a(o(s.y)),p=i.getUTCDay(),i=4<p||0===p?t.utcMonday.ceil(i):t.utcMonday(i),i=t.utcDay.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(i=n(o(s.y)),p=i.getDay(),i=4<p||0===p?t.timeMonday.ceil(i):t.timeMonday(i),i=t.timeDay.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),p="Z"in s?a(o(s.y)).getUTCDay():n(o(s.y)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(p+5)%7:s.w+7*s.U-(p+6)%7);return"Z"in s?(s.H+=0|s.Z/100,s.M+=s.Z%100,a(s)):n(s)}}function l(e,t,a,o){for(var r=0,i=t.length,n=a.length,l,s;r<i;){if(o>=n)return-1;if(l=t.charCodeAt(r++),37===l){if(l=t.charAt(r++),s=Re[l in ge?t.charAt(r++):l],!s||0>(o=s(e,a,o)))return-1;}else if(l!=a.charCodeAt(o++))return-1}return o}var E=e.dateTime,me=e.date,_e=e.time,ye=e.periods,he=e.days,be=e.shortDays,xe=e.months,ve=e.shortMonths,Se=s(ye),Te=d(ye),ke=s(he),Ee=d(he),Ne=s(be),Le=d(be),Ae=s(xe),we=d(xe),Ce=s(ve),Oe=d(ve),De={a:function(e){return be[e.getDay()]},A:function(e){return he[e.getDay()]},b:function(e){return ve[e.getMonth()]},B:function(e){return xe[e.getMonth()]},c:null,d:O,e:O,f:M,H:D,I:P,j:R,L:I,m:F,M:B,p:function(e){return ye[+(12<=e.getHours())]},Q:ue,s:fe,S:z,u:j,U:U,V:$,w:W,W:q,x:null,X:null,y:H,Y:Y,Z:V,"%":ce},Pe={a:function(e){return be[e.getUTCDay()]},A:function(e){return he[e.getUTCDay()]},b:function(e){return ve[e.getUTCMonth()]},B:function(e){return xe[e.getUTCMonth()]},c:null,d:G,e:G,f:Q,H:Z,I:X,j:K,L:J,m:ee,M:te,p:function(e){return ye[+(12<=e.getUTCHours())]},Q:ue,s:fe,S:ne,u:ae,U:ie,V:oe,w:re,W:le,x:null,X:null,y:se,Y:de,Z:pe,"%":ce},Re={a:function(e,t,a){var i=Ne.exec(t.slice(a));return i?(e.w=Le[i[0].toLowerCase()],a+i[0].length):-1},A:function(e,t,a){var i=ke.exec(t.slice(a));return i?(e.w=Ee[i[0].toLowerCase()],a+i[0].length):-1},b:function(e,t,a){var i=Ce.exec(t.slice(a));return i?(e.m=Oe[i[0].toLowerCase()],a+i[0].length):-1},B:function(e,t,a){var i=Ae.exec(t.slice(a));return i?(e.m=we[i[0].toLowerCase()],a+i[0].length):-1},c:function(e,t,n){return l(e,E,t,n)},d:b,e:b,f:N,H:v,I:v,j:x,L:k,m:h,M:S,p:function(e,t,a){var i=Se.exec(t.slice(a));return i?(e.p=Te[i[0].toLowerCase()],a+i[0].length):-1},Q:w,s:C,S:T,u:c,U:u,V:f,w:p,W:m,x:function(e,t,n){return l(e,me,t,n)},X:function(e,t,n){return l(e,_e,t,n)},y:_,Y:g,Z:y,"%":A};return De.x=i(me,De),De.X=i(_e,De),De.c=i(E,De),Pe.x=i(me,Pe),Pe.X=i(_e,Pe),Pe.c=i(E,Pe),{format:function(e){var t=i(e+="",De);return t.toString=function(){return e},t},parse:function(e){var t=r(e+="",n);return t.toString=function(){return e},t},utcFormat:function(e){var t=i(e+="",Pe);return t.toString=function(){return e},t},utcParse:function(e){var t=r(e,a);return t.toString=function(){return e},t}}}function r(e,t,n){var a=0>e?"-":"",i=(a?-e:e)+"",o=i.length;return a+(o<n?Array(n-o+1).join(t)+i:i)}function l(e){return e.replace(he,"\\$&")}function s(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function d(e){for(var t={},a=-1,i=e.length;++a<i;)t[e[a].toLowerCase()]=a;return t}function p(e,t,a){var i=_e.exec(t.slice(a,a+1));return i?(e.w=+i[0],a+i[0].length):-1}function c(e,t,a){var i=_e.exec(t.slice(a,a+1));return i?(e.u=+i[0],a+i[0].length):-1}function u(e,t,a){var i=_e.exec(t.slice(a,a+2));return i?(e.U=+i[0],a+i[0].length):-1}function f(e,t,a){var i=_e.exec(t.slice(a,a+2));return i?(e.V=+i[0],a+i[0].length):-1}function m(e,t,a){var i=_e.exec(t.slice(a,a+2));return i?(e.W=+i[0],a+i[0].length):-1}function g(e,t,a){var i=_e.exec(t.slice(a,a+4));return i?(e.y=+i[0],a+i[0].length):-1}function _(e,t,a){var i=_e.exec(t.slice(a,a+2));return i?(e.y=+i[0]+(68<+i[0]?1900:2e3),a+i[0].length):-1}function y(e,t,a){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),a+i[0].length):-1}function h(e,t,a){var i=_e.exec(t.slice(a,a+2));return i?(e.m=i[0]-1,a+i[0].length):-1}function b(e,t,a){var i=_e.exec(t.slice(a,a+2));return i?(e.d=+i[0],a+i[0].length):-1}function x(e,t,a){var i=_e.exec(t.slice(a,a+3));return i?(e.m=0,e.d=+i[0],a+i[0].length):-1}function v(e,t,a){var i=_e.exec(t.slice(a,a+2));return i?(e.H=+i[0],a+i[0].length):-1}function S(e,t,a){var i=_e.exec(t.slice(a,a+2));return i?(e.M=+i[0],a+i[0].length):-1}function T(e,t,a){var i=_e.exec(t.slice(a,a+2));return i?(e.S=+i[0],a+i[0].length):-1}function k(e,t,a){var i=_e.exec(t.slice(a,a+3));return i?(e.L=+i[0],a+i[0].length):-1}function N(e,t,a){var i=_e.exec(t.slice(a,a+6));return i?(e.L=E(i[0]/1e3),a+i[0].length):-1}function A(e,t,a){var i=ye.exec(t.slice(a,a+1));return i?a+i[0].length:-1}function w(e,t,a){var i=_e.exec(t.slice(a));return i?(e.Q=+i[0],a+i[0].length):-1}function C(e,t,a){var i=_e.exec(t.slice(a));return i?(e.Q=1e3*+i[0],a+i[0].length):-1}function O(e,t){return r(e.getDate(),t,2)}function D(e,t){return r(e.getHours(),t,2)}function P(e,t){return r(e.getHours()%12||12,t,2)}function R(e,n){return r(1+t.timeDay.count(t.timeYear(e),e),n,3)}function I(e,t){return r(e.getMilliseconds(),t,3)}function M(e,t){return I(e,t)+"000"}function F(e,t){return r(e.getMonth()+1,t,2)}function B(e,t){return r(e.getMinutes(),t,2)}function z(e,t){return r(e.getSeconds(),t,2)}function j(e){var t=e.getDay();return 0===t?7:t}function U(e,n){return r(t.timeSunday.count(t.timeYear(e),e),n,2)}function $(e,n){var a=e.getDay();return e=4<=a||0===a?t.timeThursday(e):t.timeThursday.ceil(e),r(t.timeThursday.count(t.timeYear(e),e)+(4===t.timeYear(e).getDay()),n,2)}function W(e){return e.getDay()}function q(e,n){return r(t.timeMonday.count(t.timeYear(e),e),n,2)}function H(e,t){return r(e.getFullYear()%100,t,2)}function Y(e,t){return r(e.getFullYear()%1e4,t,4)}function V(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+r(0|t/60,"0",2)+r(t%60,"0",2)}function G(e,t){return r(e.getUTCDate(),t,2)}function Z(e,t){return r(e.getUTCHours(),t,2)}function X(e,t){return r(e.getUTCHours()%12||12,t,2)}function K(e,n){return r(1+t.utcDay.count(t.utcYear(e),e),n,3)}function J(e,t){return r(e.getUTCMilliseconds(),t,3)}function Q(e,t){return J(e,t)+"000"}function ee(e,t){return r(e.getUTCMonth()+1,t,2)}function te(e,t){return r(e.getUTCMinutes(),t,2)}function ne(e,t){return r(e.getUTCSeconds(),t,2)}function ae(e){var t=e.getUTCDay();return 0===t?7:t}function ie(e,n){return r(t.utcSunday.count(t.utcYear(e),e),n,2)}function oe(e,n){var a=e.getUTCDay();return e=4<=a||0===a?t.utcThursday(e):t.utcThursday.ceil(e),r(t.utcThursday.count(t.utcYear(e),e)+(4===t.utcYear(e).getUTCDay()),n,2)}function re(e){return e.getUTCDay()}function le(e,n){return r(t.utcMonday.count(t.utcYear(e),e),n,2)}function se(e,t){return r(e.getUTCFullYear()%100,t,2)}function de(e,t){return r(e.getUTCFullYear()%1e4,t,4)}function pe(){return"+0000"}function ce(){return"%"}function ue(e){return+e}function fe(e){return E(+e/1e3)}function me(t){return be=i(t),e.timeFormat=be.format,e.timeParse=be.parse,e.utcFormat=be.utcFormat,e.utcParse=be.utcParse,be}var ge={0:"0","-":"",_:" "},_e=/^\s*\d+/,ye=/^%/,he=/[\\^$*+?|[\]().{}]/g,be;me({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var xe="%Y-%m-%dT%H:%M:%S.%LZ",ve=Date.prototype.toISOString?function(e){return e.toISOString()}:e.utcFormat(xe),Se=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:e.utcParse(xe);e.timeFormatDefaultLocale=me,e.timeFormatLocale=i,e.isoFormat=ve,e.isoParse=Se,Object.defineProperty(e,"__esModule",{value:!0})})},{"d3-time":143}],143:[function(e,t,n){(function(e,a){"object"==typeof n&&"undefined"!=typeof t?a(n):"function"==typeof m&&m.amd?m(["exports"],a):a(e.d3=e.d3||{})})(this,function(e){"use strict";function t(e,n,a,r){function l(t){return e(t=new Date(+t)),t}return l.floor=l,l.ceil=function(t){return e(t=new Date(t-1)),n(t,1),e(t),t},l.round=function(e){var t=l(e),n=l.ceil(e);return e-t<n-e?t:n},l.offset=function(e,t){return n(e=new Date(+e),null==t?1:E(t)),e},l.range=function(t,a,i){var o=[],r;if(t=l.ceil(t),i=null==i?1:E(i),!(t<a)||!(0<i))return o;do o.push(r=new Date(+t)),n(t,i),e(t);while(r<t&&t<a);return o},l.filter=function(a){return t(function(t){if(t>=t)for(;e(t),!a(t);)t.setTime(t-1)},function(e,t){if(e>=e)if(0>t)for(;0>=++t;)for(;n(e,-1),!a(e););else for(;0<=--t;)for(;n(e,1),!a(e););})},a&&(l.count=function(t,n){return i.setTime(+t),o.setTime(+n),e(i),e(o),E(a(i,o))},l.every=function(e){return e=E(e),isFinite(e)&&0<e?1<e?l.filter(r?function(t){return 0==r(t)%e}:function(t){return 0==l.count(0,t)%e}):l:null}),l}function n(e){return t(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*d)/u})}function a(e){return t(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/u})}var i=new Date,o=new Date,r=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});r.every=function(e){return e=E(e),isFinite(e)&&0<e?1<e?t(function(t){t.setTime(E(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):r:null};var l=r.range,s=1e3,d=6e4,p=36e5,c=864e5,u=6048e5,f=t(function(e){e.setTime(E(e/s)*s)},function(e,t){e.setTime(+e+t*s)},function(e,t){return(t-e)/s},function(e){return e.getUTCSeconds()}),m=f.range,g=t(function(e){e.setTime(E(e/d)*d)},function(e,t){e.setTime(+e+t*d)},function(e,t){return(t-e)/d},function(e){return e.getMinutes()}),_=g.range,y=t(function(e){var t=e.getTimezoneOffset()*d%p;0>t&&(t+=p),e.setTime(E((+e-t)/p)*p+t)},function(e,t){e.setTime(+e+t*p)},function(e,t){return(t-e)/p},function(e){return e.getHours()}),h=y.range,b=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*d)/c},function(e){return e.getDate()-1}),x=b.range,v=n(0),S=n(1),T=n(2),k=n(3),N=n(4),A=n(5),w=n(6),C=v.range,O=S.range,D=T.range,P=k.range,R=N.range,I=A.range,M=w.range,F=t(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),B=F.range,z=t(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});z.every=function(e){return isFinite(e=E(e))&&0<e?t(function(t){t.setFullYear(E(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var j=z.range,U=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*d)},function(e,t){return(t-e)/d},function(e){return e.getUTCMinutes()}),$=U.range,W=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*p)},function(e,t){return(t-e)/p},function(e){return e.getUTCHours()}),q=W.range,H=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/c},function(e){return e.getUTCDate()-1}),Y=H.range,V=a(0),G=a(1),Z=a(2),X=a(3),K=a(4),J=a(5),Q=a(6),ee=V.range,te=G.range,ne=Z.range,ae=X.range,ie=K.range,oe=J.range,re=Q.range,le=t(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),se=le.range,de=t(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});de.every=function(e){return isFinite(e=E(e))&&0<e?t(function(t){t.setUTCFullYear(E(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var pe=de.range;e.timeInterval=t,e.timeMillisecond=r,e.timeMilliseconds=l,e.utcMillisecond=r,e.utcMilliseconds=l,e.timeSecond=f,e.timeSeconds=m,e.utcSecond=f,e.utcSeconds=m,e.timeMinute=g,e.timeMinutes=_,e.timeHour=y,e.timeHours=h,e.timeDay=b,e.timeDays=x,e.timeWeek=v,e.timeWeeks=C,e.timeSunday=v,e.timeSundays=C,e.timeMonday=S,e.timeMondays=O,e.timeTuesday=T,e.timeTuesdays=D,e.timeWednesday=k,e.timeWednesdays=P,e.timeThursday=N,e.timeThursdays=R,e.timeFriday=A,e.timeFridays=I,e.timeSaturday=w,e.timeSaturdays=M,e.timeMonth=F,e.timeMonths=B,e.timeYear=z,e.timeYears=j,e.utcMinute=U,e.utcMinutes=$,e.utcHour=W,e.utcHours=q,e.utcDay=H,e.utcDays=Y,e.utcWeek=V,e.utcWeeks=ee,e.utcSunday=V,e.utcSundays=ee,e.utcMonday=G,e.utcMondays=te,e.utcTuesday=Z,e.utcTuesdays=ne,e.utcWednesday=X,e.utcWednesdays=ae,e.utcThursday=K,e.utcThursdays=ie,e.utcFriday=J,e.utcFridays=oe,e.utcSaturday=Q,e.utcSaturdays=re,e.utcMonth=le,e.utcMonths=se,e.utcYear=de,e.utcYears=pe,Object.defineProperty(e,"__esModule",{value:!0})})},{}],144:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.fetchREST=n.fetchYAML=n.fetchCSON=n.fetchBSON=n.fetchJSONFiles2=n.fetchJSONFiles=n.fetchJSON=n.arrayBuffer=n.yaml=n.cson=n.bson=n.json=n.status=n.load=void 0;var i=e("babel-runtime/helpers/slicedToArray"),o=a(i),r=e("babel-runtime/core-js/object/entries"),l=a(r),s=e("babel-runtime/core-js/promise"),d=a(s),p=e("cson-parser"),c=a(p),u=e("yamljs"),f=a(u),m=e("bson"),g=a(m),_=new g.default,y=function(e){return 200<=e.status&&300>e.status?d.default.resolve(e):d.default.reject(new Error(e.statusText))},h=function(e){return e.json()},b=function(e){return e.blob().then(function(e){return d.default.resolve(_.deserialize(e))}).catch(function(t){return d.default.reject(t)})},x=function(e){return e.text().then(function(e){return d.default.resolve(c.default.parse(e))}).catch(function(t){return d.default.reject(t)})},v=function(e){return e.text().then(function(e){return d.default.resolve(f.default.parse(e))}).catch(function(t){return d.default.reject(t)})},S=function(e){return e.arrayBuffer()},T=function(e){var t=e.headers.get("content-type");return 0===t.indexOf("application/json")?h(e):0===t.indexOf("text/yaml")?v(e):0===t.indexOf("application/octet-stream")?b(e):d.default.reject(new Error("could not detect type"))},k=function(e){return new d.default(function(t,n){fetch(e).then(y).then(T).then(function(e){t(e)}).catch(function(t){n(t)})})},E=function(e){return new d.default(function(t,n){fetch(e).then(y).then(h).then(function(e){t(e)}).catch(function(t){n(t)})})},N=function(e){return new d.default(function(t,n){fetch(e).then(y).then(x).then(function(e){t(e)}).catch(function(t){n(t)})})},A=function(e){return new d.default(function(t,n){fetch(e).then(y).then(v).then(function(e){t(e)}).catch(function(t){n(t)})})},w=function(e){return new d.default(function(t,n){fetch(e).then(y).then(b).then(function(e){t(e)}).catch(function(t){n(t)})})};n.load=function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,a=n,t;if(null===a)if("string"!=typeof e)a="object";else if(-1!==e.search(/\.ya?ml/))a="yaml";else if(-1!==e.search(/\.json/))a="json";else if(-1!==e.search(/\.bson/))a="bson";else if(-1!==e.search(/\.cson/))a="cson";else try{t=JSON.parse(e,n),a="json_string"}catch(t){a=null}return"object"===a?d.default.resolve(e):"json_string"===a?d.default.resolve(t):"json"===a?E(e,n).then(function(e){return e},function(t){return t}):"yaml"===a?A(e,n).then(function(e){return e},function(t){return t}):"bson"===a?w(e,n).then(function(e){return e},function(t){return t}):"cson"===a?N(e,n).then(function(e){return e},function(t){return t}):null===a?k(e).then(function(e){return e},function(t){return t}):void 0},n.status=y,n.json=h,n.bson=b,n.cson=x,n.yaml=v,n.arrayBuffer=S,n.fetchJSON=E,n.fetchJSONFiles=function(e){return new d.default(function(t,n){var a=[],i=[];e.forEach(function(e){a.push(fetch(e).then(y).then(h).then(function(e){return e}).catch(function(){return i.push(e),null}))}),d.default.all(a).then(function(e){var n=e.filter(function(e){return null!==e});t({jsonFiles:n,errors:i})},function(e){n(e)})})},n.fetchJSONFiles2=function(e,t){return new d.default(function(n,a){var i=[],r=[],s=[];(0,l.default)(e).forEach(function(e){var n=(0,o.default)(e,2),a=n[0],l=n[1];s.push(a),i.push(fetch(t+l).then(y).then(h).then(function(e){return e}).catch(function(){return r.push(l),null}))}),d.default.all(i).then(function(e){var t={};e.forEach(function(e,n){null!==e&&(t[s[n]]=e)}),n({jsonFiles:t,errors:r})},function(e){a(e)})})},n.fetchBSON=w,n.fetchCSON=N,n.fetchYAML=A,n.fetchREST=k},{"babel-runtime/core-js/object/entries":7,"babel-runtime/core-js/promise":8,"babel-runtime/helpers/slicedToArray":12,bson:21,"cson-parser":137,yamljs:605}],145:[function(e,t,n){n.read=function(t,n,a,o,r){var l=8*r-o-1,p=(1<<l)-1,c=p>>1,u=-7,f=a?r-1:0,i=a?-1:1,d=t[n+f],s,e;for(f+=i,s=d&(1<<-u)-1,d>>=-u,u+=l;0<u;s=256*s+t[n+f],f+=i,u-=8);for(e=s&(1<<-u)-1,s>>=-u,u+=o;0<u;e=256*e+t[n+f],f+=i,u-=8);if(0===s)s=1-c;else{if(s===p)return e?NaN:(d?-1:1)*Infinity;e+=g(2,o),s-=c}return(d?-1:1)*e*g(2,s-o)},n.write=function(t,n,a,o,l,p){var u=8*p-l-1,_=(1<<u)-1,y=_>>1,h=23===l?5.960464477539063e-8-6.617444900424222e-24:0,b=o?0:p-1,i=o?1:-1,d=0>n||0===n&&0>1/n?1:0,s,x,m;for(n=T(n),isNaN(n)||n===Infinity?(x=isNaN(n)?1:0,s=_):(s=E(f(n)/r),1>n*(m=g(2,-s))&&(s--,m*=2),n+=1<=s+y?h/m:h*g(2,1-y),2<=n*m&&(s++,m/=2),s+y>=_?(x=0,s=_):1<=s+y?(x=(n*m-1)*g(2,l),s+=y):(x=n*g(2,y-1)*g(2,l),s=0));8<=l;t[a+b]=255&x,b+=i,x/=256,l-=8);for(s=s<<l|x,u+=l;0<u;t[a+b]=255&s,b+=i,s/=256,u-=8);t[a+b-i]|=128*d}},{}],146:[function(e,t){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var a=0;a<e.length;++a)if(e[a]===t)return a;return-1}},{}],147:[function(e,t){var n="undefined"==typeof JSON?e("jsonify"):JSON;t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var i=!("boolean"!=typeof t.cycles)&&t.cycles,l=t.replacer||function(e,t){return t},s=t.cmp&&function(e){return function(t){return function(n,i){var o={key:n,value:t[n]},r={key:i,value:t[i]};return e(o,r)}}}(t.cmp),d=[];return function e(t,p,c,u){var f=r?"\n"+Array(u+1).join(r):"",m=r?": ":":";if(c&&c.toJSON&&"function"==typeof c.toJSON&&(c=c.toJSON()),c=l.call(t,p,c),void 0!==c){if("object"!=typeof c||null===c)return n.stringify(c);if(a(c)){for(var g=[],_=0,y;_<c.length;_++)y=e(c,_,c[_],u+1)||n.stringify(null),g.push(f+r+y);return"["+g.join(",")+f+"]"}if(-1!==d.indexOf(c)){if(i)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else d.push(c);for(var h=o(c).sort(s&&s(c)),g=[],_=0;_<h.length;_++){var p=h[_],b=e(c,p,c[p],u+1);if(b){var x=n.stringify(p)+m+b;g.push(f+r+x)}}return d.splice(d.indexOf(c),1),"{"+g.join(",")+f+"}"}}({"":e},"",e,0)};var a=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var a in e)t.call(e,a)&&n.push(a);return n}},{jsonify:148}],148:[function(e,t,n){n.parse=e("./lib/parse"),n.stringify=e("./lib/stringify")},{"./lib/parse":149,"./lib/stringify":150}],149:[function(e,t){var n={'"':"\"","\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(e){throw{name:"SyntaxError",message:e,at:u,text:g}},o=function(e){return e&&e!==f&&a("Expected '"+e+"' instead of '"+f+"'"),f=g.charAt(u),u+=1,f},i=function(){var e="",t;for("-"===f&&(e="-",o("-"));"0"<=f&&"9">=f;)e+=f,o();if("."===f)for(e+=".";o()&&"0"<=f&&"9">=f;)e+=f;if("e"===f||"E"===f)for(e+=f,o(),("-"===f||"+"===f)&&(e+=f,o());"0"<=f&&"9">=f;)e+=f,o();return t=+e,isFinite(t)?t:void a("Bad number")},r=function(){var e="",t,r,i;if("\""===f)for(;o();){if("\""===f)return o(),e;if("\\"!==f)e+=f;else if(o(),"u"===f){for(i=0,r=0;4>r&&(t=parseInt(o(),16),!!isFinite(t));r+=1)i=16*i+t;e+=d(i)}else if("string"==typeof n[f])e+=n[f];else break}a("Bad string")},l=function(){for(;f&&" ">=f;)o()},s=function(){switch(f){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null;}a("Unexpected '"+f+"'")},p=function(){var e=[];if("["===f){if(o("["),l(),"]"===f)return o("]"),e;for(;f;){if(e.push(m()),l(),"]"===f)return o("]"),e;o(","),l()}}a("Bad array")},c=function(){var e={},t;if("{"===f){if(o("{"),l(),"}"===f)return o("}"),e;for(;f;){if(t=r(),l(),o(":"),Object.hasOwnProperty.call(e,t)&&a("Duplicate key \""+t+"\""),e[t]=m(),l(),"}"===f)return o("}"),e;o(","),l()}}a("Bad object")},u,f,g,m;m=function(){return l(),"{"===f?c():"["===f?p():"\""===f?r():"-"===f?i():"0"<=f&&"9">=f?i():s()},t.exports=function(e,t){var n;return g=e,u=0,f=" ",n=m(),l(),f&&a("Syntax error"),"function"==typeof t?function e(n,a){var i=n[a],o,r;if(i&&"object"==typeof i)for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r=e(i,o),void 0===r?delete i[o]:i[o]=r);return t.call(n,a,i)}({"":n},""):n}},{}],150:[function(e,t){function n(e){return o.lastIndex=0,o.test(e)?"\""+e.replace(o,function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+"\"":"\""+e+"\""}function a(e,t){var o=l,r=t[e],p,i,c,u,f;switch(r&&"object"==typeof r&&"function"==typeof r.toJSON&&(r=r.toJSON(e)),"function"==typeof d&&(r=d.call(t,e,r)),typeof r){case"string":return n(r);case"number":return isFinite(r)?r+"":"null";case"boolean":case"null":return r+"";case"object":if(!r)return"null";if(l+=s,f=[],"[object Array]"===Object.prototype.toString.apply(r)){for(u=r.length,p=0;p<u;p+=1)f[p]=a(p,r)||"null";return c=0===f.length?"[]":l?"[\n"+l+f.join(",\n"+l)+"\n"+o+"]":"["+f.join(",")+"]",l=o,c}if(d&&"object"==typeof d)for(u=d.length,p=0;p<u;p+=1)i=d[p],"string"==typeof i&&(c=a(i,r),c&&f.push(n(i)+(l?": ":":")+c));else for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(c=a(i,r),c&&f.push(n(i)+(l?": ":":")+c));return c=0===f.length?"{}":l?"{\n"+l+f.join(",\n"+l)+"\n"+o+"}":"{"+f.join(",")+"}",l=o,c;}}var i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"":"\\b","	":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':"\\\"","\\":"\\\\"},l,s,d;t.exports=function(e,t,n){var o;if(l="",s="","number"==typeof n)for(o=0;o<n;o+=1)s+=" ";else"string"==typeof n&&(s=n);if(d=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return a("",{"":e})}},{}],151:[function(e,d,_){(function(e,t){"object"==typeof _&&"undefined"!=typeof d?t(_):"function"==typeof m&&m.amd?m(["exports"],t):t(e.L={})})(this,function(e){"use strict";function d(e){var t,n,a,i;for(n=1,a=arguments.length;n<a;n++)for(t in i=arguments[n],i)e[t]=i[t];return e}function m(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var a=n.call(arguments,2);return function(){return e.apply(t,a.length?a.concat(n.call(arguments)):arguments)}}function _(e){return e._leaflet_id=e._leaflet_id||++ht,e._leaflet_id}function y(e,t,n){var a,i,o,r;return r=function(){a=!1,i&&(o.apply(n,i),i=!1)},o=function(){a?i=arguments:(e.apply(n,arguments),setTimeout(r,t),a=!0)},o}function h(e,t,n){var a=t[1],i=t[0],o=a-i;return e===a&&n?e:((e-i)%o+o)%o+i}function b(){return!1}function x(e,t){var n=g(10,t||5);return l(e*n)/n}function v(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function k(e){return v(e).split(/\s+/)}function A(e,t){for(var n in e.hasOwnProperty("options")||(e.options=e.options?yt(e.options):{}),t)e.options[n]=t[n];return e.options}function w(e,t,n){var a=[];for(var o in e)a.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+a.join("&")}function C(e,t){return e.replace(bt,function(e,n){var a=t[n];if(a===void 0)throw new Error("No value provided for variable "+e);else"function"==typeof a&&(a=a(t));return a})}function O(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function D(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}function P(e){var t=+new Date,n=N(0,16-(t-St));return St=t+n,window.setTimeout(e,n)}function R(e,t,n){return n&&Tt===P?void e.call(t):Tt.call(window,m(e,t))}function I(e){e&&kt.call(window,e)}function M(){}function F(e){if(L&&L.Mixin){e=xt(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}function B(e,t,n){this.x=n?l(e):e,this.y=n?l(t):t}function z(e,t,n){return e instanceof B?e:xt(e)?new B(e[0],e[1]):void 0===e||null===e?e:"object"==typeof e&&"x"in e&&"y"in e?new B(e.x,e.y):new B(e,t,n)}function U(e,t){if(e)for(var n=t?[e,t]:e,a=0,i=n.length;a<i;a++)this.extend(n[a])}function j(e,t){return!e||e instanceof U?e:new U(e,t)}function $(e,t){if(e)for(var n=t?[e,t]:e,a=0,i=n.length;a<i;a++)this.extend(n[a])}function W(e,t){return e instanceof $?e:new $(e,t)}function q(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,n!==void 0&&(this.alt=+n)}function H(e,t,n){return e instanceof q?e:xt(e)&&"object"!=typeof e[0]?3===e.length?new q(e[0],e[1],e[2]):2===e.length?new q(e[0],e[1]):null:void 0===e||null===e?e:"object"==typeof e&&"lat"in e?new q(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new q(e,t,n)}function Y(e,t,n,a){return xt(e)?(this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3])):void(this._a=e,this._b=t,this._c=n,this._d=a)}function V(e,t,n,a){return new Y(e,t,n,a)}function G(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Z(e,t){var n="",a,i,o,r,l,s;for(a=0,o=e.length;a<o;a++){for(l=e[a],i=0,r=l.length;i<r;i++)s=l[i],n+=(i?"L":"M")+s.x+" "+s.y;n+=t?rn?"z":"x":""}return n||"M0 0"}function X(e){return 0<=navigator.userAgent.toLowerCase().indexOf(e)}function K(e,t,n,a){return"touchstart"===t?Q(e,n,a):"touchmove"===t?oe(e,n,a):"touchend"===t&&re(e,n,a),this}function J(e,t,n){var a=e["_leaflet_"+t+n];return"touchstart"===t?e.removeEventListener(dn,a,!1):"touchmove"===t?e.removeEventListener(pn,a,!1):"touchend"===t&&(e.removeEventListener(cn,a,!1),e.removeEventListener(un,a,!1)),this}function Q(e,t,n){var a=m(function(n){if("mouse"!==n.pointerType&&n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&n.pointerType!==n.MSPOINTER_TYPE_MOUSE)if(0>fn.indexOf(n.target.tagName))_e(n);else return;ae(n,t)});e["_leaflet_touchstart"+n]=a,e.addEventListener(dn,a,!1),gn||(document.documentElement.addEventListener(dn,ee,!0),document.documentElement.addEventListener(pn,te,!0),document.documentElement.addEventListener(cn,ne,!0),document.documentElement.addEventListener(un,ne,!0),gn=!0)}function ee(t){mn[t.pointerId]=t,_n++}function te(t){mn[t.pointerId]&&(mn[t.pointerId]=t)}function ne(t){delete mn[t.pointerId],_n--}function ae(t,e){for(var n in t.touches=[],mn)t.touches.push(mn[n]);t.changedTouches=[t],e(t)}function oe(e,t,n){var a=function(n){(n.pointerType===n.MSPOINTER_TYPE_MOUSE||"mouse"===n.pointerType)&&0===n.buttons||ae(n,t)};e["_leaflet_touchmove"+n]=a,e.addEventListener(pn,a,!1)}function re(e,t,n){var a=function(n){ae(n,t)};e["_leaflet_touchend"+n]=a,e.addEventListener(cn,a,!1),e.addEventListener(un,a,!1)}function le(e,t,n){function a(t){var e;if(Qt){if(!Mt||"mouse"===t.pointerType)return;e=_n}else e=t.touches.length;if(!(1<e)){var n=Date.now(),a=n-(l||n);s=t.touches?t.touches[0]:t,o=0<a&&a<=r,l=n}}function i(n){if(o&&!s.cancelBubble){if(Qt){if(!Mt||"mouse"===n.pointerType)return;var e={},a,r;for(r in s)a=s[r],e[r]=a&&a.bind?a.bind(s):a;s=e}s.type="dblclick",t(s),l=null}}var o=!1,r=250,l,s;return e[bn+yn+n]=a,e[bn+hn+n]=i,e[bn+"dblclick"+n]=t,e.addEventListener(yn,a,!1),e.addEventListener(hn,i,!1),e.addEventListener("dblclick",t,!1),this}function se(e,t){var n=e[bn+yn+t],a=e[bn+hn+t],i=e[bn+"dblclick"+t];return e.removeEventListener(yn,n,!1),e.removeEventListener(hn,a,!1),Mt||e.removeEventListener("dblclick",i,!1),this}function de(e,t,n,a){if("object"==typeof t)for(var o in t)ce(e,o,t[o],n);else{t=k(t);for(var r=0,i=t.length;r<i;r++)ce(e,t[r],n,a)}return this}function pe(e,t,n,a){if("object"==typeof t)for(var o in t)ue(e,o,t[o],n);else if(t){t=k(t);for(var r=0,i=t.length;r<i;r++)ue(e,t[r],n,a)}else{for(var l in e[xn])ue(e,l,e[xn][l]);delete e[xn]}return this}function ce(t,e,n,a){var i=e+_(n)+(a?"_"+_(a):"");if(t[xn]&&t[xn][i])return this;var o=function(i){return n.call(a||t,i||window.event)},r=o;Qt&&0===e.indexOf("touch")?K(t,e,o,i):en&&"dblclick"===e&&le&&!(Qt&&Ut)?le(t,o,i):"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):"mouseenter"===e||"mouseleave"===e?(o=function(n){n=n||window.event,Se(t,n)&&r(n)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&Bt&&(o=function(t){Te(t,r)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o),t[xn]=t[xn]||{},t[xn][i]=o}function ue(e,t,n,a){var i=t+_(n)+(a?"_"+_(a):""),o=e[xn]&&e[xn][i];return o?void(Qt&&0===t.indexOf("touch")?J(e,t,i):en&&"dblclick"===t&&se?se(e,i):"removeEventListener"in e?"mousewheel"===t?e.removeEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):e.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,o,!1):"detachEvent"in e&&e.detachEvent("on"+t,o),e[xn][i]=null):this}function fe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,ve(t),this}function me(e){return ce(e,"mousewheel",fe),this}function ge(e){return de(e,"mousedown touchstart dblclick",fe),ce(e,"click",xe),this}function _e(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ye(t){return _e(t),fe(t),this}function he(t,e){if(!e)return new B(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new B(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)}function be(t){return Mt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/vn:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&32765>T(t.detail)?20*-t.detail:t.detail?60*(t.detail/-32765):0}function xe(t){Sn[t.type]=!0}function ve(t){var e=Sn[t.type];return Sn[t.type]=!1,e}function Se(t,n){var e=n.relatedTarget;if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(e){return!1}return e!==t}function Te(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,a=Ln&&n-Ln;return a&&100<a&&500>a||t.target._simulatedClick&&!t._simulated?void ye(t):void(Ln=n,e(t))}function ke(e){return"string"==typeof e?document.getElementById(e):e}function Ee(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var a=document.defaultView.getComputedStyle(e,null);n=a?a[t]:null}return"auto"===n?null:n}function Ne(e,t,n){var a=document.createElement(e);return a.className=t||"",n&&n.appendChild(a),a}function Le(e){var t=e.parentNode;t&&t.removeChild(e)}function Ae(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function we(e){var t=e.parentNode;t.lastChild!==e&&t.appendChild(e)}function Ce(e){var t=e.parentNode;t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Oe(e,t){if(e.classList!==void 0)return e.classList.contains(t);var n=Ie(e);return 0<n.length&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function De(e,t){if(e.classList!==void 0)for(var n=k(t),a=0,i=n.length;a<i;a++)e.classList.add(n[a]);else if(!Oe(e,t)){var o=Ie(e);Re(e,(o?o+" ":"")+t)}}function Pe(e,t){e.classList===void 0?Re(e,v((" "+Ie(e)+" ").replace(" "+t+" "," "))):e.classList.remove(t)}function Re(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function Ie(e){return e.className.baseVal===void 0?e.className:e.className.baseVal}function Me(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Fe(e,t)}function Fe(e,t){var n=!1,a="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(a)}catch(n){if(1===t)return}t=l(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+a+"(opacity="+t+")"}function Be(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function ze(e,t,n){var a=t||new B(0,0);e.style[kn]=(Vt?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(n?" scale("+n+")":"")}function je(e,t){e._leaflet_pos=t,Xt?ze(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Ue(e){return e._leaflet_pos||new B(0,0)}function $e(){de(window,"dragstart",_e)}function We(){pe(window,"dragstart",_e)}function qe(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(He(),Fn=e,Bn=e.style.outline,e.style.outline="none",de(window,"keydown",He))}function He(){Fn&&(Fn.style.outline=Bn,Fn=void 0,Bn=void 0,pe(window,"keydown",He))}function Ye(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Xe(e,n),e=Ge(e,n),e}function Ve(e,t,n){return u(tt(e,t,n,!0))}function Ge(e,t){var n=e.length,a=typeof Uint8Array==void 0+""?Array:Uint8Array,o=new a(n);o[0]=o[n-1]=1,Ze(e,o,t,0,n-1);var r=[],l;for(l=0;l<n;l++)o[l]&&r.push(e[l]);return r}function Ze(e,t,n,a,o){var r=0,l,s,i;for(s=a+1;s<=o-1;s++)i=tt(e[s],e[a],e[o],!0),i>r&&(l=s,r=i);r>n&&(t[l]=1,Ze(e,t,n,a,l),Ze(e,t,n,l,o))}function Xe(e,t){for(var n=[e[0]],a=1,i=0,o=e.length;a<o;a++)et(e[a],e[i])>t&&(n.push(e[a]),i=a);return i<o-1&&n.push(e[o-1]),n}function Ke(e,t,n,a,i){var o=a?na:Qe(e,n),r=Qe(t,n),l,s,d;for(na=r;;){if(!(o|r))return[e,t];if(o&r)return!1;l=o||r,s=Je(e,t,l,n,i),d=Qe(s,n),l===o?(e=s,o=d):(t=s,r=d)}}function Je(e,t,n,a,i){var o=t.x-e.x,r=t.y-e.y,l=a.min,s=a.max,d,p;return 8&n?(d=e.x+o*(s.y-e.y)/r,p=s.y):4&n?(d=e.x+o*(l.y-e.y)/r,p=l.y):2&n?(d=s.x,p=e.y+r*(s.x-e.x)/o):1&n&&(d=l.x,p=e.y+r*(l.x-e.x)/o),new B(d,p,i)}function Qe(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function et(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a}function tt(e,n,a,i){var o=n.x,r=n.y,l=a.x-o,s=a.y-r,d=l*l+s*s,p;return 0<d&&(p=((e.x-o)*l+(e.y-r)*s)/d,1<p?(o=a.x,r=a.y):0<p&&(o+=l*p,r+=s*p)),l=e.x-o,s=e.y-r,i?l*l+s*s:new B(o,r)}function nt(e){return!xt(e[0])||"object"!=typeof e[0][0]&&"undefined"!=typeof e[0][0]}function at(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),nt(e)}function it(e,t,n){var o=[1,4,2,8],r,l,i,s,d,a,c,u,f;for(l=0,c=e.length;l<c;l++)e[l]._code=Qe(e[l],t);for(s=0;4>s;s++){for(u=o[s],r=[],(l=0,c=e.length,i=c-1);l<c;i=l++)d=e[l],a=e[i],d._code&u?!(a._code&u)&&(f=Je(a,d,u,t,n),f._code=Qe(f,t),r.push(f)):(a._code&u&&(f=Je(a,d,u,t,n),f._code=Qe(f,t),r.push(f)),r.push(d));e=r}return e}function ot(e,t){var n="Feature"===e.type?e.geometry:e,a=n?n.coordinates:null,o=[],r=t&&t.pointToLayer,l=t&&t.coordsToLatLng||rt,s,d,p,i;if(!a&&!n)return null;switch(n.type){case"Point":return s=l(a),r?r(e,s):new da(s);case"MultiPoint":for(p=0,i=a.length;p<i;p++)s=l(a[p]),o.push(r?r(e,s):new da(s));return new oa(o);case"LineString":case"MultiLineString":return d=lt(a,"LineString"===n.type?0:1,l),new fa(d,t);case"Polygon":case"MultiPolygon":return d=lt(a,"Polygon"===n.type?1:2,l),new ma(d,t);case"GeometryCollection":for(p=0,i=n.geometries.length;p<i;p++){var c=ot({geometry:n.geometries[p],type:"Feature",properties:e.properties},t);c&&o.push(c)}return new oa(o);default:throw new Error("Invalid GeoJSON object.");}}function rt(e){return new q(e[1],e[0],e[2])}function lt(e,t,n){for(var a=[],o=0,i=e.length,r;o<i;o++)r=t?lt(e[o],t-1,n):(n||rt)(e[o]),a.push(r);return a}function st(e,t){return t="number"==typeof t?t:6,void 0===e.alt?[x(e.lng,t),x(e.lat,t)]:[x(e.lng,t),x(e.lat,t),x(e.alt,t)]}function dt(e,t,n,a){for(var o=[],r=0,i=e.length;r<i;r++)o.push(t?dt(e[r],t-1,n,a):st(e[r],a));return!t&&n&&o.push(o[0]),o}function pt(e,t){return e.feature?d({},e.feature,{geometry:t}):ct(t)}function ct(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}function ut(e,t){return new ga(e,t)}function ft(e,t){return new ka(e,t)}function mt(e){return an?new La(e):null}function gt(e){return rn||ln?new Ca(e):null}var _t=Object.freeze;Object.freeze=function(e){return e};var yt=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),ht=0,bt=/\{ *([\w_\-]+) *\}/g,xt=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},vt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",St=0,Tt=window.requestAnimationFrame||D("RequestAnimationFrame")||P,kt=window.cancelAnimationFrame||D("CancelAnimationFrame")||D("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)},Et=(Object.freeze||Object)({freeze:_t,extend:d,create:yt,bind:m,lastId:ht,stamp:_,throttle:y,wrapNum:h,falseFn:b,formatNum:x,trim:v,splitWords:k,setOptions:A,getParamString:w,template:C,isArray:xt,indexOf:O,emptyImageUrl:vt,requestFn:Tt,cancelFn:kt,requestAnimFrame:R,cancelAnimFrame:I});M.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=t.__super__=this.prototype,a=yt(n);for(var o in a.constructor=t,t.prototype=a,this)this.hasOwnProperty(o)&&"prototype"!=o&&"__super__"!=o&&(t[o]=this[o]);return e.statics&&(d(t,e.statics),delete e.statics),e.includes&&(F(e.includes),d.apply(null,[a].concat(e.includes)),delete e.includes),a.options&&(e.options=d(yt(a.options),e.options)),d(a,e),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=a._initHooks.length;e<t;e++)a._initHooks[e].call(this)}},t},M.include=function(e){return d(this.prototype,e),this},M.mergeOptions=function(e){return d(this.prototype.options,e),this},M.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var Nt={on:function(e,t,n){if("object"==typeof e)for(var a in e)this._on(a,e[a],t);else{e=k(e);for(var o=0,i=e.length;o<i;o++)this._on(e[o],t,n)}return this},off:function(e,t,n){if(!e)delete this._events;else if("object"==typeof e)for(var a in e)this._off(a,e[a],t);else{e=k(e);for(var o=0,i=e.length;o<i;o++)this._off(e[o],t,n)}return this},_on:function(e,t,n){this._events=this._events||{};var a=this._events[e];a||(a=[],this._events[e]=a),n===this&&(n=void 0);for(var o={fn:t,ctx:n},r=a,l=0,i=r.length;l<i;l++)if(r[l].fn===t&&r[l].ctx===n)return;r.push(o)},_off:function(e,t,n){var a,o,i;if(this._events&&(a=this._events[e],!!a)){if(!t){for(o=0,i=a.length;o<i;o++)a[o].fn=b;return void delete this._events[e]}if(n===this&&(n=void 0),a)for(o=0,i=a.length;o<i;o++){var r=a[o];if(r.ctx===n&&r.fn===t)return r.fn=b,this._firingCount&&(this._events[e]=a=a.slice()),void a.splice(o,1)}}},fire:function(e,t,n){if(!this.listens(e,n))return this;var a=d({},t,{type:e,target:this});if(this._events){var o=this._events[e];if(o){this._firingCount=this._firingCount+1||1;for(var r=0,i=o.length,s;r<i;r++)s=o[r],s.fn.call(s.ctx||this,a);this._firingCount--}}return n&&this._propagateEvent(a),this},listens:function(e,t){var n=this._events&&this._events[e];if(n&&n.length)return!0;if(t)for(var a in this._eventParents)if(this._eventParents[a].listens(e,t))return!0;return!1},once:function(e,t,n){if("object"==typeof e){for(var a in e)this.once(a,e[a],t);return this}var i=m(function(){this.off(e,t,n).off(e,i,n)},this);return this.on(e,t,n).on(e,i,n)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[_(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[_(e)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,d({layer:t.target},t),!0)}};Nt.addEventListener=Nt.on,Nt.removeEventListener=Nt.clearAllEventListeners=Nt.off,Nt.addOneTimeEventListener=Nt.once,Nt.fireEvent=Nt.fire,Nt.hasEventListeners=Nt.listens;var Lt=M.extend(Nt);B.prototype={clone:function(){return new B(this.x,this.y)},add:function(e){return this.clone()._add(z(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(z(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new B(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new B(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=l(this.x),this.y=l(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=E(this.x),this.y=E(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=p(this.x),this.y=p(this.y),this},distanceTo:function(e){e=z(e);var t=e.x-this.x,n=e.y-this.y;return u(t*t+n*n)},equals:function(e){return e=z(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=z(e),T(e.x)<=T(this.x)&&T(e.y)<=T(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}},U.prototype={extend:function(e){return e=z(e),this.min||this.max?(this.min.x=S(e.x,this.min.x),this.max.x=N(e.x,this.max.x),this.min.y=S(e.y,this.min.y),this.max.y=N(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new B(this.min.x,this.max.y)},getTopRight:function(){return new B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return e="number"==typeof e[0]||e instanceof B?z(e):j(e),e instanceof U?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=j(e);var t=this.min,n=this.max,a=e.min,i=e.max,o=i.x>=t.x&&a.x<=n.x,r=i.y>=t.y&&a.y<=n.y;return o&&r},overlaps:function(e){e=j(e);var t=this.min,n=this.max,a=e.min,i=e.max,o=i.x>t.x&&a.x<n.x,r=i.y>t.y&&a.y<n.y;return o&&r},isValid:function(){return!!(this.min&&this.max)}},$.prototype={extend:function(e){var t=this._southWest,n=this._northEast,a,i;if(e instanceof q)a=e,i=e;else{if(!(e instanceof $))return e?this.extend(H(e)||W(e)):this;if(a=e._southWest,i=e._northEast,!a||!i)return this}return t||n?(t.lat=S(a.lat,t.lat),t.lng=S(a.lng,t.lng),n.lat=N(i.lat,n.lat),n.lng=N(i.lng,n.lng)):(this._southWest=new q(a.lat,a.lng),this._northEast=new q(i.lat,i.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,a=T(t.lat-n.lat)*e,i=T(t.lng-n.lng)*e;return new $(new q(t.lat-a,t.lng-i),new q(n.lat+a,n.lng+i))},getCenter:function(){return new q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new q(this.getNorth(),this.getWest())},getSouthEast:function(){return new q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof q||"lat"in e?H(e):W(e);var t=this._southWest,n=this._northEast,a,i;return e instanceof $?(a=e.getSouthWest(),i=e.getNorthEast()):a=i=e,a.lat>=t.lat&&i.lat<=n.lat&&a.lng>=t.lng&&i.lng<=n.lng},intersects:function(e){e=W(e);var t=this._southWest,n=this._northEast,a=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>=t.lat&&a.lat<=n.lat,r=i.lng>=t.lng&&a.lng<=n.lng;return o&&r},overlaps:function(e){e=W(e);var t=this._southWest,n=this._northEast,a=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>t.lat&&a.lat<n.lat,r=i.lng>t.lng&&a.lng<n.lng;return o&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=W(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!!(this._southWest&&this._northEast)}},q.prototype={equals:function(e,t){if(!e)return!1;e=H(e);var n=N(T(this.lat-e.lat),T(this.lng-e.lng));return n<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+x(this.lat,e)+", "+x(this.lng,e)+")"},distanceTo:function(e){return wt.distance(this,H(e))},wrap:function(){return wt.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/c(o/180*this.lat);return W([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new q(this.lat,this.lng,this.alt)}};var At={latLngToPoint:function(e,t){var n=this.projection.project(e),a=this.scale(t);return this.transformation._transform(n,a)},pointToLatLng:function(e,t){var n=this.scale(t),a=this.transformation.untransform(e,n);return this.projection.unproject(a)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*g(2,e)},zoom:function(e){return f(e/256)/r},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e),a=this.transformation.transform(t.min,n),i=this.transformation.transform(t.max,n);return new U(a,i)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?h(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?h(e.lat,this.wrapLat,!0):e.lat,a=e.alt;return new q(n,t,a)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),a=t.lat-n.lat,i=t.lng-n.lng;if(0==a&&0==i)return e;var o=e.getSouthWest(),r=e.getNorthEast(),l=new q(o.lat-a,o.lng-i),s=new q(r.lat-a,r.lng-i);return new $(l,s)}},wt=d({},At,{wrapLng:[-180,180],R:6371000,distance:function(e,t){var n=o/180,r=e.lat*n,l=t.lat*n,d=s(r)*s(l)+c(r)*c(l)*c((t.lng-e.lng)*n);return this.R*i(S(d,1))}}),Ct={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=o/180,n=this.MAX_LATITUDE,a=N(S(n,e.lat),-n),i=s(a*t);return new B(this.R*e.lng*t,this.R*f((1+i)/(1-i))/2)},unproject:function(e){var t=180/o;return new q((2*n(a(e.y/this.R))-o/2)*t,e.x*t/this.R)},bounds:function(){var e=6378137*o;return new U([-e,-e],[e,e])}()};Y.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new B((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var Ot=d({},wt,{code:"EPSG:3857",projection:Ct,transformation:function(){var e=0.5/(o*Ct.R);return V(e,0.5,-e,0.5)}()}),Dt=d({},Ot,{code:"EPSG:900913"}),Pt=document.documentElement.style,Rt="ActiveXObject"in window,It=Rt&&!document.addEventListener,Mt="msLaunchUri"in navigator&&!("documentMode"in document),Ft=X("webkit"),Bt=X("android"),zt=X("android 2")||X("android 3"),jt=!!window.opera,Ut=X("chrome"),$t=X("gecko")&&!Ft&&!jt&&!Rt,Wt=!Ut&&X("safari"),qt=X("phantom"),Ht="OTransition"in Pt,Yt=0===navigator.platform.indexOf("Win"),Vt=Rt&&"transition"in Pt,Gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zt,Zt="MozPerspective"in Pt,Xt=!window.L_DISABLE_3D&&(Vt||Gt||Zt)&&!Ht&&!qt,Kt="undefined"!=typeof orientation||X("mobile"),Jt=!window.PointerEvent&&window.MSPointerEvent,Qt=!!(window.PointerEvent||Jt),en=!window.L_NO_TOUCH&&(Qt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),tn=Kt&&jt,nn=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),an=function(){return!!document.createElement("canvas").getContext}(),rn=!!(document.createElementNS&&G("svg").createSVGRect),ln=!rn&&function(){try{var e=document.createElement("div");e.innerHTML="<v:shape adj=\"1\"/>";var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(t){return!1}}(),sn=(Object.freeze||Object)({ie:Rt,ielt9:It,edge:Mt,webkit:Ft,android:Bt,android23:zt,opera:jt,chrome:Ut,gecko:$t,safari:Wt,phantom:qt,opera12:Ht,win:Yt,ie3d:Vt,webkit3d:Gt,gecko3d:Zt,any3d:Xt,mobile:Kt,mobileWebkit:Kt&&Ft,mobileWebkit3d:Kt&&Gt,msPointer:Jt,pointer:Qt,touch:en,mobileOpera:tn,mobileGecko:Kt&&$t,retina:nn,canvas:an,svg:rn,vml:ln}),dn=Jt?"MSPointerDown":"pointerdown",pn=Jt?"MSPointerMove":"pointermove",cn=Jt?"MSPointerUp":"pointerup",un=Jt?"MSPointerCancel":"pointercancel",fn=["INPUT","SELECT","OPTION"],mn={},gn=!1,_n=0,yn=Jt?"MSPointerDown":Qt?"pointerdown":"touchstart",hn=Jt?"MSPointerUp":Qt?"pointerup":"touchend",bn="_leaflet_",xn="_leaflet_events",vn=Yt&&Ut?2*window.devicePixelRatio:$t?window.devicePixelRatio:1,Sn={},Tn=(Object.freeze||Object)({on:de,off:pe,stopPropagation:fe,disableScrollPropagation:me,disableClickPropagation:ge,preventDefault:_e,stop:ye,getMousePosition:he,getWheelDelta:be,fakeStop:xe,skipped:ve,isExternalTarget:Se,addListener:de,removeListener:pe}),kn=Be(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),En=Be(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Nn="webkitTransition"===En||"OTransition"===En?En+"End":"transitionend",Ln,An,wn,Cn;if("onselectstart"in document)An=function(){de(window,"selectstart",_e)},wn=function(){pe(window,"selectstart",_e)};else{var On=Be(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);An=function(){if(On){var e=document.documentElement.style;Cn=e[On],e[On]="none"}},wn=function(){On&&(document.documentElement.style[On]=Cn,Cn=void 0)}}var Dn=(Object.freeze||Object)({TRANSFORM:kn,TRANSITION:En,TRANSITION_END:Nn,get:ke,getStyle:Ee,create:Ne,remove:Le,empty:Ae,toFront:we,toBack:Ce,hasClass:Oe,addClass:De,removeClass:Pe,setClass:Re,getClass:Ie,setOpacity:Me,testProp:Be,setTransform:ze,setPosition:je,getPosition:Ue,disableTextSelection:An,enableTextSelection:wn,disableImageDrag:$e,enableImageDrag:We,preventOutline:qe,restoreOutline:He}),Pn=Lt.extend({run:function(e,t,n,a){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||0.25,this._easeOutPower=1/N(a||0.5,0.2),this._startPos=Ue(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),je(this._el,n),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-g(1-e,this._easeOutPower)}}),Rn=Lt.extend({options:{crs:Ot,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=A(this,t),this._initContainer(e),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(H(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=En&&Xt&&!tn&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),de(this._proxy,Nn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,n){if(t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(H(e),t,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n){void 0!==n.animate&&(n.zoom=d({animate:n.animate},n.zoom),n.pan=d({animate:n.animate,duration:n.duration},n.pan));var a=this._zoom===t?this._tryAnimatedPan(e,n.pan):this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Xt?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Xt?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var a=this.getZoomScale(t),i=this.getSize().divideBy(2),o=e instanceof B?e:this.latLngToContainerPoint(e),r=o.subtract(i).multiplyBy(1-1/a),l=this.containerPointToLatLng(i.add(r));return this.setView(l,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():W(e);var n=z(t.paddingTopLeft||t.padding||[0,0]),a=z(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(a));if(i="number"==typeof t.maxZoom?S(t.maxZoom,i):i,i===Infinity)return{center:e.getCenter(),zoom:i};var o=a.subtract(n).divideBy(2),r=this.project(e.getSouthWest(),i),l=this.project(e.getNorthEast(),i),s=this.unproject(r.add(l).divideBy(2).add(o),i);return{center:s,zoom:i}},fitBounds:function(e,t){if(e=W(e),!e.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=z(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Pn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){De(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||0.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,n,t){function i(e){var t=e?-1:1,n=e?v:x,a=(v*v-x*x+t*k*k*T*T)/(2*n*k*T),i=u(a*a+1)-a,o=1e-9>i?-18:f(i);return o}function o(e){return(a(e)-a(-e))/2}function r(e){return(a(e)+a(-e))/2}function l(e){return o(e)/r(e)}function d(e){return x*(r(E)/r(E+b*e))}function p(e){return x*(r(E)*l(E+b*e)-o(E))/k}function c(e){return 1-g(1-e,1.5)}function m(){var a=(Date.now()-A)/S,t=c(a)*w;1>=a?(this._flyToFrame=R(m,this),this._move(this.unproject(_.add(y.subtract(_).multiplyBy(p(t)/T)),h),this.getScaleZoom(x/d(t),h),{flyTo:!0})):this._move(e,n)._moveEnd(!0)}if(t=t||{},!1===t.animate||!Xt)return this.setView(e,n,t);this._stop();var _=this.project(this.getCenter()),y=this.project(e),s=this.getSize(),h=this._zoom;e=H(e),n=void 0===n?h:n;var x=N(s.x,s.y),v=x*this.getZoomScale(h,n),T=y.distanceTo(_)||1,b=1.42,k=b*b,E=i(0),A=Date.now(),w=(i(1)-E)/b,S=t.duration?1e3*t.duration:0.8*(1e3*w);return this._moveStart(!0),m.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return(e=W(e),!e.isValid())?(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds)):(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){return this.options.minZoom=e,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(e):this},setMaxZoom:function(e){return this.options.maxZoom=e,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),a=this._limitCenter(n,this._zoom,W(e));return n.equals(a)||this.panTo(a,t),this._enforcingBounds=!1,this},invalidateSize:function(e){if(!this._loaded)return this;e=d({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),a=t.divideBy(2).round(),i=n.divideBy(2).round(),o=a.subtract(i);return o.x||o.y?(e.animate&&e.pan?this.panBy(o):(e.pan&&this._rawPanBy(o),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=d({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=m(this._handleGeolocationResponse,this),n=m(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,n=e.coords.longitude,a=new q(t,n),o=a.toBounds(e.coords.accuracy),r=this._locateOptions;if(r.setView){var l=this.getBoundsZoom(o);this.setView(a,r.maxZoom?S(l,r.maxZoom):l)}var s={latlng:a,bounds:o,timestamp:e.timestamp};for(var d in e.coords)"number"==typeof e.coords[d]&&(s[d]=e.coords[d]);this.fire("locationfound",s)},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}Le(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var e in this._layers)this._layers[e].remove();for(e in this._panes)Le(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),a=Ne("div",n,t||this._mapPane);return e&&(this._panes[e]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new $(t,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=W(e),n=z(n||[0,0]);var a=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),r=e.getNorthWest(),s=e.getSouthEast(),d=this.getSize().subtract(n),c=j(this.project(s,a),this.project(r,a)).getSize(),u=Xt?this.options.zoomSnap:1,f=d.x/c.x,m=d.y/c.y,g=t?N(f,m):S(f,m);return a=this.getScaleZoom(g,a),u&&(a=l(a/(u/100))*(u/100),a=t?p(a/u)*u:E(a/u)*u),N(i,S(o,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new U(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=t===void 0?this._zoom:t;var a=n.zoom(e*n.scale(t));return isNaN(a)?Infinity:a},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(H(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(z(e),t)},layerPointToLatLng:function(e){var t=z(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(H(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(H(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(W(e))},distance:function(e,t){return this.options.crs.distance(H(e),H(t))},containerPointToLayerPoint:function(e){return z(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return z(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(z(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(H(e)))},mouseEventToContainerPoint:function(t){return he(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(e){var t=this._container=ke(e);if(!t)throw new Error("Map container not found.");else if(t._leaflet_id)throw new Error("Map container is already initialized.");de(t,"scroll",this._onScroll,this),this._containerId=_(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Xt,De(e,"leaflet-container"+(en?" leaflet-touch":"")+(nn?" leaflet-retina":"")+(It?" leaflet-oldie":"")+(Wt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=Ee(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),je(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(De(e.markerPane,"leaflet-zoom-hide"),De(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){je(this._mapPane,new B(0,0));var n=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var a=this._zoom!==t;this._moveStart(a)._move(e,t)._moveEnd(a),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(e){return e&&this.fire("zoomstart"),this.fire("movestart")},_move:function(e,t,n){void 0===t&&(t=this._zoom);var a=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),(a||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){je(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[_(this._container)]=this;var t=e?pe:de;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Xt&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();N(T(e.x),T(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n=[],a="mouseout"===e||"mouseover"===e,i=t.target||t.srcElement,o=!1,r;i;){if(r=this._targets[_(i)],r&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(r)){o=!0;break}if(r&&r.listens(e,!0)){if(a&&!Se(i,t))break;if(n.push(r),a)break}if(i===this._container)break;i=i.parentNode}return n.length||o||a||!Se(i,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!ve(t)){var e=t.type;("mousedown"===e||"keypress"===e)&&qe(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,a){if("click"===t.type){var o=d({},t);o.type="preclick",this._fireDOMEvent(o,o.type,a)}if(!t._stopped&&(a=(a||[]).concat(this._findEventTargets(t,n)),!!a.length)){var r=a[0];"contextmenu"===n&&r.listens(n,!0)&&_e(t);var l={originalEvent:t};if("keypress"!==t.type){var s=r.options&&"icon"in r.options;l.containerPoint=s?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=s?r.getLatLng():this.layerPointToLatLng(l.layerPoint)}for(var p=0;p<a.length;p++)if(a[p].fire(n,l,!0),l.originalEvent._stopped||!1===a[p].options.bubblingMouseEvents&&-1!==O(this._mouseEvents,n))return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Ue(this._mapPane)||new B(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var n=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var a=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(a)},_latLngBoundsToNewLayerBounds:function(e,t,n){var a=this._getNewPixelOrigin(n,t);return j([this.project(e.getSouthWest(),t)._subtract(a),this.project(e.getNorthWest(),t)._subtract(a),this.project(e.getSouthEast(),t)._subtract(a),this.project(e.getNorthEast(),t)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var a=this.project(e,t),i=this.getSize().divideBy(2),o=new U(a.subtract(i),a.add(i)),r=this._getBoundsOffset(o,n,t);return r.round().equals([0,0])?e:this.unproject(a.add(r),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),a=new U(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(a,t))},_getBoundsOffset:function(e,t,n){var a=j(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=a.min.subtract(e.min),o=a.max.subtract(e.max),r=this._rebound(i.x,-o.x),l=this._rebound(i.y,-o.y);return new B(r,l)},_rebound:function(e,t){return 0<e+t?l(e-t)/2:N(0,p(e))-N(0,E(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),a=Xt?this.options.zoomSnap:1;return a&&(e=l(e/a)*a),N(t,S(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Pe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._floor();return(!0===(t&&t.animate)||this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var e=kn,n=this._proxy.style[e];ze(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),t=this.getZoom();ze(this._proxy,this.project(e,t),this.getZoomScale(t,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Le(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||T(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/a);return(!0===n.animate||this.getSize().contains(i))&&(R(function(){this._moveStart(!0)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,a){n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,De(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:a}),setTimeout(m(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(Pe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),R(function(){this._moveEnd(!0)},this))}}),In=M.extend({options:{position:"topright"},initialize:function(e){A(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),a=e._controlCorners[n];return De(t,"leaflet-control"),-1===n.indexOf("bottom")?a.appendChild(t):a.insertBefore(t,a.firstChild),this},remove:function(){return this._map?(Le(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),Mn=function(e){return new In(e)},Fn,Bn;Rn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){function e(e,i){t[e+i]=Ne("div",n+e+" "+n+i,a)}var t=this._controlCorners={},n="leaflet-",a=this._controlContainer=Ne("div",n+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)Le(this._controlCorners[e]);Le(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zn=In.extend({options:{collapsed:!0,position:"topright",// If `true`, the control will assign zIndexes in increasing order to all of its layers so that the order is preserved when switching them on/off.
autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,a){return n<a?-1:a<n?1:0}},initialize:function(e,t,n){for(var a in A(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[a],a);for(a in t)this._addLayer(t[a],a,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return In.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(_(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){De(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._form.clientHeight?(De(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=e+"px"):Pe(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Pe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=Ne("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),ge(t),me(t);var a=this._form=Ne("form",e+"-list");n&&(this._map.on("click",this.collapse,this),!Bt&&de(t,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=Ne("a",e+"-toggle",t);i.href="#",i.title="Layers",en?(de(i,"click",ye),de(i,"click",this.expand,this)):de(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=Ne("div",e+"-base",a),this._separator=Ne("div",e+"-separator",a),this._overlaysList=Ne("div",e+"-overlays",a),t.appendChild(a)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&_(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(m(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ae(this._baseLayersList),Ae(this._overlaysList),this._layerControlInputs=[];var e=0,t,n,a,i;for(a=0;a<this._layers.length;a++)i=this._layers[a],this._addItem(i),n=n||i.overlay,t=t||!i.overlay,e+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<e,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=n&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(_(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(e,t){var n="<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\""+e+"\""+(t?" checked=\"checked\"":"")+"/>",a=document.createElement("div");return a.innerHTML=n,a.firstChild},_addItem:function(e){var t=document.createElement("label"),n=this._map.hasLayer(e.layer),a;e.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=n):a=this._createRadioElement("leaflet-base-layers",n),this._layerControlInputs.push(a),a.layerId=_(e.layer),de(a,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+e.name;var o=document.createElement("div");t.appendChild(o),o.appendChild(a),o.appendChild(i);var r=e.overlay?this._overlaysList:this._baseLayersList;return r.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){var e=this._layerControlInputs,t=[],n=[],a,o;this._handlingClick=!0;for(var r=e.length-1;0<=r;r--)a=e[r],o=this._getLayer(a.layerId).layer,a.checked?t.push(o):!a.checked&&n.push(o);for(r=0;r<n.length;r++)this._map.hasLayer(n[r])&&this._map.removeLayer(n[r]);for(r=0;r<t.length;r++)this._map.hasLayer(t[r])||this._map.addLayer(t[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t=this._map.getZoom(),n=e.length-1,a,i;0<=n;n--)a=e[n],i=this._getLayer(a.layerId).layer,a.disabled=void 0!==i.options.minZoom&&t<i.options.minZoom||void 0!==i.options.maxZoom&&t>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),jn=In.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=Ne("div",t+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(e,t,n,a,i){var o=Ne("a",n,a);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),ge(o),de(o,"click",ye),de(o,"click",i,this),de(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";Pe(this._zoomInButton,t),Pe(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&De(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&De(this._zoomInButton,t)}});Rn.mergeOptions({zoomControl:!0}),Rn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new jn,this.addControl(this.zoomControl))});var Un=In.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=Ne("div",t),a=this.options;return this._addScales(a,t+"-line",n),e.on(a.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=Ne("div",t,n)),e.imperial&&(this._iScale=Ne("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=1e3>t?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t=3.2808399*e,n,a,i;5280<t?(n=t/5280,a=this._getRoundNum(n),this._updateScale(this._iScale,a+" mi",a/n)):(i=this._getRoundNum(t),this._updateScale(this._iScale,i+" ft",i/t))},_updateScale:function(e,t,n){e.style.width=l(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=g(10,(E(e)+"").length-1),n=e/t;return n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1,t*n}}),$n=In.extend({options:{position:"bottomright",prefix:"<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>"},initialize:function(e){A(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),ge(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}}});Rn.mergeOptions({attributionControl:!0}),Rn.addInitHook(function(){this.options.attributionControl&&new $n().addTo(this)});In.Layers=zn,In.Zoom=jn,In.Scale=Un,In.Attribution=$n,Mn.layers=function(e,t,n){return new zn(e,t,n)},Mn.zoom=function(e){return new jn(e)},Mn.scale=function(e){return new Un(e)},Mn.attribution=function(e){return new $n(e)};var Wn=M.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),qn=en?"touchstart mousedown":"mousedown",Hn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Yn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Vn=Lt.extend({options:{clickTolerance:3},initialize:function(e,t,n,a){A(this,a),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(de(this._dragStartTarget,qn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vn._dragging===this&&this.finishDrag(),pe(this._dragStartTarget,qn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!Oe(this._element,"leaflet-zoom-anim"))&&!(Vn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(Vn._dragging=this,this._preventOutline&&qe(this._element),$e(),An(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new B(e.clientX,e.clientY),de(document,Yn[t.type],this._onMove,this),de(document,Hn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&1<t.touches.length)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new B(e.clientX,e.clientY),a=n.subtract(this._startPoint);(a.x||a.y)&&!(T(a.x)+T(a.y)<this.options.clickTolerance)&&(_e(t),!this._moved&&(this.fire("dragstart"),this._moved=!0,this._startPos=Ue(this._element).subtract(a),De(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),De(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,I(this._animRequest),this._lastEvent=t,this._animRequest=R(this._updatePosition,this,!0))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),je(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){t._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){for(var e in Pe(document.body,"leaflet-dragging"),this._lastTarget&&(Pe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yn)pe(document,Yn[e],this._onMove,this),pe(document,Hn[e],this._onUp,this);We(),wn(),this._moved&&this._moving&&(I(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Vn._dragging=!1}}),Gn=(Object.freeze||Object)({simplify:Ye,pointToSegmentDistance:Ve,closestPointOnSegment:function(e,t,n){return tt(e,t,n)},clipSegment:Ke,_getEdgeIntersection:Je,_getBitCode:Qe,_sqClosestPointOnSegment:tt,isFlat:nt,_flat:at}),Zn=(Object.freeze||Object)({clipPolygon:it}),Xn={project:function(e){return new B(e.lng,e.lat)},unproject:function(e){return new q(e.y,e.x)},bounds:new U([-180,-90],[180,90])},Kn={R:6378137,R_MINOR:6356752.314245179,bounds:new U([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(n){var a=o/180,i=this.R,l=n.lat*a,d=this.R_MINOR/i,p=u(1-d*d),e=p*s(l),c=t(o/4-l/2)/g((1-e)/(1+e),p/2);return l=-i*f(N(c,1e-10)),new B(n.lng*a*i,l)},unproject:function(t){for(var l=180/o,d=this.R,r=this.R_MINOR/d,p=u(1-r*r),e=a(-t.y/d),c=o/2-2*n(e),f=0,i=0.1,m;15>f&&1e-7<T(i);f++)m=p*s(c),m=g((1-m)/(1+m),p/2),i=o/2-2*n(e*m)-c,c+=i;return new q(c*l,t.x*l/d)}},Jn=(Object.freeze||Object)({LonLat:Xn,Mercator:Kn,SphericalMercator:Ct}),Qn=d({},wt,{code:"EPSG:3395",projection:Kn,transformation:function(){var e=0.5/(o*Kn.R);return V(e,0.5,-e,0.5)}()}),ea=d({},wt,{code:"EPSG:4326",projection:Xn,transformation:V(1/180,1,-1/180,0.5)}),ta=d({},At,{projection:Xn,transformation:V(1,0,-1,0),scale:function(e){return g(2,e)},zoom:function(e){return f(e)/r},distance:function(e,t){var n=t.lng-e.lng,a=t.lat-e.lat;return u(n*n+a*a)},infinite:!0}),na;At.Earth=wt,At.EPSG3395=Qn,At.EPSG3857=Ot,At.EPSG900913=Dt,At.EPSG4326=ea,At.Simple=ta;var aa=Lt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[_(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[_(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Rn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=_(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=_(e);return this._layers[t]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&_(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?xt(e)?e:[e]:[];for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[_(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=_(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=Infinity,t=-Infinity,n=this._getZoomSpan();for(var a in this._zoomBoundLayers){var i=this._zoomBoundLayers[a].options;e=i.minZoom===void 0?e:S(e,i.minZoom),t=i.maxZoom===void 0?t:N(t,i.maxZoom)}this._layersMaxZoom=t===-Infinity?void 0:t,this._layersMinZoom=e===Infinity?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ia=aa.extend({initialize:function(e){this._layers={};var t,n;if(e)for(t=0,n=e.length;t<n;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){for(var e in this._layers)this.removeLayer(this._layers[e]);return this},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),n,a;for(n in this._layers)a=this._layers[n],a[e]&&a[e].apply(a,t);return this},onAdd:function(e){for(var t in this._layers)e.addLayer(this._layers[t])},onRemove:function(e){for(var t in this._layers)e.removeLayer(this._layers[t])},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return _(e)}}),oa=ia.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),ia.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),ia.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new $;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),ra=M.extend({initialize:function(e){A(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(a,e),a},_setIconStyles:function(e,t){var n=this.options,a=n[t+"Size"];"number"==typeof a&&(a=[a,a]);var i=z(a),o=z("shadow"===t&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return nn&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),la=ra.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return la.imagePath||(la.imagePath=this._detectIconPath()),(this.options.imagePath||la.imagePath)+ra.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=Ne("div","leaflet-default-icon-path",document.body),t=Ee(e,"background-image")||Ee(e,"backgroundImage");return document.body.removeChild(e),t=null===t||0!==t.indexOf("url")?"":t.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""),t}}),sa=Wn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Vn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),De(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Pe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,a=Ue(e._icon),i=e._map.layerPointToLatLng(a);n&&je(n,a),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),da=aa.extend({options:{icon:new la,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(e,t){A(this,t),this._latlng=H(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=H(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),a=!1;n!==this._icon&&(this._icon&&this._removeIcon(),a=!0,e.title&&(n.title=e.title),e.alt&&(n.alt=e.alt)),De(n,t),e.keyboard&&(n.tabIndex="0"),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=e.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(De(i,t),i.alt=""),this._shadow=i,1>e.opacity&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Le(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Le(this._shadow),this._shadow=null},_setPos:function(e){je(this._icon,e),this._shadow&&je(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(De(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sa)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sa(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;Me(this._icon,e),this._shadow&&Me(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),pa=aa.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:0.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return A(this,e),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(en?10:0)}}),ca=pa.extend({options:{fill:!0,radius:10},initialize:function(e,t){A(this,t),this._latlng=H(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=H(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return pa.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),a=[e+n,t+n];this._pxBounds=new U(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),ua=ca.extend({initialize:function(e,t,n){if("number"==typeof t&&(t=d({},n,{radius:t})),A(this,t),this._latlng=H(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new $(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:pa.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,a=n.options.crs;if(a.distance===wt.distance){var r=o/180,d=this._mRadius/wt.R/r,u=n.project([t+d,e]),f=n.project([t-d,e]),m=u.add(f).divideBy(2),p=n.unproject(m).lat,g=i((c(d*r)-s(t*r)*s(p*r))/(c(t*r)*c(p*r)))/r;(isNaN(g)||0==g)&&(g=d/c(o/180*t)),this._point=m.subtract(n.getPixelOrigin()),this._radius=isNaN(g)?0:N(l(m.x-n.project([p,e-g]).x),1),this._radiusY=N(l(m.y-u.y),1)}else{var _=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(_).x}this._updateBounds()}}),fa=pa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){A(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=Infinity,n=null,a=tt,o=0,r=this._parts.length,l,s,d;o<r;o++){d=this._parts[o];for(var p=1,i=d.length;p<i;p++){l=d[p-1],s=d[p];var c=a(e,l,s,!0);c<t&&(t=c,n=a(e,l,s))}}return n&&(n.distance=u(t)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e=this._rings[0],t=e.length,n,a,i,o,r,l,s;if(!t)return null;for(n=0,a=0;n<t-1;n++)a+=e[n].distanceTo(e[n+1])/2;if(0===a)return this._map.layerPointToLatLng(e[0]);for(n=0,o=0;n<t-1;n++)if(r=e[n],l=e[n+1],i=r.distanceTo(l),o+=i,o>a)return s=(o-a)/i,this._map.layerPointToLatLng([l.x-s*(l.x-r.x),l.y-s*(l.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=H(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new $,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return nt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=nt(e),a=0,i=e.length;a<i;a++)n?(t[a]=H(e[a]),this._bounds.extend(t[a])):t[a]=this._convertLatLngs(e[a]);return t},_project:function(){var e=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e);var t=this._clickTolerance(),n=new B(t,t);this._bounds.isValid()&&e.isValid()&&(e.min._subtract(n),e.max._add(n),this._pxBounds=e)},_projectLatlngs:function(e,t,n){var a=e[0]instanceof q,o=e.length,r,i;if(a){for(i=[],r=0;r<o;r++)i[r]=this._map.latLngToLayerPoint(e[r]),n.extend(i[r]);t.push(i)}else for(r=0;r<o;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return void(this._parts=this._rings);var t=this._parts,n,a,i,o,r,l,s;for(n=0,i=0,o=this._rings.length;n<o;n++)for(s=this._rings[n],a=0,r=s.length;a<r-1;a++)(l=Ke(s[a],s[a+1],e,a,!0),!!l)&&(t[i]=t[i]||[],t[i].push(l[0]),(l[1]!==s[a+1]||a===r-2)&&(t[i].push(l[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,a=e.length;n<a;n++)e[n]=Ye(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n=this._clickTolerance(),a,i,o,r,l,s;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(a=0,r=this._parts.length;a<r;a++)for(s=this._parts[a],i=0,l=s.length,o=l-1;i<l;o=i++)if((t||0!==i)&&Ve(e,s[o],s[i])<=n)return!0;return!1}});fa._flat=at;var ma=fa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e=this._rings[0],t=e.length,n,a,i,o,r,l,s,d,p;if(!t)return null;for(l=s=d=0,n=0,a=t-1;n<t;a=n++)i=e[n],o=e[a],r=i.y*o.x-o.y*i.x,s+=(i.x+o.x)*r,d+=(i.y+o.y)*r,l+=3*r;return p=0===l?e[0]:[s/l,d/l],this._map.layerPointToLatLng(p)},_convertLatLngs:function(e){var t=fa.prototype._convertLatLngs.call(this,e),n=t.length;return 2<=n&&t[0]instanceof q&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){fa.prototype._setLatLngs.call(this,e),nt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return nt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new B(t,t);if(e=new U(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return void(this._parts=this._rings);for(var a=0,i=this._rings.length,o;a<i;a++)o=it(this._rings[a],e,!0),o.length&&this._parts.push(o)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,n,a,o,r,i,l,s,d;if(!this._pxBounds.contains(e))return!1;for(r=0,s=this._parts.length;r<s;r++)for(n=this._parts[r],i=0,d=n.length,l=d-1;i<d;l=i++)a=n[i],o=n[l],a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(t=!t);return t||fa.prototype._containsPoint.call(this,e,!0)}}),ga=oa.extend({initialize:function(e,t){A(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=xt(e)?e:e.features,n,a,i;if(t){for(n=0,a=t.length;n<a;n++)i=t[n],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var r=ot(e,o);return r?(r.feature=ct(e),r.defaultOptions=r.options,this.resetStyle(r),o.onEachFeature&&o.onEachFeature(e,r),this.addLayer(r)):this},resetStyle:function(e){return e.options=d({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),_a={toGeoJSON:function(e){return pt(this,{type:"Point",coordinates:st(this.getLatLng(),e)})}};da.include(_a),ua.include(_a),ca.include(_a),fa.include({toGeoJSON:function(e){var t=!nt(this._latlngs),n=dt(this._latlngs,t?1:0,!1,e);return pt(this,{type:(t?"Multi":"")+"LineString",coordinates:n})}}),ma.include({toGeoJSON:function(e){var t=!nt(this._latlngs),n=t&&!nt(this._latlngs[0]),a=dt(this._latlngs,n?2:t?1:0,!0,e);return t||(a=[a]),pt(this,{type:(n?"Multi":"")+"Polygon",coordinates:a})}}),ia.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),pt(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,a=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON(e);if(n)a.push(i.geometry);else{var o=ct(i);"FeatureCollection"===o.type?a.push.apply(a,o.features):a.push(o)}}}),n?pt(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});var ya=aa.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=W(t),A(this,n)},onAdd:function(){this._image||(this._initImage(),1>this.options.opacity&&this._updateOpacity()),this.options.interactive&&(De(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Le(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&we(this._image),this},bringToBack:function(){return this._map&&Ce(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=W(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._image=Ne("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":"")+(this.options.className||""));e.onselectstart=b,e.onmousemove=b,e.onload=m(this.fire,this,"load"),e.onerror=m(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ze(this._image,n,e)},_reset:function(){var e=this._image,t=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();je(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){Me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)}}),ha=ya.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:Ne("video");if(t.class=t.class||"",t.class+="leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""),t.onselectstart=b,t.onmousemove=b,t.onloadeddata=m(this.fire,this,"load"),!e){xt(this._url)||(this._url=[this._url]),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop;for(var n=0,a;n<this._url.length;n++)a=Ne("source"),a.src=this._url[n],t.appendChild(a)}}}),ba=aa.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){A(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Me(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(Me(this._container,0),this._removeTimeout=setTimeout(m(Le,void 0,this._container),200)):Le(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=H(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&we(this._container),this},bringToBack:function(){return this._map&&Ce(this._container),this},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=z(this.options.offset),n=this._getAnchor();this._zoomAnimated?je(this._container,e.add(n)):t=t.add(e).add(n);var a=this._containerBottom=-t.y,i=this._containerLeft=-l(this._containerWidth/2)+t.x;this._container.style.bottom=a+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),xa=ba.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){ba.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),!(this._source instanceof pa)&&this._source.on("preclick",fe))},onRemove:function(e){ba.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),!(this._source instanceof pa)&&this._source.off("preclick",fe))},getEvents:function(){var e=ba.prototype.getEvents.call(this);return(void 0===this.options.closeOnClick?this._map.options.closePopupOnClick:this.options.closeOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=Ne("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=Ne("div",e+"-content-wrapper",t);if(this._contentNode=Ne("div",e+"-content",n),ge(n),me(this._contentNode),de(n,"contextmenu",fe),this._tipContainer=Ne("div",e+"-tip-container",t),this._tip=Ne("div",e+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=Ne("a",e+"-close-button",t);a.href="#close",a.innerHTML="&#215;",de(a,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=S(n,this.options.maxWidth),n=N(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var a=e.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&a>i?(t.height=i+"px",De(e,o)):Pe(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();je(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var e=this._map,t=parseInt(Ee(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,a=this._containerWidth,i=new B(this._containerLeft,-n-this._containerBottom);i._add(Ue(this._container));var o=e.layerPointToContainerPoint(i),r=z(this.options.autoPanPadding),l=z(this.options.autoPanPaddingTopLeft||r),s=z(this.options.autoPanPaddingBottomRight||r),d=e.getSize(),p=0,c=0;o.x+a+s.x>d.x&&(p=o.x+a-d.x+s.x),0>o.x-p-l.x&&(p=o.x-l.x),o.y+n+s.y>d.y&&(c=o.y+n-d.y+s.y),0>o.y-c-l.y&&(c=o.y-l.y),(p||c)&&e.fire("autopanstart").panBy([p,c])}},_onCloseButtonClick:function(t){this._close(),ye(t)},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Rn.mergeOptions({closePopupOnClick:!0}),Rn.include({openPopup:function(e,t,n){return(e instanceof xa||(e=new xa(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e))?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),aa.include({bindPopup:function(e,t){return e instanceof xa?(A(e,t),this._popup=e,e._source=this):((!this._popup||t)&&(this._popup=new xa(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){if(e instanceof aa||(t=e,e=this),e instanceof oa)for(var n in this._layers){e=this._layers[n];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._popup&&this._map&&(this._popup._source=e,this._popup.update(),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup)return this._map?(ye(t),e instanceof pa?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))):void 0},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var va=ba.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:0.9},onAdd:function(e){ba.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){ba.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=ba.prototype.getEvents.call(this);return en&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var e="leaflet-tooltip"+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t=this._map,n=this._container,a=t.latLngToContainerPoint(t.getCenter()),i=t.layerPointToContainerPoint(e),o=this.options.direction,r=n.offsetWidth,l=n.offsetHeight,s=z(this.options.offset),d=this._getAnchor();"top"===o?e=e.add(z(-r/2+s.x,-l+s.y+d.y,!0)):"bottom"===o?e=e.subtract(z(r/2-s.x,-s.y,!0)):"center"===o?e=e.subtract(z(r/2+s.x,l/2-d.y+s.y,!0)):"right"===o||"auto"===o&&i.x<a.x?(o="right",e=e.add(z(s.x+d.x,d.y-l/2+s.y,!0))):(o="left",e=e.subtract(z(r+d.x-s.x,l/2-d.y-s.y,!0))),Pe(n,"leaflet-tooltip-right"),Pe(n,"leaflet-tooltip-left"),Pe(n,"leaflet-tooltip-top"),Pe(n,"leaflet-tooltip-bottom"),De(n,"leaflet-tooltip-"+o),je(n,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Me(this._container,e)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Rn.include({openTooltip:function(e,t,n){return e instanceof va||(e=new va(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:this.addLayer(e)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),aa.include({bindTooltip:function(e,t){return e instanceof va?(A(e,t),this._tooltip=e,e._source=this):((!this._tooltip||t)&&(this._tooltip=new va(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),en&&(n.click=this._openTooltip)),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e,t){if(e instanceof aa||(t=e,e=this),e instanceof oa)for(var n in this._layers){e=this._layers[n];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=e,this._tooltip.update(),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(De(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Pe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e=t.latlng,n,a;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),a=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(e)}});var Sa=ra.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(t.innerHTML=!1===n.html?"":n.html,n.bgPos){var a=z(n.bgPos);t.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});ra.Default=la;var Ta=aa.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Kt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){A(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),Le(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(we(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(!this._onMove&&(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof B?e:new B(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,n=-e(-Infinity,Infinity),a=0,i=t.length,o;a<i;a++)o=t[a].style.zIndex,t[a]!==this._container&&o&&(n=e(n,+o));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!It){Me(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var a in this._tiles){var i=this._tiles[a];if(i.current&&i.loaded){var o=S(1,(e-i.loaded)/200);Me(i.el,o),1>o?t=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(I(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),1>this.options.opacity&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-T(e-n),this._onUpdateLevel(n)):(Le(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var a=this._levels[e],i=this._map;return a||(a=this._levels[e]={},a.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=t,a.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),a.zoom=e,this._setZoomTransform(a,i.getCenter(),i.getZoom()),b(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var e=this._map.getZoom(),t,n;if(e>this.options.maxZoom||e<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)n=this._tiles[t],n.retain=n.current;for(t in this._tiles)if(n=this._tiles[t],n.current&&!n.active){var a=n.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)Le(this._levels[e].el),this._onRemoveLevel(e),delete this._levels[e];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(e,t,n,a){var i=E(e/2),o=E(t/2),r=n-1,l=new B(+i,+o);l.z=+r;var s=this._tileCoordsToKey(l),d=this._tiles[s];return d&&d.active?(d.retain=!0,!0):(d&&d.loaded&&(d.retain=!0),!!(r>a)&&this._retainParent(i,o,r,a))},_retainChildren:function(e,t,n,a){for(var o=2*e;o<2*e+2;o++)for(var i=2*t,r;i<2*t+2;i++){r=new B(o,i),r.z=n+1;var l=this._tileCoordsToKey(r),s=this._tiles[l];if(s&&s.active){s.retain=!0;continue}else s&&s.loaded&&(s.retain=!0);n+1<a&&this._retainChildren(o,i,n+1,a)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,a){var i=this._clampZoom(l(t));(this.options.maxZoom!==void 0&&i>this.options.maxZoom||this.options.minZoom!==void 0&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;(!a||o)&&(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),i!==void 0&&this._update(e),!n&&this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var a=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(t,n)).round();Xt?ze(e.el,i,a):je(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),a=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[E(e.project([0,t.wrapLng[0]],a).x/n.x),p(e.project([0,t.wrapLng[1]],a).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[E(e.project([t.wrapLat[0],0],a).y/n.x),p(e.project([t.wrapLat[1],0],a).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?N(t._animateToZoom,t.getZoom()):t.getZoom(),a=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*a);return new U(i.subtract(o),i.add(o))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var a=this._getTiledPixelBounds(e),o=this._pxBoundsToTileRange(a),r=o.getCenter(),l=[],s=this.options.keepBuffer,d=new U(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var p in this._tiles){var u=this._tiles[p].coords;u.z===this._tileZoom&&d.contains(new B(u.x,u.y))||(this._tiles[p].current=!1)}if(1<T(n-this._tileZoom))return void this._setView(e,n);for(var c=o.min.y;c<=o.max.y;c++)for(var f=o.min.x,i;f<=o.max.x;f++)(i=new B(f,c),i.z=this._tileZoom,!!this._isValidTile(i))&&(this._tiles[this._tileCoordsToKey(i)]||l.push(i));if(l.sort(function(e,t){return e.distanceTo(r)-t.distanceTo(r)}),0!==l.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(f=0;f<l.length;f++)this._addTile(l[f],m);this._level.el.appendChild(m)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(e);return W(this.options.bounds).overlaps(a)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToBounds:function(e){var t=this._map,n=this.getTileSize(),a=e.scaleBy(n),i=a.add(n),o=t.unproject(a,e.z),r=t.unproject(i,e.z),l=new $(o,r);return this.options.noWrap||t.wrapLatLngBounds(l),l},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new B(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(Le(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){De(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=b,e.onmousemove=b,It&&1>this.options.opacity&&Me(e,this.options.opacity),Bt&&!zt&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var n=this._getTilePos(e),a=this._tileCoordsToKey(e),i=this.createTile(this._wrapCoords(e),m(this._tileReady,this,e));this._initTile(i),2>this.createTile.length&&R(m(this._tileReady,this,e,null,i)),je(i,n),this._tiles[a]={el:i,coords:e,current:!0},t.appendChild(i),this.fire("tileloadstart",{tile:i,coords:e})},_tileReady:function(e,t,n){if(this._map){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var a=this._tileCoordsToKey(e);n=this._tiles[a],n&&(n.loaded=+new Date,this._map._fadeAnimated?(Me(n.el,0),I(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),!t&&(De(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),It||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))}},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new B(this._wrapX?h(e.x,this._wrapX):e.x,this._wrapY?h(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new U(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),ka=Ta.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,t=A(this,t),t.detectRetina&&nn&&0<t.maxZoom&&(t.tileSize=E(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=N(0,t.minZoom)),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),Bt||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return de(n,"load",m(this._tileOnLoad,this,t,n)),de(n,"error",m(this._tileOnError,this,t,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:nn?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=n),t["-y"]=n}return C(this._url,d(t,this.options))},_tileOnLoad:function(e,t){It?setTimeout(m(e,this,null,t),0):e(null,t)},_tileOnError:function(t,n,a){var e=this.options.errorTileUrl;e&&n.src!==e&&(n.src=e),t(a,n)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,n=this.options.zoomReverse,a=this.options.zoomOffset;return n&&(e=t-e),e+a},_getSubdomain:function(e){var t=T(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=b,t.onerror=b,t.complete||(t.src=vt,Le(t)))}}),Ea=ka.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var n=d({},this.defaultWmsParams);for(var a in t)a in this.options||(n[a]=t[a]);t=A(this,t),n.width=n.height=t.tileSize*(t.detectRetina&&nn?2:1),this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[t]=this._crs.code,ka.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToBounds(e),n=this._crs.project(t.getNorthWest()),a=this._crs.project(t.getSouthEast()),i=(1.3<=this._wmsVersion&&this._crs===ea?[a.y,n.x,n.y,a.x]:[n.x,a.y,a.x,n.y]).join(","),o=ka.prototype.getTileUrl.call(this,e);return o+w(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+i},setParams:function(e,t){return d(this.wmsParams,e),t||this.redraw(),this}});ka.WMS=Ea,ft.wms=function(e,t){return new Ea(e,t)};var Na=aa.extend({options:{padding:0.1},initialize:function(e){A(this,e),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&De(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),a=Ue(this._container),i=this._map.getSize().multiplyBy(0.5+this.options.padding),o=this._map.project(this._center,t),r=this._map.project(e,t),l=r.subtract(o),s=i.multiplyBy(-n).add(a).add(i).subtract(l);Xt?ze(this._container,s,n):je(this._container,s)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new U(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),La=Na.extend({getEvents:function(){var e=Na.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Na.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");de(e,"mousemove",y(this._onMouseMove,32,this),this),de(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),de(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_destroyContainer:function(){delete this._ctx,Le(this._container),pe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;for(var t in this._redrawBounds=null,this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){this._drawnLayers={},Na.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),a=nn?2:1;je(t,e.min),t.width=a*n.x,t.height=a*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",nn&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Na.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[_(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,a=t.prev;n?n.prev=a:this._drawLast=a,a?a.next=n:this._drawFirst=n,delete e._order,delete this._layers[L.stamp(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(e.options.dashArray){var t=e.options.dashArray.split(","),n=[],a;for(a=0;a<t.length;a++)n.push(+t[a]);e.options._dashArray=n}},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var e=this._redrawBounds,t;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)t=a.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n=e._parts,a=n.length,o=this._ctx,r,i,l,s;if(a){for(this._drawnLayers[e._leaflet_id]=e,o.beginPath(),r=0;r<a;r++){for(i=0,l=n[r].length;i<l;i++)s=n[r][i],o[i?"lineTo":"moveTo"](s.x,s.y);t&&o.closePath()}this._fillStroke(o,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,a=e._radius,i=(e._radiusY||a)/a;this._drawnLayers[e._leaflet_id]=e,1!=i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,a,0,2*o,!1),1!=i&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),n=this._drawFirst,a,i;n;n=n.next)a=n.layer,a.options.interactive&&a._containsPoint(e)&&!this._map._draggableMoved(a)&&(i=a);i&&(xe(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Pe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n=this._drawFirst,a,i;n;n=n.next)a=n.layer,a.options.interactive&&a._containsPoint(e)&&(i=a);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(De(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,n,e){this._map._fireDOMEvent(n,e||n.type,t)},_bringToFront:function(e){var t=e._order,n=t.next,a=t.prev;if(n)n.prev=a;else return;a?a.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)},_bringToBack:function(e){var t=e._order,n=t.next,a=t.prev;if(a)a.next=n;else return;n?n.prev=a:a&&(this._drawLast=a),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}),Aa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+" class=\"lvml\">")}}catch(t){return function(e){return document.createElement("<"+e+" xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">")}}}(),wa=ln?Aa:G,Ca=Na.extend({getEvents:function(){var e=Na.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=wa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=wa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Le(this._container),pe(this._container),delete this._container,delete this._rootGroup},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Na.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),je(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=wa("path");e.options.className&&De(t,e.options.className),e.options.interactive&&De(t,"leaflet-interactive"),this._updateStyle(e),this._layers[_(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){Le(e._path),e.removeInteractiveTarget(e._path),delete this._layers[_(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Z(e._parts,t))},_updateCircle:function(e){var t=e._point,n=e._radius,a=e._radiusY||n,i="a"+n+","+a+" 0 1,0 ",o=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,o)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){we(e._path)},_bringToBack:function(e){Ce(e._path)}});ln&&Ca.include({_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Na.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Aa("shape");De(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Aa("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[_(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;Le(t),e.removeInteractiveTarget(t),delete this._layers[_(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,a=e.options,i=e._container;i.stroked=!!a.stroke,i.filled=!!a.fill,a.stroke?(!t&&(t=e._stroke=Aa("stroke")),i.appendChild(t),t.weight=a.weight+"px",t.color=a.color,t.opacity=a.opacity,t.dashStyle=a.dashArray?xt(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):"",t.endcap=a.lineCap.replace("butt","flat"),t.joinstyle=a.lineJoin):t&&(i.removeChild(t),e._stroke=null),a.fill?(!n&&(n=e._fill=Aa("fill")),i.appendChild(n),n.color=a.fillColor||a.color,n.opacity=a.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=l(e._radius),a=l(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+a+" 0,"+23592600)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){we(e._container)},_bringToBack:function(e){Ce(e._container)}}),Rn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this.options.preferCanvas&&mt()||gt()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=Ca&&gt({pane:e})||La&&mt({pane:e}),this._paneRenderers[e]=t),t}});var Oa=ma.extend({initialize:function(e,t){ma.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=W(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});Ca.create=wa,Ca.pointsToPath=Z,ga.geometryToLayer=ot,ga.coordsToLatLng=rt,ga.coordsToLatLngs=lt,ga.latLngToCoords=st,ga.latLngsToCoords=dt,ga.getFeature=pt,ga.asFeature=ct,Rn.mergeOptions({boxZoom:!0});var Da=Wn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){de(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){pe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Le(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){return t.shiftKey&&(1===t.which||1===t.button)&&void(this._clearDeferredResetState(),this._resetState(),An(),$e(),this._startPoint=this._map.mouseEventToContainerPoint(t),de(document,{contextmenu:ye,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),De(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new U(this._point,this._startPoint),n=e.getSize();je(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(Le(this._box),Pe(this._container,"leaflet-crosshair")),wn(),We(),pe(document,{contextmenu:ye,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var e=new $(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Rn.addInitHook("addHandler","boxZoom",Da),Rn.mergeOptions({doubleClickZoom:!0});var Pa=Wn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),a=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-a:n+a;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Rn.addInitHook("addHandler","doubleClickZoom",Pa),Rn.mergeOptions({dragging:!0,inertia:!zt,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:0.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ra=Wn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Vn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}De(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Pe(this._map._container,"leaflet-grab"),Pe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=W(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=S(1,N(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),50<e-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=l(e/2),n=this._initialWorldOffset,a=this._draggable._newPos.x,i=(a-t+n)%e+t-n,o=(a+t+n)%e-t-n,r=T(i+n)<T(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,n=e.options,a=!n.inertia||2>this._times.length;if(e.fire("dragend",t),a)e.fire("moveend");else{var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,r=n.easeLinearity,l=i.multiplyBy(r/o),s=l.distanceTo([0,0]),d=S(n.inertiaMaxSpeed,s),p=l.multiplyBy(d/s),c=d/(n.inertiaDeceleration*r),u=p.multiplyBy(-c/2).round();u.x||u.y?(u=e._limitOffset(u,e.options.maxBounds),R(function(){e.panBy(u,{duration:c,easeLinearity:r,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Rn.addInitHook("addHandler","dragging",Ra),Rn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ia=Wn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;0>=e.tabIndex&&(e.tabIndex="0"),de(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),pe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,a=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(a,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},n=this.keyCodes,a,i;for(a=0,i=n.left.length;a<i;a++)t[n.left[a]]=[-1*e,0];for(a=0,i=n.right.length;a<i;a++)t[n.right[a]]=[e,0];for(a=0,i=n.down.length;a<i;a++)t[n.down[a]]=[0,e];for(a=0,i=n.up.length;a<i;a++)t[n.up[a]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},n=this.keyCodes,a,i;for(a=0,i=n.zoomIn.length;a<i;a++)t[n.zoomIn[a]]=e;for(a=0,i=n.zoomOut.length;a<i;a++)t[n.zoomOut[a]]=-e},_addHooks:function(){de(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){pe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,n=this._map,a;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;a=this._panKeys[e],t.shiftKey&&(a=z(a).multiplyBy(3)),n.panBy(a),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(27===e&&n._popup)n.closePopup();else return;ye(t)}}});Rn.addInitHook("addHandler","keyboard",Ia),Rn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ma=Wn.extend({addHooks:function(){de(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){pe(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=be(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=N(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),a),ye(t)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*f(2/(1+a(-T(i))))/r,l=n?p(o/n)*n:o,s=e._limitZoom(t+(0<this._delta?l:-l))-t;this._delta=0,this._startTime=null;s&&("center"===e.options.scrollWheelZoom?e.setZoom(t+s):e.setZoomAround(this._lastMousePos,t+s))}});Rn.addInitHook("addHandler","scrollWheelZoom",Ma),Rn.mergeOptions({tap:!0,tapTolerance:15});var Fa=Wn.extend({addHooks:function(){de(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){pe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(_e(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new B(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&De(n,"leaflet-active"),this._holdTimeout=setTimeout(m(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),de(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),pe(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&Pe(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new B(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,n){var e=document.createEvent("MouseEvents");e._simulated=!0,n.target._simulatedClick=!0,e.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(e)}});en&&!Qt&&Rn.addInitHook("addHandler","tap",Fa),Rn.mergeOptions({touchZoom:en&&!zt,bounceAtZoomLimits:!0});var Ba=Wn.extend({addHooks:function(){De(this._map._container,"leaflet-touch-zoom"),de(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Pe(this._map._container,"leaflet-touch-zoom"),pe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||2!==t.touches.length||e._animatingZoom||this._zooming)){var n=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(a)._divideBy(2))),this._startDist=n.distanceTo(a),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),de(document,"touchmove",this._onTouchMove,this),de(document,"touchend",this._onTouchEnd,this),_e(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]),i=n.distanceTo(a)/this._startDist;if(this._zoom=e.getScaleZoom(i,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&1>i||this._zoom>e.getMaxZoom()&&1<i)&&(this._zoom=e._limitZoom(this._zoom)),"center"!==e.options.touchZoom){var o=n._add(a)._divideBy(2)._subtract(this._centerPoint);if(1==i&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}else if(this._center=this._startLatLng,1==i)return;this._moved||(e._moveStart(!0),this._moved=!0),I(this._animRequest);var r=m(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=R(r,this,!0),_e(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?void(this._zooming=!1,I(this._animRequest),pe(document,"touchmove",this._onTouchMove),pe(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):void(this._zooming=!1)}});Rn.addInitHook("addHandler","touchZoom",Ba),Rn.BoxZoom=Da,Rn.DoubleClickZoom=Pa,Rn.Drag=Ra,Rn.Keyboard=Ia,Rn.ScrollWheelZoom=Ma,Rn.Tap=Fa,Rn.TouchZoom=Ba;var za=window.L;window.L=e,Object.freeze=_t,e.version="1.2.0",e.noConflict=function(){return window.L=za,this},e.Control=In,e.control=Mn,e.Browser=sn,e.Evented=Lt,e.Mixin={Events:Nt},e.Util=Et,e.Class=M,e.Handler=Wn,e.extend=d,e.bind=m,e.stamp=_,e.setOptions=A,e.DomEvent=Tn,e.DomUtil=Dn,e.PosAnimation=Pn,e.Draggable=Vn,e.LineUtil=Gn,e.PolyUtil=Zn,e.Point=B,e.point=z,e.Bounds=U,e.bounds=j,e.Transformation=Y,e.transformation=V,e.Projection=Jn,e.LatLng=q,e.latLng=H,e.LatLngBounds=$,e.latLngBounds=W,e.CRS=At,e.GeoJSON=ga,e.geoJSON=ut,e.geoJson=ut,e.Layer=aa,e.LayerGroup=ia,e.layerGroup=function(e){return new ia(e)},e.FeatureGroup=oa,e.featureGroup=function(e){return new oa(e)},e.ImageOverlay=ya,e.imageOverlay=function(e,t,n){return new ya(e,t,n)},e.VideoOverlay=ha,e.videoOverlay=function(e,t,n){return new ha(e,t,n)},e.DivOverlay=ba,e.Popup=xa,e.popup=function(e,t){return new xa(e,t)},e.Tooltip=va,e.tooltip=function(e,t){return new va(e,t)},e.Icon=ra,e.icon=function(e){return new ra(e)},e.DivIcon=Sa,e.divIcon=function(e){return new Sa(e)},e.Marker=da,e.marker=function(e,t){return new da(e,t)},e.TileLayer=ka,e.tileLayer=ft,e.GridLayer=Ta,e.gridLayer=function(e){return new Ta(e)},e.SVG=Ca,e.svg=gt,e.Renderer=Na,e.Canvas=La,e.canvas=mt,e.Path=pa,e.CircleMarker=ca,e.circleMarker=function(e,t){return new ca(e,t)},e.Circle=ua,e.circle=function(e,t,n){return new ua(e,t,n)},e.Polyline=fa,e.polyline=function(e,t){return new fa(e,t)},e.Polygon=ma,e.polygon=function(e,t){return new ma(e,t)},e.Rectangle=Oa,e.rectangle=function(e,t){return new Oa(e,t)},e.Map=Rn,e.map=function(e,t){return new Rn(e,t)}})},{}],152:[function(e,t,n){(function(e){// distribute, sublicense, and/or sell copies of the Software, and to permit
function t(e,t){for(var n=0,a=e.length-1,i;0<=a;a--)i=e[a],"."===i?e.splice(a,1):".."===i?(e.splice(a,1),n++):n&&(e.splice(a,1),n--);if(t)for(;n--;n)e.unshift("..");return e}function a(e,t){if(e.filter)return e.filter(t);for(var n=[],a=0;a<e.length;a++)t(e[a],a,e)&&n.push(e[a]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",o=!1,r=arguments.length-1,i;-1<=r&&!o;r--){if(i=0<=r?arguments[r]:e.cwd(),"string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");else if(!i)continue;n=i+"/"+n,o="/"===i.charAt(0)}return n=t(a(n.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===r(e,-1);return e=t(a(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(a(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function a(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=a(e.split("/")),r=a(t.split("/")),l=S(o.length,r.length),s=l,d=0;d<l;d++)if(o[d]!==r[d]){s=d;break}for(var i=[],d=s;d<o.length;d++)i.push("..");return i=i.concat(r.slice(s)),i.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],a=t[1];return n||a?(a&&(a=a.substr(0,a.length-1)),n+a):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var r=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:153}],153:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(u===clearTimeout)return clearTimeout(e);if((u===a||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function r(){m&&_&&(m=!1,_.length?f=_.concat(f):g=-1,f.length&&l())}function l(){if(!m){var e=o(r);m=!0;for(var t=f.length;t;){for(_=f,f=[];++g<t;)_&&_[g].run();g=-1,t=f.length}_=null,m=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function d(){}var p=t.exports={},c,u;(function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{u="function"==typeof clearTimeout?clearTimeout:a}catch(t){u=a}})();var f=[],m=!1,g=-1,_;p.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new s(e,t)),1!==f.length||m||o(l)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=d,p.addListener=d,p.once=d,p.off=d,p.removeListener=d,p.removeAllListeners=d,p.emit=d,p.prependListener=d,p.prependOnceListener=d,p.listeners=function(){return[]},p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],154:[function(e,t){t.exports={F:e("./src/F"),T:e("./src/T"),__:e("./src/__"),add:e("./src/add"),addIndex:e("./src/addIndex"),adjust:e("./src/adjust"),all:e("./src/all"),allPass:e("./src/allPass"),always:e("./src/always"),and:e("./src/and"),any:e("./src/any"),anyPass:e("./src/anyPass"),ap:e("./src/ap"),aperture:e("./src/aperture"),append:e("./src/append"),apply:e("./src/apply"),applySpec:e("./src/applySpec"),ascend:e("./src/ascend"),assoc:e("./src/assoc"),assocPath:e("./src/assocPath"),binary:e("./src/binary"),bind:e("./src/bind"),both:e("./src/both"),call:e("./src/call"),chain:e("./src/chain"),clamp:e("./src/clamp"),clone:e("./src/clone"),comparator:e("./src/comparator"),complement:e("./src/complement"),compose:e("./src/compose"),composeK:e("./src/composeK"),composeP:e("./src/composeP"),concat:e("./src/concat"),cond:e("./src/cond"),construct:e("./src/construct"),constructN:e("./src/constructN"),contains:e("./src/contains"),converge:e("./src/converge"),countBy:e("./src/countBy"),curry:e("./src/curry"),curryN:e("./src/curryN"),dec:e("./src/dec"),descend:e("./src/descend"),defaultTo:e("./src/defaultTo"),difference:e("./src/difference"),differenceWith:e("./src/differenceWith"),dissoc:e("./src/dissoc"),dissocPath:e("./src/dissocPath"),divide:e("./src/divide"),drop:e("./src/drop"),dropLast:e("./src/dropLast"),dropLastWhile:e("./src/dropLastWhile"),dropRepeats:e("./src/dropRepeats"),dropRepeatsWith:e("./src/dropRepeatsWith"),dropWhile:e("./src/dropWhile"),either:e("./src/either"),empty:e("./src/empty"),eqBy:e("./src/eqBy"),eqProps:e("./src/eqProps"),equals:e("./src/equals"),evolve:e("./src/evolve"),filter:e("./src/filter"),find:e("./src/find"),findIndex:e("./src/findIndex"),findLast:e("./src/findLast"),findLastIndex:e("./src/findLastIndex"),flatten:e("./src/flatten"),flip:e("./src/flip"),forEach:e("./src/forEach"),forEachObjIndexed:e("./src/forEachObjIndexed"),fromPairs:e("./src/fromPairs"),groupBy:e("./src/groupBy"),groupWith:e("./src/groupWith"),gt:e("./src/gt"),gte:e("./src/gte"),has:e("./src/has"),hasIn:e("./src/hasIn"),head:e("./src/head"),identical:e("./src/identical"),identity:e("./src/identity"),ifElse:e("./src/ifElse"),inc:e("./src/inc"),indexBy:e("./src/indexBy"),indexOf:e("./src/indexOf"),init:e("./src/init"),insert:e("./src/insert"),insertAll:e("./src/insertAll"),intersection:e("./src/intersection"),intersectionWith:e("./src/intersectionWith"),intersperse:e("./src/intersperse"),into:e("./src/into"),invert:e("./src/invert"),invertObj:e("./src/invertObj"),invoker:e("./src/invoker"),is:e("./src/is"),isArrayLike:e("./src/isArrayLike"),isEmpty:e("./src/isEmpty"),isNil:e("./src/isNil"),join:e("./src/join"),juxt:e("./src/juxt"),keys:e("./src/keys"),keysIn:e("./src/keysIn"),last:e("./src/last"),lastIndexOf:e("./src/lastIndexOf"),length:e("./src/length"),lens:e("./src/lens"),lensIndex:e("./src/lensIndex"),lensPath:e("./src/lensPath"),lensProp:e("./src/lensProp"),lift:e("./src/lift"),liftN:e("./src/liftN"),lt:e("./src/lt"),lte:e("./src/lte"),map:e("./src/map"),mapAccum:e("./src/mapAccum"),mapAccumRight:e("./src/mapAccumRight"),mapObjIndexed:e("./src/mapObjIndexed"),match:e("./src/match"),mathMod:e("./src/mathMod"),max:e("./src/max"),maxBy:e("./src/maxBy"),mean:e("./src/mean"),median:e("./src/median"),memoize:e("./src/memoize"),merge:e("./src/merge"),mergeAll:e("./src/mergeAll"),mergeWith:e("./src/mergeWith"),mergeWithKey:e("./src/mergeWithKey"),min:e("./src/min"),minBy:e("./src/minBy"),modulo:e("./src/modulo"),multiply:e("./src/multiply"),nAry:e("./src/nAry"),negate:e("./src/negate"),none:e("./src/none"),not:e("./src/not"),nth:e("./src/nth"),nthArg:e("./src/nthArg"),objOf:e("./src/objOf"),of:e("./src/of"),omit:e("./src/omit"),once:e("./src/once"),or:e("./src/or"),over:e("./src/over"),pair:e("./src/pair"),partial:e("./src/partial"),partialRight:e("./src/partialRight"),partition:e("./src/partition"),path:e("./src/path"),pathEq:e("./src/pathEq"),pathOr:e("./src/pathOr"),pathSatisfies:e("./src/pathSatisfies"),pick:e("./src/pick"),pickAll:e("./src/pickAll"),pickBy:e("./src/pickBy"),pipe:e("./src/pipe"),pipeK:e("./src/pipeK"),pipeP:e("./src/pipeP"),pluck:e("./src/pluck"),prepend:e("./src/prepend"),product:e("./src/product"),project:e("./src/project"),prop:e("./src/prop"),propEq:e("./src/propEq"),propIs:e("./src/propIs"),propOr:e("./src/propOr"),propSatisfies:e("./src/propSatisfies"),props:e("./src/props"),range:e("./src/range"),reduce:e("./src/reduce"),reduceBy:e("./src/reduceBy"),reduceRight:e("./src/reduceRight"),reduceWhile:e("./src/reduceWhile"),reduced:e("./src/reduced"),reject:e("./src/reject"),remove:e("./src/remove"),repeat:e("./src/repeat"),replace:e("./src/replace"),reverse:e("./src/reverse"),scan:e("./src/scan"),sequence:e("./src/sequence"),set:e("./src/set"),slice:e("./src/slice"),sort:e("./src/sort"),sortBy:e("./src/sortBy"),sortWith:e("./src/sortWith"),split:e("./src/split"),splitAt:e("./src/splitAt"),splitEvery:e("./src/splitEvery"),splitWhen:e("./src/splitWhen"),subtract:e("./src/subtract"),sum:e("./src/sum"),symmetricDifference:e("./src/symmetricDifference"),symmetricDifferenceWith:e("./src/symmetricDifferenceWith"),tail:e("./src/tail"),take:e("./src/take"),takeLast:e("./src/takeLast"),takeLastWhile:e("./src/takeLastWhile"),takeWhile:e("./src/takeWhile"),tap:e("./src/tap"),test:e("./src/test"),times:e("./src/times"),toLower:e("./src/toLower"),toPairs:e("./src/toPairs"),toPairsIn:e("./src/toPairsIn"),toString:e("./src/toString"),toUpper:e("./src/toUpper"),transduce:e("./src/transduce"),transpose:e("./src/transpose"),traverse:e("./src/traverse"),trim:e("./src/trim"),tryCatch:e("./src/tryCatch"),type:e("./src/type"),unapply:e("./src/unapply"),unary:e("./src/unary"),uncurryN:e("./src/uncurryN"),unfold:e("./src/unfold"),union:e("./src/union"),unionWith:e("./src/unionWith"),uniq:e("./src/uniq"),uniqBy:e("./src/uniqBy"),uniqWith:e("./src/uniqWith"),unless:e("./src/unless"),unnest:e("./src/unnest"),until:e("./src/until"),update:e("./src/update"),useWith:e("./src/useWith"),values:e("./src/values"),valuesIn:e("./src/valuesIn"),view:e("./src/view"),when:e("./src/when"),where:e("./src/where"),whereEq:e("./src/whereEq"),without:e("./src/without"),xprod:e("./src/xprod"),zip:e("./src/zip"),zipObj:e("./src/zipObj"),zipWith:e("./src/zipWith")}},{"./src/F":155,"./src/T":156,"./src/__":157,"./src/add":158,"./src/addIndex":159,"./src/adjust":160,"./src/all":161,"./src/allPass":162,"./src/always":163,"./src/and":164,"./src/any":165,"./src/anyPass":166,"./src/ap":167,"./src/aperture":168,"./src/append":169,"./src/apply":170,"./src/applySpec":171,"./src/ascend":172,"./src/assoc":173,"./src/assocPath":174,"./src/binary":175,"./src/bind":176,"./src/both":177,"./src/call":178,"./src/chain":179,"./src/clamp":180,"./src/clone":181,"./src/comparator":182,"./src/complement":183,"./src/compose":184,"./src/composeK":185,"./src/composeP":186,"./src/concat":187,"./src/cond":188,"./src/construct":189,"./src/constructN":190,"./src/contains":191,"./src/converge":192,"./src/countBy":193,"./src/curry":194,"./src/curryN":195,"./src/dec":196,"./src/defaultTo":197,"./src/descend":198,"./src/difference":199,"./src/differenceWith":200,"./src/dissoc":201,"./src/dissocPath":202,"./src/divide":203,"./src/drop":204,"./src/dropLast":205,"./src/dropLastWhile":206,"./src/dropRepeats":207,"./src/dropRepeatsWith":208,"./src/dropWhile":209,"./src/either":210,"./src/empty":211,"./src/eqBy":212,"./src/eqProps":213,"./src/equals":214,"./src/evolve":215,"./src/filter":216,"./src/find":217,"./src/findIndex":218,"./src/findLast":219,"./src/findLastIndex":220,"./src/flatten":221,"./src/flip":222,"./src/forEach":223,"./src/forEachObjIndexed":224,"./src/fromPairs":225,"./src/groupBy":226,"./src/groupWith":227,"./src/gt":228,"./src/gte":229,"./src/has":230,"./src/hasIn":231,"./src/head":232,"./src/identical":233,"./src/identity":234,"./src/ifElse":235,"./src/inc":236,"./src/indexBy":237,"./src/indexOf":238,"./src/init":239,"./src/insert":240,"./src/insertAll":241,"./src/intersection":312,"./src/intersectionWith":313,"./src/intersperse":314,"./src/into":315,"./src/invert":316,"./src/invertObj":317,"./src/invoker":318,"./src/is":319,"./src/isArrayLike":320,"./src/isEmpty":321,"./src/isNil":322,"./src/join":323,"./src/juxt":324,"./src/keys":325,"./src/keysIn":326,"./src/last":327,"./src/lastIndexOf":328,"./src/length":329,"./src/lens":330,"./src/lensIndex":331,"./src/lensPath":332,"./src/lensProp":333,"./src/lift":334,"./src/liftN":335,"./src/lt":336,"./src/lte":337,"./src/map":338,"./src/mapAccum":339,"./src/mapAccumRight":340,"./src/mapObjIndexed":341,"./src/match":342,"./src/mathMod":343,"./src/max":344,"./src/maxBy":345,"./src/mean":346,"./src/median":347,"./src/memoize":348,"./src/merge":349,"./src/mergeAll":350,"./src/mergeWith":351,"./src/mergeWithKey":352,"./src/min":353,"./src/minBy":354,"./src/modulo":355,"./src/multiply":356,"./src/nAry":357,"./src/negate":358,"./src/none":359,"./src/not":360,"./src/nth":361,"./src/nthArg":362,"./src/objOf":363,"./src/of":364,"./src/omit":365,"./src/once":366,"./src/or":367,"./src/over":368,"./src/pair":369,"./src/partial":370,"./src/partialRight":371,"./src/partition":372,"./src/path":373,"./src/pathEq":374,"./src/pathOr":375,"./src/pathSatisfies":376,"./src/pick":377,"./src/pickAll":378,"./src/pickBy":379,"./src/pipe":380,"./src/pipeK":381,"./src/pipeP":382,"./src/pluck":383,"./src/prepend":384,"./src/product":385,"./src/project":386,"./src/prop":387,"./src/propEq":388,"./src/propIs":389,"./src/propOr":390,"./src/propSatisfies":391,"./src/props":392,"./src/range":393,"./src/reduce":394,"./src/reduceBy":395,"./src/reduceRight":396,"./src/reduceWhile":397,"./src/reduced":398,"./src/reject":399,"./src/remove":400,"./src/repeat":401,"./src/replace":402,"./src/reverse":403,"./src/scan":404,"./src/sequence":405,"./src/set":406,"./src/slice":407,"./src/sort":408,"./src/sortBy":409,"./src/sortWith":410,"./src/split":411,"./src/splitAt":412,"./src/splitEvery":413,"./src/splitWhen":414,"./src/subtract":415,"./src/sum":416,"./src/symmetricDifference":417,"./src/symmetricDifferenceWith":418,"./src/tail":419,"./src/take":420,"./src/takeLast":421,"./src/takeLastWhile":422,"./src/takeWhile":423,"./src/tap":424,"./src/test":425,"./src/times":426,"./src/toLower":427,"./src/toPairs":428,"./src/toPairsIn":429,"./src/toString":430,"./src/toUpper":431,"./src/transduce":432,"./src/transpose":433,"./src/traverse":434,"./src/trim":435,"./src/tryCatch":436,"./src/type":437,"./src/unapply":438,"./src/unary":439,"./src/uncurryN":440,"./src/unfold":441,"./src/union":442,"./src/unionWith":443,"./src/uniq":444,"./src/uniqBy":445,"./src/uniqWith":446,"./src/unless":447,"./src/unnest":448,"./src/until":449,"./src/update":450,"./src/useWith":451,"./src/values":452,"./src/valuesIn":453,"./src/view":454,"./src/when":455,"./src/where":456,"./src/whereEq":457,"./src/without":458,"./src/xprod":459,"./src/zip":460,"./src/zipObj":461,"./src/zipWith":462}],155:[function(e,t){var n=e("./always");t.exports=n(!1)},{"./always":163}],156:[function(e,t){var n=e("./always");t.exports=n(!0)},{"./always":163}],157:[function(e,t){t.exports={"@@functional/placeholder":!0}},{}],158:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return+e+ +t})},{"./internal/_curry2":256}],159:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry1"),i=e("./curryN");t.exports=a(function(e){return i(e.length,function(){var t=0,a=arguments[0],i=arguments[arguments.length-1],o=Array.prototype.slice.call(arguments,0);return o[0]=function(){var e=a.apply(this,n(arguments,[t,i]));return t+=1,e},e.apply(this,o)})})},{"./curryN":195,"./internal/_concat":251,"./internal/_curry1":255}],160:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry3");t.exports=a(function(e,t,a){if(t>=a.length||t<-a.length)return a;var i=0>t?a.length:0,o=i+t,r=n(a);return r[o]=e(a[o]),r})},{"./internal/_concat":251,"./internal/_curry3":257}],161:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xall");t.exports=n(a(["all"],i,function(e,t){for(var n=0;n<t.length;){if(!e(t[n]))return!1;n+=1}return!0}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xall":292}],162:[function(e,t){var n=e("./internal/_curry1"),a=e("./curryN"),i=e("./max"),o=e("./pluck"),r=e("./reduce");t.exports=n(function(e){return a(r(i,0,o("length",e)),function(){for(var t=0,n=e.length;t<n;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0})})},{"./curryN":195,"./internal/_curry1":255,"./max":344,"./pluck":383,"./reduce":394}],163:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return function(){return e}})},{"./internal/_curry1":255}],164:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e&&t})},{"./internal/_curry2":256}],165:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xany");t.exports=n(a(["any"],i,function(e,t){for(var n=0;n<t.length;){if(e(t[n]))return!0;n+=1}return!1}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xany":293}],166:[function(e,t){var n=e("./internal/_curry1"),a=e("./curryN"),i=e("./max"),o=e("./pluck"),r=e("./reduce");t.exports=n(function(e){return a(r(i,0,o("length",e)),function(){for(var t=0,n=e.length;t<n;){if(e[t].apply(this,arguments))return!0;t+=1}return!1})})},{"./curryN":195,"./internal/_curry1":255,"./max":344,"./pluck":383,"./reduce":394}],167:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry2"),i=e("./internal/_reduce"),o=e("./map");t.exports=a(function(e,t){return"function"==typeof e.ap?e.ap(t):"function"==typeof e?function(n){return e(n)(t(n))}:i(function(e,a){return n(e,o(a,t))},[],e)})},{"./internal/_concat":251,"./internal/_curry2":256,"./internal/_reduce":287,"./map":338}],168:[function(e,t){var n=e("./internal/_aperture"),a=e("./internal/_curry2"),i=e("./internal/_dispatchable"),o=e("./internal/_xaperture");t.exports=a(i([],o,n))},{"./internal/_aperture":243,"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xaperture":294}],169:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry2");t.exports=a(function(e,t){return n(t,[e])})},{"./internal/_concat":251,"./internal/_curry2":256}],170:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e.apply(this,t)})},{"./internal/_curry2":256}],171:[function(e,t){var n=e("./internal/_curry1"),a=e("./apply"),i=e("./curryN"),o=e("./map"),r=e("./max"),l=e("./pluck"),s=e("./reduce"),d=e("./values");t.exports=n(function e(t){return t=o(function(t){return"function"==typeof t?t:e(t)},t),i(s(r,0,l("length",d(t))),function(){var e=arguments;return o(function(t){return a(t,e)},t)})})},{"./apply":170,"./curryN":195,"./internal/_curry1":255,"./map":338,"./max":344,"./pluck":383,"./reduce":394,"./values":452}],172:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var a=e(t),i=e(n);return a<i?-1:a>i?1:0})},{"./internal/_curry3":257}],173:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var a={};for(var i in n)a[i]=n[i];return a[e]=t,a})},{"./internal/_curry3":257}],174:[function(e,t){var n=e("./internal/_curry3"),a=e("./internal/_has"),i=e("./internal/_isArray"),o=e("./internal/_isInteger"),r=e("./assoc");t.exports=n(function e(t,n,l){if(0===t.length)return n;var s=t[0];if(1<t.length){var d=a(s,l)?l[s]:o(t[1])?[]:{};n=e(Array.prototype.slice.call(t,1),n,d)}if(o(s)&&i(l)){var p=[].concat(l);return p[s]=n,p}return r(s,n,l)})},{"./assoc":173,"./internal/_curry3":257,"./internal/_has":267,"./internal/_isArray":271,"./internal/_isInteger":273}],175:[function(e,t){var n=e("./internal/_curry1"),a=e("./nAry");t.exports=n(function(e){return a(2,e)})},{"./internal/_curry1":255,"./nAry":357}],176:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_curry2");t.exports=a(function(e,t){return n(e.length,function(){return e.apply(t,arguments)})})},{"./internal/_arity":244,"./internal/_curry2":256}],177:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isFunction"),i=e("./and"),o=e("./lift");t.exports=n(function(e,t){return a(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:o(i)(e,t)})},{"./and":164,"./internal/_curry2":256,"./internal/_isFunction":272,"./lift":334}],178:[function(e,t){var n=e("./curry");t.exports=n(function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))})},{"./curry":194}],179:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_makeFlat"),o=e("./internal/_xchain"),r=e("./map");t.exports=n(a(["chain"],o,function(e,t){return"function"==typeof t?function(n){return e(t(n))(n)}:i(!1)(r(e,t))}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_makeFlat":280,"./internal/_xchain":295,"./map":338}],180:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<e?e:n>t?t:n})},{"./internal/_curry3":257}],181:[function(e,t){var n=e("./internal/_clone"),a=e("./internal/_curry1");t.exports=a(function(e){return null!=e&&"function"==typeof e.clone?e.clone():n(e,[],[],!0)})},{"./internal/_clone":248,"./internal/_curry1":255}],182:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return function(t,n){return e(t,n)?-1:e(n,t)?1:0}})},{"./internal/_curry1":255}],183:[function(e,t){var n=e("./lift"),a=e("./not");t.exports=n(a)},{"./lift":334,"./not":360}],184:[function(e,t){var n=e("./pipe"),a=e("./reverse");t.exports=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return n.apply(this,a(arguments))}},{"./pipe":380,"./reverse":403}],185:[function(e,t){var n=e("./chain"),a=e("./compose"),i=e("./map");t.exports=function(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var e=Array.prototype.slice.call(arguments),t=e.pop();return a(a.apply(this,i(n,e)),t)}},{"./chain":179,"./compose":184,"./map":338}],186:[function(e,t){var n=e("./pipeP"),a=e("./reverse");t.exports=function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return n.apply(this,a(arguments))}},{"./pipeP":382,"./reverse":403}],187:[function(e,t){var n=e("./internal/_curry2"),i=e("./internal/_isArray"),o=e("./internal/_isFunction"),r=e("./toString");t.exports=n(function(e,t){if(null==e||!o(e.concat))throw new TypeError(r(e)+" does not have a method named \"concat\"");if(i(e)&&!i(t))throw new TypeError(r(t)+" is not an array");return e.concat(t)})},{"./internal/_curry2":256,"./internal/_isArray":271,"./internal/_isFunction":272,"./toString":430}],188:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_curry1"),i=e("./map"),o=e("./max"),r=e("./reduce");t.exports=a(function(e){var t=r(o,0,i(function(e){return e[0].length},e));return n(t,function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}})})},{"./internal/_arity":244,"./internal/_curry1":255,"./map":338,"./max":344,"./reduce":394}],189:[function(e,t){var n=e("./internal/_curry1"),a=e("./constructN");t.exports=n(function(e){return a(e.length,e)})},{"./constructN":190,"./internal/_curry1":255}],190:[function(e,t){var n=e("./internal/_curry2"),a=e("./curry"),i=e("./nAry");t.exports=n(function(e,t){if(10<e)throw new Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:a(i(e,function(e,n,a,i,o,r,l,s,d,p){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,n);case 3:return new t(e,n,a);case 4:return new t(e,n,a,i);case 5:return new t(e,n,a,i,o);case 6:return new t(e,n,a,i,o,r);case 7:return new t(e,n,a,i,o,r,l);case 8:return new t(e,n,a,i,o,r,l,s);case 9:return new t(e,n,a,i,o,r,l,s,d);case 10:return new t(e,n,a,i,o,r,l,s,d,p);}}))})},{"./curry":194,"./internal/_curry2":256,"./nAry":357}],191:[function(e,t){var n=e("./internal/_contains"),a=e("./internal/_curry2");t.exports=a(n)},{"./internal/_contains":252,"./internal/_curry2":256}],192:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_map"),i=e("./curryN"),o=e("./max"),r=e("./pluck"),l=e("./reduce");t.exports=n(function(e,t){return i(l(o,0,r("length",t)),function(){var n=arguments,i=this;return e.apply(i,a(function(e){return e.apply(i,n)},t))})})},{"./curryN":195,"./internal/_curry2":256,"./internal/_map":281,"./max":344,"./pluck":383,"./reduce":394}],193:[function(e,t){var n=e("./reduceBy");t.exports=n(function(e){return e+1},0)},{"./reduceBy":395}],194:[function(e,t){var n=e("./internal/_curry1"),a=e("./curryN");t.exports=n(function(e){return a(e.length,e)})},{"./curryN":195,"./internal/_curry1":255}],195:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_curry1"),i=e("./internal/_curry2"),o=e("./internal/_curryN");t.exports=i(function(e,t){return 1===e?a(t):n(e,o(e,[],t))})},{"./internal/_arity":244,"./internal/_curry1":255,"./internal/_curry2":256,"./internal/_curryN":258}],196:[function(e,t){var n=e("./add");t.exports=n(-1)},{"./add":158}],197:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return null==t||t!==t?e:t})},{"./internal/_curry2":256}],198:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var a=e(t),i=e(n);return a>i?-1:a<i?1:0})},{"./internal/_curry3":257}],199:[function(e,t){var n=e("./internal/_contains"),a=e("./internal/_curry2");t.exports=a(function(e,t){for(var a=[],i=0,o=e.length;i<o;)n(e[i],t)||n(e[i],a)||(a[a.length]=e[i]),i+=1;return a})},{"./internal/_contains":252,"./internal/_curry2":256}],200:[function(e,t){var n=e("./internal/_containsWith"),a=e("./internal/_curry3");t.exports=a(function(e,t,a){for(var i=[],o=0,r=t.length;o<r;)n(e,t[o],a)||n(e,t[o],i)||i.push(t[o]),o+=1;return i})},{"./internal/_containsWith":253,"./internal/_curry3":257}],201:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var n={};for(var a in t)n[a]=t[a];return delete n[e],n})},{"./internal/_curry2":256}],202:[function(e,t){var n=e("./internal/_curry2"),a=e("./assoc"),i=e("./dissoc");t.exports=n(function e(t,n){switch(t.length){case 0:return n;case 1:return i(t[0],n);default:var o=t[0],r=Array.prototype.slice.call(t,1);return null==n[o]?n:a(o,e(r,n[o]),n);}})},{"./assoc":173,"./dissoc":201,"./internal/_curry2":256}],203:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e/t})},{"./internal/_curry2":256}],204:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xdrop"),o=e("./slice");t.exports=n(a(["drop"],i,function(e,t){return o(N(0,e),Infinity,t)}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xdrop":296,"./slice":407}],205:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_dropLast"),o=e("./internal/_xdropLast");t.exports=n(a([],o,i))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_dropLast":260,"./internal/_xdropLast":297}],206:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_dropLastWhile"),o=e("./internal/_xdropLastWhile");t.exports=n(a([],o,i))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_dropLastWhile":261,"./internal/_xdropLastWhile":298}],207:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_dispatchable"),i=e("./internal/_xdropRepeatsWith"),o=e("./dropRepeatsWith"),r=e("./equals");t.exports=n(a([],i(r),o(r)))},{"./dropRepeatsWith":208,"./equals":214,"./internal/_curry1":255,"./internal/_dispatchable":259,"./internal/_xdropRepeatsWith":299}],208:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xdropRepeatsWith"),o=e("./last");/**
 * Returns a new list without any consecutively repeating elements. Equality is
 * determined by applying the supplied predicate to each pair of consecutive elements. The
 * first element in a series of equal elements will be preserved.
 *
 * Acts as a transducer if a transformer is given in list position.
 *
 * @func
 * @memberOf R
 * @since v0.14.0
 * @category List
 * @sig (a, a -> Boolean) -> [a] -> [a]
 * @param {Function} pred A predicate used to test whether two items are equal.
 * @param {Array} list The array to consider.
 * @return {Array} `list` without repeating elements.
 * @see R.transduce
 * @example
 *
 *      var l = [1, -1, 1, 3, 4, -4, -4, -5, 5, 3, 3];
 *      R.dropRepeatsWith(R.eqBy(Math.abs), l); //=> [1, 3, 4, -5, 3]
 */t.exports=n(a([],i,function(e,t){var n=[],a=1,i=t.length;if(0!==i)for(n[0]=t[0];a<i;)e(o(n),t[a])||(n[n.length]=t[a]),a+=1;return n}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xdropRepeatsWith":299,"./last":327}],209:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xdropWhile");t.exports=n(a(["dropWhile"],i,function(e,t){for(var n=0,a=t.length;n<a&&e(t[n]);)n+=1;return Array.prototype.slice.call(t,n)}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xdropWhile":300}],210:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isFunction"),i=e("./lift"),o=e("./or");t.exports=n(function(e,t){return a(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:i(o)(e,t)})},{"./internal/_curry2":256,"./internal/_isFunction":272,"./lift":334,"./or":367}],211:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_isArguments"),i=e("./internal/_isArray"),o=e("./internal/_isObject"),r=e("./internal/_isString");t.exports=n(function(e){return null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():i(e)?[]:r(e)?"":o(e)?{}:a(e)?function(){return arguments}():void 0})},{"./internal/_curry1":255,"./internal/_isArguments":270,"./internal/_isArray":271,"./internal/_isObject":275,"./internal/_isString":278}],212:[function(e,t){var n=e("./internal/_curry3"),a=e("./equals");t.exports=n(function(e,t,n){return a(e(t),e(n))})},{"./equals":214,"./internal/_curry3":257}],213:[function(e,t){var n=e("./internal/_curry3"),a=e("./equals");t.exports=n(function(e,t,n){return a(t[e],n[e])})},{"./equals":214,"./internal/_curry3":257}],214:[function(e,t){var n=e("./internal/_curry2"),i=e("./internal/_equals");t.exports=n(function(e,t){return i(e,t,[],[])})},{"./internal/_curry2":256,"./internal/_equals":262}],215:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function e(t,n){var a={},i,o,r;for(o in n)i=t[o],r=typeof i,a[o]="function"===r?i(n[o]):i&&"object"===r?e(i,n[o]):n[o];return a})},{"./internal/_curry2":256}],216:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_filter"),o=e("./internal/_isObject"),r=e("./internal/_reduce"),l=e("./internal/_xfilter"),s=e("./keys");t.exports=n(a(["filter"],l,function(e,t){return o(t)?r(function(n,a){return e(t[a])&&(n[a]=t[a]),n},{},s(t)):i(e,t)}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_filter":263,"./internal/_isObject":275,"./internal/_reduce":287,"./internal/_xfilter":302,"./keys":325}],217:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xfind");t.exports=n(a(["find"],i,function(e,t){for(var n=0,a=t.length;n<a;){if(e(t[n]))return t[n];n+=1}}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xfind":303}],218:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xfindIndex");t.exports=n(a([],i,function(e,t){for(var n=0,a=t.length;n<a;){if(e(t[n]))return n;n+=1}return-1}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xfindIndex":304}],219:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xfindLast");t.exports=n(a([],i,function(e,t){for(var n=t.length-1;0<=n;){if(e(t[n]))return t[n];n-=1}}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xfindLast":305}],220:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xfindLastIndex");t.exports=n(a([],i,function(e,t){for(var n=t.length-1;0<=n;){if(e(t[n]))return n;n-=1}return-1}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xfindLastIndex":306}],221:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_makeFlat");t.exports=n(a(!0))},{"./internal/_curry1":255,"./internal/_makeFlat":280}],222:[function(e,t){var n=e("./internal/_curry1"),a=e("./curry");t.exports=n(function(e){return a(function(t,n){var a=Array.prototype.slice.call(arguments,0);return a[0]=n,a[1]=t,e.apply(this,a)})})},{"./curry":194,"./internal/_curry1":255}],223:[function(e,t){var n=e("./internal/_checkForMethod"),a=e("./internal/_curry2");t.exports=a(n("forEach",function(e,t){for(var n=t.length,a=0;a<n;)e(t[a]),a+=1;return t}))},{"./internal/_checkForMethod":247,"./internal/_curry2":256}],224:[function(e,t){var n=e("./internal/_curry2"),a=e("./keys");t.exports=n(function(e,t){for(var n=a(t),i=0;i<n.length;){var o=n[i];e(t[o],o,t),i+=1}return t})},{"./internal/_curry2":256,"./keys":325}],225:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){for(var t={},n=0;n<e.length;)t[e[n][0]]=e[n][1],n+=1;return t})},{"./internal/_curry1":255}],226:[function(e,t){var n=e("./internal/_checkForMethod"),a=e("./internal/_curry2"),i=e("./reduceBy");t.exports=a(n("groupBy",i(function(e,t){return null==e&&(e=[]),e.push(t),e},null)))},{"./internal/_checkForMethod":247,"./internal/_curry2":256,"./reduceBy":395}],227:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=[],a=0,i=t.length;a<i;){for(var o=a+1;o<i&&e(t[a],t[o]);)o+=1;n.push(t.slice(a,o)),a=o}return n})},{"./internal/_curry2":256}],228:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e>t})},{"./internal/_curry2":256}],229:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e>=t})},{"./internal/_curry2":256}],230:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_has");t.exports=n(a)},{"./internal/_curry2":256,"./internal/_has":267}],231:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e in t})},{"./internal/_curry2":256}],232:[function(e,t){var n=e("./nth");t.exports=n(0)},{"./nth":361}],233:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t})},{"./internal/_curry2":256}],234:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_identity");t.exports=n(a)},{"./internal/_curry1":255,"./internal/_identity":268}],235:[function(e,t){var n=e("./internal/_curry3"),a=e("./curryN");t.exports=n(function(e,t,n){return a(N(e.length,t.length,n.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)})})},{"./curryN":195,"./internal/_curry3":257}],236:[function(e,t){var n=e("./add");t.exports=n(1)},{"./add":158}],237:[function(e,t){var n=e("./reduceBy");t.exports=n(function(e,t){return t},null)},{"./reduceBy":395}],238:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_indexOf"),i=e("./internal/_isArray");t.exports=n(function(e,t){return"function"!=typeof t.indexOf||i(t)?a(t,e,0):t.indexOf(e)})},{"./internal/_curry2":256,"./internal/_indexOf":269,"./internal/_isArray":271}],239:[function(e,t){var n=e("./slice");t.exports=n(0,-1)},{"./slice":407}],240:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){e=e<n.length&&0<=e?e:n.length;var a=Array.prototype.slice.call(n,0);return a.splice(e,0,t),a})},{"./internal/_curry3":257}],241:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e=e<n.length&&0<=e?e:n.length,[].concat(Array.prototype.slice.call(n,0,e),t,Array.prototype.slice.call(n,e))})},{"./internal/_curry3":257}],242:[function(e,t){var n=e("./_contains");t.exports=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}function t(e,t,a){var i=typeof e,o,r;switch(i){case"string":case"number":return 0===e&&1/e==-Infinity?!!a._items["-0"]||(t&&(a._items["-0"]=!0),!1):null===a._nativeSet?i in a._items?!!(e in a._items[i])||(t&&(a._items[i][e]=!0),!1):(t&&(a._items[i]={},a._items[i][e]=!0),!1):t?(o=a._nativeSet.size,a._nativeSet.add(e),r=a._nativeSet.size,r===o):a._nativeSet.has(e);case"boolean":if(i in a._items){var l=e?1:0;return!!a._items[i][l]||(t&&(a._items[i][l]=!0),!1)}return t&&(a._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return null===a._nativeSet?i in a._items?!!n(e,a._items[i])||(t&&a._items[i].push(e),!1):(t&&(a._items[i]=[e]),!1):t?(o=a._nativeSet.size,a._nativeSet.add(e),r=a._nativeSet.size,r===o):a._nativeSet.has(e);case"undefined":return!!a._items[i]||(t&&(a._items[i]=!0),!1);case"object":if(null===e)return!!a._items["null"]||(t&&(a._items["null"]=!0),!1);default:return i=Object.prototype.toString.call(e),i in a._items?!!n(e,a._items[i])||(t&&a._items[i].push(e),!1):(t&&(a._items[i]=[e]),!1);}}return e.prototype.add=function(e){return!t(e,!0,this)},e.prototype.has=function(e){return t(e,!1,this)},e}()},{"./_contains":252}],243:[function(e,t){t.exports=function(e,t){for(var n=0,a=t.length-(e-1),i=Array(0<=a?a:0);n<a;)i[n]=Array.prototype.slice.call(t,n,n+e),n+=1;return i}},{}],244:[function(e,t){t.exports=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(){return t.apply(this,arguments)};case 2:return function(){return t.apply(this,arguments)};case 3:return function(){return t.apply(this,arguments)};case 4:return function(){return t.apply(this,arguments)};case 5:return function(){return t.apply(this,arguments)};case 6:return function(){return t.apply(this,arguments)};case 7:return function(){return t.apply(this,arguments)};case 8:return function(){return t.apply(this,arguments)};case 9:return function(){return t.apply(this,arguments)};case 10:return function(){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten");}}},{}],245:[function(e,t){t.exports=function(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}},{}],246:[function(e,t){var n=e("./_objectAssign");t.exports="function"==typeof Object.assign?Object.assign:n},{"./_objectAssign":282}],247:[function(e,t){var n=e("./_isArray");t.exports=function(e,t){return function(){var a=arguments.length;if(0===a)return t();var i=arguments[a-1];return n(i)||"function"!=typeof i[e]?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,a-1))}}},{"./_isArray":271}],248:[function(e,t){var n=e("./_cloneRegExp"),a=e("../type");t.exports=function e(t,i,o,r){var l=function(n){for(var a=i.length,l=0;l<a;){if(t===i[l])return o[l];l+=1}for(var s in i[l+1]=t,o[l+1]=n,t)n[s]=r?e(t[s],i,o,!0):t[s];return n};switch(a(t)){case"Object":return l({});case"Array":return l([]);case"Date":return new Date(t.valueOf());case"RegExp":return n(t);default:return t;}}},{"../type":437,"./_cloneRegExp":249}],249:[function(e,t){t.exports=function(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}},{}],250:[function(e,t){t.exports=function(e){return function(){return!e.apply(this,arguments)}}},{}],251:[function(e,t){t.exports=function(e,t){e=e||[],t=t||[];var n=e.length,a=t.length,i=[],o;for(o=0;o<n;)i[i.length]=e[o],o+=1;for(o=0;o<a;)i[i.length]=t[o],o+=1;return i}},{}],252:[function(e,t){var n=e("./_indexOf");t.exports=function(e,t){return 0<=n(t,e,0)}},{"./_indexOf":269}],253:[function(e,t){t.exports=function(e,t,n){for(var a=0,i=n.length;a<i;){if(e(t,n[a]))return!0;a+=1}return!1}},{}],254:[function(e,t){var n=e("./_arity"),a=e("./_curry2");t.exports=function(e){return a(function(t,a){return n(N(0,t.length-a.length),function(){return t.apply(this,e(a,arguments))})})}},{"./_arity":244,"./_curry2":256}],255:[function(e,t){var n=e("./_isPlaceholder");t.exports=function(e){return function t(i){return 0===arguments.length||n(i)?t:e.apply(this,arguments)}}},{"./_isPlaceholder":276}],256:[function(e,t){var n=e("./_curry1"),i=e("./_isPlaceholder");t.exports=function(e){return function t(o,a){switch(arguments.length){case 0:return t;case 1:return i(o)?t:n(function(t){return e(o,t)});default:return i(o)&&i(a)?t:i(o)?n(function(t){return e(t,a)}):i(a)?n(function(t){return e(o,t)}):e(o,a);}}}},{"./_curry1":255,"./_isPlaceholder":276}],257:[function(e,t){var n=e("./_curry1"),i=e("./_curry2"),o=e("./_isPlaceholder");t.exports=function(e){return function t(r,a,l){switch(arguments.length){case 0:return t;case 1:return o(r)?t:i(function(t,n){return e(r,t,n)});case 2:return o(r)&&o(a)?t:o(r)?i(function(t,n){return e(t,a,n)}):o(a)?i(function(t,n){return e(r,t,n)}):n(function(t){return e(r,a,t)});default:return o(r)&&o(a)&&o(l)?t:o(r)&&o(a)?i(function(t,n){return e(t,n,l)}):o(r)&&o(l)?i(function(t,n){return e(t,a,n)}):o(a)&&o(l)?i(function(t,n){return e(r,t,n)}):o(r)?n(function(t){return e(t,a,l)}):o(a)?n(function(t){return e(r,t,l)}):o(l)?n(function(t){return e(r,a,t)}):e(r,a,l);}}}},{"./_curry1":255,"./_curry2":256,"./_isPlaceholder":276}],258:[function(e,t){var n=e("./_arity"),a=e("./_isPlaceholder");t.exports=function e(t,i,o){return function(){for(var r=[],l=0,s=t,d=0;d<i.length||l<arguments.length;){var p;d<i.length&&(!a(i[d])||l>=arguments.length)?p=i[d]:(p=arguments[l],l+=1),r[d]=p,a(p)||(s-=1),d+=1}return 0>=s?o.apply(this,r):n(s,e(t,r,o))}}},{"./_arity":244,"./_isPlaceholder":276}],259:[function(e,t){var n=e("./_isArray"),a=e("./_isTransformer");t.exports=function(e,t,i){return function(){if(0===arguments.length)return i();var o=Array.prototype.slice.call(arguments,0),r=o.pop();if(!n(r)){for(var l=0;l<e.length;){if("function"==typeof r[e[l]])return r[e[l]].apply(r,o);l+=1}if(a(r)){var s=t.apply(null,o);return s(r)}}return i.apply(this,arguments)}}},{"./_isArray":271,"./_isTransformer":279}],260:[function(e,t){var a=e("../take");t.exports=function(e,t){return a(e<t.length?t.length-e:0,t)}},{"../take":420}],261:[function(e,t){t.exports=function(e,t){for(var n=t.length-1;0<=n&&e(t[n]);)n-=1;return Array.prototype.slice.call(t,0,n+1)}},{}],262:[function(e,t){var n=e("./_arrayFromIterator"),i=e("./_functionName"),o=e("./_has"),r=e("../identical"),l=e("../keys"),s=e("../type");t.exports=function e(t,d,p,c){if(r(t,d))return!0;if(s(t)!==s(d))return!1;if(null==t||null==d)return!1;if("function"==typeof t.equals||"function"==typeof d.equals)return"function"==typeof t.equals&&t.equals(d)&&"function"==typeof d.equals&&d.equals(t);switch(s(t)){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===i(t.constructor))return t===d;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof d&&r(t.valueOf(),d.valueOf())))return!1;break;case"Date":if(!r(t.valueOf(),d.valueOf()))return!1;break;case"Error":return t.name===d.name&&t.message===d.message;case"RegExp":if(t.source!==d.source||t.global!==d.global||t.ignoreCase!==d.ignoreCase||t.multiline!==d.multiline||t.sticky!==d.sticky||t.unicode!==d.unicode)return!1;break;case"Map":case"Set":if(!e(n(t.entries()),n(d.entries()),p,c))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":break;case"ArrayBuffer":break;default:return!1;}var u=l(t);if(u.length!==l(d).length)return!1;for(var f=p.length-1;0<=f;){if(p[f]===t)return c[f]===d;f-=1}for(p.push(t),c.push(d),f=u.length-1;0<=f;){var m=u[f];if(!(o(m,d)&&e(d[m],t[m],p,c)))return!1;f-=1}return p.pop(),c.pop(),!0}},{"../identical":233,"../keys":325,"../type":437,"./_arrayFromIterator":245,"./_functionName":266,"./_has":267}],263:[function(e,t){t.exports=function(e,t){for(var n=0,a=t.length,i=[];n<a;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}},{}],264:[function(e,t){var n=e("./_forceReduced"),a=e("./_reduce"),i=e("./_xfBase"),o=e("../isArrayLike");t.exports=function(){var e=function(e){return{"@@transducer/init":i.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,a){var i=e["@@transducer/step"](t,a);return i["@@transducer/reduced"]?n(i):i}}};return function(t){var n=e(t);return{"@@transducer/init":i.init,"@@transducer/result":function(e){return n["@@transducer/result"](e)},"@@transducer/step":function(e,t){return o(t)?a(n,e,t):a(n,e,[t])}}}}()},{"../isArrayLike":320,"./_forceReduced":265,"./_reduce":287,"./_xfBase":301}],265:[function(e,t){t.exports=function(e){return{"@@transducer/value":e,"@@transducer/reduced":!0}}},{}],266:[function(e,t){t.exports=function(e){var t=(e+"").match(/^function (\w*)/);return null==t?"":t[1]}},{}],267:[function(e,t){t.exports=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)}},{}],268:[function(e,t){t.exports=function(e){return e}},{}],269:[function(e,t){var n=e("../equals");t.exports=function(e,t,i){var o,r;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(o=1/t;i<e.length;){if(r=e[i],0===r&&1/r===o)return i;i+=1}return-1}if(t!==t){for(;i<e.length;){if(r=e[i],"number"==typeof r&&r!==r)return i;i+=1}return-1}return e.indexOf(t,i);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,i);case"object":if(null===t)return e.indexOf(t,i);}for(;i<e.length;){if(n(e[i],t))return i;i+=1}return-1}},{"../equals":214}],270:[function(e,t){var n=e("./_has");t.exports=function(){var e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return n("callee",e)}}()},{"./_has":267}],271:[function(e,t){t.exports=Array.isArray||function(e){return null!=e&&0<=e.length&&"[object Array]"===Object.prototype.toString.call(e)}},{}],272:[function(e,t){t.exports=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],273:[function(e,t){t.exports=Number.isInteger||function(e){return e<<0===e}},{}],274:[function(e,t){t.exports=function(e){return"[object Number]"===Object.prototype.toString.call(e)}},{}],275:[function(e,t){t.exports=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{}],276:[function(e,t){t.exports=function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}},{}],277:[function(e,t){t.exports=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{}],278:[function(e,t){t.exports=function(e){return"[object String]"===Object.prototype.toString.call(e)}},{}],279:[function(e,t){t.exports=function(e){return"function"==typeof e["@@transducer/step"]}},{}],280:[function(e,t){var n=e("../isArrayLike");t.exports=function(e){return function t(a){for(var i=[],o=0,r=a.length,l,s,d;o<r;){if(n(a[o]))for(l=e?t(a[o]):a[o],d=0,s=l.length;d<s;)i[i.length]=l[d],d+=1;else i[i.length]=a[o];o+=1}return i}}},{"../isArrayLike":320}],281:[function(e,t){t.exports=function(e,t){for(var n=0,a=t.length,i=Array(a);n<a;)i[n]=e(t[n]),n+=1;return i}},{}],282:[function(e,t){var n=e("./_has");t.exports=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),a=1,i=arguments.length;a<i;){var o=arguments[a];if(null!=o)for(var r in o)n(r,o)&&(t[r]=o[r]);a+=1}return t}},{"./_has":267}],283:[function(e,t){t.exports=function(e){return[e]}},{}],284:[function(e,t){t.exports=function(e,t){return function(){return t.call(this,e.apply(this,arguments))}}},{}],285:[function(e,t){t.exports=function(e,t){return function(){var n=this;return e.apply(n,arguments).then(function(e){return t.call(n,e)})}}},{}],286:[function(e,t){t.exports=function(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return"\""+t.replace(/"/g,"\\\"")+"\""}},{}],287:[function(e,t){var n=e("./_xwrap"),a=e("../bind"),i=e("../isArrayLike");t.exports=function(){function e(e,t,n){for(var a=0,i=n.length;a<i;){if(t=e["@@transducer/step"](t,n[a]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}a+=1}return e["@@transducer/result"](t)}function t(e,t,n){for(var a=n.next();!a.done;){if(t=e["@@transducer/step"](t,a.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}a=n.next()}return e["@@transducer/result"](t)}function o(e,t,n){return e["@@transducer/result"](n.reduce(a(e["@@transducer/step"],e),t))}var r="undefined"==typeof Symbol?"@@iterator":Symbol.iterator;return function(a,l,s){if("function"==typeof a&&(a=n(a)),i(s))return e(a,l,s);if("function"==typeof s.reduce)return o(a,l,s);if(null!=s[r])return t(a,l,s[r]());if("function"==typeof s.next)return t(a,l,s);throw new TypeError("reduce: list must be array or iterable")}}()},{"../bind":176,"../isArrayLike":320,"./_xwrap":311}],288:[function(e,t){t.exports=function(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}},{}],289:[function(e,t){var n=e("./_assign"),a=e("./_identity"),i=e("./_isTransformer"),o=e("../isArrayLike"),r=e("../objOf");t.exports=function(){var e={"@@transducer/init":Array,"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":a},t={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":a},l={"@@transducer/init":Object,"@@transducer/step":function(e,t){return n(e,o(t)?r(t[0],t[1]):t)},"@@transducer/result":a};return function(n){if(i(n))return n;if(o(n))return e;if("string"==typeof n)return t;if("object"==typeof n)return l;throw new Error("Cannot create transformer for "+n)}}()},{"../isArrayLike":320,"../objOf":363,"./_assign":246,"./_identity":268,"./_isTransformer":279}],290:[function(e,t){t.exports=function(){var e=function(e){return(10>e?"0":"")+e};return"function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(t){return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}()},{}],291:[function(e,t){var n=e("./_contains"),a=e("./_map"),i=e("./_quote"),o=e("./_toISOString"),r=e("../keys"),l=e("../reject");t.exports=function e(t,s){var d=function(a){var i=s.concat([t]);return n(a,i)?"<Circular>":e(a,i)},p=function(e,t){return a(function(t){return i(t)+": "+d(e[t])},t.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+a(d,t).join(", ")+"))";case"[object Array]":return"["+a(d,t).concat(p(t,l(function(e){return /^\d+$/.test(e)},r(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+d(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?d(NaN):i(o(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+d(t.valueOf())+")":1/t==-Infinity?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+d(t.valueOf())+")":i(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var c=t.toString();if("[object Object]"!==c)return c}return"{"+p(t,r(t)).join(", ")+"}";}}},{"../keys":325,"../reject":399,"./_contains":252,"./_map":281,"./_quote":286,"./_toISOString":290}],292:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=a(this.xf["@@transducer/step"](e,!1))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_reduced":288,"./_xfBase":301}],293:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=a(this.xf["@@transducer/step"](e,!0))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_reduced":288,"./_xfBase":301}],294:[function(e,t){var n=e("./_concat"),a=e("./_curry2"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=Array(e)}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return n(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},a(function(t,n){return new e(t,n)})}()},{"./_concat":251,"./_curry2":256,"./_xfBase":301}],295:[function(e,t){var n=e("./_curry2"),a=e("./_flatCat"),i=e("../map");t.exports=n(function(e,t){return i(e,a(t))})},{"../map":338,"./_curry2":256,"./_flatCat":264}],296:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){return 0<this.n?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_xfBase":301}],297:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=Array(e)}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_xfBase":301}],298:[function(e,t){var n=e("./_curry2"),a=e("./_reduce"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.f=e,this.retained=[],this.xf=t}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},e.prototype.flush=function(e,t){return e=a(this.xf["@@transducer/step"],e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},e.prototype.retain=function(e,t){return this.retained.push(t),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_reduce":287,"./_xfBase":301}],299:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(n=!0):this.seenFirstValue=!0,this.lastValue=t,n?e:this.xf["@@transducer/step"](e,t)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_xfBase":301}],300:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_xfBase":301}],301:[function(e,t){t.exports={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}}},{}],302:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_xfBase":301}],303:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=a(this.xf["@@transducer/step"](e,t))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_reduced":288,"./_xfBase":301}],304:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=a(this.xf["@@transducer/step"](e,this.idx))),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_reduced":288,"./_xfBase":301}],305:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_xfBase":301}],306:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_xfBase":301}],307:[function(e,t){var n=e("./_curry2"),a=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_xfBase":301}],308:[function(e,t){var n=e("./_curryN"),a=e("./_has"),i=e("./_xfBase");t.exports=function(){function e(e,t,n,a){this.valueFn=e,this.valueAcc=t,this.keyFn=n,this.xf=a,this.inputs={}}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=function(e){for(var t in this.inputs)if(a(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]),e["@@transducer/reduced"])){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=this.keyFn(t);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],t),e},n(4,[],function(t,n,a,i){return new e(t,n,a,i)})}()},{"./_curryN":258,"./_has":267,"./_xfBase":301}],309:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=i.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var n=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.i>=this.n?a(n):n},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_reduced":288,"./_xfBase":301}],310:[function(e,t){var n=e("./_curry2"),a=e("./_reduced"),i=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=i.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):a(e)},n(function(t,n){return new e(t,n)})}()},{"./_curry2":256,"./_reduced":288,"./_xfBase":301}],311:[function(e,t){t.exports=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},function(t){return new e(t)}}()},{}],312:[function(e,t){var n=e("./internal/_contains"),a=e("./internal/_curry2"),i=e("./internal/_filter"),o=e("./flip"),r=e("./uniq");t.exports=a(function(e,t){var a,l;return e.length>t.length?(a=e,l=t):(a=t,l=e),r(i(o(n)(a),l))})},{"./flip":222,"./internal/_contains":252,"./internal/_curry2":256,"./internal/_filter":263,"./uniq":444}],313:[function(e,t){var n=e("./internal/_containsWith"),a=e("./internal/_curry3"),i=e("./uniqWith");t.exports=a(function(e,t,a){var o,r;t.length>a.length?(o=t,r=a):(o=a,r=t);for(var l=[],s=0;s<r.length;)n(e,r[s],o)&&(l[l.length]=r[s]),s+=1;return i(e,l)})},{"./internal/_containsWith":253,"./internal/_curry3":257,"./uniqWith":446}],314:[function(e,t){var n=e("./internal/_checkForMethod"),a=e("./internal/_curry2");t.exports=a(n("intersperse",function(e,t){for(var n=[],a=0,i=t.length;a<i;)a==i-1?n.push(t[a]):n.push(t[a],e),a+=1;return n}))},{"./internal/_checkForMethod":247,"./internal/_curry2":256}],315:[function(e,t){var n=e("./internal/_clone"),a=e("./internal/_curry3"),i=e("./internal/_isTransformer"),o=e("./internal/_reduce"),r=e("./internal/_stepCat");t.exports=a(function(e,t,a){return i(e)?o(t(e),e["@@transducer/init"](),a):o(t(r(e)),n(e,[],[],!1),a)})},{"./internal/_clone":248,"./internal/_curry3":257,"./internal/_isTransformer":279,"./internal/_reduce":287,"./internal/_stepCat":289}],316:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_has"),i=e("./keys");t.exports=n(function(e){for(var t=i(e),n=t.length,o=0,r={};o<n;){var l=t[o],s=e[l],d=a(s,r)?r[s]:r[s]=[];d[d.length]=l,o+=1}return r})},{"./internal/_curry1":255,"./internal/_has":267,"./keys":325}],317:[function(e,t){var n=e("./internal/_curry1"),a=e("./keys");t.exports=n(function(e){for(var t=a(e),n=t.length,i=0,o={};i<n;){var r=t[i];o[e[r]]=r,i+=1}return o})},{"./internal/_curry1":255,"./keys":325}],318:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isFunction"),i=e("./curryN"),o=e("./toString");t.exports=n(function(e,t){return i(e+1,function(){var n=arguments[e];if(null!=n&&a(n[t]))return n[t].apply(n,Array.prototype.slice.call(arguments,0,e));throw new TypeError(o(n)+" does not have a method named \""+t+"\"")})})},{"./curryN":195,"./internal/_curry2":256,"./internal/_isFunction":272,"./toString":430}],319:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return null!=t&&t.constructor===e||t instanceof e})},{"./internal/_curry2":256}],320:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_isArray"),i=e("./internal/_isString");t.exports=n(function(e){return!!a(e)||!!e&&!("object"!=typeof e)&&!i(e)&&(1===e.nodeType?!!e.length:!(0!==e.length)||!!(0<e.length)&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))})},{"./internal/_curry1":255,"./internal/_isArray":271,"./internal/_isString":278}],321:[function(e,t){var n=e("./internal/_curry1"),a=e("./empty"),i=e("./equals");t.exports=n(function(e){return null!=e&&i(e,a(e))})},{"./empty":211,"./equals":214,"./internal/_curry1":255}],322:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return null==e})},{"./internal/_curry1":255}],323:[function(e,t){var n=e("./invoker");t.exports=n(1,"join")},{"./invoker":318}],324:[function(e,t){var n=e("./internal/_curry1"),a=e("./converge");t.exports=n(function(e){return a(function(){return Array.prototype.slice.call(arguments,0)},e)})},{"./converge":192,"./internal/_curry1":255}],325:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_has"),i=e("./internal/_isArguments");t.exports=function(){var e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],o=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),r=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};return"function"!=typeof Object.keys||o?n(function(n){if(Object(n)!==n)return[];var l=[],s=o&&i(n),d,p;for(d in n)a(d,n)&&(!s||"length"!==d)&&(l[l.length]=d);if(e)for(p=t.length-1;0<=p;)d=t[p],a(d,n)&&!r(l,d)&&(l[l.length]=d),p-=1;return l}):n(function(e){return Object(e)===e?Object.keys(e):[]})}()},{"./internal/_curry1":255,"./internal/_has":267,"./internal/_isArguments":270}],326:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){var t=[],n;for(n in e)t[t.length]=n;return t})},{"./internal/_curry1":255}],327:[function(e,t){var n=e("./nth");t.exports=n(-1)},{"./nth":361}],328:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isArray"),i=e("./equals");t.exports=n(function(e,t){if("function"==typeof t.lastIndexOf&&!a(t))return t.lastIndexOf(e);for(var n=t.length-1;0<=n;){if(i(t[n],e))return n;n-=1}return-1})},{"./equals":214,"./internal/_curry2":256,"./internal/_isArray":271}],329:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_isNumber");t.exports=n(function(e){return null!=e&&a(e.length)?e.length:NaN})},{"./internal/_curry1":255,"./internal/_isNumber":274}],330:[function(e,t){var n=e("./internal/_curry2"),a=e("./map");t.exports=n(function(e,t){return function(n){return function(i){return a(function(e){return t(e,i)},n(e(i)))}}})},{"./internal/_curry2":256,"./map":338}],331:[function(e,t){var n=e("./internal/_curry1"),a=e("./lens"),i=e("./nth"),o=e("./update");t.exports=n(function(e){return a(i(e),o(e))})},{"./internal/_curry1":255,"./lens":330,"./nth":361,"./update":450}],332:[function(e,t){var n=e("./internal/_curry1"),a=e("./assocPath"),i=e("./lens"),o=e("./path");t.exports=n(function(e){return i(o(e),a(e))})},{"./assocPath":174,"./internal/_curry1":255,"./lens":330,"./path":373}],333:[function(e,t){var n=e("./internal/_curry1"),a=e("./assoc"),i=e("./lens"),o=e("./prop");t.exports=n(function(e){return i(o(e),a(e))})},{"./assoc":173,"./internal/_curry1":255,"./lens":330,"./prop":387}],334:[function(e,t){var n=e("./internal/_curry1"),a=e("./liftN");t.exports=n(function(e){return a(e.length,e)})},{"./internal/_curry1":255,"./liftN":335}],335:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_reduce"),i=e("./ap"),o=e("./curryN"),r=e("./map");t.exports=n(function(e,t){var n=o(e,t);return o(e,function(){return a(i,r(n,arguments[0]),Array.prototype.slice.call(arguments,1))})})},{"./ap":167,"./curryN":195,"./internal/_curry2":256,"./internal/_reduce":287,"./map":338}],336:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e<t})},{"./internal/_curry2":256}],337:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e<=t})},{"./internal/_curry2":256}],338:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_map"),o=e("./internal/_reduce"),r=e("./internal/_xmap"),l=e("./curryN"),s=e("./keys");t.exports=n(a(["map"],r,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return l(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return o(function(n,a){return n[a]=e(t[a]),n},{},s(t));default:return i(e,t);}}))},{"./curryN":195,"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_map":281,"./internal/_reduce":287,"./internal/_xmap":307,"./keys":325}],339:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=0,i=n.length,o=[],r=[t];a<i;)r=e(r[0],n[a]),o[a]=r[1],a+=1;return[r[0],o]})},{"./internal/_curry3":257}],340:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=n.length-1,i=[],o=[t];0<=a;)o=e(n[a],o[0]),i[a]=o[1],a-=1;return[i,o[0]]})},{"./internal/_curry3":257}],341:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_reduce"),i=e("./keys");t.exports=n(function(e,t){return a(function(n,a){return n[a]=e(t[a],a,t),n},{},i(t))})},{"./internal/_curry2":256,"./internal/_reduce":287,"./keys":325}],342:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t.match(e)||[]})},{"./internal/_curry2":256}],343:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isInteger");t.exports=n(function(e,t){return a(e)?!a(t)||1>t?NaN:(e%t+t)%t:NaN})},{"./internal/_curry2":256,"./internal/_isInteger":273}],344:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t>e?t:e})},{"./internal/_curry2":256}],345:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)>e(t)?n:t})},{"./internal/_curry3":257}],346:[function(e,t){var n=e("./internal/_curry1"),a=e("./sum");t.exports=n(function(e){return a(e)/e.length})},{"./internal/_curry1":255,"./sum":416}],347:[function(e,t){var n=e("./internal/_curry1"),a=e("./mean");t.exports=n(function(e){var t=e.length;if(0===t)return NaN;var n=2-t%2,i=(t-n)/2;return a(Array.prototype.slice.call(e,0).sort(function(e,t){return e<t?-1:e>t?1:0}).slice(i,i+n))})},{"./internal/_curry1":255,"./mean":346}],348:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_curry1"),i=e("./internal/_has"),o=e("./toString");t.exports=a(function(e){var t={};return n(e.length,function(){var n=o(arguments);return i(n,t)||(t[n]=e.apply(this,arguments)),t[n]})})},{"./internal/_arity":244,"./internal/_curry1":255,"./internal/_has":267,"./toString":430}],349:[function(e,t){var n=e("./internal/_assign"),a=e("./internal/_curry2");t.exports=a(function(e,t){return n({},e,t)})},{"./internal/_assign":246,"./internal/_curry2":256}],350:[function(e,t){var n=e("./internal/_assign"),a=e("./internal/_curry1");t.exports=a(function(e){return n.apply(null,[{}].concat(e))})},{"./internal/_assign":246,"./internal/_curry1":255}],351:[function(e,t){var n=e("./internal/_curry3"),a=e("./mergeWithKey");t.exports=n(function(e,t,n){return a(function(t,n,a){return e(n,a)},t,n)})},{"./internal/_curry3":257,"./mergeWithKey":352}],352:[function(e,t){var n=e("./internal/_curry3"),a=e("./internal/_has");t.exports=n(function(e,t,n){var i={},o;for(o in t)a(o,t)&&(i[o]=a(o,n)?e(o,t[o],n[o]):t[o]);for(o in n)a(o,n)&&!a(o,i)&&(i[o]=n[o]);return i})},{"./internal/_curry3":257,"./internal/_has":267}],353:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t<e?t:e})},{"./internal/_curry2":256}],354:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)<e(t)?n:t})},{"./internal/_curry3":257}],355:[function(e,t){var n=e("./internal/_curry2");/**
 * Divides the first parameter by the second and returns the remainder. Note
 * that this function preserves the JavaScript-style behavior for modulo. For
 * mathematical modulo see `mathMod`.
 *
 * @func
 * @memberOf R
 * @since v0.1.1
 * @category Math
 * @sig Number -> Number -> Number
 * @param {Number} a The value to the divide.
 * @param {Number} b The pseudo-modulus
 * @return {Number} The result of `b % a`.
 * @see R.mathMod
 * @example
 *
 *      R.modulo(17, 3); //=> 2
 *      // JS behavior:
 *      R.modulo(-17, 3); //=> -2
 *      R.modulo(17, -3); //=> 2
 *
 *      var isOdd = R.modulo(R.__, 2);
 *      isOdd(42); //=> 0
 *      isOdd(21); //=> 1
 */t.exports=n(function(e,t){return e%t})},{"./internal/_curry2":256}],356:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e*t})},{"./internal/_curry2":256}],357:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,n){return t.call(this,e,n)};case 3:return function(e,n,a){return t.call(this,e,n,a)};case 4:return function(e,n,a,i){return t.call(this,e,n,a,i)};case 5:return function(e,n,a,i,o){return t.call(this,e,n,a,i,o)};case 6:return function(e,n,a,i,o,r){return t.call(this,e,n,a,i,o,r)};case 7:return function(e,n,a,i,o,r,l){return t.call(this,e,n,a,i,o,r,l)};case 8:return function(e,n,a,i,o,r,l,s){return t.call(this,e,n,a,i,o,r,l,s)};case 9:return function(e,n,a,i,o,r,l,s,d){return t.call(this,e,n,a,i,o,r,l,s,d)};case 10:return function(e,n,a,i,o,r,l,s,d,p){return t.call(this,e,n,a,i,o,r,l,s,d,p)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten");}})},{"./internal/_curry2":256}],358:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return-e})},{"./internal/_curry1":255}],359:[function(e,t){var n=e("./internal/_complement"),a=e("./internal/_curry2"),i=e("./internal/_dispatchable"),o=e("./internal/_xany"),r=e("./any");t.exports=a(n(i(["any"],o,r)))},{"./any":165,"./internal/_complement":250,"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xany":293}],360:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return!e})},{"./internal/_curry1":255}],361:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isString");t.exports=n(function(e,t){var n=0>e?t.length+e:e;return a(t)?t.charAt(n):t[n]})},{"./internal/_curry2":256,"./internal/_isString":278}],362:[function(e,t){var n=e("./internal/_curry1"),a=e("./curryN"),i=e("./nth");t.exports=n(function(e){var t=0>e?1:e+1;return a(t,function(){return i(e,arguments)})})},{"./curryN":195,"./internal/_curry1":255,"./nth":361}],363:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var n={};return n[e]=t,n})},{"./internal/_curry2":256}],364:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_of");t.exports=n(a)},{"./internal/_curry1":255,"./internal/_of":283}],365:[function(e,t){var n=e("./internal/_contains"),a=e("./internal/_curry2");t.exports=a(function(e,t){var a={};for(var i in t)n(i,e)||(a[i]=t[i]);return a})},{"./internal/_contains":252,"./internal/_curry2":256}],366:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_curry1");t.exports=a(function(e){var t=!1,a;return n(e.length,function(){return t?a:(t=!0,a=e.apply(this,arguments),a)})})},{"./internal/_arity":244,"./internal/_curry1":255}],367:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e||t})},{"./internal/_curry2":256}],368:[function(e,t){var n=e("./internal/_curry3");t.exports=function(){var e=function(t){return{value:t,map:function(n){return e(n(t))}}};return n(function(t,n,a){return t(function(t){return e(n(t))})(a).value})}()},{"./internal/_curry3":257}],369:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return[e,t]})},{"./internal/_curry2":256}],370:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_createPartialApplicator");t.exports=a(n)},{"./internal/_concat":251,"./internal/_createPartialApplicator":254}],371:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_createPartialApplicator"),i=e("./flip");t.exports=a(i(n))},{"./flip":222,"./internal/_concat":251,"./internal/_createPartialApplicator":254}],372:[function(e,t){var n=e("./filter"),a=e("./juxt"),i=e("./reject");t.exports=a([n,i])},{"./filter":216,"./juxt":324,"./reject":399}],373:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=t,a=0;a<e.length;){if(null==n)return;n=n[e[a]],a+=1}return n})},{"./internal/_curry2":256}],374:[function(e,t){var n=e("./internal/_curry3"),a=e("./equals"),i=e("./path");t.exports=n(function(e,t,n){return a(i(e,n),t)})},{"./equals":214,"./internal/_curry3":257,"./path":373}],375:[function(e,t){var n=e("./internal/_curry3"),a=e("./defaultTo"),i=e("./path");t.exports=n(function(e,t,n){return a(e,i(t,n))})},{"./defaultTo":197,"./internal/_curry3":257,"./path":373}],376:[function(e,t){var n=e("./internal/_curry3"),a=e("./path");t.exports=n(function(e,t,n){return 0<t.length&&e(a(t,n))})},{"./internal/_curry3":257,"./path":373}],377:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n={},a=0;a<e.length;)e[a]in t&&(n[e[a]]=t[e[a]]),a+=1;return n})},{"./internal/_curry2":256}],378:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n={},a=0,i=e.length;a<i;){var o=e[a];n[o]=t[o],a+=1}return n})},{"./internal/_curry2":256}],379:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var n={};for(var a in t)e(t[a],a,t)&&(n[a]=t[a]);return n})},{"./internal/_curry2":256}],380:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_pipe"),i=e("./reduce"),o=e("./tail");t.exports=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return n(arguments[0].length,i(a,arguments[0],o(arguments)))}},{"./internal/_arity":244,"./internal/_pipe":284,"./reduce":394,"./tail":419}],381:[function(e,t){var n=e("./composeK"),a=e("./reverse");t.exports=function(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return n.apply(this,a(arguments))}},{"./composeK":185,"./reverse":403}],382:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_pipeP"),i=e("./reduce"),o=e("./tail");t.exports=function(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return n(arguments[0].length,i(a,arguments[0],o(arguments)))}},{"./internal/_arity":244,"./internal/_pipeP":285,"./reduce":394,"./tail":419}],383:[function(e,t){var n=e("./internal/_curry2"),a=e("./map"),i=e("./prop");t.exports=n(function(e,t){return a(i(e),t)})},{"./internal/_curry2":256,"./map":338,"./prop":387}],384:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry2");t.exports=a(function(e,t){return n([e],t)})},{"./internal/_concat":251,"./internal/_curry2":256}],385:[function(e,t){var n=e("./multiply"),a=e("./reduce");t.exports=a(n,1)},{"./multiply":356,"./reduce":394}],386:[function(e,t){var n=e("./internal/_map"),a=e("./identity"),i=e("./pickAll"),o=e("./useWith");t.exports=o(n,[i,a])},{"./identity":234,"./internal/_map":281,"./pickAll":378,"./useWith":451}],387:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return t[e]})},{"./internal/_curry2":256}],388:[function(e,t){var n=e("./internal/_curry3"),a=e("./equals");t.exports=n(function(e,t,n){return a(t,n[e])})},{"./equals":214,"./internal/_curry3":257}],389:[function(e,t){var n=e("./internal/_curry3"),a=e("./is");t.exports=n(function(e,t,n){return a(e,n[t])})},{"./internal/_curry3":257,"./is":319}],390:[function(e,t){var n=e("./internal/_curry3"),a=e("./internal/_has");t.exports=n(function(e,t,n){return null!=n&&a(t,n)?n[t]:e})},{"./internal/_curry3":257,"./internal/_has":267}],391:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n[t])})},{"./internal/_curry3":257}],392:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=e.length,a=[],i=0;i<n;)a[i]=t[e[i]],i+=1;return a})},{"./internal/_curry2":256}],393:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_isNumber");t.exports=n(function(e,t){if(!(a(e)&&a(t)))throw new TypeError("Both arguments to range must be numbers");for(var i=[],o=e;o<t;)i.push(o),o+=1;return i})},{"./internal/_curry2":256,"./internal/_isNumber":274}],394:[function(e,t){var n=e("./internal/_curry3"),a=e("./internal/_reduce");t.exports=n(a)},{"./internal/_curry3":257,"./internal/_reduce":287}],395:[function(e,t){var n=e("./internal/_curryN"),a=e("./internal/_dispatchable"),i=e("./internal/_has"),o=e("./internal/_reduce"),r=e("./internal/_xreduceBy");t.exports=n(4,[],a([],r,function(e,t,n,a){return o(function(a,o){var r=n(o);return a[r]=e(i(r,a)?a[r]:t,o),a},{},a)}))},{"./internal/_curryN":258,"./internal/_dispatchable":259,"./internal/_has":267,"./internal/_reduce":287,"./internal/_xreduceBy":308}],396:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=n.length-1;0<=a;)t=e(n[a],t),a-=1;return t})},{"./internal/_curry3":257}],397:[function(e,t){var n=e("./internal/_curryN"),i=e("./internal/_reduce"),a=e("./internal/_reduced");t.exports=n(4,[],function(e,t,n,o){return i(function(n,i){return e(n,i)?t(n,i):a(n)},n,o)})},{"./internal/_curryN":258,"./internal/_reduce":287,"./internal/_reduced":288}],398:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_reduced");t.exports=n(a)},{"./internal/_curry1":255,"./internal/_reduced":288}],399:[function(e,t){var n=e("./internal/_complement"),a=e("./internal/_curry2"),i=e("./filter");t.exports=a(function(e,t){return i(n(e),t)})},{"./filter":216,"./internal/_complement":250,"./internal/_curry2":256}],400:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){var a=Array.prototype.slice.call(n,0);return a.splice(e,t),a})},{"./internal/_curry3":257}],401:[function(e,t){var n=e("./internal/_curry2"),a=e("./always"),i=e("./times");t.exports=n(function(e,t){return i(a(e),t)})},{"./always":163,"./internal/_curry2":256,"./times":426}],402:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return n.replace(e,t)})},{"./internal/_curry3":257}],403:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_isString");t.exports=n(function(e){return a(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()})},{"./internal/_curry1":255,"./internal/_isString":278}],404:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=0,i=n.length,o=[t];a<i;)t=e(t,n[a]),o[a+1]=t,a+=1;return o})},{"./internal/_curry3":257}],405:[function(e,t){var n=e("./internal/_curry2"),a=e("./ap"),i=e("./map"),o=e("./prepend"),r=e("./reduceRight");t.exports=n(function(e,t){return"function"==typeof t.sequence?t.sequence(e):r(function(e,t){return a(i(o,e),t)},e([]),t)})},{"./ap":167,"./internal/_curry2":256,"./map":338,"./prepend":384,"./reduceRight":396}],406:[function(e,t){var n=e("./internal/_curry3"),a=e("./always"),i=e("./over");t.exports=n(function(e,t,n){return i(e,a(t),n)})},{"./always":163,"./internal/_curry3":257,"./over":368}],407:[function(e,t){var n=e("./internal/_checkForMethod"),a=e("./internal/_curry3");t.exports=a(n("slice",function(e,t,n){return Array.prototype.slice.call(n,e,t)}))},{"./internal/_checkForMethod":247,"./internal/_curry3":257}],408:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return Array.prototype.slice.call(t,0).sort(e)})},{"./internal/_curry2":256}],409:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return Array.prototype.slice.call(t,0).sort(function(t,n){var a=e(t),i=e(n);return a<i?-1:a>i?1:0})})},{"./internal/_curry2":256}],410:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return Array.prototype.slice.call(t,0).sort(function(t,n){for(var a=0,o=0;0==a&&o<e.length;)a=e[o](t,n),o+=1;return a})})},{"./internal/_curry2":256}],411:[function(e,t){var n=e("./invoker");t.exports=n(1,"split")},{"./invoker":318}],412:[function(e,t){var n=e("./internal/_curry2"),a=e("./length"),i=e("./slice");t.exports=n(function(e,t){return[i(0,e,t),i(e,a(t),t)]})},{"./internal/_curry2":256,"./length":329,"./slice":407}],413:[function(e,t){var n=e("./internal/_curry2"),a=e("./slice");t.exports=n(function(e,t){if(0>=e)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],i=0;i<t.length;)n.push(a(i,i+=e,t));return n})},{"./internal/_curry2":256,"./slice":407}],414:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=0,a=t.length,i=[];n<a&&!e(t[n]);)i.push(t[n]),n+=1;return[i,Array.prototype.slice.call(t,n)]})},{"./internal/_curry2":256}],415:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return+e-+t})},{"./internal/_curry2":256}],416:[function(e,t){var n=e("./add"),a=e("./reduce");t.exports=a(n,0)},{"./add":158,"./reduce":394}],417:[function(e,t){var n=e("./internal/_curry2"),a=e("./concat"),i=e("./difference");t.exports=n(function(e,t){return a(i(e,t),i(t,e))})},{"./concat":187,"./difference":199,"./internal/_curry2":256}],418:[function(e,t){var n=e("./internal/_curry3"),a=e("./concat"),i=e("./differenceWith");t.exports=n(function(e,t,n){return a(i(e,t,n),i(e,n,t))})},{"./concat":187,"./differenceWith":200,"./internal/_curry3":257}],419:[function(e,t){var n=e("./internal/_checkForMethod"),a=e("./internal/_curry1"),i=e("./slice");t.exports=a(n("tail",i(1,Infinity)))},{"./internal/_checkForMethod":247,"./internal/_curry1":255,"./slice":407}],420:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xtake"),o=e("./slice");t.exports=n(a(["take"],i,function(e,t){return o(0,0>e?Infinity:e,t)}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xtake":309,"./slice":407}],421:[function(e,t){var n=e("./internal/_curry2"),a=e("./drop");t.exports=n(function(e,t){return a(0<=e?t.length-e:0,t)})},{"./drop":204,"./internal/_curry2":256}],422:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=t.length-1;0<=n&&e(t[n]);)n-=1;return Array.prototype.slice.call(t,n+1)})},{"./internal/_curry2":256}],423:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_dispatchable"),i=e("./internal/_xtakeWhile");t.exports=n(a(["takeWhile"],i,function(e,t){for(var n=0,a=t.length;n<a&&e(t[n]);)n+=1;return Array.prototype.slice.call(t,0,n)}))},{"./internal/_curry2":256,"./internal/_dispatchable":259,"./internal/_xtakeWhile":310}],424:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){return e(t),t})},{"./internal/_curry2":256}],425:[function(e,t){var n=e("./internal/_cloneRegExp"),a=e("./internal/_curry2"),i=e("./internal/_isRegExp"),o=e("./toString");t.exports=a(function(e,t){if(!i(e))throw new TypeError("\u2018test\u2019 requires a value of type RegExp as its first argument; received "+o(e));return n(e).test(t)})},{"./internal/_cloneRegExp":249,"./internal/_curry2":256,"./internal/_isRegExp":277,"./toString":430}],426:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){var a=+t,i=0,o;if(0>a||isNaN(a))throw new RangeError("n must be a non-negative number");for(o=Array(a);i<a;)o[i]=e(i),i+=1;return o})},{"./internal/_curry2":256}],427:[function(e,t){var n=e("./invoker");t.exports=n(0,"toLowerCase")},{"./invoker":318}],428:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_has");t.exports=n(function(e){var t=[];for(var n in e)a(n,e)&&(t[t.length]=[n,e[n]]);return t})},{"./internal/_curry1":255,"./internal/_has":267}],429:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){var t=[];for(var n in e)t[t.length]=[n,e[n]];return t})},{"./internal/_curry1":255}],430:[function(e,t){var n=e("./internal/_curry1"),a=e("./internal/_toString");t.exports=n(function(e){return a(e,[])})},{"./internal/_curry1":255,"./internal/_toString":291}],431:[function(e,t){var n=e("./invoker");t.exports=n(0,"toUpperCase")},{"./invoker":318}],432:[function(e,t){var n=e("./internal/_reduce"),a=e("./internal/_xwrap"),i=e("./curryN");t.exports=i(4,function(e,t,i,o){return n(e("function"==typeof t?a(t):t),i,o)})},{"./curryN":195,"./internal/_reduce":287,"./internal/_xwrap":311}],433:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){for(var t=0,n=[];t<e.length;){for(var a=e[t],i=0;i<a.length;)"undefined"==typeof n[i]&&(n[i]=[]),n[i].push(a[i]),i+=1;t+=1}return n})},{"./internal/_curry1":255}],434:[function(e,t){var n=e("./internal/_curry3"),a=e("./map"),i=e("./sequence");t.exports=n(function(e,t,n){return i(e,a(t,n))})},{"./internal/_curry3":257,"./map":338,"./sequence":405}],435:[function(e,t){var n=e("./internal/_curry1");t.exports=function(){var e="function"==typeof String.prototype.trim;return n(function(e){var t=/^[	\n\v\f\r   ᠎             　\u2028\u2029﻿][	\n\v\f\r   ᠎             　\u2028\u2029﻿]*/,n=/[	\n\v\f\r   ᠎             　\u2028\u2029﻿][	\n\v\f\r   ᠎             　\u2028\u2029﻿]*$/;return e.replace(t,"").replace(n,"")})}()},{"./internal/_curry1":255}],436:[function(e,t){var n=e("./internal/_arity"),a=e("./internal/_concat"),i=e("./internal/_curry2");t.exports=i(function(e,t){return n(e.length,function(){try{return e.apply(this,arguments)}catch(n){return t.apply(this,a([n],arguments))}})})},{"./internal/_arity":244,"./internal/_concat":251,"./internal/_curry2":256}],437:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return null===e?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)})},{"./internal/_curry1":255}],438:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}})},{"./internal/_curry1":255}],439:[function(e,t){var n=e("./internal/_curry1"),a=e("./nAry");t.exports=n(function(e){return a(1,e)})},{"./internal/_curry1":255,"./nAry":357}],440:[function(e,t){var n=e("./internal/_curry2"),a=e("./curryN");t.exports=n(function(e,t){return a(e,function(){for(var n=1,a=t,i=0,o;n<=e&&"function"==typeof a;)o=n===e?arguments.length:i+a.length,a=a.apply(this,Array.prototype.slice.call(arguments,i,o)),n+=1,i=o;return a})})},{"./curryN":195,"./internal/_curry2":256}],441:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=e(t),a=[];n&&n.length;)a[a.length]=n[0],n=e(n[1]);return a})},{"./internal/_curry2":256}],442:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry2"),i=e("./compose"),o=e("./uniq");t.exports=a(i(o,n))},{"./compose":184,"./internal/_concat":251,"./internal/_curry2":256,"./uniq":444}],443:[function(e,t){var n=e("./internal/_concat"),a=e("./internal/_curry3"),i=e("./uniqWith");t.exports=a(function(e,t,a){return i(e,n(t,a))})},{"./internal/_concat":251,"./internal/_curry3":257,"./uniqWith":446}],444:[function(e,t){var n=e("./identity"),a=e("./uniqBy");t.exports=a(n)},{"./identity":234,"./uniqBy":445}],445:[function(e,t){var n=e("./internal/_Set"),a=e("./internal/_curry2");t.exports=a(function(e,t){for(var a=new n,i=[],o=0,r,l;o<t.length;)l=t[o],r=e(l),a.add(r)&&i.push(l),o+=1;return i})},{"./internal/_Set":242,"./internal/_curry2":256}],446:[function(e,t){var n=e("./internal/_containsWith"),a=e("./internal/_curry2");t.exports=a(function(e,t){for(var a=0,i=t.length,o=[],r;a<i;)r=t[a],n(e,r,o)||(o[o.length]=r),a+=1;return o})},{"./internal/_containsWith":253,"./internal/_curry2":256}],447:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)?n:t(n)})},{"./internal/_curry3":257}],448:[function(e,t){var n=e("./internal/_identity"),a=e("./chain");t.exports=a(n)},{"./chain":179,"./internal/_identity":268}],449:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=n;!e(a);)a=t(a);return a})},{"./internal/_curry3":257}],450:[function(e,t){var n=e("./internal/_curry3"),a=e("./adjust"),i=e("./always");t.exports=n(function(e,t,n){return a(i(t),e,n)})},{"./adjust":160,"./always":163,"./internal/_curry3":257}],451:[function(e,t){var n=e("./internal/_curry2"),a=e("./curryN");t.exports=n(function(e,t){return a(t.length,function(){for(var n=[],a=0;a<t.length;)n.push(t[a].call(this,arguments[a])),a+=1;return e.apply(this,n.concat(Array.prototype.slice.call(arguments,t.length)))})})},{"./curryN":195,"./internal/_curry2":256}],452:[function(e,t){var n=e("./internal/_curry1"),a=e("./keys");t.exports=n(function(e){for(var t=a(e),n=t.length,i=[],o=0;o<n;)i[o]=e[t[o]],o+=1;return i})},{"./internal/_curry1":255,"./keys":325}],453:[function(e,t){var n=e("./internal/_curry1");t.exports=n(function(e){var t=[],n;for(n in e)t[t.length]=e[n];return t})},{"./internal/_curry1":255}],454:[function(e,t){var n=e("./internal/_curry2");t.exports=function(){var e=function(e){return{value:e,map:function(){return this}}};return n(function(t,n){return t(e)(n).value})}()},{"./internal/_curry2":256}],455:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){return e(n)?t(n):n})},{"./internal/_curry3":257}],456:[function(e,t){var n=e("./internal/_curry2"),a=e("./internal/_has");t.exports=n(function(e,t){for(var n in e)if(a(n,e)&&!e[n](t[n]))return!1;return!0})},{"./internal/_curry2":256,"./internal/_has":267}],457:[function(e,t){var n=e("./internal/_curry2"),a=e("./equals"),i=e("./map"),o=e("./where");t.exports=n(function(e,t){return o(i(a,e),t)})},{"./equals":214,"./internal/_curry2":256,"./map":338,"./where":456}],458:[function(e,t){var n=e("./internal/_contains"),a=e("./internal/_curry2"),i=e("./flip"),o=e("./reject");t.exports=a(function(e,t){return o(i(n)(e),t)})},{"./flip":222,"./internal/_contains":252,"./internal/_curry2":256,"./reject":399}],459:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=0,a=e.length,i=t.length,o=[],r;n<a;){for(r=0;r<i;)o[o.length]=[e[n],t[r]],r+=1;n+=1}return o})},{"./internal/_curry2":256}],460:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=[],a=0,i=S(e.length,t.length);a<i;)n[a]=[e[a],t[a]],a+=1;return n})},{"./internal/_curry2":256}],461:[function(e,t){var n=e("./internal/_curry2");t.exports=n(function(e,t){for(var n=0,a=S(e.length,t.length),i={};n<a;)i[e[n]]=t[n],n+=1;return i})},{"./internal/_curry2":256}],462:[function(e,t){var n=e("./internal/_curry3");t.exports=n(function(e,t,n){for(var a=[],i=0,o=S(t.length,n.length);i<o;)a[i]=e(t[i],n[i]),i+=1;return a})},{"./internal/_curry3":257}],463:[function(e,t){t.exports=e("./lib/index")},{"./lib/index":464}],464:[function(e,t,n){(function(a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./ponyfill.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r;r="undefined"==typeof self?"undefined"==typeof window?"undefined"==typeof a?"undefined"==typeof t?Function("return this")():t:a:window:self;var l=(0,o["default"])(r);n["default"]=l}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./ponyfill.js":465}],465:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=e.Symbol,n;return"function"==typeof t?t.observable?n=t.observable:(n=t("observable"),t.observable=n):n="@@observable",n}},{}],466:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],467:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],468:[function(e,t,a){(function(t,n){function o(e,t){var n={seen:[],stylize:r};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&a._extend(n,t),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),s(n,e,n.depth)}function i(e,t){var n=o.styles[t];return n?"\x1B["+o.colors[n][0]+"m"+e+"\x1B["+o.colors[n][1]+"m":e}function r(e){return e}function l(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function s(e,t,i){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==a.inspect&&!(t.constructor&&t.constructor.prototype===t)){var o=t.inspect(i,e);return h(o)||(o=s(e,o,i)),o}var r=d(e,t);if(r)return r;var g=Object.keys(t),_=l(g);if(e.showHidden&&(g=Object.getOwnPropertyNames(t)),T(t)&&(0<=g.indexOf("message")||0<=g.indexOf("description")))return p(t);if(0===g.length){if(k(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(T(t))return p(t)}var b="",v=!1,E=["{","}"];if(m(t)&&(v=!0,E=["[","]"]),k(t)){var N=t.name?": "+t.name:"";b=" [Function"+N+"]"}if(x(t)&&(b=" "+RegExp.prototype.toString.call(t)),S(t)&&(b=" "+Date.prototype.toUTCString.call(t)),T(t)&&(b=" "+p(t)),0===g.length&&(!v||0==t.length))return E[0]+b+E[1];if(0>i)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var n;return n=v?c(e,t,i,_,g):g.map(function(n){return u(e,t,i,_,n,v)}),e.seen.pop(),f(n,b,E)}function d(e,t){if(b(t))return e.stylize("undefined","undefined");if(h(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,n,a,o){for(var r=[],s=0,i=t.length;s<i;++s)w(t,s+"")?r.push(u(e,t,n,a,s+"",!0)):r.push("");return o.forEach(function(i){i.match(/^\d+$/)||r.push(u(e,t,n,a,i,!0))}),r}function u(e,t,n,a,i,o){var r,l,d;if(d=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},d.get?d.set?l=e.stylize("[Getter/Setter]","special"):l=e.stylize("[Getter]","special"):d.set&&(l=e.stylize("[Setter]","special")),w(a,i)||(r="["+i+"]"),l||(0>e.seen.indexOf(d.value)?(l=_(n)?s(e,d.value,null):s(e,d.value,n-1),-1<l.indexOf("\n")&&(o?l=l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):l="\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),b(r)){if(o&&i.match(/^\d+$/))return l;r=JSON.stringify(""+i),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=e.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'"),r=e.stylize(r,"string"))}return r+": "+l}function f(e,t,n){var a=0,i=e.reduce(function(e,t){return a++,0<=t.indexOf("\n")&&a++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return 60<i?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function m(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function _(e){return null===e}function y(e){return"number"==typeof e}function h(e){return"string"==typeof e}function b(e){return void 0===e}function x(e){return v(e)&&"[object RegExp]"===E(e)}function v(e){return"object"==typeof e&&null!==e}function S(e){return v(e)&&"[object Date]"===E(e)}function T(t){return v(t)&&("[object Error]"===E(t)||t instanceof Error)}function k(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function N(e){return 10>e?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}// distribute, sublicense, and/or sell copies of the Software, and to permit
var C=/%[sdj%]/g;a.format=function(e){if(!h(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,a=arguments,i=a.length,r=(e+"").replace(C,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return a[n++]+"";case"%d":return+a[n++];case"%j":try{return JSON.stringify(a[n++])}catch(e){return"[Circular]"}default:return e;}}),l=a[n];n<i;l=a[++n])r+=_(l)||!v(l)?" "+l:" "+o(l);return r},a.deprecate=function(e,i){if(b(n.process))return function(){return a.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);else t.traceDeprecation?console.trace(i):console.error(i);o=!0}return e.apply(this,arguments)}};var O={},D;a.debuglog=function(e){if(b(D)&&(D=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!O[e])if(new RegExp("\\b"+e+"\\b","i").test(D)){var n=t.pid;O[e]=function(){var t=a.format.apply(a,arguments);console.error("%s %d: %s",e,n,t)}}else O[e]=function(){};return O[e]},a.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},a.isArray=m,a.isBoolean=g,a.isNull=_,a.isNullOrUndefined=function(e){return null==e},a.isNumber=y,a.isString=h,a.isSymbol=function(e){return"symbol"==typeof e},a.isUndefined=b,a.isRegExp=x,a.isObject=v,a.isDate=S,a.isError=T,a.isFunction=k,a.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e},a.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.log=function(){console.log("%s - %s",A(),a.format.apply(a,arguments))},a.inherits=e("inherits"),a._extend=function(e,t){if(!t||!v(t))return e;for(var n=Object.keys(t),a=n.length;a--;)e[n[a]]=t[n[a]];return e}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./support/isBuffer":467,_process:153,inherits:466}],469:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.version=n.VegaLayer=void 0;var i=e("babel-runtime/regenerator"),o=a(i),r=e("babel-runtime/helpers/asyncToGenerator"),l=a(r),s=e("leaflet"),d=e("./vega-layer"),p=a(d),c=e("./util/check-view"),u=a(c),f=e("../package.json"),m=0,g=function(){var e=(0,l.default)(o.default.mark(function e(t){var n,a,i,r,l,d,c,f,g,_,y,h,b,x,v,S,T,k,E,N,A,w,C,O,D,P,R,I,M,F,B;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.spec,a=t.view,i=t.renderer,r=void 0===i?"canvas":i,l=t.container,d=void 0===l?document.body:l,c=t.mapContainer,f=void 0===c?"vega-leaflet-"+m++:c,g=t.maxZoom,_=void 0===g?18:g,y=t.cssClassVegaLayer,h=void 0===y?["leaflet-vega-container"]:y,b=t.overruleVegaPadding,x=void 0!==b&&b,e.next=3,(0,u.default)(n,a);case 3:if(v=e.sent,S=v.zoom,T=v.latitude,k=v.longitude,E=v.padding,N=v.vegaView,!1!==f||null!==d&&"undefined"!=typeof d){e.next=8;break}throw A="If you set mapContainer to 'false', you have to provide a value for container.",new Error(A);case 8:return w=null,!1!==f&&("string"==typeof f?w=document.getElementById(f):f instanceof HTMLElement&&(w=f),null===w&&(w=document.createElement("div"),w.id=f),null!==E&&!0!==x&&(C=E.top,O=E.right,D=E.bottom,P=E.left,w.style.padding=C+"px "+O+"px "+D+"px "+P+"px")),R=null,"string"==typeof d?(R=document.getElementById(d),null===R&&(R=document.createElement("div"),R.id=d),document.body.appendChild(R)):d instanceof HTMLElement&&(R=d,document.getElementById(null===R.id)&&document.body.appendChild(R)),null===R&&(R=document.body),null!==w&&null===document.getElementById(f.id)&&R.appendChild(w),I=document.createElement("div"),I.style.width=N.width()+"px",I.style.height=N.height()+"px",M=void 0,null===w?(M=R.id+"-map",R.appendChild(I)):(M=w.id+"-map",w.appendChild(I)),I.id=M,F=new s.Map(M,{zoomAnimation:!1}).setView([T.value,k.value],S.value),new s.TileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:"<a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors",maxZoom:_}).addTo(F),B=h,"string"==typeof h&&(B=[h]),N.padding({top:0,bottom:0,right:0,left:0}),new p.default(N,{renderer:r,delayRepaint:!0,cssClassVegaLayer:B}).addTo(F),e.abrupt("return",[w,N]);case 27:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}();n.default=g,n.VegaLayer=p.default;var _="vega-as-leaflet-layer "+f.version;n.version=_},{"../package.json":473,"./util/check-view":470,"./vega-layer":472,"babel-runtime/helpers/asyncToGenerator":9,"babel-runtime/regenerator":16,leaflet:151}],470:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/regenerator"),o=a(i),r=e("babel-runtime/helpers/asyncToGenerator"),l=a(r),d=e("vega"),p=e("fetch-helpers"),s=e("./get-padding"),c=a(s),u=function(){var e=(0,l.default)(o.default.mark(function e(t,n){var a,i,r,l,s,u,f,m;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0,"undefined"!=typeof t&&null!==t||"undefined"!=typeof n&&null!==n){e.next=4;break}throw a="Please provide at least spec or a Vega view instance.",new Error(a);case 4:if(i=n,r=void 0,"undefined"!=typeof n){e.next=28;break}return l=void 0,e.prev=8,e.next=11,(0,p.load)(t);case 11:l=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e["catch"](8),e.t0;case 17:e.prev=17,i=new d.View((0,d.parse)(l)),e.next=25;break;case 21:throw e.prev=21,e.t1=e["catch"](17),a="Not a valid spec: "+e.t1,new Error(a);case 25:r=(0,c.default)(i),e.next=36;break;case 28:e.prev=28,r=(0,c.default)(i),e.next=36;break;case 32:throw e.prev=32,e.t2=e["catch"](28),a="Not a valid view: "+e.t2,new Error(a);case 36:if(s=i._runtime.signals||[],u=s.zoom,f=s.latitude,m=s.longitude,"undefined"!=typeof u&&"undefined"!=typeof f&&"undefined"!=typeof m){e.next=40;break}throw a="Incomplete specification; if you want to add Vega as a Leaflet layer you defined provide signals for zoom, latitude and longitude",new Error(a);case 40:return e.abrupt("return",{zoom:u,latitude:f,longitude:m,padding:r,vegaView:i});case 41:case"end":return e.stop();}},e,void 0,[[8,14],[17,21],[28,32]])}));return function(){return e.apply(this,arguments)}}();n.default=u},{"./get-padding":471,"babel-runtime/helpers/asyncToGenerator":9,"babel-runtime/regenerator":16,"fetch-helpers":144,vega:592}],471:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e){var t=e.padding();if("undefined"==typeof t.top&&"undefined"==typeof t.bottom&&"undefined"==typeof t.right&&"undefined"==typeof t.left)return null;var n=t.top,a=n===void 0?0:n,i=t.bottom,o=i===void 0?0:i,r=t.right,l=r===void 0?0:r,s=t.left,d=s===void 0?0:s;return{top:a,bottom:o,right:l,left:d}}},{}],472:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("leaflet"),i=(a.Layer||a.Class).extend({options:{delayRepaint:!0,cssClassVegaLayer:[""]},initialize:function(e,t){a.Util.setOptions(this,t),this.view=e},addTo:function(e){return e.addLayer(this),this},onAdd:function(e){var t=this;this.map=e,this.vegaContainer=a.DomUtil.create("div",this.options.cssClassVegaLayer.join(" ")),e._panes.overlayPane.appendChild(this.vegaContainer),this.view.initialize(this.vegaContainer);var n=function(e,n){return t.onSignalChange(e,n)};return this.view.addSignalListener("latitude",n).addSignalListener("longitude",n).addSignalListener("zoom",n),e.on(this.options.delayRepaint?"moveend":"move",function(){return t.update()}),e.on("zoomend",function(){return t.update()}),this.update(!0)},onRemove:function(){this.view&&(this.view.finalize(),this.view=null),a.DomUtil.empty()},onSignalChange:function(e,t){var n=this.map.getCenter(),a=this.map.getZoom();switch(e){case"latitude":n.lat=t;break;case"longitude":n.lng=t;break;case"zoom":a=t;break;default:return;}this.map.setView(n,a),this.update()},update:function(e){var t=this,n=this.map.containerPointToLayerPoint([0,0]);a.DomUtil.setPosition(this.vegaContainer,n);var i=this.map.getSize(),o=this.map.getCenter(),r=this.map.getZoom(),l=function(e,n){return t.view.signal(e)===n?0:(t.view.signal(e,n),1)},s=0;return s|=l("width",i.x),s|=l("height",i.y),s|=l("latitude",o.lat),s|=l("longitude",o.lng),s|=l("zoom",r),s||e?this.view.runAsync():0}});n.default=i},{leaflet:151}],473:[function(e,t){t.exports={name:"vega-as-leaflet-layer",version:"1.1.6",description:"Render Vega3 spec as layer on a Leaflet map, based on https://github.com/nyurik/leaflet-vega",license:"MIT",author:"abudaan",main:"dist/index.js",browser:"dist/index.js",module:"src/index.js",repository:"git://github.com/abudaan/vega-as-leaflet-layer.git",bugs:{url:"https://github.com/abudaan/vega-as-leaflet-layer/issues"},scripts:{compile:"babel ./src --out-dir ./dist",prepublish:"npm run compile",postpublish:"git push && git push --tags"},keywords:["vega","leaflet","tile maps","leaflet-vega"],dependencies:{"fetch-helpers":"https://github.com/abudaan/fetch-helpers",leaflet:"^1.2.0",vega:"^3.0.8"},devDependencies:{"babel-cli":"^6.26.0","babel-eslint":"^7.2.3","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.0","babel-preset-stage-0":"^6.24.1",eslint:"^4.6.1","eslint-config-airbnb-base":"^12.0.0","eslint-plugin-flowtype":"^2.35.1","eslint-plugin-import":"^2.7.0","flow-bin":"0.42.0"}}},{}],474:[function(e,t,n){(function(e,a){"object"==typeof n&&"undefined"!=typeof t?a(n):"function"==typeof m&&m.amd?m(["exports"],a):a(e.vega=e.vega||{})})(this,function(e){"use strict";function t(e){return b.hasOwnProperty(e)}function a(e,t,a,i,o){for(var r=0,l=e.length,n;t<l;++t){if(n=e[t],!r&&n===a)return t;o&&0<=o.indexOf(n)?--r:i&&0<=i.indexOf(n)&&++r}return t}function o(e){for(var t=[],o=0,r=e.length,n=0;n<r;)n=a(e,n,m,d+c,p+u),t.push(e.substring(o,n).trim()),o=++n;if(0===t.length)throw"Empty event selector: "+e;return t}function r(e){return"["===e[0]?n(e):i(e)}function n(e){var t=e.length,n=1,i,l;if(n=a(e,n,p,d,p),n===t)throw"Empty between selector: "+e;if(i=o(e.substring(1,n)),2!==i.length)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==_)throw"Expected '>' after between selector: "+e;return(i=i.map(r),l=r(e.slice(1).trim()),l.between)?{between:i,stream:l}:(l.between=i,l)}function i(e){var o={source:h},r=[],s=[0,0],m=0,_=0,b=e.length,x=0,i,v;if(e[b-1]===u){if(x=e.lastIndexOf(c),0<=x){try{s=l(e.substring(x+1,b-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,x).trim(),b=e.length}else throw"Unmatched right brace: "+e;x=0}if(!b)throw e;if(e[0]===g&&(m=++x),i=a(e,x,f),i<b&&(r.push(e.substring(_,i).trim()),_=x=++i),x=a(e,x,d),x===b)r.push(e.substring(_,b).trim());else if(r.push(e.substring(_,x).trim()),v=[],_=++x,_===b)throw"Unmatched left bracket: "+e;for(;x<b;){if(x=a(e,x,p),x===b)throw"Unmatched left bracket: "+e;if(v.push(e.substring(_,x).trim()),x<b-1&&e[++x]!==d)throw"Expected left bracket: "+e;_=++x}if(!(b=r.length)||y.test(r[b-1]))throw"Invalid event selector: "+e;return 1<b?(o.type=r[1],m?o.markname=r[0].slice(1):t(r[0])?o.marktype=r[0]:o.source=r[0]):o.type=r[0],"!"===o.type.slice(-1)&&(o.consume=!0,o.type=o.type.slice(0,-1)),null!=v&&(o.filter=v),s[0]&&(o.throttle=s[0]),s[1]&&(o.debounce=s[1]),o}function l(e){var t=e.split(m);if(!e.length||2<t.length)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}var d="[",p="]",c="{",u="}",f=":",m=",",g="@",_=">",y=/[[\]{}]/,s={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},h,b;e.selector=function(e,t,n){return h=t||"view",b=n||s,o(e.trim()).map(r)},Object.defineProperty(e,"__esModule",{value:!0})})},{}],475:[function(e,t){t.exports={name:"vega-lite",author:"Jeffrey Heer, Dominik Moritz, Kanit \"Ham\" Wongsuphasawat",version:"2.0.4",collaborators:["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (https://www.domoritz.de)","Jeffrey Heer <jheer@uw.edu> (http://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications.",main:"build/src/index.js",types:"typings/vega-lite.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},directories:{test:"test"},scripts:{pretsc:"mkdir -p build && rm -rf build/*/** && cp package.json build/",tsc:"tsc",prebuild:"mkdir -p build/site build/test-gallery",build:"npm run build:only","build:only":"npm run tsc && cp package.json build && browserify src/index.ts -p tsify -d -s vl | exorcist build/vega-lite.js.map > build/vega-lite.js",postbuild:"node node_modules/uglify-js/bin/uglifyjs build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && npm run schema","build:examples":"npm run data && npm run build:only && npm run build:examples-only","build:examples-only":"npm run build:example && npm run build:examples-normalized","build:examples-normalized":"rm -f examples/specs/normalized/*.vl.json && scripts/build-normalized-examples","build:example":"TZ=America/Los_Angeles scripts/build-examples.sh","build:toc":"bundle exec jekyll build -q && scripts/generate-toc","build:site":"browserify site/static/main.ts -p [tsify -p site] -d | exorcist build/site/main.js.map > build/site/main.js","build:versions":"scripts/update-version.sh","build:test-gallery":"browserify test-gallery/main.ts -p [tsify -p test-gallery] -d > build/test-gallery/main.js","check:examples":"scripts/check-examples.sh","check:schema":"scripts/check-schema.sh",clean:"rm -rf build && rm -f vega-lite.* & find -E src test site examples -regex '.*\\.(js|js.map|d.ts)' -delete && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' -type f -exec rm -f {} +",data:"rsync -r node_modules/vega-datasets/data/* data",link:"npm link && npm link vega-lite",deploy:"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh","deploy:schema":"scripts/deploy-schema.sh",prestart:"npm run data && npm run build && scripts/index-examples",start:"nodemon -x 'npm run build:test-gallery' & browser-sync start --server --files 'build/test-gallery/main.js' --index 'test-gallery/index.html'",poststart:"rm examples/all-examples.json",preschema:"npm run prebuild",schema:"ts-json-schema-generator --path tsconfig.json --type TopLevelExtendedSpec > build/vega-lite-schema.json && npm run renameschema && cp build/vega-lite-schema.json _data/",renameschema:"scripts/rename-schema.sh",presite:"npm run prebuild && npm run data && npm run build:site && npm run build:toc && npm run build:versions && scripts/create-example-pages",site:"bundle exec jekyll serve --incremental",lint:"tslint -p .",test:"npm run build:only && npm run test:only && npm run test:runtime && npm run lint",posttest:"npm run schema && npm run data && npm run mocha:examples","test:nocompile":"npm run test:only && npm run test:runtime && npm run lint && npm run mocha:examples","test:only":"nyc --reporter=html --reporter=text-summary npm run mocha:test","test:runtime":"TZ=America/Los_Angeles wdio wdio.conf.js","test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true npm run test:runtime","test:debug":"npm run tsc && mocha --recursive --debug-brk --inspect build/test","test:debug-examples":"npm run tsc && npm run schema && mocha --recursive --debug-brk --inspect build/examples","mocha:test":"mocha --require source-map-support/register --reporter dot --recursive build/test","mocha:examples":"mocha --require source-map-support/register --reporter dot --recursive build/examples",codecov:"nyc report --reporter=json && codecov -f coverage/*.json","watch:build":"watchify src/index.ts -p tsify -v -d -s vl -o 'exorcist build/vega-lite.js.map > build/vega-lite.js'","watch:tsc":"npm run tsc -- -w","watch:test":"nodemon -x 'npm test'",watch:"nodemon -x 'npm run build && npm run test:nocompile' # already ran schema in build"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@types/chai":"^4.0.6","@types/d3":"^4.12.0","@types/highlight.js":"^9.12.2","@types/json-stable-stringify":"^1.0.32","@types/mkdirp":"^0.5.1","@types/mocha":"^2.2.44","@types/node":"^8.0.53","@types/webdriverio":"^4.8.6",ajv:"^5.5.0","browser-sync":"^2.18.13",browserify:"^14.5.0","browserify-shim":"^3.8.14",chai:"^4.1.2",cheerio:"^1.0.0-rc.2",chromedriver:"^2.33.2",codecov:"^3.0.0",d3:"^4.12.0",exorcist:"^1.0.0","highlight.js":"^9.12.0",mkdirp:"^0.5.1",mocha:"^4.0.1",nodemon:"^1.12.1",nyc:"^11.3.0","source-map-support":"^0.5.0","svg2png-many":"^0.0.7","ts-json-schema-generator":"^0.18.0","ts-node":"^3.3.0",tsify:"^3.0.3",tslint:"5.4.3","tslint-eslint-rules":"^4.1.1",typescript:"^2.6.2","uglify-js":"^3.2.0",vega:"^3.0.8","vega-datasets":"^1.11.0","vega-embed":"^3.0.0-rc7","vega-tooltip":"^0.4.4",watchify:"^3.9.0","wdio-chromedriver-service":"^0.1.1","wdio-dot-reporter":"0.0.9","wdio-mocha-framework":"^0.5.11","wdio-static-server-service":"^1.0.1",webdriverio:"^4.9.11","yaml-front-matter":"^3.4.0"},dependencies:{"json-stable-stringify":"^1.0.1",tslib:"^1.8.0","vega-event-selector":"^2.0.0","vega-util":"^1.6.2",yargs:"^10.0.3"}}},{}],476:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./util"),i={values:1,count:1,valid:1,missing:1,distinct:1,sum:1,mean:1,average:1,variance:1,variancep:1,stdev:1,stdevp:1,median:1,q1:1,q3:1,ci0:1,ci1:1,min:1,max:1,argmin:1,argmax:1};n.AGGREGATE_OPS=a.flagKeys(i),n.isAggregateOp=function(e){return!!i[e]},n.COUNTING_OPS=["count","valid","missing","distinct"],n.isCountingAggregateOp=function(e){return e&&a.contains(n.COUNTING_OPS,e)},n.SUM_OPS=["count","sum","distinct","valid","missing"],n.SHARED_DOMAIN_OPS=["mean","average","median","q1","q3","min","max"],n.SHARED_DOMAIN_OP_INDEX=a.toSet(n.SHARED_DOMAIN_OPS)},{"./util":582}],477:[function(e,t,n){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./util");n.AXIS_PROPERTY_TYPE={grid:"grid",labelOverlap:"main",offset:"main",title:"main"};var o={orient:1,domain:1,format:1,grid:1,labelBound:1,labelFlush:1,labelPadding:1,labels:1,labelOverlap:1,maxExtent:1,minExtent:1,offset:1,position:1,tickCount:1,ticks:1,tickSize:1,title:1,titlePadding:1,values:1,zindex:1},r=a({},o,{encoding:1,labelAngle:1,titleMaxLength:1}),l=a({scale:1},o,{gridScale:1,encode:1});n.isAxisProperty=function(e){return!!r[e]},n.VG_AXIS_PROPERTIES=i.flagKeys(l),n.AXIS_PROPERTIES=i.flagKeys(r)},{"./util":582}],478:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./channel"),i=e("./util");n.binToString=function(e){return i.isBoolean(e)?"bin":"bin"+i.keys(e).map(function(t){return("_"+t+"_"+e[t]).replace(",","_")}).join("")},n.autoMaxBins=function(e){return e===a.ROW||e===a.COLUMN||e===a.SIZE||e===a.COLOR||e===a.OPACITY||e===a.SHAPE?6:10}},{"./channel":479,"./util":582}],479:[function(e,t,n){"use strict";function a(e){return e===n.X||e===n.Y||e===n.COLOR||e===n.DETAIL||e===n.TOOLTIP||e===n.ORDER||e===n.OPACITY||e===n.ROW||e===n.COLUMN?{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0}:e===n.X2||e===n.Y2?{rule:!0,bar:!0,rect:!0,area:!0}:e===n.SIZE?{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0}:e===n.SHAPE?{point:!0}:e===n.TEXT?{text:!0}:void 0}var i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},o=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util"),l;(function(e){e.ROW="row",e.COLUMN="column",e.X="x",e.Y="y",e.X2="x2",e.Y2="y2",e.COLOR="color",e.SHAPE="shape",e.SIZE="size",e.OPACITY="opacity",e.TEXT="text",e.ORDER="order",e.DETAIL="detail",e.TOOLTIP="tooltip"})(l=n.Channel||(n.Channel={})),n.X=l.X,n.Y=l.Y,n.X2=l.X2,n.Y2=l.Y2,n.ROW=l.ROW,n.COLUMN=l.COLUMN,n.SHAPE=l.SHAPE,n.SIZE=l.SIZE,n.COLOR=l.COLOR,n.TEXT=l.TEXT,n.DETAIL=l.DETAIL,n.ORDER=l.ORDER,n.OPACITY=l.OPACITY,n.TOOLTIP=l.TOOLTIP;var s={x:1,y:1,x2:1,y2:1,size:1,shape:1,color:1,order:1,opacity:1,text:1,detail:1,tooltip:1},d=i({},s,{row:1,column:1});n.CHANNELS=r.flagKeys(d);var p=d.order,c=d.detail,u=o(d,["order","detail"]);n.SINGLE_DEF_CHANNELS=r.flagKeys(u),n.isChannel=function(e){return!!d[e]},n.UNIT_CHANNELS=r.flagKeys(s);var f=s.x,m=s.y,g=s.x2,_=s.y2,y=o(s,["x","y","x2","y2"]);n.NONPOSITION_CHANNELS=r.flagKeys(y);var h={x:1,y:1};n.POSITION_SCALE_CHANNELS=r.flagKeys(h);var b=y.text,x=y.tooltip,v=y.detail,S=y.order,T=o(y,["text","tooltip","detail","order"]);n.NONPOSITION_SCALE_CHANNELS=r.flagKeys(T);var k=i({},h,T);n.SCALE_CHANNELS=r.flagKeys(k),n.isScaleChannel=function(e){return!!k[e]},n.supportMark=function(e,t){return t in a(e)},n.getSupportedMark=a,n.rangeType=function(e){switch(e){case n.X:case n.Y:case n.SIZE:case n.OPACITY:case n.X2:case n.Y2:return"continuous";case n.ROW:case n.COLUMN:case n.SHAPE:case n.TEXT:case n.TOOLTIP:return"discrete";case n.COLOR:return"flexible";case n.DETAIL:case n.ORDER:return;}throw new Error("getSupportedRole not implemented for "+e)}},{"./util":582}],480:[function(e,t,n){"use strict";function a(e){return function(t,n){return n[e]&&t.push(n[e].combine()),t}}Object.defineProperty(n,"__esModule",{value:!0});var i=a("main"),o=a("grid");n.assembleAxes=function(e){return[].concat(e.x?[].concat(e.x.reduce(i,[]),e.x.reduce(o,[])):[],e.y?[].concat(e.y.reduce(i,[]),e.y.reduce(o,[])):[])}},{}],481:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../split"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(i.Split);n.AxisComponentPart=o},{"../split":553}],482:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getAxisConfig=function(e,t,n,a,i){void 0===a&&(a="");for(var o=("band"===i?["axisBand"]:[]).concat(["x"===n?"axisX":"axisY","axis"+a.substr(0,1).toUpperCase()+a.substr(1),"axis"]),r=0,l=o,s;r<l.length;r++)if(s=l[r],t[s]&&void 0!==t[s][e])return t[s][e]}},{}],483:[function(e,t,n){"use strict";function a(e,t,n){if(e.labelAngle!==void 0)return(e.labelAngle%360+360)%360;return t===r.X&&p.contains([d.NOMINAL,d.ORDINAL],n.type)?270:void 0}function i(e,t){if(0<e){if(180<e%360)return"top"===t?"left":"right";if(180>e%360)return"top"===t?"right":"left"}else if(0>e)return i(e%360+360,t)}var o=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../channel"),l=e("../../fielddef"),s=e("../../scale"),d=e("../../type"),p=e("../../util"),c=e("../common"),u=e("./config");n.labels=function(e,t,n,r){var d=e.fieldDef(t)||("x"===t?e.fieldDef("x2"):"y"===t?e.fieldDef("y2"):void 0),f=e.axis(t),m=e.config,g={};if(l.isTimeFieldDef(d)){var _=e.getScaleComponent(t).get("type")===s.ScaleType.UTC;g.text={signal:c.timeFormatExpression("datum.value",d.timeUnit,f.format,m.axis.shortTimeLabels,m.timeFormat,_)}}var y=u.getAxisConfig("labelAngle",e.config,t,r,e.getScaleComponent(t).get("type"));if(void 0===y&&(y=a(f,t,d),y&&(g.angle={value:y})),void 0!==y&&"x"===t){var h=i(y,r);h&&(g.align={value:h}),p.contains([90,270],y)&&(g.baseline={value:"middle"})}return g=o({},g,n),0===p.keys(g).length?void 0:g},n.labelAngle=a,n.labelAlign=i},{"../../channel":479,"../../fielddef":564,"../../scale":572,"../../type":581,"../../util":582,"../common":488,"./config":482}],484:[function(e,t,n){"use strict";function a(e,t){if(e){if(e.length!==t.length)return;for(var n=e.length,a=0;a<n;a++){var i=e[a].main,r=t[a].main;if(!!i!=!!r)return;if(i&&r){var l=i.getWithExplicit("orient"),s=r.getWithExplicit("orient");if(l.explicit&&s.explicit&&l.value!==s.value)return;e[a].main=o(i,r)}var d=e[a].grid,p=t[a].grid;if(!!d!=!!p)return;d&&p&&(e[a].grid=o(d,p))}}else return t.map(function(e){return u({},e.main?{main:e.main.clone()}:{},e.grid?{grid:e.grid.clone()}:{})});return e}function o(e,t){for(var n=function(n){var a=h.mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",function(e,t){return"title"===n?_.titleMerger(e,t):"gridScale"===n?{explicit:e.explicit,value:e.value||t.value}:h.defaultTieBreaker(e,t,n,"axis")});e.setWithExplicit(n,a)},a=0,i=f.VG_AXIS_PROPERTIES,o;a<i.length;a++)o=i[a],n(o);return e}function i(e){return!1===e||null===e}function r(e){return g.some(T,function(t){return l(e,t)})}function l(e,t){return!("axis"!==t)||("grid"===t||"title"===t?!!e.get(t):!i(e.get(t)))}function s(e,t){return p(e,t,!0)}function d(e,t){return p(e,t,!1)}function p(t,n,e){var a=n.axis(t),i=new b.AxisComponentPart;f.VG_AXIS_PROPERTIES.forEach(function(o){var r=c(o,a,t,n,e);if(void 0!==r){var l="values"===o?!!a.values:"encode"===o?!!a.encoding||!!a.labelAngle:r===a[o],s=x.getAxisConfig(o,n.config,t,i.get("orient"),n.getScaleComponent(t).get("type"));(l||void 0===s||e)&&i.set(o,r,l)}});var o=a.encoding||{},r=T.reduce(function(a,e){if(!l(i,e))return a;var r="labels"===e?v.labels(n,t,o.labels||{},i.get("orient")):o[e]||{};return void 0!==r&&0<g.keys(r).length&&(a[e]={update:r}),a},{});return 0<g.keys(r).length&&i.set("encode",r,!!a.encoding||!!a.labelAngle),i}function c(e,t,n,a,i){var o=a.fieldDef(n);if((!i||"main"!==f.AXIS_PROPERTY_TYPE[e])&&(i||"grid"!==f.AXIS_PROPERTY_TYPE[e])){switch(e){case"scale":return a.scaleName(n);case"gridScale":return S.gridScale(a,n,i);case"domain":return S.domain(e,t,i,n);case"format":return _.numberFormat(o,t.format,a.config);case"grid":{var r=a.getScaleComponent(n).get("type");return _.getSpecifiedOrDefaultValue(t.grid,S.grid(r,o))}case"labels":return!i&&t.labels;case"labelFlush":return S.labelFlush(o,n,t,i);case"labelOverlap":{var r=a.getScaleComponent(n).get("type");return S.labelOverlap(o,t,n,r)}case"minExtent":return S.minMaxExtent(t.minExtent,i);case"maxExtent":return S.minMaxExtent(t.maxExtent,i);case"orient":return _.getSpecifiedOrDefaultValue(t.orient,S.orient(n));case"tickCount":{var r=a.getScaleComponent(n).get("type"),l="x"===n?"width":"y"===n?"height":void 0,s=l?a.getSizeSignalRef(l):void 0;return _.getSpecifiedOrDefaultValue(t.tickCount,S.tickCount(n,o,r,s))}case"ticks":return S.ticks(e,t,i,n);case"title":return _.getSpecifiedOrDefaultValue(t.title,S.title(t.titleMaxLength,o,a.config));case"values":return S.values(t,a,o);case"zindex":return _.getSpecifiedOrDefaultValue(t.zindex,S.zindex(i));}return f.isAxisProperty(e)?t[e]:void 0}}var u=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var f=e("../../axis"),m=e("../../channel"),g=e("../../util"),_=e("../common"),y=e("../resolve"),h=e("../split"),b=e("./component"),x=e("./config"),v=e("./encode"),S=e("./properties"),T=["domain","grid","labels","ticks","title"];n.parseUnitAxis=function(e){return m.POSITION_SCALE_CHANNELS.reduce(function(t,n){if(e.axis(n)){var a={},i=d(n,e);i&&r(i)&&(a.main=i);var o=s(n,e);o&&r(o)&&(a.grid=o),t[n]=[a]}return t},{})};var k={bottom:"top",top:"bottom",left:"right",right:"left"};n.parseLayerAxis=function(e){for(var t=e.component,n=t.axes,i=t.resolve,o={top:0,bottom:0,right:0,left:0},r=0,l=e.children,s;r<l.length;r++){s=l[r],s.parseAxisAndHeader();for(var d=0,p=g.keys(s.component.axes),c;d<p.length;d++)c=p[d],i.axis[c]=y.parseGuideResolve(e.component.resolve,c),"shared"===i.axis[c]&&(n[c]=a(n[c],s.component.axes[c]),!n[c]&&(i.axis[c]="independent",delete n[c]))}for(var u=0,f=["x","y"],c;u<f.length;u++){c=f[u];for(var m=0,_=e.children,s;m<_.length;m++)if(s=_[m],!!s.component.axes[c]){if("independent"===i.axis[c]){n[c]=(n[c]||[]).concat(s.component.axes[c]);for(var h=0,b=s.component.axes[c];h<b.length;h++){var x=b[h],v=x.main.getWithExplicit("orient"),S=v.value,T=v.explicit;if(0<o[S]&&!T){var E=k[S];o[S]>o[E]&&x.main.set("orient",E,!1)}o[S]++}}delete s.component.axes[c]}}},n.parseGridAxis=s,n.parseMainAxis=d},{"../../axis":477,"../../channel":479,"../../util":582,"../common":488,"../resolve":533,"../split":553,"./component":481,"./config":482,"./encode":483,"./properties":485}],485:[function(e,t,n){"use strict";function a(e,t,n){return!n&&t[e]}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../bin"),o=e("../../channel"),r=e("../../datetime"),l=e("../../fielddef"),s=e("../../log"),d=e("../../scale"),p=e("../../type"),c=e("../../util");n.domainAndTicks=a,n.domain=a,n.ticks=a,n.grid=function(e,t){return!d.hasDiscreteDomain(e)&&!t.bin},n.gridScale=function(e,t,n){if(n){var a="x"===t?"y":"x";if(e.getScaleComponent(a))return e.scaleName(a)}},n.labelFlush=function(e,t,n,a){return a?void 0:void 0===n.labelFlush?"x"===t&&c.contains(["quantitative","temporal"],e.type)||void 0:n.labelFlush},n.labelOverlap=function(e,t,n,a){return void 0===t.labelOverlap?"nominal"===e.type?void 0:"log"!==a||"greedy":t.labelOverlap},n.minMaxExtent=function(e,t){return t?0:e},n.orient=function(e){switch(e){case o.X:return"bottom";case o.Y:return"left";}throw new Error(s.message.INVALID_CHANNEL_FOR_AXIS)},n.tickCount=function(e,t,n,a){return d.hasDiscreteDomain(n)||"log"===n||c.contains(["month","hours","day","quarter"],t.timeUnit)?void 0:t.bin?{signal:"ceil("+a.signal+"/20)"}:{signal:"ceil("+a.signal+"/40)"}},n.title=function(e,t,n){var a=l.title(t,n);return e?c.truncate(a,e):a},n.values=function(e,t,n){var a=e.values;if(e.values&&r.isDateTime(a[0]))return a.map(function(e){return{signal:r.dateTimeExpr(e,!0)}});if(!a&&n.bin&&n.type===p.QUANTITATIVE){var o=t.getName(i.binToString(n.bin)+"_"+n.field+"_bins");return{signal:"sequence("+o+".start, "+o+".stop + "+o+".step, "+o+".step)"}}return a},n.zindex=function(e){return e?0:1}},{"../../bin":478,"../../channel":479,"../../datetime":561,"../../fielddef":564,"../../log":569,"../../scale":572,"../../type":581,"../../util":582}],486:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../util"),r=e("./data/parse"),l=e("./layoutsize/assemble"),s=e("./model"),d=function(e){function t(t,n,a,i,o){return e.call(this,t,n,a,i,o)||this}return a(t,e),t.prototype.parseData=function(){this.component.data=r.parseData(this),this.children.forEach(function(e){e.parseData()})},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),o.keys(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})},n=0,a=this.children,i;n<a.length;n++)i=a[n],t(i)},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseAxisAndHeader()},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.forEach(function(e){return e.assembleSelectionSignals()}),[]},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},l.assembleLayoutSignals(this))},t.prototype.assembleSelectionData=function(){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},[])},t.prototype.assembleMarks=function(){return this.children.map(function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),a=e.assembleLayoutSize();return i({type:"group",name:e.getName("group")},t?{title:t}:{},n?{style:n}:{},a?{encode:{update:a}}:{},e.assembleGroup())})},t}(s.Model);n.BaseConcatModel=d},{"../util":582,"./data/parse":504,"./layoutsize/assemble":511,"./model":530}],487:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../log"),i=e("../spec"),o=e("./concat"),r=e("./facet"),l=e("./layer"),s=e("./repeat"),d=e("./unit");n.buildModel=function(e,t,n,p,c,u,f){if(i.isFacetSpec(e))return new r.FacetModel(e,t,n,c,u);if(i.isLayerSpec(e))return new l.LayerModel(e,t,n,p,c,u,f);if(i.isUnitSpec(e))return new d.UnitModel(e,t,n,p,c,u,f);if(i.isRepeatSpec(e))return new s.RepeatModel(e,t,n,c,u);if(i.isConcatSpec(e))return new o.ConcatModel(e,t,n,c,u);throw new Error(a.message.INVALID_SPEC)}},{"../log":569,"../spec":575,"./concat":490,"./facet":508,"./layer":509,"./repeat":531,"./unit":554}],488:[function(e,t,n){"use strict";function a(e){return[].concat(e.type,e.style||[])}function i(e,t,n){var i=n.mark[e],o=n[t.type];o[e]!==void 0&&(i=o[e]);for(var r=a(t),l=0,s=r;l<s.length;l++){var d=s[l],c=n.style[d],u=e;c&&c[u]!==void 0&&(i=c[u])}return i}function o(e,t,n){return e.type===m.QUANTITATIVE?t?t:n.numberFormat:void 0}function r(e,t){return"format("+e+", \""+(t||"")+"\")"}function l(e,t,n){return r(e,t||n.numberFormat)}function s(e,t,n,a){return e+" === null || isNaN("+e+") ? \"null\" : "+l(e,n,a)+" + \" - \" + "+l(t,n,a)}function d(e,t,n,a,i,o){if(!t||n){var r=n||i;return o?"utcFormat("+e+", '"+r+"')":"timeFormat("+e+", '"+r+"')"}return f.formatExpression(t,e,a,o)}Object.defineProperty(n,"__esModule",{value:!0});var p=e("../channel"),c=e("../fielddef"),u=e("../scale"),f=e("../timeunit"),m=e("../type"),g=e("../util");n.applyConfig=function(t,e,n){for(var a=0,i=n;a<i.length;a++){var o=i[a],r=e[o];r!==void 0&&(t[o]={value:r})}return t},n.applyMarkConfig=function(t,e,n){for(var a=0,o=n;a<o.length;a++){var r=o[a],l=i(r,e.markDef,e.config);l!==void 0&&(t[r]={value:l})}return t},n.getStyles=a,n.getMarkConfig=i,n.formatSignalRef=function(e,t,n,a){var i=o(e,t,a);if(e.bin){var l=c.field(e,{expr:n}),p=c.field(e,{expr:n,binSuffix:"end"});return{signal:s(l,p,i,a)}}if("quantitative"===e.type)return{signal:""+r(c.field(e,{expr:n}),i)};if(c.isTimeFieldDef(e)){var f=c.isScaleFieldDef(e)&&e.scale&&e.scale.type===u.ScaleType.UTC;return{signal:d(c.field(e,{expr:n}),e.timeUnit,t,a.text.shortTimeLabels,a.timeFormat,f)}}return{signal:"''+"+c.field(e,{expr:n})}},n.getSpecifiedOrDefaultValue=function(e,t){return void 0===e?t:e},n.numberFormat=o,n.numberFormatExpr=l,n.binFormatExpression=s,n.timeFormatExpression=d,n.sortParams=function(e,t){return(g.isArray(e)?e:[e]).reduce(function(e,n){return e.field.push(c.field(n,t)),e.order.push(n.sort||"ascending"),e},{field:[],order:[]})},n.titleMerger=function(e,t){return{explicit:e.explicit,value:e.value===t.value?e.value:e.value+", "+t.value}},n.binRequiresRange=function(e,t){return e.bin?p.isScaleChannel(t)&&g.contains(["ordinal","nominal"],e.type):(console.warn("Only use this method with binned field defs"),!1)}},{"../channel":479,"../fielddef":564,"../scale":572,"../timeunit":577,"../type":581,"../util":582}],489:[function(e,t,n){"use strict";function a(e,t,n){return o({autosize:1===c.keys(n).length&&n.type?n.type:n},p.extractTopLevelProperties(t),p.extractTopLevelProperties(e))}function i(e,t){var n=e.config?r.stripAndRedirectConfig(e.config):void 0,a=e.assembleTitle(),i=e.assembleGroupStyle(),l=e.assembleLayoutSignals();l=l.filter(function(e){return("width"===e.name||"height"===e.name)&&void 0!==e.value?(t[e.name]=+e.value,!1):!0});var s=o({$schema:"https://vega.github.io/schema/vega/v3.0.json"},e.description?{description:e.description}:{},t,a?{title:a}:{},i?{style:i}:{},{data:[].concat(e.assembleSelectionData([]),f.assembleRootData(e.component.data))},e.assembleGroup(l.concat(e.assembleSelectionTopLevelSignals([]))),n?{config:n}:{});return{spec:s}}var o=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../config"),l=e("../fielddef"),s=e("../log"),d=e("../spec"),p=e("../toplevelprops"),c=e("../util"),u=e("./buildmodel"),f=e("./data/assemble"),m=e("./data/optimize");n.compile=function(e,t){void 0===t&&(t={}),t.logger&&s.set(t.logger),t.fieldTitle&&l.setTitleFormatter(t.fieldTitle);try{var n=r.initConfig(c.mergeDeep({},t.config,e.config)),o=d.normalize(e,n),f=p.normalizeAutoSize(e.autosize,n.autosize,d.isLayerSpec(o)||d.isUnitSpec(o)),g=u.buildModel(o,null,"",void 0,void 0,n,"fit"===f.type);return g.parse(),m.optimizeDataflow(g.component.data),i(g,a(e,n,f))}finally{t.logger&&s.reset(),t.fieldTitle&&l.resetTitleFormatter()}}},{"../config":559,"../fielddef":564,"../log":569,"../spec":575,"../toplevelprops":579,"../util":582,"./buildmodel":487,"./data/assemble":492,"./data/optimize":502}],490:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../log"),r=e("../spec"),l=e("./baseconcat"),s=e("./buildmodel"),d=e("./layoutsize/parse"),p=function(e){function t(t,n,a,l,d){var p=e.call(this,t,n,a,d,t.resolve)||this;return p.type="concat",t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&o.warn(o.message.CONCAT_CANNOT_SHARE_AXIS),p.isVConcat=r.isVConcatSpec(t),p.children=(r.isVConcatSpec(t)?t.vconcat:t.hconcat).map(function(e,t){return s.buildModel(e,p,p.getName("concat_"+t),void 0,l,d,!1)}),p}return a(t,e),t.prototype.parseLayoutSize=function(){d.parseConcatLayoutSize(this)},t.prototype.parseAxisGroup=function(){return null},t.prototype.assembleLayout=function(){return i({padding:{row:10,column:10},offset:10},this.isVConcat?{columns:1}:{},{bounds:"full",align:"each"})},t}(l.BaseConcatModel);n.ConcatModel=p},{"../log":569,"../spec":575,"./baseconcat":486,"./buildmodel":487,"./layoutsize/parse":512}],491:[function(e,t,n){"use strict";function a(e,t,n){return n.bin?(e[d.field(n,{})]=!0,e[d.field(n,{binSuffix:"end"})]=!0,c.binRequiresRange(n,t)&&(e[d.field(n,{binSuffix:"range"})]=!0)):e[d.field(n)]=!0,e}function i(e,t){for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];for(var i in a)a.hasOwnProperty(i)&&(n in e?e[n][i]=a[i]:e[n]={op:a[i]})}}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),r=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../channel"),d=e("../../fielddef"),s=e("../../log"),p=e("../../util"),c=e("../common"),u=e("./dataflow"),f=function(e){function n(t,n){var a=e.call(this)||this;return a.dimensions=t,a.measures=n,a}return o(n,e),n.prototype.clone=function(){return new n(r({},this.dimensions),p.duplicate(this.measures))},n.makeFromEncoding=function(e){var t=!1;e.forEachFieldDef(function(e){e.aggregate&&(t=!0)});var i={},o={};return t?(e.forEachFieldDef(function(t,n){t.aggregate?"count"===t.aggregate?(i["*"]=i["*"]||{},i["*"].count=d.field(t,{aggregate:"count"})):(i[t.field]=i[t.field]||{},i[t.field][t.aggregate]=d.field(t),l.isScaleChannel(n)&&"unaggregated"===e.scaleDomain(n)&&(i[t.field].min=d.field(t,{aggregate:"min"}),i[t.field].max=d.field(t,{aggregate:"max"}))):a(o,n,t)}),0===p.keys(o).length+p.keys(i).length?null:new n(o,i)):null},n.makeFromTransform=function(e){for(var t={},a={},i=0,o=e.aggregate,r;i<o.length;i++)r=o[i],r.op&&("count"===r.op?(a["*"]=a["*"]||{},a["*"].count=r.as||d.field(r)):(a[r.field]=a[r.field]||{},a[r.field][r.op]=r.as||d.field(r)));for(var l=0,s=e.groupby,r;l<s.length;l++)r=s[l],t[r]=!0;return 0===p.keys(t).length+p.keys(a).length?null:new n(t,a)},n.prototype.merge=function(e){p.differ(this.dimensions,e.dimensions)?s.debug("different dimensions, cannot merge"):(i(this.measures,e.measures),e.remove())},n.prototype.addDimensions=function(e){var t=this;e.forEach(function(e){return t.dimensions[e]=!0})},n.prototype.dependentFields=function(){var e={};return p.keys(this.dimensions).forEach(function(t){return e[t]=!0}),p.keys(this.measures).forEach(function(t){return e[t]=!0}),e},n.prototype.producedFields=function(){var e=this,t={};return p.keys(this.measures).forEach(function(n){p.keys(e.measures[n]).forEach(function(e){t[e+"_"+n]=!0})}),t},n.prototype.assemble=function(){for(var e=[],t=[],n=[],a=0,i=p.keys(this.measures),o;a<i.length;a++){o=i[a];for(var r=0,l=p.keys(this.measures[o]),s;r<l.length;r++)s=l[r],n.push(this.measures[o][s]),e.push(s),t.push(o)}var d={type:"aggregate",groupby:p.keys(this.dimensions),ops:e,fields:t,as:n};return d},n}(u.DataFlowNode);n.AggregateNode=f},{"../../channel":479,"../../fielddef":564,"../../log":569,"../../util":582,"../common":488,"./dataflow":495}],492:[function(e,t,n){"use strict";function a(e){function t(a,r){if(a instanceof y.SourceNode&&!o.isUrlData(a.data)){e.push(r);var x={name:null,source:r.name,transform:[]};r=x}if(a instanceof m.ParseNode&&(a.parent instanceof y.SourceNode&&!r.source?r.format=i({},r.format||{},{parse:a.assembleFormatParse()}):r.transform=r.transform.concat(a.assembleTransforms())),a instanceof c.FacetNode)return r.name||(r.name="data_"+n++),!r.source||0<r.transform.length?(e.push(r),a.data=r.name):a.data=r.source,void a.assemble().forEach(function(t){return e.push(t)});if((a instanceof u.FilterNode||a instanceof d.CalculateNode||a instanceof l.AggregateNode||a instanceof _.LookupNode||a instanceof g.IdentifierNode)&&r.transform.push(a.assemble()),(a instanceof f.FilterInvalidNode||a instanceof s.BinNode||a instanceof b.TimeUnitNode||a instanceof h.StackNode)&&(r.transform=r.transform.concat(a.assemble())),a instanceof l.AggregateNode&&!r.name&&(r.name="data_"+n++),a instanceof p.OutputNode)if(r.source&&0===r.transform.length)a.setSource(r.source);else if(a.parent instanceof p.OutputNode)a.setSource(r.name);else if(r.name||(r.name="data_"+n++),a.setSource(r.name),1===a.numChildren()){e.push(r);var x={name:null,source:r.name,transform:[]};r=x}switch(a.numChildren()){case 0:a instanceof p.OutputNode&&(!r.source||0<r.transform.length)&&e.push(r);break;case 1:t(a.children[0],r);break;default:r.name||(r.name="data_"+n++);var v=r.name;!r.source||0<r.transform.length?e.push(r):v=r.source,a.children.forEach(function(e){var n={name:null,source:v,transform:[]};t(e,n)});}}var n=0;return t}var i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../data"),r=e("../../util"),l=e("./aggregate"),s=e("./bin"),d=e("./calculate"),p=e("./dataflow"),c=e("./facet"),u=e("./filter"),f=e("./filterinvalid"),m=e("./formatparse"),g=e("./indentifier"),_=e("./lookup"),y=e("./source"),h=e("./stack"),b=e("./timeunit");n.assembleFacetData=function(e){var t=[],n=a(t);return e.children.forEach(function(t){return n(t,{source:e.name,name:null,transform:[]})}),t},n.assembleRootData=function(e){var n=r.vals(e.sources),i=[],o=a(i),l=0;n.forEach(function(e){e.hasName()||(e.dataName="source_"+l++);var t=e.assemble();o(e,t)}),i.forEach(function(e){0===e.transform.length&&delete e.transform}),i.sort(function(e,t){return 0===(e.transform||[]).length?-1:0===(t.transform||[]).length?1:0});for(var s=0,p=i,c;s<p.length;s++){c=p[s];for(var d=0,u=c.transform||[],f;d<u.length;d++)f=u[d],"lookup"===f.type&&(f.from=e.outputNodes[f.from].getSource())}return i}},{"../../data":560,"../../util":582,"./aggregate":491,"./bin":493,"./calculate":494,"./dataflow":495,"./facet":496,"./filter":497,"./filterinvalid":498,"./formatparse":499,"./indentifier":500,"./lookup":501,"./source":505,"./stack":506,"./timeunit":507}],493:[function(e,t,n){"use strict";function a(e,t,n,a){if(m.binRequiresRange(t,n)){var i=g.isUnitModel(e)?e.axis(n)||e.legend(n)||{}:{},o=u.field(t,{expr:"datum"}),r=u.field(t,{expr:"datum",binSuffix:"end"});return{formulaAs:u.field(t,{binSuffix:"range"}),formula:m.binFormatExpression(o,r,i.format,a)}}return{}}function i(e,t){return c.binToString(e)+"_"+t}function o(e){return!!e.model}function r(e,t){if(o(e)){var n=e.model;return{signal:n.getName(t+"_bins"),extentSignal:n.getName(t+"_extent")}}return e}function l(e){return"as"in e}function s(e,t){var n=l(e)?[e.as,e.as+"_end"]:[u.field(e,{}),u.field(e,{binSuffix:"end"})];var a=u.normalizeBin(e.bin,void 0)||{},o=i(a,e.field),s=r(t,o),d=s.signal,c=s.extentSignal,f=p({bin:a,field:e.field,as:n},d?{signal:d}:{},c?{extentSignal:c}:{});return{key:o,binComponent:f}}var d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../bin"),u=e("../../fielddef"),f=e("../../util"),m=e("../common"),g=e("../model"),_=e("./dataflow"),y=function(e){function n(t){var n=e.call(this)||this;return n.bins=t,n}return d(n,e),n.prototype.clone=function(){return new n(f.duplicate(this.bins))},n.makeBinFromEncoding=function(e){var t=e.reduceFieldDef(function(t,n,i){if(n.bin){var o=s(n,{model:e}),r=o.key,l=o.binComponent;t[r]=p({},l,t[r],a(e,n,i,e.config))}return t},{});return 0===f.keys(t).length?null:new n(t)},n.makeFromTransform=function(e,t){var a=s(e,t),i=a.key,o=a.binComponent;return new n((r={},r[i]=o,r));var r},n.prototype.merge=function(e){this.bins=p({},this.bins,e.bins),e.remove()},n.prototype.producedFields=function(){var e={};return f.vals(this.bins).forEach(function(t){t.as.forEach(function(t){return e[t]=!0})}),e},n.prototype.dependentFields=function(){var e={};return f.vals(this.bins).forEach(function(t){e[t.field]=!0}),e},n.prototype.assemble=function(){return f.flatten(f.vals(this.bins).map(function(e){var t=[],n=p({type:"bin",field:e.field,as:e.as,signal:e.signal},e.bin);return!e.bin.extent&&e.extentSignal&&(t.push({type:"extent",field:e.field,signal:e.extentSignal}),n.extent={signal:e.extentSignal}),t.push(n),e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))},n}(_.DataFlowNode);n.BinNode=y},{"../../bin":478,"../../fielddef":564,"../../util":582,"../common":488,"../model":530,"./dataflow":495}],494:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../util"),o=e("./dataflow"),r=function(e){function t(t){var n=e.call(this)||this;return n.transform=t,n}return a(t,e),t.prototype.clone=function(){return new t(i.duplicate(this.transform))},t.prototype.producedFields=function(){var e={};return e[this.transform.as]=!0,e},t.prototype.assemble=function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}},t}(o.DataFlowNode);n.CalculateNode=r},{"../../util":582,"./dataflow":495}],495:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e){this.debugName=e,this._children=[],this._parent=null}return e.prototype.clone=function(){throw new Error("Cannot clone node")},e.prototype.producedFields=function(){return{}},e.prototype.dependentFields=function(){return{}},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(e){this._parent=e,e.addChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return this._children.length},e.prototype.addChild=function(e){this._children.push(e)},e.prototype.removeChild=function(e){this._children.splice(this._children.indexOf(e),1)},e.prototype.remove=function(){for(var e=0,t=this._children,n;e<t.length;e++)n=t[e],n.parent=this._parent;this._parent.removeChild(this)},e.prototype.insertAsParentOf=function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this},e.prototype.swapWithParent=function(){for(var e=this._parent,t=e.parent,n=0,a=this._children,i;n<a.length;n++)i=a[n],i.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this},e}();n.DataFlowNode=i;var o=function(e){function t(t,n,a){var i=e.call(this,t)||this;return i.type=n,i.refCounts=a,i._source=i._name=t,i.refCounts&&!(i._name in i.refCounts)&&(i.refCounts[i._name]=0),i}return a(t,e),t.prototype.clone=function(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e},t.prototype.getSource=function(){return this.refCounts[this._name]++,this._source},t.prototype.isRequired=function(){return!!this.refCounts[this._name]},t.prototype.setSource=function(e){this._source=e},t}(i);n.OutputNode=o},{}],496:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../channel"),r=e("../../log"),l=e("../../scale"),s=e("../../vega.schema"),d=e("../scale/domain"),p=e("./dataflow"),c=function(e){function t(t,n,a){var i=e.call(this)||this;return i.model=t,i.name=n,i.data=a,t.facet.column&&(i.columnFields=[t.field(o.COLUMN)],i.columnName=t.getName("column_domain"),t.fieldDef(o.COLUMN).bin&&i.columnFields.push(t.field(o.COLUMN,{binSuffix:"end"}))),t.facet.row&&(i.rowFields=[t.field(o.ROW)],i.rowName=t.getName("row_domain"),t.fieldDef(o.ROW).bin&&i.rowFields.push(t.field(o.ROW,{binSuffix:"end"}))),i.childModel=t.child,i}return a(t,e),Object.defineProperty(t.prototype,"fields",{get:function(){var e=[];return this.columnFields&&(e=e.concat(this.columnFields)),this.rowFields&&(e=e.concat(this.rowFields)),e},enumerable:!0,configurable:!0}),t.prototype.getSource=function(){return this.name},t.prototype.getChildIndependentFieldsWithStep=function(){for(var e={},t=0,n=["x","y"];t<n.length;t++){var a=n[t],i=this.childModel.component.scales[a];if(i&&!i.merged){var o=i.get("type"),p=i.get("range");if(l.hasDiscreteDomain(o)&&s.isVgRangeStep(p)){var c=d.assembleDomain(this.childModel,a),u=d.getFieldFromDomain(c);u?e[a]=u:r.warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e},t.prototype.assembleRowColumnData=function(e,t,n){var a={},o="row"===e?"y":"x";return n[o]&&(t?a={fields:["distinct_"+n[o]],ops:["max"],as:["distinct_"+n[o]]}:a={fields:[n[o]],ops:["distinct"]}),{name:"row"===e?this.rowName:this.columnName,source:t||this.data,transform:[i({type:"aggregate",groupby:"row"===e?this.rowFields:this.columnFields},a)]}},t.prototype.assemble=function(){var e=[],t=null,n=this.getChildIndependentFieldsWithStep();if(this.columnName&&this.rowName&&(n.x||n.y)){t="cross_"+this.columnName+"_"+this.rowName;var a=[].concat(n.x?[n.x]:[],n.y?[n.y]:[]),i=a.map(function(){return"distinct"});e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.columnFields.concat(this.rowFields),fields:a,ops:i}]})}return this.columnName&&e.push(this.assembleRowColumnData("column",t,n)),this.rowName&&e.push(this.assembleRowColumnData("row",t,n)),e},t}(p.DataFlowNode);n.FacetNode=c},{"../../channel":479,"../../log":569,"../../scale":572,"../../vega.schema":584,"../scale/domain":536,"./dataflow":495}],497:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../filter"),o=e("../../util"),r=e("./dataflow"),l=function(e){function t(t,n){var a=e.call(this)||this;return a.model=t,a.filter=n,a.expr=i.expression(a.model,a.filter,a),a}return a(t,e),t.prototype.clone=function(){return new t(this.model,o.duplicate(this.filter))},t.prototype.assemble=function(){return{type:"filter",expr:this.expr}},t}(r.DataFlowNode);n.FilterNode=l},{"../../filter":565,"../../util":582,"./dataflow":495}],498:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../channel"),r=e("../../fielddef"),l=e("../../scale"),s=e("../../util"),d=e("./dataflow"),p=function(e){function t(t){var n=e.call(this)||this;return n.fieldDefs=t,n}return a(t,e),t.prototype.clone=function(){return new t(i({},this.fieldDefs))},t.make=function(e){if("filter"!==e.config.invalidValues)return null;var n=e.reduceFieldDef(function(t,n,a){var i=o.isScaleChannel(a)&&e.getScaleComponent(a);if(i){var r=i.get("type");l.hasContinuousDomain(r)&&!n.aggregate&&(t[n.field]=n)}return t},{});return s.keys(n).length?new t(n):null},Object.defineProperty(t.prototype,"filter",{get:function(){return this.fieldDefs},enumerable:!0,configurable:!0}),t.prototype.assemble=function(){var e=this,t=s.keys(this.filter).reduce(function(t,n){var a=e.fieldDefs[n],i=r.field(a,{expr:"datum"});return null!==a&&(t.push(i+" !== null"),t.push("!isNaN("+i+")")),t},[]);return 0<t.length?{type:"filter",expr:t.join(" && ")}:null},t}(d.DataFlowNode);n.FilterInvalidNode=p},{"../../channel":479,"../../fielddef":564,"../../scale":572,"../../util":582,"./dataflow":495}],499:[function(e,t,n){"use strict";function a(e,t){var n="datum"+u.accessPath(e);if("number"===t)return"toNumber("+n+")";if("boolean"===t)return"toBoolean("+n+")";if("string"===t)return"toString("+n+")";if("date"===t)return"toDate("+n+")";if(0===t.indexOf("date:")){var a=t.slice(5,t.length);return"timeParse("+n+","+a+")"}if(0===t.indexOf("utc:")){var a=t.slice(4,t.length);return"utcParse("+n+","+a+")"}return d.warn(d.message.unrecognizedParse(t)),null}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../aggregate"),l=e("../../fielddef"),s=e("../../filter"),d=e("../../log"),p=e("../../logical"),c=e("../../transform"),u=e("../../util"),f=e("../model"),m=e("./dataflow"),g=function(e){function t(t){var n=e.call(this)||this;return n._parse={},n._parse=t,n}return i(t,e),t.prototype.clone=function(){return new t(u.duplicate(this.parse))},t.make=function(e){var n={},a={};(e.transforms||[]).forEach(function(e){c.isCalculate(e)?a[e.as]=!0:c.isFilter(e)&&p.forEachLeave(e.filter,function(e){(s.isEqualFilter(e)||s.isRangeFilter(e)||s.isOneOfFilter(e))&&e.timeUnit&&(n[e.field]="date")})},{}),(f.isUnitModel(e)||f.isFacetModel(e))&&e.forEachFieldDef(function(e){if(l.isTimeFieldDef(e))n[e.field]="date";else if(l.isNumberFieldDef(e)){if(a[e.field]||r.isCountingAggregateOp(e.aggregate))return;n[e.field]="number"}});var i=e.data;if(i&&i.format&&i.format.parse){var o=i.format.parse;u.keys(o).forEach(function(e){n[e]=o[e]})}var m=e.component.data.ancestorParse;return u.keys(m).forEach(function(e){n[e]===m[e]?delete n[e]:d.warn(d.message.differentParse(e,n[e],m[e]))}),0===u.keys(n).length?null:new t(n)},Object.defineProperty(t.prototype,"parse",{get:function(){return this._parse},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){this._parse=o({},this._parse,e.parse),e.remove()},t.prototype.assembleFormatParse=function(){return this._parse},t.prototype.producedFields=function(){return u.toSet(u.keys(this.parse))},t.prototype.dependentFields=function(){return u.toSet(u.keys(this.parse))},t.prototype.assembleTransforms=function(){var e=this;return u.keys(this._parse).map(function(t){var n=a(t,e._parse[t]);if(!n)return null;return{type:"formula",expr:n,as:t}}).filter(function(e){return null!==e})},t}(m.DataFlowNode);n.ParseNode=g},{"../../aggregate":476,"../../fielddef":564,"../../filter":565,"../../log":569,"../../logical":570,"../../transform":580,"../../util":582,"../model":530,"./dataflow":495}],500:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../selection"),o=e("./dataflow"),r=function(e){function t(){return e.call(this)||this}return a(t,e),t.prototype.clone=function(){return new t},t.prototype.producedFields=function(){return e={},e[i.SELECTION_ID]=!0,e;var e},t.prototype.assemble=function(){return{type:"identifier",as:i.SELECTION_ID}},t}(o.DataFlowNode);n.IdentifierNode=r},{"../../selection":573,"./dataflow":495}],501:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("vega-util"),r=e("../../log"),l=e("./dataflow"),d=e("./source"),s=function(e){function t(t,n){var a=e.call(this)||this;return a.transform=t,a.secondary=n,a}return a(t,e),t.make=function(e,n,a){var i=e.component.data.sources,o=new d.SourceNode(n.from.data),r=i[o.hash()];r||(i[o.hash()]=o,r=o);var s=e.getName("lookup_"+a),p=new l.OutputNode(s,"lookup",e.component.data.outputNodeRefCounts);return p.parent=r,e.component.data.outputNodes[s]=p,new t(n,p.getSource())},t.prototype.producedFields=function(){return o.toSet(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))},t.prototype.assemble=function(){var e;if(this.transform.from.fields)e=i({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var t=this.transform.as;o.isString(t)||(r.warn(r.message.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return i({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e,this.transform.default?{default:this.transform.default}:{})},t}(l.DataFlowNode);n.LookupNode=s},{"../../log":569,"./dataflow":495,"./source":505,"vega-util":591}],502:[function(e,t,n){"use strict";function a(e){function t(a){if(!(a instanceof u.FacetNode)){var i=a.clone();if(i instanceof c.OutputNode){var o=n.FACET_SCALE_PREFIX+i.getSource();i.setSource(o),e.model.component.data.outputNodes[o]=i}else(i instanceof p.AggregateNode||i instanceof g.StackNode)&&i.addDimensions(e.fields);return d.flatten(a.children.map(t)).forEach(function(e){return e.parent=i}),[i]}return d.flatten(a.children.map(t))}return t}function i(e){if(!(e instanceof u.FacetNode))e.children.forEach(i);else if(1===e.numChildren()&&!(e.children[0]instanceof c.OutputNode)){var t=e.children[0];(t instanceof p.AggregateNode||t instanceof g.StackNode)&&t.addDimensions(e.fields),t.swapWithParent(),i(e)}else{o(e.model.component.data.main);var n=d.flatten(e.children.map(a(e)));n.forEach(function(t){return t.parent=e.model.component.data.main})}}function o(e){if(e instanceof c.OutputNode&&e.type===s.MAIN&&1===e.numChildren()){var t=e.children[0];t instanceof u.FacetNode||(t.swapWithParent(),o(e))}}function r(e){e instanceof f.FilterInvalidNode&&d.every(d.vals(e.filter),function(e){return null===e})&&e.remove(),e instanceof c.OutputNode&&!e.isRequired()&&e.remove(),e.children.forEach(r)}function l(e){function t(e){0===e.numChildren()?n.push(e):e.children.forEach(t)}var n=[];return e.forEach(t),n}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../data"),d=e("../../util"),p=e("./aggregate"),c=e("./dataflow"),u=e("./facet"),f=e("./filterinvalid"),m=e("./optimizers"),g=e("./stack");n.FACET_SCALE_PREFIX="scale_",n.optimizeDataflow=function(e){var t=d.vals(e.sources);t.forEach(r),t=t.filter(function(e){return 0<e.numChildren()}),l(t).forEach(m.iterateFromLeaves(m.removeUnusedSubtrees)),t=t.filter(function(e){return 0<e.numChildren()}),l(t).forEach(m.iterateFromLeaves(m.moveParseUp)),l(t).forEach(m.removeDuplicateTimeUnits),t.forEach(i),d.keys(e.sources).forEach(function(t){0===e.sources[t].numChildren()&&delete e.sources[t]})}},{"../../data":560,"../../util":582,"./aggregate":491,"./dataflow":495,"./facet":496,"./filterinvalid":498,"./optimizers":503,"./stack":506}],503:[function(e,t,n){"use strict";function a(e){function t(n){if(!(n instanceof s.SourceNode)){var a=n.parent;e(n)&&t(a)}}return t}var i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../util"),r=e("./dataflow"),l=e("./formatparse"),s=e("./source"),d=e("./timeunit");n.iterateFromLeaves=a,n.moveParseUp=function(e){var t=e.parent;if(e instanceof l.ParseNode){if(t instanceof s.SourceNode)return!1;if(1<t.numChildren())return!0;if(t instanceof l.ParseNode)t.merge(e);else{if(o.hasIntersection(t.producedFields(),e.dependentFields()))return!0;e.swapWithParent()}}return!0},n.removeUnusedSubtrees=function(e){return e instanceof r.OutputNode||0<e.numChildren()?!1:(e.remove(),!0)},n.removeDuplicateTimeUnits=function(e){var t={};return a(function(e){if(e instanceof d.TimeUnitNode){var n=e.producedFields(),a=o.keys(n).every(function(e){return!!t[e]});a?e.remove():t=i({},t,n)}return!0})(e)}},{"../../util":582,"./dataflow":495,"./formatparse":499,"./source":505,"./timeunit":507}],504:[function(e,t,n){"use strict";function a(e,t){if(e.data||!e.parent){var n=new E.SourceNode(e.data),a=n.hash();return a in t?t[a]:(t[a]=n,n)}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function i(e){function n(e){t?e.parent?o.insertAsParentOf(e):e.parent=o:t=e.parent||e,o=e}var t=null,a=0,i,o;e.transforms.forEach(function(o){if(c.isCalculate(o))i=new y.CalculateNode(o);else if(c.isFilter(o)){var t={},l=o.filter,f=null;if(d.isEqualFilter(l)?f=l.equal:d.isRangeFilter(l)?f=l.range[0]:d.isOneOfFilter(l)&&(f=(l.oneOf||l["in"])[0]),f&&(s.isDateTime(f)?t[l.field]="date":r.isNumber(f)?t[l.field]="number":r.isString(f)&&(t[l.field]="string")),0<u.keys(t).length){var h=new S.ParseNode(t);n(h)}i=new x.FilterNode(e,o.filter)}else if(c.isBin(o))i=_.BinNode.makeFromTransform(o,{model:e});else if(c.isTimeUnit(o))i=A.TimeUnitNode.makeFromTransform(o);else if(c.isAggregate(o))i=g.AggregateNode.makeFromTransform(o),m.requiresSelectionId(e)&&(n(i),i=new T.IdentifierNode);else if(c.isLookup(o))i=k.LookupNode.make(e,o,a++);else return void p.warn(p.message.invalidTransformIgnored(o));n(i)});var l=i;return{first:t,last:l}}var o=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var r=e("vega-util"),l=e("../../data"),s=e("../../datetime"),d=e("../../filter"),p=e("../../log"),c=e("../../transform"),u=e("../../util"),f=e("../model"),m=e("../selection/selection"),g=e("./aggregate"),_=e("./bin"),y=e("./calculate"),h=e("./dataflow"),b=e("./facet"),x=e("./filter"),v=e("./filterinvalid"),S=e("./formatparse"),T=e("./indentifier"),k=e("./lookup"),E=e("./source"),N=e("./stack"),A=e("./timeunit");n.parseTransformArray=i,n.parseData=function(e){var t=a(e,e.component.data.sources),n=e.component.data.outputNodes,r=e.component.data.outputNodeRefCounts,s=t;if(m.requiresSelectionId(e)&&!e.parent){var d=new T.IdentifierNode;d.parent=s,s=d}var p=e.parent&&f.isLayerModel(e.parent);if((f.isUnitModel(e)||f.isFacetModel(e))&&p){var c=_.BinNode.makeBinFromEncoding(e);c&&(c.parent=s,s=c)}if(0<e.transforms.length){var u=i(e),y=u.first,x=u.last;y.parent=s,s=x}var k=S.ParseNode.make(e);if(k&&(k.parent=s,s=k),f.isUnitModel(e)||f.isFacetModel(e)){if(!p){var c=_.BinNode.makeBinFromEncoding(e);c&&(c.parent=s,s=c)}var E=A.TimeUnitNode.makeFromEncoding(e);E&&(E.parent=s,s=E)}var w=e.getName(l.RAW),C=new h.OutputNode(w,l.RAW,r);if(n[w]=C,C.parent=s,s=C,f.isUnitModel(e)){var O=g.AggregateNode.makeFromEncoding(e);if(O&&(O.parent=s,s=O,m.requiresSelectionId(e))){var d=new T.IdentifierNode;d.parent=s,s=d}var D=N.StackNode.make(e);D&&(D.parent=s,s=D)}if(f.isUnitModel(e)){var P=v.FilterInvalidNode.make(e);P&&(P.parent=s,s=P)}var R=e.getName(l.MAIN),I=new h.OutputNode(R,l.MAIN,r);n[R]=I,I.parent=s,s=I;var M=null;if(f.isFacetModel(e)){var F=e.getName("facet");M=new b.FacetNode(e,F,I.getSource()),n[F]=M,M.parent=s,s=M}var B=o({},e.component.data.ancestorParse,k?k.parse:{});return o({},e.component.data,{outputNodes:n,outputNodeRefCounts:r,raw:C,main:I,facetRoot:M,ancestorParse:B})}},{"../../data":560,"../../datetime":561,"../../filter":565,"../../log":569,"../../transform":580,"../../util":582,"../model":530,"../selection/selection":543,"./aggregate":491,"./bin":493,"./calculate":494,"./dataflow":495,"./facet":496,"./filter":497,"./filterinvalid":498,"./formatparse":499,"./indentifier":500,"./lookup":501,"./source":505,"./stack":506,"./timeunit":507,"vega-util":591}],505:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},o=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../data"),l=e("../../util"),s=e("./dataflow"),d=function(e){function t(t){var n=e.call(this)||this;if(t=t||{name:"source"},r.isInlineData(t))n._data={values:t.values};else if(!r.isUrlData(t))r.isNamedData(t)&&(n._name=t.name,n._data={});else if(n._data={url:t.url},t.format||(t.format={}),!t.format||!t.format.type){var a=/(?:\.([^.]+))?$/.exec(t.url)[1];l.contains(["json","csv","tsv","topojson"],a)||(a="json"),t.format.type=a}if(!r.isNamedData(t)&&t.format){var i=t.format,s=i.parse,d=void 0===s?null:s,p=o(i,["parse"]);n._data.format=p}return n}return a(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.hasName=function(){return!!this._name},Object.defineProperty(t.prototype,"dataName",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{set:function(){throw new Error("Source nodes have to be roots.")},enumerable:!0,configurable:!0}),t.prototype.remove=function(){throw new Error("Source nodes are roots and cannot be removed.")},t.prototype.hash=function(){return r.isInlineData(this._data)?(this._hash||(this._hash=l.hash(this._data)),this._hash):r.isUrlData(this._data)?l.hash([this._data.url,this._data.format]):this._name},t.prototype.assemble=function(){return i({name:this._name},this._data,{transform:[]})},t}(s.DataFlowNode);n.SourceNode=d},{"../../data":560,"../../util":582,"./dataflow":495}],506:[function(e,t,n){"use strict";function a(e){return e.stack.stackBy.reduce(function(e,t){var n=t.fieldDef,a=r.field(n);return a&&e.push(a),e},[])}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("vega-util"),r=e("../../fielddef"),l=e("../../util"),s=e("../common"),d=e("./dataflow"),p=function(e){function t(t){var n=e.call(this)||this;return n._stack=t,n}return i(t,e),t.prototype.clone=function(){return new t(l.duplicate(this._stack))},t.make=function(e){var n=e.stack;if(!n)return null;var i;n.groupbyChannel&&(i=e.fieldDef(n.groupbyChannel));var o=a(e),r=e.encoding.order,l;return l=r?s.sortParams(r):o.reduce(function(e,t){return e.field.push(t),e.order.push("descending"),e},{field:[],order:[]}),new t({dimensionFieldDef:i,field:e.field(n.fieldChannel),facetby:[],stackby:o,sort:l,offset:n.offset,impute:n.impute})},Object.defineProperty(t.prototype,"stack",{get:function(){return this._stack},enumerable:!0,configurable:!0}),t.prototype.addDimensions=function(e){this._stack.facetby=this._stack.facetby.concat(e)},t.prototype.dependentFields=function(){var e={};e[this._stack.field]=!0,this.getGroupbyFields().forEach(function(t){return e[t]=!0}),this._stack.facetby.forEach(function(t){return e[t]=!0});var t=this._stack.sort.field;return o.isArray(t)?t.forEach(function(t){return e[t]=!0}):e[t]=!0,e},t.prototype.producedFields=function(){var e={};return e[this._stack.field+"_start"]=!0,e[this._stack.field+"_end"]=!0,e},t.prototype.getGroupbyFields=function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute;return t?t.bin?n?[r.field(t,{binSuffix:"mid"})]:[r.field(t,{}),r.field(t,{binSuffix:"end"})]:[r.field(t)]:[]},t.prototype.assemble=function(){var e=[],t=this._stack,n=t.facetby,a=t.field,i=t.dimensionFieldDef,o=t.impute,l=t.offset,s=t.sort,d=t.stackby;if(o&&i){var p=i?r.field(i,{binSuffix:"mid"}):void 0;i.bin&&e.push({type:"formula",expr:"("+r.field(i,{expr:"datum"})+"+"+r.field(i,{expr:"datum",binSuffix:"end"})+")/2",as:p}),e.push({type:"impute",field:a,groupby:d,key:p,method:"value",value:0})}return e.push({type:"stack",groupby:this.getGroupbyFields().concat(n),field:a,sort:s,as:[a+"_start",a+"_end"],offset:l}),e},t}(d.DataFlowNode);n.StackNode=p},{"../../fielddef":564,"../../util":582,"../common":488,"./dataflow":495,"vega-util":591}],507:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../fielddef"),r=e("../../timeunit"),l=e("../../util"),s=e("./dataflow"),d=function(e){function n(t){var n=e.call(this)||this;return n.formula=t,n}return a(n,e),n.prototype.clone=function(){return new n(l.duplicate(this.formula))},n.makeFromEncoding=function(e){var t=e.reduceFieldDef(function(e,t){if(t.timeUnit){var n=o.field(t);e[n]={as:n,timeUnit:t.timeUnit,field:t.field}}return e},{});return 0===l.keys(t).length?null:new n(t)},n.makeFromTransform=function(e){return new n((t={},t[e.field]={as:e.as,timeUnit:e.timeUnit,field:e.field},t));var t},n.prototype.merge=function(e){this.formula=i({},this.formula,e.formula),e.remove()},n.prototype.producedFields=function(){var e={};return l.vals(this.formula).forEach(function(t){e[t.as]=!0}),e},n.prototype.dependentFields=function(){var e={};return l.vals(this.formula).forEach(function(t){e[t.field]=!0}),e},n.prototype.assemble=function(){return l.vals(this.formula).map(function(e){return{type:"formula",as:e.as,expr:r.fieldExpr(e.timeUnit,e.field)}})},n}(s.DataFlowNode);n.TimeUnitNode=d},{"../../fielddef":564,"../../timeunit":577,"../../util":582,"./dataflow":495}],508:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../channel"),r=e("../encoding"),l=e("../fielddef"),s=e("../log"),d=e("../scale"),p=e("../util"),c=e("../vega.schema"),u=e("./buildmodel"),f=e("./data/assemble"),m=e("./data/parse"),g=e("./layout/header"),_=e("./layoutsize/parse"),y=e("./model"),h=e("./repeater"),b=e("./resolve"),x=e("./scale/domain"),v=function(e){function t(t,n,a,i,o){var r=e.call(this,t,n,a,o,t.resolve)||this;r.type="facet",r.child=u.buildModel(t.spec,r,r.getName("child"),void 0,i,o,!1),r.children=[r.child];var l=h.replaceRepeaterInFacet(t.facet,i);return r.facet=r.initFacet(l),r}return a(t,e),t.prototype.initFacet=function(e){return r.reduce(e,function(e,t,n){return p.contains([o.ROW,o.COLUMN],n)?void 0===t.field?(s.warn(s.message.emptyFieldDef(t,n)),e):(e[n]=l.normalize(t,n),e):(s.warn(s.message.incompatibleChannel(n,"facet")),e)},{})},t.prototype.channelHasField=function(e){return!!this.facet[e]},t.prototype.fieldDef=function(e){return this.facet[e]},t.prototype.parseData=function(){this.component.data=m.parseData(this),this.child.parseData()},t.prototype.parseLayoutSize=function(){_.parseChildrenLayoutSize(this)},t.prototype.parseSelection=function(){this.child.parseSelection(),this.component.selection=this.child.component.selection},t.prototype.parseMarkGroup=function(){this.child.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){this.child.parseAxisAndHeader(),this.parseHeader("column"),this.parseHeader("row"),this.mergeChildAxis("x"),this.mergeChildAxis("y")},t.prototype.parseHeader=function(e){if(this.channelHasField(e)){var t=this.facet[e],n=t.header||{},a=void 0===n.title?l.title(t,this.config):n.title;this.child.component.layoutHeaders[e].title&&(a+=" / "+this.child.component.layoutHeaders[e].title,this.child.component.layoutHeaders[e].title=null),this.component.layoutHeaders[e]={title:a,facetFieldDef:t,header:[this.makeHeaderComponent(e,!0)]}}},t.prototype.makeHeaderComponent=function(e,t){var n="row"===e?"height":"width";return{labels:t,sizeSignal:this.child.component.layoutSize.get(n)?this.child.getSizeSignalRef(n):void 0,axes:[]}},t.prototype.mergeChildAxis=function(e){var t=this.child;if(t.component.axes[e]){var n=this.component,a=n.layoutHeaders,i=n.resolve;if(i.axis[e]=b.parseGuideResolve(i,e),"shared"===i.axis[e])for(var o="x"===e?"column":"row",r=a[o],l=0,s=t.component.axes[e];l<s.length;l++){var d=s[l],p=d.main,c=g.getHeaderType(p.get("orient"));r[c]=r[c]||[this.makeHeaderComponent(o,!1)],r[c][0].axes.push(p.combine()),delete d.main}else;}},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.child.assembleSelectionTopLevelSignals(e)},t.prototype.assembleSelectionSignals=function(){return this.child.assembleSelectionSignals(),[]},t.prototype.assembleSelectionData=function(e){return this.child.assembleSelectionData(e)},t.prototype.getLayoutBandMixins=function(e){for(var t={},n="header"===e?"headerBand":"footerBand",a=0,i=["row","column"];a<i.length;a++){var o=i[a],r=this.component.layoutHeaders[o],l=r[e];if(l&&l[0]){var s="row"===o?"height":"width";this.child.component.layoutSize.get(s)||(t[n]=t[n]||{},t[n][o]=0.5)}}return t},t.prototype.assembleLayout=function(){var e=this.channelHasField("column")?this.columnDistinctSignal():1;return i({padding:{row:10,column:10}},this.getLayoutBandMixins("header"),this.getLayoutBandMixins("footer"),{offset:10,columns:e,bounds:"full",align:"all"})},t.prototype.assembleLayoutSignals=function(){return this.child.assembleLayoutSignals()},t.prototype.columnDistinctSignal=function(){if(!(this.parent&&this.parent instanceof t)){var e=this.getName("column_domain");return{signal:"length(data('"+e+"'))"}}},t.prototype.assembleGroup=function(n){return this.parent&&this.parent instanceof t?i({},this.channelHasField("column")?{encode:{update:{columns:{field:l.field(this.facet.column,{prefix:"distinct"})}}}}:{},e.prototype.assembleGroup.call(this,n)):e.prototype.assembleGroup.call(this,n)},t.prototype.getCardinalityAggregateForChild=function(){var e=[],n=[];if(this.child instanceof t)this.child.channelHasField("column")&&(e.push(l.field(this.child.facet.column)),n.push("distinct"));else for(var a=0,i=["x","y"];a<i.length;a++){var o=i[a],r=this.child.component.scales[o];if(r&&!r.merged){var p=r.get("type"),u=r.get("range");if(d.hasDiscreteDomain(p)&&c.isVgRangeStep(u)){var f=x.assembleDomain(this.child,o),m=x.getFieldFromDomain(f);m?(e.push(m),n.push("distinct")):s.warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e.length?{fields:e,ops:n}:void 0},t.prototype.assembleMarks=function(){var e=this,t=e.child,n=e.facet,a=this.component.data.facetRoot,r=f.assembleFacetData(a),l=this.channelHasField(o.ROW),s=this.channelHasField(o.COLUMN),d=t.assembleLayoutSize(),p={};l&&s&&(p.aggregate={cross:!0});var c=this.getCardinalityAggregateForChild();c&&(p.aggregate=i({},p.aggregate,c));var u=t.assembleTitle(),m=t.assembleGroupStyle(),g=i({name:this.getName("cell"),type:"group"},u?{title:u}:{},m?{style:m}:{},{from:{facet:i({name:a.name,data:a.data,groupby:[].concat(l?[this.field(o.ROW)]:[],s?[this.field(o.COLUMN)]:[])},p)},sort:{field:[].concat(l?[this.field(o.ROW,{expr:"datum"})]:[],s?[this.field(o.COLUMN,{expr:"datum"})]:[]),order:[].concat(l?[n.row.sort||"ascending"]:[],s?[n.column.sort||"ascending"]:[])}},0<r.length?{data:r}:{},d?{encode:{update:d}}:{},t.assembleGroup());return[g]},t.prototype.getMapping=function(){return this.facet},t}(y.ModelWithField);n.FacetModel=v},{"../channel":479,"../encoding":562,"../fielddef":564,"../log":569,"../scale":572,"../util":582,"../vega.schema":584,"./buildmodel":487,"./data/assemble":492,"./data/parse":504,"./layout/header":510,"./layoutsize/parse":512,"./model":530,"./repeater":532,"./resolve":533,"./scale/domain":536}],509:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../log"),r=e("../spec"),l=e("../util"),s=e("./axis/parse"),d=e("./data/parse"),p=e("./layoutsize/assemble"),c=e("./layoutsize/parse"),u=e("./legend/assemble"),f=e("./model"),m=e("./selection/selection"),g=e("./unit"),_=function(e){function t(n,a,l,s,d,p,c){var u=e.call(this,n,a,l,p,n.resolve)||this;u.type="layer";var f=i({},s,n.width?{width:n.width}:{},n.height?{height:n.height}:{});return u.initSize(f),u.children=n.layer.map(function(e,n){if(r.isLayerSpec(e))return new t(e,u,u.getName("layer_"+n),f,d,p,c);if(r.isUnitSpec(e))return new g.UnitModel(e,u,u.getName("layer_"+n),f,d,p,c);throw new Error(o.message.INVALID_SPEC)}),u}return a(t,e),t.prototype.parseData=function(){this.component.data=d.parseData(this);for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseData()},t.prototype.parseLayoutSize=function(){c.parseLayerLayoutSize(this)},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),l.keys(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})},n=0,a=this.children,i;n<a.length;n++)i=a[n],t(i)},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children,n;e<t.length;e++)n=t[e],n.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){s.parseLayerAxis(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleSelectionSignals())},[])},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},p.assembleLayoutSignals(this))},t.prototype.assembleSelectionData=function(){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},[])},t.prototype.assembleTitle=function(){var t=e.prototype.assembleTitle.call(this);if(t)return t;for(var n=0,a=this.children,i;n<a.length;n++)if(i=a[n],t=i.assembleTitle(),t)return t},t.prototype.assembleLayout=function(){return null},t.prototype.assembleMarks=function(){return m.assembleLayerSelectionMarks(this,l.flatten(this.children.map(function(e){return e.assembleMarks()})))},t.prototype.assembleLegends=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLegends())},u.assembleLegends(this))},t}(f.Model);n.LayerModel=_},{"../log":569,"../spec":575,"../util":582,"./axis/parse":484,"./data/parse":504,"./layoutsize/assemble":511,"./layoutsize/parse":512,"./legend/assemble":513,"./model":530,"./selection/selection":543,"./unit":554}],510:[function(e,t,n){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../fielddef"),o=e("../../util"),r=e("../common");n.HEADER_CHANNELS=["row","column"],n.HEADER_TYPES=["header","footer"],n.getHeaderType=function(e){return"top"===e||"left"===e?"header":"footer"},n.getTitleGroup=function(e,t){var n=e.component.layoutHeaders[t].title,i="row"===t?"vertical":void 0,r=a({align:{value:"center"},text:{value:n}},"vertical"===i?{angle:{value:270}}:{});return{name:e.getName(t+"_title"),role:t+"-title",type:"group",marks:[a({type:"text",role:t+"-title-text",style:"guide-title"},0<o.keys(r).length?{encode:{update:r}}:{})]}},n.getHeaderGroup=function(e,t,n,l,s){if(s){var d=null;if(l.facetFieldDef&&s.labels){var p=l.facetFieldDef,c=p.header,u=void 0===c?{}:c,f=u.format,m=u.labelAngle,g=a({},m?{angle:{value:m}}:{});d=a({text:r.formatSignalRef(p,f,"parent",e.config),offset:10,orient:"row"===t?"left":"top",style:"guide-label"},0<o.keys(g).length?{encode:{update:g}}:{})}var _=s.axes,y=_&&0<_.length;if(d||y){var h="row"===t?"height":"width";return a({name:e.getName(t+"_"+n),type:"group",role:t+"-"+n},l.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:{field:i.field(l.facetFieldDef,{expr:"datum"}),order:l.facetFieldDef.header&&l.facetFieldDef.sort||"ascending"}}:{},d?{title:d}:{},s.sizeSignal?{encode:{update:(b={},b[h]=s.sizeSignal,b)}}:{},y?{axes:_}:{})}}return null;var b}},{"../../fielddef":564,"../../util":582,"../common":488}],511:[function(e,t,n){"use strict";function a(e,t){var n="width"===t?"x":"y",a=e.component.layoutSize.get(t);if(!a||"merged"===a)return[];var d=e.getSizeSignalRef(t).signal;if("range-step"===a){var p=e.getScaleComponent(n);if(p){var c=p.get("type"),u=p.get("range");if(r.hasDiscreteDomain(c)&&l.isVgRangeStep(u)){var f=e.scaleName(n);if(s.isFacetModel(e.parent)){var m=e.parent.component.resolve;if("independent"===m.scale[n])return[i(f,u)]}return[i(f,u),{name:d,update:o(f,p,"domain('"+f+"').length")}]}}throw new Error("layout size is range step although there is no rangeStep.")}else return[{name:d,value:a}]}function i(e,t){return{name:e+"_step",value:t.step}}function o(e,t,n){var a=t.get("type"),i=t.get("padding"),o=t.get("paddingOuter");o=void 0===o?i:o;var r=t.get("paddingInner");return r="band"===a?void 0===r?i:r:1,"bandspace("+n+", "+r+", "+o+") * "+e+"_step"}Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../scale"),l=e("../../vega.schema"),s=e("../model");n.assembleLayoutSignals=function(e){return[].concat(a(e,"width"),a(e,"height"))},n.sizeSignals=a,n.sizeExpr=o},{"../../scale":572,"../../vega.schema":584,"../model":530}],512:[function(e,t,n){"use strict";function a(e){i(e);var t=e.component.layoutSize;t.setWithExplicit("width",o(e,"width")),t.setWithExplicit("height",o(e,"height"))}function i(e){for(var t=0,n=e.children,a;t<n.length;t++)a=n[t],a.parseLayoutSize()}function o(e,t){for(var n="width"===t?"x":"y",a=e.component.resolve,i=0,o=e.children,r;i<o.length;i++){var l=o[i],s=l.component.layoutSize.getWithExplicit(t),p=a.scale[n];if("independent"===p&&"range-step"===s.value){r=void 0;break}if(r){if("independent"===p&&r.value!==s.value){r=void 0;break}r=d.mergeValuesWithExplicit(r,s,t,"")}else r=s}if(r){for(var c=0,u=e.children,l;c<u.length;c++)l=u[c],e.renameLayoutSize(l.getName(t),e.getName(t)),l.component.layoutSize.set(t,"merged",!1);return r}return{explicit:!1,value:void 0}}function r(e,t){var n="width"===t?"x":"y",a=e.config,i=e.getScaleComponent(n);if(i){var o=i.get("type"),r=i.get("range");return l.hasDiscreteDomain(o)&&s.isVgRangeStep(r)?"range-step":a.view[t]}return"width"===t&&"text"===e.mark()?a.scale.textXRangeStep:a.scale.rangeStep||l.defaultScaleConfig.rangeStep}Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../scale"),s=e("../../vega.schema"),d=e("../split");n.parseLayerLayoutSize=a,n.parseRepeatLayoutSize=a,n.parseConcatLayoutSize=function(e){i(e);var t=e.component.layoutSize,n=e.isVConcat?"width":"height";t.setWithExplicit(n,o(e,n))},n.parseChildrenLayoutSize=i,n.parseUnitLayoutSize=function(e){var t=e.component.layoutSize;if(!t.explicit.width){var n=r(e,"width");t.set("width",n,!1)}if(!t.explicit.height){var a=r(e,"height");t.set("height",a,!1)}}},{"../../scale":572,"../../vega.schema":584,"../split":553}],513:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("json-stable-stringify"),i=e("../../util"),o=e("./parse");n.assembleLegends=function(e){for(var t=e.component.legends,n={},r=0,l=i.keys(t);r<l.length;r++){var s=l[r],d=e.getScaleComponent(s),p=a(d.domains);if(n[p])for(var c=0,u=n[p];c<u.length;c++){var f=u[c],m=o.mergeLegendComponent(f,t[s]);m||n[p].push(t[s])}else n[p]=[t[s].clone()]}return i.flatten(i.vals(n)).map(function(e){return e.combine()})}},{"../../util":582,"./parse":516,"json-stable-stringify":147}],514:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../split"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(i.Split);n.LegendComponent=o},{"../split":553}],515:[function(e,t,n){"use strict";function a(e,t,n,a,i){if("gradient"!==i){var o={},s=n.mark();switch(s){case c.BAR:case c.TICK:case c.TEXT:o.shape={value:"square"};break;case c.CIRCLE:case c.SQUARE:o.shape={value:s};break;case c.POINT:case c.LINE:case c.AREA:}var u=n.markDef.filled,_=a===d.COLOR?f.without(c.FILL_STROKE_CONFIG,[u?"fill":"stroke","strokeDash","strokeDashOffset"]):c.FILL_STROKE_CONFIG;if(_=f.without(_,["strokeDash","strokeDashOffset"]),m.applyMarkConfig(o,n,_),a!==d.COLOR){var y=g.color(n);y.fill&&(y.fill.field||"transparent"===y.fill.value)&&delete y.fill,y.stroke&&(y.stroke.field||"transparent"===y.stroke.value)&&delete y.stroke,o=l({},o,y)}if(a!==d.SHAPE){var h=n.encoding.shape;p.isValueDef(h)&&(o.shape={value:h.value})}if(a!==d.OPACITY){var b=r(n.encoding.opacity)||n.markDef.opacity;b&&(o.opacity={value:b})}return o=l({},o,t),0<f.keys(o).length?o:void 0}}function i(e,t,n,a,i){var o={};if("gradient"===i){var s=r(n.encoding.opacity)||n.markDef.opacity;s&&(o.opacity={value:s})}return o=l({},o,t),0<f.keys(o).length?o:void 0}function o(e,t,n,a){var i=n.legend(a),o=n.config,r={};if(p.isTimeFieldDef(e)){var s=n.getScaleComponent(a).get("type")===u.ScaleType.UTC;t=l({text:{signal:m.timeFormatExpression("datum.value",e.timeUnit,i.format,o.legend.shortTimeLabels,o.timeFormat,s)}},t)}return r=l({},r,t),0<f.keys(r).length?r:void 0}function r(e){if(p.isValueDef(e)){if(p.hasConditionalValueDef(e)){var t=s.isArray(e.condition)?e.condition.map(function(e){return e.value}):[e.condition.value];return N.apply(null,[e.value].concat(t))}return e.value}}var l=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("vega-util"),d=e("../../channel"),p=e("../../fielddef"),c=e("../../mark"),u=e("../../scale"),f=e("../../util"),m=e("../common"),g=e("../mark/mixins");n.symbols=a,n.gradient=i,n.labels=o},{"../../channel":479,"../../fielddef":564,"../../mark":571,"../../scale":572,"../../util":582,"../common":488,"../mark/mixins":523,"vega-util":591}],516:[function(e,t,n){"use strict";function a(e){e.component.legends=g.isUnitModel(e)?i(e):s(e)}function i(e){return[p.COLOR,p.SIZE,p.SHAPE,p.OPACITY].reduce(function(t,n){return e.legend(n)&&(t[n]=r(e,n)),t},{})}function o(e,t){switch(t){case p.COLOR:var n=e.scaleName(p.COLOR);return e.markDef.filled?{fill:n}:{stroke:n};case p.SIZE:return{size:e.scaleName(p.SIZE)};case p.SHAPE:return{shape:e.scaleName(p.SHAPE)};case p.OPACITY:return{opacity:e.scaleName(p.OPACITY)};}return null}function r(t,n){var a=t.fieldDef(n),e=t.legend(n),i=new b.LegendComponent({},o(t,n));u.LEGEND_PROPERTIES.forEach(function(a){var o=l(a,e,n,t);if(void 0!==o){var r="values"===a?!!e.values:o===e[a];(r||void 0===t.config.legend[a])&&i.set(a,o,r)}});var r=e.encoding||{},s=["labels","legend","title","symbols","gradient"].reduce(function(o,e){var l=x[e]?x[e](a,r[e],t,n,i.get("type")):r[e];return void 0!==l&&0<f.keys(l).length&&(o[e]={update:l}),o},{});return 0<f.keys(s).length&&i.set("encode",s,!!e.encoding),i}function l(e,t,n,a){var i=a.fieldDef(n);return"format"===e?m.numberFormat(i,t.format,a.config):"title"===e?m.getSpecifiedOrDefaultValue(t.title,c.title(i,a.config)):"values"===e?v.values(t):"type"===e?m.getSpecifiedOrDefaultValue(t.type,v.type(i.type,n,a.getScaleComponent(n).get("type"))):t[e]}function s(e){for(var t=e.component,n=t.legends,i=t.resolve,o=function(t){a(t),f.keys(t.component.legends).forEach(function(a){i.legend[a]=_.parseGuideResolve(e.component.resolve,a),"shared"===i.legend[a]&&(n[a]=d(n[a],t.component.legends[a]),!n[a]&&(i.legend[a]="independent",delete n[a]))})},r=0,l=e.children,s;r<l.length;r++)s=l[r],o(s);return f.keys(n).forEach(function(t){for(var n=0,a=e.children,o;n<a.length;n++)(o=a[n],!!o.component.legends[t])&&"shared"===i.legend[t]&&delete o.component.legends[t]}),n}function d(e,t){if(!e)return t.clone();var n=e.getWithExplicit("orient"),a=t.getWithExplicit("orient");if(!(n.explicit&&a.explicit&&n.value!==a.value)){for(var i=!1,o=function(n){var a=h.mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",function(e,t){return"title"===n?m.titleMerger(e,t):"type"===n?(i=!0,y.makeImplicit("symbol")):h.defaultTieBreaker(e,t,n,"legend")});e.setWithExplicit(n,a)},r=0,l=u.VG_LEGEND_PROPERTIES,s;r<l.length;r++)s=l[r],o(s);return i&&(((e.implicit||{}).encode||{}).gradient&&f.deleteNestedProperty(e.implicit,["encode","gradient"]),((e.explicit||{}).encode||{}).gradient&&f.deleteNestedProperty(e.explicit,["encode","gradient"])),e}}Object.defineProperty(n,"__esModule",{value:!0});var p=e("../../channel"),c=e("../../fielddef"),u=e("../../legend"),f=e("../../util"),m=e("../common"),g=e("../model"),_=e("../resolve"),y=e("../split"),h=e("../split"),b=e("./component"),x=e("./encode"),v=e("./properties");n.parseLegend=a,n.parseLegendForChannel=r,n.mergeLegendComponent=d},{"../../channel":479,"../../fielddef":564,"../../legend":568,"../../util":582,"../common":488,"../model":530,"../resolve":533,"../split":553,"./component":514,"./encode":515,"./properties":517}],517:[function(e,t,n){"use strict";function a(e,t,n){return t===i.COLOR&&("quantitative"===e&&!r.isBinScale(n)||"temporal"===e&&l.contains(["time","utc"],n))?"gradient":void 0}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../channel"),o=e("../../datetime"),r=e("../../scale"),l=e("../../util");n.values=function(e){var t=e.values;return t&&o.isDateTime(t[0])?t.map(function(e){return{signal:o.dateTimeExpr(e,!0)}}):t},n.type=a},{"../../channel":479,"../../datetime":561,"../../scale":572,"../../util":582}],518:[function(e,t,n){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./mixins");n.area={vgMark:"area",encodeEntry:function(e){return a({},i.markDefProperties(e.markDef),i.pointPosition("x",e,"zeroOrMin"),i.pointPosition("y",e,"zeroOrMin"),i.pointPosition2(e,"zeroOrMin"),i.color(e),i.text(e,"tooltip"),i.nonPosition("opacity",e))}}},{"./mixins":523}],519:[function(e,t,n){"use strict";function a(e){var t=e.config,n=e.width,a=e.markDef.orient,i=e.encoding.size,l=e.encoding.x,p=e.scaleName(s.X),u=e.getScaleComponent(s.X);if("horizontal"===a)return r({},f.pointPosition("x",e,"zeroOrMin"),f.pointPosition2(e,"zeroOrMin"));if(d.isFieldDef(l)){var g=u.get("type");if(l.bin&&!i&&!c.hasDiscreteDomain(g))return f.binnedPosition(l,"x",e.scaleName("x"),t.bar.binSpacing,u.get("reverse"));if(g===c.ScaleType.BAND)return f.bandPosition(l,"x",e)}return f.centeredBandPosition("x",e,r({},m.mid(n)),o(p,u,t))}function i(e){var t=e.config,n=e.encoding,a=e.height,i=e.markDef.orient,l=n.size,p=n.y,u=e.scaleName(s.Y),g=e.getScaleComponent(s.Y);if("vertical"===i)return r({},f.pointPosition("y",e,"zeroOrMin"),f.pointPosition2(e,"zeroOrMin"));if(d.isFieldDef(p)){var _=g.get("type");if(p.bin&&!l&&!c.hasDiscreteDomain(_))return f.binnedPosition(p,"y",e.scaleName("y"),t.bar.binSpacing,g.get("reverse"));if(_===c.ScaleType.BAND)return f.bandPosition(p,"y",e)}return f.centeredBandPosition("y",e,m.mid(a),o(u,g,t))}function o(e,t,n){if(n.bar.discreteBandSize)return{value:n.bar.discreteBandSize};if(t){var a=t.get("type");if(a===c.ScaleType.POINT){var i=t.get("range");if(u.isVgRangeStep(i)&&l.isNumber(i.step))return{value:i.step-1};p.warn(p.message.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}else return a===c.ScaleType.BAND?m.band(e):{value:n.bar.continuousBandSize}}return n.scale.rangeStep&&null!==n.scale.rangeStep?{value:n.scale.rangeStep-1}:{value:20}}var r=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var l=e("vega-util"),s=e("../../channel"),d=e("../../fielddef"),p=e("../../log"),c=e("../../scale"),u=e("../../vega.schema"),f=e("./mixins"),m=e("./valueref");n.bar={vgMark:"rect",encodeEntry:function(e){var t=e.stack;return r({},f.markDefProperties(e.markDef,!0),a(e,t),i(e,t),f.color(e),f.text(e,"tooltip"),f.nonPosition("opacity",e))}}},{"../../channel":479,"../../fielddef":564,"../../log":569,"../../scale":572,"../../vega.schema":584,"./mixins":523,"./valueref":529,"vega-util":591}],520:[function(e,t,n){"use strict";function a(e,t){return u.contains([p.POINT,p.TICK,p.CIRCLE,p.SQUARE],e)&&!l.isAggregate(t)?0.7:void 0}function i(e,t){var n=f.getMarkConfig("filled",e,t),a=e.type;return n===void 0?a!==p.POINT&&a!==p.LINE&&a!==p.RULE:n}function o(e,t,n){switch(e){case p.POINT:case p.CIRCLE:case p.SQUARE:case p.TEXT:case p.RECT:return;}var a=t.y2,i=t.x2;switch(e){case p.RULE:case p.BAR:case p.AREA:if(a)return"vertical";if(i)return"horizontal";if(e===p.RULE){if(t.x&&!t.y)return"vertical";if(t.y&&!t.x)return"horizontal"}case p.LINE:case p.TICK:var o=s.isFieldDef(t.x)&&s.isContinuous(t.x),r=s.isFieldDef(t.y)&&s.isContinuous(t.y);if(o&&!r)return"tick"===e?"vertical":"horizontal";if(!o&&r)return"tick"===e?"horizontal":"vertical";if(o&&r){var l=t.x,u=t.y,f=l.type===c.TEMPORAL,m=u.type===c.TEMPORAL;return f&&!m?"tick"===e?"horizontal":"vertical":!f&&m?"tick"===e?"vertical":"horizontal":!l.aggregate&&u.aggregate?"tick"===e?"horizontal":"vertical":l.aggregate&&!u.aggregate?"tick"===e?"vertical":"horizontal":n?n:(e===p.LINE&&t.order||d.warn(d.message.unclearOrientContinuous(e)),"vertical")}return void d.warn(d.message.unclearOrientDiscreteOrEmpty(e));}return"vertical"}var r=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../encoding"),s=e("../../fielddef"),d=e("../../log"),p=e("../../mark"),c=e("../../type"),u=e("../../util"),f=e("../common");n.normalizeMarkDef=function(e,t,n){var l=p.isMarkDef(e)?r({},e):{type:e},s=l.orient||f.getMarkConfig("orient",l,n);l.orient=o(l.type,t,s),void 0!==s&&s!==l.orient&&d.warn(d.message.orientOverridden(l.orient,s));var c=l.opacity||f.getMarkConfig("opacity",l,n);void 0===c&&(l.opacity=a(l.type,t));var u=l.filled;return void 0===u&&(l.filled=i(l,n)),l}},{"../../encoding":562,"../../fielddef":564,"../../log":569,"../../mark":571,"../../type":581,"../../util":582,"../common":488}],521:[function(e,t,n){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./mixins"),o=e("./valueref");n.line={vgMark:"line",encodeEntry:function(e){var t=e.width,n=e.height;return a({},i.markDefProperties(e.markDef,!0),i.pointPosition("x",e,o.mid(t)),i.pointPosition("y",e,o.mid(n)),i.color(e),i.text(e,"tooltip"),i.nonPosition("opacity",e),i.nonPosition("size",e,{vgChannel:"strokeWidth"}))}}},{"./mixins":523,"./valueref":529}],522:[function(e,t,n){"use strict";function a(e){var t=e.mark(),n=r(e.encoding),a=e.markDef.clip===void 0?l(e):!!e.markDef.clip,o=_.getStyles(e.markDef),d=i(e),c=[s({name:e.getName("marks"),type:E[t].vgMark},a?{clip:!0}:{},o?{style:o}:{},d?{sort:d}:{},{from:{data:(0<n.length?N:"")+e.requestDataName(p.MAIN)},encode:{update:E[t].encodeEntry(e)}})];return 0<n.length?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:N+e.requestDataName(p.MAIN),data:e.requestDataName(p.MAIN),groupby:n}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:c}]:c}function i(e){if("line"===e.mark()&&e.channelHasField("order"))return _.sortParams(e.encoding.order,{expr:"datum"});var t="horizontal"===e.markDef.orient?"y":"x",n=e.sort(t),a=m.isSortField(n)?u.field({aggregate:c.isAggregate(e.encoding)?n.op:void 0,field:n.field},{expr:"datum"}):e.field(t,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"});return a?{field:a,order:"descending"}:void 0}function o(e){var t=e.mark(),n=_.getStyles(e.markDef),a=void 0===e.markDef.clip?l(e):!!e.markDef.clip,i=[];return i.push(s({name:e.getName("marks"),type:E[t].vgMark},a?{clip:!0}:{},n?{style:n}:{},{from:{data:e.requestDataName(p.MAIN)},encode:{update:E[t].encodeEntry(e)}})),i}function r(e){return g.keys(e).reduce(function(t,n){switch(n){case"x":case"y":case"order":case"tooltip":case"x2":case"y2":case"text":case"shape":return t;case"detail":var a=e[n];return a&&(d.isArray(a)?a:[a]).forEach(function(e){e.aggregate||t.push(u.field(e,{}))}),t;case"color":case"size":case"opacity":var i=u.getFieldDef(e[n]);return i&&!i.aggregate&&t.push(u.field(i,{})),t;default:throw new Error("Bug: Channel "+n+" unimplemented for line mark");}},[])}function l(e){var t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t&&t.get("domainRaw")||n&&n.get("domainRaw")}var s=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var d=e("vega-util"),p=e("../../data"),c=e("../../encoding"),u=e("../../fielddef"),f=e("../../mark"),m=e("../../sort"),g=e("../../util"),_=e("../common"),y=e("./area"),h=e("./bar"),b=e("./line"),x=e("./point"),v=e("./rect"),S=e("./rule"),T=e("./text"),k=e("./tick"),E={area:y.area,bar:h.bar,line:b.line,point:x.point,text:T.text,tick:k.tick,rect:v.rect,rule:S.rule,circle:x.circle,square:x.square};n.parseMarkGroup=function(e){return g.contains([f.LINE,f.AREA],e.mark())?a(e):o(e)};var N="faceted_path_";n.getPathSort=i,n.pathGroupingFields=r},{"../../data":560,"../../encoding":562,"../../fielddef":564,"../../mark":571,"../../sort":574,"../../util":582,"../common":488,"./area":518,"./bar":519,"./line":521,"./point":524,"./rect":525,"./rule":526,"./text":527,"./tick":528,"vega-util":591}],523:[function(e,t,n){"use strict";function a(e,t,n){void 0===n&&(n={});var a=n.defaultValue,o=n.vgChannel,r=n.defaultRef||(a===void 0?void 0:{value:a}),l=t.encoding[e];return i(t,l,o||e,function(n){return m.midPoint(e,n,t.scaleName(e),t.getScaleComponent(e),null,r)})}function i(e,t,n,a){var i=t&&t.condition,o=a(t);if(i){var s=l.isArray(i)?i:[i],d=s.map(function(t){var n=a(t);return r({test:f.predicate(e,t.selection)},n)});return p={},p[n]=d.concat(o===void 0?[]:[o]),p}return void 0===o?{}:(c={},c[n]=o,c);var p,c}function o(e,t,n,a){var i=t.encoding,o=t.stack,r=m.stackable(e,i[e],t.scaleName(e),t.getScaleComponent(e),o,n);return l={},l[a||e]=r,l;var l}var r=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var l=e("vega-util"),s=e("../../fielddef"),d=e("../../log"),p=e("../../util"),c=e("../../vega.schema"),u=e("../common"),f=e("../selection/selection"),m=e("./valueref");n.color=function(t){var n=t.config,i=t.markDef.filled,o=i?"fill":"stroke",r=a("color",t,{vgChannel:o,defaultValue:t.markDef[o]||t.markDef.color||u.getMarkConfig(o,t.markDef,n)||u.getMarkConfig("color",t.markDef,n)});return!r.fill&&p.contains(["bar","point","circle","square"],t.mark())&&(r.fill={value:"transparent"}),r},n.markDefProperties=function(e,t){return c.VG_MARK_CONFIGS.reduce(function(n,a){return e[a]&&(!t||"orient"!==a)&&(n[a]={value:e[a]}),n},{})},n.valueIfDefined=function(e,t){return void 0===t?void 0:(n={},n[e]={value:t},n);var n},n.nonPosition=a,n.text=function(e,t){void 0===t&&(t="text");var n=e.encoding[t];return i(e,n,t,function(t){return m.text(t,e.config)})},n.bandPosition=function(e,t,n){var i=n.scaleName(t),o="x"===t?"width":"height";if(n.encoding.size){var l=n.markDef.orient;if(l){var p=(c={},c[t+"c"]=m.fieldRef(e,i,{},{band:0.5}),c);if(s.getFieldDef(n.encoding.size))d.warn(d.message.cannotUseSizeFieldWithBandSize(t));else if(s.isValueDef(n.encoding.size))return r({},p,a("size",n,{vgChannel:o}))}else d.warn(d.message.cannotApplySizeToNonOrientedMark(n.markDef.type))}return u={},u[t]=m.fieldRef(e,i,{binSuffix:"range"}),u[o]=m.band(i),u;var c,u},n.centeredBandPosition=function(e,t,n,i){var l="x"===e?"xc":"yc",s="x"===e?"width":"height";return r({},o(e,t,n,l),a("size",t,{defaultRef:i,vgChannel:s}))},n.binnedPosition=function(e,t,n,a,i){return"x"===t?{x2:m.bin(e,n,"start",i?0:a),x:m.bin(e,n,"end",i?a:0)}:{y2:m.bin(e,n,"start",i?a:0),y:m.bin(e,n,"end",i?0:a)}},n.pointPosition=o,n.pointPosition2=function(e,t,n){var a=e.encoding,i=e.markDef,o=e.stack;n=n||("horizontal"===i.orient?"x2":"y2");var r="x2"===n?"x":"y",l=m.stackable2(n,a[r],a[n],e.scaleName(r),e.getScaleComponent(r),o,t);return s={},s[n]=l,s;var s}},{"../../fielddef":564,"../../log":569,"../../util":582,"../../vega.schema":584,"../common":488,"../selection/selection":543,"./valueref":529,"vega-util":591}],524:[function(e,t,n){"use strict";function a(e,t){var n=e.config,a=e.width,r=e.height;return o({},l.markDefProperties(e.markDef,!0),l.pointPosition("x",e,s.mid(a)),l.pointPosition("y",e,s.mid(r)),l.color(e),l.text(e,"tooltip"),l.nonPosition("size",e),i(e,n,t),l.nonPosition("opacity",e))}function i(e,t,n){return n?{shape:{value:n}}:l.nonPosition("shape",e,{defaultValue:r.getMarkConfig("shape",e.markDef,t)})}var o=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../common"),l=e("./mixins"),s=e("./valueref");n.shapeMixins=i,n.point={vgMark:"symbol",encodeEntry:function(e){return a(e)}},n.circle={vgMark:"symbol",encodeEntry:function(e){return a(e,"circle")}},n.square={vgMark:"symbol",encodeEntry:function(e){return a(e,"square")}}},{"../common":488,"./mixins":523,"./valueref":529}],525:[function(e,t,n){"use strict";function a(e){var t=e.encoding.x,n=e.encoding.x2,a=e.getScaleComponent(r.X),i=a?a.get("type"):void 0;if(l.isFieldDef(t)&&t.bin&&!n)return c.binnedPosition(t,"x",e.scaleName("x"),0,a.get("reverse"));if(l.isFieldDef(t)&&a&&p.hasDiscreteDomain(i)){if(i===p.ScaleType.BAND)return c.bandPosition(t,"x",e);throw new Error(s.message.scaleTypeNotWorkWithMark(d.RECT,i))}else return o({},c.pointPosition("x",e,"zeroOrMax"),c.pointPosition2(e,"zeroOrMin","x2"))}function i(e){var t=e.encoding.y,n=e.encoding.y2,a=e.getScaleComponent(r.Y),i=a?a.get("type"):void 0;if(l.isFieldDef(t)&&t.bin&&!n)return c.binnedPosition(t,"y",e.scaleName("y"),0,a.get("reverse"));if(l.isFieldDef(t)&&a&&p.hasDiscreteDomain(i)){if(i===p.ScaleType.BAND)return c.bandPosition(t,"y",e);throw new Error(s.message.scaleTypeNotWorkWithMark(d.RECT,i))}else return o({},c.pointPosition("y",e,"zeroOrMax"),c.pointPosition2(e,"zeroOrMin","y2"))}var o=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../channel"),l=e("../../fielddef"),s=e("../../log"),d=e("../../mark"),p=e("../../scale"),c=e("./mixins");n.rect={vgMark:"rect",encodeEntry:function(e){return o({},c.markDefProperties(e.markDef,!0),a(e),i(e),c.color(e),c.text(e,"tooltip"),c.nonPosition("opacity",e))}}},{"../../channel":479,"../../fielddef":564,"../../log":569,"../../mark":571,"../../scale":572,"./mixins":523}],526:[function(e,t,n){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./mixins"),o=e("./valueref");n.rule={vgMark:"rule",encodeEntry:function(e){var t=e.config,n=e.markDef,r=e.width,l=e.height,s=n.orient;return e.encoding.x||e.encoding.y?a({},i.markDefProperties(e.markDef,!0),i.pointPosition("x",e,"horizontal"===s?"zeroOrMin":o.mid(r)),i.pointPosition("y",e,"vertical"===s?"zeroOrMin":o.mid(l)),i.pointPosition2(e,"zeroOrMax"),i.color(e),i.text(e,"tooltip"),i.nonPosition("opacity",e),i.nonPosition("size",e,{vgChannel:"strokeWidth"})):{}}}},{"./mixins":523,"./valueref":529}],527:[function(e,t,n){"use strict";function a(e,t){return s.isFieldDef(t)&&t.type===d.QUANTITATIVE?{field:{group:"width"},offset:-5}:{value:e.scale.textXRangeStep/2}}function i(e,t,n){var a=e.align||p.getMarkConfig("align",e,n);return void 0===a?l.channelHasField(t,r.X)?"center":"right":void 0}var o=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../channel"),l=e("../../encoding"),s=e("../../fielddef"),d=e("../../type"),p=e("../common"),c=e("./mixins"),u=e("./valueref");n.text={vgMark:"text",encodeEntry:function(e){var t=e.config,n=e.encoding,r=e.height,l=n.text;return o({},c.markDefProperties(e.markDef,!0),c.pointPosition("x",e,a(t,l)),c.pointPosition("y",e,u.mid(r)),c.text(e),c.color(e),c.text(e,"tooltip"),c.nonPosition("opacity",e),c.nonPosition("size",e,{vgChannel:"fontSize"}),c.valueIfDefined("align",i(e.markDef,n,t)))}}},{"../../channel":479,"../../encoding":562,"../../fielddef":564,"../../type":581,"../common":488,"./mixins":523,"./valueref":529}],528:[function(e,t,n){"use strict";function a(e){var t=e.config,n=e.markDef.orient,a=e.getScaleComponent("horizontal"===n?"x":"y");if(t.tick.bandSize!==void 0)return t.tick.bandSize;var i=a?a.get("range"):void 0,r=i&&o.isVgRangeStep(i)?i.step:t.scale.rangeStep;if("number"!=typeof r)throw new Error("Function does not handle non-numeric rangeStep");return r/1.5}var i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../vega.schema"),r=e("./mixins"),l=e("./valueref");n.tick={vgMark:"rect",encodeEntry:function(e){var t=e.config,n=e.markDef,o=e.width,s=e.height,d=n.orient,p="horizontal"===d?"width":"height",c="horizontal"===d?"height":"width";return i({},r.markDefProperties(e.markDef,!0),r.pointPosition("x",e,l.mid(o),"xc"),r.pointPosition("y",e,l.mid(s),"yc"),r.nonPosition("size",e,{defaultValue:a(e),vgChannel:p}),(u={},u[c]={value:t.tick.thickness},u),r.color(e),r.nonPosition("opacity",e));var u}}},{"../../vega.schema":584,"./mixins":523,"./valueref":529}],529:[function(e,t,n){"use strict";function a(e,t,n,a){var i={scale:t,field:f.field(e,n)};return a?c({},i,a):i}function i(e,t){return void 0===t&&(t=!0),{scale:e,band:t}}function o(e,t){return{signal:"(scale(\""+t+"\", "+f.field(e,{expr:"datum"})+") + "+("scale(\""+t+"\", "+f.field(e,{binSuffix:"end",expr:"datum"})+"))/2")}}function r(e,t,n,i,r,c){if(t){if(f.isFieldDef(t)){if(t.bin)return g.contains(["x","y"],e)&&"quantitative"===t.type?r&&r.impute?a(t,n,{binSuffix:"mid"}):o(t,n):a(t,n,_.binRequiresRange(t,e)?{binSuffix:"range"}:{});var y=i.get("type");return m.hasDiscreteDomain(y)?"band"===y?a(t,n,{binSuffix:"range"},{band:0.5}):a(t,n,{binSuffix:"range"}):a(t,n,{})}return f.isValueDef(t)?{value:t.value}:void 0}if("zeroOrMin"===c){if(e===u.X||e===u.X2)return l(n,i);if(e===u.Y||e===u.Y2)return d(n,i);throw new Error("Unsupported channel "+e+" for base function")}else if("zeroOrMax"===c){if(e===u.X||e===u.X2)return s(n,i);if(e===u.Y||e===u.Y2)return p(n,i);throw new Error("Unsupported channel "+e+" for base function")}return c}function l(e,t){return e&&!g.contains([m.ScaleType.LOG,m.ScaleType.TIME,m.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{value:0}}function s(e,t){return e&&!g.contains([m.ScaleType.LOG,m.ScaleType.TIME,m.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{field:{group:"width"}}}function d(e,t){return e&&!g.contains([m.ScaleType.LOG,m.ScaleType.TIME,m.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{field:{group:"height"}}}function p(e,t){return e&&!g.contains([m.ScaleType.LOG,m.ScaleType.TIME,m.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero")?{scale:e,value:0}:{value:0}}var c=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var u=e("../../channel"),f=e("../../fielddef"),m=e("../../scale"),g=e("../../util"),_=e("../common");n.stackable=function(e,t,n,i,o,l){return f.isFieldDef(t)&&o&&e===o.fieldChannel?a(t,n,{suffix:"end"}):r(e,t,n,i,o,l)},n.stackable2=function(e,t,n,i,o,l,s){return f.isFieldDef(t)&&l&&e.charAt(0)===l.fieldChannel.charAt(0)?a(t,i,{suffix:"start"}):r(e,n,i,o,l,s)},n.bin=function(e,t,n,i){var o="start"===n?void 0:"end";return a(e,t,{binSuffix:o},i?{offset:i}:{})},n.fieldRef=a,n.band=i,n.midPoint=r,n.text=function(e,t){if(e){if(f.isFieldDef(e))return _.formatSignalRef(e,e.format,"datum",t);if(f.isValueDef(e))return{value:e.value}}},n.mid=function(e){return c({},e,{mult:0.5})}},{"../../channel":479,"../../fielddef":564,"../../scale":572,"../../util":582,"../common":488}],530:[function(e,t,n){"use strict";function a(e){return e&&"unit"===e.type}function i(e){return e&&"facet"===e.type}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),r=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var l=e("vega-util"),s=e("../channel"),d=e("../encoding"),p=e("../fielddef"),c=e("../log"),u=e("../scale"),f=e("../title"),m=e("../transform"),g=e("../util"),_=e("../vega.schema"),y=e("./axis/assemble"),h=e("./layout/header"),b=e("./layoutsize/assemble"),x=e("./legend/assemble"),v=e("./legend/parse"),S=e("./scale/assemble"),T=e("./scale/domain"),k=e("./scale/parse"),E=e("./split"),N=function(){function e(){this.nameMap={}}return e.prototype.rename=function(e,t){this.nameMap[e]=t},e.prototype.has=function(e){return void 0!==this.nameMap[e]},e.prototype.get=function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e},e}();n.NameMap=N,n.isUnitModel=a,n.isFacetModel=i,n.isRepeatModel=function(e){return e&&"repeat"===e.type},n.isConcatModel=function(e){return e&&"concat"===e.type},n.isLayerModel=function(e){return e&&"layer"===e.type};var A=function(){function e(e,t,n,a,i){var o=this;this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=o.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=o.lookupDataSource(e.from.facet.data)),e},this.parent=t,this.config=a,this.name=e.name||n,this.title=l.isString(e.title)?{text:e.title}:e.title,this.scaleNameMap=t?t.scaleNameMap:new N,this.layoutSizeNameMap=t?t.layoutSizeNameMap:new N,this.data=e.data,this.description=e.description,this.transforms=m.normalizeTransform(e.transform||[]),this.component={data:{sources:t?t.component.data.sources:{},outputNodes:t?t.component.data.outputNodes:{},outputNodeRefCounts:t?t.component.data.outputNodeRefCounts:{},ancestorParse:t?r({},t.component.data.ancestorParse):{}},layoutSize:new E.Split,layoutHeaders:{row:{},column:{}},mark:null,resolve:r({scale:{},axis:{},legend:{}},i||{}),selection:null,scales:null,axes:{},legends:{}}}return Object.defineProperty(e.prototype,"width",{get:function(){return this.getSizeSignalRef("width")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getSizeSignalRef("height")},enumerable:!0,configurable:!0}),e.prototype.initSize=function(e){var t=e.width,n=e.height;t&&this.component.layoutSize.set("width",t,!0),n&&this.component.layoutSize.set("height",n,!0)},e.prototype.parse=function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSize(),this.parseSelection(),this.parseData(),this.parseAxisAndHeader(),this.parseLegend(),this.parseMarkGroup()},e.prototype.parseScale=function(){k.parseScale(this)},e.prototype.renameTopLevelLayoutSize=function(){"width"!==this.getName("width")&&this.renameLayoutSize(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameLayoutSize(this.getName("height"),"height")},e.prototype.parseLegend=function(){v.parseLegend(this)},e.prototype.assembleGroupStyle=function(){return"unit"===this.type||"layer"===this.type?"cell":void 0},e.prototype.assembleLayoutSize=function(){return"unit"===this.type||"layer"===this.type?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}:void 0},e.prototype.assembleHeaderMarks=function(){for(var e=this.component.layoutHeaders,t=[],n=0,a=h.HEADER_CHANNELS,i;n<a.length;n++)i=a[n],e[i].title&&t.push(h.getTitleGroup(this,i));for(var o=0,r=h.HEADER_CHANNELS;o<r.length;o++)for(var i=r[o],l=e[i],s=0,d=h.HEADER_TYPES,p;s<d.length;s++)if(p=d[s],l[p])for(var c=0,u=l[p];c<u.length;c++){var f=u[c],m=h.getHeaderGroup(this,i,p,l,f);m&&t.push(m)}return t},e.prototype.assembleAxes=function(){return y.assembleAxes(this.component.axes)},e.prototype.assembleLegends=function(){return x.assembleLegends(this)},e.prototype.assembleTitle=function(){var e=r({},f.extractTitleConfig(this.config.title).nonMark,this.title);return e.text?(g.contains(["unit","layer"],this.type)||(e.anchor&&"start"!==e.anchor&&c.warn(c.message.cannotSetTitleAnchor(this.type)),e.anchor="start"),0<g.keys(e).length?e:void 0):void 0},e.prototype.assembleGroup=function(e){void 0===e&&(e=[]);var t={};e=e.concat(this.assembleSelectionSignals()),0<e.length&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var a=!this.parent||i(this.parent)?S.assembleScales(this):[];0<a.length&&(t.scales=a);var o=this.assembleAxes();0<o.length&&(t.axes=o);var r=this.assembleLegends();return 0<r.length&&(t.legends=r),t},e.prototype.hasDescendantWithFieldOnChannel=function(e){for(var t=0,n=this.children,i;t<n.length;t++)if(i=n[t],a(i)){if(i.channelHasField(e))return!0;}else if(i.hasDescendantWithFieldOnChannel(e))return!0;return!1},e.prototype.getName=function(e){return g.varName((this.name?this.name+"_":"")+e)},e.prototype.requestDataName=function(e){var t=this.getName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t},e.prototype.getSizeSignalRef=function(e){if(i(this.parent)){var t="width"===e?"x":"y",n=this.component.scales[t];if(n&&!n.merged){var a=n.get("type"),o=n.get("range");if(u.hasDiscreteDomain(a)&&_.isVgRangeStep(o)){var r=n.get("name"),l=T.assembleDomain(this,t),s=T.getFieldFromDomain(l);if(s){var d=p.field({aggregate:"distinct",field:s},{expr:"datum"});return{signal:b.sizeExpr(r,n,d)}}return c.warn("Unknown field for ${channel}.  Cannot calculate view size."),null}}}return{signal:this.layoutSizeNameMap.get(this.getName(e))}},e.prototype.lookupDataSource=function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e},e.prototype.getSizeName=function(e){return this.layoutSizeNameMap.get(e)},e.prototype.renameLayoutSize=function(e,t){this.layoutSizeNameMap.rename(e,t)},e.prototype.renameScale=function(e,t){this.scaleNameMap.rename(e,t)},e.prototype.scaleName=function(e,t){return t?this.getName(e):s.isChannel(e)&&s.isScaleChannel(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0},e.prototype.getScaleComponent=function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0},e.prototype.getSelectionComponent=function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(c.message.selectionNotFound(t));return n},e}();n.Model=A;var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.field=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);return n?p.field(n,t):void 0},t.prototype.reduceFieldDef=function(e,n,a){return d.reduce(this.getMapping(),function(t,n,a){var i=p.getFieldDef(n);return i?e(t,i,a):t},n,a)},t.prototype.forEachFieldDef=function(e,n){d.forEach(this.getMapping(),function(t,n){var a=p.getFieldDef(t);a&&e(a,n)},n)},t}(A);n.ModelWithField=w},{"../channel":479,"../encoding":562,"../fielddef":564,"../log":569,"../scale":572,"../title":578,"../transform":580,"../util":582,"../vega.schema":584,"./axis/assemble":480,"./layout/header":510,"./layoutsize/assemble":511,"./legend/assemble":513,"./legend/parse":516,"./scale/assemble":534,"./scale/domain":536,"./scale/parse":537,"./split":553,"vega-util":591}],531:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../log"),o=e("./baseconcat"),r=e("./buildmodel"),l=e("./layoutsize/parse"),s=function(e){function t(t,n,a,o,r){var l=e.call(this,t,n,a,r,t.resolve)||this;return l.type="repeat",t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&i.warn(i.message.REPEAT_CANNOT_SHARE_AXIS),l.repeat=t.repeat,l.children=l._initChildren(t,l.repeat,o,r),l}return a(t,e),t.prototype._initChildren=function(e,t,n,a){for(var i=[],o=t.row||[n?n.row:null],l=t.column||[n?n.column:null],s=0,d=o,p;s<d.length;s++){p=d[s];for(var c=0,u=l;c<u.length;c++){var f=u[c],m=(p?"_"+p:"")+(f?"_"+f:""),g={row:p,column:f};i.push(r.buildModel(e.spec,this,this.getName("child"+m),void 0,g,a,!1))}}return i},t.prototype.parseLayoutSize=function(){l.parseRepeatLayoutSize(this)},t.prototype.assembleLayout=function(){return{padding:{row:10,column:10},offset:10,columns:this.repeat&&this.repeat.column?this.repeat.column.length:1,bounds:"full",align:"all"}},t}(o.BaseConcatModel);n.RepeatModel=s},{"../log":569,"./baseconcat":486,"./buildmodel":487,"./layoutsize/parse":512}],532:[function(e,t,n){"use strict";function a(e,t){return d.isRepeatRef(e.field)?e.field.repeat in t?l({},e,{field:t[e.field.repeat]}):void p.warn(p.message.noSuchRepeatedValue(e.field.repeat)):e}function i(e,t){if(e=a(e,t),void 0!==e){if(e.sort&&c.isSortField(e.sort)){var n=a(e.sort,t);e=l({},e,n?{sort:n}:{})}return e}}function o(e,t){if(d.isFieldDef(e)){var n=i(e,t);if(n)return n;if(d.isConditionalDef(e))return{condition:e.condition}}else{if(d.hasConditionalFieldDef(e)){var n=i(e.condition,t);if(n)return l({},e,{condition:n});var a=e.condition,o=s(e,["condition"]);return o}return e}}function r(e,t){var n={};for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];if(u.isArray(i))n[a]=i.map(function(e){return o(e,t)}).filter(function(e){return e});else{var r=o(i,t);r&&(n[a]=r)}}return n}var l=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},s=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0});var d=e("../fielddef"),p=e("../log"),c=e("../sort"),u=e("../util");n.replaceRepeaterInFacet=function(e,t){return r(e,t)},n.replaceRepeaterInEncoding=function(e,t){return r(e,t)}},{"../fielddef":564,"../log":569,"../sort":574,"../util":582}],533:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../channel"),i=e("../log"),o=e("../util"),r=e("./model");n.defaultScaleResolve=function(e,t){if(r.isLayerModel(t)||r.isFacetModel(t))return"shared";if(r.isConcatModel(t)||r.isRepeatModel(t))return o.contains(a.POSITION_SCALE_CHANNELS,e)?"independent":"shared";throw new Error("invalid model type for resolve")},n.parseGuideResolve=function(e,t){var n=e.scale[t],r=o.contains(a.POSITION_SCALE_CHANNELS,t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&i.warn(i.message.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}},{"../channel":479,"../log":569,"../util":582,"./model":530}],534:[function(e,t,n){"use strict";function a(e){return c.isLayerModel(e)||c.isConcatModel(e)||c.isRepeatModel(e)?e.children.reduce(function(e,t){return e.concat(a(t))},i(e)):i(e)}function i(e){return d.keys(e.component.scales).reduce(function(t,n){var a=e.component.scales[n];if(a.merged)return t;var i=a.combine(),s=i.domainRaw,d=i.range,p=i.name,c=i.type,m=i.domainRaw,g=i.range,_=l(i,["name","type","domainRaw","range"]);return d=o(d,p,e,n),s&&u.isRawSelectionDomain(s)&&(s=u.selectionScaleDomain(e,s)),t.push(r({name:p,type:c,domain:f.assembleDomain(e,n)},s?{domainRaw:s}:{},{range:d},_)),t},[])}function o(e,t,n,a){if("x"===a||"y"===a){if(p.isVgRangeStep(e))return{step:{signal:t+"_step"}};if(s.isArray(e)&&2===e.length){var i=e[0],o=e[1];if(0===i&&p.isVgSignalRef(o))return[0,{signal:n.getSizeName(o.signal)}];if(p.isVgSignalRef(i)&&0===o)return[{signal:n.getSizeName(i.signal)},0]}}return e}var r=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},l=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("vega-util"),d=e("../../util"),p=e("../../vega.schema"),c=e("../model"),u=e("../selection/selection"),f=e("./domain");n.assembleScales=a,n.assembleScalesForModel=i,n.assembleScaleRange=o},{"../../util":582,"../../vega.schema":584,"../model":530,"../selection/selection":543,"./domain":536,"vega-util":591}],535:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../split"),o=function(e){function t(t,n){var a=e.call(this,{},{name:t})||this;return a.merged=!1,a.domains=[],a.setWithExplicit("type",n),a}return a(t,e),t}(i.Split);n.ScaleComponent=o},{"../split":553}],536:[function(e,t,n){"use strict";function a(e){A.isUnitModel(e)?i(e):o(e)}function i(e){var t=e.specifiedScales,n=e.component.scales;S.keys(n).forEach(function(a){var i=t[a],o=i?i.domain:void 0,r=l(e,a),s=n[a];s.domains=r,x.isSelectionDomain(o)&&s.set("domainRaw",{signal:w.SELECTION_DOMAIN+JSON.stringify(o)},!0)})}function o(e){for(var t=0,n=e.children,i;t<n.length;t++)i=n[t],a(i);var o=e.component.scales;S.keys(o).forEach(function(t){for(var n=0,a=e.children,i;n<a.length;n++){var r=a[n],l=r.component.scales[t];l&&(i==void 0?i=l.domains:i=i.concat(l.domains))}A.isFacetModel(e)&&i.forEach(function(e){T.isDataRefDomain(e)&&(e.data=N.FACET_SCALE_PREFIX+e.data.replace(N.FACET_SCALE_PREFIX,""))}),o[t].domains=i})}function r(e,t,n,a){if("unaggregated"===e){var i=p(t,n),o=i.valid,r=i.reason;if(!o)return void b.warn(r)}else if(e===void 0&&a.useUnaggregatedDomain){var o=p(t,n).valid;if(o)return"unaggregated"}return e}function l(e,t){var n=e.getScaleComponent(t).get("type"),a=r(e.scaleDomain(t),e.fieldDef(t),n,e.config.scale);return(a!==e.scaleDomain(t)&&(e.specifiedScales[t]=u({},e.specifiedScales[t],{domain:a})),"x"===t&&e.channelHasField("x2"))?e.channelHasField("x")?s(n,a,e,"x").concat(s(n,a,e,"x2")):s(n,a,e,"x2"):"y"===t&&e.channelHasField("y2")?e.channelHasField("y")?s(n,a,e,"y").concat(s(n,a,e,"y2")):s(n,a,e,"y2"):s(n,a,e,t)}function s(e,t,n,a){var i=n.fieldDef(a);if(t&&"unaggregated"!==t&&!x.isSelectionDomain(t))if(i.bin)b.warn(b.message.conflictedDomain(a));else return h.isDateTime(t[0])?t.map(function(e){return{signal:"{data: "+h.dateTimeExpr(e,!0)+"}"}}):[t];var o=n.stack;if(o&&a===o.fieldChannel){if("normalize"===o.offset)return[[0,1]];var r=n.requestDataName(y.MAIN);return[{data:r,field:n.field(a,{suffix:"start"})},{data:r,field:n.field(a,{suffix:"end"})}]}var l=_.isScaleChannel(a)?d(n,a,e):void 0;if("unaggregated"===t){var r=n.requestDataName(y.MAIN);return[{data:r,field:n.field(a,{aggregate:"min"})},{data:r,field:n.field(a,{aggregate:"max"})}]}if(i.bin){if(x.isBinScale(e)){var s=n.getName(g.binToString(i.bin)+"_"+i.field+"_bins");return[{signal:"sequence("+s+".start, "+s+".stop + "+s+".step, "+s+".step)"}]}if(x.hasDiscreteDomain(e))return[{data:S.isBoolean(l)?n.requestDataName(y.MAIN):n.requestDataName(y.RAW),field:n.field(a,E.binRequiresRange(i,a)?{binSuffix:"range"}:{}),sort:!0!==l&&v.isSortField(l)?l:{field:n.field(a,{}),op:"min"}}];if("x"===a||"y"===a){var r=n.requestDataName(y.MAIN);return[{data:r,field:n.field(a,{})},{data:r,field:n.field(a,{binSuffix:"end"})}]}return[{data:n.requestDataName(y.MAIN),field:n.field(a,{})}]}return l?[{data:S.isBoolean(l)?n.requestDataName(y.MAIN):n.requestDataName(y.RAW),field:n.field(a),sort:l}]:[{data:n.requestDataName(y.MAIN),field:n.field(a)}]}function d(e,t,n){if(x.hasDiscreteDomain(n)){var a=e.sort(t);return v.isSortField(a)?a:"descending"===a?{op:"min",field:e.field(t),order:"descending"}:!!S.contains(["ascending",void 0],a)||void 0}}function p(e,t){return e.aggregate?m.SHARED_DOMAIN_OP_INDEX[e.aggregate]?"quantitative"===e.type&&"log"===t?{valid:!1,reason:b.message.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:b.message.unaggregateDomainWithNonSharedDomainOp(e.aggregate)}:{valid:!1,reason:b.message.unaggregateDomainHasNoEffectForRawField(e)}}function c(e){var t=S.unique(e.map(function(e){if(T.isDataRefDomain(e)){var t=e.sort,n=f(e,["sort"]);return n}return e}),S.hash),n=S.unique(e.map(function(e){if(T.isDataRefDomain(e)){var t=e.sort;return void 0===t||S.isBoolean(t)||("count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}}).filter(function(e){return e!==void 0}),S.hash);if(1===t.length){var a=e[0];if(T.isDataRefDomain(a)&&0<n.length){var i=n[0];return 1<n.length&&(b.warn(b.message.MORE_THAN_ONE_SORT),i=!0),u({},a,{sort:i})}return a}var o=S.unique(n.map(function(e){return!0===e?e:"count"===e.op?e:(b.warn(b.message.domainSortDropped(e)),!0)}),S.hash),r;1===o.length?r=o[0]:1<o.length&&(b.warn(b.message.MORE_THAN_ONE_SORT),r=!0);var l=S.unique(e.map(function(e){return T.isDataRefDomain(e)?e.data:null}),function(e){return e});if(1===l.length&&null!==l[0]){var a=u({data:l[0],fields:t.map(function(e){return e.field})},r?{sort:r}:{});return a}return u({fields:t},r?{sort:r}:{})}var u=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},f=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0});var m=e("../../aggregate"),g=e("../../bin"),_=e("../../channel"),y=e("../../data"),h=e("../../datetime"),b=e("../../log"),x=e("../../scale"),v=e("../../sort"),S=e("../../util"),T=e("../../vega.schema"),k=e("../../vega.schema"),E=e("../common"),N=e("../data/optimize"),A=e("../model"),w=e("../selection/selection");n.parseScaleDomain=a,n.parseDomainForChannel=l,n.domainSort=d,n.canUseUnaggregatedDomain=p,n.mergeDomains=c,n.getFieldFromDomain=function(e){if(T.isDataRefDomain(e)&&S.isString(e.field))return e.field;if(k.isDataRefUnionedDomain(e)){for(var t=void 0,n=0,a=e.fields,i;n<a.length;n++)if(i=a[n],T.isDataRefDomain(i)&&S.isString(i.field))if(!t)t=i.field;else if(t!==i.field)return b.warn("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),t;return b.warn("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),t}if(k.isFieldRefUnionDomain(e)){b.warn("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect.");var t=e.fields[0];return S.isString(t)?t:void 0}},n.assembleDomain=function(e,t){var n=e.component.scales[t],a=n.domains.map(function(t){return T.isDataRefDomain(t)&&(t.data=e.lookupDataSource(t.data)),t});return c(a)}},{"../../aggregate":476,"../../bin":478,"../../channel":479,"../../data":560,"../../datetime":561,"../../log":569,"../../scale":572,"../../sort":574,"../../util":582,"../../vega.schema":584,"../common":488,"../data/optimize":502,"../model":530,"../selection/selection":543}],537:[function(e,t,n){"use strict";function a(e){e.component.scales=p.isUnitModel(e)?i(e):o(e)}function i(e){var t=e.encoding,n=e.config,a=e.mark();return r.SCALE_CHANNELS.reduce(function(i,o){var r={},s=t[o],d;if(l.isFieldDef(s)?(d=s,r=s.scale||{}):l.hasConditionalFieldDef(s)?(d=s.condition,r=s.condition.scale||{}):"x"===o?d=l.getFieldDef(t.x2):"y"===o&&(d=l.getFieldDef(t.y2)),d){var p=r.type,c=y.scaleType(r.type,o,d,a,n.scale);i[o]=new f.ScaleComponent(e.scaleName(o+"",!0),{value:c,explicit:p===c})}return i},{})}function o(e){for(var t=e.component.scales={},n={},i=e.component.resolve,o=function(t){a(t),d.keys(t.component.scales).forEach(function(a){if(i.scale[a]=i.scale[a]||c.defaultScaleResolve(a,e),"shared"===i.scale[a]){var o=n[a],r=t.component.scales[a].getWithExplicit("type");o?s.scaleCompatible(o.value,r.value)?n[a]=u.mergeValuesWithExplicit(o,r,"type","scale",h):(i.scale[a]="independent",delete n[a]):n[a]=r}})},r=0,l=e.children,p;r<l.length;r++)p=l[r],o(p);return d.keys(n).forEach(function(a){var i=e.scaleName(a,!0),o=n[a];t[a]=new f.ScaleComponent(i,o);for(var r=0,l=e.children;r<l.length;r++){var s=l[r],d=s.component.scales[a];d&&(s.renameScale(d.get("name"),i),d.merged=!0)}}),t}Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../channel"),l=e("../../fielddef"),s=e("../../scale"),d=e("../../util"),p=e("../model"),c=e("../resolve"),u=e("../split"),f=e("./component"),m=e("./domain"),g=e("./properties"),_=e("./range"),y=e("./type");n.parseScale=function(e){a(e),m.parseScaleDomain(e);for(var t=0,n=s.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES,i;t<n.length;t++)i=n[t],g.parseScaleProperty(e,i);_.parseScaleRange(e)},n.parseScaleCore=a;var h=u.tieBreakByComparing(function(e,t){return s.scaleTypePrecedence(e)-s.scaleTypePrecedence(t)})},{"../../channel":479,"../../fielddef":564,"../../scale":572,"../../util":582,"../model":530,"../resolve":533,"../split":553,"./component":535,"./domain":536,"./properties":538,"./range":539,"./type":540}],538:[function(e,t,n){"use strict";function a(e,t){h.isUnitModel(e)?i(e,t):r(e,t)}function i(e,t){var n=e.component.scales;_.keys(n).forEach(function(a){var i=e.specifiedScales[a],r=n[a],l=e.getScaleComponent(a),s=e.fieldDef(a),d=e.sort(a),p=e.config,c=i[t],u=l.get("type"),f=g.scaleTypeSupportProperty(u,t),_=g.channelScalePropertyIncompatability(a,t);if(void 0!==c&&(f?_&&m.warn(_):m.warn(m.message.scalePropertyNotWorkWithScaleType(u,t,a))),f&&void 0===_)if(void 0!==c)r.copyKeyFromObject(t,i);else{var y=o(t,a,s,d,l.get("type"),l.get("padding"),l.get("paddingInner"),i.domain,e.markDef,p);void 0!==y&&r.set(t,y,!1)}})}function o(e,t,n,a,i,o,r,f,m,g){var _=g.scale;return"nice"===e?l(i,t,n):"padding"===e?s(t,i,_,n,m,g.bar):"paddingInner"===e?d(o,t,_):"paddingOuter"===e?p(o,t,i,r,_):"reverse"===e?c(i,a):"zero"===e?u(t,n,f):_[e]}function r(e,t){for(var n=e.component.scales,i=0,o=e.children,r;i<o.length;i++)r=o[i],"range"===t?x.parseScaleRange(r):a(r,t);_.keys(n).forEach(function(a){for(var i=0,o=e.children,r;i<o.length;i++){var l=o[i],s=l.component.scales[a];if(s){var d=s.getWithExplicit(t);r=b.mergeValuesWithExplicit(r,d,t,"scale",b.tieBreakByComparing(function(e,n){return"range"===t?e.step&&n.step?e.step-n.step:0:0}))}}n[a].setWithExplicit(t,r)})}function l(e,t,n){return n.bin||y.contains([g.ScaleType.TIME,g.ScaleType.UTC],e)?void 0:y.contains([f.X,f.Y],t)}function s(e,t,n,a,i,o){if(y.contains([f.X,f.Y],e)){if(g.isContinuousToContinuous(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;var r=i.type,l=i.orient;if("bar"===r&&!a.bin&&("vertical"===l&&"x"===e||"horizontal"===l&&"y"===e))return o.continuousBandSize}if(t===g.ScaleType.POINT)return n.pointPadding}}function d(e,t,n){return void 0===e?y.contains([f.X,f.Y],t)?n.bandPaddingInner:void 0:void 0}function p(e,t,n,a,i){return void 0===e?y.contains([f.X,f.Y],t)&&n===g.ScaleType.BAND?void 0===i.bandPaddingOuter?a/2:i.bandPaddingOuter:void 0:void 0}function c(e,t){return g.hasContinuousDomain(e)&&"descending"===t||void 0}function u(e,t,n){if("size"===e&&"quantitative"===t.type)return!0;return!!n&&"unaggregated"!==n||t.bin||!y.contains([f.X,f.Y],e)?!1:!0}Object.defineProperty(n,"__esModule",{value:!0});var f=e("../../channel"),m=e("../../log"),g=e("../../scale"),_=e("../../util"),y=e("../../util"),h=e("../model"),b=e("../split"),x=e("./range");n.parseScaleProperty=a,n.getDefaultValue=o,n.parseNonUnitScaleProperty=r,n.nice=l,n.padding=s,n.paddingInner=d,n.paddingOuter=p,n.reverse=c,n.zero=u},{"../../channel":479,"../../log":569,"../../scale":572,"../../util":582,"../model":530,"../split":553,"./range":539}],539:[function(e,t,n){"use strict";function a(e){var t=e.component.scales;u.SCALE_CHANNELS.forEach(function(n){var a=t[n];if(a){var r=e.getScaleComponent(n),l=e.specifiedScales[n],s=e.fieldDef(n),d="x"===n?"width":"y"===n?"height":void 0,p=d?!!e.component.layoutSize.get(d):void 0,c=r.get("type"),u=_.contains(["point","band"],c)||!!l.rangeStep;d&&e.fit&&!p&&u&&(f.warn(f.message.CANNOT_FIX_RANGE_STEP_WITH_FIT),p=!0);var m=i(e),g=o(n,c,s.type,l,e.config,a.get("zero"),e.mark(),p,e.getName(d),m);a.setWithExplicit("range",g)}})}function i(e){var t=[],n=e.getScaleComponent("x"),a=n&&n.get("range");a&&y.isVgRangeStep(a)&&c.isNumber(a.step)&&t.push(a.step);var i=e.getScaleComponent("y"),o=i&&i.get("range");return o&&y.isVgRangeStep(o)&&c.isNumber(o.step)&&t.push(o.step),t}function o(e,t,a,i,o,s,d,p,c,u){for(var g=p||null===i.rangeStep,_=0,y=n.RANGE_PROPERTIES,h;_<y.length;_++)if(h=y[_],void 0!==i[h]){var x=m.scaleTypeSupportProperty(t,h),v=m.channelScalePropertyIncompatability(e,h);if(!x)f.warn(f.message.scalePropertyNotWorkWithScaleType(t,h,e));else if(v)f.warn(v);else switch(h){case"range":return b.makeExplicit(i[h]);case"scheme":return b.makeExplicit(r(i[h]));case"rangeStep":var S=i[h];if(null!==S){if(!p)return b.makeExplicit({step:S});f.warn(f.message.rangeStepDropped(e))}}}return b.makeImplicit(l(e,t,a,o,s,d,c,u,g))}function r(e){if(m.isExtendedScheme(e)){var t={scheme:e.name};return e.count&&(t.count=e.count),e.extent&&(t.extent=e.extent),t}return{scheme:e}}function l(e,t,n,a,i,o,r,l,p){switch(e){case u.X:case u.Y:if(_.contains(["point","band"],t)&&!p)if(e===u.X&&"text"===o){if(a.scale.textXRangeStep)return{step:a.scale.textXRangeStep};}else if(a.scale.rangeStep)return{step:a.scale.rangeStep};return e===u.Y&&g.hasContinuousDomain(t)?[{signal:r},0]:[0,{signal:r}];case u.SIZE:var c=s(o,i,a),f=d(o,l,a);return[c,f];case u.SHAPE:return"symbol";case u.COLOR:return"ordinal"===t?"nominal"===n?"category":"ordinal":"rect"===o?"heatmap":"ramp";case u.OPACITY:return[a.scale.minOpacity,a.scale.maxOpacity];}throw new Error("Scale range undefined for channel "+e)}function s(e,t,n){if(t)return 0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize;}throw new Error(f.message.incompatibleChannel("size",e))}function d(e,t,n){var a=n.scale;switch(e){case"bar":case"tick":return void 0===n.scale.maxBandSize?p(t,n.scale)-1:n.scale.maxBandSize;case"line":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":if(n.scale.maxSize)return n.scale.maxSize;var i=p(t,a);return(i-2)*(i-2);}throw new Error(f.message.incompatibleChannel("size",e))}function p(e,t){return 0<e.length?S.apply(null,e):t.rangeStep?t.rangeStep:21}Object.defineProperty(n,"__esModule",{value:!0});var c=e("vega-util"),u=e("../../channel"),f=e("../../log"),m=e("../../scale"),g=e("../../scale"),_=e("../../util"),y=e("../../vega.schema"),h=e("../model"),b=e("../split"),x=e("./properties");n.RANGE_PROPERTIES=["range","rangeStep","scheme"],n.parseScaleRange=function(e){h.isUnitModel(e)?a(e):x.parseNonUnitScaleProperty(e,"range")},n.parseRangeForChannel=o,n.defaultRange=l},{"../../channel":479,"../../log":569,"../../scale":572,"../../util":582,"../../vega.schema":584,"../model":530,"../split":553,"./properties":538,"vega-util":591}],540:[function(e,t,n){"use strict";function a(e,t,n){switch(t.type){case"nominal":case"ordinal":if("color"===e||"discrete"===o.rangeType(e))return"shape"===e&&"ordinal"===t.type&&r.warn(r.message.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(p.contains(["x","y"],e)){if("rect"===n)return"band";if("bar"===n)return"band"}return"point";case"temporal":if("color"===e)return"sequential";return"discrete"===o.rangeType(e)?(r.warn(r.message.discreteChannelCannotEncode(e,"temporal")),"ordinal"):"time";case"quantitative":if("color"===e)return t.bin?"bin-ordinal":"sequential";return"discrete"===o.rangeType(e)?(r.warn(r.message.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):t.bin&&"x"!==e&&"y"!==e?"bin-linear":"linear";}throw new Error(r.message.invalidFieldType(t.type))}function i(e,t){var n=t.type;if(c.contains([d.Type.ORDINAL,d.Type.NOMINAL],n))return void 0===e||s.hasDiscreteDomain(e);return n===d.Type.TEMPORAL?c.contains([l.ScaleType.TIME,l.ScaleType.UTC,l.ScaleType.SEQUENTIAL,void 0],e):n!==d.Type.QUANTITATIVE||(t.bin?c.contains([l.ScaleType.BIN_LINEAR,l.ScaleType.BIN_ORDINAL,l.ScaleType.LINEAR],e):c.contains([l.ScaleType.LOG,l.ScaleType.POW,l.ScaleType.SQRT,l.ScaleType.QUANTILE,l.ScaleType.QUANTIZE,l.ScaleType.LINEAR,l.ScaleType.SEQUENTIAL,void 0],e))}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../channel"),r=e("../../log"),l=e("../../scale"),s=e("../../scale"),d=e("../../type"),p=e("../../util"),c=e("../../util");n.scaleType=function(e,t,n,s,d){var p=a(t,n,s,d);return o.isScaleChannel(t)?void 0===e?p:l.channelSupportScaleType(t,e)?i(e,n)?e:(r.warn(r.message.scaleTypeNotWorkWithFieldDef(e,p)),p):(r.warn(r.message.scaleTypeNotWorkWithChannel(t,e,p)),p):null},n.fieldDefMatchScaleType=i},{"../../channel":479,"../../log":569,"../../scale":572,"../../type":581,"../../util":582}],541:[function(e,t,n){"use strict";function a(e,t,a){var o=u.channelSignalName(t,a,"visual"),r=u.channelSignalName(t,a,"data"),s=p.default.has(t),f=e.scaleName(a),m=c.stringValue(f),g=e.getScaleComponent(a),_=g?g.get("type"):void 0,y=e.getSizeSignalRef(a===l.X?"width":"height").signal,h=a+"(unit)",b=i(t,function(e,t){return e.concat({events:t.between[0],update:"["+h+", "+h+"]"},{events:t,update:"["+o+"[0], clamp("+h+", 0, "+y+")]"})});return b.push({events:{signal:t.name+n.SCALE_TRIGGER},update:d.hasContinuousDomain(_)&&!d.isBinScale(_)?"[scale("+m+", "+r+"[0]), scale("+m+", "+r+"[1])]":"[0, 0]"}),s?[{name:r,on:[]}]:[{name:o,value:[],on:b},{name:r,on:[{events:{signal:o},update:o+"[0] === "+o+"[1] ? null : invert("+m+", "+o+")"}]}]}function i(e,t){return e.events.reduce(function(e,n){return n.between?t(e,n):(s.warn(n+" is not an ordered event stream for interval selections"),e)},[])}var o=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},r=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../channel"),s=e("../../log"),d=e("../../scale"),c=e("../../util"),u=e("./selection"),p=e("./transforms/scales");n.BRUSH="_brush",n.SCALE_TRIGGER="_scale_trigger";n.default={predicate:"vlInterval",scaleDomain:"vlIntervalDomain",signals:function(e,t){var o=t.name,r=p.default.has(t),f=[],m=[],g=[],_=[];if(t.translate&&!r){var y="!event.item || event.item.mark.name !== "+c.stringValue(o+n.BRUSH);i(t,function(e,t){var n=t.between[0].filter||(t.between[0].filter=[]);0>n.indexOf(y)&&n.push(y)})}return t.project.forEach(function(n){var i=n.channel;if(i!==l.X&&i!==l.Y)return void s.warn("Interval selections only support x and y encoding channels.");var o=a(e,t,i),r=u.channelSignalName(t,i,"data"),p=u.channelSignalName(t,i,"visual"),y=c.stringValue(e.scaleName(i)),h=e.getScaleComponent(i).get("type"),b=d.hasContinuousDomain(h)?"+":"";f.push.apply(f,o),g.push(r),m.push("{encoding: "+c.stringValue(i)+", "+("field: "+c.stringValue(n.field)+", extent: "+r+"}")),_.push({scaleName:e.scaleName(i),expr:"(!isArray("+r+") || "+("("+b+"invert("+y+", "+p+")[0] === "+b+r+"[0] && ")+(b+"invert("+y+", "+p+")[1] === "+b+r+"[1]))")})}),r||f.push({name:o+n.SCALE_TRIGGER,update:_.map(function(e){return e.expr}).join(" && ")+(" ? "+(o+n.SCALE_TRIGGER)+" : {}")}),f.concat({name:o+u.TUPLE,on:[{events:g.map(function(e){return{signal:e}}),update:g.join(" && ")+(" ? {unit: "+u.unitName(e)+", intervals: ["+m.join(", ")+"]} : null")}]})},modifyExpr:function(e,t){var n=t.name+u.TUPLE;return n+", "+("global"===t.resolve?"true":"{unit: "+u.unitName(e)+"}")},marks:function(e,t,a){var i=t.name,l=u.positionalProjections(t),s=l.xi,d=l.yi,f="data("+c.stringValue(t.name+u.STORE)+")";if(p.default.has(t))return a;var m={x:null===s?{value:0}:{signal:i+"_x[0]"},y:null===d?{value:0}:{signal:i+"_y[0]"},x2:null===s?{field:{group:"width"}}:{signal:i+"_x[1]"},y2:null===d?{field:{group:"height"}}:{signal:i+"_y[1]"}};if("global"===t.resolve)for(var g=0,_=c.keys(m),y;g<_.length;g++)y=_[g],m[y]=[o({test:f+".length && "+f+"[0].unit === "+u.unitName(e)},m[y]),{value:0}];var h=t.mark,b=h.fill,x=h.fillOpacity,v=r(h,["fill","fillOpacity"]),S=c.keys(v).reduce(function(e,t){return e[t]={value:v[t]},e},{});return[{name:i+n.BRUSH+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:b},fillOpacity:{value:x}},update:m}}].concat(a,{name:i+n.BRUSH,type:"rect",clip:!0,encode:{enter:o({fill:{value:"transparent"}},S),update:m}})}}},{"../../channel":479,"../../log":569,"../../scale":572,"../../util":582,"./selection":543,"./transforms/scales":548}],542:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../util"),i=e("./selection"),o=e("./transforms/nearest");n.default={predicate:"vlMulti",scaleDomain:"vlMultiDomain",signals:function(e,t){var n=t.project,r=o.default.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum",l=[],s=n.map(function(e){return a.stringValue(e.channel)}).filter(function(t){return t}).join(", "),d=n.map(function(e){return a.stringValue(e.field)}).join(", "),p=n.map(function(t){var n=t.channel,i=e.fieldDef(n);return i&&i.bin?(l.push(t.field),"["+r+a.accessPath(e.field(n,{}))+", "+(""+r+a.accessPath(e.field(n,{binSuffix:"end"}))+"]")):""+r+a.accessPath(t.field)}).join(", ");return[{name:t.name+i.TUPLE,value:{},on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? {unit: "+i.unitName(e)+", encodings: ["+s+"], "+("fields: ["+d+"], values: ["+p+"]")+(l.length?", "+l.map(function(e){return a.stringValue("bin_"+e)+": 1"}).join(", "):"")+"} : null",force:!0}]}]},modifyExpr:function(e,t){var n=t.name+i.TUPLE;return n+", "+("global"===t.resolve?"null":"{unit: "+i.unitName(e)+"}")}}},{"../../util":582,"./selection":543,"./transforms/nearest":546}],543:[function(e,t,n){"use strict";function a(e,t){return i(e,function(n,a){t=a.marks?a.marks(e,n,t):t,y.forEachTransform(n,function(a){a.marks&&(t=a.marks(e,n,t))})}),t}function i(e,t){var n=e.component.selection;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];t(i,o(i.type))}}function o(e){return"single"===e?_.default:"multi"===e?g.default:"interval"===e?m.default:null}function r(e){for(var t=e.parent;t&&!f.isFacetModel(t);)t=t.parent;return t}var l=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("vega-event-selector"),d=e("../../channel"),p=e("../../log"),c=e("../../selection"),u=e("../../util"),f=e("../model"),m=e("./interval"),g=e("./multi"),_=e("./single"),y=e("./transforms/transforms");n.STORE="_store",n.TUPLE="_tuple",n.MODIFY="_modify",n.SELECTION_DOMAIN="_selection_domain_",n.parseUnitSelection=function(e,t){var n={},a=e.config.selection,i=function(i){if(!t.hasOwnProperty(i))return"continue";var o=t[i],r=a[o.type];for(var d in r)"encodings"==d&&o.fields||"fields"==d&&o.encodings||("mark"==d&&(o[d]=l({},r[d],o[d])),(void 0===o[d]||!0===o[d])&&(o[d]=r[d]||o[d]));i=u.varName(i);var p=n[i]=l({},o,{name:i,events:u.isString(o.on)?s.selector(o.on,"scope"):o.on});y.forEachTransform(p,function(t){t.parse&&t.parse(e,o,p)})};for(var o in t)i(o);return n},n.assembleUnitSelectionSignals=function(e,t){i(e,function(a,i){var o=a.name,r=i.modifyExpr(e,a);t.push.apply(t,i.signals(e,a)),y.forEachTransform(a,function(n){n.signals&&(t=n.signals(e,a,t)),n.modifyExpr&&(r=n.modifyExpr(e,a,r))}),t.push({name:o+n.MODIFY,on:[{events:{signal:o+n.TUPLE},update:"modify("+u.stringValue(a.name+n.STORE)+", "+r+")"}]})});var a=r(e);if(t.length&&a){var o=u.stringValue(a.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:s.selector("mousemove","scope"),update:"isTuple(facet) ? facet : group("+o+").datum"}]})}return t},n.assembleTopLevelSignals=function(e,t){var n=!1;if(i(e,function(a,i){i.topLevelSignals&&(t=i.topLevelSignals(e,a,t)),y.forEachTransform(a,function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,a,t))}),n=!0}),n){var a=t.filter(function(e){return"unit"===e.name});a.length||t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return t},n.assembleUnitSelectionData=function(e,t){return i(e,function(e){var a=t.filter(function(t){return t.name===e.name+n.STORE});a.length||t.push({name:e.name+n.STORE})}),t},n.assembleUnitSelectionMarks=a,n.assembleLayerSelectionMarks=function(e,t){return e.children.forEach(function(e){f.isUnitModel(e)&&(t=a(e,t))}),t},n.predicate=function(e,t,a){var i=[],r=u.logicalExpr(t,function(t){var r=u.varName(t),l=e.getSelectionComponent(r,t),s=u.stringValue(r+n.STORE);if(l.timeUnit){var d=a||e.component.data.raw,p=l.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}return"none"!==l.empty&&i.push(s),o(l.type).predicate+("("+s+", datum")+("global"===l.resolve?")":", "+u.stringValue(l.resolve)+")")});return(i.length?"!("+i.map(function(e){return"length(data("+e+"))"}).join(" || ")+") || ":"")+("("+r+")")},n.isRawSelectionDomain=function(e){return 0<=e.signal.indexOf(n.SELECTION_DOMAIN)},n.selectionScaleDomain=function(e,t){var a=JSON.parse(t.signal.replace(n.SELECTION_DOMAIN,"")),i=u.varName(a.selection),r=e.component.selection&&e.component.selection[i];if(r)p.warn("Use \"bind\": \"scales\" to setup a binding for scales and selections within the same view.");else return r=e.getSelectionComponent(i,a.selection),a.encoding||a.field||(a.field=r.project[0].field,1<r.project.length&&p.warn("A \"field\" or \"encoding\" must be specified when using a selection as a scale domain. Using \"field\": "+u.stringValue(a.field)+".")),{signal:o(r.type).scaleDomain+("("+u.stringValue(i+n.STORE)+", "+u.stringValue(a.encoding||null)+", ")+u.stringValue(a.field||null)+("global"===r.resolve?")":", "+u.stringValue(r.resolve)+")")};return{signal:"null"}},n.unitName=function(e){var t=u.stringValue(e.name),n=r(e);return n&&(t+=(n.facet.row?" + '_' + facet"+u.accessPath(n.field("row")):"")+(n.facet.column?" + '_' + facet"+u.accessPath(n.field("column")):"")),t},n.requiresSelectionId=function(e){var t=!1;return i(e,function(e){t=t||e.project.some(function(e){return e.field===c.SELECTION_ID})}),t},n.channelSignalName=function(e,t,n){return u.varName(e.name+"_"+("visual"===n?t:e.fields[t]))},n.positionalProjections=function(e){var t=null,n=null,a=null,o=null;return e.project.forEach(function(e,r){e.channel===d.X?(t=e,n=r):e.channel===d.Y&&(a=e,o=r)}),{x:t,xi:n,y:a,yi:o}}},{"../../channel":479,"../../log":569,"../../selection":573,"../../util":582,"../model":530,"./interval":541,"./multi":542,"./single":544,"./transforms/transforms":550,"vega-event-selector":474}],544:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../util"),i=e("./multi"),o=e("./selection"),r={predicate:"vlSingle",scaleDomain:"vlSingleDomain",signals:i.default.signals,topLevelSignals:function(e,t,n){var i=n.filter(function(e){return e.name===t.name}),r="data("+a.stringValue(t.name+o.STORE)+")";return i.length?n:n.concat({name:t.name,update:r+".length && {"+t.project.map(function(e,t){return e.field+": "+(r+"[0].values")+"["+t+"]"}).join(", ")+"}"})},modifyExpr:function(e,t){var n=t.name+o.TUPLE;return n+", "+("global"===t.resolve?"true":"{unit: "+o.unitName(e)+"}")}};n.default=r},{"../../util":582,"./multi":542,"./selection":543}],545:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../util"),i=e("../selection"),o=e("./nearest");n.default={has:function(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind},topLevelSignals:function(e,t,n){var i=t.name,r=t.project,l=t.bind,s=o.default.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.forEach(function(e){var o=a.varName(i+"_"+e.field),r=n.filter(function(e){return e.name===o});r.length||n.unshift({name:o,value:"",on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? "+s+a.accessPath(e.field)+" : null"}],bind:l[e.field]||l[e.channel]||l})}),n},signals:function(e,t,n){var o=t.name,r=t.project,l=n.filter(function(e){return e.name===o+i.TUPLE})[0],s=r.map(function(e){return a.stringValue(e.field)}).join(", "),d=r.map(function(e){return a.varName(o+"_"+e.field)});return l.update=d.join(" && ")+" ? {fields: ["+s+"], values: ["+d.join(", ")+"]} : null",delete l.value,delete l.on,n}}},{"../../../util":582,"../selection":543,"./nearest":546}],546:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../log"),i=e("../selection"),o="voronoi";n.default={has:function(e){return"interval"!==e.type&&e.nearest},marks:function(e,t,n){var r=i.positionalProjections(t),l=r.x,s=r.y,d=e.mark();if("line"===d||"area"===d)return a.warn(a.message.nearestNotSupportForContinuous(d)),n;var p={name:e.getName(o),type:"path",from:{data:e.getName("marks")},encode:{enter:{fill:{value:"transparent"},strokeWidth:{value:0.35},stroke:{value:"transparent"},isVoronoi:{value:!0}}},transform:[{type:"voronoi",x:!l&&(l||s)?{expr:"0"}:"datum.x",y:!s&&(l||s)?{expr:"0"}:"datum.y",size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},c=0,u=!1;return n.forEach(function(t,n){var a=t.name||"";a===e.component.mark[0].name?c=n:0<=a.indexOf(o)&&(u=!0)}),u||n.splice(c+1,0,p),n}}},{"../../../log":569,"../selection":543}],547:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../log"),i=e("../../../util"),o=e("../../data/timeunit");n.default={has:function(e){var t=e;return t.fields!==void 0||t.encodings!==void 0},parse:function(e,t,n){var r={},l={};(t.fields||[]).forEach(function(e){return r[e]=null}),(t.encodings||[]).forEach(function(t){var n=e.fieldDef(t);if(!n)a.warn(a.message.cannotProjectOnChannelWithoutField(t));else if(n.timeUnit){var i=e.field(t);r[i]=t,l[i]={as:i,field:n.field,timeUnit:n.timeUnit}}else r[n.field]=t});var s=n.project||(n.project=[]);for(var d in r)r.hasOwnProperty(d)&&s.push({field:d,channel:r[d]});var c=n.fields||(n.fields={});s.filter(function(e){return e.channel}).forEach(function(e){return c[e.channel]=e.field}),i.keys(l).length&&(n.timeUnit=new o.TimeUnitNode(l))}}},{"../../../log":569,"../../../util":582,"../../data/timeunit":507}],548:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../log"),i=e("../../../scale"),o=e("../../../util"),r=e("../selection");n.default={has:function(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function(e,t,n){var o=n.scales=[];n.project.forEach(function(t){var l=t.channel,s=e.getScaleComponent(l),d=s?s.get("type"):void 0;return s&&i.hasContinuousDomain(d)&&!i.isBinScale(d)?void(s.set("domainRaw",{signal:r.channelSignalName(n,l,"data")},!0),o.push(l)):void a.warn(a.message.SCALE_BINDINGS_CONTINUOUS)})},topLevelSignals:function(e,t,n){if(!e.parent)return n;var a=t.scales.filter(function(e){return!n.filter(function(n){return n.name===r.channelSignalName(t,e,"data")}).length});return n.concat(a.map(function(e){return{name:r.channelSignalName(t,e,"data")}}))},signals:function(e,t,n){return e.parent&&t.scales.forEach(function(e){var a=n.filter(function(n){return n.name===r.channelSignalName(t,e,"data")})[0];a.push="outer",delete a.value,delete a.update}),n}},n.domain=function(e,t){var n=o.stringValue(e.scaleName(t));return"domain("+n+")"}},{"../../../log":569,"../../../scale":572,"../../../util":582,"../selection":543}],549:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../selection"),i="_toggle";n.default={has:function(e){return"multi"===e.type&&e.toggle},signals:function(e,t,n){return n.concat({name:t.name+i,value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t){var n=t.name+a.TUPLE,o=t.name+i;return o+" ? null : "+n+", "+("global"===t.resolve?o+" ? null : true, ":o+" ? null : {unit: "+a.unitName(e)+"}, ")+(o+" ? "+n+" : null")}}},{"../selection":543}],550:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./inputs"),i=e("./nearest"),o=e("./project"),r=e("./scales"),l=e("./toggle"),s=e("./translate"),d=e("./zoom"),p={project:o.default,toggle:l.default,scales:r.default,translate:s.default,zoom:d.default,inputs:a.default,nearest:i.default};n.forEachTransform=function(e,n){for(var a in p)p[a].has(e)&&n(p[a])}},{"./inputs":545,"./nearest":546,"./project":547,"./scales":548,"./toggle":549,"./translate":551,"./zoom":552}],551:[function(e,t,n){"use strict";function a(e,t,n,a,i){var r=t.name,c=s.default.has(t),u=i.filter(function(e){return e.name===l.channelSignalName(t,n,c?"data":"visual")})[0],f=r+p,m=e.getSizeSignalRef(a).signal,g=e.getScaleComponent(n),_=g.get("type"),y=c&&n===o.X?"-":"",h=r+d+".extent_"+n,b=""+y+f+"."+n+" / "+(c?""+m:"span("+h+")"),x=c?"log"===_?"panLog":"pow"===_?"panPow":"panLinear":"panLinear",v=x+"("+h+", "+b+(c&&"pow"===_?", "+(g.get("exponent")||1):"")+")";u.on.push({events:{signal:f},update:c?v:"clampRange("+v+", 0, "+m+")"})}Object.defineProperty(n,"__esModule",{value:!0});var i=e("vega-event-selector"),o=e("../../../channel"),r=e("../interval"),l=e("../selection"),s=e("./scales"),d="_translate_anchor",p="_translate_delta";n.default={has:function(e){return"interval"===e.type&&e.translate},signals:function(e,t,n){var c=t.name,u=s.default.has(t),f=c+d,m=l.positionalProjections(t),g=m.x,_=m.y,y=i.selector(t.translate,"scope");return u||(y=y.map(function(t){return t.between[0].markname=c+r.BRUSH,t})),n.push({name:f,value:{},on:[{events:y.map(function(t){return t.between[0]}),update:"{x: x(unit), y: y(unit)"+(null===g?"":", extent_x: "+(u?s.domain(e,o.X):"slice("+l.channelSignalName(t,"x","visual")+")"))+(null===_?"":", extent_y: "+(u?s.domain(e,o.Y):"slice("+l.channelSignalName(t,"y","visual")+")"))+"}"}]},{name:c+p,value:{},on:[{events:y,update:"{x: "+f+".x - x(unit), y: "+f+".y - y(unit)}"}]}),null!==g&&a(e,t,o.X,"width",n),null!==_&&a(e,t,o.Y,"height",n),n}}},{"../../../channel":479,"../interval":541,"../selection":543,"./scales":548,"vega-event-selector":474}],552:[function(e,t,n){"use strict";function a(e,t,n,a,i){var o=t.name,r=s.default.has(t),l=i.filter(function(e){return e.name===d.channelSignalName(t,n,r?"data":"visual")})[0],u=e.getSizeSignalRef(a).signal,f=e.getScaleComponent(n),m=f.get("type"),g=r?s.domain(e,n):l.name,_=o+c,y=r?"log"===m?"zoomLog":"pow"===m?"zoomPow":"zoomLinear":"zoomLinear",h=y+"("+g+", "+(""+o+p+"."+n)+", "+_+(r&&"pow"===m?", "+(f.get("exponent")||1):"")+")";l.on.push({events:{signal:_},update:r?h:"clampRange("+h+", 0, "+u+")"})}Object.defineProperty(n,"__esModule",{value:!0});var i=e("vega-event-selector"),o=e("../../../channel"),r=e("../../../util"),l=e("../interval"),d=e("../selection"),s=e("./scales"),p="_zoom_anchor",c="_zoom_delta";n.default={has:function(e){return"interval"===e.type&&e.zoom},signals:function(e,t,n){var u=t.name,f=s.default.has(t),m=d.positionalProjections(t),g=m.x,_=m.y,y=r.stringValue(e.scaleName(o.X)),h=r.stringValue(e.scaleName(o.Y)),b=i.selector(t.zoom,"scope");return f||(b=b.map(function(t){return t.markname=u+l.BRUSH,t})),n.push({name:u+p,on:[{events:b,update:f?"{"+[y?"x: invert("+y+", x(unit))":"",h?"y: invert("+h+", y(unit))":""].filter(function(e){return!!e}).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:u+c,on:[{events:b,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),null!==g&&a(e,t,"x","width",n),null!==_&&a(e,t,"y","height",n),n}}},{"../../../channel":479,"../../../util":582,"../interval":541,"../selection":543,"./scales":548,"vega-event-selector":474}],553:[function(e,t,n){"use strict";function a(e,t,n,a){return e.explicit&&t.explicit&&o.warn(o.message.mergeConflictingProperty(n,a,e.value,t.value)),e}var i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../log"),r=e("../util"),l=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.explicit=e,this.implicit=t}return e.prototype.clone=function(){return new e(r.duplicate(this.explicit),r.duplicate(this.implicit))},e.prototype.combine=function(){return i({},this.explicit,this.implicit)},e.prototype.get=function(e){return void 0===this.explicit[e]?this.implicit[e]:this.explicit[e]},e.prototype.getWithExplicit=function(e){return void 0===this.explicit[e]?void 0===this.implicit[e]?{explicit:!1,value:void 0}:{explicit:!1,value:this.implicit[e]}:{explicit:!0,value:this.explicit[e]}},e.prototype.setWithExplicit=function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)},e.prototype.set=function(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this},e.prototype.copyKeyFromSplit=function(e,t){void 0===t.explicit[e]?void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1):this.set(e,t.explicit[e],!0)},e.prototype.copyKeyFromObject=function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)},e}();n.Split=l,n.makeExplicit=function(e){return{explicit:!0,value:e}},n.makeImplicit=function(e){return{explicit:!1,value:e}},n.tieBreakByComparing=function(e){return function(t,n,i,o){var r=e(t.value,n.value);if(0<r)return t;return 0>r?n:a(t,n,i,o)}},n.defaultTieBreaker=a,n.mergeValuesWithExplicit=function(e,t,n,i,o){return void 0===o&&(o=a),void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:e.value===t.value?e:o(e,t,n,i)}},{"../log":569,"../util":582}],554:[function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../channel"),r=e("../encoding"),l=e("../encoding"),s=e("../fielddef"),d=e("../mark"),p=e("../stack"),c=e("../util"),u=e("./axis/parse"),f=e("./data/parse"),m=e("./layoutsize/assemble"),g=e("./layoutsize/parse"),_=e("./mark/init"),y=e("./mark/mark"),h=e("./model"),b=e("./repeater"),x=e("./selection/selection"),v=function(e){function t(t,n,a,o,r,s,c){void 0===o&&(o={});var u=e.call(this,t,n,a,s,void 0)||this;u.fit=c,u.type="unit",u.specifiedScales={},u.specifiedAxes={},u.specifiedLegends={},u.selection={},u.children=[],u.initSize(i({},o,t.width?{width:t.width}:{},t.height?{height:t.height}:{}));var f=d.isMarkDef(t.mark)?t.mark.type:t.mark,m=u.encoding=l.normalizeEncoding(b.replaceRepeaterInEncoding(t.encoding||{},r),f);return u.markDef=_.normalizeMarkDef(t.mark,m,s),u.stack=p.stack(f,m,u.config.stack),u.specifiedScales=u.initScales(f,m),u.specifiedAxes=u.initAxes(m),u.specifiedLegends=u.initLegend(m),u.selection=t.selection,u}return a(t,e),t.prototype.scaleDomain=function(e){var t=this.specifiedScales[e];return t?t.domain:void 0},t.prototype.sort=function(e){return(this.getMapping()[e]||{}).sort},t.prototype.axis=function(e){return this.specifiedAxes[e]},t.prototype.legend=function(e){return this.specifiedLegends[e]},t.prototype.initScales=function(e,t){return o.SCALE_CHANNELS.reduce(function(e,n){var a=t[n],i,o;return s.isFieldDef(a)?(i=a,o=a.scale):s.hasConditionalFieldDef(a)?(i=a.condition,o=a.condition.scale):"x"===n?i=s.getFieldDef(t.x2):"y"===n&&(i=s.getFieldDef(t.y2)),i&&(e[n]=o||{}),e},{})},t.prototype.initAxes=function(e){return[o.X,o.Y].reduce(function(t,n){var a=e[n];if(s.isFieldDef(a)||n===o.X&&s.isFieldDef(e.x2)||n===o.Y&&s.isFieldDef(e.y2)){var r=s.isFieldDef(a)?a.axis:null;null!==r&&!1!==r&&(t[n]=i({},r))}return t},{})},t.prototype.initLegend=function(e){return o.NONPOSITION_SCALE_CHANNELS.reduce(function(t,n){var a=e[n];if(a){var o=s.isFieldDef(a)?a.legend:s.hasConditionalFieldDef(a)?a.condition.legend:null;null!==o&&!1!==o&&(t[n]=i({},o))}return t},{})},t.prototype.parseData=function(){this.component.data=f.parseData(this)},t.prototype.parseLayoutSize=function(){g.parseUnitLayoutSize(this)},t.prototype.parseSelection=function(){this.component.selection=x.parseUnitSelection(this,this.selection)},t.prototype.parseMarkGroup=function(){this.component.mark=y.parseMarkGroup(this)},t.prototype.parseAxisAndHeader=function(){this.component.axes=u.parseUnitAxis(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return x.assembleTopLevelSignals(this,e)},t.prototype.assembleSelectionSignals=function(){return x.assembleUnitSelectionSignals(this,[])},t.prototype.assembleSelectionData=function(e){return x.assembleUnitSelectionData(this,e)},t.prototype.assembleLayout=function(){return null},t.prototype.assembleLayoutSignals=function(){return m.assembleLayoutSignals(this)},t.prototype.assembleMarks=function(){var e=this.component.mark||[];return this.parent&&h.isLayerModel(this.parent)||(e=x.assembleUnitSelectionMarks(this,e)),e.map(this.correctDataNames)},t.prototype.assembleLayoutSize=function(){return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},t.prototype.getMapping=function(){return this.encoding},t.prototype.toSpec=function(e,t){var n=c.duplicate(this.encoding),a;return a={mark:this.markDef,encoding:n},e||(a.config=c.duplicate(this.config)),t||(a.data=c.duplicate(this.data)),a},t.prototype.mark=function(){return this.markDef.type},t.prototype.channelHasField=function(e){return r.channelHasField(this.encoding,e)},t.prototype.fieldDef=function(e){var t=this.encoding[e];return s.getFieldDef(t)},t}(h.ModelWithField);n.UnitModel=v},{"../channel":479,"../encoding":562,"../fielddef":564,"../mark":571,"../stack":576,"../util":582,"./axis/parse":484,"./data/parse":504,"./layoutsize/assemble":511,"./layoutsize/parse":512,"./mark/init":520,"./mark/mark":522,"./model":530,"./repeater":532,"./selection/selection":543}],555:[function(e,t,n){"use strict";function a(e){return!!e.type}function i(e){return s({},e,{encoding:c.reduce(e.encoding,function(e,t,a){return-1<_.indexOf(a)?e[a]=t:m.warn(m.message.incompatibleChannel(a,n.BOXPLOT)),e},{})})}function o(e){var t=e.mark,i=e.encoding,o=d(e,["mark","encoding"]);if(f.isFieldDef(i.x)&&f.isContinuous(i.x)){if(f.isFieldDef(i.y)&&f.isContinuous(i.y)){if(i.x.aggregate===void 0&&i.y.aggregate===n.BOXPLOT)return"vertical";if(void 0===i.y.aggregate&&i.x.aggregate===n.BOXPLOT)return"horizontal";if(i.x.aggregate===n.BOXPLOT&&i.y.aggregate===n.BOXPLOT)throw new Error("Both x and y cannot have aggregate");else return a(t)&&t.orient?t.orient:"vertical"}return"horizontal"}if(f.isFieldDef(i.y)&&f.isContinuous(i.y))return"vertical";throw new Error("Need a valid continuous axis for boxplots")}function r(e,t){var a=e.mark,i=e.encoding,o=d(e,["mark","encoding"]),r,l;if("vertical"===t?(l="y",r=i.y):(l="x",r=i.x),r&&r.aggregate){var s=r.aggregate,p=d(r,["aggregate"]);s!==n.BOXPLOT&&m.warn("Continuous axis should not have customized aggregation function "+s),r=p}return{continuousAxisChannelDef:r,continuousAxis:l}}function l(e,t,a){var i=r(e,t),o=i.continuousAxisChannelDef,l=i.continuousAxis,s=e.encoding,d=void 0===a,p=[{op:"q1",field:o.field,as:"lower_box_"+o.field},{op:"q3",field:o.field,as:"upper_box_"+o.field},{op:"median",field:o.field,as:"mid_box_"+o.field}],c=[];p.push({op:"min",field:o.field,as:(d?"lower_whisker_":"min_")+o.field}),p.push({op:"max",field:o.field,as:(d?"upper_whisker_":"max_")+o.field}),d||(c=[{calculate:"datum.upper_box_"+o.field+" - datum.lower_box_"+o.field,as:"iqr_"+o.field},{calculate:"min(datum.upper_box_"+o.field+" + datum.iqr_"+o.field+" * "+a+", datum.max_"+o.field+")",as:"upper_whisker_"+o.field},{calculate:"max(datum.lower_box_"+o.field+" - datum.iqr_"+o.field+" * "+a+", datum.min_"+o.field+")",as:"lower_whisker_"+o.field}]);var m=[],g=[],_=[],y={};return u.forEach(s,function(e,t){if(t!==l)if(f.isFieldDef(e)){if(e.aggregate&&e.aggregate!==n.BOXPLOT)p.push({op:e.aggregate,field:e.field,as:f.field(e)});else if(void 0===e.aggregate){var a=f.field(e),i=e.bin;if(i){var o=e.field;g.push({bin:i,field:o,as:a})}else if(e.timeUnit){var r=e.timeUnit,d=e.field;_.push({timeUnit:r,field:d,as:a})}m.push(a)}y[t]={field:f.field(e),type:e.type}}else y[t]=s[t]}),{transform:[].concat(g,_,[{aggregate:p,groupby:m}],c),continuousAxisChannelDef:o,continuousAxis:l,encodingWithoutContinuousAxis:y}}var s=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},d=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0});var p=e("vega-util"),c=e("../encoding"),u=e("./../encoding"),f=e("./../fielddef"),m=e("./../log"),g=e("./common");n.BOXPLOT="box-plot",n.isBoxPlotDef=a,n.BOXPLOT_STYLES=["boxWhisker","box","boxMid"],n.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX={box:["size","color"],boxWhisker:["color"],boxMid:["color"]};var _=["x","y","color","detail","opacity","size"];n.filterUnsupportedChannels=i,n.normalizeBoxPlot=function(e,t){e=i(e);var n=e.mark,r=e.encoding,c=e.selection,u=d(e,["mark","encoding","selection"]),f;a(n)&&n.extent&&p.isNumber(n.extent)&&(f=n.extent);var m=o(e),_=l(e,m,f),y=_.transform,h=_.continuousAxisChannelDef,b=_.continuousAxis,x=_.encodingWithoutContinuousAxis,v=x.color,S=x.size,T=d(x,["color","size"]),k=S?{size:S}:g.getMarkSpecificConfigMixins(t.box,"size"),E={};return h.scale&&(E.scale=h.scale),h.axis&&(E.axis=h.axis),s({},u,{transform:y,layer:[{mark:{type:"rule",style:"boxWhisker"},encoding:s((N={},N[b]=s({field:"lower_whisker_"+h.field,type:h.type},E),N[b+"2"]={field:"lower_box_"+h.field,type:h.type},N),T,g.getMarkSpecificConfigMixins(t.boxWhisker,"color"))},{mark:{type:"rule",style:"boxWhisker"},encoding:s((A={},A[b]={field:"upper_box_"+h.field,type:h.type},A[b+"2"]={field:"upper_whisker_"+h.field,type:h.type},A),T,g.getMarkSpecificConfigMixins(t.boxWhisker,"color"))},s({},c?{selection:c}:{},{mark:{type:"bar",style:"box"},encoding:s((w={},w[b]={field:"lower_box_"+h.field,type:h.type},w[b+"2"]={field:"upper_box_"+h.field,type:h.type},w),x,x.color?{}:g.getMarkSpecificConfigMixins(t.box,"color"),k)}),{mark:{type:"tick",style:"boxMid"},encoding:s((C={},C[b]={field:"mid_box_"+h.field,type:h.type},C),T,g.getMarkSpecificConfigMixins(t.boxMid,"color"),k)}]});var N,A,w,C}},{"../encoding":562,"./../encoding":562,"./../fielddef":564,"./../log":569,"./common":556,"vega-util":591}],556:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getMarkSpecificConfigMixins=function(e,t){var n=e[t];return n===void 0?{}:(a={},a[t]={value:n},a);var a}},{}],557:[function(e,t,n){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},i=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0}),n.ERRORBAR="error-bar",n.normalizeErrorBar=function(e){var t=e.mark,n=e.selection,o=e.encoding,r=i(e,["mark","selection","encoding"]),l=o.size,s=i(o,["size"]),d=o.x2,p=o.y2,c=i(o,["x2","y2"]),u=c.x,f=c.y,m=i(c,["x","y"]);if(!o.x2&&!o.y2)throw new Error("Neither x2 or y2 provided");return a({},r,{layer:[{mark:"rule",encoding:s},{mark:"tick",encoding:c},{mark:"tick",encoding:o.x2?a({x:o.x2,y:o.y},m):a({x:o.x,y:o.y2},m)}]})}},{}],558:[function(e,t,n){"use strict";function a(e,t){s[e]=t}var i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./../mark"),r=e("./boxplot"),l=e("./errorbar"),s={};n.add=a,n.remove=function(e){delete s[e]},n.COMPOSITE_MARK_STYLES=r.BOXPLOT_STYLES,n.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=i({},r.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX),a(r.BOXPLOT,r.normalizeBoxPlot),a(l.ERRORBAR,l.normalizeErrorBar),n.normalize=function(e,t){var n=o.isMarkDef(e.mark)?e.mark.type:e.mark,a=s[n];if(a)return a(e,t);throw new Error("Unregistered composite mark "+n)}},{"./../mark":571,"./boxplot":555,"./errorbar":557}],559:[function(e,t,n){"use strict";function a(e,t,n){var a="title"===t?f.extractTitleConfig(e.title).mark:e[t];"view"===t&&(n="cell");var o=i({},a,e.style[t]);0<m.keys(o).length&&(e.style[n||t]=o),delete e[t]}var i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./compositemark"),r=e("./compositemark/index"),l=e("./guide"),s=e("./legend"),d=e("./mark"),p=e("./mark"),c=e("./scale"),u=e("./selection"),f=e("./title"),m=e("./util");n.defaultViewConfig={width:200,height:200},n.defaultConfig={padding:5,timeFormat:"%b %d, %Y",countTitle:"Number of Records",invalidValues:"filter",view:n.defaultViewConfig,mark:p.defaultMarkConfig,area:{},bar:p.defaultBarConfig,circle:{},line:{},point:{},rect:{},rule:{color:"black"},square:{},text:{color:"black"},tick:p.defaultTickConfig,box:{size:14},boxWhisker:{},boxMid:{color:"white"},scale:c.defaultScaleConfig,axis:{},axisX:{},axisY:{minExtent:30},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:s.defaultLegendConfig,selection:u.defaultConfig,style:{},title:{}},n.initConfig=function(e){return m.mergeDeep(m.duplicate(n.defaultConfig),e)};var g=["view"].concat(d.PRIMITIVE_MARKS,o.COMPOSITE_MARK_STYLES),_=["padding","numberFormat","timeFormat","countTitle","stack","scale","selection","invalidValues","overlay"],y=i({view:["width","height"]},d.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX,r.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX);n.stripAndRedirectConfig=function(e){e=m.duplicate(e);for(var t=0,n=_,i;t<n.length;t++)i=n[t],delete e[i];if(e.axis)for(var o=0,r=l.VL_ONLY_GUIDE_CONFIG,i;o<r.length;o++)i=r[o],delete e.axis[i];if(e.legend)for(var s=0,p=l.VL_ONLY_GUIDE_CONFIG,i;s<p.length;s++)i=p[s],delete e.legend[i];if(e.mark)for(var c=0,u=d.VL_ONLY_MARK_CONFIG_PROPERTIES,i;c<u.length;c++)i=u[c],delete e.mark[i];for(var f=0,h=g,b;f<h.length;f++){b=h[f];for(var x=0,v=d.VL_ONLY_MARK_CONFIG_PROPERTIES,i;x<v.length;x++)i=v[x],delete e[b][i];var S=y[b];if(S)for(var T=0,k=S,i;T<k.length;T++)i=k[T],delete e[b][i];a(e,b)}for(var i in a(e,"title","group-title"),e)m.isObject(e[i])&&0===m.keys(e[i]).length&&delete e[i];return 0<m.keys(e).length?e:void 0}},{"./compositemark":558,"./compositemark/index":558,"./guide":566,"./legend":568,"./mark":571,"./scale":572,"./selection":573,"./title":578,"./util":582}],560:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isUrlData=function(e){return!!e.url},n.isInlineData=function(e){return!!e.values},n.isNamedData=function(e){return!!e.name},n.MAIN="main",n.RAW="raw"},{}],561:[function(e,t,n){"use strict";function a(e){if(l.isNumber(e))return 4<e&&r.warn(r.message.invalidTimeUnit("quarter",e)),e-1+"";throw new Error(r.message.invalidTimeUnit("quarter",e))}function i(e){if(l.isNumber(e))return e-1+"";var t=e.toLowerCase(),a=n.MONTHS.indexOf(t);if(-1!==a)return a+"";var i=t.substr(0,3),o=n.SHORT_MONTHS.indexOf(i);if(-1!==o)return o+"";throw new Error(r.message.invalidTimeUnit("month",e))}function o(e){if(l.isNumber(e))return e%7+"";var t=e.toLowerCase(),a=n.DAYS.indexOf(t);if(-1!==a)return a+"";var i=t.substr(0,3),o=n.SHORT_DAYS.indexOf(i);if(-1!==o)return o+"";throw new Error(r.message.invalidTimeUnit("day",e))}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./log"),l=e("./util");n.isDateTime=function(e){return!!e&&(!!e.year||!!e.quarter||!!e.month||!!e.date||!!e.day||!!e.hours||!!e.minutes||!!e.seconds||!!e.milliseconds)},n.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],n.SHORT_MONTHS=n.MONTHS.map(function(e){return e.substr(0,3)}),n.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n.SHORT_DAYS=n.DAYS.map(function(e){return e.substr(0,3)}),n.dateTimeExpr=function(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day&&1<l.keys(e).length&&(r.warn(r.message.droppedDay(e)),e=l.duplicate(e),delete e.day),void 0===e.year?void 0===e.day?n.push(0):n.push(2006):n.push(e.year),void 0!==e.month){var s=t?i(e.month):e.month;n.push(s)}else if(void 0!==e.quarter){var d=t?a(e.quarter):e.quarter;n.push(d+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var p=t?o(e.day):e.day;n.push(p+"+1")}else n.push(1);for(var c=0,u=["hours","minutes","seconds","milliseconds"],f;c<u.length;c++)f=u[c],void 0===e[f]?n.push(0):n.push(e[f]);return e.utc?"utc("+n.join(", ")+")":"datetime("+n.join(", ")+")"}},{"./log":569,"./util":582}],562:[function(e,t,n){"use strict";function a(e,t){var n=e&&e[t];return!!n&&(l.isArray(n)?l.some(n,function(e){return!!e.field}):o.isFieldDef(n)||o.hasConditionalFieldDef(n))}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./channel"),o=e("./fielddef"),r=e("./log"),l=e("./util");n.channelHasField=a,n.isAggregate=function(e){return l.some(i.CHANNELS,function(t){if(a(e,t)){var n=e[t];if(l.isArray(n))return l.some(n,function(e){return!!e.aggregate});var i=o.getFieldDef(n);return i&&!!i.aggregate}return!1})},n.normalizeEncoding=function(e,t){return l.keys(e).reduce(function(n,a){if(!i.supportMark(a,t))return r.warn(r.message.incompatibleChannel(a,t)),n;if("size"===a&&"line"===t){var s=o.getFieldDef(e[a]);if(s&&s.aggregate)return r.warn(r.message.incompatibleChannel(a,t,"when the field is aggregated.")),n}if("detail"===a||"order"===a){var d=e[a];d&&(n[a]=(l.isArray(d)?d:[d]).reduce(function(e,t){return o.isFieldDef(t)?e.push(o.normalizeFieldDef(t,a)):r.warn(r.message.emptyFieldDef(t,a)),e},[]))}else{var d=e[a];if(!o.isFieldDef(d)&&!o.isValueDef(d)&&!o.isConditionalDef(d))return r.warn(r.message.emptyFieldDef(d,a)),n;n[a]=o.normalize(d,a)}return n},{})},n.isRanged=function(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)},n.fieldDefs=function(e){var t=[];return i.CHANNELS.forEach(function(n){if(a(e,n)){var i=e[n];(l.isArray(i)?i:[i]).forEach(function(e){o.isFieldDef(e)?t.push(e):o.hasConditionalFieldDef(e)&&t.push(e.condition)})}}),t},n.forEach=function(e,t,n){if(e)for(var a=function(a){l.isArray(e[a])?e[a].forEach(function(e){t.call(n,e,a)}):t.call(n,e[a],a)},i=0,o=l.keys(e),r;i<o.length;i++)r=o[i],a(r)},n.reduce=function(e,t,n,a){return e?l.keys(e).reduce(function(n,i){var o=e[i];return l.isArray(o)?o.reduce(function(e,n){return t.call(a,e,n,i)},n):t.call(a,n,o,i)},n):n}},{"./channel":479,"./fielddef":564,"./log":569,"./util":582}],563:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},{}],564:[function(e,t,n){"use strict";function a(e){return!!e&&!!e.condition&&!E.isArray(e.condition)&&i(e.condition)}function i(e){return!!e&&(!!e.field||"count"===e.aggregate)}function o(e){return e&&"value"in e&&e.value!==void 0}function r(e,t){void 0===t&&(t={});var n=e.field,a=t.prefix,i=t.suffix;if(d(e))n="count_*";else{var o;t.nofn||(e.bin?(o=x.binToString(e.bin),i=t.binSuffix||""):e.aggregate?o=(t.aggregate||e.aggregate)+"":e.timeUnit&&(o=e.timeUnit+"")),o&&(n=o+"_"+n)}return i&&(n=n+"_"+i),a&&(n=a+"_"+n),t.expr&&(n=""+t.expr+E.accessPath(n)),n}function l(e){switch(e.type){case"nominal":case"ordinal":return!0;case"quantitative":return!!e.bin;case"temporal":return!1;}throw new Error(S.message.invalidFieldType(e.type))}function s(e){return!l(e)}function d(e){return"count"===e.aggregate}function p(e,t){var n=e.field,a=e.bin,i=e.timeUnit,o=e.aggregate;if("count"===o)return t.countTitle;if(a)return n+" (binned)";if(i){var r=T.getTimeUnitParts(i).join("-");return n+" ("+r+")"}return o?E.titlecase(o)+" of "+n:n}function c(e){var t=e.aggregate||e.timeUnit||e.bin&&"bin";return t?t.toUpperCase()+"("+e.field+")":e.field}function u(e){N=e}function f(e,t){if(e.timeUnit)return"temporal";if(e.bin)return"quantitative";switch(v.rangeType(t)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative";}}function m(e,t){if(e.aggregate&&!b.isAggregateOp(e.aggregate)){var n=e.aggregate,a=h(e,["aggregate"]);S.warn(S.message.invalidAggregate(e.aggregate)),e=a}if(e.timeUnit&&(e=y({},e,{timeUnit:T.normalizeTimeUnit(e.timeUnit)})),e.bin&&(e=y({},e,{bin:g(e.bin,t)})),e.type){var i=k.getFullName(e.type);e.type!==i&&(e=y({},e,{type:i})),"quantitative"!==e.type&&b.isCountingAggregateOp(e.aggregate)&&(S.warn(S.message.invalidFieldTypeForCountAggregate(e.type,e.aggregate)),e=y({},e,{type:"quantitative"}))}else{var o=f(e,t);S.warn(S.message.emptyOrInvalidFieldType(e.type,t,o)),e=y({},e,{type:o})}var r=_(e,t),l=r.compatible,s=r.warning;return l||S.warn(s),e}function g(e,t){return E.isBoolean(e)?{maxbins:x.autoMaxBins(t)}:e.maxbins||e.step?e:y({},e,{maxbins:x.autoMaxBins(t)})}function _(e,t){switch(t){case"row":case"column":return s(e)&&!e.timeUnit?{compatible:!1,warning:S.message.facetChannelShouldBeDiscrete(t)}:A;case"x":case"y":case"color":case"text":case"detail":case"tooltip":return A;case"opacity":case"size":case"x2":case"y2":return l(e)&&!e.bin?{compatible:!1,warning:"Channel "+t+" should not be used with discrete field."}:A;case"shape":return"nominal"===e.type?A:{compatible:!1,warning:"Shape channel should be used with nominal data only"};case"order":return"nominal"===e.type?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:A;}throw new Error("channelCompatability not implemented for channel "+t)}var y=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},h=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0});var b=e("./aggregate"),x=e("./bin"),v=e("./channel"),S=e("./log"),T=e("./timeunit"),k=e("./type"),E=e("./util");n.isRepeatRef=function(e){return e&&!E.isString(e)&&"repeat"in e},n.isConditionalDef=function(e){return!!e&&!!e.condition},n.hasConditionalFieldDef=a,n.hasConditionalValueDef=function(e){return!!e&&!!e.condition&&(E.isArray(e.condition)||o(e.condition))},n.isFieldDef=i,n.isStringFieldDef=function(e){return i(e)&&E.isString(e.field)},n.isValueDef=o,n.isScaleFieldDef=function(e){return!!e&&(!!e.scale||!!e.sort)},n.field=r,n.isDiscrete=l,n.isContinuous=s,n.isCount=d,n.verbalTitleFormatter=p,n.functionalTitleFormatter=c,n.defaultTitleFormatter=function(e,t){switch(t.fieldTitle){case"plain":return e.field;case"functional":return c(e,t);default:return p(e,t);}};var N=n.defaultTitleFormatter;n.setTitleFormatter=u,n.resetTitleFormatter=function(){u(n.defaultTitleFormatter)},n.title=function(e,t){return N(e,t)},n.defaultType=f,n.getFieldDef=function(e){if(i(e))return e;return a(e)?e.condition:void 0},n.normalize=function(e,t){if(E.isString(e)||E.isNumber(e)||E.isBoolean(e)){var n=E.isString(e)?"string":E.isNumber(e)?"number":"boolean";return S.warn(S.message.primitiveChannelDef(t,n,e)),{value:e}}return i(e)?m(e,t):a(e)?y({},e,{condition:m(e.condition,t)}):e},n.normalizeFieldDef=m,n.normalizeBin=g;var A={compatible:!0};n.channelCompatibility=_,n.isNumberFieldDef=function(e){return"quantitative"===e.type||!!e.bin},n.isTimeFieldDef=function(e){return"temporal"===e.type||!!e.timeUnit}},{"./aggregate":476,"./bin":478,"./channel":479,"./log":569,"./timeunit":577,"./type":581,"./util":582}],565:[function(e,t,n){"use strict";function a(e){return e&&e.selection}function i(e){return e&&!!e.field&&e.equal!==void 0}function o(e){return e&&e.field&&g.isArray(e.range)&&2===e.range.length}function r(e){return e&&!!e.field&&(g.isArray(e.oneOf)||g.isArray(e.in))}function l(e){return r(e)||i(e)||o(e)}function s(e,t){void 0===t&&(t=!0);var n=e.timeUnit?"time("+m.fieldExpr(e.timeUnit,e.field)+")":f.field(e,{expr:"datum"});if(i(e))return n+"==="+d(e.equal,e.timeUnit);if(r(e)){var a=e.oneOf||e["in"];return"indexof(["+a.map(function(t){return d(t,e.timeUnit)}).join(",")+"], "+n+") !== -1"}if(o(e)){var l=e.range[0],s=e.range[1];if(null!==l&&null!==s&&t)return"inrange("+n+", ["+d(l,e.timeUnit)+", "+d(s,e.timeUnit)+"])";var p=[];return null!==l&&p.push(n+" >= "+d(l,e.timeUnit)),null!==s&&p.push(n+" <= "+d(s,e.timeUnit)),0<p.length?p.join(" && "):"true"}throw new Error("Invalid field filter: "+JSON.stringify(e))}function d(e,t){if(u.isDateTime(e)){var n=u.dateTimeExpr(e,!0);return"time("+n+")"}if(m.isLocalSingleTimeUnit(t)){var a={};a[t]=e;var n=u.dateTimeExpr(a,!0);return"time("+n+")"}return m.isUtcSingleTimeUnit(t)?d(e,m.getLocalTimeUnit(t)):JSON.stringify(e)}var p=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./compile/selection/selection"),u=e("./datetime"),f=e("./fielddef"),m=e("./timeunit"),g=e("./util");n.isSelectionFilter=a,n.isEqualFilter=i,n.isRangeFilter=o,n.isOneOfFilter=r,n.isFieldFilter=l,n.expression=function(e,t,n){return g.logicalExpr(t,function(t){return g.isString(t)?t:a(t)?c.predicate(e,t.selection,n):s(t)})},n.fieldFilterExpression=s,n.normalizeFilter=function(e){return l(e)&&e.timeUnit?p({},e,{timeUnit:m.normalizeTimeUnit(e.timeUnit)}):e}},{"./compile/selection/selection":543,"./datetime":561,"./fielddef":564,"./timeunit":577,"./util":582}],566:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VL_ONLY_GUIDE_CONFIG=["shortTimeLabels"]},{}],567:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.axis=e("./axis"),n.aggregate=e("./aggregate"),n.bin=e("./bin"),n.channel=e("./channel"),n.compositeMark=e("./compositemark");var a=e("./compile/compile");n.compile=a.compile,n.config=e("./config"),n.data=e("./data"),n.datetime=e("./datetime"),n.encoding=e("./encoding"),n.facet=e("./facet"),n.fieldDef=e("./fielddef"),n.legend=e("./legend"),n.mark=e("./mark"),n.scale=e("./scale"),n.sort=e("./sort"),n.spec=e("./spec"),n.stack=e("./stack"),n.timeUnit=e("./timeunit"),n.transform=e("./transform"),n.type=e("./type"),n.util=e("./util"),n.validate=e("./validate"),n.version=e("../package.json").version},{"../package.json":475,"./aggregate":476,"./axis":477,"./bin":478,"./channel":479,"./compile/compile":489,"./compositemark":558,"./config":559,"./data":560,"./datetime":561,"./encoding":562,"./facet":563,"./fielddef":564,"./legend":568,"./mark":571,"./scale":572,"./sort":574,"./spec":575,"./stack":576,"./timeunit":577,"./transform":580,"./type":581,"./util":582,"./validate":583}],568:[function(e,t,n){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./util");n.defaultLegendConfig={};var o={entryPadding:1,format:1,offset:1,orient:1,padding:1,tickCount:1,title:1,type:1,values:1,zindex:1},r=a({},o,{opacity:1,shape:1,stroke:1,fill:1,size:1,encode:1});n.LEGEND_PROPERTIES=i.flagKeys(o),n.VG_LEGEND_PROPERTIES=i.flagKeys(r)},{"./util":582}],569:[function(e,t,n){"use strict";function a(){return r=o,r}Object.defineProperty(n,"__esModule",{value:!0});var i=e("vega-util"),o=i.logger(i.Warn),r=o,l=function(){function e(){this.warns=[],this.infos=[],this.debugs=[]}return e.prototype.level=function(){return this},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.warns).push.apply(n,e),this;var n},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.infos).push.apply(n,e),this;var n},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.debugs).push.apply(n,e),this;var n},e}();n.LocalLogger=l,n.wrap=function(e){return function(){var t=r=new l;e(t),a()}},n.set=function(e){return r=e,r},n.reset=a,n.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.warn.apply(r,arguments)},n.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.info.apply(r,arguments)},n.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.debug.apply(r,arguments)};var s;(function(e){e.INVALID_SPEC="Invalid spec",e.FIT_NON_SINGLE="Autosize \"fit\" only works for single views and layered views.",e.CANNOT_FIX_RANGE_STEP_WITH_FIT="Cannot use a fixed value of \"rangeStep\" when \"autosize\" is \"fit\".",e.cannotProjectOnChannelWithoutField=function(e){return"Cannot project a selection on encoding channel \""+e+"\", which has no field."},e.nearestNotSupportForContinuous=function(e){return"The \"nearest\" transform is not supported for "+e+" marks."},e.selectionNotFound=function(e){return"Cannot find a selection named \""+e+"\""},e.SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",e.noSuchRepeatedValue=function(e){return"Unknown repeated value \""+e+"\"."},e.CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views.",e.REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views.",e.cannotSetTitleAnchor=function(e){return"Cannot set title \"anchor\" for a "+e+" spec"},e.unrecognizedParse=function(e){return"Unrecognized parse \""+e+"\"."},e.differentParse=function(e,t,n){return"An ancestor parsed field \""+e+"\" as "+n+" but a child wants to parse the field as "+t+"."},e.invalidTransformIgnored=function(e){return"Ignoring an invalid transform: "+JSON.stringify(e)+"."},e.NO_FIELDS_NEEDS_AS="If \"from.fields\" is not specified, \"as\" has to be a string that specifies the key to be used for the the data from the secondary source.",e.primitiveChannelDef=function(e,t,n){return"Channel "+e+" is a "+t+". Converted to {value: "+n+"}."},e.invalidFieldType=function(e){return"Invalid field type \""+e+"\""},e.invalidFieldTypeForCountAggregate=function(e,t){return"Invalid field type \""+e+"\" for aggregate: \""+t+"\", using \"quantitative\" instead."},e.invalidAggregate=function(e){return"Invalid aggregation operator \""+e+"\""},e.emptyOrInvalidFieldType=function(e,t,n){return"Invalid field type \""+e+"\" for channel \""+t+"\", using \""+n+"\" instead."},e.emptyFieldDef=function(e,t){return"Dropping "+JSON.stringify(e)+" from channel \""+t+"\" since it does not contain data field or value."},e.incompatibleChannel=function(e,t,n){return e+" dropped as it is incompatible with \""+t+"\""+(n?" when "+n:"")+"."},e.facetChannelShouldBeDiscrete=function(e){return e+" encoding should be discrete (ordinal / nominal / binned)."},e.discreteChannelCannotEncode=function(e,t){return"Using discrete channel \""+e+"\" to encode \""+t+"\" field can be misleading as it does not encode "+("ordinal"===t?"order":"magnitude")+"."},e.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",e.unclearOrientContinuous=function(e){return"Cannot clearly determine orientation for \""+e+"\" since both x and y channel encode continous fields. In this case, we use vertical by default"},e.unclearOrientDiscreteOrEmpty=function(e){return"Cannot clearly determine orientation for \""+e+"\" since both x and y channel encode discrete or empty fields."},e.orientOverridden=function(e,t){return"Specified orient \""+e+"\" overridden with \""+t+"\""},e.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",e.cannotUseScalePropertyWithNonColor=function(e){return"Cannot use the scale property \""+e+"\" with non-color channel."},e.unaggregateDomainHasNoEffectForRawField=function(e){return"Using unaggregated domain with raw field has no effect ("+JSON.stringify(e)+")."},e.unaggregateDomainWithNonSharedDomainOp=function(e){return"Unaggregated domain not applicable for \""+e+"\" since it produces values outside the origin domain of the source data."},e.unaggregatedDomainWithLogScale=function(e){return"Unaggregated domain is currently unsupported for log scale ("+JSON.stringify(e)+")."},e.cannotUseSizeFieldWithBandSize=function(e){return"Using size field when "+e+"-channel has a band scale is not supported."},e.cannotApplySizeToNonOrientedMark=function(e){return"Cannot apply size to non-oriented mark \""+e+"\"."},e.rangeStepDropped=function(e){return"rangeStep for \""+e+"\" is dropped as top-level "+("x"===e?"width":"height")+" is provided."},e.scaleTypeNotWorkWithChannel=function(e,t,n){return"Channel \""+e+"\" does not work with \""+t+"\" scale. We are using \""+n+"\" scale instead."},e.scaleTypeNotWorkWithFieldDef=function(e,t){return"FieldDef does not work with \""+e+"\" scale. We are using \""+t+"\" scale instead."},e.scalePropertyNotWorkWithScaleType=function(e,t,n){return n+"-scale's \""+t+"\" is dropped as it does not work with "+e+" scale."},e.scaleTypeNotWorkWithMark=function(e,t){return"Scale type \""+t+"\" does not work with mark \""+e+"\"."},e.mergeConflictingProperty=function(e,t,n,a){return"Conflicting "+t+" property \""+e+"\" (\""+n+"\" and \""+a+"\").  Using \""+n+"\"."},e.independentScaleMeansIndependentGuide=function(e){return"Setting the scale to be independent for \""+e+"\" means we also have to set the guide (axis or legend) to be independent."},e.conflictedDomain=function(e){return"Cannot set "+e+"-scale's \"domain\" as it is binned. Please use \"bin\"'s \"extent\" instead."},e.domainSortDropped=function(e){return"Dropping sort property \""+JSON.stringify(e)+"\" as unioned domains only support boolean or op 'count'."},e.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",e.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",e.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",e.cannotStackRangedMark=function(e){return"Cannot stack \""+e+"\" if there is already \""+e+"2\""},e.cannotStackNonLinearScale=function(e){return"Cannot stack non-linear scale ("+e+")"},e.stackNonSummativeAggregate=function(e){return"Stacking is applied even though the aggregate function is non-summative (\""+e+"\")"},e.invalidTimeUnit=function(e,t){return"Invalid "+e+": \""+t+"\""},e.dayReplacedWithDate=function(e){return"Time unit \""+e+"\" is not supported. We are replacing it with "+e.replace("day","date")+"."},e.droppedDay=function(e){return"Dropping day from datetime "+JSON.stringify(e)+" as day cannot be combined with other units."}})(s=n.message||(n.message={}))},{"vega-util":591}],570:[function(e,t,n){"use strict";function a(e){return!!e.or}function i(e){return!!e.and}function o(e){return!!e.not}function r(e,t){if(o(e))r(e.not,t);else if(i(e))for(var n=0,l=e.and,s;n<l.length;n++)s=l[n],r(s,t);else if(a(e))for(var d=0,p=e.or,s;d<p.length;d++)s=p[d],r(s,t);else t(e)}function l(e,t){return o(e)?{not:l(e.not,t)}:i(e)?{and:e.and.map(function(e){return l(e,t)})}:a(e)?{or:e.or.map(function(e){return l(e,t)})}:t(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.isLogicalOr=a,n.isLogicalAnd=i,n.isLogicalNot=o,n.forEachLeave=r,n.normalizeLogicalOperand=l},{}],571:[function(e,t,n){"use strict";function a(e){return e.type}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./util"),o;(function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.POINT="point",e.RECT="rect",e.RULE="rule",e.TEXT="text",e.TICK="tick",e.CIRCLE="circle",e.SQUARE="square"})(o=n.Mark||(n.Mark={})),n.AREA=o.AREA,n.BAR=o.BAR,n.LINE=o.LINE,n.POINT=o.POINT,n.TEXT=o.TEXT,n.TICK=o.TICK,n.RECT=o.RECT,n.RULE=o.RULE,n.CIRCLE=o.CIRCLE,n.SQUARE=o.SQUARE;var r={area:1,bar:1,line:1,point:1,text:1,tick:1,rect:1,rule:1,circle:1,square:1};n.isMark=function(e){return!!r[e]},n.PRIMITIVE_MARKS=i.flagKeys(r),n.isMarkDef=a;var l=i.toSet(n.PRIMITIVE_MARKS);n.isPrimitiveMark=function(e){var t=a(e)?e.type:e;return t in l},n.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity"],n.FILL_CONFIG=["fill","fillOpacity"],n.FILL_STROKE_CONFIG=[].concat(n.STROKE_CONFIG,n.FILL_CONFIG),n.VL_ONLY_MARK_CONFIG_PROPERTIES=["filled","color"],n.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={bar:["binSpacing","continuousBandSize","discreteBandSize"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},n.defaultMarkConfig={color:"#4c78a8"},n.defaultBarConfig={binSpacing:1,continuousBandSize:5},n.defaultTickConfig={thickness:1}},{"./util":582}],572:[function(e,t,n){"use strict";function a(e){return e in f}function i(e){return e in u}var o=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./channel"),l=e("./log"),s=e("./util"),d;(function(e){e.LINEAR="linear",e.BIN_LINEAR="bin-linear",e.LOG="log",e.POW="pow",e.SQRT="sqrt",e.TIME="time",e.UTC="utc",e.SEQUENTIAL="sequential",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.ORDINAL="ordinal",e.BIN_ORDINAL="bin-ordinal",e.POINT="point",e.BAND="band"})(d=n.ScaleType||(n.ScaleType={}));var p={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position"};n.SCALE_TYPES=s.keys(p),n.scaleCompatible=function(e,t){var n=p[e],a=p[t];return n===a||"ordinal-position"===n&&"time"===a||"ordinal-position"===a&&"time"===n};var c={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0};n.scaleTypePrecedence=function(e){return c[e]},n.CONTINUOUS_TO_CONTINUOUS_SCALES=["linear","bin-linear","log","pow","sqrt","time","utc"];var u=s.toSet(n.CONTINUOUS_TO_CONTINUOUS_SCALES);n.CONTINUOUS_DOMAIN_SCALES=n.CONTINUOUS_TO_CONTINUOUS_SCALES.concat(["sequential"]);var f=s.toSet(n.CONTINUOUS_DOMAIN_SCALES);n.DISCRETE_DOMAIN_SCALES=["ordinal","bin-ordinal","point","band"];var m=s.toSet(n.DISCRETE_DOMAIN_SCALES),g=s.toSet(["bin-linear","bin-ordinal"]);n.TIME_SCALE_TYPES=["time","utc"],n.hasDiscreteDomain=function(e){return e in m},n.isBinScale=function(e){return e in g},n.hasContinuousDomain=a,n.isContinuousToContinuous=i,n.defaultScaleConfig={textXRangeStep:90,rangeStep:21,pointPadding:0.5,bandPaddingInner:0.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:0.3,maxOpacity:0.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4},n.isExtendedScheme=function(e){return e&&!!e.name},n.isSelectionDomain=function(e){return e&&e.selection};var _={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1};n.SCALE_PROPERTIES=s.flagKeys(_);var y=_.type,h=_.domain,b=_.range,x=_.rangeStep,v=_.scheme,S=o(_,["type","domain","range","rangeStep","scheme"]);n.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=s.flagKeys(S),n.scaleTypeSupportProperty=function(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return s.contains(["sequential","ordinal","bin-ordinal","quantile","quantize"],e);case"interpolate":return s.contains(["linear","bin-linear","pow","log","sqrt","utc","time"],e);case"round":return i(e)||"band"===e||"point"===e;case"padding":return i(e)||s.contains(["point","band"],e);case"paddingOuter":case"rangeStep":return s.contains(["point","band"],e);case"paddingInner":return"band"===e;case"clamp":return i(e)||"sequential"===e;case"nice":return i(e)||"sequential"===e||"quantize"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"zero":return a(e)&&!s.contains(["log","time","utc","bin-linear","threshold","quantile"],e);}throw new Error("Invalid scale property "+t+".")},n.channelScalePropertyIncompatability=function(e,t){switch(t){case"interpolate":case"scheme":return"color"===e?void 0:l.message.cannotUseScalePropertyWithNonColor(e);case"type":case"domain":case"range":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return;}throw new Error("Invalid scale property \""+t+"\".")},n.channelSupportScaleType=function(e,t){return e===r.Channel.X||e===r.Channel.Y||e===r.Channel.SIZE||e===r.Channel.OPACITY?i(t)||s.contains(["band","point"],t):e===r.Channel.COLOR?"band"!==t:!(e!==r.Channel.SHAPE)&&"ordinal"===t}},{"./channel":479,"./log":569,"./util":582}],573:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SELECTION_ID="_vgsid_",n.defaultConfig={single:{on:"click",fields:[n.SELECTION_ID],resolve:"global",empty:"all"},multi:{on:"click",fields:[n.SELECTION_ID],toggle:"event.shiftKey",resolve:"global",empty:"all"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:0.125,stroke:"white"},resolve:"global"}}},{}],574:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isSortField=function(e){return!!e&&("count"===e.op||!!e.field)&&!!e.op}},{}],575:[function(e,t,n){"use strict";function a(e){return e.facet!==void 0}function i(e){return!!e.mark}function o(e){return e.layer!==void 0}function r(e){return e.repeat!==void 0}function l(e){return s(e)||d(e)}function s(e){return e.vconcat!==void 0}function d(e){return e.hconcat!==void 0}function p(e,t){if(a(e))return c(e,t);if(o(e))return u(e,t);if(r(e))return f(e,t);if(s(e))return m(e,t);if(d(e))return g(e,t);if(i(e)){var n=A.channelHasField(e.encoding,E.ROW),l=A.channelHasField(e.encoding,E.COLUMN);return n||l?_(e,t):h(e,t)}throw new Error(C.message.INVALID_SPEC)}function c(e,t){var n=e.spec,a=k(e,["spec"]);return T({},a,{spec:p(n,t)})}function u(e,t){var n=e.layer,a=k(e,["layer"]);return T({},a,{layer:n.map(function(e){return o(e)?u(e,t):h(e,t)})})}function f(e,t){var n=e.spec,a=k(e,["spec"]);return T({},a,{spec:p(n,t)})}function m(e,t){var n=e.vconcat,a=k(e,["vconcat"]);return T({},a,{vconcat:n.map(function(e){return p(e,t)})})}function g(e,t){var n=e.hconcat,a=k(e,["hconcat"]);return T({},a,{hconcat:n.map(function(e){return p(e,t)})})}function _(e,t){var n=e.encoding,a=n.row,i=n.column,o=k(n,["row","column"]),r=e.mark,l=e.width,s=e.height,d=e.selection,p=e.encoding,c=k(e,["mark","width","height","selection","encoding"]);return T({},c,{facet:T({},a?{row:a}:{},i?{column:i}:{}),spec:h(T({mark:r},l?{width:l}:{},s?{height:s}:{},{encoding:o},d?{selection:d}:{}),t)})}function y(e){return O.isPrimitiveMark(e.mark)}function h(e,t){if(y(e)){if(A.isRanged(e.encoding))return b(e);var n=t&&t.overlay,a=n&&e.mark===O.AREA&&P.contains(["linepoint","line"],n.area),i=n&&(n.line&&e.mark===O.LINE||"linepoint"===n.area&&e.mark===O.AREA);return i||a?x(e,i,a,t):e}return N.normalize(e,t)}function b(e){var t=A.channelHasField(e.encoding,E.X),n=A.channelHasField(e.encoding,E.Y),a=A.channelHasField(e.encoding,E.X2),i=A.channelHasField(e.encoding,E.Y2);if(a&&!t||i&&!n){var o=P.duplicate(e);return a&&!t&&(o.encoding.x=o.encoding.x2,delete o.encoding.x2),i&&!n&&(o.encoding.y=o.encoding.y2,delete o.encoding.y2),o}return e}function x(e,t,n,a){var i=e.mark,o=e.selection,r=e.encoding,l=k(e,["mark","selection","encoding"]),s=[{mark:i,encoding:r}],d=D.stack(i,r,a?a.stack:void 0),p=r;if(d){var c=d.fieldChannel,u=d.offset;p=T({},r,(f={},f[c]=T({},r[c],u?{stack:u}:{}),f))}return n&&s.push(T({mark:{type:"line",style:"lineOverlay"}},o?{selection:o}:{},{encoding:p})),t&&s.push(T({mark:{type:"point",filled:!0,style:"pointOverlay"}},o?{selection:o}:{},{encoding:p})),T({},l,{layer:s});var f}function v(e,t){return t.forEach(function(t){var n=["field","type","value","timeUnit","bin","aggregate"].reduce(function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e},{}),a=P.hash(n);e[a]=e[a]||t}),e}function S(e,t){if(void 0===t&&(t={}),o(e))e.layer.forEach(function(e){i(e)?v(t,w.fieldDefs(e.encoding)):S(e,t)});else if(a(e))v(t,w.fieldDefs(e.facet)),S(e.spec,t);else if(r(e))S(e.spec,t);else if(l(e)){var n=s(e)?e.vconcat:e.hconcat;n.forEach(function(e){return S(e,t)})}else v(t,w.fieldDefs(e.encoding));return t}var T=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},k=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0});var E=e("./channel"),N=e("./compositemark"),A=e("./encoding"),w=e("./encoding"),C=e("./log"),O=e("./mark"),D=e("./stack"),P=e("./util");n.isFacetSpec=a,n.isUnitSpec=i,n.isLayerSpec=o,n.isRepeatSpec=r,n.isConcatSpec=l,n.isVConcatSpec=s,n.isHConcatSpec=d,n.normalize=p,n.fieldDefs=function(e){return P.vals(S(e))},n.isStacked=function(e,t){return t=t||e.config,!!O.isPrimitiveMark(e.mark)&&null!==D.stack(e.mark,e.encoding,t?t.stack:void 0)}},{"./channel":479,"./compositemark":558,"./encoding":562,"./log":569,"./mark":571,"./stack":576,"./util":582}],576:[function(e,t,n){"use strict";function a(e){return!!f[e]}function i(e){var t=e.x,n=e.y;if(!(s.isFieldDef(t)&&s.isFieldDef(n))){if(s.isFieldDef(t)&&"quantitative"===t.type)return"x";if(s.isFieldDef(n)&&"quantitative"===n.type)return"y"}else if("quantitative"===t.type&&"quantitative"===n.type){if(t.stack)return"x";if(n.stack)return"y";if(!!t.aggregate!=!!n.aggregate)return t.aggregate?"x":"y"}else{if("quantitative"===t.type)return"x";if("quantitative"===n.type)return"y"}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./aggregate"),r=e("./channel"),l=e("./encoding"),s=e("./fielddef"),d=e("./log"),p=e("./mark"),c=e("./scale"),u=e("./util"),f={zero:1,center:1,normalize:1};n.isStackOffset=a,n.STACKABLE_MARKS=[p.BAR,p.AREA,p.RULE,p.POINT,p.CIRCLE,p.SQUARE,p.LINE,p.TEXT,p.TICK],n.STACK_BY_DEFAULT_MARKS=[p.BAR,p.AREA],n.stack=function(e,t,f){var m=p.isMarkDef(e)?e.type:e;if(!u.contains(n.STACKABLE_MARKS,m))return null;var g=i(t);if(!g)return null;var _=t[g],y=s.isStringFieldDef(_)?s.field(_,{}):void 0,h="x"===g?"y":"x",b=t[h],x=s.isStringFieldDef(b)?s.field(b,{}):void 0,v=r.NONPOSITION_CHANNELS.reduce(function(e,n){if(l.channelHasField(t,n)){var a=t[n];(u.isArray(a)?a:[a]).forEach(function(t){var a=s.getFieldDef(t);if(!a.aggregate){var i=s.isStringFieldDef(a)?s.field(a,{}):void 0;i&&(i===x||i===y)||e.push({channel:n,fieldDef:a})}})}return e},[]);if(0===v.length)return null;var S;return(S=void 0===_.stack?u.contains(n.STACK_BY_DEFAULT_MARKS,m)?void 0===f?"zero":f:f:_.stack,!S||!a(S))?null:_.scale&&_.scale.type&&_.scale.type!==c.ScaleType.LINEAR?(d.warn(d.message.cannotStackNonLinearScale(_.scale.type)),null):l.channelHasField(t,g===r.X?r.X2:r.Y2)?(d.warn(d.message.cannotStackRangedMark(g)),null):(_.aggregate&&!u.contains(o.SUM_OPS,_.aggregate)&&d.warn(d.message.stackNonSummativeAggregate(_.aggregate)),{groupbyChannel:b?h:void 0,fieldChannel:g,impute:u.contains(["area","line"],m),stackBy:v,offset:S})}},{"./aggregate":476,"./channel":479,"./encoding":562,"./fielddef":564,"./log":569,"./mark":571,"./scale":572,"./util":582}],577:[function(e,t,n){"use strict";function a(e){return!!m[e]}function i(e,t){var n=_[e],a=t?"setUTC"+n.substr(3):n,i="get"+(t?"UTC":"")+n.substr(3);return{setDateMethod:a,getDateMethod:i}}function o(e,t){var n=e.indexOf(t);return-1<n&&(t!==d.SECONDS||0===n||"i"!==e.charAt(n-1))}var r=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var l=e("./datetime"),s=e("./log"),p=e("./util"),d;(function(e){e.YEAR="year",e.MONTH="month",e.DAY="day",e.DATE="date",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.MILLISECONDS="milliseconds",e.YEARMONTH="yearmonth",e.YEARMONTHDATE="yearmonthdate",e.YEARMONTHDATEHOURS="yearmonthdatehours",e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",e.MONTHDATE="monthdate",e.HOURSMINUTES="hoursminutes",e.HOURSMINUTESSECONDS="hoursminutesseconds",e.MINUTESSECONDS="minutesseconds",e.SECONDSMILLISECONDS="secondsmilliseconds",e.QUARTER="quarter",e.YEARQUARTER="yearquarter",e.QUARTERMONTH="quartermonth",e.YEARQUARTERMONTH="yearquartermonth",e.UTCYEAR="utcyear",e.UTCMONTH="utcmonth",e.UTCDAY="utcday",e.UTCDATE="utcdate",e.UTCHOURS="utchours",e.UTCMINUTES="utcminutes",e.UTCSECONDS="utcseconds",e.UTCMILLISECONDS="utcmilliseconds",e.UTCYEARMONTH="utcyearmonth",e.UTCYEARMONTHDATE="utcyearmonthdate",e.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",e.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",e.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",e.UTCMONTHDATE="utcmonthdate",e.UTCHOURSMINUTES="utchoursminutes",e.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",e.UTCMINUTESSECONDS="utcminutesseconds",e.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",e.UTCQUARTER="utcquarter",e.UTCYEARQUARTER="utcyearquarter",e.UTCQUARTERMONTH="utcquartermonth",e.UTCYEARQUARTERMONTH="utcyearquartermonth"})(d=n.TimeUnit||(n.TimeUnit={}));var c={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};n.TIMEUNIT_PARTS=p.flagKeys(c),n.isLocalSingleTimeUnit=function(e){return!!c[e]};var u={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};n.isUtcSingleTimeUnit=function(e){return!!u[e]};var f={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},m=r({},u,f);n.isUTCTimeUnit=a,n.getLocalTimeUnit=function(e){return e.substr(3)};var g=r({},c,u,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},f);n.TIMEUNITS=p.flagKeys(g),n.isTimeUnit=function(e){return!!g[e]};var _={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null};n.convert=function(e,t){for(var r=a(e),l=r?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0),s=0,p=n.TIMEUNIT_PARTS,c;s<p.length;s++)if(c=p[s],o(e,c))switch(c){case d.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case d.QUARTER:{var u=i("month",r),f=u.getDateMethod,m=u.setDateMethod;l[m](3*E(t[f]()/3));break}default:var g=i(c,r),_=g.getDateMethod,y=g.setDateMethod;l[y](t[_]());}return l},n.getTimeUnitParts=function(e){return n.TIMEUNIT_PARTS.reduce(function(t,n){return o(e,n)?t.concat(n):t},[])},n.containsTimeUnit=o,n.fieldExpr=function(e,t){function i(e){return e===d.QUARTER?"("+s+"quarter("+r+")-1)":""+s+e+"("+r+")"}var r="datum"+p.accessPath(t),s=a(e)?"utc":"",c=n.TIMEUNIT_PARTS.reduce(function(t,n){return o(e,n)&&(t[n]=i(n)),t},{});return l.dateTimeExpr(c)},n.formatExpression=function(e,t,n,a){if(e){var i=[],r="",l=o(e,d.YEAR);o(e,d.QUARTER)&&(r="'Q' + quarter("+t+")"),o(e,d.MONTH)&&i.push(!1===n?"%B":"%b"),o(e,d.DAY)?i.push(n?"%a":"%A"):o(e,d.DATE)&&i.push("%d"+(l?",":"")),l&&i.push(n?"%y":"%Y");var s=[];o(e,d.HOURS)&&s.push("%H"),o(e,d.MINUTES)&&s.push("%M"),o(e,d.SECONDS)&&s.push("%S"),o(e,d.MILLISECONDS)&&s.push("%L");var p=[];return 0<i.length&&p.push(i.join(" ")),0<s.length&&p.push(s.join(":")),0<p.length&&(r&&(r+=" + ' ' + "),r+=a?"utcFormat("+t+", '"+p.join(" ")+"')":"timeFormat("+t+", '"+p.join(" ")+"')"),r||void 0}},n.normalizeTimeUnit=function(e){return"day"!==e&&0<=e.indexOf("day")?(s.warn(s.message.dayReplacedWithDate(e)),e.replace("day","date")):e}},{"./datetime":561,"./log":569,"./util":582}],578:[function(e,t,n){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},i=this&&this.__rest||function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&0>a.indexOf(t)&&(e[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(n);o<t.length;o++)0>a.indexOf(t[o])&&(e[t[o]]=n[t[o]]);return e};Object.defineProperty(n,"__esModule",{value:!0}),n.extractTitleConfig=function(e){var t=e.anchor,n=e.offset,o=e.orient,r=e.color,l=i(e,["anchor","offset","orient","color"]),s=a({},l,r?{fill:r}:{}),d=a({},t?{anchor:t}:{},n?{offset:n}:{},o?{orient:o}:{});return{mark:s,nonMark:d}}},{}],579:[function(e,t,n){"use strict";function a(e){return o.isString(e)?{type:e}:e||{}}var i=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("util"),r=e("./log");n.normalizeAutoSize=function(e,t,n){void 0===n&&(n=!0);var o=i({type:"pad"},a(t),a(e));return"fit"!==o.type||n||(r.warn(r.message.FIT_NON_SINGLE),o.type="pad"),o};var l=["background","padding"];n.extractTopLevelProperties=function(e){return l.reduce(function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t},{})}},{"./log":569,util:468}],580:[function(e,t,n){"use strict";function a(e){return e.filter!==void 0}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./filter"),o=e("./logical");n.isFilter=a,n.isLookup=function(e){return e.lookup!==void 0},n.isCalculate=function(e){return e.calculate!==void 0},n.isBin=function(e){return!!e.bin},n.isTimeUnit=function(e){return e.timeUnit!==void 0},n.isAggregate=function(e){return e.aggregate!==void 0},n.normalizeTransform=function(e){return e.map(function(e){return a(e)?{filter:o.normalizeLogicalOperand(e.filter,i.normalizeFilter)}:e})}},{"./filter":565,"./logical":570}],581:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a;(function(e){e.QUANTITATIVE="quantitative",e.ORDINAL="ordinal",e.TEMPORAL="temporal",e.NOMINAL="nominal"})(a=n.Type||(n.Type={}));var i={quantitative:1,ordinal:1,temporal:1,nominal:1};n.isType=function(e){return!!i[e]},n.QUANTITATIVE=a.QUANTITATIVE,n.ORDINAL=a.ORDINAL,n.TEMPORAL=a.TEMPORAL,n.NOMINAL=a.NOMINAL,n.getFullName=function(e){if(e)switch(e=e.toLowerCase(),e){case"q":case n.QUANTITATIVE:return"quantitative";case"t":case n.TEMPORAL:return"temporal";case"o":case n.ORDINAL:return"ordinal";case"n":case n.NOMINAL:return"nominal";}}},{}],582:[function(e,t,n){"use strict";function a(e,t){return-1<e.indexOf(t)}function i(e,t){return e.filter(function(e){return!a(t,e)})}function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var a=0,i=t,o;a<i.length;a++)o=i[a],e=r(e,o);return e}function r(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||c.isArray(t[n])||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=o(c.isArray(t[n].constructor)?[]:{},t[n]):o(e[n],t[n]));return e}function l(e){return JSON.parse(JSON.stringify(e))}function s(e){return!0===e||!1===e}function d(e,t){return u.isLogicalNot(e)?"!("+d(e.not,t)+")":u.isLogicalAnd(e)?"("+e.and.map(function(e){return d(e,t)}).join(") && (")+")":u.isLogicalOr(e)?"("+e.or.map(function(e){return d(e,t)}).join(") || (")+")":t(e)}Object.defineProperty(n,"__esModule",{value:!0});var p=e("json-stable-stringify"),c=e("vega-util"),u=e("./logical"),f=e("vega-util");n.isArray=f.isArray,n.isObject=f.isObject,n.isNumber=f.isNumber,n.isString=f.isString,n.truncate=f.truncate,n.toSet=f.toSet,n.stringValue=f.stringValue,n.splitAccessPath=f.splitAccessPath,n.pick=function(e,t){for(var n={},a=0,i=t,o;a<i.length;a++)o=i[a],e.hasOwnProperty(o)&&(n[o]=e[o]);return n},n.omit=function(e,t){for(var n=l(e),a=0,i=t,o;a<i.length;a++)o=i[a],delete n[o];return n},n.hash=function(e){if(c.isString(e)||c.isNumber(e)||s(e))return e+"";var t=p(e);if(100>t.length)return t;for(var n=0,a=0,i;a<t.length;a++)i=t.charCodeAt(a),n=(n<<5)-n+i,n&=n;return n},n.contains=a,n.without=i,n.union=function(e,t){return e.concat(i(t,e))},n.some=function(e,t){for(var n=0,a=0;a<e.length;a++)if(t(e[a],a,n++))return!0;return!1},n.every=function(e,t){for(var n=0,a=0;a<e.length;a++)if(!t(e[a],a,n++))return!1;return!0},n.flatten=function(e){return[].concat.apply([],e)},n.mergeDeep=o,n.unique=function(e,t){for(var n=[],a={},i=0,o=e,r,l;i<o.length;i++)(l=o[i],r=t(l),!(r in a))&&(a[r]=1,n.push(l));return n},n.differ=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1},n.hasIntersection=function(e,t){for(var n in e)if(n in t)return!0;return!1},n.isNumeric=function(e){return!isNaN(e)},n.differArray=function(e,t){if(e.length!==t.length)return!0;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(t[n]!==e[n])return!0;return!1},n.keys=Object.keys,n.vals=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},n.flagKeys=function(e){return n.keys(e)},n.duplicate=l,n.isBoolean=s,n.varName=function(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t},n.logicalExpr=d,n.deleteNestedProperty=function(e,t){for(var a=!0;0<t.length&&a;){for(var r=e,o=0;o<t.length-1;o++)r=r[t[o]];delete r[t.pop()],0!==n.keys(r).length&&(a=!1)}},n.titlecase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},n.accessPath=function(e){return"["+c.splitAccessPath(e).map(c.stringValue).join("][")+"]"}},{"./logical":570,"json-stable-stringify":147,"vega-util":591}],583:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./mark"),o=e("./mark"),i=e("./util");n.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]},n.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:i.toSet(["row","column","x","y","size","color","detail"]),line:i.toSet(["row","column","x","y","color","detail"]),area:i.toSet(["row","column","x","y","color","detail"]),tick:i.toSet(["row","column","x","y","color","detail"]),circle:i.toSet(["row","column","x","y","color","size","detail"]),square:i.toSet(["row","column","x","y","color","size","detail"]),point:i.toSet(["row","column","x","y","color","size","detail","shape"]),text:i.toSet(["row","column","size","color","text"])},n.getEncodingMappingError=function(e,t,r){void 0===t&&(t=n.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===r&&(r=n.DEFAULT_SUPPORTED_CHANNEL_TYPE);var l=a.isMarkDef(e.mark)?e.mark.type:e.mark,s=e.encoding,d=t[l],p=r[l];for(var c in d)if(!(d[c]in s))return"Missing encoding channel \""+d[c]+"\" for mark \""+l+"\"";for(var i in s)if(!p[i])return"Encoding channel \""+i+"\" is not supported by mark type \""+l+"\"";return l!==o.BAR||s.x||s.y?null:"Missing both x and y for bar"}},{"./mark":571,"./util":582}],584:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./util");n.isVgSignalRef=function(e){return!!e.signal},n.isVgRangeStep=function(e){return!!e.step},n.isDataRefUnionedDomain=function(e){return!a.isArray(e)&&"fields"in e&&!("data"in e)},n.isFieldRefUnionDomain=function(e){return!a.isArray(e)&&"fields"in e&&"data"in e},n.isDataRefDomain=function(e){return!a.isArray(e)&&"field"in e&&"data"in e},n.isSignalRefDomain=function(e){return!a.isArray(e)&&"signal"in e};n.VG_MARK_CONFIGS=a.flagKeys({opacity:1,fill:1,fillOpacity:1,stroke:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,limit:1,dx:1,dy:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1})},{"./util":582}],585:[function(e,t,n){"use strict";function a(e){return 0==e%1?o.format(",")(e):o.format(",.2f")(e)}function i(e){var t=l.timeFormat(".%L"),n=l.timeFormat(":%S"),a=l.timeFormat("%I:%M"),i=l.timeFormat("%I %p"),o=l.timeFormat("%a %d"),s=l.timeFormat("%b %d"),d=l.timeFormat("%B"),p=l.timeFormat("%Y");return(r.timeSecond(e)<e?t:r.timeMinute(e)<e?n:r.timeHour(e)<e?a:r.timeDay(e)<e?i:r.timeMonth(e)<e?r.timeWeek(e)<e?o:s:r.timeYear(e)<e?d:p)(e)}Object.defineProperty(n,"__esModule",{value:!0});var o=e("d3-format"),r=e("d3-time"),l=e("d3-time-format");n.customFormat=function(e,t,n){if(void 0!==e&&null!==e&&t)switch(t){case"time":return n?l.timeFormat(n)(e):i(e);case"number":return n?o.format(n)(e):a(e);case"string":default:return e;}},n.autoFormat=function(e){return"number"==typeof e?a(e):e instanceof Date?i(e):e},n.autoNumberFormat=a,n.autoTimeFormat=i},{"d3-format":140,"d3-time":143,"d3-time-format":142}],586:[function(e,t,n){"use strict";function a(e,t){e.addEventListener("mouseover.tooltipInit",function(e,n){s(n)&&(i(),_=window.setTimeout(function(){o(e,n,t)},t.delay||c.DELAY))}),e.addEventListener("mousemove.tooltipUpdate",function(e,n){s(n)&&g&&r(e,n,t)}),e.addEventListener("mouseout.tooltipRemove",function(e,n){s(n)&&(i(),g&&l(e,n,t))})}function i(){window.clearTimeout(_),_=void 0}function o(e,t,n){var a=m.getTooltipPlaceholder(),i=u.getTooltipData(t,n);i&&0!==i.length&&(m.bindData(a,i),m.updatePosition(e,n),m.updateColorTheme(n),p.select("#vis-tooltip").style("visibility","visible"),g=!0,n.onAppear&&n.onAppear(e,t))}function r(e,t,n){s(t)&&(m.updatePosition(e,n),n.onMove&&n.onMove(e,t))}function l(e,t,n){s(t)&&(p.select("#vis-tooltip").style("visibility","hidden"),g=!1,m.clearData(),m.clearColorTheme(),m.clearPosition(),n.onDisappear&&n.onDisappear(e,t))}function s(e){return e&&e.datum&&!e.datum._facetID}function d(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(n,"__esModule",{value:!0});var p=e("d3-selection"),c=e("./options"),u=e("./parseOption"),f=e("./supplementField"),m=e("./tooltipDisplay"),g=!1,_;n.vega=function(e,t){return void 0===t&&(t={showAllFields:!0}),a(e,d(t)),{destroy:function(){e.removeEventListener("mouseover.tooltipInit"),e.removeEventListener("mousemove.tooltipUpdate"),e.removeEventListener("mouseout.tooltipRemove"),i()}}},n.vegaLite=function(e,t,n){return void 0===n&&(n={showAllFields:!0}),n=f.supplementOptions(d(n),t),a(e,n),{destroy:function(){e.removeEventListener("mouseover.tooltipInit"),e.removeEventListener("mousemove.tooltipUpdate"),e.removeEventListener("mouseout.tooltipRemove"),i()}}}},{"./options":587,"./parseOption":588,"./supplementField":589,"./tooltipDisplay":590,"d3-selection":141}],587:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DELAY=100},{}],588:[function(e,t,n){"use strict";function a(e,t){var n=[];return t.fields.forEach(function(t){var a=t.title?t.title:t.field,o=i(e,t.field);if(void 0!==o){var r=p.customFormat(o,t.formatType,t.format)||p.autoFormat(o);n.push({title:a,value:r})}}),n}function i(e,t){var n=t.split("."),a=n[0],i;return n.shift(),e[a]&&(i=e[a],n.forEach(function(e){i=i,i[e]&&(i=i[e])})),void 0===i?void console.warn("[Tooltip] Cannot find field "+t+" in data."):i}function o(e,t){var n=[],a={};if(t&&t.fields)for(var i=0,o=t.fields,r;i<o.length;i++)r=o[i],a[r.field]=r;for(var l in e)if(e.hasOwnProperty(l)){var s=e[l],d=void 0;d=a[l]&&a[l].title?a[l].title:l;var c=void 0,u=void 0;a[l]&&(c=a[l].formatType,u=a[l].format);var f=p.customFormat(s,c,u)||p.autoFormat(s);n.push({title:d,value:f})}return n}function r(e,t){t.forEach(function(t){delete e[t]})}function l(e,t){t&&t.forEach(function(t){t.removeOriginalTemporalField&&r(e,[t.removeOriginalTemporalField])})}function s(e,t){if(t)return t.forEach(function(t){if(!0===t.bin){var n=t.field,a=n.concat("_start"),i=n.concat("_mid"),o=n.concat("_end"),l=e[a],s=e[o];if(void 0!==l&&void 0!==s){e[n]=l+"-"+s}var d=[];d.push(a,i,o),r(e,d)}}),e}function d(e,t){if("line"===e||"area"===e){var n=[];for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];i instanceof Date&&n.push(a)}r(t,n)}}Object.defineProperty(n,"__esModule",{value:!0});var p=e("./formatFieldValue");n.getTooltipData=function(e,t){if("group"!==e.mark.marktype){var n={},i;for(var p in e.datum)e.datum.hasOwnProperty(p)&&(n[p]=e.datum[p]);return r(n,["_id","_prev","width","height","count_start","count_end","layout_start","layout_mid","layout_end","layout_path","layout_x","layout_y"]),l(n,t.fields),s(n,t.fields),d(e.mark.marktype,n),i=!0===t.showAllFields?o(n,t):a(n,t),i}},n.prepareCustomFieldsData=a,n.getValue=i,n.prepareAllFieldsData=o,n.removeFields=r,n.removeDuplicateTimeFields=l,n.combineBinFields=s,n.dropFieldsForLineArea=d},{"./formatFieldValue":585}],589:[function(e,t,n){"use strict";function a(e,t){if(t&&e&&!(0>=e.length)){if(t.aggregate){for(var n=0,a=e,i;n<a.length;n++)if(i=a[n],i.field===t.field&&i.aggregate===t.aggregate)return i;for(var o=0,r=e,i;o<r.length;o++)if(i=r[o],i.field===t.field&&!i.aggregate)return i;return}for(var l=0,s=e,i;l<s.length;l++)if(i=s[l],i.field===t.field)return i}}function i(e,t){if(t&&t.field&&e)for(var n=0,a=e,i;n<a.length;n++)if(i=a[n],i.field===t.field){if(!i.aggregate)return i;if(i.aggregate===t.aggregate||!t.aggregate)return i}}function o(e,t,n){var a=r({},n.config);if(!e&&!t)return void console.error("[Tooltip] Cannot supplement a field when field and fieldDef are both empty.");!e&&t&&(e={}),e&&!t&&(t={});var i={field:t.field?l.fieldDef.field(t):e.field};if(t.type===s.TEMPORAL&&t.timeUnit){var o=t.field;i.removeOriginalTemporalField=o;for(var p=l.spec.fieldDefs(n),c=0,u=p,f;c<u.length;c++)if(f=u[c],f.field===o&&!f.timeUnit){i.removeOriginalTemporalField=void 0;break}}if(a.countTitle||(a.countTitle=l.config.defaultConfig.countTitle),i.title=e.title?e.title:l.fieldDef.title(t,a),i.formatType=e.formatType?e.formatType:d[t.type],e.format)i.format=e.format;else switch(i.formatType){case"time":i.format=t.timeUnit?l.timeUnit.formatExpression(t.timeUnit,"",!1,!1).split("'")[1]:a.timeFormat||l.config.defaultConfig.timeFormat;break;case"number":i.format=a.numberFormat;break;case"string":default:}return t.bin&&(i.field=i.field.replace("_start","_range"),i.bin=!0,i.formatType="string"),i}var r=this&&this.__assign||Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var i in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var l=e("vega-lite"),s=e("vega-lite/build/src/type"),d={quantitative:"number",temporal:"time",ordinal:void 0,nominal:void 0};n.supplementOptions=function(e,t){var n=[];return!1===e.showAllFields?e.fields&&e.fields.forEach(function(e){var a=i(l.spec.fieldDefs(t),e),r=o(e,a,t);n.push(r)}):l.spec.fieldDefs(t).forEach(function(i){var r=a(e.fields,i),l=o(r,i,t);n.push(l)}),e.fields=n,e},n.getFieldOption=a,n.getFieldDef=i,n.supplementFieldOption=o},{"vega-lite":567,"vega-lite/build/src/type":581}],590:[function(e,t,n){"use strict";function a(){i.select("#vis-tooltip").classed("dark-theme light-theme",!1)}Object.defineProperty(n,"__esModule",{value:!0});var i=e("d3-selection");n.getTooltipPlaceholder=function(){var e;return e=i.select("#vis-tooltip").empty()?i.select("body").append("div").attr("id","vis-tooltip").attr("class","vg-tooltip"):i.select("#vis-tooltip"),e},n.bindData=function(e,t){e.selectAll("table").remove();var n=e.append("table").selectAll(".tooltip-row").data(t);n.exit().remove();var a=n.enter().append("tr").attr("class","tooltip-row");a.append("td").attr("class","key").text(function(e){return e.title+":"}),a.append("td").attr("class","value").text(function(e){return e.value})},n.clearData=function(){i.select("#vis-tooltip").selectAll(".tooltip-row").data([]).exit().remove()},n.updatePosition=function(e,t){var n=10,a=10;t&&t.offset&&t.offset.x!==void 0&&null!==t.offset.x&&(n=t.offset.x),t&&t.offset&&t.offset.y!==void 0&&null!==t.offset.y&&(a=t.offset.y),i.select("#vis-tooltip").style("top",function(){var t=this.getBoundingClientRect().height;return e.clientY+t+a<window.innerHeight?""+(e.clientY+a)+"px":""+(e.clientY-t-a)+"px"}).style("left",function(){var t=this.getBoundingClientRect().width;return e.clientX+t+n<window.innerWidth?""+(e.clientX+n)+"px":""+(e.clientX-t-n)+"px"})},n.clearPosition=function(){i.select("#vis-tooltip").style("top","-9999px").style("left","-9999px")},n.updateColorTheme=function(e){a(),e&&"dark"===e.colorTheme?i.select("#vis-tooltip").classed("dark-theme",!0):i.select("#vis-tooltip").classed("light-theme",!0)},n.clearColorTheme=a},{"d3-selection":141}],591:[function(t,n,i){(function(e,t){"object"==typeof i&&"undefined"!=typeof n?t(i):"function"==typeof m&&m.amd?m(["exports"],t):t(e.vega=e.vega||{})})(this,function(t){"use strict";function n(e){return null==e?null:e.fields}function o(e){return h(e)?"["+e.map(o)+"]":b(e)||v(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function i(e,t,n){var a=[t].concat([].slice.call(n));console[e].apply(console,a)}function r(e){return function(t){return e*a(t)}}function l(e){return function(t){return f(e*t)}}function s(e){return function(t){return 0>t?-g(-t,e):g(t,e)}}function d(e,t,n,a){var i=n(e[0]),o=n(M(e)),r=(o-i)*t;return[a(i-r),a(o-r)]}function c(e,t,n,a,i){var o=a(e[0]),r=a(M(e)),l=null==t?(o+r)/2:a(t);return[i(l+(o-l)*n),i(l+(r-l)*n)]}function u(e){return $(e)?e:U(e)?e:Date.parse(e)}var m=function(e,t,n){return e.fields=t||[],e.fname=n,e},_=function(e){throw Error(e)},y=function(e){function t(){a.push(n+e.substring(s,i)),n="",s=i+1}var a=[],o=null,r=0,l=e.length,n="",s,i,d;for(e+="",s=i=0;i<l;++i)if(d=e[i],"\\"===d)n+=e.substring(s,i),s=++i;else if(d===o)t(),o=null,r=-1;else if(o)continue;else s===r&&"\""===d?(s=i+1,o=d):s===r&&"'"===d?(s=i+1,o=d):"."!==d||r?"["===d?(i>s&&t(),r=s=i+1):"]"===d&&(r||_("Access path missing open bracket: "+e),0<r&&t(),r=0,s=i+1):i>s?t():s=i+1;return r&&_("Access path missing closing bracket: "+e),o&&_("Access path missing closing quote: "+e),i>s&&(i++,t()),a},h=Array.isArray,b=function(e){return e===Object(e)},v=function(e){return"string"==typeof e},x=function(e,t){var n=y(e),a="return _["+n.map(o).join("][")+"];";return m(Function("_",a),[e=1===n.length?n[0]:e],t||e)},S=[],T=x("id"),k=m(function(e){return e},S,"identity"),E=m(function(){return 0},S,"zero"),A=m(function(){return 1},S,"one"),w=m(function(){return!0},S,"true"),C=m(function(){return!1},S,"false"),O=0,D=1,P=2,R=3,I=4,M=function(e){return e[e.length-1]},F=function(e){return null==e||""===e?null:+e},B=function(e){return null==e?[]:h(e)?e:[e]},z=function(e){return"function"==typeof e},j={},U=function(e){return"[object Date]"===Object.prototype.toString.call(e)},$=function(e){return"number"==typeof e},W=function(e,t){for(var n="";0<=--t;)n+=e;return n};t.accessor=m,t.accessorName=function(e){return null==e?null:e.fname},t.accessorFields=n,t.id=T,t.identity=k,t.zero=E,t.one=A,t.truthy=w,t.falsy=C,t.logger=function(e){var t=e||O;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=D&&i("error","ERROR",arguments),this},warn:function(){return t>=P&&i("warn","WARN",arguments),this},info:function(){return t>=R&&i("log","INFO",arguments),this},debug:function(){return t>=I&&i("log","DEBUG",arguments),this}}},t.None=O,t.Error=D,t.Warn=P,t.Info=R,t.Debug=I,t.panLinear=function(e,t){return d(e,t,F,k)},t.panLog=function(t,n){var a=e(t[0]);return d(t,n,l(a),r(a))},t.panPow=function(e,t,n){return d(e,t,s(n),s(1/n))},t.zoomLinear=function(e,t,n){return c(e,t,n,F,k)},t.zoomLog=function(t,n,a){var i=e(t[0]);return c(t,n,a,l(i),r(i))},t.zoomPow=function(e,t,n,a){return c(e,t,n,s(a),s(1/a))},t.array=B,t.compare=function(e,a){var r=[],l=(e=B(e)).map(function(e,t){return null==e?null:(r.push(t),z(e)?e:y(e).map(o).join("]["))}),s=r.length-1,p=B(a),c="var u,v;return ",g,i,_,f,u,h,d,t,b;if(0>s)return null;for(i=0;i<=s;++i)g=r[i],_=l[g],z(_)?(h="f"+g,f="(u=this."+h+"(a))",u="(v=this."+h+"(b))",(d=d||{})[h]=_):(f="(u=a["+_+"])",u="(v=b["+_+"])"),h="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"===p[g]?(b=-1,t=1):(b=1,t=-1),c+="("+f+"<"+u+"||u==null)&&v!=null?"+t+":(u>v||v==null)&&u!=null?"+b+":"+h+"!==u&&v===v?"+t+":v!==v&&u===u?"+b+(g<s?":":":0");return _=Function("a","b",c+";"),d&&(_=_.bind(d)),e=e.reduce(function(e,t){return z(t)?(n(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),m(_,Object.keys(e))},t.constant=function(e){return z(e)?e:function(){return e}},t.debounce=function(t,e){function n(){e(i),a=i=null}var a,i;return function(o){i=o,a&&clearTimeout(a),a=setTimeout(n,t)}},t.error=_,t.extend=function(e){for(var t=1,n=arguments.length,a,i;t<n;++t)for(i in a=arguments[t],a)e[i]=a[i];return e},t.extentIndex=function(e,t){var o=-1,i=e.length,n,a,r,l,s;if(null==t){for(;++o<i;)if(a=e[o],null!=a&&a>=a){n=r=a;break}for(l=s=o;++o<i;)a=e[o],null!=a&&(n>a&&(n=a,l=o),r<a&&(r=a,s=o))}else{for(;++o<i;)if(a=t(e[o],o,e),null!=a&&a>=a){n=r=a;break}for(l=s=o;++o<i;)a=t(e[o],o,e),null!=a&&(n>a&&(n=a,l=o),r<a&&(r=a,s=o))}return[l,s]},t.fastmap=function(e){function t(e){return n.hasOwnProperty(e)&&n[e]!==j}var n={},a,i;return a={size:0,empty:0,object:n,has:t,get:function(e){return t(e)?n[e]:void 0},set:function(e,i){return t(e)||(++a.size,n[e]===j&&--a.empty),n[e]=i,this},delete:function(e){return t(e)&&(--a.size,++a.empty,n[e]=j),this},clear:function(){a.size=a.empty=0,a.object=n={}},test:function(e){return arguments.length?(i=e,a):i},clean:function(){var e={},t=0,o,r;for(o in n)r=n[o],r===j||i&&i(r)||(e[o]=r,++t);a.size=t,a.empty=0,a.object=n=e}},e&&Object.keys(e).forEach(function(t){a.set(t,e[t])}),a},t.field=x,t.inherits=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},t.isArray=h,t.isBoolean=function(e){return"boolean"==typeof e},t.isDate=U,t.isFunction=z,t.isNumber=$,t.isObject=b,t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isString=v,t.key=function(e,t){e&&(e=t?B(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):B(e));var n=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?o(e):y(e).map(o).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return m(n,e,"key")},t.merge=function(e,t,n,a){var o=t.length,r=n.length;if(!r)return t;if(!o)return n;for(var l=a||new t.constructor(o+r),s=0,d=0,p=0;s<o&&d<r;++p)l[p]=0<e(t[s],n[d])?n[d++]:t[s++];for(;s<o;++s,++p)l[p]=t[s];for(;d<r;++d,++p)l[p]=n[d];return l},t.pad=function(e,t,a,i){var o=a||" ",r=e+"",l=t-r.length;return 0>=l?r:"left"===i?W(o,l)+r:"center"===i?W(o,~~(l/2))+r+W(o,p(l/2)):r+W(o,l)},t.peek=M,t.repeat=W,t.splitAccessPath=y,t.stringValue=o,t.toBoolean=function(e){return null==e||""===e?null:e&&"false"!==e&&"0"!==e&&!!e},t.toDate=function(e,t){return t=t||u,null==e||""===e?null:t(e)},t.toNumber=F,t.toString=function(e){return null==e||""===e?null:e+""},t.toSet=function(e){for(var t={},a=0,i=e.length;a<i;++a)t[e[a]]=1;return t},t.truncate=function(t,a,i,o){var r=null==o?"\u2026":o,e=t+"",s=e.length,n=N(0,a-r.length);return s<=a?e:"left"===i?r+e.slice(s-n):"center"===i?e.slice(0,p(n/2))+r+e.slice(s-~~(n/2)):e.slice(0,n)+r},t.visitArray=function(e,a,o){if(e){var r=0,i=e.length,n;if(a)for(;r<i;++r)(n=a(e[r]))&&o(n,r,e);else e.forEach(o)}},Object.defineProperty(t,"__esModule",{value:!0})})},{}],592:[function(_,y,h){(function(b){(function(e,t){"object"==typeof h&&"undefined"!=typeof y?t(h):"function"==typeof m&&m.amd?m(["exports"],t):t(e.vega=e.vega||{})})(this,function(h){"use strict";function v(e){return null==e?null:e.fname}function m(e){return null==e?null:e.fields}function w(e){return dh(e)?"["+e.map(w)+"]":ph(e)||uh(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function k(e,t,n){var a=[t].concat([].slice.call(n));console[e].apply(console,a)}function O(e){return function(t){return e*a(t)}}function P(e){return function(t){return f(e*t)}}function R(e){return function(t){return 0>t?-g(-t,e):g(t,e)}}function I(e,t,n,a){var i=n(e[0]),o=n(Nh(e)),r=(o-i)*t;return[a(i-r),a(o-r)]}function M(e,t){return I(e,t,Lh,id)}function F(t,n){var a=e(t[0]);return I(t,n,P(a),O(a))}function z(e,t,n){return I(e,t,R(n),R(1/n))}function j(e,t,n,a,i){var o=a(e[0]),r=a(Nh(e)),l=null==t?(o+r)/2:a(t);return[i(l+(o-l)*n),i(l+(r-l)*n)]}function U(e,t,n){return j(e,t,n,Lh,id)}function $(t,n,a){var i=e(t[0]);return j(t,n,a,P(i),O(i))}function W(e,t,n,a){return j(e,t,n,R(a),R(1/a))}function q(e){return jh(e)?e:zh(e)?e:Date.parse(e)}function H(e){var t=e||id,n=[],a={};return n.add=function(e){var i=t(e);return a[i]||(a[i]=1,n.push(e)),n},n.remove=function(e){var i=t(e),o;return a[i]&&(a[i]=0,0<=(o=n.indexOf(e))&&n.splice(o,1)),n},n}function Y(e){return!!(e&&V(e))}function V(e){return e[Jh]}function G(e,t){return e[Jh]=t,e}function Z(e){var n=e===Object(e)?e:{data:e};return V(n)?n:G(n,Qh++)}function X(e){return K(e,Z({}))}function K(e,t){for(var n in e)t[n]=e[n];return t}function J(e,t){return G(t,V(e))}function Q(e){return e&&e.constructor===ee}function ee(){var e=[],o=[],a=[],r=[],l=[],s=!1;return{constructor:ee,insert:function(a){for(var t=Ah(a),o=0,i=t.length;o<i;++o)e.push(t[o]);return this},remove:function(e){for(var t=wh(e)?r:o,a=Ah(e),l=0,i=a.length;l<i;++l)t.push(a[l]);return this},modify:function(e,t,n){var i={field:t,value:Oh(n)};return wh(e)?(i.filter=e,l.push(i)):(i.tuple=e,a.push(i)),this},encode:function(e,n){return wh(e)?l.push({filter:e,field:n}):a.push({tuple:e,field:n}),this},reflow:function(){return s=!0,this},pulse:function(d,p){function c(e,t,n){n?e[t]=n(e):d.encode=t,s||(u[V(e)]=e)}var u,g,i,n,m,f,t;for(g=0,i=e.length;g<i;++g)d.add.push(Z(e[g]));for(u={},g=0,i=o.length;g<i;++g)f=o[g],u[V(f)]=f;for(g=0,i=r.length;g<i;++g)m=r[g],p.forEach(function(e){m(e)&&(u[V(e)]=e)});for(t in u)d.rem.push(u[t]);for(u={},g=0,i=a.length;g<i;++g)n=a[g],c(n.tuple,n.field,n.value),d.modifies(n.field);for(g=0,i=l.length;g<i;++g)n=l[g],m=n.filter,p.forEach(function(e){m(e)&&c(e,n.field,n.value)}),d.modifies(n.field);if(s)d.mod=o.length||r.length?p.filter(function(e){return u.hasOwnProperty(V(e))}):p.slice();else for(t in u)d.mod.push(u[t]);return d}}}function te(){Object.defineProperty(this,eb,{writable:!0,value:{}})}function ne(e,t,n,a){this.id=++nb,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,a)}function ae(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function ie(e,t,n){this.id=++ob,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function oe(e,t,n){return new ie(e,t,n)}function le(){}function se(e,t){var a=new le;if(e instanceof le)e.each(function(e,t){a.set(t,e)});else if(Array.isArray(e)){var r=-1,i=e.length,n;if(null==t)for(;++r<i;)a.set(r,e[r]);else for(;++r<i;)a.set(t(n=e[r],r,e),n)}else if(e)for(var o in e)a.set(o,e[o]);return a}function de(){return{}}function pe(e,t,n){e[t]=n}function ce(){return se()}function ue(e,t,n){e.set(t,n)}function fe(){}function me(e,t){var a=new fe;if(e instanceof fe)e.each(function(e){a.add(e)});else if(e){var o=-1,i=e.length;if(null==t)for(;++o<i;)a.add(e[o]);else for(;++o<i;)a.add(t(e[o],o,e))}return a}function ge(){for(var e=0,a=arguments.length,n={},i;e<a;++e){if(!(i=arguments[e]+"")||i in n)throw new Error("illegal type: "+i);n[i]=[]}return new _e(n)}function _e(e){this._=e}function ye(e,n){return e.trim().split(/^|\s+/).map(function(e){var a="",o=e.indexOf(".");if(0<=o&&(a=e.slice(o+1),e=e.slice(0,o)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:a}})}function he(e,t){for(var a=0,i=e.length,n;a<i;++a)if((n=e[a]).name===t)return n.value}function be(e,t,a){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=pb,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=a&&e.push({name:t,value:a}),e}function xe(e){return function(t,n){e(null==t?n:null)}}function ve(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Se(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function Te(e,t){var n=Se(e);return function(a,o){return t(n(a),o,e)}}function ke(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var a in e)a in t||n.push(t[a]=a)}),n}function Ee(e,t){return Ph({},e.options,t)}function Ne(e,t){var n=this;return n.sanitize(e,t).then(function(e){var a=e.href;return e.localFile?n.file(a):n.http(a,t)})}function Le(e,t){return t=Ee(this,t),new Promise(function(n,a){var i={href:null},o,r,l,s;return null==e||"string"!=typeof e?void a("Sanitize failure, invalid URI: "+w(e)):void(r=xb.test(e),(s=t.baseURL)&&!r&&(!Oe(e,"/")&&"/"!==s[s.length-1]&&(e="/"+e),e=s+e),l=(o=Oe(e,vb))||"file"===t.mode||"http"!==t.mode&&!r&&Ce(),o?e=e.slice(vb.length):Oe(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),l=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!l}),i.href=e,n(i))})}function Ae(e,t){return t=Ee(this,t),new Promise(function(n,a){var i=cb(e),o;for(o in t.headers)i.header(o,t.headers[o]);Sb.forEach(function(e){t[e]&&i[e](t[e])}),i.on("error",function(t){a(t||"Error loading URL: "+e)}).on("load",function(e){var t=e&&e.responseText;e&&0!==e.status?n(t):a(t||"Error")}).get()})}function we(e){return new Promise(function(t,n){var a=Ce();a?a.readFile(e,function(e,a){e?n(e):t(a)}):n("No file system access for "+e)})}function Ce(){var e="function"==typeof _&&_("fs");return e&&wh(e.readFile)?e:null}function Oe(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function De(e,t){if(!e||!e.length)return"unknown";var a=Eb.slice(),o,r,i,n;for(r=0,i=e.length;r<i;++r){for(o=t?e[r][t]:e[r],n=0;n<a.length;++n)Re(o)&&!a[n](o)&&(a.splice(n,1),--n);if(0===a.length)return"string"}return Nb[Eb.indexOf(a[0])]}function Pe(e,t){return t.reduce(function(t,n){return t[n]=De(e,n),t},{})}function Re(e){return null!=e&&e===e}function Ie(e){return!isNaN(+e)&&!(e instanceof Date)}function Me(e){return function(t,n){var a={delimiter:e};return Fe(t,n?Ph(n,a):a)}}function Fe(e,t){return t.header&&(e=t.header.map(w).join(t.delimiter)+"\n"+e),yb(t.delimiter).parse(e+"")}function Be(e){return"function"==typeof b&&wh(b.isBuffer)&&b.isBuffer(e)}function ze(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}function je(e,t){var n=t.id,a=t.bbox,i=null==t.properties?{}:t.properties,o=Ue(e,t);return null==n&&null==a?{type:"Feature",properties:i,geometry:o}:null==a?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:a,properties:i,geometry:o}}function Ue(e,t){function a(e,t){t.length&&t.pop();for(var o=d[0>e?~e:e],a=0,r=o.length;a<r;++a)t.push(s(o[a],a));0>e&&Cb(t,r)}function n(e){return s(e)}function i(e){for(var t=[],o=0,i=e.length;o<i;++o)a(e[o],t);return 2>t.length&&t.push(t[0]),t}function o(e){for(var t=i(e);4>t.length;)t.push(t[0]);return t}function r(e){return e.map(o)}function l(e){var t=e.type,a;switch(t){case"GeometryCollection":return{type:t,geometries:e.geometries.map(l)};case"Point":a=n(e.coordinates);break;case"MultiPoint":a=e.coordinates.map(n);break;case"LineString":a=i(e.arcs);break;case"MultiLineString":a=e.arcs.map(i);break;case"Polygon":a=r(e.arcs);break;case"MultiPolygon":a=e.arcs.map(r);break;default:return null;}return{type:t,coordinates:a}}var s=wb(e.transform),d=e.arcs;return l(t)}function $e(e,t,a){var o,r,i;if(1<arguments.length)o=We(e,t,a);else for(r=0,o=Array(i=e.arcs.length);r<i;++r)o[r]=r;return{type:"MultiLineString",arcs:Db(e,o)}}function We(e,t,n){function a(e){var t=0>e?~e:e;(d[t]||(d[t]=[])).push({i:e,g:p})}function i(e){e.forEach(a)}function r(e){e.forEach(i)}function l(e){e.forEach(r)}function s(e){switch(p=e,e.type){case"GeometryCollection":e.geometries.forEach(s);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":r(e.arcs);break;case"MultiPolygon":l(e.arcs);}}var o=[],d=[],p;return s(t),d.forEach(null==n?function(e){o.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&o.push(e[0].i)}),o}function qe(e,t,n,a){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:E(n)),e},i.range=function(n,a,o){var r=[],l;if(n=i.ceil(n),o=null==o?1:E(o),!(n<a)||!(0<o))return r;do r.push(l=new Date(+n)),t(n,o),e(n);while(l<n&&n<a);return r},i.filter=function(n){return qe(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,a){if(e>=e)if(0>a)for(;0>=++a;)for(;t(e,-1),!n(e););else for(;0<=--a;)for(;t(e,1),!n(e););})},n&&(i.count=function(t,a){return Mb.setTime(+t),Fb.setTime(+a),e(Mb),e(Fb),E(n(Mb,Fb))},i.every=function(e){return e=E(e),isFinite(e)&&0<e?1<e?i.filter(a?function(t){return 0==a(t)%e}:function(t){return 0==i.count(0,t)%e}):i:null}),i}function He(e){return qe(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jb)/Wb})}function Ye(e){return qe(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/Wb})}function Ve(e){if(0<=e.y&&100>e.y){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ge(e){if(0<=e.y&&100>e.y){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ze(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Xe(e){function t(e,t){return function(a){var o=[],r=-1,i=0,l=e.length,n,s,d;for(a instanceof Date||(a=new Date(+a));++r<l;)37===e.charCodeAt(r)&&(o.push(e.slice(i,r)),null==(s=_x[n=e.charAt(++r)])?s="e"===n?" ":"0":n=e.charAt(++r),(d=t[n])&&(n=d(a,s)),o.push(n),i=r+1);return o.push(e.slice(i,r)),o.join("")}}function n(e,t){return function(n){var o=Ze(1900),r=a(o,e,n+="",0),i,l;if(r!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(1>o.V||53<o.V)return null;"w"in o||(o.w=1),"Z"in o?(i=Ge(Ze(o.y)),l=i.getUTCDay(),i=4<l||0===l?sx.ceil(i):sx(i),i=rx.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(i=t(Ze(o.y)),l=i.getDay(),i=4<l||0===l?Zb.ceil(i):Zb(i),i=Vb.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),l="Z"in o?Ge(Ze(o.y)).getUTCDay():t(Ze(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(l+5)%7:o.w+7*o.U-(l+6)%7);return"Z"in o?(o.H+=0|o.Z/100,o.M+=o.Z%100,Ge(o)):t(o)}}function a(e,t,a,o){for(var r=0,i=t.length,n=a.length,l,s;r<i;){if(o>=n)return-1;if(l=t.charCodeAt(r++),37===l){if(l=t.charAt(r++),s=k[l in _x?t.charAt(r++):l],!s||0>(o=s(e,a,o)))return-1;}else if(l!=a.charCodeAt(o++))return-1}return o}var o=e.dateTime,r=e.date,l=e.time,i=e.periods,s=e.days,p=e.shortDays,c=e.months,u=e.shortMonths,f=Qe(i),m=et(i),g=Qe(s),_=et(s),y=Qe(p),h=et(p),b=Qe(c),x=et(c),v=Qe(u),S=et(u),d={a:function(e){return p[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return c[e.getMonth()]},c:null,d:xt,e:xt,f:Et,H:vt,I:St,j:Tt,L:kt,m:Nt,M:Lt,p:function(e){return i[+(12<=e.getHours())]},Q:tn,s:nn,S:At,u:wt,U:Ct,V:Ot,w:Dt,W:Pt,x:null,X:null,y:Rt,Y:It,Z:Mt,"%":en},T={a:function(e){return p[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return c[e.getUTCMonth()]},c:null,d:Ft,e:Ft,f:$t,H:Bt,I:zt,j:jt,L:Ut,m:Wt,M:qt,p:function(e){return i[+(12<=e.getUTCHours())]},Q:tn,s:nn,S:Ht,u:Yt,U:Vt,V:Gt,w:Zt,W:Xt,x:null,X:null,y:Kt,Y:Jt,Z:Qt,"%":en},k={a:function(e,t,a){var i=y.exec(t.slice(a));return i?(e.w=h[i[0].toLowerCase()],a+i[0].length):-1},A:function(e,t,a){var i=g.exec(t.slice(a));return i?(e.w=_[i[0].toLowerCase()],a+i[0].length):-1},b:function(e,t,a){var i=v.exec(t.slice(a));return i?(e.m=S[i[0].toLowerCase()],a+i[0].length):-1},B:function(e,t,a){var i=b.exec(t.slice(a));return i?(e.m=x[i[0].toLowerCase()],a+i[0].length):-1},c:function(e,t,n){return a(e,o,t,n)},d:pt,e:pt,f:_t,H:ut,I:ut,j:ct,L:gt,m:dt,M:ft,p:function(e,t,a){var i=f.exec(t.slice(a));return i?(e.p=m[i[0].toLowerCase()],a+i[0].length):-1},Q:ht,s:bt,S:mt,u:nt,U:at,V:it,w:tt,W:ot,x:function(e,t,n){return a(e,r,t,n)},X:function(e,t,n){return a(e,l,t,n)},y:lt,Y:rt,Z:st,"%":yt};return d.x=t(r,d),d.X=t(l,d),d.c=t(o,d),T.x=t(r,T),T.X=t(l,T),T.c=t(o,T),{format:function(e){var n=t(e+="",d);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",Ve);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",T);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,Ge);return t.toString=function(){return e},t}}}function Ke(e,t,n){var a=0>e?"-":"",i=(a?-e:e)+"",o=i.length;return a+(o<n?Array(n-o+1).join(t)+i:i)}function Je(e){return e.replace(bx,"\\$&")}function Qe(e){return new RegExp("^(?:"+e.map(Je).join("|")+")","i")}function et(e){for(var t={},a=-1,i=e.length;++a<i;)t[e[a].toLowerCase()]=a;return t}function tt(e,t,a){var i=yx.exec(t.slice(a,a+1));return i?(e.w=+i[0],a+i[0].length):-1}function nt(e,t,a){var i=yx.exec(t.slice(a,a+1));return i?(e.u=+i[0],a+i[0].length):-1}function at(e,t,a){var i=yx.exec(t.slice(a,a+2));return i?(e.U=+i[0],a+i[0].length):-1}function it(e,t,a){var i=yx.exec(t.slice(a,a+2));return i?(e.V=+i[0],a+i[0].length):-1}function ot(e,t,a){var i=yx.exec(t.slice(a,a+2));return i?(e.W=+i[0],a+i[0].length):-1}function rt(e,t,a){var i=yx.exec(t.slice(a,a+4));return i?(e.y=+i[0],a+i[0].length):-1}function lt(e,t,a){var i=yx.exec(t.slice(a,a+2));return i?(e.y=+i[0]+(68<+i[0]?1900:2e3),a+i[0].length):-1}function st(e,t,a){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),a+i[0].length):-1}function dt(e,t,a){var i=yx.exec(t.slice(a,a+2));return i?(e.m=i[0]-1,a+i[0].length):-1}function pt(e,t,a){var i=yx.exec(t.slice(a,a+2));return i?(e.d=+i[0],a+i[0].length):-1}function ct(e,t,a){var i=yx.exec(t.slice(a,a+3));return i?(e.m=0,e.d=+i[0],a+i[0].length):-1}function ut(e,t,a){var i=yx.exec(t.slice(a,a+2));return i?(e.H=+i[0],a+i[0].length):-1}function ft(e,t,a){var i=yx.exec(t.slice(a,a+2));return i?(e.M=+i[0],a+i[0].length):-1}function mt(e,t,a){var i=yx.exec(t.slice(a,a+2));return i?(e.S=+i[0],a+i[0].length):-1}function gt(e,t,a){var i=yx.exec(t.slice(a,a+3));return i?(e.L=+i[0],a+i[0].length):-1}function _t(e,t,a){var i=yx.exec(t.slice(a,a+6));return i?(e.L=E(i[0]/1e3),a+i[0].length):-1}function yt(e,t,a){var i=hx.exec(t.slice(a,a+1));return i?a+i[0].length:-1}function ht(e,t,a){var i=yx.exec(t.slice(a));return i?(e.Q=+i[0],a+i[0].length):-1}function bt(e,t,a){var i=yx.exec(t.slice(a));return i?(e.Q=1e3*+i[0],a+i[0].length):-1}function xt(e,t){return Ke(e.getDate(),t,2)}function vt(e,t){return Ke(e.getHours(),t,2)}function St(e,t){return Ke(e.getHours()%12||12,t,2)}function Tt(e,t){return Ke(1+Vb.count(ax(e),e),t,3)}function kt(e,t){return Ke(e.getMilliseconds(),t,3)}function Et(e,t){return kt(e,t)+"000"}function Nt(e,t){return Ke(e.getMonth()+1,t,2)}function Lt(e,t){return Ke(e.getMinutes(),t,2)}function At(e,t){return Ke(e.getSeconds(),t,2)}function wt(e){var t=e.getDay();return 0===t?7:t}function Ct(e,t){return Ke(Gb.count(ax(e),e),t,2)}function Ot(e,t){var n=e.getDay();return e=4<=n||0===n?Jb(e):Jb.ceil(e),Ke(Jb.count(ax(e),e)+(4===ax(e).getDay()),t,2)}function Dt(e){return e.getDay()}function Pt(e,t){return Ke(Zb.count(ax(e),e),t,2)}function Rt(e,t){return Ke(e.getFullYear()%100,t,2)}function It(e,t){return Ke(e.getFullYear()%1e4,t,4)}function Mt(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+Ke(0|t/60,"0",2)+Ke(t%60,"0",2)}function Ft(e,t){return Ke(e.getUTCDate(),t,2)}function Bt(e,t){return Ke(e.getUTCHours(),t,2)}function zt(e,t){return Ke(e.getUTCHours()%12||12,t,2)}function jt(e,t){return Ke(1+rx.count(gx(e),e),t,3)}function Ut(e,t){return Ke(e.getUTCMilliseconds(),t,3)}function $t(e,t){return Ut(e,t)+"000"}function Wt(e,t){return Ke(e.getUTCMonth()+1,t,2)}function qt(e,t){return Ke(e.getUTCMinutes(),t,2)}function Ht(e,t){return Ke(e.getUTCSeconds(),t,2)}function Yt(e){var t=e.getUTCDay();return 0===t?7:t}function Vt(e,t){return Ke(lx.count(gx(e),e),t,2)}function Gt(e,t){var n=e.getUTCDay();return e=4<=n||0===n?cx(e):cx.ceil(e),Ke(cx.count(gx(e),e)+(4===gx(e).getUTCDay()),t,2)}function Zt(e){return e.getUTCDay()}function Xt(e,t){return Ke(sx.count(gx(e),e),t,2)}function Kt(e,t){return Ke(e.getUTCFullYear()%100,t,2)}function Jt(e,t){return Ke(e.getUTCFullYear()%1e4,t,4)}function Qt(){return"+0000"}function en(){return"%"}function tn(e){return+e}function nn(e){return E(+e/1e3)}function an(e){return xx=Xe(e),vx=xx.format,Sx=xx.parse,Tx=xx.utcFormat,kx=xx.utcParse,xx}function on(e,t,a){if(e.length){a=a||Sx;var o=e.columns||Object.keys(e[0]),r,l,s,d,i,p,n;for("auto"===t&&(t=Pe(e,o)),o=Object.keys(t),r=o.map(function(e){var n=t[e],i,o;if(n&&(0===n.indexOf("date:")||0===n.indexOf("utc:")))return i=n.split(/:(.+)?/,2),o=i[1],("'"===o[0]&&"'"===o[o.length-1]||"\""===o[0]&&"\""===o[o.length-1])&&(o=o.slice(1,-1)),"utc"===i[0]?kx(o):a(o);if(!kb[n])throw Error("Illegal format pattern: "+e+":"+n);return kb[n]}),(d=0,p=e.length,n=o.length);d<p;++d)for(l=e[d],i=0;i<n;++i)s=o[i],l[s]=r[i](l[s])}}function rn(e){var t=new Promise(function(e,t){n=e,i=t}),n,i;return t.requests=0,t.done=function(){0==--t.requests&&e.runAfter(function(){e._pending=null;try{e.run(),n(e)}catch(e){i(e)}})},e._pending=t}function ln(n,e,a,t,i,o){var r=Ph({},o,wx),l,s;wh(a)||(a=Oh(a)),t===void 0?l=function(t){n.touch(a(t))}:wh(t)?(s=new ne(null,t,i,!1),l=function(i){var e=a(i),t;s.evaluate(i),Q(t=s.value)?n.pulse(e,t,o):n.update(e,t,r)}):l=function(i){n.update(a(i),t,r)},e.apply(l)}function sn(e,t,n,a,i,o){var r,l;a===void 0?l=n:(r=wh(a)?a:Oh(a),a=n?function(e,t){var a=r(e,t);return n.skip()?a:n.skip(!0).value=a}:r,l=new ne(null,a,i,!1),l.modified(o&&o.force),l.rank=0,n&&(l.skip(!0),l.value=n.value,l.targets().add(n))),t.targets().add(l)}function dn(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function pn(e,n){return e?function(a,t){return e(a,t)&&n(a,t)}:n}function cn(e,t){var n=[];return Kh(e,t,function(e){n.push(e)}),n}function un(e,t){var n={};return e.visit(t,function(e){n[V(e)]=1}),function(e){return n[V(e)]?null:e}}function fn(e,t,a,o){var r=this,l=0,s,d,p,i,n;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=o||null,this.pulses=a,(p=0,i=a.length);p<i;++p)if(s=a[p],s.stamp===t){if(s.fields)for(n in d=r.fields||(r.fields={}),s.fields)d[n]=1;s.changed(r.ADD)&&(l|=r.ADD),s.changed(r.REM)&&(l|=r.REM),s.changed(r.MOD)&&(l|=r.MOD)}this.changes=l}function mn(e){this.cmp=e,this.nodes=[]}function gn(e,t,n,a){var i,o,r;for(i=e[n];n>t;){if(r=n-1>>1,o=e[r],0>a(i,o)){e[n]=o,n=r;continue}break}return e[n]=i}function _n(e,t,n){for(var a=t,i=e.length,o=e[t],r=2*t+1,l;r<i;)l=r+1,l<i&&0<=n(e[r],e[l])&&(r=l),e[t]=e[r],t=r,r=2*t+1;return e[t]=o,gn(e,a,t,n)}function yn(){this._log=Eh(),this.logLevel(vh),this._clock=0,this._rank=0;try{this._loader=Tb()}catch(t){}this._touched=H(gh),this._pulses={},this._pulse=null,this._heap=new mn(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function hn(e){return function(){return this._log[e].apply(this,arguments)}}function bn(e,t){ne.call(this,e,null,t)}function xn(e){var n=vn(e);return n&&n.Definition||null}function vn(e){return e=e&&e.toLowerCase(),Yx.hasOwnProperty(e)?Yx[e]:null}function Sn(e){return function(t){for(var a=e.length,n=1,i=e[0](t)+"";n<a;++n)i+="|"+e[n](t);return i}}function Tn(e){return e&&e.length?1===e.length?e[0]:Sn(e):function(){return""}}function kn(e,t,n){return n||e+(t?"_"+t:"")}function En(e,t){return Vx[e](t)}function Nn(e){return function(t){var n=Ph({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function Ln(e,t){return e.idx-t.idx}function An(e,t){function n(e,i){function a(t){e[t]||n(e,e[t]=Vx[t]())}return i.req&&i.req.forEach(a),t&&i.str&&i.str.forEach(a),e}var a=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{})),i=[],o;for(o in a)i.push(a[o]);return i.sort(Ln)}function wn(e,t){var n=An(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",r="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",l="var cell = this.cell;";return n.forEach(function(e){i+=e.init,o+=e.add,r+=e.rem}),e.slice().sort(Ln).forEach(function(e){l+="t['"+e.out+"']="+e.set+";"}),l+="return t;",a=Function("cell",a),a.prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",r),a.prototype.set=Function("t",l),a.prototype.get=t||id,a.fields=e.map(function(e){return e.out}),a}function Cn(e){return null===e?NaN:+e}function On(e){return function(t,n){return Kx(e(t),n)}}function Dn(e,t,n){var a=(t-e)/N(0,n),i=E(f(a)/oh),o=a/g(10,i);return 0<=i?(o>=rv?10:o>=lv?5:o>=sv?2:1)*g(10,i):-g(10,-i)/(o>=rv?10:o>=lv?5:o>=sv?2:1)}function Pn(e,t,n){var a=T(t-e)/N(0,n),i=g(10,E(f(a)/oh)),o=a/i;return o>=rv?i*=10:o>=lv?i*=5:o>=sv&&(i*=2),t<e?-i:i}function Rn(e){var t=e.length,n=yv(e),a=(n[2]-n[0])/1.34;return 1.06*S(u(av(e)),a)*g(t,-0.2)}function In(e){this._key=e?fh(e):V,this.reset()}function Mn(e){bn.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Fn(e){bn.call(this,null,e)}function Bn(e){bn.call(this,[],e)}function zn(e){ne.call(this,null,jn,e)}function jn(e){return this.value&&!e.modified()?this.value:Ch(e.fields,e.orders)}function Un(e){bn.call(this,null,e)}function $n(e,t,n){return"upper"===t?e=e.toUpperCase():"lower"===t?e=e.toLowerCase():void 0,e.match(n)}function Wn(e){bn.call(this,null,e)}function qn(e,o,a,r){for(var l=[],s={},t=e.length,n=0,i,d;n<t;++n)for(s[o]=d=e[n],i=0;i<t;++i)s[a]=e[i],r(s)&&(l.push(Z(s)),s={},s[o]=d);return l}function Hn(e,t){var n=e[Ov];wv.hasOwnProperty(n)||lh("Unknown distribution function: "+n);var a=wv[n]();for(var i in e)i==Dv?a.data((e.from||t()).map(e[i])):i==Cv?a[i](e[i].map(function(e){return Hn(e,t)})):typeof a[i]==Ov&&a[i](e[i]);return a}function Vn(e){bn.call(this,null,e)}function Gn(e){return function(){return e.materialize(e.SOURCE).source}}function Jn(e){bn.call(this,[+Infinity,-Infinity],e)}function Qn(e,t){ne.call(this,e),this.parent=t}function ea(e){bn.call(this,{},e),this._keys=Mh();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var a=0,i=t.active;a<i;++a)e(t[a],a,t)}}function ta(e){ne.call(this,null,na,e)}function na(e){return this.value&&!e.modified()?this.value:dh(e.name)?Ah(e.name).map(function(e){return fh(e)}):fh(e.name,e.as)}function aa(e){bn.call(this,Mh(),e)}function ia(e){bn.call(this,{},e)}function oa(e){return e.fields.join("|")}function ra(e){bn.call(this,null,e)}function la(e){bn.call(this,[],e)}function sa(e){bn.call(this,[],e)}function da(e){var t=e.method||$v.value,n;return null==$v[t]?void lh("Unrecognized imputation method: "+t):t===$v.value?(n=void 0===e.value?0:e.value,function(){return n}):$v[t]}function pa(e){var n=e.field;return function(e){return e?n(e):NaN}}function ca(e,a,o,r){var l=function(e){return e(n)},s=[],d=r?r.slice():[],p={},c={},u,f,m,g,i,_,y,n;for(d.forEach(function(e,t){p[e]=t+1}),g=0,y=e.length;g<y;++g)n=e[g],_=o(n),i=p[_]||(p[_]=d.push(_)),f=(u=a?a.map(l):Wv)+"",(m=c[f])||(m=c[f]=[],s.push(m),m.values=u),m[i-1]=n;return s.domain=d,s}function ua(e){Mn.call(this,e)}function fa(e){ne.call(this,null,ma,e)}function ma(e){return this.value&&!e.modified()?this.value:$h(e.fields,e.flat)}function ga(e){bn.call(this,{},e)}function _a(e){ne.call(this,null,ya,e)}function ya(t){if(this.value&&!t.modified())return this.value;var a=+Infinity,o=-Infinity,r=t.extents,l,i,n;for(l=0,i=r.length;l<i;++l)n=r[l],n[0]<a&&(a=n[0]),n[1]>o&&(o=n[1]);return[a,o]}function ha(e){ne.call(this,null,ba,e)}function ba(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function xa(e){bn.call(this,null,e)}function va(e){ea.call(this,e)}function Sa(e){bn.call(this,null,e)}function Ta(e,t){return e?e.map(function(e,n){return t[n]||v(e)}):null}function ka(e,a,t,o){for(var r=0,i=t.length;r<i;++r)a[o[r]]=t[r](e);return a}function Ea(e){bn.call(this,null,e)}function Na(e){bn.call(this,null,e)}function La(e){bn.call(this,[],e),this.count=0}function Aa(e){bn.call(this,null,e)}function wa(e){bn.call(this,null,e),this.modified(!0)}function Ca(e){bn.call(this,Mh(),e)}function Oa(e){bn.call(this,null,e)}function Da(e,t,n,a){var i=nS[e](t,n);return{init:i.init||_h,update:function(e,n){n[a]=i.next(e)}}}function Pa(e){function t(e){Ah(m(e)).forEach(function(e){i[e]=1})}var n=this,a=Ah(e.ops),o=Ah(e.fields),r=Ah(e.params),l=Ah(e.as),s=n.outputs=[],d=n.windows=[],i={},p={},c=!0,u=[],f=[];t(e.sort),a.forEach(function(e,n){var a=o[n],i=v(a),g=kn(e,i,l[n]);if(t(a),s.push(g),nS.hasOwnProperty(e))d.push(Da(e,o[n],r[n],g));else{if(null==a&&"count"!==e&&lh("Null aggregate field specified."),"count"===e)return void u.push(g);c=!1;var _=p[i];_||(_=p[i]=[],_.field=a,f.push(_)),_.push(En(e,g))}}),(u.length||f.length)&&(n.cell=Ra(f,u,c)),n.inputs=Object.keys(i)}function Ra(e,o,r){e=e.map(function(e){return wn(e,e.field)});var l={num:0,agg:null,store:!1,count:o};if(!r)for(var s=e.length,d=l.agg=Array(s),t=0;t<s;++t)d[t]=new e[t](l);if(l.store)var a=l.data=new In;return l.add=function(e){if(l.num+=1,!r){a&&a.add(e);for(var t=0;t<s;++t)d[t].add(d[t].get(e),e)}},l.rem=function(e){if(l.num-=1,!r){a&&a.rem(e);for(var t=0;t<s;++t)d[t].rem(d[t].get(e),e)}},l.set=function(e){var t,i;for(a&&a.values(),t=0,i=o.length;t<i;++t)e[o[t]]=l.num;if(!r)for(t=0,i=d.length;t<i;++t)d[t].set(e)},l.init=function(){l.num=0,a&&a.reset();for(var e=0;e<s;++e)d[e].init()},l}function Ia(e){bn.call(this,{},e),this._mlen=0,this._mods=[]}function Ma(e,t,a){var o=a.sort,r=o&&!a.ignorePeers,l=a.frame||[null,0],s=e.data(o),d=s.length,n=0,i=r?Jx(o):null,p={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:o||Oh(-1)};for(t.init();n<d;++n)Fa(p,l,n,d),r&&Ba(p,i),t.update(p,s[n])}function Fa(e,t,a,i){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:N(0,a-T(t[0])),e.i1=null==t[1]?i:S(i,a+T(t[1])+1),e.index=a}function Ba(e,t){var a=e.i0,i=e.i1-1,o=e.compare,r=e.data,l=r.length-1;0<a&&!o(r[a],r[a-1])&&(e.i0=t.left(r,r[a])),i<l&&!o(r[i],r[i+1])&&(e.i1=t.right(r,r[i]))}function za(e){this.clear(),e&&this.union(e)}function ja(e){this.mark=e,this.bounds=this.bounds||new za}function Ua(e){ja.call(this,e),this.items=this.items||[]}function $a(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Wa(e,t){t=t.toLowerCase();for(var a=e.childNodes,o=0,i=a.length;o<i;++o)if(a[o].tagName.toLowerCase()===t)return a[o]}function qa(e,t,n,i){var o=e.childNodes[t],a;return o&&o.tagName.toLowerCase()===n.toLowerCase()||(a=o||null,o=$a(e.ownerDocument,n,i),e.insertBefore(o,a)),o}function Ha(e,t){for(var n=e.childNodes,a=n.length;a>t;)e.removeChild(n[--a]);return e}function Ya(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Va(e){this._pending=0,this._loader=e||Tb()}function Ga(e){e._pending+=1}function Za(e){e._pending-=1}function Xa(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ka(){return new Xa}function Ja(e){return 1<e?0:-1>e?kS:i(e)}function Qa(e){return 1<=e?ES:-1>=e?-ES:th(e)}function ei(e){return e.innerRadius}function ti(e){return e.outerRadius}function ni(e){return e.startAngle}function ai(e){return e.endAngle}function ii(e){return e&&e.padAngle}function oi(e,n,a,i,o,r,l,s){var d=a-e,p=i-n,c=l-o,u=s-r,f=(c*(n-r)-u*(e-o))/(u*d-c*p);return[e+f*d,n+f*p]}function ri(e,t,n,a,i,o,l){var s=e-n,p=t-a,c=(l?o:-o)/SS(s*s+p*p),u=c*p,f=-c*s,m=e+u,g=t+f,_=n+u,y=a+f,h=(m+_)/2,b=(g+y)/2,x=_-m,v=y-g,S=x*x+v*v,T=i-o,r=m*y-_*g,k=(0>v?-1:1)*SS(bS(0,T*T*S-r*r)),d=(r*v-x*k)/S,E=(-r*x-v*k)/S,N=(r*v+x*k)/S,A=(-r*x+v*k)/S,w=d-h,C=E-b,O=N-h,P=A-b;return w*w+C*C>O*O+P*P&&(d=N,E=A),{cx:d,cy:E,x01:-u,y01:-f,x11:d*(i/T-1),y11:E*(i/T-1)}}function li(e){this._context=e}function si(e){return e[0]}function di(e){return e[1]}function ci(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ui(e){this._context=e}function fi(e){this._context=e}function mi(e){this._context=e}function gi(e,t){this._basis=new ui(e),this._beta=t}function _i(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function yi(e,t){this._context=e,this._k=(1-t)/6}function hi(e,t){this._context=e,this._k=(1-t)/6}function bi(e,t){this._context=e,this._k=(1-t)/6}function xi(e,t,i){var o=e._x1,r=e._y1,l=e._x2,s=e._y2;if(e._l01_a>TS){var d=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,a=3*e._l01_a*(e._l01_a+e._l12_a);o=(o*d-e._x0*e._l12_2a+e._x2*e._l01_2a)/a,r=(r*d-e._y0*e._l12_2a+e._y2*e._l01_2a)/a}if(e._l23_a>TS){var n=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,p=3*e._l23_a*(e._l23_a+e._l12_a);l=(l*n+e._x1*e._l23_2a-t*e._l12_2a)/p,s=(s*n+e._y1*e._l23_2a-i*e._l12_2a)/p}e._context.bezierCurveTo(o,r,l,s,e._x2,e._y2)}function vi(e,t){this._context=e,this._alpha=t}function Si(e,t){this._context=e,this._alpha=t}function Ti(e,t){this._context=e,this._alpha=t}function ki(e){this._context=e}function Ei(e){return 0>e?-1:1}function Ni(e,t,n){var a=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(a||0>i&&-0),r=(n-e._y1)/(i||0>a&&-0);return(Ei(o)+Ei(r))*S(T(o),T(r),0.5*T((o*i+r*a)/(a+i)))||0}function Li(e,n){var t=e._x1-e._x0;return t?(3*(e._y1-e._y0)/t-n)/2:n}function Ai(e,t,n){var a=e._x0,i=e._y0,o=e._x1,r=e._y1,l=(o-a)/3;e._context.bezierCurveTo(a+l,i+l*t,o-l,r-l*n,o,r)}function wi(e){this._context=e}function Ci(e){this._context=new Oi(e)}function Oi(e){this._context=e}function Di(e){this._context=e}function Pi(e){var t=e.length-1,n=Array(t),a=Array(t),o=Array(t),r,i;for(n[0]=0,a[0]=2,o[0]=e[0]+2*e[1],r=1;r<t-1;++r)n[r]=1,a[r]=4,o[r]=4*e[r]+2*e[r+1];for(n[t-1]=2,a[t-1]=7,o[t-1]=8*e[t-1]+e[t],r=1;r<t;++r)i=n[r]/a[r-1],a[r]-=i,o[r]-=i*o[r-1];for(n[t-1]=o[t-1]/a[t-1],r=t-2;0<=r;--r)n[r]=(o[r]-n[r+1])/a[r];for(a[t-1]=(e[t]+n[t-1])/2,r=0;r<t-1;++r)a[r]=2*e[r+1]-n[r+1];return[n,a]}function Ri(e,n){this._context=e,this._t=n}function Ii(e,t,n){var a=zS.hasOwnProperty(e)&&zS[e],i=null;return a&&(i=a.curve||a[t||"vertical"],a.tension&&null!=n&&(i=i[a.tension](n))),i}function Mi(e,t,n,a,r,l,d,f,m){var g=HS.call(arguments);if(WS[g])return WS[g];var _=d*(o/180),y=s(_),h=c(_);n=T(n),a=T(a);var b=0.5*(h*(f-e))+0.5*(y*(m-t)),x=0.5*(h*(m-t))-0.5*(y*(f-e)),v=b*b/(n*n)+x*x/(a*a);1<v&&(v=u(v),n*=v,a*=v);var S=h/n,k=y/n,E=-y/a,N=h/a,A=S*f+k*m,w=E*f+N*m,C=S*e+k*t,O=E*e+N*t,D=1/((C-A)*(C-A)+(O-w)*(O-w))-0.25;0>D&&(D=0);var P=u(D);l==r&&(P=-P);var R=0.5*(A+C)-P*(O-w),I=0.5*(w+O)+P*(C-A),M=nh(w-I,A-R),F=nh(O-I,C-R),B=F-M;0>B&&1===l?B+=2*o:0<B&&0===l&&(B-=2*o);for(var z=p(T(B/(0.5*o+1e-3))),j=[],U=0;U<z;++U){var i=M+U*B/z,$=M+(U+1)*B/z;j[U]=[R,I,i,$,n,a,y,h]}return WS[g]=j}function Fi(e){var n=HS.call(e);if(qS[n])return qS[n];var a=e[0],i=e[1],o=e[2],r=e[3],l=e[4],d=e[5],p=e[6],u=e[7],f=u*l,m=-p*d,g=p*l,_=u*d,y=c(o),h=s(o),b=c(r),x=s(r),v=0.5*(r-o),S=s(0.5*v),T=8/3*S*S/s(v),t=a+y-T*h,k=i+h+T*y,E=a+b,N=i+x,A=E+T*x,w=N-T*b;return qS[n]=[f*t+m*k,g*t+_*k,f*A+m*w,g*A+_*w,f*E+m*N,g*E+_*N]}function Bi(e,t){var a=YS[0]=e[0];if("a"===a||"A"===a)YS[1]=t*e[1],YS[2]=t*e[2],YS[6]=t*e[6],YS[7]=t*e[7];else for(var o=1,i=e.length;o<i;++o)YS[o]=t*e[o];return YS}function zi(e,t,n,a){for(var o=Mi(a[5],a[6],a[0],a[1],a[3],a[4],a[2],t,n),r=0,i;r<o.length;++r)i=Fi(o[r]),e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}function ji(e){return ZS.hasOwnProperty(e)?ZS[e]:Ui(e)}function Ui(e){if(!XS.hasOwnProperty(e)){var t=$S(e);XS[e]={draw:function(e,n){VS(e,t,0,0,u(n)/2)}}}return XS[e]}function $i(e){return e.x}function Wi(e){return e.y}function qi(e){return e.width}function Hi(e){return e.height}function Yi(e){return function(){return e}}function Vi(e){return e.x||0}function x(e){return e.y||0}function y(e){return e.cornerRadius||0}function Gi(e){return!1!==e.defined}function Zi(e,t,n,a){return iT.context(e)(t,n,a)}function Xi(e){return pT=e,Xi}function Ki(){}function Ji(e,t){pT.add(e,t)}function Qi(e,t){return e.zindex-t.zindex||e.index-t.index}function eo(e){if(!e.zdirty)return e.zitems;var t=e.items,a=[],o,r,i;for(r=0,i=t.length;r<i;++r)o=t[r],o.index=r,o.zindex&&a.push(o);return e.zdirty=!1,e.zitems=a.sort(Qi)}function to(e,t){var a=e.items,o,i;if(a&&a.length){var n=eo(e);if(n&&n.length){for(o=0,i=a.length;o<i;++o)a[o].zindex||t(a[o]);a=n}for(o=0,i=a.length;o<i;++o)t(a[o])}}function no(e,t){var n=e.items,a,o;if(!n||!n.length)return null;var i=eo(e);for(i&&i.length&&(n=i),o=n.length;0<=--o;)if(a=t(n[o]))return a;if(n===i)for(n=e.items,o=n.length;0<=--o;)if(!n[o].zindex&&(a=t(n[o])))return a;return null}function ao(e){return function(t,n,a){to(n,function(n){(!a||a.intersects(n.bounds))&&oo(e,t,n,n)})}}function io(e){return function(t,n,a){n.items.length&&(!a||a.intersects(n.bounds))&&oo(e,t,n.items[0],n.items)}}function oo(e,t,n,a){var i=null==n.opacity?1:n.opacity;0===i||e(t,a)||(n.fill&&fT(t,n,i)&&t.fill(),n.stroke&&gT(t,n,i)&&t.stroke())}function ro(e){return e||(e=_T),function(t,n,a,i,o,r){return 1<t.pixelRatio&&(a*=t.pixelRatio,i*=t.pixelRatio),no(n,function(n){var l=n.bounds;return(!l||l.contains(o,r))&&l?e(t,n,a,i,o,r)?n:void 0:void 0})}}function lo(e,t){return function(n,a,i,o){var r=Array.isArray(a)?a[0]:a,l=null==t?r.fill:t,s=r.stroke&&n.isPointInStroke,d,p;return s&&(d=r.strokeWidth,p=r.strokeCap,n.lineWidth=null==d?1:d,n.lineCap=null==p?"butt":p),!e(n,a)&&(l&&n.isPointInPath(i,o)||s&&n.isPointInStroke(i,o))}}function so(e){return ro(lo(e))}function po(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}function co(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function uo(e,t){return"center"===e?t/2:"right"===e?t:0}function fo(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function mo(e,t){var n=t.path;if(null==n)return!0;var a=t.pathCache;a&&a.path===n||((t.pathCache=a=$S(n)).path=n),VS(e,a,t.x,t.y)}function go(e,t){e.beginPath(),Zi(e,t)}function _o(e,t,n){var a,i,o,r;return t.stroke&&gT(e,t,n)&&(a=t.x||0,i=t.y||0,o=null==t.x2?a:t.x2,r=null==t.y2?i:t.y2,e.beginPath(),e.moveTo(a,i),e.lineTo(o,r),!0)}function yo(e){return IT=vo(e),ho(To(e))}function ho(e){return~~(0.8*e.length*IT)}function bo(e){return RT.font=Eo(e),xo(To(e))}function xo(e){return RT.measureText(e).width}function vo(e){return null==e.fontSize?11:e.fontSize}function So(e){RT=e&&(RT=pS(1,1))?RT.getContext("2d"):null,PT.width=RT?bo:yo}function To(e){var t=e.text;return null==t?"":0<e.limit?ko(e):t+""}function ko(e){var t=+e.limit,n=e.text+"",a;if(RT?(RT.font=Eo(e),a=xo):(IT=vo(e),a=ho),a(n)<t)return n;var i=e.ellipsis||"\u2026",o="rtl"===e.dir,r=0,l=n.length,s;if(t-=a(i),o){for(;r<l;)s=r+l>>>1,a(n.slice(s))>t?r=s+1:l=s;return i+n.slice(r)}for(;r<l;)s=1+(r+l>>>1),a(n.slice(0,s))<t?r=s:l=s-1;return n.slice(0,r)+i}function Eo(e,t){var n=e.font;return t&&n&&(n=(n+"").replace(/"/g,"'")),""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+vo(e)+"px "+(n||"sans-serif")}function No(e){var t=e.baseline,n=vo(e);return l("top"===t?0.79*n:"middle"===t?0.3*n:"bottom"===t?-0.21*n:0)}function Lo(e,n,i){var d=PT.height(n),p=n.align,a=n.radius||0,r=n.x||0,u=n.y||0,f=n.dx||0,m=(n.dy||0)+No(n)-l(0.8*d),g,_;return a&&(_=(n.theta||0)-o/2,r+=a*c(_),u+=a*s(_)),g=PT.width(n),"center"===p?f-=g/2:"right"===p&&(f-=g),e.set(f+=r,m+=u,f+g,m+d),n.angle&&!i&&e.rotate(n.angle*o/180,r,u),e.expand(i||!g?0:1)}function Ao(e,t){return JSON.stringify(e,qT,t)}function wo(e){var t="string"==typeof e?JSON.parse(e):e;return Co(t)}function Co(e){var t=e.marktype,a=e.items,o,r,i;if(a)for(r=0,i=a.length;r<i;++r)o=t?"mark":"group",a[r][o]=e,a[r].zindex&&(a[r][o].zdirty=!0),"group"===(t||o)&&Co(a[r]);return t&&WT(e),e}function Oo(e){arguments.length?this.root=wo(e):(this.root=Do({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Ua(this.root)])}function Do(e,t){return{bounds:new za,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function Po(e){this._active=null,this._handlers={},this._loader=e||Tb()}function Ro(e){this._el=null,this._bgcolor=null,this._loader=new Va(e)}function Io(e){Po.call(this,e),this._down=null,this._touch=null,this._first=!0}function Mo(e,t,n){return function(i){var o=this._active,r=this.pickEvent(i);r===o?this.fire(e,i):((!o||!o.exit)&&this.fire(n,i),this._active=r,this.fire(t,i),this.fire(e,i))}}function Fo(e){return function(t){this.fire(e,t),this._active=null}}function Bo(e){Ro.call(this,e),this._redraw=!1,this._dirty=new za}function zo(e,t,n){return t.expand(1).round(),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}function jo(e,t){if(null==t)return e;for(var n=nk.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}function Uo(e){Po.call(this,e);var t=this;t._hrefHandler=$o(t,function(e,n){n&&n.href&&t.handleHref(e,n,n.href)}),t._tooltipHandler=$o(t,function(e,n){n&&n.tooltip&&t.handleTooltip(e,n,"mouseover"===e.type?n.tooltip:null)})}function $o(e,t){return function(n){var a=n.target,i=a.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,t.call(e._obj,n,i)}}function Wo(e,t,n){var a="<"+e,i,o;if(t)for(i in t)o=t[i],null!=o&&(a+=" "+i+"=\""+o+"\"");return n&&(a+=" "+n),a+">"}function qo(e){return"</"+e+">"}function Ho(e){Ro.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Yo(e,t,a){var o,i,n;for(e=qa(e,a,"linearGradient",lk),e.setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),(o=0,i=t.stops.length);o<i;++o)n=qa(e,o,"stop",lk),n.setAttribute("offset",t.stops[o].offset),n.setAttribute("stop-color",t.stops[o].color);Ha(e,o)}function Vo(e,t,n){var a;e=qa(e,n,"clipPath",lk),e.setAttribute("id",t.id),a=qa(e,0,"rect",lk),a.setAttribute("x",0),a.setAttribute("y",0),a.setAttribute("width",t.width),a.setAttribute("height",t.height)}function Go(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Zo(e,t,n){t=t.lastChild;var a=0,i;to(n,function(n){i=e.draw(t,n,i),++a}),Ha(t,1+a)}function Xo(e,t,n,a){var i=e._svg,o;if(!i&&(o=t.ownerDocument,i=$a(o,a,lk),e._svg=i,e.mark&&(i.__data__=e,i.__values__={fill:"default"},"g"===a))){var r=$a(o,"path",lk);r.setAttribute("class","background"),i.appendChild(r),r.__data__=e;var l=$a(o,"g",lk);i.appendChild(l),l.__data__=e}return(o||i.previousSibling!==n||!n)&&t.insertBefore(i,n?n.nextSibling:t.firstChild),i}function Ko(e,t,n){t===pk[e]||(null==t?n?dk.removeAttributeNS(n,e):dk.removeAttribute(e):n?dk.setAttributeNS(n,e,t):dk.setAttribute(e,t),pk[e]=t)}function Jo(){var e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Qo(e){Ro.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function er(e,t,n,a){mk[a||e]=t}function tr(e,t,a,o){if(null==e)return"";var r="",l,i,n,s,d;for("bgrect"===a&&!1===t.interactive&&(r+="pointer-events: none;"),"text"===a&&(r+="font: "+Eo(e)+";"),(l=0,i=rk.length);l<i;++l)n=rk[l],s=ok[n],d=e[n],null==d?"fill"===s&&(r+=(r.length?" ":"")+"fill: none;"):(d.id&&(o.gradient[d.id]=d,d="url(#"+d.id+")"),r+=(r.length?" ":"")+s+": "+d+";");return r?"style=\""+r+"\"":null}function nr(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ar(e,t){return e=((e||"")+"").toLowerCase(),1<arguments.length?(xk[e]=t,this):xk[e]}function ir(e,t,n){return!(e!==t)||("path"===n?or(e,t):e instanceof Date&&t instanceof Date?+e==+t:jh(e)&&jh(t)?T(e-t)<=vk:e&&t&&(ph(e)||ph(t))?null==e||null==t?!1:rr(e,t):e==t)}function or(e,t){return ir($S(e),$S(t))}function rr(e,t){var n=Object.keys(e),o=Object.keys(t),r,l;if(n.length!==o.length)return!1;for(n.sort(),o.sort(),l=n.length-1;0<=l;l--)if(n[l]!=o[l])return!1;for(l=n.length-1;0<=l;l--)if(r=n[l],!ir(e[r],t[r],r))return!1;return typeof e==typeof t}function lr(e){bn.call(this,null,e)}function sr(e,t,n){return t(e.bounds.clear(),e,n)}function dr(e){bn.call(this,0,e)}function pr(e){var t=e._signals[kk];return t||(e._signals[kk]=t=e.add(0)),t}function cr(e){bn.call(this,null,e)}function ur(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}/**
 * Analyze items for overlap, changing opacity to hide items with
 * overlapping bounding boxes. This transform will preserve at least
 * two items (e.g., first and last) even if overlap persists.
 * @param {object} params - The parameters for this operator.
 * @param {function(*,*): number} [params.sort] - A comparator
 *   function for sorting items.
 * @param {object} [params.method] - The overlap removal method to apply.
 *   One of 'parity' (default, hide every other item until there is no
 *   more overlap) or 'greedy' (sequentially scan and hide and items that
 *   overlap with the last visible item).
 * @param {object} [params.boundScale] - A scale whose range should be used
 *   to bound the items. Items exceeding the bounds of the scale range
 *   will be treated as overlapping. If null or undefined, no bounds check
 *   will be applied.
 * @param {object} [params.boundOrient] - The orientation of the scale
 *   (top, bottom, left, or right) used to bound items. This parameter is
 *   ignored if boundScale is null or undefined.
 * @param {object} [params.boundTolerance] - The tolerance in pixels for
 *   bound inclusion testing (default 1). This specifies by how many pixels
 *   an item's bounds may exceed the scale range bounds and not be culled.
 * @constructor
 */function fr(e){bn.call(this,null,e)}function mr(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function gr(e){for(var t=1,i=e.length,n=e[0].bounds,a;t<i;n=a,++t)if(mr(n,a=e[t].bounds))return!0}function _r(e){var t=e.bounds;return 1<t.width()&&1<t.height()}function yr(e,t,n){var a=e.range(),i=new za;return t===Lk||t===Ck?i.set(a[0],-Infinity,a[1],+Infinity):i.set(-Infinity,a[0],+Infinity,a[1]),i.expand(n||1),function(e){return i.encloses(e.bounds)}}function hr(e){bn.call(this,null,e)}function br(e){for(var t=e.items,a=t.length,n=0,i={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null},o,r;n<a;++n)if(o=t[n],r=o.items,"group"===o.marktype)switch(o.role){case Rk:case Ik:break;case Mk:xr(r,i.rowheaders);break;case Fk:xr(r,i.rowfooters);break;case zk:xr(r,i.colheaders);break;case jk:xr(r,i.colfooters);break;case Bk:i.rowtitle=r[0];break;case Uk:i.coltitle=r[0];break;default:xr(r,i.marks);}return i}function xr(e,t){for(var a=0,i=e.length;a<i;++a)t.push(e[a])}function vr(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function Sr(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Tr(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function kr(e,t){return e.bounds[t]}function Er(e,t,n){var a=ph(e)?e[t]:e;return null==a?n===void 0?0:n:a}function Nr(e){return 0>e?p(-e):0}function Lr(e,t,a){function o(e,t){return E(S(e,t))}function l(e,t){return p(N(e,t))}var s=br(t,a),d=s.marks,u="flush"===a.bounds,f=u?vr:Sr,_=new za(0,0,0,0),h=Er(a.align,"column"),v=Er(a.align,"row"),T=Er(a.padding,"column"),k=Er(a.padding,"row"),A=a.offset,w=t.columns||a.columns||d.length,C=0>w?1:p(d.length/w),O=[],D=[],P=[],R=[],I=d.length,n,m,i,c,r,b,g,M,F,x,y,B,z;for(m=0;m<w;++m)D[m]=0;for(m=0;m<C;++m)R[m]=0;for(m=0;m<I;++m)r=f(d[m]),i=m%w,c=~~(m/w),g=i?p(f(d[m-1]).x2):0,M=c?p(f(d[m-w]).y2):0,D[i]=N(D[i],g),R[c]=N(R[c],M),O.push(T+Nr(r.x1)),P.push(k+Nr(r.y1)),e.dirty(d[m]);for(m=0;m<I;++m)0==m%w&&(O[m]=0),m<w&&(P[m]=0);if("each"===h)for(i=1;i<w;++i){for(z=0,m=i;m<I;m+=w)z<O[m]&&(z=O[m]);for(m=i;m<I;m+=w)O[m]=z+D[i]}else if("all"===h){for(B=0,i=1;i<w;++i)B<D[i]&&(B=D[i]);for(z=0,m=0;m<I;++m)m%w&&z<O[m]&&(z=O[m]);for(m=0;m<I;++m)m%w&&(O[m]=z+B)}else for(i=1;i<w;++i)for(m=i;m<I;m+=w)O[m]+=D[i];if("each"===v)for(c=1;c<C;++c){for(z=0,m=c*w,n=m+w;m<n;++m)z<P[m]&&(z=P[m]);for(m=c*w;m<n;++m)P[m]=z+R[c]}else if("all"===v){for(B=0,c=1;c<C;++c)B<R[c]&&(B=R[c]);for(z=0,m=w;m<I;++m)z<P[m]&&(z=P[m]);for(m=w;m<I;++m)P[m]=z+B}else for(c=1;c<C;++c)for(m=c*w,n=m+w;m<n;++m)P[m]+=R[c];for(F=0,m=0;m<I;++m)b=d[m],g=b.x||0,b.x=F=O[m]+(m%w?F:0),b.bounds.translate(F-g,0);for(i=0;i<w;++i)for(x=0,m=i;m<I;m+=w)b=d[m],M=b.y||0,b.y=x+=P[m],b.bounds.translate(0,x-M);for(m=0;m<I;++m)d[m].mark.bounds.clear();for(m=0;m<I;++m)b=d[m],e.dirty(b),_.union(b.mark.bounds.union(b.bounds));f=u?Tr:kr,y=Er(a.headerBand,"row",null),F=Ar(e,s.rowheaders,d,w,C,-Er(A,"rowHeader"),o,0,f,"x1",0,w,1,y),y=Er(a.headerBand,"column",null),x=Ar(e,s.colheaders,d,w,w,-Er(A,"columnHeader"),o,1,f,"y1",0,1,w,y),y=Er(a.footerBand,"row",null),Ar(e,s.rowfooters,d,w,C,Er(A,"rowFooter"),l,0,f,"x2",w-1,w,1,y),y=Er(a.footerBand,"column",null),Ar(e,s.colfooters,d,w,w,Er(A,"columnFooter"),l,1,f,"y2",C*w-w,1,w,y),s.rowtitle&&(z=F-Er(A,"rowTitle"),y=Er(a.titleBand,"row",0.5),wr(e,s.rowtitle,z,0,_,y)),s.coltitle&&(z=x-Er(A,"columnTitle"),y=Er(a.titleBand,"column",0.5),wr(e,s.coltitle,z,1,_,y))}function Ar(e,t,a,o,r,s,d,p,c,u,f,_,v,S){var T=a.length,E=0,N=0,A,i,w,k,m,b,h,g,x;if(!T)return E;for(A=f;A<T;A+=_)a[A]&&(E=d(E,c(a[A],u)));if(!t.length)return E;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),E+=s,(i=0,k=t.length);i<k;++i)e.dirty(t[i]),t[i].mark.bounds.clear();for(A=f,i=0,k=t.length;i<k;++i,A+=_){for(b=t[i],m=b.mark.bounds,w=A;0<=w&&null==(h=a[w]);w-=v);p?(g=null==S?h.x:l(h.bounds.x1+S*h.bounds.width()),x=E):(g=E,x=null==S?h.y:l(h.bounds.y1+S*h.bounds.height())),m.union(b.bounds.translate(g-(b.x||0),x-(b.y||0))),b.x=g,b.y=x,e.dirty(b),N=d(N,m[u])}return N}function wr(e,t,n,a,i,o){if(t){e.dirty(t);var r=n,s=n;a?r=l(i.x1+o*i.width()):s=l(i.y1+o*i.height()),t.bounds.translate(r-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=r,t.y=s,e.dirty(t)}}function Cr(e){bn.call(this,null,e)}function Or(e,t,a){var o=t.items,r=N(0,t.width||0),l=N(0,t.height||0),s=new za().set(0,0,r,l),d=s.clone(),p=s.clone(),c=s.clone(),u=[],f,m,g,_,y,i;for(y=0,i=o.length;y<i;++y)switch(m=o[y],m.role){case Yk:d.union(_=Ir(e,m,r,l)),(Pr(m)?p:c).union(_);break;case Vk:f=m;break;case Zk:u.push(m);break;case Gk:case Xk:case Kk:case Jk:case Qk:case eE:p.union(m.bounds),c.union(m.bounds);break;default:s.union(m.bounds);}if(f&&(d.union(_=Mr(e,f,d)),(Pr(f)?p:c).union(_)),u.length)for(g={left:0,right:0,top:0,bottom:0,margin:a.legendMargin||8},y=0,i=u.length;y<i;++y)if(_=Fr(e,u[y],g,p,c,r,l),a.autosize&&a.autosize.type===$k){var n=u[y].items[0].datum.orient;n===Ak||n===wk?s.add(_.x1,0).add(_.x2,0):(n===Lk||n===Ck)&&s.add(0,_.y1).add(0,_.y2)}else s.union(_);s.union(p).union(c).union(d),Br(e,t,s,a)}function Dr(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Pr(e){var t=e.items[0].datum.orient;return t===Ak||t===wk}function Rr(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Ir(e,t,n,a){var o=t.items[0],r=o.datum,l=r.orient,d=Rr(r),p=o.range,c=o.offset,u=o.position,f=o.minExtent,m=o.maxExtent,g=r.title&&o.items[d[2]].items[0],_=o.titlePadding,h=o.bounds,b=0,x=0,y,i;return nE.clear().union(h),h.clear(),-1<(y=d[0])&&h.union(o.items[y].bounds),-1<(y=d[1])&&h.union(o.items[y].bounds),l===Lk?(b=u||0,x=-c,i=N(f,S(m,-h.y1)),g&&(g.auto?(i+=_,g.y=-i,i+=g.bounds.height(),h.add(g.bounds.x1,0).add(g.bounds.x2,0)):h.union(g.bounds)),h.add(0,-i).add(p,0)):l===Ak?(b=-c,x=u||0,i=N(f,S(m,-h.x1)),g&&(g.auto?(i+=_,g.x=-i,i+=g.bounds.width(),h.add(0,g.bounds.y1).add(0,g.bounds.y2)):h.union(g.bounds)),h.add(-i,0).add(0,p)):l===wk?(b=n+c,x=u||0,i=N(f,S(m,h.x2)),g&&(g.auto?(i+=_,g.x=i,i+=g.bounds.width(),h.add(0,g.bounds.y1).add(0,g.bounds.y2)):h.union(g.bounds)),h.add(0,0).add(i,p)):l===Ck?(b=u||0,x=a+c,i=N(f,S(m,h.y2)),g&&(g.auto?(i+=_,g.y=i,i+=g.bounds.height(),h.add(g.bounds.x1,0).add(g.bounds.x2,0)):h.union(g.bounds)),h.add(0,0).add(p,i)):(b=o.x,x=o.y),(lT(h.translate(b,x),o),Dr(o,"x",b+tE)|Dr(o,"y",x+tE)&&(o.bounds=nE,e.dirty(o),o.bounds=h,e.dirty(o)),o.mark.bounds.clear().union(h))}function Mr(e,t,n){var a=t.items[0],i=a.datum,o=i.orient,r=a.offset,l=a.bounds,s=0,d=0;return nE.clear().union(l),o===Lk?(s=a.x,d=n.y1-r):o===Ak?(s=n.x1-r,d=a.y):o===wk?(s=n.x2+r,d=a.y):o===Ck?(s=a.x,d=n.y2+r):(s=a.x,d=a.y),(l.translate(s-a.x,d-a.y),Dr(a,"x",s)|Dr(a,"y",d)&&(a.bounds=nE,e.dirty(a),a.bounds=l,e.dirty(a)),t.bounds.clear().union(l))}function Fr(e,t,n,a,i,o,r){var s=t.items[0],d=s.datum,c=d.orient,u=s.offset,f=s.bounds,m=0,g=0,_,y,h;return c===Lk||c===Ck?(h=i,m=n[c]):(c===Ak||c===wk)&&(h=a,g=n[c]),nE.clear().union(f),f.clear(),s.items.forEach(function(e){f.union(e.bounds)}),_=l(f.width())+2*s.padding-1,y=l(f.height())+2*s.padding-1,c===Ak?(m-=_+u-E(h.x1),n.left+=y+n.margin):c===wk?(m+=u+p(h.x2),n.right+=y+n.margin):c===Lk?(g-=y+u-E(h.y1),n.top+=_+n.margin):c===Ck?(g+=u+p(h.y2),n.bottom+=_+n.margin):"top-left"===c?(m+=u,g+=u):"top-right"===c?(m+=o-_-u,g+=u):"bottom-left"===c?(m+=u,g+=r-y-u):"bottom-right"===c?(m+=o-_-u,g+=r-y-u):(m=s.x,g=s.y),(lT(f.set(m,g,m+_,g+y),s),Dr(s,"x",m)|Dr(s,"width",_)|Dr(s,"y",g)|Dr(s,"height",y)&&(s.bounds=nE,e.dirty(s),s.bounds=f,e.dirty(s)),s.mark.bounds.clear().union(f))}function Br(e,t,n,a){var i=a.autosize||{},o=i.type,r=e._width,l=e._height,s=e.padding();if(!(1>e._autosize)&&o){var d=N(0,t.width||0),c=N(0,p(-n.x1)),u=N(0,p(n.x2-d)),f=N(0,t.height||0),m=N(0,p(-n.y1)),g=N(0,p(n.y2-f));i.contains===Hk&&(r-=s.left+s.right,l-=s.top+s.bottom),o===qk?(c=0,m=0,d=r,f=l):o===$k?(d=N(0,r-c-u),f=N(0,l-m-g)):o===Wk&&(r=d+c+u,l=f+m+g),e._resizeView(r,l,d,f,[c,m],i.resize)}}function zr(e){function t(t){var r=t+"",l=a.get(r);if(!l){if(n!==TE)return n;a.set(r,l=o.push(t))}return e[(l-1)%e.length]}var a=se(),o=[],n=TE;return e=null==e?[]:SE.call(e),t.domain=function(e){if(!arguments.length)return o.slice();o=[],a=se();for(var r=-1,i=e.length,n,l;++r<i;)a.has(l=(n=e[r])+"")||a.set(l,o.push(n));return t},t.range=function(n){return arguments.length?(e=SE.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(n=e,t):n},t.copy=function(){return zr().domain(o).range(e).unknown(n)},t}function jr(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Ur(){}function $r(e){var t;return e=(e+"").trim().toLowerCase(),(t=LE.exec(e))?(t=parseInt(t[1],16),new Vr(15&t>>8|240&t>>4,15&t>>4|240&t,(15&t)<<4|15&t,1)):(t=AE.exec(e))?Wr(parseInt(t[1],16)):(t=wE.exec(e))?new Vr(t[1],t[2],t[3],1):(t=CE.exec(e))?new Vr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=OE.exec(e))?qr(t[1],t[2],t[3],t[4]):(t=DE.exec(e))?qr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=PE.exec(e))?Gr(t[1],t[2]/100,t[3]/100,1):(t=RE.exec(e))?Gr(t[1],t[2]/100,t[3]/100,t[4]):IE.hasOwnProperty(e)?Wr(IE[e]):"transparent"===e?new Vr(NaN,NaN,NaN,0):null}function Wr(e){return new Vr(255&e>>16,255&e>>8,255&e,1)}function qr(e,t,n,i){return 0>=i&&(e=t=n=NaN),new Vr(e,t,n,i)}function Hr(e){return(e instanceof Ur||(e=$r(e)),!e)?new Vr:(e=e.rgb(),new Vr(e.r,e.g,e.b,e.opacity))}function Yr(e,t,n,a){return 1===arguments.length?Hr(e):new Vr(e,t,n,null==a?1:a)}function Vr(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}function Gr(e,t,n,i){return 0>=i?e=t=n=NaN:0>=n||1<=n?e=t=NaN:0>=t&&(e=NaN),new Kr(e,t,n,i)}function Zr(e){if(e instanceof Kr)return new Kr(e.h,e.s,e.l,e.opacity);if(e instanceof Ur||(e=$r(e)),!e)return new Kr;if(e instanceof Kr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,i=S(t,n,a),r=N(t,n,a),d=NaN,p=r-i,s=(r+i)/2;return p?(d=t===r?(n-a)/p+6*(n<a):n===r?(a-t)/p+2:(t-n)/p+4,p/=0.5>s?r+i:2-r-i,d*=60):p=0<s&&1>s?0:d,new Kr(d,p,s,e.opacity)}function Xr(e,t,n,a){return 1===arguments.length?Zr(e):new Kr(e,t,n,null==a?1:a)}function Kr(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}function Jr(e,t,n){return 255*(60>e?t+(n-t)*e/60:180>e?n:240>e?t+(n-t)*(240-e)/60:t)}function Qr(e){if(e instanceof tl)return new tl(e.l,e.a,e.b,e.opacity);if(e instanceof sl){var t=e.h*ME;return new tl(e.l,c(t)*e.c,s(t)*e.c,e.opacity)}e instanceof Vr||(e=Hr(e));var n=ol(e.r),i=ol(e.g),a=ol(e.b),o=nl((0.4124564*n+0.3575761*i+0.1804375*a)/Kn),r=nl((0.2126729*n+0.7151522*i+0.072175*a)/Xn),l=nl((0.0193339*n+0.119192*i+0.9503041*a)/Yn);return new tl(116*r-16,500*(o-r),200*(r-l),e.opacity)}function el(e,t,n,a){return 1===arguments.length?Qr(e):new tl(e,t,n,null==a?1:a)}function tl(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function nl(e){return e>UE?g(e,1/3):e/jE+Zn}function al(e){return e>zE?e*e*e:jE*(e-Zn)}function il(e){return 255*(0.0031308>=e?12.92*e:1.055*g(e,1/2.4)-0.055)}function ol(e){return 0.04045>=(e/=255)?e/12.92:g((e+0.055)/1.055,2.4)}function rl(e){if(e instanceof sl)return new sl(e.h,e.c,e.l,e.opacity);e instanceof tl||(e=Qr(e));var t=nh(e.b,e.a)*FE;return new sl(0>t?t+360:t,u(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ll(e,t,n,a){return 1===arguments.length?rl(e):new sl(e,t,n,null==a?1:a)}function sl(e,t,n,a){this.h=+e,this.c=+t,this.l=+n,this.opacity=+a}function dl(e){if(e instanceof cl)return new cl(e.h,e.s,e.l,e.opacity);e instanceof Vr||(e=Hr(e));var t=e.r/255,n=e.g/255,a=e.b/255,i=(HE*a+WE*t-qE*n)/(HE+WE-qE),o=a-i,r=(D*(n-i)-B*o)/C,l=u(r*r+o*o)/(D*i*(1-i)),s=l?nh(r,o)*FE-120:NaN;return new cl(0>s?s+360:s,l,i,e.opacity)}function pl(e,t,n,a){return 1===arguments.length?dl(e):new cl(e,t,n,null==a?1:a)}function cl(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}function ul(e,t,n,a,i){var o=e*e,r=o*e;return((1-3*e+3*o-r)*t+(4-6*o+3*r)*n+(1+3*e+3*o-3*r)*a+r*i)/6}function fl(e,n){return function(a){return e+a*n}}function ml(e,n,a){return e=g(e,a),n=g(n,a)-e,a=1/a,function(i){return g(e+i*n,a)}}function gl(e,t){var n=t-e;return n?fl(e,180<n||-180>n?n-360*l(n/360):n):GE(isNaN(e)?t:e)}function _l(e){return 1==(e=+e)?yl:function(t,n){return n-t?ml(t,n,e):GE(isNaN(t)?n:t)}}function yl(e,t){var n=t-e;return n?fl(e,n):GE(isNaN(e)?t:e)}function hl(e){return function(t){var a=t.length,n=Array(a),o=Array(a),r=Array(a),l,i;for(l=0;l<a;++l)i=Yr(t[l]),n[l]=i.r||0,o[l]=i.g||0,r[l]=i.b||0;return n=e(n),o=e(o),r=e(r),i.opacity=1,function(e){return i.r=n(e),i.g=o(e),i.b=r(e),i+""}}}function bl(e){return function(){return e}}function xl(e){return function(n){return e(n)+""}}function vl(e,t,n,i){function o(e){return e.length?e.pop()+" ":""}function r(e,a,o,r,l,s){if(e!==o||a!==r){var d=l.push("translate(",null,t,null,n);s.push({i:d-4,x:eN(e,o)},{i:d-2,x:eN(a,r)})}else(o||r)&&l.push("translate("+o+t+r+n)}function l(e,t,n,a){e===t?t&&n.push(o(n)+"rotate("+t+i):(180<e-t?t+=360:180<t-e&&(e+=360),a.push({i:n.push(o(n)+"rotate(",null,i)-2,x:eN(e,t)}))}function d(e,t,n,a){e===t?t&&n.push(o(n)+"skewX("+t+i):a.push({i:n.push(o(n)+"skewX(",null,i)-2,x:eN(e,t)})}function p(e,t,n,a,r,l){if(e!==n||t!==a){var s=r.push(o(r)+"scale(",null,",",null,")");l.push({i:s-4,x:eN(e,n)},{i:s-2,x:eN(t,a)})}else(1!==n||1!==a)&&r.push(o(r)+"scale("+n+","+a+")")}return function(t,n){var a=[],s=[];return t=e(t),n=e(n),r(t.translateX,t.translateY,n.translateX,n.translateY,a,s),l(t.rotate,n.rotate,a,s),d(t.skewX,n.skewX,a,s),p(t.scaleX,t.scaleY,n.scaleX,n.scaleY,a,s),t=n=null,function(e){for(var t=-1,i=s.length,n;++t<i;)a[(n=s[t]).i]=n.x(e);return a.join("")}}}function Sl(e){return((e=a(e))+1/e)/2}function Tl(e){return((e=a(e))-1/e)/2}function kl(e){return((e=a(2*e))-1)/(e+1)}function El(e){return function(n,t){var a=e((n=Xr(n)).h,(t=Xr(t)).h),i=yl(n.s,t.s),o=yl(n.l,t.l),r=yl(n.opacity,t.opacity);return function(e){return n.h=a(e),n.s=i(e),n.l=o(e),n.opacity=r(e),n+""}}}function Nl(e){return function(n,t){var a=e((n=ll(n)).h,(t=ll(t)).h),i=yl(n.c,t.c),o=yl(n.l,t.l),r=yl(n.opacity,t.opacity);return function(e){return n.h=a(e),n.c=i(e),n.l=o(e),n.opacity=r(e),n+""}}}function Ll(e){return function t(n){function a(a,t){var i=e((a=pl(a)).h,(t=pl(t)).h),o=yl(a.s,t.s),r=yl(a.l,t.l),l=yl(a.opacity,t.opacity);return function(e){return a.h=i(e),a.s=o(e),a.l=r(g(e,n)),a.opacity=l(e),a+""}}return n=+n,a.gamma=t,a}(1)}function Al(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:SN(t)}function wl(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:i(e)}}}function Cl(e){return function(n,i){var o=e(n=+n,i=+i);return function(e){return 0>=e?n:1<=e?i:o(e)}}}function Ol(e,t,n,a){var i=e[0],o=e[1],r=t[0],l=t[1];return o<i?(i=n(o,i),r=a(l,r)):(i=n(i,o),r=a(r,l)),function(e){return r(i(e))}}function Dl(e,t,n,a){var o=S(e.length,t.length)-1,l=Array(o),s=Array(o),r=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++r<o;)l[r]=n(e[r],e[r+1]),s[r]=a(t[r],t[r+1]);return function(t){var n=ev(e,t,1,o)-1;return s[n](l[n](t))}}function Pl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Rl(e,t){function n(){return s=2<S(i.length,o.length)?Dl:Ol,d=p=null,a}function a(t){return(d||(d=s(i,o,l?wl(e):e,r)))(+t)}var i=kN,o=kN,r=oN,l=!1,s,d,p;return a.invert=function(e){return(p||(p=s(o,i,Al,l?Cl(t):t)))(+e)},a.domain=function(e){return arguments.length?(i=vE.call(e,TN),n()):i.slice()},a.range=function(e){return arguments.length?(o=SE.call(e),n()):o.slice()},a.rangeRound=function(e){return o=SE.call(e),r=rN,n()},a.clamp=function(e){return arguments.length?(l=!!e,n()):l},a.interpolate=function(e){return arguments.length?(r=e,n()):r},n()}function Il(e){return new Ml(e)}function Ml(e){if(!(p=ON.exec(e)))throw new Error("invalid format: "+e);var t=p[1]||" ",n=p[2]||">",a=p[3]||"-",i=p[4]||"",o=!!p[5],r=p[6]&&+p[6],l=!!p[7],s=p[8]&&+p[8].slice(1),d=p[9]||"",p;"n"===d?(l=!0,d="g"):!CN[d]&&(d=""),(o||"0"===t&&"="===n)&&(o=!0,t="0",n="="),this.fill=t,this.align=n,this.sign=a,this.symbol=i,this.zero=o,this.width=r,this.comma=l,this.precision=s,this.type=d}function Fl(e){return zN=BN(e),jN=zN.format,UN=zN.formatPrefix,zN}function Bl(e){var t=e.domain;return e.ticks=function(e){var n=t();return dv(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return HN(t(),e,n)},e.nice=function(n){null==n&&(n=10);var a=t(),i=0,o=a.length-1,r=a[i],l=a[o],s;return l<r&&(s=r,r=l,l=s,s=i,i=o,o=s),s=Dn(r,l,n),0<s?(r=E(r/s)*s,l=p(l/s)*s,s=Dn(r,l,n)):0>s&&(r=p(r*s)/s,l=E(l*s)/s,s=Dn(r,l,n)),0<s?(a[i]=E(r/s)*s,a[o]=p(l/s)*s,t(a)):0>s&&(a[i]=p(r*s)/s,a[o]=E(l*s)/s,t(a)),e},e}function zl(){var e=Rl(Al,eN);return e.copy=function(){return Pl(e,zl())},Bl(e)}function jl(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=vE.call(n,TN),e):t.slice()},e.copy=function(){return jl().domain(t)},Bl(e)}function Ul(e,t){return(t=f(t/e))?function(n){return f(n/e)/t}:SN(t)}function $l(e,n){return 0>e?function(i){return-g(-n,i)*g(-e,1-i)}:function(a){return g(n,a)*g(e,1-a)}}function Wl(e){return isFinite(e)?+("1e"+e):0>e?0:e}function ql(e){return 10===e?Wl:e===eh?a:function(t){return g(e,t)}}function Hl(e){return e===eh?f:10===e&&Math.log10||2===e&&Math.log2||(e=f(e),function(t){return f(t)/e})}function Yl(e){return function(t){return-e(-t)}}function Vl(){function e(){return s=Hl(o),c=ql(o),0>a()[0]&&(s=Yl(s),c=Yl(c)),t}var t=Rl(Ul,$l).domain([1,10]),a=t.domain,o=10,s=Hl(10),c=ql(10);return t.base=function(t){return arguments.length?(o=+t,e()):o},t.domain=function(t){return arguments.length?(a(t),e()):a()},t.ticks=function(e){var f=a(),d=f[0],u=f[f.length-1],m;(m=u<d)&&(r=d,d=u,u=r);var r=s(d),i=s(u),g=null==e?10:+e,n=[],_,p,y;if(o%1||!(i-r<g))n=dv(r,i,S(i-r,g)).map(c);else if(r=l(r)-1,i=l(i)+1,0<d){for(;r<i;++r)for(p=1,_=c(r);p<o;++p)if(y=_*p,!(y<d)){if(y>u)break;n.push(y)}}else for(;r<i;++r)for(p=o-1,_=c(r);1<=p;--p)if(y=_*p,!(y<d)){if(y>u)break;n.push(y)}return m?n.reverse():n},t.tickFormat=function(e,n){if(null==n&&(n=10==o?".0e":","),"function"!=typeof n&&(n=jN(n)),e===Infinity)return n;null==e&&(e=10);var a=N(1,o*e/t.ticks().length);return function(e){var t=e/c(l(s(e)));return t*o<o-0.5&&(t*=o),t<=a?n(e):""}},t.nice=function(){return a(YN(a(),{floor:function(e){return c(E(s(e)))},ceil:function(e){return c(p(s(e)))}}))},t.copy=function(){return Pl(t,Vl().base(o))},t}function Gl(e,t){return 0>e?-g(-e,t):g(e,t)}function Zl(){var e=1,t=Rl(function(t,n){return(n=Gl(n,e)-(t=Gl(t,e)))?function(a){return(Gl(a,e)-t)/n}:SN(n)},function(n,a){return a=Gl(a,e)-(n=Gl(n,e)),function(i){return Gl(n+a*i,1/e)}}),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return Pl(t,Zl().exponent(e))},Bl(t)}function Xl(){function e(){var e=0,i=N(1,o.length);for(r=Array(i-1);++e<i;)r[e-1]=cv(a,e/i);return t}function t(e){if(!isNaN(e=+e))return o[ev(r,e)]}var a=[],o=[],r=[];return t.invertExtent=function(e){var t=o.indexOf(e);return 0>t?[NaN,NaN]:[0<t?r[t-1]:a[0],t<r.length?r[t]:a[a.length-1]]},t.domain=function(t){if(!arguments.length)return a.slice();a=[];for(var o=0,i=t.length,n;o<i;++o)(n=t[o],null!=n&&!isNaN(n=+n))&&a.push(n);return a.sort(Kx),e()},t.range=function(t){return arguments.length?(o=SE.call(t),e()):o.slice()},t.quantiles=function(){return r.slice()},t.copy=function(){return Xl().domain(a).range(o)},t}function Kl(){function e(e){if(e<=e)return l[ev(n,e,0,r)]}function t(){var t=-1;for(n=Array(r);++t<r;)n[t]=((t+1)*o-(t-r)*a)/(r+1);return e}var a=0,o=1,r=1,n=[0.5],l=[0,1];return e.domain=function(e){return arguments.length?(a=+e[0],o=+e[1],t()):[a,o]},e.range=function(e){return arguments.length?(r=(l=SE.call(e)).length-1,t()):l.slice()},e.invertExtent=function(e){var t=l.indexOf(e);return 0>t?[NaN,NaN]:1>t?[a,n[0]]:t>=r?[n[r-1],o]:[n[t-1],n[t]]},e.copy=function(){return Kl().domain([a,o]).range(l)},Bl(e)}function Jl(){function e(e){if(e<=e)return a[ev(t,e,0,i)]}var t=[0.5],a=[0,1],i=1;return e.domain=function(n){return arguments.length?(t=SE.call(n),i=S(t.length,a.length-1),e):t.slice()},e.range=function(n){return arguments.length?(a=SE.call(n),i=S(t.length,a.length-1),e):a.slice()},e.invertExtent=function(e){var n=a.indexOf(e);return[t[n-1],t[n]]},e.copy=function(){return Jl().domain(t).range(a)},e}function Ql(e){return new Date(e)}function es(e){return e instanceof Date?+e:+new Date(+e)}function ts(e,t,n,a,i,o,r,l,s){function d(l){return(r(l)<l?m:o(l)<l?g:i(l)<l?_:a(l)<l?y:t(l)<l?n(l)<l?h:b:e(l)<l?x:v)(l)}function p(t,n,a,o){if(null==t&&(t=10),"number"==typeof t){var r=T(a-n)/t,s=Jx(function(e){return e[2]}).right(S,r);s===S.length?(o=Pn(n/QN,a/QN,t),t=e):s?(s=S[r/S[s-1][2]<S[s][2]/r?s-1:s],o=s[1],t=s[0]):(o=N(Pn(n,a,t),1),t=l)}return null==o?t:t.every(o)}var c=Rl(Al,eN),u=c.invert,f=c.domain,m=s(".%L"),g=s(":%S"),_=s("%I:%M"),y=s("%I %p"),h=s("%a %d"),b=s("%b %d"),x=s("%B"),v=s("%Y"),S=[[r,1,VN],[r,5,5*VN],[r,15,15*VN],[r,30,30*VN],[o,1,GN],[o,5,5*GN],[o,15,15*GN],[o,30,30*GN],[i,1,ZN],[i,3,3*ZN],[i,6,6*ZN],[i,12,12*ZN],[a,1,XN],[a,2,2*XN],[n,1,KN],[t,1,JN],[t,3,3*JN],[e,1,QN]];return c.invert=function(e){return new Date(u(e))},c.domain=function(e){return arguments.length?f(vE.call(e,es)):f().map(Ql)},c.ticks=function(e,n){var a=f(),i=a[0],o=a[a.length-1],l=o<i,r;return l&&(r=i,i=o,o=r),r=p(e,i,o,n),r=r?r.range(i,o+1):[],l?r.reverse():r},c.tickFormat=function(e,t){return null==t?d:s(t)},c.nice=function(e,t){var n=f();return(e=p(e,n[0],n[n.length-1],t))?f(YN(n,e)):c},c.copy=function(){return Pl(c,ts(e,t,n,a,i,o,r,l,s))},c}function as(e){var a=e.length;return function(n){return e[N(0,S(a-1,E(n*a)))]}}function is(){function e(){var e=i().length,t=r[1]<r[0],n=r[t-0],f=r[1-t],m=bE(e,s,d);c=(f-n)/(m||1),a&&(c=E(c)),n+=(f-n-c*(e-s))*p,u=c*(1-s),a&&(n=l(n),u=l(u));var g=ov(e).map(function(e){return n+c*e});return o(t?g.reverse():g)}var t=zr().unknown(void 0),i=t.domain,o=t.range,r=[0,1],a=!1,s=0,d=0,p=0.5,c,u;return delete t.unknown,t.domain=function(t){return arguments.length?(i(t),e()):i()},t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],e()):r.slice()},t.rangeRound=function(t){return r=[+t[0],+t[1]],a=!0,e()},t.bandwidth=function(){return u},t.step=function(){return c},t.round=function(t){return arguments.length?(a=!!t,e()):a},t.padding=function(t){return arguments.length?(d=N(0,S(1,t)),s=d,e()):s},t.paddingInner=function(t){return arguments.length?(s=N(0,S(1,t)),e()):s},t.paddingOuter=function(t){return arguments.length?(d=N(0,S(1,t)),e()):d},t.align=function(t){return arguments.length?(p=N(0,S(1,t)),e()):p},t.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var l=+e[0],s=+e[1],d=r[1]<r[0],p=d?o().reverse():o(),c=p.length-1,n,a,f;if(l==l&&s==s)return(s<l&&(f=l,l=s,s=f),!(s<p[0]||l>r[1-d]))?(n=N(0,ev(p,l)-1),a=l===s?n:ev(p,s)-1,l-p[n]>u+1e-10&&++n,d&&(f=n,n=c-a,a=c-f),n>a?void 0:i().slice(n,a+1)):void 0}},t.invert=function(e){var n=t.invertRange([e,e]);return n?n[0]:n},t.copy=function(){return is().domain(i()).range(r).round(a).paddingInner(s).paddingOuter(d).align(p)},e()}function os(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return os(t())},e}function rs(e){return uL.call(e,function(e){return+e})}function ls(){function e(e){return n(e)}function t(e){a=rs(e),n.domain([a[0],Nh(a)])}var n=zl(),a=[];return e.domain=function(n){return arguments.length?(t(n),e):a.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var i=a.length,n=~~(i/(t||i));return 2>n?e.domain():a.filter(function(e,t){return!(t%n)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return ls().domain(e.domain()).range(e.range())},e}function ss(){function e(e){return null==e||e!==e?void 0:n[(ev(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=rs(n),e):t.slice()},e.range=function(t){return arguments.length?(n=fL.call(t),e):n.slice()},e.copy=function(){return ss().domain(e.domain()).range(e.range())},e}function ds(e){function t(){var e=a.domain();i=e[0],o=Nh(e)-i}function n(n){var a=(n-i)/o;return e(r?N(0,S(1,a)):a)}var a=zl(),i=0,o=1,r=!1;return n.clamp=function(e){return arguments.length?(r=!!e,n):r},n.domain=function(e){return arguments.length?(a.domain(e),t(),n):a.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return ds().domain(a.domain()).clamp(r).interpolator(e)},n.ticks=function(e){return a.ticks(e)},n.tickFormat=function(e,t){return a.tickFormat(e,t)},n.nice=function(e){return a.nice(e),t(),n},n}function ps(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?yE(n):n.invertExtent?hE(n):void 0),n.type=e,n}}function cs(e,t){return 1<arguments.length?(mL[e]=ps(e,t),this):mL.hasOwnProperty(e)?mL[e]:void 0}function us(e){for(var t=0|e.length/6,n=Array(t),a=0;a<t;)n[a]="#"+e.slice(6*a,6*++a);return n}function fs(e,t){OA[e]=wA["interpolate"+t],CA[e]=wA["scheme"+t]}function ms(e,t){var n=t[0],a=Nh(t)-n;return function(t){return e(n+t*a)}}function gs(e,t,n){var a=n-t;return a?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/a}:e.copy().domain([t,n]).range([0,1]).interpolate(_s):Oh(0)}function _s(e,t){return function(n){return e+n*(t-e)}}function ys(e,t){var n=vN[hs(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function hs(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}function bs(e){return PA.hasOwnProperty(e)&&PA[e]}function xs(e){return RA.hasOwnProperty(e)&&RA[e]}function vs(e,t){var n;return ph(t)&&(n=t.step,t=t.interval),uh(t)&&(t="time"===e.type?bs(t):"utc"===e.type?xs(t):lh("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function Ss(e,t,n){var a=e.range(),i=a[0],o=Nh(a);if(i>o&&(a=o,o=i,i=a),t=t.filter(function(t){return t=e(t),!(t<i||t>o)}),0<n&&1<t.length){for(var r=[t[0],Nh(t)];t.length>n&&3<=t.length;)t=t.filter(function(e,t){return!(t%2)});3>t.length&&(t=r)}return t}function Ts(e,t){return e.ticks?e.ticks(t):e.domain()}function ks(e,t,n){var a=e.tickFormat?e.tickFormat(t,n):String;return e.type===oE?Es(a,Ns(n)):a}function Es(e,t){return function(n){return e(n)?t(n):""}}function Ns(e){var t=Il(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1;}return Ls(jN(t),jN(".1f")(1)[1])}return jN(t)}function Ls(e,t){return function(n){var a=e(n),i=a.indexOf(t),o,r;if(0>i)return a;for(o=As(a,i),r=o<a.length?a.slice(o):"";--o>i;)if("0"!==a[o]){++o;break}return a.slice(0,o)+r}}function As(e,t){var n=e.lastIndexOf("e"),a;if(0<n)return n;for(n=e.length;--n>t;)if(a=e.charCodeAt(n),48<=a&&57>=a)return n+1}function ws(e){bn.call(this,null,e)}function Cs(e){bn.call(this,null,e)}function Os(){return Z({})}function Ds(e){return e.exit}function Ps(e){bn.call(this,null,e)}function Rs(e,t,n){if(n)return e.domain();var a=BA[e.type];return a?a(e):Ts(e,t)}function Is(e){var t=e.domain();return t.max=t.pop(),t}function Ms(e,t){return BA[e.type]?Fs(t):zs(t)}function Fs(e){return function(t,n,a){var i=a[n+1]||a.max||+Infinity,o=Bs(t,e),r=Bs(i,e);return o&&r?o+"\u2013"+r:r?"< "+r:"\u2265 "+o}}function Bs(e,t){return isFinite(e)?t(e):null}function zs(e){return function(t){return e(t)}}function js(e){bn.call(this,[],e)}function Us(e){return e.source.x}function $s(e){return e.source.y}function Ws(e){return e.target.x}function qs(e){return e.target.y}function Hs(e){bn.call(this,{},e)}function Ys(e,t,n,a){return"M"+e+","+t+"L"+n+","+a}function Vs(e,t,n,a){var i=n-e,r=a-t,l=u(i*i+r*r)/2,s=180*nh(r,i)/o;return"M"+e+","+t+"A"+l+","+l+" "+s+" 0 1 "+n+","+a}function Gs(e,t,n,a){var i=n-e,o=a-t,r=0.2*(i+o),l=0.2*(o-i);return"M"+e+","+t+"C"+(e+r)+","+(t+l)+" "+(n+l)+","+(a-r)+" "+n+","+a}function Zs(e){bn.call(this,null,e)}function Xs(e){bn.call(this,null,e),this.modified(!0)}function Ks(e,t,a){var i=Js(e,t.domainRaw);if(-1<i)return i;var o=t.domain,r=e.type,l=t.zero||void 0===t.zero&&qA[r],s,n;return o?(HA[r]&&t.padding&&o[0]!==Nh(o)&&(o=Qs(r,o,t.range,t.padding,t.exponent)),(l||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(s=(o=o.slice()).length-1||1,l&&(0<o[0]&&(o[0]=0),0>o[s]&&(o[s]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[s]=t.domainMax),null!=t.domainMid&&(n=t.domainMid,(n<o[0]||n>o[s])&&a.warn("Scale domainMid exceeds domain min or max.",n),o.splice(s,0,n))),e.domain(o),t.nice&&e.nice&&e.nice(!0!==t.nice&&vs(e,t.nice)||null),o.length):0}function Js(e,t){return t?(e.domain(t),t.length):-1}function Qs(e,t,n,a,i){var o=T(Nh(n)-n[0]),r=o/(o-2*a),l=e===oE?$(t,null,r):e===lE?W(t,null,r,0.5):e===rE?W(t,null,r,i):U(t,null,r);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function ed(e,t,n){var a=t.round||!1,i=t.range;if(null!=t.rangeStep)i=td(e.type,t,n);else if(t.scheme){if(i=nd(e.type,t,n),wh(i))return e.interpolator(i);}else if(i&&e.type===_E)return e.interpolator(XE(od(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate(ys(t.interpolate,t.interpolateGamma)):wh(e.round)?e.round(a):wh(e.rangeRound)&&e.interpolate(a?rN:oN),i&&e.range(od(i,t.reverse))}function td(e,t,n){e!==sE&&e!==dE&&lh("Only band and point scales support rangeStep.");var a=(null==t.paddingOuter?t.padding:t.paddingOuter)||0,i=e===dE?1:(null==t.paddingInner?t.padding:t.paddingInner)||0;return[0,t.rangeStep*bE(n,i,a)]}function nd(e,t,n){var a=t.scheme.toLowerCase(),i=DA(a),o=t.schemeExtent,r;return i||lh("Unrecognized scheme name: "+t.scheme),n=e===mE?n+1:e===gE?n-1:e===uE||e===fE?+t.schemeCount||WA:n,e===_E?ad(i,o,t.reverse):!o&&(r=DA(a+"-"+n))?r:wh(i)?rd(ad(i,o),n):e===cE?i:i.slice(0,n)}function ad(e,t,n){return wh(e)&&(t||n)?ms(e,od(t||[0,1],n)):e}function od(e,t){return t?e.slice().reverse():e}function rd(e,t){for(var n=Array(t),a=0;a<t;++a)n[a]=e(a/(t-1||1));return n}function ld(e){bn.call(this,null,e)}function sd(e){bn.call(this,null,e)}function dd(e,n,a,i,o){for(var r=(n-e.sum)/2,l=e.length,s=0,d;s<l;++s)d=e[s],d[i]=r,d[o]=r+=T(a(d))}function pd(e,n,a,i,o){for(var r=1/e.sum,l=0,s=e.length,d=0,p=0,c;d<s;++d)c=e[d],c[i]=l,c[o]=l=r*(p+=T(a(c)))}function cd(e,n,a,i,o){for(var r=0,l=0,s=e.length,d=0,p,c;d<s;++d)c=e[d],p=a(c),0>p?(c[i]=l,c[o]=l+=p):(c[i]=r,c[o]=r+=p)}function ud(e,a,o,r){var l=[],d=function(e){return e(u)},p,c,i,n,u,t,f,m,s;if(null==a)l.push(e.slice());else for(p={},c=0,i=e.length;c<i;++c)u=e[c],t=a.map(d),f=p[t],f||(p[t]=f=[],l.push(f)),f.push(u);for(t=0,s=0,n=l.length;t<n;++t){for(f=l[t],c=0,m=0,i=f.length;c<i;++c)m+=T(r(f[c]));f.sum=m,m>s&&(s=m),o&&f.sort(o)}return l.max=s,l}function fd(e,t){for(var a=t[0],o=t[1],r=-1,l=0,i=e.length,n=i-1;l<i;n=l++){var s=e[l],d=s[0],p=s[1],c=e[n],u=c[0],f=c[1];if(md(s,c,t))return 0;p>o!=f>o&&a<(u-d)*(o-p)/(f-p)+d&&(r=-r)}return r}function md(e,t,n){var a;return gd(e,t,n)&&_d(e[a=+(e[0]===t[0])],n[a],t[a])}function gd(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}function _d(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function yd(e,t,a){for(var o=e.width,n=e.height,r=(a<<1)+1,l=0;l<n;++l)for(var s=0,i=0;s<o+a;++s)s<o&&(i+=e.data[s+l*o]),s>=a&&(s>=r&&(i-=e.data[s-r+l*o]),t.data[s-a+l*o]=i/S(s+1,o-1+r-s,r))}function hd(e,t,a){for(var o=e.width,n=e.height,r=(a<<1)+1,l=0;l<o;++l)for(var i=0,s=0;i<n+a;++i)i<n&&(s+=e.data[l+i*o]),i>=a&&(i>=r&&(s-=e.data[l+(i-r)*o]),t.data[l+(i-a)*o]=s/S(i+1,n-1+r-i,r))}function bd(e){return e[0]}function xd(e){return e[1]}function vd(e){bn.call(this,null,e)}function Sd(e){return function(n){for(var a=iv(n),o=a[0],r=a[1]-o,l=[],t=1;t<=e;++t)l.push(o+r*t/(e+1));return l}}function Td(e){bn.call(this,null,e)}function kd(){this.reset()}function Ed(e,t,n){var a=e.s=t+n,i=a-t;e.t=t-(a-i)+(n-i)}function Nd(e){return 1<e?0:-1>e?_w:i(e)}function Ld(e){return 1<e?yw:-1>e?-yw:th(e)}function Ad(){}function wd(e,t){e&&Iw.hasOwnProperty(e.type)&&Iw[e.type](e,t)}function Cd(e,t,a){var o=-1,i=e.length-a,n;for(t.lineStart();++o<i;)n=e[o],t.point(n[0],n[1],n[2]);t.lineEnd()}function Od(e,t){var a=-1,i=e.length;for(t.polygonStart();++a<i;)Cd(e[a],t,1);t.polygonEnd()}function Dd(e){return[kw(e[1],e[0]),Ld(e[2])]}function Pd(e){var t=e[0],n=e[1],a=Ew(n);return[a*Ew(t),a*Cw(t),Cw(n)]}function Rd(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Id(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Md(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Fd(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Bd(e){var t=Dw(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function zd(e,t){return[e>_w?e-bw:e<-_w?e+bw:e,t]}function jd(e,t,n){return(e%=bw)?t||n?jw($d(e),Wd(t,n)):$d(e):t||n?Wd(t,n):zd}function Ud(e){return function(t,n){return t+=e,[t>_w?t-bw:t<-_w?t+bw:t,n]}}function $d(e){var t=Ud(e);return t.invert=Ud(-e),t}function Wd(e,t){function n(e,t){var n=Ew(t),l=Ew(e)*n,s=Cw(e)*n,d=Cw(t),p=d*a+l*i;return[kw(s*o-p*r,l*a-d*i),Ld(p*o+s*r)]}var a=Ew(e),i=Cw(e),o=Ew(t),r=Cw(t);return n.invert=function(e,t){var n=Ew(t),l=Ew(e)*n,s=Cw(e)*n,d=Cw(t),p=d*o-s*r;return[kw(s*o+d*r,l*a+p*i),Ld(p*a-l*i)]},n}function qd(e,n,a,i,o,r){if(a){var l=Ew(n),s=Cw(n),d=i*a;null==o?(o=n+i*bw,r=n-d/2):(o=Hd(l,o),r=Hd(l,r),(0<i?o<r:o>r)&&(o+=i*bw));for(var p=o,t;0<i?p>r:p<r;p-=d)t=Dd([l,-s*Ew(p),-s*Cw(p)]),e.point(t[0],t[1])}}function Hd(e,t){t=Pd(t),t[0]-=e,Bd(t);var n=Nd(-t[1]);return((0>-t[2]?-n:n)+bw-gw)%bw}function Yd(e,t,n,a){this.x=e,this.z=t,this.o=n,this.e=a,this.v=!1,this.n=this.p=null}function Vd(e){if(a=e.length){for(var t=0,i=e[0],a,n;++t<a;)i.n=n=e[t],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Gd(e){return 1<e.length}function Zd(e,t){return(0>(e=e.x)[0]?e[1]-yw-gw:yw-e[1])-(0>(t=t.x)[0]?t[1]-yw-gw:yw-t[1])}function Xd(e,t,n,a){var i=Cw(e-n),o,r;return Sw(i)>gw?Tw((Cw(t)*(r=Ew(a))*Cw(n)-Cw(a)*(o=Ew(t))*Cw(e))/(o*r*i)):(t+a)/2}function Kd(e,t,n,o){function i(a,i){return e<=a&&a<=n&&t<=i&&i<=o}function a(i,l,d,p){var c=0,a=0;if(null==i||(c=r(i,d))!==(a=r(l,d))||0>s(i,l)^0<d)do p.point(0==c||3==c?e:n,1<c?o:t);while((c=(c+d+4)%4)!=a);else p.point(l[0],l[1])}function r(a,i){return Sw(a[0]-e)<gw?0<i?0:3:Sw(a[0]-n)<gw?0<i?2:1:Sw(a[1]-t)<gw?0<i?1:0:0<i?3:2}function l(e,t){return s(e.x,t.x)}function s(e,t){var n=r(e,1),a=r(t,1);return n===a?0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]:n-a}return function(r){function s(e,t){i(e,t)&&c.point(e,t)}function d(){for(var t=0,a=0,i=g.length;a<i;++a)for(var n=g[a],r=1,l=n.length,s=n[0],d=s[0],p=s[1],c,u;r<l;++r)c=d,u=p,s=n[r],d=s[0],p=s[1],u<=o?p>o&&(d-c)*(o-u)>(p-u)*(e-c)&&++t:p<=o&&(d-c)*(o-u)<(p-u)*(e-c)&&--t;return t}function p(r,l){var s=i(r,l);if(g&&_.push([r,l]),C)h=r,T=l,k=s,C=!1,s&&(c.lineStart(),c.point(r,l));else if(s&&w)c.point(r,l);else{var d=[E=N(Jw,S(Kw,E)),A=N(Jw,S(Kw,A))],a=[r=N(Jw,S(Kw,r)),l=N(Jw,S(Kw,l))];Xw(d,a,e,t,n,o)?(!w&&(c.lineStart(),c.point(d[0],d[1])),c.point(a[0],a[1]),!s&&c.lineEnd(),O=!1):s&&(c.lineStart(),c.point(r,l),O=!1)}E=r,A=l,w=s}var c=r,u=$w(),f={point:s,lineStart:function(){f.point=p,g&&g.push(_=[]),C=!0,w=!1,E=A=NaN},lineEnd:function(){m&&(p(h,T),k&&w&&u.rejoin(),m.push(u.result())),f.point=s,w&&c.lineEnd()},polygonStart:function(){c=u,m=[],g=[],O=!0},polygonEnd:function(){var e=d(),t=O&&e,n=(m=fv(m)).length;(t||n)&&(r.polygonStart(),t&&(r.lineStart(),a(null,null,1,r),r.lineEnd()),n&&qw(m,l,e,a,r),r.polygonEnd()),c=r,m=g=_=null}},m,g,_,h,T,k,E,A,w,C,O;return f}}function Jd(){eC.point=eC.lineEnd=Ad}function Qd(e,t){e*=vw,t*=vw,EC=e,NC=Cw(t),LC=Ew(t),eC.point=ep}function ep(e,t){e*=vw,t*=vw;var n=Cw(t),a=Ew(t),i=Sw(e-EC),o=Ew(i),r=Cw(i),l=a*r,s=LC*n-NC*a*o,d=NC*n+LC*a*o;Qw.add(kw(Dw(l*l+s*s),d)),EC=e,NC=n,LC=a}function tp(e,t){return e&&oC.hasOwnProperty(e.type)&&oC[e.type](e,t)}function np(e,t){return 0===iC(e,t)}function ap(e,t){var n=iC(e[0],e[1]),a=iC(e[0],t),i=iC(t,e[1]);return a+i<=n+gw}function ip(e,t){return!!Yw(e.map(op),rp(t))}function op(e){return e=e.map(rp),e.pop(),e}function rp(e){return[e[0]*vw,e[1]*vw]}function lp(e,t,n){var a=ov(e,t-gw,n).concat(t);return function(e){return a.map(function(t){return[e,t]})}}function sp(e,t,n){var a=ov(e,t-gw,n).concat(t);return function(e){return a.map(function(t){return[t,e]})}}function dp(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return ov(Nw(p/i)*i,d,i).map(y).concat(ov(Nw(m/o)*o,f,o).map(b)).concat(ov(Nw(s/n)*n,l,n).filter(function(e){return Sw(e%i)>gw}).map(g)).concat(ov(Nw(u/a)*a,c,a).filter(function(e){return Sw(e%o)>gw}).map(h))}var n=10,a=n,i=90,o=360,r=2.5,l,s,d,p,c,u,f,m,g,h,y,b;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[y(p).concat(b(f).slice(1),y(d).reverse().slice(1),b(m).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(p=+t[0][0],d=+t[1][0],m=+t[0][1],f=+t[1][1],p>d&&(t=p,p=d,d=t),m>f&&(t=m,m=f,f=t),e.precision(r)):[[p,m],[d,f]]},e.extentMinor=function(t){return arguments.length?(s=+t[0][0],l=+t[1][0],u=+t[0][1],c=+t[1][1],s>l&&(t=s,s=l,l=t),u>c&&(t=u,u=c,c=t),e.precision(r)):[[s,u],[l,c]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(i=+t[0],o=+t[1],e):[i,o]},e.stepMinor=function(t){return arguments.length?(n=+t[0],a=+t[1],e):[n,a]},e.precision=function(t){return arguments.length?(r=+t,g=lp(u,c,90),h=sp(s,l,r),y=lp(m,f,90),b=sp(p,d,r),e):r},e.extentMajor([[-180,-90+gw],[180,90-gw]]).extentMinor([[-180,-80-gw],[180,80+gw]])}function pp(){dC.point=cp}function cp(e,t){dC.point=up,AC=CC=e,wC=OC=t}function up(e,t){sC.add(OC*e-CC*t),CC=e,OC=t}function fp(){up(AC,wC)}function mp(e,t){gC+=e,_C+=t,++yC}function gp(){kC.point=_p}function _p(e,t){kC.point=yp,mp(RC=e,IC=t)}function yp(e,t){var n=e-RC,a=t-IC,i=Dw(n*n+a*a);hC+=i*(RC+e)/2,bC+=i*(IC+t)/2,xC+=i,mp(RC=e,IC=t)}function hp(){kC.point=mp}function bp(){kC.point=vp}function xp(){Sp(DC,PC)}function vp(e,t){kC.point=Sp,mp(DC=RC=e,PC=IC=t)}function Sp(e,t){var n=e-RC,a=t-IC,i=Dw(n*n+a*a);hC+=i*(RC+e)/2,bC+=i*(IC+t)/2,xC+=i,i=IC*e-RC*t,vC+=i*(RC+e),SC+=i*(IC+t),TC+=3*i,mp(RC=e,IC=t)}function Tp(e){this._context=e}function kp(e,t){FC.point=Ep,zC=UC=e,jC=$C=t}function Ep(e,t){UC-=e,$C-=t,MC.add(Dw(UC*UC+$C*$C)),UC=e,$C=t}function Np(){this._string=[]}function Lp(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Ap(e){return function(t){var n=new wp;for(var a in e)n[a]=e[a];return n.stream=t,n}}function wp(){}function Cp(e,t,n){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=a&&e.clipExtent(null),Mw(n,e.stream(mC)),t(mC.result()),null!=a&&e.clipExtent(a),e}function Op(e,t,n){return Cp(e,function(n){var a=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=S(a/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),r=+t[0][0]+(a-o*(n[1][0]+n[0][0]))/2,l=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([r,l])},n)}function Dp(e,t,n){return Op(e,[[0,0],t],n)}function Pp(e,t,n){return Cp(e,function(n){var a=+t,i=a/(n[1][0]-n[0][0]),o=(a-i*(n[1][0]+n[0][0]))/2,r=-i*n[0][1];e.scale(150*i).translate([o,r])},n)}function Rp(e,t,n){return Cp(e,function(n){var a=+t,i=a/(n[1][1]-n[0][1]),o=-i*n[0][0],r=(a-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,r])},n)}function Ip(e){return Ap({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Mp(e,t){function n(i,o,r,l,s,d,u,f,g,_,y,h,x,v){var S=u-i,T=f-o,k=S*S+T*T;if(k>4*t&&x--){var E=l+_,a=s+y,b=d+h,c=Dw(E*E+a*a+b*b),m=Ld(b/=c),N=Sw(Sw(b)-1)<gw||Sw(r-g)<gw?(r+g)/2:kw(a,E),A=e(N,m),p=A[0],w=A[1],C=p-i,O=w-o,D=T*C-S*O;(D*D/k>t||0.3<Sw((S*C+T*O)/k-0.5)||l*_+s*y+d*h<HC)&&(n(i,o,r,l,s,d,p,w,N,E/=c,a/=c,b,x,v),v.point(p,w),n(p,w,N,E,a,b,u,f,g,_,y,h,x,v))}}return function(t){function a(n,a){n=e(n,a),t.point(n[0],n[1])}function i(){h=NaN,p.point=o,t.lineStart()}function o(a,i){var o=Pd([a,i]),r=e(a,i);n(h,b,y,x,v,S,h=r[0],b=r[1],y=a,x=o[0],v=o[1],S=o[2],qC,t),t.point(h,b)}function r(){p.point=a,t.lineEnd()}function l(){i(),p.point=s,p.lineEnd=d}function s(e,t){o(c=e,t),u=h,f=b,m=x,g=v,_=S,p.point=o}function d(){n(h,b,y,x,v,S,u,f,c,m,g,_,qC,t),p.lineEnd=r,r()}var p={point:a,lineStart:i,lineEnd:r,polygonStart:function(){t.polygonStart(),p.lineStart=l},polygonEnd:function(){t.polygonEnd(),p.lineStart=i}},c,u,f,m,g,_,y,h,b,x,v,S;return p}}function Fp(e){return Ap({point:function(t,n){var a=e(t,n);return this.stream.point(a[0],a[1])}})}function Bp(e){return zp(function(){return e})()}function zp(e){function t(e){return e=k(e[0]*vw,e[1]*vw),[e[0]*r+v,S-e[1]*r]}function n(e){return e=k.invert((e[0]-v)/r,(S-e[1])/r),e&&[e[0]*xw,e[1]*xw]}function a(e,t){return e=_(e,t),[e[0]*r+v,S-e[1]*r]}function i(){k=jw(T=jd(c,u,f),_);var e=_(d,p);return v=l-e[0]*r,S=s+e[1]*r,o()}function o(){return w=C=null,t}var r=150,l=480,s=250,d=0,p=0,c=0,u=0,f=0,m=null,g=Gw,y=null,h=rC,b=0.5,x=YC(a,b),_,v,S,T,k,E,N,A,w,C;return t.stream=function(e){return w&&C===e?w:w=VC(Fp(T)(g(x(h(C=e)))))},t.preclip=function(e){return arguments.length?(g=e,m=void 0,o()):g},t.postclip=function(e){return arguments.length?(h=e,y=E=N=A=null,o()):h},t.clipAngle=function(e){return arguments.length?(g=+e?Zw(m=e*vw):(m=null,Gw),o()):m*xw},t.clipExtent=function(e){return arguments.length?(h=null==e?(y=E=N=A=null,rC):Kd(y=+e[0][0],E=+e[0][1],N=+e[1][0],A=+e[1][1]),o()):null==y?null:[[y,E],[N,A]]},t.scale=function(e){return arguments.length?(r=+e,i()):r},t.translate=function(e){return arguments.length?(l=+e[0],s=+e[1],i()):[l,s]},t.center=function(e){return arguments.length?(d=e[0]%360*vw,p=e[1]%360*vw,i()):[d*xw,p*xw]},t.rotate=function(e){return arguments.length?(c=e[0]%360*vw,u=e[1]%360*vw,f=2<e.length?e[2]%360*vw:0,i()):[c*xw,u*xw,f*xw]},t.precision=function(e){return arguments.length?(x=YC(a,b=e*e),o()):Dw(b)},t.fitExtent=function(e,n){return Op(t,e,n)},t.fitSize=function(e,n){return Dp(t,e,n)},t.fitWidth=function(e,n){return Pp(t,e,n)},t.fitHeight=function(e,n){return Rp(t,e,n)},function(){return _=e.apply(this,arguments),t.invert=_.invert&&n,i()}}function jp(e){var t=0,n=_w/3,a=zp(e),i=a(t,n);return i.parallels=function(e){return arguments.length?a(t=e[0]*vw,n=e[1]*vw):[t*xw,n*xw]},i}function Up(e){function t(e,t){return[e*n,Cw(t)/n]}var n=Ew(e);return t.invert=function(e,t){return[e/n,Ld(t*n)]},t}function $p(e,t){function a(e,t){var a=Dw(n-2*o*Cw(t))/o;return[a*Cw(e*=o),l-a*Ew(e)]}var i=Cw(e),o=(i+Cw(t))/2;if(Sw(o)<gw)return Up(e);var n=1+i*(2*o-i),l=Dw(n)/o;return a.invert=function(e,t){var a=l-t;return[kw(e,Sw(a))/o*Ow(a),Ld((n-(e*e+a*a)*o*o)/(2*o))]},a}function Wp(e){var t=e.length;return{point:function(n,a){for(var o=-1;++o<t;)e[o].point(n,a)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function qp(e){return function(t,n){var a=Ew(t),i=Ew(n),o=e(a*i);return[o*i*Cw(t),o*Cw(n)]}}function Hp(e){return function(t,n){var a=Dw(t*t+n*n),i=e(a),o=Cw(i),r=Ew(i);return[kw(t*o,a*r),Ld(a&&n*o/a)]}}function Yp(e,t){return[e,Aw(Pw((yw+t)/2))]}function Vp(e){function t(){var a=_w*i(),o=n(Uw(n.rotate()).invert([0,0]));return r(null==l?[[o[0]-a,o[1]-a],[o[0]+a,o[1]+a]]:e===Yp?[[N(o[0]-a,l),s],[S(o[0]+a,d),p]]:[[l,N(o[1]-a,s)],[d,S(o[1]+a,p)]])}var n=Bp(e),a=n.center,i=n.scale,o=n.translate,r=n.clipExtent,l=null,s,d,p;return n.scale=function(e){return arguments.length?(i(e),t()):i()},n.translate=function(e){return arguments.length?(o(e),t()):o()},n.center=function(e){return arguments.length?(a(e),t()):a()},n.clipExtent=function(e){return arguments.length?(null==e?l=s=d=p=null:(l=+e[0][0],s=+e[0][1],d=+e[1][0],p=+e[1][1]),t()):null==l?null:[[l,s],[d,p]]},t()}function Gp(e){return Pw((yw+e)/2)}function Zp(e,t){function a(e,t){0<n?t<-yw+gw&&(t=-yw+gw):t>yw-gw&&(t=yw-gw);var a=n/ww(Gp(t),o);return[a*Cw(o*e),n-a*Ew(o*e)]}var i=Ew(e),o=e===t?Cw(e):Aw(i/Ew(t))/Aw(Gp(t)/Gp(e)),n=i*ww(Gp(e),o)/o;return o?(a.invert=function(e,t){var a=n-t,i=Ow(o)*Dw(e*e+a*a);return[kw(e,Sw(a))/o*Ow(a),2*Tw(ww(n/i,1/o))-yw]},a):Yp}function Xp(e,t){return[e,t]}function Kp(e,t){function a(e,t){var a=n-t,i=o*e;return[a*Cw(i),n-a*Ew(i)]}var i=Ew(e),o=e===t?Cw(e):(i-Ew(t))/(t-e),n=i/o+e;return Sw(o)<gw?Xp:(a.invert=function(e,t){var a=n-t;return[kw(e,Sw(a))/o*Ow(a),n-Ow(o)*Dw(e*e+a*a)]},a)}function Jp(e,t){var n=Ew(t),a=Ew(e)*n;return[n*Cw(e)/a,Cw(t)/a]}function Qp(e,t){return[Ew(t)*Cw(e),Cw(t)]}function ec(e,t){var n=Ew(t),a=1+Ew(e)*n;return[n*Cw(e)/a,Cw(t)/a]}function tc(e,t){return[Aw(Pw((yw+t)/2)),-e]}function nc(e,t){return function n(){var a=t();return a.type=e,a.path=WC().projection(a),a.copy=a.copy||function(){var e=n();return QC.forEach(function(t){a.hasOwnProperty(t)&&e[t](a[t]())}),e.path.pointRadius(a.path.pointRadius()),e},a}}function ac(e,t){return 1<arguments.length?(eO[e]=nc(e,t),this):eO.hasOwnProperty(e)?eO[e]:null}function ic(e){return e&&e.path||JC}function oc(e){bn.call(this,null,e)}function rc(e){bn.call(this,null,e)}function lc(e){bn.call(this,null,e)}function sc(e,t){var n=function(n){return e(t(n))};return n.context=function(t){return e.context(t),n},n}function dc(e){bn.call(this,[],e),this.generator=dp()}function pc(e){bn.call(this,null,e),this.modified(!0)}function cc(e,t){var n=mc(t.fit);t.extent?e.fitExtent(t.extent,n):t.size?e.fitSize(t.size,n):0}function uc(e){var t=ac((e||"mercator").toLowerCase());return t||lh("Unrecognized projection type: "+e),t()}function fc(e,t,n){wh(e[t])&&e[t](n)}function mc(e){return e=Ah(e),1===e.length?e[0]:{type:pw,features:e.reduce(function(e,t){return t&&t.type===pw?e.push.apply(e,t.features):dh(t)?e.push.apply(e,t):e.push(t),e},[])}}function gc(e,t,n,a){if(isNaN(t)||isNaN(n))return e;var o=e._root,r={data:a},l=e._x0,s=e._y0,p=e._x1,c=e._y1,u,f,m,g,_,y,h,b,i;if(!o)return e._root=r,e;for(;o.length;)if((y=t>=(f=(l+p)/2))?l=f:p=f,(h=n>=(m=(s+c)/2))?s=m:c=m,(u=o,!(o=o[b=h<<1|y])))return u[b]=r,e;if(g=+e._x.call(null,o.data),_=+e._y.call(null,o.data),t===g&&n===_)return r.next=o,u?u[b]=r:e._root=r,e;do u=u?u[b]=[,,,,]:e._root=[,,,,],(y=t>=(f=(l+p)/2))?l=f:p=f,(h=n>=(m=(s+c)/2))?s=m:c=m;while((b=h<<1|y)==(i=(_>=m)<<1|g>=f));return u[i]=o,u[b]=r,e}function _c(e){return e[0]}function yc(e){return e[1]}function hc(e,t,n){var a=new bc(null==t?_c:t,null==n?yc:n,NaN,NaN,NaN,NaN);return null==e?a:a.addAll(e)}function bc(e,t,n,a,i,o){this._x=e,this._y=t,this._x0=n,this._y0=a,this._x1=i,this._y1=o,this._root=void 0}function xc(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}function vc(e){return e.x+e.vx}function Sc(e){return e.y+e.vy}function Tc(e){return e.index}function kc(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Ec(){return yO||(xO(Nc),yO=bO.now()+hO)}function Nc(){yO=0}function Lc(){this._call=this._time=this._next=null}function Ac(e,n,a){var i=new Lc;return i.restart(e,n,a),i}function wc(){Ec(),++uO;for(var n=vO,t;n;)0<=(t=yO-n._time)&&n._call.call(null,t),n=n._next;--uO}function Cc(){yO=(_O=bO.now())+hO,uO=fO=0;try{wc()}finally{uO=0,Dc(),yO=0}}function Oc(){var e=bO.now(),t=e-_O;t>gO&&(hO-=t,_O=e)}function Dc(){for(var e=vO,t=Infinity,n,a;e;)e._call?(t>e._time&&(t=e._time),n=e,e=e._next):(a=e._next,e._next=null,e=n?n._next=a:vO=a);SO=n,Pc(t)}function Pc(e){if(!uO){fO&&(fO=clearTimeout(fO));var t=e-yO;24<t?(e<Infinity&&(fO=setTimeout(Cc,e-bO.now()-hO)),mO&&(mO=clearInterval(mO))):(!mO&&(_O=bO.now(),mO=setInterval(Oc,gO)),uO=1,xO(Cc))}}function Rc(e){return e.x}function Ic(e){return e.y}function Mc(e){bn.call(this,null,e)}function Fc(e,t){return function(){e.touch(t).run()}}function Bc(e,t){var n=TO(e),a=!1,i=n.stop,o=n.restart;return n.stopped=function(){return a},n.restart=function(){return a=!1,o()},n.stop=function(){return a=!0,i()},zc(n,t,!0).on("end",function(){a=!0})}function zc(e,t,a,o){var r=Ah(t.forces),l,i,n,s;for(l=0,i=NO.length;l<i;++l)n=NO[l],n!==EO&&t.modified(n)&&e[n](t[n]);for(l=0,i=r.length;l<i;++l)s=EO+l,n=a||t.modified(EO,l)?Uc(r[l]):o&&jc(r[l],o)?e.force(s):null,n&&e.force(s,n);for(i=e.numForces||0;l<i;++l)e.force(EO+l,null);return e.numForces=r.length,e}function jc(e,t){var n,a;for(n in e)if(wh(a=e[n])&&t.modified(m(a)))return 1;return 0}function Uc(e){var t,n;for(n in kO.hasOwnProperty(e.force)||lh("Unrecognized force: "+e.force),t=kO[e.force](),e)wh(t[n])&&$c(t[n],e[n],e);return t}function $c(e,t,n){e(wh(t)?function(e){return t(e,n)}:t)}function Wc(e,t){return e.parent===t.parent?1:2}function qc(e){return e.reduce(Hc,0)/e.length}function Hc(e,t){return e+t.x}function Yc(e){return 1+e.reduce(Vc,0)}function Vc(e,t){return N(e,t.y)}function Gc(e){for(var t;t=e.children;)e=t[0];return e}function Zc(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Xc(e){var t=0,n=e.children,a=n&&n.length;if(!a)t=1;else for(;0<=--a;)t+=n[a].value;e.value=t}function Kc(e,t){if(e===t)return e;var n=e.ancestors(),a=t.ancestors(),i=null;for(e=n.pop(),t=a.pop();e===t;)i=e,e=n.pop(),t=a.pop();return i}function Jc(e,t){var a=new nu(e),o=+e.value&&(a.value=e.value),r=[a],l,s,d,p,i;for(null==t&&(t=Qc);l=r.pop();)if(o&&(l.value=+l.data.value),(d=t(l.data))&&(i=d.length))for(l.children=Array(i),p=i-1;0<=p;--p)r.push(s=l.children[p]=new nu(d[p])),s.parent=l,s.depth=l.depth+1;return a.eachBefore(tu)}function Qc(e){return e.children}function eu(e){e.data=e.data.data}function tu(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function nu(e){this.data=e,this.depth=this.height=0,this.parent=null}function au(e){for(var n=e.length,a,t;n;)t=0|Math.random()*n--,a=e[n],e[n]=e[t],e[t]=a;return e}function iu(e,t){var n,a;if(lu(t,e))return[t];for(n=0;n<e.length;++n)if(ou(t,e[n])&&lu(pu(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(a=n+1;a<e.length;++a)if(ou(pu(e[n],e[a]),t)&&ou(pu(e[n],t),e[a])&&ou(pu(e[a],t),e[n])&&lu(cu(e[n],e[a],t),e))return[e[n],e[a],t];throw new Error}function ou(e,t){var n=e.r-t.r,a=t.x-e.x,i=t.y-e.y;return 0>n||n*n<a*a+i*i}function ru(e,t){var n=e.r-t.r+1e-6,a=t.x-e.x,i=t.y-e.y;return 0<n&&n*n>a*a+i*i}function lu(e,t){for(var n=0;n<t.length;++n)if(!ru(e,t[n]))return!1;return!0}function su(e){switch(e.length){case 1:return du(e[0]);case 2:return pu(e[0],e[1]);case 3:return cu(e[0],e[1],e[2]);}}function du(e){return{x:e.x,y:e.y,r:e.r}}function pu(e,t){var n=e.x,a=e.y,i=e.r,o=t.x,r=t.y,s=t.r,d=o-n,p=r-a,c=s-i,f=u(d*d+p*p);return{x:(n+o+d/f*c)/2,y:(a+r+p/f*c)/2,r:(f+i+s)/2}}function cu(e,t,n){var a=e.x,i=e.y,o=e.r,l=t.x,s=t.y,d=t.r,p=n.x,c=n.y,f=n.r,m=a-l,g=a-p,_=i-s,y=i-c,h=d-o,b=f-o,x=a*a+i*i-o*o,v=x-l*l-s*s+d*d,S=x-p*p-c*c+f*f,T=g*_-m*y,k=(_*S-y*v)/(2*T)-a,E=(y*h-_*b)/T,N=(g*v-m*S)/(2*T)-i,w=(m*b-g*h)/T,O=E*E+w*w-1,A=2*(o+k*E+N*w),D=k*k+N*N-o*o,C=-(O?(A+u(A*A-4*O*D))/(2*O):D/A);return{x:a+k+E*C,y:i+N+w*C,r:C}}function uu(e,t,n){var a=e.x,i=e.y,o=t.r+n.r,r=e.r+n.r,l=t.x-a,s=t.y-i,d=l*l+s*s;if(d){var p=0.5+((r*=r)-(o*=o))/(2*d),c=u(N(0,2*o*(r+d)-(r-=d)*r-o*o))/(2*d);n.x=a+p*l+c*s,n.y=i+p*s-c*l}else n.x=a+r,n.y=i}function fu(e,t){var n=t.x-e.x,a=t.y-e.y,i=e.r+t.r;return i*i-1e-6>n*n+a*a}function mu(e){var t=e._,n=e.next._,a=t.r+n.r,i=(t.x*n.r+n.x*t.r)/a,o=(t.y*n.r+n.y*t.r)/a;return i*i+o*o}function gu(e){this._=e,this.next=null,this.previous=null}function _u(e){if(!(r=e.length))return 0;var t,a,o,r,n,l,s,i,d,p,c;if(t=e[0],t.x=0,t.y=0,!(1<r))return t.r;if(a=e[1],t.x=-a.r,a.x=t.r,a.y=0,!(2<r))return t.r+a.r;uu(a,t,o=e[2]),t=new gu(t),a=new gu(a),o=new gu(o),t.next=o.previous=a,a.next=t.previous=o,o.next=a.previous=t;pack:for(s=3;s<r;++s){uu(t._,a._,o=e[s]),o=new gu(o),i=a.next,d=t.previous,p=a._.r,c=t._.r;do if(p<=c){if(fu(i._,o._)){a=i,t.next=a,a.previous=t,--s;continue pack}p+=i._.r,i=i.next}else{if(fu(d._,o._)){t=d,t.next=a,a.previous=t,--s;continue pack}c+=d._.r,d=d.previous}while(i!==d.next);for(o.previous=t,o.next=a,t.next=a.previous=a=o,n=mu(t);(o=o.next)!==a;)(l=mu(o))<n&&(t=o,n=l);a=t.next}for(t=[a._],o=a;(o=o.next)!==a;)t.push(o._);for(o=DO(t),s=0;s<r;++s)t=e[s],t.x-=o.x,t.y-=o.y;return o.r}function yu(e){return null==e?null:hu(e)}function hu(e){if("function"!=typeof e)throw new Error;return e}function bu(){return 0}function xu(e){return u(e.value)}function vu(e){return function(t){t.children||(t.r=N(0,+e(t)||0))}}function Su(t,a){return function(o){if(r=o.children){var l=r.length,n=t(o)*a||0,r,s,i;if(n)for(s=0;s<l;++s)r[s].r+=n;if(i=_u(r),n)for(s=0;s<l;++s)r[s].r-=n;o.r=i+n}}}function Tu(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function ku(e){return e.id}function Eu(e){return e.parentId}function Nu(e,t){return e.parent===t.parent?1:2}function Lu(e){var t=e.children;return t?t[0]:e.t}function Au(e){var t=e.children;return t?t[t.length-1]:e.t}function wu(e,t,n){var a=n/(t.i-e.i);t.c-=a,t.s+=n,e.c+=a,t.z+=n,t.m+=n}function Cu(e){for(var t=0,n=0,a=e.children,o=a.length,i;0<=--o;)i=a[o],i.z+=t,i.m+=t,t+=i.s+(n+=i.c)}function Ou(e,t,n){return e.a.parent===t.parent?e.a:n}function Du(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Pu(e){for(var t=new Du(e,0),a=[t],o,r,l,s,i;o=a.pop();)if(l=o._.children)for(o.children=Array(i=l.length),s=i-1;0<=s;--s)a.push(r=o.children[s]=new Du(l[s],s)),r.parent=o;return(t.parent=new Du(null,0)).children=[t],t}function Ru(e,t,a,i,o,r){for(var l=[],s=t.children,d=0,p=0,c=s.length,n=t.value,u,f,m,g,_,y,h,b,x,v,S;d<c;){m=o-a,g=r-i;do _=s[p++].value;while(!_&&p<c);for(y=h=_,v=N(g/m,m/g)/(n*e),S=_*_*v,x=N(h/S,S/y);p<c;++p){if(_+=f=s[p].value,f<y&&(y=f),f>h&&(h=f),S=_*_*v,b=N(h/S,S/y),b>x){_-=f;break}x=b}l.push(u={value:_,dice:m<g,children:s.slice(d,p)}),u.dice?IO(u,a,i,o,n?i+=g*_/n:r):jO(u,a,i,n?a+=m*_/n:o,r),n-=_,d=p}return l}function Iu(e){bn.call(this,null,e)}function Mu(e){return e.values}function Fu(e){bn.call(this,null,e)}function Bu(e,t,a){for(var o=0,i=t.length,n;o<i;++o)n=t[o],n in a&&e[n](a[n])}function zu(e,a,o){for(var r=e.data,t=0,i=a.length-1;t<i;++t)r[o[t]]=e[a[t]];r[o[i]]=e.children?e.children.length:0}function ju(e){Fu.call(this,e)}function Uu(e){Fu.call(this,e)}function $u(e){bn.call(this,null,e)}function Wu(e){Fu.call(this,e)}function qu(e){bn.call(this,{},e)}function Hu(e){var t;return e.parent&&(t=e.parent.data)&&null!=V(t)&&t}function Yu(e){Fu.call(this,e)}function Vu(e){return e[0]}function Gu(e){return e[1]}function Zu(){this._=null}function Xu(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Ku(e,t){var n=t,a=t.R,i=n.U;i?i.L===n?i.L=a:i.R=a:e._=a,a.U=i,n.U=a,n.R=a.L,n.R&&(n.R.U=n),a.L=n}function Ju(e,t){var n=t,a=t.L,i=n.U;i?i.L===n?i.L=a:i.R=a:e._=a,a.U=i,n.U=a,n.L=a.R,n.L&&(n.L.U=n),a.R=n}function Qu(e){for(;e.L;)e=e.L;return e}function ef(e,t,n,a){var i=[null,null],o=gD.push(i)-1;return i.left=e,i.right=t,n&&nf(i,e,t,n),a&&nf(i,t,e,a),fD[e.index].halfedges.push(o),fD[t.index].halfedges.push(o),i}function tf(e,t,n){var a=[t,n];return a.left=e,a}function nf(e,t,n,a){e[0]||e[1]?e.left===n?e[1]=a:e[0]=a:(e[0]=a,e.left=t,e.right=n)}function af(e,t,n,i,o){var l=e[0],a=e[1],s=l[0],d=l[1],p=a[0],c=a[1],u=0,f=1,m=p-s,g=c-d,_;if(_=t-s,m||!(0<_)){if(_/=m,0>m){if(_<u)return;_<f&&(f=_)}else if(0<m){if(_>f)return;_>u&&(u=_)}if(_=i-s,m||!(0>_)){if(_/=m,0>m){if(_>f)return;_>u&&(u=_)}else if(0<m){if(_<u)return;_<f&&(f=_)}if(_=n-d,g||!(0<_)){if(_/=g,0>g){if(_<u)return;_<f&&(f=_)}else if(0<g){if(_>f)return;_>u&&(u=_)}if(_=o-d,g||!(0>_)){if(_/=g,0>g){if(_>f)return;_>u&&(u=_)}else if(0<g){if(_<u)return;_<f&&(f=_)}return 0<u||1>f?(0<u&&(e[0]=[s+u*m,d+u*g]),1>f&&(e[1]=[s+f*m,d+f*g]),!0):!0}}}}}function of(e,t,n,a,i){var o=e[1];if(o)return!0;var r=e[0],l=e.left,s=e.right,d=l[0],p=l[1],c=s[0],u=s[1],f=(d+c)/2,m,g;if(u===p){if(f<t||f>=a)return;if(d>c){if(!r)r=[f,n];else if(r[1]>=i)return;o=[f,i]}else{if(!r)r=[f,i];else if(r[1]<n)return;o=[f,n]}}else if(m=(d-c)/(u-p),g=(p+u)/2-m*f,-1>m||1<m){if(d>c){if(!r)r=[(n-g)/m,n];else if(r[1]>=i)return;o=[(i-g)/m,i]}else{if(!r)r=[(i-g)/m,i];else if(r[1]<n)return;o=[(n-g)/m,n]}}else if(p<u){if(!r)r=[t,m*t+g];else if(r[0]>=a)return;o=[a,m*a+g]}else{if(!r)r=[a,m*a+g];else if(r[0]<t)return;o=[t,m*t+g]}return e[0]=r,e[1]=o,!0}function rf(e,t,n,a){for(var o=gD.length,i;o--;)of(i=gD[o],e,t,n,a)&&af(i,e,t,n,a)&&(T(i[0][0]-i[1][0])>dD||T(i[0][1]-i[1][1])>dD)||delete gD[o]}function lf(e){return fD[e.index]={site:e,halfedges:[]}}function sf(e,t){var n=e.site,a=t.left,i=t.right;return(n===i&&(i=a,a=n),i)?nh(i[1]-a[1],i[0]-a[0]):(n===a?(a=t[1],i=t[0]):(a=t[0],i=t[1]),nh(a[0]-i[0],i[1]-a[1]))}function df(e,t){return t[+(t.left!==e.site)]}function pf(e,t){return t[+(t.left===e.site)]}function cf(){for(var e=0,t=fD.length,n,a,i,o;e<t;++e)if((n=fD[e])&&(o=(a=n.halfedges).length)){var r=Array(o),l=Array(o);for(i=0;i<o;++i)r[i]=i,l[i]=sf(n,gD[a[i]]);for(r.sort(function(e,t){return l[t]-l[e]}),i=0;i<o;++i)l[i]=a[r[i]];for(i=0;i<o;++i)a[i]=l[i]}}function uf(e,t,n,a){var i=fD.length,o=!0,r,l,s,d,p,c,u,f,m,g,_,y;for(r=0;r<i;++r)if(l=fD[r]){for(s=l.site,p=l.halfedges,d=p.length;d--;)gD[p[d]]||p.splice(d,1);for(d=0,c=p.length;d<c;)g=pf(l,gD[p[d]]),_=g[0],y=g[1],u=df(l,gD[p[++d%c]]),f=u[0],m=u[1],(T(_-f)>dD||T(y-m)>dD)&&(p.splice(d,0,gD.push(tf(s,g,T(_-e)<dD&&a-y>dD?[e,T(f-e)<dD?m:a]:T(y-a)<dD&&n-_>dD?[T(m-a)<dD?f:n,a]:T(_-n)<dD&&y-t>dD?[n,T(f-n)<dD?m:t]:T(y-t)<dD&&_-e>dD?[T(m-t)<dD?f:e,t]:null))-1),++c);c&&(o=!1)}if(o){var h=Infinity,b,x,v;for(r=0,o=null;r<i;++r)(l=fD[r])&&(s=l.site,b=s[0]-e,x=s[1]-t,v=b*b+x*x,v<h&&(h=v,o=l));if(o){var S=[e,t],k=[e,a],E=[n,a],N=[n,t];o.halfedges.push(gD.push(tf(s=o.site,S,k))-1,gD.push(tf(s,k,E))-1,gD.push(tf(s,E,N))-1,gD.push(tf(s,N,S))-1)}}for(r=0;r<i;++r)(l=fD[r])&&(l.halfedges.length||delete fD[r])}function ff(){Xu(this),this.x=this.y=this.arc=this.site=this.cy=null}function mf(e){var t=e.P,n=e.N;if(t&&n){var a=t.site,i=e.site,o=n.site;if(a!==o){var r=i[0],l=i[1],s=a[0]-r,p=a[1]-l,c=o[0]-r,f=o[1]-l,m=2*(s*f-p*c);if(!(m>=-pD)){var d=s*s+p*p,g=c*c+f*f,_=(f*d-p*g)/m,h=(s*g-c*d)/m,y=lD.pop()||new ff;y.arc=e,y.site=i,y.x=_+r,y.y=(y.cy=h+l)+u(_*_+h*h),e.circle=y;for(var b=null,x=mD._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(x.L)x=x.L;else{b=x.P;break}}else if(x.R)x=x.R;else{b=x;break}mD.insert(b,y),b||(cD=y)}}}}function gf(e){var t=e.circle;t&&(!t.P&&(cD=t.N),mD.remove(t),lD.push(t),Xu(t),e.circle=null)}function _f(){Xu(this),this.edge=this.site=this.circle=null}function yf(e){var t=sD.pop()||new _f;return t.site=e,t}function hf(e){gf(e),uD.remove(e),sD.push(e),Xu(e)}function bf(e){var t=e.circle,n=t.x,a=t.cy,i=[n,a],o=e.P,r=e.N,l=[e];hf(e);for(var s=o;s.circle&&T(n-s.circle.x)<dD&&T(a-s.circle.cy)<dD;)o=s.P,l.unshift(s),hf(s),s=o;l.unshift(s),gf(s);for(var d=r;d.circle&&T(n-d.circle.x)<dD&&T(a-d.circle.cy)<dD;)r=d.N,l.push(d),hf(d),d=r;l.push(d),gf(d);var p=l.length,c;for(c=1;c<p;++c)d=l[c],s=l[c-1],nf(d.edge,s.site,d.site,i);s=l[0],d=l[p-1],d.edge=ef(s.site,d.site,null,i),mf(s),mf(d)}function vf(e){for(var t=e[0],n=e[1],a=uD._,i,o,r,l;a;)if(r=Sf(a,n)-t,r>dD)a=a.L;else if(l=t-Tf(a,n),l>dD){if(!a.R){i=a;break}a=a.R}else{r>-dD?(i=a.P,o=a):l>-dD?(i=a,o=a.N):i=o=a;break}lf(e);var s=yf(e);if(uD.insert(i,s),i||o){if(i===o)return gf(i),o=yf(i.site),uD.insert(s,o),s.edge=o.edge=ef(i.site,s.site),mf(i),void mf(o);if(!o)return void(s.edge=ef(i.site,s.site));gf(i),gf(o);var p=i.site,c=p[0],u=p[1],f=e[0]-c,m=e[1]-u,g=o.site,_=g[0]-c,y=g[1]-u,h=2*(f*y-m*_),d=f*f+m*m,b=_*_+y*y,x=[(y*d-m*b)/h+c,(f*b-_*d)/h+u];nf(o.edge,p,g,x),s.edge=ef(p,e,null,x),o.edge=ef(e,g,null,x),mf(i),mf(o)}}function Sf(e,t){var n=e.site,a=n[0],i=n[1],o=i-t;if(!o)return a;var r=e.P;if(!r)return-Infinity;n=r.site;var l=n[0],s=n[1],d=s-t;if(!d)return l;var p=l-a,c=1/o-1/d,f=p/d;return c?(-f+u(f*f-2*c*(p*p/(-2*d)-s+d/2+i-o/2)))/c+a:(a+l)/2}function Tf(e,t){var n=e.N;if(n)return Sf(n,t);var a=e.site;return a[1]===t?a[0]:Infinity}function kf(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function Ef(e,t){return t[1]-e[1]||t[0]-e[0]}function Nf(e,t){var n=e.sort(Ef).pop(),a,i,o;for(gD=[],fD=Array(e.length),uD=new Zu,mD=new Zu;;)if(o=cD,n&&(!o||n[1]<o.y||n[1]===o.y&&n[0]<o.x))(n[0]!==a||n[1]!==i)&&(vf(n),a=n[0],i=n[1]),n=e.pop();else if(o)bf(o.arc);else break;if(cf(),t){var r=+t[0][0],l=+t[0][1],s=+t[1][0],d=+t[1][1];rf(r,l,s,d),uf(r,l,s,d)}this.edges=gD,this.cells=fD,uD=mD=gD=fD=null}function Lf(e){bn.call(this,null,e)}function Af(e,t,a,o){if(!t.sprite){var r=e.context,l=e.ratio;r.clearRect(0,0,(vD<<5)/l,cw/l);var d=0,p=0,u=0,f=a.length,n,g,_,y,i;for(--o;++o<f;){if(t=a[o],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/l)+"px "+t.font,n=r.measureText(t.text+"m").width*l,_=t.size<<1,t.rotate){var h=s(t.rotate*xD),b=c(t.rotate*xD),x=n*b,v=n*h,S=_*b,E=_*h;n=N(T(x+E),T(x-E))+31>>5<<5,_=~~N(T(v+S),T(v-S))}else n=n+31>>5<<5;if(_>u&&(u=_),d+n>=vD<<5&&(d=0,p+=u,u=0),p+_>=cw)break;r.translate((d+(n>>1))/l,(p+(_>>1))/l),t.rotate&&r.rotate(t.rotate*xD),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=n,t.height=_,t.xoff=d,t.yoff=p,t.x1=n>>1,t.y1=_>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,d+=n}for(var A=r.getImageData(0,0,(vD<<5)/l,cw/l).data,w=[];0<=--o;)if(t=a[o],t.hasText){for(n=t.width,g=n>>5,_=t.y1-t.y0,y=0;y<_*g;y++)w[y]=0;if(d=t.xoff,null==d)return;p=t.yoff;var C=0,O=-1;for(i=0;i<_;i++){for(y=0;y<n;y++){var D=g*i+(y>>5),k=A[(p+i)*(vD<<5)+(d+y)<<2]?1<<31-y%32:0;w[D]|=k,C|=k}C?O=i:(t.y0++,_--,i--,p++)}t.y1=t.y0+O,t.sprite=w.slice(0,(t.y1-t.y0)*g)}}}function wf(e,t,n){n>>=5;for(var a=e.sprite,o=e.width>>5,r=e.x-(o<<4),l=127&r,s=e.y1-e.y0,d=(e.y+e.y0)*n+(r>>5),p=0,c;p<s;p++){c=0;for(var u=0;u<=o;u++)if((c<<32-l|(u<o?(c=a[p*o+u])>>>l:0))&t[d+u])return!0;d+=n}return!1}function Cf(e,t){var n=e[0],a=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>a.x&&(a.x=t.x+t.x1),t.y+t.y1>a.y&&(a.y=t.y+t.y1)}function Of(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Df(t){var n=t[0]/t[1];return function(e){return[n*(e*=.1)*c(e),e*s(e)]}}function Pf(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Rf(){try{var e="undefined"!=typeof document&&document.createElement?document.createElement("canvas"):0;if(e&&e.getContext)return e;try{return new(_("canvas"))}catch(t){return new(_("canvas-prebuilt"))}}catch(t){lh("Canvas unavailable. Run in browser or install node-canvas.")}}function If(e){return"function"==typeof e?e:function(){return e}}function Mf(e){bn.call(this,ch(),e)}function Ff(e,t){for(var a=+Infinity,o=-Infinity,r=0,i=t.length,n;r<i;++r)n=e(t[r]),n<a&&(a=n),n>o&&(o=n);return[a,o]}function Bf(e){return new Uint8Array(e)}function zf(e){return new Uint16Array(e)}function jf(e){return new Uint32Array(e)}function Uf(){var e=8,a=[],t=jf(0),o=Wf(0,e),r=Wf(0,e);return{data:function(){return a},seen:function(){return t=$f(t,a.length)},add:function(e){for(var o=0,i=a.length,r=e.length,n;o<r;++o)n=e[o],n._index=i++,a.push(n)},remove:function(e,l){var s=a.length,n=Array(s-e),d=a,p,t,i;for(t=0;!l[t]&&t<s;++t)n[t]=a[t],d[t]=t;for(i=t;t<s;++t)p=a[t],l[t]?d[t]=-1:(d[t]=i,o[i]=o[t],r[i]=r[t],n[i]=p,p._index=i++),o[t]=0;return a=n,d},size:function(){return a.length},curr:function(){return o},prev:function(){return r},reset:function(e){r[e]=o[e]},all:function(){return 257>e?255:65537>e?65535:4294967295},set:function(e,t){o[e]|=t},clear:function(e,t){o[e]&=~t},resize:function(t,n){var a=o.length;(t>a||n>e)&&(e=N(n,e),o=Wf(t,e,o),r=Wf(t,e))}}}function $f(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Wf(e,t,n){var a=(257>t?Bf:65537>t?zf:jf)(e);return n&&a.set(n),a}function qf(){var e=jf(0),t=[],a=0;return{insert:function(n,o,r){if(!o.length)return[];var l=a,s=o.length,d=Array(s),p=jf(s),c,u,f;for(f=0;f<s;++f)d[f]=n(o[f]),p[f]=f;if(d=Hf(d,p),l)c=t,u=e,t=Array(l+s),e=jf(l+s),Yf(r,c,u,l,d,p,s,t,e);else{if(0<r)for(f=0;f<s;++f)p[f]+=r;t=d,e=p}return a=l+s,{index:p,value:d}},remove:function(o,r){var l=a,n,s,i;for(s=0;!r[e[s]]&&s<l;++s);for(i=s;s<l;++s)r[n=e[s]]||(e[i]=n,t[i]=t[s],++i);a=l-o},bisect:function(e,i){var o;return i?o=i.length:(i=t,o=a),[tv(i,e[0],0,o),ev(i,e[1],0,o)]},reindex:function(t){for(var o=0,i=a;o<i;++o)e[o]=t[e[o]]},index:function(){return e},size:function(){return a}}}function Hf(e,t){return e.sort.call(t,function(t,n){var a=e[t],i=e[n];return a<i?-1:a>i?1:0}),mv(e,t)}function Yf(e,t,n,a,o,r,l,s,d){var p=0,c=0,u;for(u=0;p<a&&c<l;++u)t[p]<o[c]?(s[u]=t[p],d[u]=n[p++]):(s[u]=o[c],d[u]=r[c++]+e);for(;p<a;++p,++u)s[u]=t[p],d[u]=n[p];for(;c<l;++c,++u)s[u]=o[c],d[u]=r[c]+e}function Vf(e){bn.call(this,Uf(),e),this._indices=null,this._dims=null}function Gf(e){bn.call(this,null,e)}function Zf(e){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=e)}function Xf(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||lh("Unrecognized data set: "+t),n[t]}function Kf(e,t){Q(t)||lh("Second argument to changes must be a changeset.");var n=Xf(this,e);return n.modified=!0,this.pulse(n.input,t)}function Jf(e){var t=e.padding();return N(0,e._viewWidth+t.left+t.right)}function Qf(e){var t=e.padding();return N(0,e._viewHeight+t.top+t.bottom)}function em(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function tm(e){var t=em(e);e._renderer.background(e._background),e._renderer.resize(Jf(e),Qf(e),t),e._handler.origin(t)}function nm(e,t,n){function a(e){var n=o,a;if(e)for(a=t;a;a=a.mark.group)if(a.mark.name===e){n=a;break}return n&&n.mark&&n.mark.interactive?n:{}}function i(e){if(!e)return n;uh(e)&&(e=a(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var o=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:Oh(e),item:Oh(t||{}),group:a,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}function am(e){e=Ph({},e);var t=e.defaults;return t&&(dh(t.prevent)&&(t.prevent=Zh(t.prevent)),dh(t.allow)&&(t.allow=Zh(t.allow))),e}function im(e,t){var n=e._eventConfig.defaults,a=n&&n.prevent,i=n&&n.allow;return!1===a||!0===i?!1:!0===a||!1===i||(a?a[t]:i?!i[t]:e.preventDefault())}function om(e){return e.item}function rm(e){var t=e.item.mark.source;return t.source||t}function lm(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function sm(e,t,n,a){var i=RD("div",{class:ID});i.appendChild(RD("span",{class:MD},n.name||n.signal)),t.appendChild(i);var o=dm;switch(n.input){case"checkbox":o=pm;break;case"select":o=cm;break;case"radio":o=um;break;case"range":o=fm;}o(e,i,n,a)}function dm(e,t,n,a){var i=RD("input");for(var o in n)"signal"!=o&&"element"!=o&&i.setAttribute("input"==o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=a,t.appendChild(i),i.addEventListener("input",function(){e.update(i.value)}),e.elements=[i],e.set=function(e){i.value=e}}function pm(e,t,n,a){var i={type:"checkbox",name:n.signal};a&&(i.checked=!0);var o=RD("input",i);t.appendChild(o),o.addEventListener("change",function(){e.update(o.checked)}),e.elements=[o],e.set=function(e){o.checked=!!e||null}}function cm(e,t,a,n){var o=RD("select",{name:a.signal});a.options.forEach(function(e){var t={value:e};mm(e,n)&&(t.selected=!0),o.appendChild(RD("option",t,e+""))}),t.appendChild(o),o.addEventListener("change",function(){e.update(a.options[o.selectedIndex])}),e.elements=[o],e.set=function(e){for(var t=0,i=a.options.length;t<i;++t)if(mm(a.options[t],e))return void(o.selectedIndex=t)}}function um(e,t,n,a){var i=RD("span",{class:FD});t.appendChild(i),e.elements=n.options.map(function(t){var o=BD+n.signal+"-"+t,r={id:o,type:"radio",name:n.signal,value:t};mm(t,a)&&(r.checked=!0);var l=RD("input",r);return l.addEventListener("change",function(){e.update(t)}),i.appendChild(l),i.appendChild(RD("label",{for:o},t+"")),l}),e.set=function(t){for(var a=e.elements,o=0,i=a.length;o<i;++o)mm(a[o].value,t)&&(a[o].checked=!0)}}function fm(e,t,n,a){function i(){d.textContent=s.value,e.update(+s.value)}a=a===void 0?(+n.max+ +n.min)/2:a;var o=n.min||S(0,+a)||0,r=n.max||N(100,+a)||100,l=n.step||Pn(o,r,100),s=RD("input",{type:"range",name:n.signal,min:o,max:r,step:l});s.value=a;var d=RD("label",{},+a);t.appendChild(s),t.appendChild(d),s.addEventListener("input",i),s.addEventListener("change",i),e.elements=[s],e.set=function(e){s.value=e,d.textContent=e}}function mm(e,t){return e===t||e+""==t+""}function gm(t,n){if("string"==typeof n){if("undefined"==typeof document)return t.error("DOM document instance not found."),null;if(n=document.querySelector(n),!n)return t.error("Signal bind element not found: "+n),null}if(n)try{n.innerHTML=""}catch(a){n=null,t.error(a)}return n}function _m(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function ym(e){return+e||0}function hm(e){return{top:e,bottom:e,left:e,right:e}}function bm(e,t){lh(e+" for \"outer\" push: "+w(t))}function xm(e){this.type=e}function vm(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[];}}/*
  The following expression parser is based on Esprima (http://esprima.org/).
  Original header comment and license for Esprima is included here:

  Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
  Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
  Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
  Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
  Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Sm(e,t){if(!e)throw new Error("ASSERT: "+t)}function Tm(e){return 48<=e&&57>=e}function km(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function Em(e){return 0<="01234567".indexOf(e)}function Nm(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)}function Lm(e){return 10===e||13===e||8232===e||8233===e}function Am(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||92===e||128<=e&&kP.test(d(e))}function wm(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||48<=e&&57>=e||92===e||128<=e&&EP.test(d(e))}function Cm(){for(var e;QP<eR&&(e=JP.charCodeAt(QP),Nm(e)||Lm(e));)++QP}function Om(e){var t=0,n,a,i;for(a="u"===e?4:2,n=0;n<a;++n)QP<eR&&km(JP[QP])?(i=JP[QP++],t=16*t+"0123456789abcdef".indexOf(i.toLowerCase())):og({},uP,SP);return d(t)}function Dm(){var e,t,n,a;for(e=JP[QP],t=0,"}"===e&&og({},uP,SP);QP<eR&&(e=JP[QP++],!!km(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return((1114111<t||"}"!==e)&&og({},uP,SP),65535>=t)?d(t):(n=(t-65536>>10)+55296,a=(1023&t-65536)+56320,d(n,a))}function Pm(){var e,t;for(e=JP.charCodeAt(QP++),t=d(e),92===e&&(117!==JP.charCodeAt(QP)&&og({},uP,SP),++QP,e=Om("u"),(!e||"\\"===e||!Am(e.charCodeAt(0)))&&og({},uP,SP),t=e);QP<eR&&(e=JP.charCodeAt(QP),!!wm(e));)++QP,t+=d(e),92===e&&(t=t.substr(0,t.length-1),117!==JP.charCodeAt(QP)&&og({},uP,SP),++QP,e=Om("u"),(!e||"\\"===e||!wm(e.charCodeAt(0)))&&og({},uP,SP),t+=e);return t}function Rm(){var e,t;for(e=QP++;QP<eR;){if(t=JP.charCodeAt(QP),92===t)return QP=e,Pm();if(wm(t))++QP;else break}return JP.slice(e,QP)}function Im(){var e,t,n;return e=QP,t=92===JP.charCodeAt(QP)?Pm():Rm(),n=1===t.length?ZD:NP.hasOwnProperty(t)?XD:"null"===t?KD:"true"===t||"false"===t?VD:ZD,{type:n,value:t,start:e,end:QP}}function Mm(){var e=QP,t=JP.charCodeAt(QP),n=JP[QP],a,i,o,r;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++QP,{type:QD,value:d(t),start:e,end:QP};default:if(a=JP.charCodeAt(QP+1),61===a)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return QP+=2,{type:QD,value:d(t)+d(a),start:e,end:QP};case 33:case 61:return QP+=2,61===JP.charCodeAt(QP)&&++QP,{type:QD,value:JP.slice(e,QP),start:e,end:QP};}}return(r=JP.substr(QP,4),">>>="===r)?(QP+=4,{type:QD,value:r,start:e,end:QP}):(o=r.substr(0,3),">>>"===o||"<<="===o||">>="===o)?(QP+=3,{type:QD,value:o,start:e,end:QP}):(i=o.substr(0,2),n===i[1]&&0<="+-<>&|".indexOf(n)||"=>"===i?(QP+=2,{type:QD,value:i,start:e,end:QP}):0<="<>=!+-*%&|^/".indexOf(n)?(++QP,{type:QD,value:n,start:e,end:QP}):void og({},uP,SP))}function Fm(e){for(var t="";QP<eR&&!!km(JP[QP]);)t+=JP[QP++];return 0===t.length&&og({},uP,SP),Am(JP.charCodeAt(QP))&&og({},uP,SP),{type:JD,value:parseInt("0x"+t,16),start:e,end:QP}}function Bm(e){for(var t="0"+JP[QP++];QP<eR&&!!Em(JP[QP]);)t+=JP[QP++];return(Am(JP.charCodeAt(QP))||Tm(JP.charCodeAt(QP)))&&og({},uP,SP),{type:JD,value:parseInt(t,8),octal:!0,start:e,end:QP}}function zm(){var e,t,n;if(n=JP[QP],Sm(Tm(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=QP,e="","."!==n){if(e=JP[QP++],n=JP[QP],"0"===e){if("x"===n||"X"===n)return++QP,Fm(t);if(Em(n))return Bm(t);n&&Tm(n.charCodeAt(0))&&og({},uP,SP)}for(;Tm(JP.charCodeAt(QP));)e+=JP[QP++];n=JP[QP]}if("."===n){for(e+=JP[QP++];Tm(JP.charCodeAt(QP));)e+=JP[QP++];n=JP[QP]}if("e"===n||"E"===n)if(e+=JP[QP++],n=JP[QP],("+"===n||"-"===n)&&(e+=JP[QP++]),Tm(JP.charCodeAt(QP)))for(;Tm(JP.charCodeAt(QP));)e+=JP[QP++];else og({},uP,SP);return Am(JP.charCodeAt(QP))&&og({},uP,SP),{type:JD,value:parseFloat(e),start:t,end:QP}}function jm(){var e="",t=!1,n,a,i,o;for(n=JP[QP],Sm("'"===n||"\""===n,"String literal must starts with a quote"),a=QP,++QP;QP<eR;)if(i=JP[QP++],i===n){n="";break}else if("\\"===i)i=JP[QP++],i&&Lm(i.charCodeAt(0))?"\r"===i&&"\n"===JP[QP]&&++QP:"u"===i||"x"===i?"{"===JP[QP]?(++QP,e+=Dm()):e+=Om(i):"n"===i?e+="\n":"r"===i?e+="\r":"t"===i?e+="\t":"b"===i?e+="\b":"f"===i?e+="\f":"v"===i?e+="\x0B":Em(i)?(o="01234567".indexOf(i),0!==o&&(t=!0),QP<eR&&Em(JP[QP])&&(t=!0,o=8*o+"01234567".indexOf(JP[QP++]),0<="0123".indexOf(i)&&QP<eR&&Em(JP[QP])&&(o=8*o+"01234567".indexOf(JP[QP++]))),e+=d(o)):e+=i;else if(Lm(i.charCodeAt(0)))break;else e+=i;return""!==n&&og({},uP,SP),{type:eP,value:e,octal:t,start:a,end:QP}}function Um(e,t){var n=e;0<=t.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return 1114111>=parseInt(t,16)?"x":void og({},hP)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(t){og({},hP)}try{return new RegExp(e,t)}catch(e){return null}}function $m(){var e,t,n,a,i;for(e=JP[QP],Sm("/"===e,"Regular expression literal must start with a slash"),t=JP[QP++],n=!1,a=!1;QP<eR;)if(e=JP[QP++],t+=e,"\\"===e)e=JP[QP++],Lm(e.charCodeAt(0))&&og({},bP),t+=e;else if(Lm(e.charCodeAt(0)))og({},bP);else if(n)"]"===e&&(n=!1);else if("/"===e){a=!0;break}else"["===e&&(n=!0);return a||og({},bP),i=t.substr(1,t.length-2),{value:i,literal:t}}function Wm(){var e,t,n;for(t="",n="";QP<eR&&(e=JP[QP],!!wm(e.charCodeAt(0)));)++QP,"\\"===e&&QP<eR?og({},uP,SP):(n+=e,t+=e);return 0<=n.search(/[^gimuy]/g)&&og({},hP,n),{value:n,literal:t}}function qm(){var e,t,n,a;return tR=null,Cm(),e=QP,t=$m(),n=Wm(),a=Um(t.value,n.value),{literal:t.literal+n.literal,value:a,regex:{pattern:t.value,flags:n.value},start:e,end:QP}}function Hm(e){return e.type===ZD||e.type===XD||e.type===VD||e.type===KD}function Ym(){var e;return(Cm(),QP>=eR)?{type:GD,start:QP,end:QP}:(e=JP.charCodeAt(QP),Am(e)?Im():40===e||41===e||59===e?Mm():39===e||34===e?jm():46===e?Tm(JP.charCodeAt(QP+1))?zm():Mm():Tm(e)?zm():Mm())}function Vm(){var e;return e=tR,QP=e.end,tR=Ym(),QP=e.end,e}function Gm(){var e;e=QP,tR=Ym(),QP=e}function Zm(e){var t=new xm(tP);return t.elements=e,t}function Xm(e,t,n){var a=new xm("||"===e||"&&"===e?lP:nP);return a.operator=e,a.left=t,a.right=n,a}function Km(e,t){var n=new xm(aP);return n.callee=e,n.arguments=t,n}function Jm(e,t,n){var a=new xm(iP);return a.test=e,a.consequent=t,a.alternate=n,a}function Qm(e){var t=new xm(oP);return t.name=e,t}function eg(e){var t=new xm(rP);return t.value=e.value,t.raw=JP.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function tg(e,t,n){var a=new xm(sP);return a.computed="["===e,a.object=t,a.property=n,a.computed||(n.member=!0),a}function ng(e){var t=new xm(dP);return t.properties=e,t}function ag(e,t,n){var a=new xm(pP);return a.key=t,a.value=n,a.kind=e,a}function ig(e,t){var n=new xm(cP);return n.operator=e,n.argument=t,n.prefix=!0,n}function og(e,t){var n=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,function(e,t){return Sm(t<n.length,"Message reference must be in range"),n[t]}),i;throw i=new Error(a),i.index=QP,i.description=a,i}function rg(e){e.type===GD&&og(e,yP),e.type===JD&&og(e,fP),e.type===eP&&og(e,mP),e.type===ZD&&og(e,gP),e.type===XD&&og(e,_P),og(e,uP,e.value)}function lg(e){var t=Vm();(t.type!==QD||t.value!==e)&&rg(t)}function sg(e){return tR.type===QD&&tR.value===e}function dg(e){return tR.type===XD&&tR.value===e}function pg(){var e=[];for(QP=tR.start,lg("[");!sg("]");)sg(",")?(Vm(),e.push(null)):(e.push(Eg()),sg("]")||lg(","));return Vm(),Zm(e)}function cg(){var e;return QP=tR.start,e=Vm(),e.type===eP||e.type===JD?(e.octal&&og(e,xP),eg(e)):Qm(e.value)}function ug(){var e,t,n,a;return QP=tR.start,e=tR,e.type===ZD?(n=cg(),lg(":"),a=Eg(),ag("init",n,a)):e.type===GD||e.type===QD?void rg(e):(t=cg(),lg(":"),a=Eg(),ag("init",t,a))}function fg(){var e=[],t={},n=String,a,i,o;for(QP=tR.start,lg("{");!sg("}");)a=ug(),i=a.key.type===oP?a.key.name:n(a.key.value),o="$"+i,Object.prototype.hasOwnProperty.call(t,o)?og({},vP):t[o]=!0,e.push(a),sg("}")||lg(",");return lg("}"),ng(e)}function mg(){var e;return lg("("),e=Ng(),lg(")"),e}function gg(){var e,t,n;if(sg("("))return mg();if(sg("["))return pg();if(sg("{"))return fg();if(e=tR.type,QP=tR.start,e===ZD||LP[tR.value])n=Qm(Vm().value);else if(e===eP||e===JD)tR.octal&&og(tR,xP),n=eg(Vm());else if(e===XD)throw new Error(TP);else e===VD?(t=Vm(),t.value="true"===t.value,n=eg(t)):e===KD?(t=Vm(),t.value=null,n=eg(t)):sg("/")||sg("/=")?(n=eg(qm()),Gm()):rg(Vm());return n}function _g(){var e=[];if(lg("("),!sg(")"))for(;QP<eR&&(e.push(Eg()),!sg(")"));)lg(",");return lg(")"),e}function yg(){var e;return QP=tR.start,e=Vm(),Hm(e)||rg(e),Qm(e.value)}function hg(){return lg("."),yg()}function bg(){var e;return lg("["),e=Ng(),lg("]"),e}function xg(){var e,t,n;for(e=gg();;)if(sg("."))n=hg(),e=tg(".",e,n);else if(sg("("))t=_g(),e=Km(e,t);else if(sg("["))n=bg(),e=tg("[",e,n);else break;return e}function vg(){var e=xg();if(tR.type===QD&&(sg("++")||sg("--")))throw new Error(TP);return e}function Sg(){var e,t;if(tR.type!==QD&&tR.type!==XD)t=vg();else if(sg("++")||sg("--"))throw new Error(TP);else if(sg("+")||sg("-")||sg("~")||sg("!"))e=Vm(),t=Sg(),t=ig(e.value,t);else if(dg("delete")||dg("void")||dg("typeof"))throw new Error(TP);else t=vg();return t}function Tg(e){var t=0;if(e.type!==QD&&e.type!==XD)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break;default:}return t}function kg(){var e,t,n,a,o,r,l,s,d,p;if(e=tR,d=Sg(),a=tR,o=Tg(a),0===o)return d;for(a.prec=o,Vm(),t=[e,tR],l=Sg(),r=[d,a,l];0<(o=Tg(tR));){for(;2<r.length&&o<=r[r.length-2].prec;)l=r.pop(),s=r.pop().value,d=r.pop(),t.pop(),n=Xm(s,d,l),r.push(n);a=Vm(),a.prec=o,r.push(a),t.push(tR),n=Sg(),r.push(n)}for(p=r.length-1,n=r[p],t.pop();1<p;)t.pop(),n=Xm(r[p-1].value,r[p-2],n),p-=2;return n}function Eg(){var e,t,n;return e=kg(),sg("?")&&(Vm(),t=Eg(),lg(":"),n=Eg(),e=Jm(e,t,n)),e}function Ng(){var e=Eg();if(sg(","))throw new Error(TP);return e}function Lg(t,n,a){var i=t+":"+a,o=OP[i];return o&&o[0]===n||(OP[i]=o=[n,n(a)]),o[1]}function Ag(e,t){return Lg("timeFormat",vx,t)(e)}function wg(e,t,n){return DP.setMonth(e),DP.setDate(t),Ag(DP,n)}function Cg(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function Og(e,t){var n;return wh(e)?e:uh(e)?(n=t.scales[e])&&n.value:void 0}function Dg(e,t,n){var a=FP+n;if(!t.hasOwnProperty(a))try{t[a]=e.scaleRef(n)}catch(e){}}function Pg(e,t,n,a){if(t[0].type===RP)Dg(n,a,t[0].value);else if(t[0].type===IP)for(e in n.scales)Dg(n,a,e)}function Rg(e){return function(t,n,a){var i=Og(t,(a||this).context);return i&&i.path[e](n)}}function Ig(e){var t=this.context.data[e];return t?t.values.value:[]}function Mg(e,t,n,a){t[0].type!==RP&&lh("First argument to data functions must be a string literal.");var i=t[0].value,o=BP+i;a.hasOwnProperty(o)||(a[o]=n.getData(i).tuplesRef())}function Fg(e){return e.data}function Bg(e,t){var n=Ig.call(t,e);return n.root&&n.root.lookup||$P}function zg(e,t){return e===t||e!==e&&t!==t||dh(e)&&dh(t)&&e.length===t.length&&jg(e,t)}function jg(e,t){for(var a=0,i=e.length;a<i;++a)if(!zg(e[a],t[a]))return!1;return!0}function Ug(e){return function(t){for(var n in e)if(!zg(t[n],e[n]))return!1;return!0}}function $g(e,t){for(var a=t.fields,o=t.values,r=t.getter||(t.getter=[]),l=a.length,n=0,i;n<l;++n)if(r[n]=r[n]||fh(a[n]),i=r[n](e),zh(i)&&(i=Lh(i)),zh(o[n])&&(o[n]=Lh(o[n])),t[qP+a[n]]){if(zh(o[n][0])&&(o[n]=o[n].map(Lh)),!WP(i,o[n],!0,!1))return!1;}else if(i!==o[n])return!1;return!0}function Wg(e,t){for(var a=t.intervals,o=a.length,n=0,i,r,l;n<o;++n){if(r=a[n].extent,i=a[n].getter||(a[n].getter=fh(a[n].field)),l=i(e),!r||r[0]===r[1])return!1;if(zh(l)&&(l=Lh(l)),zh(r[0])&&(r=a[n].extent=r.map(Lh)),jh(r[0])&&!WP(l,r))return!1;if(uh(r[0])&&0>r.indexOf(l))return!1}return!0}function qg(e,t,a,o){for(var r=this.context.data[e],l=r?r.values.value:[],s=r?r[VP]&&r[VP].value:void 0,d=a===HP,p=l.length,n=0,i,c,u,f,m;n<p;++n)if(i=l[n],s&&d){if(c=c||{},u=c[f=i.unit]||0,-1===u)continue;if(m=o(t,i),c[f]=m?-1:++u,m&&1===s.size)return!0;if(!m&&u===s.get(f).count)return!1}else if(m=o(t,i),d^m)return m;return p&&d}function Hg(e,t,n){return qg.call(this,e,t,n,$g)}function Yg(e,t,n,a){t[0].type!==RP&&lh("First argument to indata must be a string literal.");var i=t[0].value,o=2<=t.length&&t[t.length-1].value,r="unit",l=MP+r;o!==HP||a.hasOwnProperty(l)||(a[l]=n.getData(i).indataRef(n,r)),Mg(e,t,n,a)}function Vg(e,t,a,o){var r=this.context.data[e],l=r?r.values.value:[],s=r?r[VP]&&r[VP].value:void 0,d=l[0],p=0,i,n,c,u,f;if(d){for(i=t?d.encodings.length:d.fields.length;p<i;++p)if(t&&d.encodings[p]===t||a&&d.fields[p]===a){n=p,u=d[qP+d.fields[p]];break}return s&&1===s.size&&(o=YP),s&&o===HP?(f=l.reduce(function(e,t){var a=e[t.unit]||(e[t.unit]=[]);return a.push({unit:t.unit,value:t.values[n]}),e},{}),c=Object.keys(f).map(function(e){return{unit:e,value:u?Zg(f[e],YP):Gg(f[e],YP)}})):c=l.map(function(e){return{unit:e.unit,value:e.values[n]}}),u?Zg(c,o):Gg(c,o)}}function Gg(e,t){for(var a={},o=0,r={},l=[],s=0,i=e.length,n,d,p,c;s<i;++s)n=e[s],d=n.unit,c=n.value,a[d]||(a[d]=++o),(p=r[c])||(r[c]=p={value:c,units:{},count:0}),p.units[d]||(p.units[d]=++p.count);for(c in r)p=r[c],t===HP&&p.count!==o||l.push(p.value);return l.length?l:void 0}function Zg(e,t){for(var a=t===HP?Kg:Xg,o=0,i=e.length,n,r,l,s;o<i;++o)n=e[o].value,zh(n[0])&&(n=n.map(Lh)),l=n[0],s=n[1],l>s&&(s=n[0],l=n[1]),r=r?a(r,l,s):[l,s];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function Xg(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function Kg(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function Jg(e,t,n){return 1===arguments.length?GP[e]:(GP[e]=t,n&&(KP[e]=n),aR&&(aR.functions[e]=XP+e),this)}function Qg(e){return e===rR?oR:e||oR}function e_(e,t){var n=e.merge?t_:e.stream?n_:e.type?a_:lh("Invalid stream specification: "+w(e));return n(e,t)}function t_(e,t){var n=e.merge.map(function(e){return e_(e,t)}),a=i_({merge:n},e,t);return t.addStream(a).id}function n_(e,t){var n=e_(e.stream,t),a=i_({stream:n},e,t);return t.addStream(a).id}function a_(e,t){var n=t.event(Qg(e.source),e.type),a=i_({stream:n},e,t);return 1===Object.keys(a).length?n:t.addStream(a).id}function i_(e,t,n){var a=t.between;return a&&(2!==a.length&&lh("Stream \"between\" parameter must have 2 entries: "+w(t)),e.between=[e_(a[0],n),e_(a[1],n)]),a=t.filter?Ah(t.filter):[],(t.marktype||t.markname||t.markrole)&&a.push(o_(t.marktype,t.markname,t.markrole)),t.source===rR&&a.push("inScope(event.item)"),a.length&&(e.filter=iR("("+a.join(")&&(")+")").$expr),null!=(a=t.throttle)&&(e.throttle=+a),null!=(a=t.debounce)&&(e.debounce=+a),t.consume&&(e.consume=!0),e}function o_(e,t,n){var a="event.item";return a+(e&&"*"!==e?"&&"+a+".mark.marktype==='"+e+"'":"")+(n?"&&"+a+".mark.role==='"+n+"'":"")+(t?"&&"+a+".mark.name==='"+t+"'":"")}function r_(e){return GI.hasOwnProperty(e)}function l_(e,t,a,i,o){for(var r=0,l=e.length,n;t<l;++t){if(n=e[t],!r&&n===a)return t;o&&0<=o.indexOf(n)?--r:i&&0<=i.indexOf(n)&&++r}return t}function s_(e){for(var t=[],a=0,o=e.length,n=0;n<o;)n=l_(e,n,mR,dR+cR,pR+uR),t.push(e.substring(a,n).trim()),a=++n;if(0===t.length)throw"Empty event selector: "+e;return t}function d_(e){return"["===e[0]?p_(e):c_(e)}function p_(e){var t=e.length,n=1,a,i;if(n=l_(e,n,pR,dR,pR),n===t)throw"Empty between selector: "+e;if(a=s_(e.substring(1,n)),2!==a.length)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==_R)throw"Expected '>' after between selector: "+e;return(a=a.map(d_),i=d_(e.slice(1).trim()),i.between)?{between:a,stream:i}:(i.between=a,i)}function c_(e){var t={source:VI},a=[],o=[0,0],r=0,l=0,s=e.length,d=0,i,p;if(e[s-1]===uR){if(d=e.lastIndexOf(cR),0<=d){try{o=u_(e.substring(d+1,s-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,d).trim(),s=e.length}else throw"Unmatched right brace: "+e;d=0}if(!s)throw e;if(e[0]===gR&&(r=++d),i=l_(e,d,fR),i<s&&(a.push(e.substring(l,i).trim()),l=d=++i),d=l_(e,d,dR),d===s)a.push(e.substring(l,s).trim());else if(a.push(e.substring(l,d).trim()),p=[],l=++d,l===s)throw"Unmatched left bracket: "+e;for(;d<s;){if(d=l_(e,d,pR),d===s)throw"Unmatched left bracket: "+e;if(p.push(e.substring(l,d).trim()),d<s-1&&e[++d]!==dR)throw"Expected left bracket: "+e;l=++d}if(!(s=a.length)||GT.test(a[s-1]))throw"Invalid event selector: "+e;return 1<s?(t.type=a[1],r?t.markname=a[0].slice(1):r_(a[0])?t.marktype=a[0]:t.source=a[0]):t.type=a[0],"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1)),null!=p&&(t.filter=p),o[0]&&(t.throttle=o[0]),o[1]&&(t.debounce=o[1]),t}function u_(e){var t=e.split(mR);if(!e.length||2<t.length)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}function f_(e,t,n,a){this.id=-1,this.type=e,this.value=t,this.params=n,a&&(this.parent=a)}function m_(e,t,n,a){return new f_(e,t,n,a)}function g_(e,t){return m_("operator",e,t)}function __(e){var t={$ref:e.id};return 0>e.id&&(e.refs=e.refs||[]).push(t),t}function y_(e,t){return t?{$field:e,$name:t}:{$field:e}}function h_(e,t){return{$compare:e,$order:t}}function b_(e,t){var n={$key:e};return t&&(n.$flat=!0),n}function x_(e){return ph(e)?(e.order===TR?"-":"+")+v_(e.op,e.field):""}function v_(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function S_(e){return e&&e.signal}function T_(e,t){return null==e?t:e}function k_(e){return function(t,n,a){return m_(e,n,t||void 0,a)}}function E_(e){return QR.hasOwnProperty(e)}function N_(e){return"quantile"===e}function L_(e,t){var n=e.type||"linear";JR.hasOwnProperty(n)||lh("Unrecognized scale type: "+w(n)),t.addScale(e.name,{type:n,domain:void 0})}function A_(e,t){var n=t.getScale(e.name).params,a;for(a in n.domain=D_(e.domain,e,t),null!=e.range&&(n.range=W_(e,t,n)),null!=e.interpolate&&$_(e.interpolate,n),null!=e.nice&&U_(e.nice,n),e)n.hasOwnProperty(a)||"name"===a||(n[a]=w_(e[a],t))}function w_(e,t){return ph(e)?e.signal?t.signalRef(e.signal):lh("Unsupported object: "+w(e)):e}function C_(e,t){return e.signal?t.signalRef(e.signal):e.map(function(e){return w_(e,t)})}function O_(e){lh("Can not find data set: "+w(e))}function D_(e,t,n){return e?e.signal?n.signalRef(e.signal):(dh(e)?P_:e.fields?I_:R_)(e,t,n):void((null!=t.domainMin||null!=t.domainMax)&&lh("No scale domain defined for domainMin/domainMax to override."))}function P_(e,t,n){return e.map(function(e){return w_(e,n)})}function R_(e,t,n){var a=n.getData(e.data);return a||O_(e.data),E_(t.type)?a.valuesRef(n,e.field,B_(e.sort,!1)):N_(t.type)?a.domainRef(n,e.field):a.extentRef(n,e.field)}function I_(e,t,n){var a=e.data,i=e.fields.reduce(function(e,t){return t=uh(t)?{data:a,field:t}:dh(t)||t.signal?M_(t,n):t,e.push(t),e},[]);return(E_(t.type)?F_:N_(t.type)?z_:j_)(e,n,i)}function M_(e,t){var n="_:vega:_"+XR++,a=LR({});return dh(e)?a.value={$ingest:e}:e.signal&&t.signalRef("setdata("+w(n)+","+e.signal+")"),t.addDataPipeline(n,[a,YR({})]),{data:n,field:"data"}}function F_(e,t,n){var i,o,a,r;return i=n.map(function(e){var n=t.getData(e.data);return n||O_(e.data),n.countsRef(t,e.field)}),o=t.add(kR({groupby:SR,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:i})),a=t.add(LR({pulse:__(o)})),r=t.add(ZR({field:SR,sort:t.sortRef(B_(e.sort,!0)),pulse:__(a)})),__(r)}function B_(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?lh("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&lh("Multiple domain scales support op count only."):lh("No field provided for sort aggregate op: "+e.op):ph(e)?e.field="key":e={field:"key"}),e}function z_(e,t,n){var a=n.map(function(e){var n=t.getData(e.data);return n||O_(e.data),n.domainRef(t,e.field)});return __(t.add(FR({values:a})))}function j_(e,t,n){var a=n.map(function(e){var n=t.getData(e.data);return n||O_(e.data),n.extentRef(t,e.field)});return __(t.add(MR({extents:a})))}function U_(e,t){t.nice=ph(e)?{interval:w_(e.interval),step:w_(e.step)}:w_(e)}function $_(e,t){t.interpolate=w_(e.type||e),null!=e.gamma&&(t.interpolateGamma=w_(e.gamma))}function W_(e,t,n){var a=e.range,i=t.config.range;if(a.signal)return t.signalRef(a.signal);if(uh(a)){if(i&&i.hasOwnProperty(a))return e=Ph({},e,{range:i[a]}),W_(e,t,n);"width"===a?a=[0,{signal:"width"}]:"height"===a?a=E_(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:lh("Unrecognized scale range value: "+w(a))}else{if(a.scheme)return n.scheme=w_(a.scheme,t),a.extent&&(n.schemeExtent=C_(a.extent,t)),void(a.count&&(n.schemeCount=w_(a.count,t)));if(a.step)return void(n.rangeStep=w_(a.step,t));if(E_(e.type)&&!dh(a))return D_(a,e,t);dh(a)||lh("Unsupported range type: "+w(a))}return a.map(function(e){return w_(e,t)})}function q_(e,t){return dh(e)?e.map(function(e){return q_(e,t)}):ph(e)?e.signal?t.signalRef(e.signal):lh("Unsupported parameter object: "+w(e)):e}function H_(e,t,n,a){var i,o,r;if(e.signal)i="datum",r=xI(e.signal,t,n,a);else if(e.group||e.parent){for(o=N(1,e.level||1),i="item";0<o--;)i+=".mark.group";e.parent?(r=e.parent,i+=".datum"):r=e.group}else e.datum?(i="datum",r=e.datum):lh("Invalid field reference: "+w(e));return e.signal||(uh(r)?(a[r]=1,r=sh(r).map(w).join("][")):r=H_(r,t,n,a)),i+"["+r+"]"}function Y_(e,t){if(!uh(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}function V_(e,t,n,a){if(uh(e))i=FP+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=w(i);else{for(var i in t.scales)n[FP+i]=t.scaleRef(i);i=w(FP)+"+"+(e.signal?"("+xI(e.signal,t,n,a)+")":vI(e,t,n,a))}return"_["+i+"]"}function G_(e,t,n,a){var i={},o="var o=item,datum=o.datum,$;",r,l,s;for(r in e)l=e[r],dh(l)?o+=LI(r,l,a,n,i):(s=EI(r,l,a,n,i),o+=NI("o",r,s));return o+=hI(e,t),o+="return 1;",{$expr:o,$fields:Object.keys(i),$output:Object.keys(e)}}function Z_(e){return ph(e)?e:{value:e}}function X_(e,t,n){return null==n?0:(e[t]=ph(n)&&!dh(n)?n:{value:n},1)}function K_(e,t,n){for(var a in t)n&&n.hasOwnProperty(a)||(e[a]=Ph(e[a]||{},t[a]));return e}function J_(e,t,n,a,i,o){var r,l;for(l in o=o||{},o.encoders={$encode:r={}},e=Q_(e,t,n,a,i.config),e)r[l]=G_(e[l],t,o,i);return o}function Q_(e,t,n,a,i){var o={},r,l,s;for(r in("legend"==n||0===(n+"").indexOf("axis"))&&(n=null),s=n===wI?i.group:n===AI?Ph({},i.mark,i[t]):null,s)l=ey(r,e)||("fill"===r||"stroke"===r)&&(ey("fill",e)||ey("stroke",e)),l||(o[r]={value:s[r]});return Ah(a).forEach(function(t){var n=i.style&&i.style[t];for(var a in n)ey(a,e)||(o[a]={value:n[a]})}),e=Ph({},e),e.enter=Ph(o,e.enter),e}function ey(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function ty(e,t,a){var o={},r,l,i;for(l=0,i=e.params.length;l<i;++l)r=e.params[l],o[r.name]=ny(r,t,a);return o}function ny(e,t,n){var a=e.type,i=t[e.name];if("index"===a)return iy(e,t,n);return void 0===i?void(e.required&&lh("Missing required "+w(t.type)+" parameter: "+w(e.name))):"param"===a?oy(e,t,n):"projection"===a?n.projectionRef(t[e.name]):e.array&&!S_(i)?i.map(function(t){return ay(e,t,n)}):ay(e,i,n)}function ay(e,t,n){var a=e.type;if(S_(t))return py(a)?lh("Expression references can not be signals."):cy(a)?n.fieldRef(t):uy(a)?n.compareRef(t):n.signalRef(t.signal);var i=e.expr||cy(a);return i&&ly(t)?iR(t.expr,n):i&&sy(t)?y_(t.field):py(a)?iR(t,n):dy(a)?__(n.getData(t).values):cy(a)?y_(t):uy(a)?n.compareRef(t):t}function iy(e,t,n){return uh(t.from)||lh("Lookup \"from\" parameter must be a string literal."),n.getData(t.from).lookupRef(n,t.key)}function oy(e,t,n){var a=t[e.name];return e.array?(dh(a)||lh("Expected an array of sub-parameters. Instead: "+w(a)),a.map(function(t){return ry(e,t,n)})):ry(e,a,n)}function ry(e,t,a){var o,r,l,s,i;for(s=0,i=e.params.length;s<i;++s){for(l in r=e.params[s],r.key)if(r.key[l]!==t[l]){r=null;break}if(r)break}return r||lh("Unsupported parameter: "+w(t)),o=Ph(ty(r,t,a),r.key),__(a.add(zR(o)))}function ly(e){return e&&e.expr}function sy(e){return e&&e.field}function dy(e){return"data"===e}function py(e){return"expr"===e}function cy(e){return"field"===e}function uy(e){return"compare"===e}function fy(e,t,n,a,i){this.scope=e,this.input=t,this.output=n,this.values=a,this.aggregate=i,this.index={}}function my(e){return uh(e)?e:null}function gy(e,t,a){var o=v_(a.op,a.field),r;if(t.ops){for(var l=0,i=t.as.length;l<i;++l)if(t.as[l]===o)return;}else t.ops=["count"],t.fields=[null],t.as=["count"];a.op&&(t.ops.push((r=a.op.signal)?e.signalRef(r):a.op),t.fields.push(e.fieldRef(a.field)),t.as.push(o))}function _y(e,t,n,a,i,o,r){var l=t[n]||(t[n]={}),s=x_(o),d=my(i),p,c;if(null!=d&&(e=t.scope,d+=s?"|"+s:"",p=l[d]),!p){var u=o?{field:SR,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:__(t.output)};s&&(u.sort=e.sortRef(o)),c=e.add(m_(a,void 0,u)),r&&(t.index[i]=c),p=__(c),null!=d&&(l[d]=p)}return p}function yy(e,t,n){var a=by(t,n[1].encode,"fontSize",cI);if(e.size)return{$expr:"Math.max(Math.ceil(Math.sqrt(_.scale(datum))),"+a+")"};var i=by(t,n[0].encode,"size");return N(p(u(i)),a)}function hy(e){var t={},n=X_(t,"fill",e.fillColor)+X_(t,"stroke",e.strokeColor)+X_(t,"strokeWidth",e.strokeWidth)+X_(t,"strokeDash",e.strokeDash)+X_(t,"cornerRadius",e.cornerRadius);return n?t:void 0}function by(e,t,n,a){var i=t&&(t.update&&t.update[n]||t.enter&&t.enter[n]);return+(i?i.value:a&&(i=e.config.style[a])&&i[n])}function xy(e,t,n,a){var i=e.text,o=e.orient||t.orient,r=e.anchor||t.anchor,l=o===nI||o===tI?-1:1,s=o===tI||o===aI,d={group:s?"width":"height"},p={},c,u,f,m,g,_;return p.enter=c={opacity:{value:0}},X_(c,"fill",t.color),X_(c,"font",t.font),X_(c,"fontSize",t.fontSize),X_(c,"fontWeight",t.fontWeight),p.exit={opacity:{value:0}},p.update=u={opacity:{value:1},text:ph(i)?i:{value:i+""},offset:Z_((null==e.offset?t.offset:e.offset)||0)},"start"===r?(g=0,_="left"):"end"===r?(g=1,_="right"):(g=0.5,_="center"),f={field:d,mult:g},m=0>l?{value:0}:s?{field:{group:"height"}}:{field:{group:"width"}},s?(u.x=f,u.y=m,u.angle={value:0},u.baseline={value:o===tI?"bottom":"top"}):(u.x=m,u.y=f,u.angle={value:90*l},u.baseline={value:"bottom"}),u.align={value:_},u.limit={field:d},X_(u,"angle",t.angle),X_(u,"baseline",t.baseline),X_(u,"limit",t.limit),PI(MI,DI,e.style||fI,null,a,p,n)}function vy(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(HI(e,t))}),e.on&&e.on.forEach(function(n){JI(n,t,e.name)}),t.addDataPipeline(e.name,Sy(e,t,n))}function Sy(e,a,o){var r=[],l=null,s=!1,d=!1,p,c,i,n,t;for(e.values?r.push(l=Ty({$ingest:e.values,$format:e.format})):e.url?r.push(l=Ty({$request:e.url,$format:e.format})):e.source&&(l=p=Ah(e.source).map(function(e){return __(a.getData(e).output)}),r.push(null)),c=0,i=o.length;c<i;++c)n=o[c],t=n.metadata,l||t.source||r.push(l=Ty()),r.push(n),t.generates&&(d=!0),t.modifies&&!d&&(s=!0),t.source?l=n:t.changes&&(l=null);return p&&(i=p.length-1,r[0]=WR({derive:s,pulse:i?p:p[0]}),(s||i)&&r.splice(1,0,Ty())),l||r.push(Ty()),r.push(YR({})),r}function Ty(e){var t=LR({},e);return t.metadata={source:!0},t}function ky(e,t){return{scale:e.scale,range:t}}function Ey(e,t,n,a,i){return{signal:"flush(range(\""+e+"\"), scale(\""+e+"\", datum.value), "+t+","+n+","+a+","+i+")"}}function Ny(e,t){var n=t.config,a,i,o,r,l;return t.background=e.background||n.background,t.eventConfig=n.events,l=__(t.root=t.add(g_())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",qD(e.padding,n)),t.addSignal("autosize",WD(e.autosize,n)),Ah(e.signals).forEach(function(e){pM[e.name]||YD(e,t)}),i=t.add(LR()),o=K_({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),o=t.add(CR(J_(o,RI,wI,e.style,t,{pulse:__(i)}))),r=t.add(GR({layout:t.objectProperty(e.layout),legendMargin:n.legendMargin,autosize:t.signalRef("autosize"),mark:l,pulse:__(o)})),t.operators.pop(),t.pushState(__(o),__(r),null),dM(e,t,!0),t.operators.push(r),a=t.add(NR({mark:l,pulse:__(r)})),a=t.add(qR({pulse:__(a)})),a=t.add(YR({pulse:__(a)})),t.addData("root",new fy(t,i,i,a)),t}function Ly(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Ay(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function wy(e){return(dh(e)?Cy:Oy)(e)}function Cy(e){for(var t="[",a=0,i=e.length,n;a<i;++a)n=e[a],t+=(0<a?",":"")+(ph(n)?n.signal||wy(n):w(n));return t+"]"}function Oy(e){var t="{",n=0,a,i;for(a in e)i=e[a],t+=(1<++n?",":"")+w(a)+":"+(ph(i)?i.signal||wy(i):w(i));return t+"}"}function Dy(){return{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:_M},area:{fill:_M},image:null,line:{stroke:_M,strokeWidth:gM},path:{stroke:_M},rect:{fill:_M},rule:{stroke:yM},shape:{stroke:_M},symbol:{fill:_M,size:64},text:{fill:yM,font:fM,fontSize:11},style:{"guide-label":{fill:yM,font:fM,fontSize:10},"guide-title":{fill:yM,font:fM,fontSize:11,fontWeight:"bold"},"group-title":{fill:yM,font:fM,fontSize:13,fontWeight:"bold"},point:{size:mM,strokeWidth:gM,shape:"circle"},circle:{size:mM,strokeWidth:gM},square:{size:mM,strokeWidth:gM,shape:"square"},cell:{fill:"transparent",stroke:bM}},axis:{minExtent:0,maxExtent:200,bandPosition:0.5,domain:!0,domainWidth:1,domainColor:hM,grid:!1,gridWidth:1,gridColor:bM,gridDash:[],gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:hM,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,entryPadding:5,titlePadding:5,gradientWidth:100,gradientHeight:20,gradientStrokeColor:bM,gradientStrokeWidth:0,gradientLabelBaseline:"top",gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelOffset:8,labelLimit:160,symbolType:"circle",symbolSize:100,symbolFillColor:"transparent",symbolStrokeColor:hM,symbolStrokeWidth:1.5,titleAlign:"left",titleBaseline:"top",titleLimit:180},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[0.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[0.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Py(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var a=Function.apply(null,e.concat(t));return n&&n.functions?a.bind(n.functions):a}function Ry(e,t){return Py(["_"],e,t)}function Iy(e,t){return Py(["datum","_"],e,t)}function My(e,t){return Py(["event"],e,t)}function Fy(e,t){return Py(["_","event"],e,t)}function By(e,t){return Py(["item","_"],e,t)}function zy(e,t,n){n=n||{};var a,i;for(a in e)i=e[a],i&&i.$expr&&i.$params&&zy(i.$params,t,n),n[a]=dh(i)?i.map(function(e){return jy(e,t)}):jy(i,t);return n}function jy(e,t){if(!e||!ph(e))return e;for(var a=0,i=xM.length,n;a<i;++a)if(n=xM[a],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function Uy(e){return(e+"").toLowerCase()}function $y(e){return"operator"===Uy(e)}function Wy(e){return"collect"===Uy(e)}function qy(e,t){var n,a;e.params&&(!(n=t.get(e.id))&&lh("Invalid operator id: "+e.id),a=zy(e.params,t),t.dataflow.connect(n,n.parameters(a)))}function Hy(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Yy(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function Vy(e,t){var n=e.autosize(),a=e.padding();return t-(n&&n.contains===AM?a.left+a.right:0)}function Gy(e,t){var n=e.autosize(),a=e.padding();return t-(n&&n.contains===AM?a.top+a.bottom:0)}function Zy(e){function t(){e._autosize=e._resize=1}var n=e._signals,a=n.width,i=n.height,o=n.padding;e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=Vy(e,n.size),t()},{size:a}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=Gy(e,n.size),t()},{size:i});var r=e.add(null,t,{pad:o});e._resizeWidth.rank=a.rank+1,e._resizeHeight.rank=i.rank+1,r.rank=o.rank+1}function Xy(e,t){return t.modified&&dh(t.input.value)&&e.indexOf("_:vega:_")}function Ky(e,t){return!("parent"===e||t instanceof Yx.proxy)}function Jy(e,t){var n=this;t=t||{},yn.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||bk.Canvas,n._scenegraph=new Oo;var a=n._scenegraph.root;n._renderer=null,n._redraw=!0,n._handler=new Io().scene(a),n._eventListeners=[],n._preventDefault=!1;var i=LM(n,e,t.functions);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:Ph({},e)}}),i.root&&i.root.set(a),a.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(a.items)),n._background=i.background||null,n._eventConfig=am(i.eventConfig),n._width=n.width(),n._height=n.height(),n._viewWidth=Vy(n,n._width),n._viewHeight=Gy(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Zy(n),OD(n)}function Qy(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:lh("Unrecognized signal name: "+w(t))}var eh=Math.E,th=Math.asin,nh=Math.atan2,ah=Number.MAX_VALUE,ih=Math.SQRT2,oh=Math.LN10,rh=function(e,t,n){return e.fields=t||[],e.fname=n,e},lh=function(e){throw Error(e)},sh=function(e){function t(){a.push(n+e.substring(s,i)),n="",s=i+1}var a=[],o=null,r=0,l=e.length,n="",s,i,d;for(e+="",s=i=0;i<l;++i)if(d=e[i],"\\"===d)n+=e.substring(s,i),s=++i;else if(d===o)t(),o=null,r=-1;else if(o)continue;else s===r&&"\""===d?(s=i+1,o=d):s===r&&"'"===d?(s=i+1,o=d):"."!==d||r?"["===d?(i>s&&t(),r=s=i+1):"]"==d&&(r||lh("Access path missing open bracket: "+e),0<r&&t(),r=0,s=i+1):i>s?t():s=i+1;return r&&lh("Access path missing closing bracket: "+e),o&&lh("Access path missing closing quote: "+e),i>s&&(i++,t()),a},dh=Array.isArray,ph=function(e){return e===Object(e)},uh=function(e){return"string"==typeof e},fh=function(e,t){var n=sh(e),a="return _["+n.map(w).join("][")+"];";return rh(Function("_",a),[e=1===n.length?n[0]:e],t||e)},mh=[],gh=fh("id"),id=rh(function(e){return e},mh,"identity"),_h=rh(function(){return 0},mh,"zero"),yh=rh(function(){return 1},mh,"one"),hh=rh(function(){return!0},mh,"true"),bh=rh(function(){return!1},mh,"false"),xh=0,vh=1,Sh=2,Th=3,kh=4,Eh=function(e){var t=e||xh;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=vh&&k("error","ERROR",arguments),this},warn:function(){return t>=Sh&&k("warn","WARN",arguments),this},info:function(){return t>=Th&&k("log","INFO",arguments),this},debug:function(){return t>=kh&&k("log","DEBUG",arguments),this}}},Nh=function(e){return e[e.length-1]},Lh=function(e){return null==e||""===e?null:+e},Ah=function(e){return null==e?[]:dh(e)?e:[e]},wh=function(e){return"function"==typeof e},Ch=function(e,a){var o=[],r=(e=Ah(e)).map(function(e,t){return null==e?null:(o.push(t),wh(e)?e:sh(e).map(w).join("]["))}),l=o.length-1,n=Ah(a),s="var u,v;return ",p,i,c,f,u,g,d,t,_;if(0>l)return null;for(i=0;i<=l;++i)p=o[i],c=r[p],wh(c)?(g="f"+p,f="(u=this."+g+"(a))",u="(v=this."+g+"(b))",(d=d||{})[g]=c):(f="(u=a["+c+"])",u="(v=b["+c+"])"),g="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"===n[p]?(_=-1,t=1):(_=1,t=-1),s+="("+f+"<"+u+"||u==null)&&v!=null?"+t+":(u>v||v==null)&&u!=null?"+_+":"+g+"!==u&&v===v?"+t+":v!==v&&u===u?"+_+(p<l?":":":0");return c=Function("a","b",s+";"),d&&(c=c.bind(d)),e=e.reduce(function(e,t){return wh(t)?(m(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),rh(c,Object.keys(e))},Oh=function(e){return wh(e)?e:function(){return e}},Dh=function(t,e){function n(){e(i),a=i=null}var a,i;return function(o){i=o,a&&clearTimeout(a),a=setTimeout(n,t)}},Ph=function(e){for(var t=1,n=arguments.length,a,i;t<n;++t)for(i in a=arguments[t],a)e[i]=a[i];return e},Rh=function(e,t){var o=-1,i=e.length,n,a,r,l,s;if(null==t){for(;++o<i;)if(a=e[o],null!=a&&a>=a){n=r=a;break}for(l=s=o;++o<i;)a=e[o],null!=a&&(n>a&&(n=a,l=o),r<a&&(r=a,s=o))}else{for(;++o<i;)if(a=t(e[o],o,e),null!=a&&a>=a){n=r=a;break}for(l=s=o;++o<i;)a=t(e[o],o,e),null!=a&&(n>a&&(n=a,l=o),r<a&&(r=a,s=o))}return[l,s]},Ih={},Mh=function(e){function t(e){return n.hasOwnProperty(e)&&n[e]!==Ih}var n={},a,i;return a={size:0,empty:0,object:n,has:t,get:function(e){return t(e)?n[e]:void 0},set:function(e,i){return t(e)||(++a.size,n[e]===Ih&&--a.empty),n[e]=i,this},delete:function(e){return t(e)&&(--a.size,++a.empty,n[e]=Ih),this},clear:function(){a.size=a.empty=0,a.object=n={}},test:function(e){return arguments.length?(i=e,a):i},clean:function(){var e={},t=0,o,r;for(o in n)r=n[o],r===Ih||i&&i(r)||(e[o]=r,++t);a.size=t,a.empty=0,a.object=n=e}},e&&Object.keys(e).forEach(function(t){a.set(t,e[t])}),a},Fh=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},Bh=function(e){return"boolean"==typeof e},zh=function(e){return"[object Date]"===Object.prototype.toString.call(e)},jh=function(e){return"number"==typeof e},Uh=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},$h=function(e,t){e&&(e=t?Ah(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):Ah(e));var n=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?w(e):sh(e).map(w).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return rh(n,e,"key")},Wh=function(e,t,n,a){var o=t.length,r=n.length;if(!r)return t;if(!o)return n;for(var l=a||new t.constructor(o+r),s=0,d=0,p=0;s<o&&d<r;++p)l[p]=0<e(t[s],n[d])?n[d++]:t[s++];for(;s<o;++s,++p)l[p]=t[s];for(;d<r;++d,++p)l[p]=n[d];return l},qh=function(e,t){for(var n="";0<=--t;)n+=e;return n},Hh=function(e,t,a,i){var o=a||" ",r=e+"",l=t-r.length;return 0>=l?r:"left"===i?qh(o,l)+r:"center"===i?qh(o,~~(l/2))+r+qh(o,p(l/2)):r+qh(o,l)},Yh=function(e){return null==e||""===e?null:e&&"false"!=e&&"0"!=e&&!!e},Vh=function(e,t){return t=t||q,null==e||""===e?null:t(e)},Gh=function(e){return null==e||""===e?null:e+""},Zh=function(e){for(var t={},a=0,i=e.length;a<i;++a)t[e[a]]=1;return t},Xh=function(t,a,i,o){var r=null==o?"\u2026":o,e=t+"",s=e.length,n=N(0,a-r.length);return s<=a?e:"left"===i?r+e.slice(s-n):"center"===i?e.slice(0,p(n/2))+r+e.slice(s-~~(n/2)):e.slice(0,n)+r},Kh=function(e,a,o){if(e){var r=0,i=e.length,n;if(a)for(;r<i;++r)(n=a(e[r]))&&o(n,r,e);else e.forEach(o)}},Jh=Symbol("vega_id"),Qh=1,eb="_:mod:_",tb=te.prototype;tb.set=function(e,t,n,a){var i=this,o=i[e],r=i[eb];return null!=t&&0<=t?(o[t]!==n||a)&&(o[t]=n,r[t+":"+e]=-1,r[e]=-1):(o!==n||a)&&(i[e]=n,r[e]=dh(n)?1+n.length:-1),i},tb.modified=function(e,t){var n=this[eb],a;if(!arguments.length){for(a in n)if(n[a])return!0;return!1}if(dh(e)){for(a=0;a<e.length;++a)if(n[e[a]])return!0;return!1}return null!=t&&0<=t?t+1<n[e]||!!n[t+":"+e]:!!n[e]},tb.clear=function(){return this[eb]={},this};var nb=0,ab=new te,ib=ne.prototype;ib.targets=function(){return this._targets||(this._targets=H(gh))},ib.set=function(e){return this.value===e?0:(this.value=e,1)},ib.skip=ae(1),ib.modified=ae(2),ib.parameters=function(e,t){function a(e,n,a){a instanceof ne?(a!==o&&(t&&a.targets().add(o),s.push(a)),l.push({op:a,name:e,index:n})):r.set(e,n,a)}t=!1!==t;var o=this,r=o._argval=o._argval||new te,l=o._argops=o._argops||[],s=[],d,p,c,n;for(d in e)if(p=e[d],d==="pulse")Ah(p).forEach(function(e){e instanceof ne?e!==o&&(e.targets().add(o),s.push(e)):lh("Pulse parameters must be operator instances.")}),o.source=p;else if(dh(p))for(r.set(d,-1,Array(c=p.length)),n=0;n<c;++n)a(d,n,p[n]);else a(d,-1,p);return this.marshall().clear(),s},ib.marshall=function(e){var t=this._argval||ab,a=this._argops,o,r,i,n,l;if(a&&(i=a.length))for(r=0;r<i;++r)o=a[r],n=o.op,l=n.modified()&&n.stamp===e,t.set(o.name,o.index,n.value,l);return t},ib.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},ib.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,this.pulse=t,t||e};var ob=0,rb=ie.prototype;rb._filter=hh,rb._apply=id,rb.targets=function(){return this._targets||(this._targets=H(gh))},rb.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},rb.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),a=this._targets,o=a?a.length:0,n=0;n<o;++n)a[n].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},rb.filter=function(e){var t=oe(e);return this.targets().add(t),t},rb.apply=function(e){var t=oe(null,e);return this.targets().add(t),t},rb.merge=function(){var e=oe();this.targets().add(e);for(var t=0,a=arguments.length;t<a;++t)arguments[t].targets().add(e);return e},rb.throttle=function(e){var n=-1;return this.filter(function(){var t=Date.now();return t-n>e?(n=t,1):0})},rb.debounce=function(e){var t=oe();return this.targets().add(oe(null,null,Dh(e,function(n){var e=n.dataflow;t.receive(n),e&&e.run&&e.run()}))),t},rb.between=function(e,t){var n=!1;return e.targets().add(oe(null,null,function(){n=!0})),t.targets().add(oe(null,null,function(){n=!1})),this.filter(function(){return n})};var lb="$";le.prototype=se.prototype={constructor:le,has:function(e){return lb+e in this},get:function(e){return this[lb+e]},set:function(e,t){return this[lb+e]=t,this},remove:function(e){var t=lb+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===lb&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===lb&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===lb&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===lb&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===lb&&++e;return e},empty:function(){for(var e in this)if(e[0]===lb)return!1;return!0},each:function(e){for(var t in this)t[0]===lb&&e(this[t],t.slice(1),this)}};var sb=function(){function e(t,l,s,d){if(l>=a.length)return null!=o&&t.sort(o),null==r?t:r(t);for(var p=-1,i=t.length,n=a[l++],c=se(),u=s(),f,m,g;++p<i;)(g=c.get(f=n(m=t[p])+""))?g.push(m):c.set(f,[m]);return c.each(function(t,n){d(u,n,e(t,l,s,d))}),u}function t(e,i){if(++i>a.length)return e;var o=n[i-1],l;return null!=r&&i>=a.length?l=e.entries():(l=[],e.each(function(e,n){l.push({key:n,values:t(e,i)})})),null==o?l:l.sort(function(e,t){return o(e.key,t.key)})}var a=[],n=[],o,r,i;return i={object:function(t){return e(t,0,de,pe)},map:function(t){return e(t,0,ce,ue)},entries:function(n){return t(e(n,0,ce,ue),0)},key:function(e){return a.push(e),i},sortKeys:function(e){return n[a.length-1]=e,i},sortValues:function(e){return o=e,i},rollup:function(e){return r=e,i}}},db=se.prototype;fe.prototype=me.prototype={constructor:fe,has:db.has,add:function(e){return e+="",this[lb+e]=e,this},remove:db.remove,clear:db.clear,values:db.keys,size:db.size,empty:db.empty,each:db.each};var pb={value:function(){}};_e.prototype=ge.prototype={constructor:_e,on:function(e,a){var o=this._,r=ye(e+"",o),l=-1,i=r.length,n;if(2>arguments.length){for(;++l<i;)if((n=(e=r[l]).type)&&(n=he(o[n],e.name)))return n;return}if(null!=a&&"function"!=typeof a)throw new Error("invalid callback: "+a);for(;++l<i;)if(n=(e=r[l]).type)o[n]=be(o[n],e.name,a);else if(null==a)for(n in o)o[n]=be(o[n],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new _e(e)},call:function(e,a){if(0<(i=arguments.length-2))for(var o=Array(i),r=0,i,n;r<i;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=this._[e],r=0,i=n.length;r<i;++r)n[r].value.apply(a,o)},apply:function(e,a,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],t=0,i=r.length;t<i;++t)r[t].value.apply(a,o)}};var cb=function(e,t){function n(e){var t=r.status,n;if(!t&&ve(r)||200<=t&&300>t||304===t){if(c)try{n=c.call(d,r)}catch(t){return void a.call("error",d,t)}else n=r;a.call("load",d,n)}else a.call("error",d,e)}var a=ge("beforesend","progress","load","error"),i=se(),r=new XMLHttpRequest,o=null,l=null,s=0,d,p,c,u;if("undefined"!=typeof XDomainRequest&&!("withCredentials"in r)&&/^(http(s)?:)?\/\//.test(e)&&(r=new XDomainRequest),"onload"in r?r.onload=r.onerror=r.ontimeout=n:r.onreadystatechange=function(e){3<r.readyState&&n(e)},r.onprogress=function(t){a.call("progress",d,t)},d={header:function(e,t){return(e=(e+"").toLowerCase(),2>arguments.length)?i.get(e):(null==t?i.remove(e):i.set(e,t+""),d)},mimeType:function(e){return arguments.length?(p=null==e?null:e+"",d):p},responseType:function(e){return arguments.length?(u=e,d):u},timeout:function(e){return arguments.length?(s=+e,d):s},user:function(e){return 1>arguments.length?o:(o=null==e?null:e+"",d)},password:function(e){return 1>arguments.length?l:(l=null==e?null:e+"",d)},response:function(e){return c=e,d},get:function(e,t){return d.send("GET",e,t)},post:function(e,t){return d.send("POST",e,t)},send:function(t,n,c){return r.open(t,e,!0,o,l),null==p||i.has("accept")||i.set("accept",p+",*/*"),r.setRequestHeader&&i.each(function(e,t){r.setRequestHeader(t,e)}),null!=p&&r.overrideMimeType&&r.overrideMimeType(p),null!=u&&(r.responseType=u),0<s&&(r.timeout=s),null==c&&"function"==typeof n&&(c=n,n=null),null!=c&&1===c.length&&(c=xe(c)),null!=c&&d.on("error",c).on("load",function(e){c(null,e)}),a.call("beforesend",d,r),r.send(null==n?null:n),d},abort:function(){return r.abort(),d},on:function(){var e=a.on.apply(a,arguments);return e===a?d:e}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return d.get(t)}return d},ub={},fb={},mb=34,gb=10,_b=13,yb=function(e){function t(e,a){function i(){if(n)return fb;if(p)return p=!1,ub;var t=s,a,i;if(e.charCodeAt(t)===mb){for(;s++<l&&e.charCodeAt(s)!==mb||e.charCodeAt(++s)===mb;);return(a=s)>=l?n=!0:(i=e.charCodeAt(s++))===gb?p=!0:i===_b&&(p=!0,e.charCodeAt(s)===gb&&++s),e.slice(t+1,a-1).replace(/""/g,"\"")}for(;s<l;){if((i=e.charCodeAt(a=s++))===gb)p=!0;else if(i===_b)p=!0,e.charCodeAt(s)===gb&&++s;else if(i!==o)continue;return e.slice(t,a)}return n=!0,e.slice(t,l)}var r=[],l=e.length,s=0,d=0,n=0>=l,p=!1,c;for(e.charCodeAt(l-1)===gb&&--l,e.charCodeAt(l-1)===_b&&--l;(c=i())!==fb;){for(var t=[];c!==ub&&c!==fb;)t.push(c),c=i();a&&null==(t=a(t,d++))||r.push(t)}return r}function n(t){return t.map(a).join(e)}function a(e){return null==e?"":i.test(e+="")?"\""+e.replace(/"/g,"\"\"")+"\"":e}var i=new RegExp("[\""+e+"\n\r]"),o=e.charCodeAt(0);return{parse:function(e,n){var a=t(e,function(e,t){return o?o(e,t-1):void(r=e,o=n?Te(e,n):Se(e))}),o,r;return a.columns=r||[],a},parseRows:t,format:function(t,n){return null==n&&(n=ke(t)),[n.map(a).join(e)].concat(t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})).join("\n")},formatRows:function(e){return e.map(n).join("\n")}}},hb=yb(","),bb=yb("\t"),xb=/^([A-Za-z]+:)?\/\//,vb="file://",Sb=["mimeType","responseType","user","password"],Tb=function(e){return{options:e||{},sanitize:Le,load:Ne,file:we,http:Ae}},kb={boolean:Yh,integer:Lh,number:Lh,date:Vh,string:Gh,unknown:id},Eb=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return Ie(e)&&(e=+e)==~~e},Ie,function(e){return!isNaN(Date.parse(e))}],Nb=["boolean","integer","number","date"],Lb=function(e,t){var n=t&&t.property?fh(t.property):id;return ph(e)&&!Be(e)?ze(n(e)):n(JSON.parse(e))},Ab=function(e){return e},wb=function(e){if(null==e)return Ab;var t=e.scale[0],a=e.scale[1],i=e.translate[0],o=e.translate[1],r,l;return function(e,s){s||(r=l=0);var d=2,p=e.length,n=Array(p);for(n[0]=(r+=e[0])*t+i,n[1]=(l+=e[1])*a+o;d<p;)n[d]=e[d],++d;return n}},Cb=function(e,a){for(var n=e.length,o=n-a,i;o<--n;)i=e[o],e[o++]=e[n],e[n]=i},Ob=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return je(e,t)})}:je(e,t)},Db=function(e,n){function t(t){var n=e.arcs[0>t?~t:t],a=n[0],o;return e.transform?(o=[0,0],n.forEach(function(e){o[0]+=e[0],o[1]+=e[1]})):o=n[n.length-1],0>t?[o,a]:[a,o]}function a(e,t){for(var n in e){var a=e[n];delete t[a.start],delete a.start,delete a.end,a.forEach(function(e){o[0>e?~e:e]=1}),s.push(a)}}var o={},r={},l={},s=[],d=-1;return n.forEach(function(a,o){var r=e.arcs[0>a?~a:a],l;!(3>r.length)||r[1][0]||r[1][1]||(l=n[++d],n[d]=a,n[o]=l)}),n.forEach(function(n){var a=t(n),e=a[0],i=a[1],o,s;if(o=l[e]){if(delete l[o.end],o.push(n),o.end=i,s=r[i]){delete r[s.start];var d=s==o?o:o.concat(s);r[d.start=o.start]=l[d.end=s.end]=d}else r[o.start]=l[o.end]=o;}else if(!(o=r[i]))o=[n],r[o.start=e]=l[o.end=i]=o;else if(delete r[o.start],o.unshift(n),o.start=e,s=l[e]){delete l[s.end];var p=s===o?o:s.concat(o);r[p.start=s.start]=l[p.end=o.end]=p}else r[o.start]=l[o.end]=o}),a(l,r),a(r,l),n.forEach(function(e){o[0>e?~e:e]||s.push([e])}),s},Pb=function(e){return Ue(e,$e.apply(this,arguments))},Rb={dsv:Fe,csv:Me(","),tsv:Me("\t"),json:Lb,topojson:function(e,t){var n,a;return(e=Lb(e,t),t&&(a=t.feature))?(n=e.objects[a])?Ob(e,n).features:lh("Invalid TopoJSON object: "+a):t&&(a=t.mesh)?(n=e.objects[a])?[Pb(e,n)]:lh("Invalid TopoJSON object: "+a):void lh("Missing TopoJSON feature or mesh parameter.")}},Ib=function(e,t){return 1<arguments.length?(Rb[e]=t,this):Rb.hasOwnProperty(e)?Rb[e]:null},Mb=new Date,Fb=new Date,Bb=qe(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Bb.every=function(e){return e=E(e),isFinite(e)&&0<e?1<e?qe(function(t){t.setTime(E(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Bb:null};var zb=1e3,jb=6e4,Ub=36e5,$b=864e5,Wb=6048e5,qb=qe(function(e){e.setTime(E(e/zb)*zb)},function(e,t){e.setTime(+e+t*zb)},function(e,t){return(t-e)/zb},function(e){return e.getUTCSeconds()}),Hb=qe(function(e){e.setTime(E(e/jb)*jb)},function(e,t){e.setTime(+e+t*jb)},function(e,t){return(t-e)/jb},function(e){return e.getMinutes()}),Yb=qe(function(e){var t=e.getTimezoneOffset()*jb%Ub;0>t&&(t+=Ub),e.setTime(E((+e-t)/Ub)*Ub+t)},function(e,t){e.setTime(+e+t*Ub)},function(e,t){return(t-e)/Ub},function(e){return e.getHours()}),Vb=qe(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jb)/$b},function(e){return e.getDate()-1}),Gb=He(0),Zb=He(1),Xb=He(2),Kb=He(3),Jb=He(4),Qb=He(5),ex=He(6),nx=qe(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),ax=qe(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});ax.every=function(e){return isFinite(e=E(e))&&0<e?qe(function(t){t.setFullYear(E(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var ix=qe(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*jb)},function(e,t){return(t-e)/jb},function(e){return e.getUTCMinutes()}),ox=qe(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*Ub)},function(e,t){return(t-e)/Ub},function(e){return e.getUTCHours()}),rx=qe(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/$b},function(e){return e.getUTCDate()-1}),lx=Ye(0),sx=Ye(1),dx=Ye(2),px=Ye(3),cx=Ye(4),ux=Ye(5),fx=Ye(6),mx=qe(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),gx=qe(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});gx.every=function(e){return isFinite(e=E(e))&&0<e?qe(function(t){t.setUTCFullYear(E(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var _x={0:"0","-":"",_:" "},yx=/^\s*\d+/,hx=/^%/,bx=/[\\^$*+?|[\]().{}]/g,xx,vx,Sx,Tx,kx;an({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ex="%Y-%m-%dT%H:%M:%S.%LZ",Nx=Date.prototype.toISOString?function(e){return e.toISOString()}:Tx(Ex),Lx=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:kx(Ex),Ax=function(e,t,n){t=t||{};var a=Ib(t.type||"json");return a||lh("Unknown data format type: "+t.type),e=a(e,t),t.parse&&on(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e},wx={skip:!0},Cx={},Ox=1,Dx=2,Px=4,Rx=Ox|Px,Ix=Ox|Dx|Px,Mx=8,Fx=16,Bx=32,zx=64,jx=dn.prototype;jx.StopPropagation=Cx,jx.ADD=Ox,jx.REM=Dx,jx.MOD=Px,jx.ADD_REM=Ox|Dx,jx.ADD_MOD=Rx,jx.ALL=Ix,jx.REFLOW=Mx,jx.SOURCE=Fx,jx.NO_SOURCE=Bx,jx.NO_FIELDS=zx,jx.fork=function(e){return new dn(this.dataflow).init(this,e)},jx.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?(e=new dn(this.dataflow).init(this),e.add=e.source,e):e},jx.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&zx)&&(n.fields=e.fields),t&Ox?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Dx?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Px?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Bx?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},jx.runAfter=function(e){this.dataflow.runAfter(e)},jx.changed=function(e){var t=e||Ix;return t&Ox&&this.add.length||t&Dx&&this.rem.length||t&Px&&this.mod.length},jx.reflow=function(e){if(e)return this.fork(Ix).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Px,un(this,Ox))),this},jx.modifies=function(e){var t=Ah(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},jx.modified=function(e){var t=this.fields;return this.mod.length&&t&&(arguments.length?dh(e)?e.some(function(e){return t[e]}):t[e]:!!t)},jx.filter=function(e,t){var n=this;return e&Ox&&(n.addF=pn(n.addF,t)),e&Dx&&(n.remF=pn(n.remF,t)),e&Px&&(n.modF=pn(n.modF,t)),e&Fx&&(n.srcF=pn(n.srcF,t)),n},jx.materialize=function(e){e=e||Ix;var t=this;return e&Ox&&t.addF&&(t.add=cn(t.add,t.addF),t.addF=null),e&Dx&&t.remF&&(t.rem=cn(t.rem,t.remF),t.remF=null),e&Px&&t.modF&&(t.mod=cn(t.mod,t.modF),t.modF=null),e&Fx&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},jx.visit=function(e,t){var n=this,a=t,i,o;return e&Fx?(Kh(n.source,n.srcF,a),n):(e&Ox&&Kh(n.add,n.addF,a),e&Dx&&Kh(n.rem,n.remF,a),e&Px&&Kh(n.mod,n.modF,a),e&Mx&&(i=n.source)&&(o=n.add.length+n.mod.length,o===i.length||(o?Kh(i,un(n,Rx),a):Kh(i,n.srcF,a))),n)};var Ux=Fh(fn,dn);Ux.fork=function(e){var n=new dn(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&n.ADD&&this.visit(n.ADD,function(e){return n.add.push(e)}),e&n.REM&&this.visit(n.REM,function(e){return n.rem.push(e)}),e&n.MOD&&this.visit(n.MOD,function(e){return n.mod.push(e)})),n},Ux.changed=function(e){return this.changes&e},Ux.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?dh(e)?e.some(function(e){return n[e]}):n[e]:0},Ux.filter=function(){lh("MultiPulse does not support filtering.")},Ux.materialize=function(){lh("MultiPulse does not support materialization.")},Ux.visit=function(e,t){var a=this,o=a.pulses,r=o.length,n=0;if(e&a.SOURCE)for(;n<r;++n)o[n].visit(e,t);else for(;n<r;++n)o[n].stamp===a.stamp&&o[n].visit(e,t);return a};var $x={skip:!1,force:!1},Wx=mn.prototype;Wx.size=function(){return this.nodes.length},Wx.clear=function(){return this.nodes=[],this},Wx.peek=function(){return this.nodes[0]},Wx.push=function(e){var t=this.nodes;return t.push(e),gn(t,0,t.length-1,this.cmp)},Wx.pop=function(){var e=this.nodes,t=e.pop(),n;return e.length?(n=e[0],e[0]=t,_n(e,0,this.cmp)):n=t,n},Wx.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,_n(t,0,this.cmp),n},Wx.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&0>this.cmp(n,e)&&(t[0]=e,e=n,_n(t,0,this.cmp)),e};var qx=yn.prototype;qx.stamp=function(){return this._clock},qx.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},qx.cleanThreshold=1e4,qx.add=function(e,t,n,a){var i=1,o;return e instanceof ne?o=e:e&&e.prototype instanceof ne?o=new e:wh(e)?o=new ne(null,e):(i=0,o=new ne(e,t)),this.rank(o),i&&(a=n,n=t),n&&this.connect(o,o.parameters(n,a)),this.touch(o),o},qx.connect=function(e,t){var a=e.rank,o,i;for(o=0,i=t.length;o<i;++o)if(a<t[o].rank)return void this.rerank(e)},qx.rank=function(e){e.rank=++this._rank},qx.rerank=function(e){for(var t=[e],n,a,o;t.length;)if(this.rank(n=t.pop()),a=n._targets)for(o=a.length;0<=--o;)t.push(n=a[o]),n===e&&lh("Cycle detected in dataflow graph.")},qx.pulse=function(e,n,a){this.touch(e,a||$x);var i=new dn(this,this._clock+(this._pulse?0:1)),o=e.pulse&&e.pulse.source||[];return i.target=e,this._pulses[e.id]=n.pulse(i,o),this},qx.touch=function(e,t){return this._pulse?this._enqueue(e):this._touched.add(e),(t||$x).skip&&e.skip(!0),this},qx.update=function(e,t,n){var a=n||$x;return(e.set(t)||a.force)&&this.touch(e,a),this},qx.changeset=ee,qx.ingest=function(e,t,n){return this.pulse(e,this.changeset().insert(Ax(t,n)))},qx.request=function(e,t,n){var a=this,i=a._pending||rn(a);i.requests+=1,a.loader().load(t,{context:"dataflow"}).then(function(t){a.ingest(e,t,n)},function(e){a.error("Loading failed",t,e)}).catch(function(e){a.error("Data ingestion failed",t,e)}).then(i.done,i.done)},qx.events=function(e,t,a,o){var r=this,l=oe(a,o),s=function(t){t.dataflow=r;try{l.receive(t)}catch(e){r.error(e)}finally{r.run()}},d;d="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):Ah(e);for(var p=0,i=d.length;p<i;++p)d[p].addEventListener(t,s);return l},qx.on=function(e,t,n,a,i){var o=e instanceof ne?sn:ln;return o(this,e,t,n,a,i),this},qx.run=function(e){var t=this,n=0,a=t.logLevel(),i,o,r,l;if(t._pending)return t.info("Awaiting requests, delaying dataflow run."),0;if(t._pulse)return t.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!t._touched.length)return t.info("Dataflow invoked, but nothing to do."),0;t._pulse=new dn(t,++t._clock,e),a>=Th&&(r=Date.now(),t.debug("-- START PROPAGATION ("+t._clock+") -----")),t._touched.forEach(function(e){t._enqueue(e,!0)}),t._touched=H(gh);try{for(;0<t._heap.size();){if(i=t._heap.pop(),i.rank!==i.qrank){t._enqueue(i,!0);continue}o=i.run(t._getPulse(i,e)),a>=kh&&t.debug(i.id,o===Cx?"STOP":o,i),o!==Cx&&(t._pulse=o,i._targets&&i._targets.forEach(function(e){t._enqueue(e)})),++n}}catch(e){l=e}if(t._pulses={},t._pulse=null,a>=Th&&(r=Date.now()-r,t.info("> Pulse "+t._clock+": "+n+" operators; "+r+"ms")),l&&(t._postrun=[],t.error(l)),t._onrun)try{t._onrun(t,n,l)}catch(e){t.error(e)}if(t._postrun.length){var s=t._postrun;t._postrun=[],s.forEach(function(e){try{e(t)}catch(e){t.error(e)}})}return n},qx.runAsync=function(){return this._pending||Promise.resolve(this.run())},qx.runAfter=function(e,t){if(this._pulse||t)this._postrun.push(e);else try{e(this)}catch(e){this.error(e)}},qx._enqueue=function(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},qx._getPulse=function(e,t){var n=e.source,a=this._clock,i;return n&&dh(n)?(i=n.map(function(e){return e.pulse}),new fn(this,a,i,t)):(n=n&&n.pulse,i=this._pulses[e.id],n&&n!==Cx&&(n.stamp===a&&i.target!==e?i=n:i.source=n.source),i)},qx.error=hn("error"),qx.warn=hn("warn"),qx.info=hn("info"),qx.debug=hn("debug"),qx.logLevel=hn("level");var Hx=Fh(bn,ne);Hx.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t},Hx.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},Hx.transform=function(){};var Yx={},Vx={values:Nn({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:Nn({name:"count",set:"cell.num"}),missing:Nn({name:"missing",set:"this.missing"}),valid:Nn({name:"valid",set:"this.valid"}),sum:Nn({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:Nn({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:Nn({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:Nn({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:Nn({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:Nn({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:Nn({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:Nn({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:Nn({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:Nn({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:Nn({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:Nn({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Nn({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Nn({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:Nn({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Nn({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Nn({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Nn({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Gx=Object.keys(Vx),Zx=function(e){var t=e.maxbins||20,a=e.base||10,o=f(a),r=e.divide||[5,2],s=e.extent[0],d=e.extent[1],c=d-s,u,m,_,y,h,b,i,n;if(e.step)u=e.step;else if(e.steps){for(h=c/t,b=0,i=e.steps.length;b<i&&e.steps[b]<h;++b);u=e.steps[N(0,b-1)]}else{for(m=p(f(t)/o),_=e.minstep||0,u=N(_,g(a,l(f(c)/o)-m));p(c/u)>t;)u*=a;for(b=0,i=r.length;b<i;++b)h=u/r[b],h>=_&&c/h<=t&&(u=h)}return h=f(u),y=0<=h?0:~~(-h/o)+1,n=g(a,-y-1),(e.nice||void 0===e.nice)&&(h=E(s/u+n)*u,s=s<h?h-u:h,d=p(d/u)*u),{start:s,stop:d,step:u}},Xx=function(e,t){var o=[],r=e.length,n=-1,i;if(null==t)for(;++n<r;)isNaN(i=Cn(e[n]))||o.push(i);else for(;++n<r;)isNaN(i=Cn(t(e[n],n,e)))||o.push(i);return o};h.random=Math.random;var Kx=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},Jx=function(e){return 1===e.length&&(e=On(e)),{left:function(t,n,a,i){for(null==a&&(a=0),null==i&&(i=t.length);a<i;){var o=a+i>>>1;0>e(t[o],n)?a=o+1:i=o}return a},right:function(t,n,a,i){for(null==a&&(a=0),null==i&&(i=t.length);a<i;){var o=a+i>>>1;0<e(t[o],n)?i=o:a=o+1}return a}}},Qx=Jx(Kx),ev=Qx.right,tv=Qx.left,nv=function(e){return null===e?NaN:+e},av=function(e,t){var a=e.length,n=0,o=-1,i=0,r=0,l,s;if(null==t)for(;++o<a;)isNaN(l=nv(e[o]))||(s=l-i,i+=s/++n,r+=s*(l-i));else for(;++o<a;)isNaN(l=nv(t(e[o],o,e)))||(s=l-i,i+=s/++n,r+=s*(l-i));return 1<n?r/(n-1):void 0},iv=function(e,t){var a=e.length,n=-1,i,o,r;if(null==t){for(;++n<a;)if(null!=(i=e[n])&&i>=i)for(o=r=i;++n<a;)null!=(i=e[n])&&(o>i&&(o=i),r<i&&(r=i));}else for(;++n<a;)if(null!=(i=t(e[n],n,e))&&i>=i)for(o=r=i;++n<a;)null!=(i=t(e[n],n,e))&&(o>i&&(o=i),r<i&&(r=i));return[o,r]},ov=function(e,t,a){e=+e,t=+t,a=2>(i=arguments.length)?(t=e,e=0,1):3>i?1:+a;for(var o=-1,i=0|N(0,p((t-e)/a)),n=Array(i);++o<i;)n[o]=e+o*a;return n},rv=7.0710678118654755,lv=3.1622776601683795,sv=1.4142135623730951,dv=function(e,t,a){var o=-1,i,r,n,l;if(t=+t,e=+e,a=+a,e===t&&0<a)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(l=Dn(e,t,a))||!isFinite(l))return[];if(0<l)for(e=p(e/l),t=E(t/l),n=Array(r=p(t-e+1));++o<r;)n[o]=(e+o)*l;else for(e=E(e*l),t=p(t*l),n=Array(r=p(e-t+1));++o<r;)n[o]=(e-o)/l;return i&&n.reverse(),n},pv=function(e){return p(f(e.length)/r)+1},cv=function(e,t,a){if(null==a&&(a=nv),!!(s=e.length)){if(0>=(t=+t)||2>s)return+a(e[0],0,e);if(1<=t)return+a(e[s-1],s-1,e);var o=(s-1)*t,i=E(o),r=+a(e[i],i,e),l=+a(e[i+1],i+1,e),s;return r+(l-r)*(o-i)}},uv=function(e,t){var a=e.length,n=-1,i,o;if(null==t){for(;++n<a;)if(null!=(i=e[n])&&i>=i)for(o=i;++n<a;)null!=(i=e[n])&&i>o&&(o=i);}else for(;++n<a;)if(null!=(i=t(e[n],n,e))&&i>=i)for(o=i;++n<a;)null!=(i=t(e[n],n,e))&&i>o&&(o=i);return o},fv=function(e){for(var t=e.length,n=-1,a=0,i,o,r;++n<t;)a+=e[n].length;for(o=Array(a);0<=--t;)for(r=e[t],i=r.length;0<=--i;)o[--a]=r[i];return o},mv=function(e,t){for(var n=t.length,a=Array(n);n--;)a[n]=e[t[n]];return a},gv=function(e,t){var a=e.length,n=-1,i=0,o;if(null==t)for(;++n<a;)(o=+e[n])&&(i+=o);else for(;++n<a;)(o=+t(e[n],n,e))&&(i+=o);return i},_v=function(e,t,o,r){var l=Xx(e,r),s=l.length,n=t,d,a,i,p;for(i=0,p=Array(n);i<n;++i){for(d=0,a=0;a<s;++a)d+=l[~~(h.random()*s)];p[i]=d/s}return[cv(p.sort(Kx),o/2),cv(p,1-o/2)]},yv=function(e,t){var n=Xx(e,t);return[cv(n.sort(Kx),0.25),cv(n,0.5),cv(n,0.75)]},hv=function(e,t){var n=NaN,i={},r,l;return i.mean=function(e){return arguments.length?(r=e||0,n=NaN,i):r},i.stdev=function(e){return arguments.length?(l=null==e?1:e,n=NaN,i):l},i.sample=function(){var e=0,t=0,a,i;if(n==n)return e=n,n=NaN,e;do e=2*h.random()-1,t=2*h.random()-1,a=e*e+t*t;while(0===a||1<a);return i=u(-2*f(a)/a),n=r+t*i*l,r+e*i*l},i.pdf=function(e){var t=a(g(e-r,2)/(-2*g(l,2)));return 1/(l*u(2*o))*t},i.cdf=function(e){var t=(e-r)/l,n=T(t),i;if(37<n)i=0;else{var o=a(-n*n/2),s;7.07106781186547>n?(s=0.0352624965998911*n+0.700383064443688,s=s*n+6.37396220353165,s=s*n+33.912866078383,s=s*n+112.079291497871,s=s*n+221.213596169931,s=s*n+220.206867912376,i=o*s,s=0.0883883476483184*n+1.75566716318264,s=s*n+16.064177579207,s=s*n+86.7807322029461,s=s*n+296.564248779674,s=s*n+637.333633378831,s=s*n+793.826512519948,s=s*n+440.413735824752,i/=s):(s=n+0.65,s=n+4/s,s=n+3/s,s=n+2/s,s=n+1/s,i=o/s/2.506628274631)}return 0<t?1-i:i},i.icdf=function(e){if(0>=e||1<=e)return NaN;var t=2*e-1,n=8*(o-3)/(3*o*(4-o)),i=2/(o*n)+f(1-g(t,2))/2,a=f(1-t*t)/n,d=(0<t?1:-1)*u(u(i*i-a)-i);return r+l*ih*d},i.mean(e).stdev(t)},bv=function(e,t){var a=hv(),i={},o=0;return i.data=function(n){return arguments.length?(e=n,o=n?n.length:0,i.bandwidth(t)):e},i.bandwidth=function(n){return arguments.length?(t=n,!t&&e&&(t=Rn(e)),i):t},i.sample=function(){return e[~~(h.random()*o)]+t*a.sample()},i.pdf=function(n){for(var r=0,l=0;l<o;++l)r+=a.pdf((n-e[l])/t);return r/t/o},i.cdf=function(n){for(var r=0,l=0;l<o;++l)r+=a.cdf((n-e[l])/t);return r/o},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)},xv=function(e,t){function n(e){var t=[],n=0,a;for(a=0;a<o;++a)n+=t[a]=null==e[a]?1:+e[a];for(a=0;a<o;++a)t[a]/=n;return t}var a={},o=0,l;return a.weights=function(e){return arguments.length?(l=n(t=e||[]),a):t},a.distributions=function(n){return arguments.length?(n?(o=n.length,e=n):(o=0,e=[]),a.weights(t)):e},a.sample=function(){for(var t=h.random(),n=e[o-1],a=l[0],r=0;r<o-1;a+=l[++r])if(t<a){n=e[r];break}return n.sample()},a.pdf=function(t){for(var n=0,a=0;a<o;++a)n+=l[a]*e[a].pdf(t);return n},a.cdf=function(t){for(var n=0,a=0;a<o;++a)n+=l[a]*e[a].cdf(t);return n},a.icdf=function(){throw Error("Mixture icdf not supported.")},a.distributions(e).weights(t)},vv=function(e,t){null==t&&(t=null==e?1:e,e=0);var n={},i,a,o;return n.min=function(e){return arguments.length?(i=e||0,o=a-i,n):i},n.max=function(e){return arguments.length?(a=e||0,o=a-i,n):a},n.sample=function(){return i+o*h.random()},n.pdf=function(e){return e>=i&&e<=a?1/o:0},n.cdf=function(e){return e<i?0:e>a?1:(e-i)/o},n.icdf=function(e){return 0<=e&&1>=e?i+e*o:NaN},n.min(e).max(t)},Sv=In.prototype;Sv.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Sv.add=function(e){this._add.push(e)},Sv.rem=function(e){this._rem.push(e)},Sv.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e=this._add,t=this._rem,a=this._key,o=e.length,n=t.length,r=Array(o-n),l={},s,i,d;for(s=0;s<n;++s)l[a(t[s])]=1;for(s=0,i=0;s<o;++s)l[a(d=e[s])]?l[a(d)]=0:r[i++]=d;return this._rem=[],this._add=r},Sv.distinct=function(e){for(var t=this.values(),a=t.length,n={},i=0,o;0<=--a;)o=e(t[a])+"",n.hasOwnProperty(o)||(n[o]=1,++i);return i},Sv.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Rh(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Sv.argmin=function(e){return this.extent(e)[0]||{}},Sv.argmax=function(e){return this.extent(e)[1]||{}},Sv.min=function(e){var t=this.extent(e)[0];return null==t?+Infinity:e(t)},Sv.max=function(e){var t=this.extent(e)[1];return null==t?-Infinity:e(t)},Sv.quartile=function(e){return this._get===e&&this._q||(this._q=yv(this.values(),e),this._get=e),this._q},Sv.q1=function(e){return this.quartile(e)[0]},Sv.q2=function(e){return this.quartile(e)[1]},Sv.q3=function(e){return this.quartile(e)[2]},Sv.ci=function(e){return this._get===e&&this._ci||(this._ci=_v(this.values(),1e3,0.05,e),this._get=e),this._ci},Sv.ci0=function(e){return this.ci(e)[0]},Sv.ci1=function(e){return this.ci(e)[1]},Mn.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Gx},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Tv=Fh(Mn,bn);Tv.transform=function(e,t){var n=this,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i;return this.stamp=a.stamp,this.value&&((i=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=i?this.init(e):{},t.visit(t.SOURCE,function(e){n.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){n.rem(e)}),t.visit(t.ADD,function(e){n.add(e)})),a.modifies(this._outputs),n._drop=!1!==e.drop,e.cross&&1<n._dims.length&&(n._drop=!1,this.cross()),n.changes(a)},Tv.cross=function(){function e(e){var n,a,i,t;for(n in e)for(i=e[n].tuple,a=0;a<l;++a)r[a][t=i[o[a]]]=t}function t(e,n,s){var d=o[s],p=r[s++],c,u;for(c in p)n[d]=p[c],u=e?e+"|"+c:c,s<l?t(u,n,s):!i[u]&&a.cell(u,n)}var a=this,i=a.value,o=a._dnames,r=o.map(function(){return{}}),l=o.length;e(a._prev),e(i),t("",{},0)},Tv.init=function(e){function t(e){for(var t=Ah(m(e)),o=0,i=t.length,n;o<i;++o)r[n=t[o]]||(r[n]=1,a.push(n))}var a=this._inputs=[],o=this._outputs=[],r={};this._dims=Ah(e.groupby),this._dnames=this._dims.map(function(e){var n=v(e);return t(e),o.push(n),n}),this.cellkey=e.key?e.key:Tn(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var l=e.fields||[null],s=e.ops||["count"],d=e.as||[],p=l.length,n={},c,u,f,g,_,y;for(p!==s.length&&lh("Unmatched number of fields and aggregate ops."),y=0;y<p;++y){if(c=l[y],u=s[y],null==c&&"count"!==u&&lh("Null aggregate field specified."),g=v(c),_=kn(u,g,d[y]),o.push(_),"count"===u){this._counts.push(_);continue}f=n[g],f||(t(c),f=n[g]=[],f.field=c,this._measures.push(f)),"count"!==u&&(this._countOnly=!1),f.push(En(u,_))}return this._measures=this._measures.map(function(e){return wn(e,e.field)}),{}},Tv.cellkey=Tn(),Tv.cell=function(e,n){var t=this.value[e];return t?0===t.num&&this._drop&&t.stamp<this.stamp?(t.stamp=this.stamp,this._adds[this._alen++]=t):t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t):(t=this.value[e]=this.newcell(e,n),this._adds[this._alen++]=t),t},Tv.newcell=function(e,a){var t={key:e,num:0,agg:null,tuple:this.newtuple(a,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var o=this._measures,r=o.length,n;for(t.agg=Array(r),n=0;n<r;++n)t.agg[n]=new o[n](t)}return t.store&&(t.data=new In),t},Tv.newtuple=function(e,t){var a=this._dnames,o=this._dims,r={},l,i;for(l=0,i=o.length;l<i;++l)r[a[l]]=o[l](e);return t?J(t.tuple,r):Z(r)},Tv.add=function(e){var t=this.cellkey(e),a=this.cell(t,e),o,r,i;if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),o=a.agg,(r=0,i=o.length);r<i;++r)o[r].add(o[r].get(e),e)},Tv.rem=function(e){var t=this.cellkey(e),a=this.cell(t,e),o,r,i;if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),o=a.agg,(r=0,i=o.length);r<i;++r)o[r].rem(o[r].get(e),e)},Tv.celltuple=function(e){var t=e.tuple,a=this._counts,o,r,i;for(e.store&&e.data.values(),r=0,i=a.length;r<i;++r)t[a[r]]=e.num;if(!this._countOnly)for(o=e.agg,r=0,i=o.length;r<i;++r)o[r].set(t);return t},Tv.changes=function(e){var t=this._adds,a=this._mods,o=this._prev,r=this._drop,l=e.add,s=e.rem,d=e.mod,p,c,u,i;if(o)for(c in o)p=o[c],(!r||p.num)&&s.push(p.tuple);for(u=0,i=this._alen;u<i;++u)l.push(this.celltuple(t[u])),t[u]=null;for(u=0,i=this._mlen;u<i;++u)p=a[u],(0===p.num&&r?s:d).push(this.celltuple(p)),a[u]=null;return this._alen=this._mlen=0,this._prev=null,e},Fn.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var kv=Fh(Fn,bn);kv.transform=function(e,t){var n=this._bins(e),a=n.start,i=n.step,o=e.as||["bin0","bin1"],r=o[0],l=o[1],s;return e.modified()?(t=t.reflow(!0),s=t.SOURCE):s=t.modified(m(e.field))?t.ADD_MOD:t.ADD,t.visit(s,function(e){var t=n(e);e[r]=t,e[l]=null==t?null:a+i*(1+(t-a)/i)}),t.modifies(o)},kv._bins=function(e){if(this.value&&!e.modified())return this.value;var n=e.field,t=Zx(e),i=t.start,o=t.stop,r=t.step,l,a;null!=(l=e.anchor)&&(a=l-(i+r*E((l-i)/r)),i+=a,o+=a);var s=function(e){var t=n(e);return null==t?null:(t=N(i,S(+t,o-r)),i+r*E((t-i)/r))};return s.start=i,s.stop=o,s.step=r,this.value=rh(s,m(n),e.name||"bin_"+v(n))};var Ev=function(e,t,n){var a=e,i=t||[],o=n||[],r={},l=0;return{add:function(e){o.push(e)},remove:function(e){r[a(e)]=++l},size:function(){return i.length},data:function(e,t){return l&&(i=i.filter(function(e){return!r[a(e)]}),r={},l=0),t&&e&&i.sort(e),o.length&&(i=e?Wh(e,i,o.sort(e)):i.concat(o),o=[]),i}}};Bn.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};var Nv=Fh(Bn,bn);Nv.transform=function(e,t){var n=t.fork(t.ALL),a=Ev(V,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,a.remove),this.modified(o),this.value=n.source=a.data(i,o),n},Fh(zn,ne),Un.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:"[\\w\"]+"},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Lv=Fh(Un,bn);Lv.transform=function(e,t){function n(a){return function(s){for(var d=$n(l(s),e.case,o)||[],p=0,i=d.length,n;p<i;++p)r.test(n=d[p])||a(n)}}var a=this._parameterCheck(e,t),i=this._counts,o=this._match,r=this._stop,l=e.field,s=e.as||["text","count"],d=n(function(e){i[e]=1+(i[e]||0)}),p=n(function(e){i[e]-=1});return a?t.visit(t.SOURCE,d):(t.visit(t.ADD,d),t.visit(t.REM,p)),this._finish(t,s)},Lv._parameterCheck=function(e,t){var n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},Lv._finish=function(e,n){var a=this._counts,i=this._tuples||(this._tuples={}),o=n[0],r=n[1],l=e.fork(),s,d,p;for(s in a)d=i[s],p=a[s]||0,!d&&p?(i[s]=d=Z({}),d[o]=s,d[r]=p,l.add.push(d)):0===p?(d&&l.rem.push(d),a[s]=null,i[s]=null):d[r]!==p&&(d[r]=p,l.mod.push(d));return l.modifies(n)},Wn.Definition={type:"Cross",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};var Av=Fh(Wn,bn);Av.transform=function(e,t){var n=t.fork(t.NO_SOURCE),i=this.value,o=e.as||["a","b"],r=o[0],a=o[1],l=!i||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");return l?(i&&(n.rem=i),n.add=this.value=qn(t.source,r,a,e.filter||hh)):n.mod=i,n.source=this.value,n.modifies(o)};var wv={kde:bv,mixture:xv,normal:hv,uniform:vv},Cv="distributions",Ov="function",Dv="field",Pv=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];Vn.Definition={type:"Density",metadata:{generates:!0,source:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Pv.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Pv},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]};var Rv=Fh(Vn,bn);Rv.transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var a=Hn(e.distribution,Gn(t)),i=e.method||"pdf";"pdf"!==i&&"cdf"!==i&&lh("Invalid density method: "+i),e.extent||a.data||lh("Missing density extent parameter."),i=a[i];var o=e.as||["value","density"],r=e.extent||iv(a.data()),l=(r[1]-r[0])/(e.steps||100),s=ov(r[0],r[1]+l/2,l).map(function(e){var t={};return t[o[0]]=e,t[o[1]]=i(e),Z(t)});this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n},Jn.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};var Iv=Fh(Jn,bn);Iv.transform=function(e,t){var n=this.value,a=e.field,i=n[0],o=n[1],r=t.ADD,l;l=t.changed()||t.modified(a.fields)||e.modified("field"),l&&(r=t.SOURCE,i=+Infinity,o=-Infinity),t.visit(r,function(e){var t=a(e);null!=t&&(t<i&&(i=t),t>o&&(o=t))}),this.value=[i,o]};var Mv=Fh(Qn,ne);Mv.connect=function(e){return this.targets().add(e),e.source=this},Mv.add=function(e){this.value.add.push(e)},Mv.rem=function(e){this.value.rem.push(e)},Mv.mod=function(e){this.value.mod.push(e)},Mv.init=function(e){this.value.init(e,e.NO_SOURCE)},Mv.evaluate=function(){return this.value};var Fv=Fh(ea,bn);Fv.activate=function(e){this._targets[this._targets.active++]=e},Fv.subflow=function(e,t,n,a){var i=this.value,o=i.hasOwnProperty(e)&&i[e],r,l;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(l=a||(l=this._group[e])&&l.tuple,r=n.dataflow,o=r.add(new Qn(n.fork(n.NO_SOURCE),this)).connect(t(r,e,l)),i[e]=o,this.activate(o)),o},Fv.transform=function(e,t){function n(e){return i.subflow(e,r,t)}var a=t.dataflow,i=this,o=e.key,r=e.subflow,l=this._keys,s=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=V(e),a=l.get(t);void 0!==a&&(l.delete(t),n(a).rem(e))}),t.visit(t.ADD,function(e){var t=o(e);l.set(V(e),t),n(t).add(e)}),s||t.modified(o.fields)?t.visit(t.MOD,function(e){var t=V(e),a=l.get(t),i=o(e);a===i?n(i).mod(e):(l.set(t,i),n(a).rem(e),n(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(l.get(V(e))).mod(e)}),s&&t.visit(t.REFLOW,function(e){var t=V(e),a=l.get(t),i=o(e);a!==i&&(l.set(t,i),n(a).rem(e),n(i).add(e))}),l.empty>a.cleanThreshold&&a.runAfter(l.clean),t},Fh(ta,ne),aa.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};var Bv=Fh(aa,bn);Bv.transform=function(e,t){function n(n){var t=V(n),a=p(n,e),o=i.get(t);a&&o?(i.delete(t),r.push(n)):a||o?c&&a&&!o&&d.push(n):(i.set(t,1),l.push(n))}var a=t.dataflow,i=this.value,o=t.fork(),r=o.add,l=o.rem,d=o.mod,p=e.expr,c=!0;return t.visit(t.REM,function(e){var t=V(e);i.has(t)?i.delete(t):l.push(e)}),t.visit(t.ADD,function(n){p(n,e)?r.push(n):i.set(V(n),1)}),t.visit(t.MOD,n),e.modified()&&(c=!1,t.visit(t.REFLOW,n)),i.empty>a.cleanThreshold&&a.runAfter(i.clean),o},ia.Definition={type:"Fold",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};var zv=Fh(ia,bn);zv.transform=function(e,t){function a(e){for(var t=r[V(e)]=Array(m),n=0,a;n<m;++n)a=t[n]=X(e),a[p]=u[n],a[c]=s[n](e),g.add.push(a)}function o(e){for(var t=r[V(e)],a=0,i;a<m;++a)_&1<<a&&(i=K(e,t[a],n),i[p]=u[a],i[c]=s[a](e),g.mod.push(i))}var r=this.value,l=e.modified("fields"),s=e.fields,d=e.as||["key","value"],p=d[0],c=d[1],u=s.map(oa),m=s.length,n=t.stamp,g=t.fork(t.NO_SOURCE),f=0,_=0,i;if(l){for(i in r)g.rem.push.apply(g.rem,r[i]);r=this.value={},t.visit(t.SOURCE,a)}else{for(t.visit(t.ADD,a);f<m;++f)t.modified(s[f].fields)&&(_|=1<<f);_&&t.visit(t.MOD,o),t.visit(t.REM,function(e){var t=V(e);g.rem.push.apply(g.rem,r[t]),r[t]=null})}return g.modifies(d)},ra.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};var jv=Fh(ra,bn);jv.transform=function(e,t){var n=e.expr,a=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(a),t.visit(o,function(i){i[a]=n(i,e)})};var Uv=Fh(la,bn);Uv.transform=function(e,n){var a=this.value,i=n.fork(n.ALL),o=e.size-a.length,r=e.generator,l,s,d;if(0<o){for(l=[];0<=--o;)l.push(d=Z(r(e))),a.push(d);i.add=i.add.length?i.materialize(i.ADD).add.concat(l):l}else s=a.slice(0,-o),i.rem=i.rem.length?i.materialize(i.REM).rem.concat(s):s,a=a.slice(-o);return i.source=this.value=a,i};var $v={value:"value",median:function(e,t){var a=e.length,n=-1,i=[],o;if(null==t)for(;++n<a;)isNaN(o=nv(e[n]))||i.push(o);else for(;++n<a;)isNaN(o=nv(t(e[n],n,e)))||i.push(o);return cv(i.sort(Kx),0.5)},mean:function(e,t){var a=e.length,n=a,o=-1,i=0,r;if(null==t)for(;++o<a;)isNaN(r=nv(e[o]))?--n:i+=r;else for(;++o<a;)isNaN(r=nv(t(e[o],o,e)))?--n:i+=r;return n?i/n:void 0},min:function(e,t){var a=e.length,n=-1,i,o;if(null==t){for(;++n<a;)if(null!=(i=e[n])&&i>=i)for(o=i;++n<a;)null!=(i=e[n])&&o>i&&(o=i);}else for(;++n<a;)if(null!=(i=t(e[n],n,e))&&i>=i)for(o=i;++n<a;)null!=(i=t(e[n],n,e))&&o>i&&(o=i);return o},max:uv},Wv=[];sa.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};var qv=Fh(sa,bn);qv.transform=function(e,a){var o=a.fork(a.ALL),r=da(e),s=pa(e),d=v(e.field),p=v(e.key),c=(e.groupby||[]).map(v),u=ca(a.source,e.groupby,e.key,e.keyvals),f=[],_=this.value,y=u.domain.length,m,h,b,x,S,g,i,T,l,n;for(S=0,T=u.length;S<T;++S)for(m=u[S],b=m.values,h=NaN,i=0;i<y;++i)if(null==m[i]){for(x=u.domain[i],n={_impute:!0},(g=0,l=b.length);g<l;++g)n[c[g]]=b[g];n[p]=x,n[d]=isNaN(h)?h=r(m,s):h,f.push(Z(n))}return f.length&&(o.add=o.materialize(o.ADD).add.concat(f)),_.length&&(o.rem=o.materialize(o.REM).rem.concat(_)),this.value=f,o},ua.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Gx},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var Hv=Fh(ua,Mn);Hv.transform=function(e,t){var n=this,a=e.modified(),i;return n.value&&(a||t.modified(n._inputs))?(i=n.value=a?n.init(e):{},t.visit(t.SOURCE,function(e){n.add(e)})):(i=n.value=n.value||this.init(e),t.visit(t.REM,function(e){n.rem(e)}),t.visit(t.ADD,function(e){n.add(e)})),n.changes(),t.visit(t.SOURCE,function(e){Ph(e,i[n.cellkey(e)].tuple)}),t.reflow(a).modifies(this._outputs)},Hv.changes=function(){var e=this._adds,t=this._mods,a,i;for(a=0,i=this._alen;a<i;++a)this.celltuple(e[a]),e[a]=null;for(a=0,i=this._mlen;a<i;++a)this.celltuple(t[a]),t[a]=null;this._alen=this._mlen=0},Fh(fa,ne),ga.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};var Yv=Fh(ga,bn);Yv.transform=function(e,t){var a=t,o=e.as,r=e.fields,l=e.index,i=e.values,s=null==e.default?null:e.default,d=e.modified(),p=d?t.SOURCE:t.ADD,c=r.length,n,u,f;return i?(u=i.length,1<c&&!o&&lh("Multi-field lookup requires explicit \"as\" parameter."),o&&o.length!==c*u&&lh("The \"as\" parameter has too few output field names."),o=o||i.map(v),n=function(e){for(var t=0,n=0,a,d;t<c;++t)if(d=l.get(r[t](e)),null==d)for(a=0;a<u;++a,++n)e[o[n]]=s;else for(a=0;a<u;++a,++n)e[o[n]]=i[a](d)}):(!o&&lh("Missing output field names."),n=function(e){for(var t=0,n;t<c;++t)n=l.get(r[t](e)),e[o[t]]=null==n?s:n}),d?a=t.reflow(!0):(f=r.some(function(e){return t.modified(e.fields)}),p|=f?t.MOD:0),t.visit(p,n),a.modifies(o)},Fh(_a,ne),Fh(ha,ne),Fh(xa,bn),xa.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)};var Vv=Fh(va,ea);Vv.transform=function(e,n){var a=this,i=e.subflow,o=e.field;return(e.modified("field")||o&&n.modified(m(o)))&&lh("PreFacet does not support field modification."),this._targets.active=0,n.visit(n.MOD,function(e){var t=a.subflow(V(e),i,n,e);o?o(e).forEach(function(e){t.mod(e)}):t.mod(e)}),n.visit(n.ADD,function(e){var t=a.subflow(V(e),i,n,e);o?o(e).forEach(function(e){t.add(Z(e))}):t.add(e)}),n.visit(n.REM,function(e){var t=a.subflow(V(e),i,n,e);o?o(e).forEach(function(e){t.rem(e)}):t.rem(e)}),n},Sa.Definition={type:"Project",metadata:{generates:!0,changes:!0,modifies:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};var Gv=Fh(Sa,bn);Gv.transform=function(e,t){var n=e.fields,a=Ta(e.fields,e.as||[]),i=n?function(e,i){return ka(e,i,n,a)}:K,o,r;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),o=t.fork(),t.visit(t.REM,function(e){var t=V(e);o.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=i(e,Z({}));r[V(e)]=t,o.add.push(t)}),t.visit(t.MOD,function(e){o.mod.push(i(e,r[V(e)]))}),o};var Zv=Fh(Ea,bn);Zv.transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var Xv=Fh(Na,bn);Xv.transform=function(e,t){var n,a;return this.value?a=this.value:(n=t=t.addAll(),a=this.value={}),e.derive&&(n=t.fork(),t.visit(t.REM,function(e){var t=V(e);n.rem.push(a[t]),a[t]=null}),t.visit(t.ADD,function(e){var t=X(e);a[V(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(K(e,a[V(e)]))})),n},La.Definition={type:"Sample",metadata:{source:!0,changes:!0},params:[{name:"size",type:"number",default:1000}]};var Kv=Fh(La,bn);Kv.transform=function(e,t){function a(e){var t,n;s.length<l?s.push(e):(n=~~((d+1)*h.random()),n<s.length&&n>=c&&(t=s[n],u[V(t)]&&o.rem.push(t),s[n]=e)),++d}var o=t.fork(),r=e.modified("size"),l=e.size,s=this.value,d=this.count,c=0,u=s.reduce(function(e,n){return e[V(n)]=1,e},{});if(t.rem.length&&(t.visit(t.REM,function(e){var t=V(e);u[t]&&(u[t]=-1,o.rem.push(e)),--d}),s=s.filter(function(e){return-1!==u[V(e)]})),(t.rem.length||r)&&s.length<l&&t.source&&(c=d=s.length,t.visit(t.SOURCE,function(e){u[V(e)]||a(e)}),c=-1),r&&s.length>l){for(var p=0,i=s.length-l;p<i;++p)u[V(s[p])]=-1,o.rem.push(s[p]);s=s.slice(i)}return t.mod.length&&t.visit(t.MOD,function(e){u[V(e)]&&o.mod.push(e)}),t.add.length&&t.visit(t.ADD,a),(t.add.length||0>c)&&(o.add=s.filter(function(e){return!u[V(e)]})),this.count=d,this.value=o.source=s,o},Aa.Definition={type:"Sequence",metadata:{generates:!0,source:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]};var Jv=Fh(Aa,bn);Jv.transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,n.source=this.value=ov(e.start,e.stop,e.step||1).map(Z),n.add=t.add.concat(this.value),n}};var Qv=Fh(wa,bn);Qv.transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var eS=Fh(Ca,bn);eS.transform=function(e,t){function n(e){o.set(i(e),e)}var a=t.dataflow,i=e.field,o=this.value,r=!0;return e.modified("field")||t.modified(i.fields)?(o.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){o.delete(i(e))}),t.visit(t.ADD,n)):r=!1,this.modified(r),o.empty>a.cleanThreshold&&a.runAfter(o.clean),t.fork()};var tS=Fh(Oa,bn);tS.transform=function(e,t){var n=!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields);n&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var nS={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,a=t.data;return n&&t.compare(a[n-1],a[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,a=t.data;return n&&t.compare(a[n-1],a[n])?++e:e}}},percent_rank:function(){var e=nS.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,a=t.data,i=t.compare;if(e<n){for(;n+1<a.length&&!i(a[n],a[n+1]);)++n;e=n}return(1+e)/a.length}}},ntile:function(e,t){t=+t,0<t||lh("ntile num must be greater than zero.");var n=nS.cume_dist(),a=n.next;return{init:n.init,next:function(e){return p(t*a(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var a=n.index-t;return 0<=a?e(n.data[a]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var a=n.index+t,i=n.data;return a<i.length?e(i[a]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return t=+t,0<t||lh("nth_value nth must be greater than zero."),{next:function(n){var a=n.i0+(t-1);return a<n.i1?e(n.data[a]):null}}}},aS=Object.keys(nS),iS=Pa.prototype;iS.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},iS.update=function(e,n){var t=this,a=t.cell,i=t.windows,o=e.data,r=i&&i.length,l;if(a){for(l=e.p0;l<e.i0;++l)a.rem(o[l]);for(l=e.p1;l<e.i1;++l)a.add(o[l]);a.set(n)}for(l=0;l<r;++l)i[l].update(e,n)},Ia.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:aS.concat(Gx)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var oS=Fh(Ia,bn);oS.transform=function(e,t){function a(e){return o.group(n(e))}var o=this,r=o.state,l=e.modified(),s,i;this.stamp=t.stamp,(!r||l)&&(r=o.state=new Pa(e));var n=Tn(e.groupby);for(l||t.modified(r.inputs)?(o.value={},t.visit(t.SOURCE,function(e){a(e).add(e)})):(t.visit(t.REM,function(e){a(e).remove(e)}),t.visit(t.ADD,function(e){a(e).add(e)})),s=0,i=o._mlen;s<i;++s)Ma(o._mods[s],r,e);return o._mlen=0,o._mods=[],t.reflow(l).modifies(r.outputs)},oS.group=function(e){var t=this,n=t.value[e];return n||(n=t.value[e]=Ev(V),n.stamp=-1),n.stamp<t.stamp&&(n.stamp=t.stamp,t._mods[t._mlen++]=n),n};var rS=Object.freeze({aggregate:Mn,bin:Fn,collect:Bn,compare:zn,countpattern:Un,cross:Wn,density:Vn,extent:Jn,facet:ea,field:ta,filter:aa,fold:ia,formula:ra,generate:la,impute:sa,joinaggregate:ua,key:fa,lookup:ga,multiextent:_a,multivalues:ha,params:xa,prefacet:va,project:Sa,proxy:Ea,relay:Na,sample:La,sequence:Aa,sieve:wa,subflow:Qn,tupleindex:Ca,values:Oa,window:Ia}),tx=za.prototype;tx.clone=function(){return new za(this)},tx.clear=function(){return this.x1=+ah,this.y1=+ah,this.x2=-ah,this.y2=-ah,this},tx.empty=function(){return this.x1===+ah&&this.y1===+ah&&this.x2===-ah&&this.y2===-ah},tx.set=function(e,t,n,a){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),a<t?(this.y2=t,this.y1=a):(this.y1=t,this.y2=a),this},tx.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},tx.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},tx.round=function(){return this.x1=E(this.x1),this.y1=E(this.y1),this.x2=p(this.x2),this.y2=p(this.y2),this},tx.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},tx.rotate=function(e,t,n){var a=c(e),i=s(e),o=t-t*a+n*i,r=n-t*i-n*a,l=this.x1,d=this.x2,p=this.y1,u=this.y2;return this.clear().add(a*l-i*p+o,i*l+a*p+r).add(a*l-i*u+o,i*l+a*u+r).add(a*d-i*p+o,i*d+a*p+r).add(a*d-i*u+o,i*d+a*u+r)},tx.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},tx.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},tx.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},tx.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},tx.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},tx.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},tx.width=function(){return this.x2-this.x1},tx.height=function(){return this.y2-this.y1};var lS=0,sS=function(e,t){var n=[],a;return a={id:"gradient_"+lS++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(e,t){return n.push({offset:e,color:t}),a}}};Fh(Ua,ja);var dS;try{dS=_("canvas")}catch(t){try{dS=_("canvas-prebuilt")}catch(e){dS=null}}var pS=function(e,t){var n=$a(null,"canvas");if(n&&n.getContext)n.width=e,n.height=t;else if(dS)try{n=new dS(e,t)}catch(t){n=null}return n},cS="undefined"==typeof Image?dS&&dS.Image||null:Image,uS=Va.prototype;uS.pending=function(){return this._pending},uS.sanitizeURL=function(e){var t=this;return Ga(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return Za(t),e}).catch(function(){return Za(t),null})},uS.loadImage=function(e){var t=this;return Ga(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var n=e.href;if(!n||!cS)throw{url:n};var a=new cS;return a.onload=function(){Za(t),a.loaded=!0},a.onerror=function(){Za(t),a.loaded=!1},a.src=n,a}).catch(function(n){return Za(t),{loaded:!1,width:0,height:0,src:n&&n.url||""}})},uS.ready=function(){var e=this;return new Promise(function(t){function n(a){e.pending()?setTimeout(function(){n(!0)},10):t(a)}n(!1)})};var fS=o,pi=2*fS,mS=1e-6;Xa.prototype=Ka.prototype={constructor:Xa,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,a){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+a)},bezierCurveTo:function(e,t,n,a,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +a+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,n,a,o,s){e=+e,n=+n,a=+a,o=+o,s=+s;var d=this._x1,p=this._y1,c=a-e,f=o-n,m=d-e,g=p-n,_=m*m+g*g;if(0>s)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(!(_>mS));else if(!(T(g*c-f*m)>mS)||!s)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var y=a-d,h=o-p,b=c*c+f*f,x=u(b),v=u(_),S=s*t((fS-i((b+_-(y*y+h*h))/(2*x*v)))/2),l=S/v,k=S/x;T(l-1)>mS&&(this._+="L"+(e+l*m)+","+(n+l*g)),this._+="A"+s+","+s+",0,0,"+ +(g*y>m*h)+","+(this._x1=e+k*c)+","+(this._y1=n+k*f)}},arc:function(e,t,n,a,i,o){e=+e,t=+t,n=+n;var l=n*c(a),d=n*s(a),p=e+l,u=t+d,f=1^o,m=o?a-i:i-a;if(0>n)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+p+","+u:(T(this._x1-p)>mS||T(this._y1-u)>mS)&&(this._+="L"+p+","+u);n&&(0>m&&(m=m%pi+pi),m>pi-mS?this._+="A"+n+","+n+",0,1,"+f+","+(e-l)+","+(t-d)+"A"+n+","+n+",0,1,"+f+","+(this._x1=p)+","+(this._y1=u):m>mS&&(this._+="A"+n+","+n+",0,"+ +(m>=fS)+","+f+","+(this._x1=e+n*c(i))+","+(this._y1=t+n*s(i))))},rect:function(e,t,n,a){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +a+"h"+-n+"Z"},toString:function(){return this._}};var gS=function(e){return function(){return e}},_S=T,yS=nh,hS=c,bS=N,xS=S,vS=s,SS=u,TS=1e-12,kS=o,ES=kS/2,NS=2*kS;li.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);}}};var LS=function(e){return new li(e)},AS=function(){function e(e){var p=e.length,n=!1,c,i,d;for(null==r&&(s=l(d=Ka())),c=0;c<=p;++c)!(c<p&&o(i=e[c],c,e))==n&&((n=!n)?s.lineStart():s.lineEnd()),n&&s.point(+t(i,c,e),+a(i,c,e));if(d)return s=null,d+""||null}var t=si,a=di,o=gS(!0),r=null,l=LS,s=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:gS(+n),e):t},e.y=function(t){return arguments.length?(a="function"==typeof t?t:gS(+t),e):a},e.defined=function(t){return arguments.length?(o="function"==typeof t?t:gS(!!t),e):o},e.curve=function(t){return arguments.length?(l=t,null!=r&&(s=l(r)),e):l},e.context=function(t){return arguments.length?(null==t?r=s=null:s=l(r=t),e):r},e},wS=function(){function e(e){var t=e.length,n=!1,f=Array(t),m=Array(t),g,i,_,y,d;for(null==p&&(u=c(d=Ka())),g=0;g<=t;++g){if(!(g<t&&s(y=e[g],g,e))==n)if(n=!n)i=g,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),_=g-1;_>=i;--_)u.point(f[_],m[_]);u.lineEnd(),u.areaEnd()}n&&(f[g]=+a(y,g,e),m[g]=+r(y,g,e),u.point(o?+o(y,g,e):f[g],l?+l(y,g,e):m[g]))}if(d)return u=null,d+""||null}function t(){return AS().defined(s).curve(c).context(p)}var a=si,o=null,r=gS(0),l=di,s=gS(!0),p=null,c=LS,u=null;return e.x=function(t){return arguments.length?(a="function"==typeof t?t:gS(+t),o=null,e):a},e.x0=function(t){return arguments.length?(a="function"==typeof t?t:gS(+t),e):a},e.x1=function(t){return arguments.length?(o=null==t?null:"function"==typeof t?t:gS(+t),e):o},e.y=function(t){return arguments.length?(r="function"==typeof t?t:gS(+t),l=null,e):r},e.y0=function(t){return arguments.length?(r="function"==typeof t?t:gS(+t),e):r},e.y1=function(t){return arguments.length?(l=null==t?null:"function"==typeof t?t:gS(+t),e):l},e.lineX0=e.lineY0=function(){return t().x(a).y(r)},e.lineY1=function(){return t().x(a).y(l)},e.lineX1=function(){return t().x(o).y(r)},e.defined=function(t){return arguments.length?(s="function"==typeof t?t:gS(!!t),e):s},e.curve=function(t){return arguments.length?(c=t,null!=p&&(u=c(p)),e):c},e.context=function(t){return arguments.length?(null==t?p=u=null:u=c(p=t),e):p},e},CS={draw:function(e,t){var n=u(t/kS);e.moveTo(n,0),e.arc(0,0,n,0,NS)}},OS=function(){};ui.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ci(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ci(this,e,t);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};fi.prototype={areaStart:OS,areaEnd:OS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ci(this,e,t);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};mi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:ci(this,e,t);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};gi.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,n=this._y,a=e.length-1;if(0<a)for(var o=e[0],r=n[0],l=e[a]-o,s=n[a]-r,d=-1,i;++d<=a;)i=d/a,this._basis.point(this._beta*e[d]+(1-this._beta)*(o+i*l),this._beta*n[d]+(1-this._beta)*(r+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var DS=function e(t){function n(e){return 1===t?new ui(e):new gi(e,t)}return n.beta=function(t){return e(+t)},n}(0.85);yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_i(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:_i(this,e,t);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var PS=function e(t){function n(e){return new yi(e,t)}return n.tension=function(t){return e(+t)},n}(0);hi.prototype={areaStart:OS,areaEnd:OS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_i(this,e,t);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var RS=function e(t){function n(e){return new hi(e,t)}return n.tension=function(t){return e(+t)},n}(0);bi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_i(this,e,t);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var IS=function e(t){function n(e){return new bi(e,t)}return n.tension=function(t){return e(+t)},n}(0);vi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,a=this._y2-t;this._l23_a=u(this._l23_2a=g(n*n+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:xi(this,e,t);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var MS=function e(t){function n(e){return t?new vi(e,t):new yi(e,0)}return n.alpha=function(t){return e(+t)},n}(0.5);Si.prototype={areaStart:OS,areaEnd:OS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,a=this._y2-t;this._l23_a=u(this._l23_2a=g(n*n+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:xi(this,e,t);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var FS=function e(t){function n(e){return t?new Si(e,t):new hi(e,0)}return n.alpha=function(t){return e(+t)},n}(0.5);Ti.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,a=this._y2-t;this._l23_a=u(this._l23_2a=g(n*n+a*a,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xi(this,e,t);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var BS=function e(t){function n(e){return t?new Ti(e,t):new bi(e,0)}return n.alpha=function(t){return e(+t)},n}(0.5);ki.prototype={areaStart:OS,areaEnd:OS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};wi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ai(this,this._t0,Li(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ai(this,Li(this,n=Ni(this,e,t)),n);break;default:Ai(this,this._t0,n=Ni(this,e,t));}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Ci.prototype=Object.create(wi.prototype)).point=function(e,t){wi.prototype.point.call(this,t,e)},Oi.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,i,o){this._context.bezierCurveTo(t,e,a,n,o,i)}},Di.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===a)this._context.lineTo(e[1],t[1]);else for(var n=Pi(e),i=Pi(t),o=0,r=1;r<a;++o,++r)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],e[r],t[r]);(this._line||0!==this._line&&1===a)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};Ri.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(0>=this._t)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};var zS={basis:{curve:function(e){return new ui(e)}},"basis-closed":{curve:function(e){return new fi(e)}},"basis-open":{curve:function(e){return new mi(e)}},bundle:{curve:DS,tension:"beta",value:0.85},cardinal:{curve:PS,tension:"tension",value:0},"cardinal-open":{curve:IS,tension:"tension",value:0},"cardinal-closed":{curve:RS,tension:"tension",value:0},"catmull-rom":{curve:MS,tension:"alpha",value:0.5},"catmull-rom-closed":{curve:FS,tension:"alpha",value:0.5},"catmull-rom-open":{curve:BS,tension:"alpha",value:0.5},linear:{curve:LS},"linear-closed":{curve:function(e){return new ki(e)}},monotone:{horizontal:function(e){return new Ci(e)},vertical:function(e){return new wi(e)}},natural:{curve:function(e){return new Di(e)}},step:{curve:function(e){return new Ri(e,0.5)}},"step-after":{curve:function(e){return new Ri(e,1)}},"step-before":{curve:function(e){return new Ri(e,0)}}},jS={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},US=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],$S=function(e){var t=[],a,o,r,l,s,d,p,c,i,u,n;for(a=e.slice().replace(US[0],"###$1").split(US[1]).slice(1),c=0,u=a.length;c<u;++c){for(o=a[c],r=o.slice(1).trim().replace(US[2],"$1###$2").split(US[3]),d=o.charAt(0),l=[d],(i=0,n=r.length);i<n;++i)(s=+r[i])===s&&l.push(s);if(p=jS[d.toLowerCase()],l.length-1>p)for(i=1,n=l.length;i<n;i+=p)t.push([d].concat(l.slice(i,i+p)));else t.push(l)}return t},WS={},qS={},HS=[].join,YS=["l",0,0,0,0,0,0,0],VS=function(e,n,a,o,t){var r=null,l=0,s=0,d=0,p=0,c,u,f,m,g;null==a&&(a=0),null==o&&(o=0),null==t&&(t=1),e.beginPath&&e.beginPath();for(var _=0,i=n.length;_<i;++_){switch(c=n[_],1!==t&&(c=Bi(c,t)),c[0]){case"l":l+=c[1],s+=c[2],e.lineTo(l+a,s+o);break;case"L":l=c[1],s=c[2],e.lineTo(l+a,s+o);break;case"h":l+=c[1],e.lineTo(l+a,s+o);break;case"H":l=c[1],e.lineTo(l+a,s+o);break;case"v":s+=c[1],e.lineTo(l+a,s+o);break;case"V":s=c[1],e.lineTo(l+a,s+o);break;case"m":l+=c[1],s+=c[2],e.moveTo(l+a,s+o);break;case"M":l=c[1],s=c[2],e.moveTo(l+a,s+o);break;case"c":u=l+c[5],f=s+c[6],d=l+c[3],p=s+c[4],e.bezierCurveTo(l+c[1]+a,s+c[2]+o,d+a,p+o,u+a,f+o),l=u,s=f;break;case"C":l=c[5],s=c[6],d=c[3],p=c[4],e.bezierCurveTo(c[1]+a,c[2]+o,d+a,p+o,l+a,s+o);break;case"s":u=l+c[3],f=s+c[4],d=2*l-d,p=2*s-p,e.bezierCurveTo(d+a,p+o,l+c[1]+a,s+c[2]+o,u+a,f+o),d=l+c[1],p=s+c[2],l=u,s=f;break;case"S":u=c[3],f=c[4],d=2*l-d,p=2*s-p,e.bezierCurveTo(d+a,p+o,c[1]+a,c[2]+o,u+a,f+o),l=u,s=f,d=c[1],p=c[2];break;case"q":u=l+c[3],f=s+c[4],d=l+c[1],p=s+c[2],e.quadraticCurveTo(d+a,p+o,u+a,f+o),l=u,s=f;break;case"Q":u=c[3],f=c[4],e.quadraticCurveTo(c[1]+a,c[2]+o,u+a,f+o),l=u,s=f,d=c[1],p=c[2];break;case"t":u=l+c[1],f=s+c[2],null===r[0].match(/[QqTt]/)?(d=l,p=s):"t"===r[0]?(d=2*l-m,p=2*s-g):"q"===r[0]&&(d=2*l-d,p=2*s-p),m=d,g=p,e.quadraticCurveTo(d+a,p+o,u+a,f+o),l=u,s=f,d=l+c[1],p=s+c[2];break;case"T":u=c[1],f=c[2],d=2*l-d,p=2*s-p,e.quadraticCurveTo(d+a,p+o,u+a,f+o),l=u,s=f;break;case"a":zi(e,l+a,s+o,[c[1],c[2],c[3],c[4],c[5],c[6]+l+a,c[7]+s+o]),l+=c[6],s+=c[7];break;case"A":zi(e,l+a,s+o,[c[1],c[2],c[3],c[4],c[5],c[6]+a,c[7]+o]),l=c[6],s=c[7];break;case"z":case"Z":e.closePath();}r=c}},GS=1.7320508075688772/2,ZS={circle:{draw:function(e,t){var n=u(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,2*o)}},cross:{draw:function(e,t){var n=u(t)/2,a=n/2.5;e.moveTo(-n,-a),e.lineTo(-n,a),e.lineTo(-a,a),e.lineTo(-a,n),e.lineTo(a,n),e.lineTo(a,a),e.lineTo(n,a),e.lineTo(n,-a),e.lineTo(a,-a),e.lineTo(a,-n),e.lineTo(-a,-n),e.lineTo(-a,-a),e.closePath()}},diamond:{draw:function(e,t){var n=u(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=u(t),a=-n/2;e.rect(a,a,n,n)}},"triangle-up":{draw:function(e,t){var n=u(t)/2,a=GS*n;e.moveTo(0,-a),e.lineTo(-n,a),e.lineTo(n,a),e.closePath()}},"triangle-down":{draw:function(e,t){var n=u(t)/2,a=GS*n;e.moveTo(0,a),e.lineTo(-n,-a),e.lineTo(n,-a),e.closePath()}},"triangle-right":{draw:function(e,t){var n=u(t)/2,a=GS*n;e.moveTo(a,0),e.lineTo(-a,-n),e.lineTo(-a,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=u(t)/2,a=GS*n;e.moveTo(-a,0),e.lineTo(a,-n),e.lineTo(a,n),e.closePath()}}},XS={},KS=function(){function e(e,l,s){var d=null==l?+t.call(this,e):l,p=null==s?+n.call(this,e):s,c=+a.call(this,e),u=+i.call(this,e),f=+o.call(this,e),m;if(r||(r=m=Ka()),0>=f)r.rect(d,p,c,u);else{var g=d+c,_=p+u;r.moveTo(d+f,p),r.lineTo(g-f,p),r.quadraticCurveTo(g,p,g,p+f),r.lineTo(g,_-f),r.quadraticCurveTo(g,_,g-f,_),r.lineTo(d+f,_),r.quadraticCurveTo(d,_,d,_-f),r.lineTo(d,p+f),r.quadraticCurveTo(d,p,d+f,p),r.closePath()}return m?(r=null,m+""||null):void 0}var t=$i,n=Wi,a=qi,i=Hi,o=Yi(0),r=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Yi(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Yi(+t),e):n},e.width=function(t){return arguments.length?(a="function"==typeof t?t:Yi(+t),e):a},e.height=function(t){return arguments.length?(i="function"==typeof t?t:Yi(+t),e):i},e.cornerRadius=function(t){return arguments.length?(o="function"==typeof t?t:Yi(+t),e):o},e.context=function(t){return arguments.length?(r=null==t?null:t,e):r},e},JS=o,QS=function(){function e(e,o,r){var l=r/2;if(p){var s=i-o,c=e-n;if(s||c){var f=u(s*s+c*c),m=(s/=f)*d,g=(c/=f)*d,_=nh(c,s);a.moveTo(n-m,i-g),a.lineTo(e-s*l,o-c*l),a.arc(e,o,l,_-JS,_),a.lineTo(n+m,i+g),a.arc(n,i,d,_,_+JS)}else a.arc(e,o,l,0,2*JS);a.closePath()}else p=1;n=e,i=o,d=l}function t(t){var c=t.length,n=!1,u,i,d;for(null==a&&(a=d=Ka()),u=0;u<=c;++u)!(u<c&&s(i=t[u],u,t))==n&&(n=!n)&&(p=0),n&&e(+o(i,u,t),+r(i,u,t),+l(i,u,t));if(d)return a=null,d+""||null}var a=null,o,r,l,s,p,n,i,d;return t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(l=e,t):l},t.defined=function(e){return arguments.length?(s=e,t):s},t.context=function(e){return arguments.length?(a=null==e?null:e,t):a},t},eT=function(){function e(){var e=+t.apply(this,arguments),d=+n.apply(this,arguments),p=o.apply(this,arguments)-ES,c=l.apply(this,arguments)-ES,u=_S(c-p),f=c>p,m,g;if(s||(s=m=Ka()),d<e&&(g=d,d=e,e=g),!(d>TS))s.moveTo(0,0);else if(u>NS-TS)s.moveTo(d*hS(p),d*vS(p)),s.arc(0,0,d,p,c,!f),e>TS&&(s.moveTo(e*hS(c),e*vS(c)),s.arc(0,0,e,c,p,f));else{var _=p,y=c,h=p,b=c,x=u,v=u,S=r.apply(this,arguments)/2,T=S>TS&&(i?+i.apply(this,arguments):SS(e*e+d*d)),k=xS(_S(d-e)/2,+a.apply(this,arguments)),E=k,N=k,A,w;if(T>TS){var C=Qa(T/e*vS(S)),O=Qa(T/d*vS(S));(x-=2*C)>TS?(C*=f?1:-1,h+=C,b-=C):(x=0,h=b=(p+c)/2),(v-=2*O)>TS?(O*=f?1:-1,_+=O,y-=O):(v=0,_=y=(p+c)/2)}var D=d*hS(_),P=d*vS(_),R=e*hS(b),I=e*vS(b);if(k>TS){var M=d*hS(y),F=d*vS(y),B=e*hS(h),z=e*vS(h);if(u<kS){var j=x>TS?oi(D,P,B,z,M,F,R,I):[R,I],U=D-j[0],$=P-j[1],W=M-j[0],q=F-j[1],H=1/vS(Ja((U*W+$*q)/(SS(U*U+$*$)*SS(W*W+q*q)))/2),Y=SS(j[0]*j[0]+j[1]*j[1]);E=xS(k,(e-Y)/(H-1)),N=xS(k,(d-Y)/(H+1))}}v>TS?N>TS?(A=ri(B,z,D,P,d,N,f),w=ri(M,F,R,I,d,N,f),s.moveTo(A.cx+A.x01,A.cy+A.y01),N<k?s.arc(A.cx,A.cy,N,yS(A.y01,A.x01),yS(w.y01,w.x01),!f):(s.arc(A.cx,A.cy,N,yS(A.y01,A.x01),yS(A.y11,A.x11),!f),s.arc(0,0,d,yS(A.cy+A.y11,A.cx+A.x11),yS(w.cy+w.y11,w.cx+w.x11),!f),s.arc(w.cx,w.cy,N,yS(w.y11,w.x11),yS(w.y01,w.x01),!f))):(s.moveTo(D,P),s.arc(0,0,d,_,y,!f)):s.moveTo(D,P),e>TS&&x>TS?E>TS?(A=ri(R,I,M,F,e,-E,f),w=ri(D,P,B,z,e,-E,f),s.lineTo(A.cx+A.x01,A.cy+A.y01),E<k?s.arc(A.cx,A.cy,E,yS(A.y01,A.x01),yS(w.y01,w.x01),!f):(s.arc(A.cx,A.cy,E,yS(A.y01,A.x01),yS(A.y11,A.x11),!f),s.arc(0,0,e,yS(A.cy+A.y11,A.cx+A.x11),yS(w.cy+w.y11,w.cx+w.x11),f),s.arc(w.cx,w.cy,E,yS(w.y11,w.x11),yS(w.y01,w.x01),!f))):s.arc(0,0,e,b,h,f):s.lineTo(R,I)}return(s.closePath(),m)?(s=null,m+""||null):void 0}var t=ei,n=ti,a=gS(0),i=null,o=ni,l=ai,r=ii,s=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,i=(+o.apply(this,arguments)+ +l.apply(this,arguments))/2-kS/2;return[hS(i)*e,vS(i)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:gS(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:gS(+t),e):n},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:gS(+t),e):a},e.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:gS(+t),e):i},e.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:gS(+t),e):o},e.endAngle=function(t){return arguments.length?(l="function"==typeof t?t:gS(+t),e):l},e.padAngle=function(t){return arguments.length?(r="function"==typeof t?t:gS(+t),e):r},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}().startAngle(function(e){return e.startAngle||0}).endAngle(function(e){return e.endAngle||0}).padAngle(function(e){return e.padAngle||0}).innerRadius(function(e){return e.innerRadius||0}).outerRadius(function(e){return e.outerRadius||0}).cornerRadius(y),tT=wS().x(Vi).y1(x).y0(function(e){return(e.y||0)+(e.height||0)}).defined(Gi),nT=wS().y(x).x1(Vi).x0(function(e){return(e.x||0)+(e.width||0)}).defined(Gi),aT=AS().x(Vi).y(x).defined(Gi),iT=KS().x(Vi).y(x).width(function(e){return e.width||0}).height(function(e){return e.height||0}).cornerRadius(y),oT=function(){function e(){var e;if(a||(a=e=Ka()),t.apply(this,arguments).draw(a,+n.apply(this,arguments)),e)return a=null,e+""||null}var t=gS(CS),n=gS(64),a=null;return e.type=function(n){return arguments.length?(t="function"==typeof n?n:gS(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:gS(+t),e):n},e.context=function(t){return arguments.length?(a=null==t?null:t,e):a},e}().type(function(e){return ji(e.shape||"circle")}).size(function(e){return null==e.size?64:e.size}),rT=QS().x(Vi).y(x).defined(Gi).size(function(e){return e.size||1}),lT=function(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null==t.strokeWidth?1:+t.strokeWidth),e},sT=2*o,dT=sT/4,pT;Xi.beginPath=Ki,Xi.closePath=Ki,Xi.moveTo=Ji,Xi.lineTo=Ji,Xi.rect=function(e,t,n,a){Ji(e,t),Ji(e+n,t+a)},Xi.quadraticCurveTo=function(e,t,n,a){Ji(e,t),Ji(n,a)},Xi.bezierCurveTo=function(e,t,n,a,i,o){Ji(e,t),Ji(n,a),Ji(i,o)},Xi.arc=function(e,t,n,a,o,r){function l(e){i=n*c(e),_=n*s(e),i<d&&(d=i),i>p&&(p=i),_<u&&(u=_),_>f&&(f=_)}if(T(o-a)>sT-1e-8)return Ji(e-n,t-n),void Ji(e+n,t+n);var d=Infinity,p=-Infinity,u=Infinity,f=-Infinity,m,g,i,_;if(l(a),l(o),o!==a)if(a%=sT,0>a&&(a+=sT),o%=sT,0>o&&(o+=sT),o<a&&(r=!r,m=a,a=o,o=m),r)for(o-=sT,m=a-a%dT,g=0;3>g&&m>o;++g,m-=dT)l(m);else for(m=a-a%dT+dT,g=0;3>g&&m<o;++g,m+=dT)l(m);Ji(e+d,t+u),Ji(e+p,t+f)};var cT=function(e,t,a){for(var o=a.width(),r=a.height(),l=a.x1+t.x1*o,s=a.y1+t.y1*r,d=a.x1+t.x2*o,p=a.y1+t.y2*r,c=t.stops,u=0,i=c.length,n=e.createLinearGradient(l,s,d,p);u<i;++u)n.addColorStop(c[u].offset,c[u].color);return n},uT=function(e,t,n){return n.id?cT(e,n,t.bounds):n},fT=function(e,t,n){return n*=null==t.fillOpacity?1:t.fillOpacity,!!(0<n)&&(e.globalAlpha=n,e.fillStyle=uT(e,t,t.fill),!0)},mT=[],gT=function(e,t,n){var a=null==(a=t.strokeWidth)?1:a;return!(0>=a)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity,!!(0<n)&&(e.globalAlpha=n,e.strokeStyle=uT(e,t,t.stroke),e.lineWidth=a,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||mT),e.lineDashOffset=t.strokeDashOffset||0),!0))},_T=function(){return!0},yT=function(e,t){return"translate("+e+","+t+")"},hT=function(e){return yT(e.x||0,e.y||0)},bT=function(e,t){function n(e,n){var a=n.x||0,i=n.y||0;e.translate(a,i),e.beginPath(),t(e,n),e.translate(-a,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",hT(n)),e("d",t(null,n))},bound:function(e,n){return t(Xi(e),n),lT(e,n).translate(n.x||0,n.y||0)},draw:ao(n),pick:so(n)}},xT=bT("arc",function(e,t){return eT.context(e)(t)}),vT=function(e,t){function n(e,n){e.beginPath(),t(e,n)}var a=lo(n);return{type:e,tag:"path",nested:!0,attr:function(e,n){var a=n.mark.items;a.length&&e("d",t(null,a))},bound:function(e,n){var a=n.items;return 0===a.length?e:(t(Xi(e),a),lT(e,a[0]))},draw:io(n),pick:function(e,t,n,i,o,r){var l=t.items,s=t.bounds;return l&&l.length&&(!s||s.contains(o,r))?(1<e.pixelRatio&&(n*=e.pixelRatio,i*=e.pixelRatio),a(e,l,n,i)?l[0]:null):null}}},ST=vT("area",function(e,t){var n=t[0],a=n.interpolate||"linear";return("horizontal"===n.orient?nT:tT).curve(Ii(a,n.orient,n.tension)).context(e)(t)}),TT=1,kT=function(e,t,n){var a=e._defs,i=t.clip_id||(t.clip_id="clip"+TT++),o=a.clipping[i]||(a.clipping[i]={id:i});return o.width=n.width||0,o.height=n.height||0,"url(#"+i+")"},ET=0.5,NT={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var i=co(t,n),o=t.x||0,r=t.y||0,l=(null==t.width?i.width:t.width)||0,s=(null==t.height?i.height:t.height)||0,d=!1===t.aspect?"none":"xMidYMid";o-=uo(t.align,l),r-=fo(t.baseline,s),e("href",i.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",yT(o,r)),e("width",l),e("height",s),e("preserveAspectRatio",d)},bound:function(e,t){var n=t.image,a=t.x||0,i=t.y||0,o=(null==t.width?n&&n.width:t.width)||0,r=(null==t.height?n&&n.height:t.height)||0;return a-=uo(t.align,o),i-=fo(t.baseline,r),e.set(a,i,a+o,i+r)},draw:function(e,t,n){var a=this;to(t,function(i){if(!n||n.intersects(i.bounds)){var o=co(i,a),r=i.x||0,l=i.y||0,s=(null==i.width?o.width:i.width)||0,d=(null==i.height?o.height:i.height)||0,p,c,u,f;r-=uo(i.align,s),l-=fo(i.baseline,d),!1!==i.aspect&&(c=o.width/o.height,u=i.width/i.height,c===c&&u===u&&c!==u&&(u<c?(f=s/c,l+=(d-f)/2,d=f):(f=d*c,r+=(s-f)/2,s=f))),o.loaded&&(e.globalAlpha=null==(p=i.opacity)?1:p,e.drawImage(o,r,l,s,d))}})},pick:ro(),get:co,xOffset:uo,yOffset:fo},LT=vT("line",function(e,t){var n=t[0],a=n.interpolate||"linear";return aT.curve(Ii(a,n.orient,n.tension)).context(e)(t)}),AT={type:"path",tag:"path",nested:!1,attr:function(e,t){e("transform",hT(t)),e("d",t.path)},bound:function(e,t){return mo(Xi(e),t)?e.set(0,0,0,0):lT(e,t)},draw:ao(mo),pick:so(mo)},wT={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Zi(null,t))},bound:function(e,t){var n,a;return lT(e.set(n=t.x||0,a=t.y||0,n+t.width||0,a+t.height||0),t)},draw:ao(go),pick:so(go)},CT={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",hT(t)),e("x2",null==t.x2?0:t.x2-(t.x||0)),e("y2",null==t.y2?0:t.y2-(t.y||0))},bound:function(e,t){var n,a;return lT(e.set(n=t.x||0,a=t.y||0,null==t.x2?n:t.x2,null==t.y2?a:t.y2),t)},draw:function(e,t,n){to(t,function(t){if(!n||n.intersects(t.bounds)){var a=null==t.opacity?1:t.opacity;a&&_o(e,t,a)&&e.stroke()}})},pick:ro(function(e,t,n,a){return!!e.isPointInStroke&&_o(e,t,1)&&e.isPointInStroke(n,a)})},OT=bT("shape",function(e,t){return(t.mark.shape||t.shape).context(e)(t)}),DT=bT("symbol",function(e,t){return oT.context(e)(t)}),PT={height:vo,measureWidth:bo,estimateWidth:yo,width:yo,canvas:So},RT,IT;So(!0);var MT={left:"start",center:"middle",right:"end"},FT=new za,BT={type:"text",tag:"text",nested:!1,attr:function(e,n){var i=n.dx||0,l=(n.dy||0)+No(n),d=n.x||0,p=n.y||0,u=n.angle||0,a=n.radius||0,r;a&&(r=(n.theta||0)-o/2,d+=a*c(r),p+=a*s(r)),e("text-anchor",MT[n.align]||"start"),u?(r=yT(d,p)+" rotate("+u+")",(i||l)&&(r+=" "+yT(i,l))):r=yT(d+i,p+l),e("transform",r)},bound:Lo,draw:function(e,t,n){to(t,function(a){var i,l,d,p,r,t;(!n||n.intersects(a.bounds))&&(t=To(a))&&(i=null==a.opacity?1:a.opacity,0===i||(e.font=Eo(a),e.textAlign=a.align||"left",l=a.x||0,d=a.y||0,(p=a.radius)&&(r=(a.theta||0)-o/2,l+=p*c(r),d+=p*s(r)),a.angle&&(e.save(),e.translate(l,d),e.rotate(a.angle*o/180),l=d=0),l+=a.dx||0,d+=(a.dy||0)+No(a),a.fill&&fT(e,a,i)&&e.fillText(t,l,d),a.stroke&&gT(e,a,i)&&e.strokeText(t,l,d),a.angle&&e.restore()))})},pick:ro(function(e,t,n,i,r,l){if(0>=t.fontSize)return!1;if(!t.angle)return!0;var d=Lo(FT,t,!0),p=-t.angle*o/180,a=c(p),u=s(p),f=t.x,m=t.y;return d.contains(a*r-u*l+(f-f*a+m*u),u*r+a*l+(m-f*u-m*a))})},zT=vT("trail",function(e,t){return rT.context(e)(t)}),jT={arc:xT,area:ST,group:{type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",hT(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,a=0,i=n.length;a<i;++a)e.union(n[a].bounds);return(t.clip||t.width||t.height)&&lT(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var a=this;to(t,function(t){var i=t.x||0,o=t.y||0,r=t.width||0,l=t.height||0,s,d;e.save(),e.translate(i,o),(t.stroke||t.fill)&&(d=null==t.opacity?1:t.opacity,0<d&&(e.beginPath(),s=t.stroke?ET:0,Zi(e,t,s,s),t.fill&&fT(e,t,d)&&e.fill(),t.stroke&&gT(e,t,d)&&e.stroke())),t.clip&&(e.beginPath(),e.rect(0,0,r,l),e.clip()),n&&n.translate(-i,-o),to(t,function(t){a.draw(e,t,n)}),n&&n.translate(i,o),e.restore()})},pick:function(e,t,n,a,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;var r=this;return no(t,function(l){var s,d,p,c;if(c=l.bounds,!c||c.contains(i,o))return(d=l.x||0,p=l.y||0,e.save(),e.translate(d,p),d=i-d,p=o-p,s=no(l,function(e){return po(e,d,p)?r.pick(e,n,a,d,p):null}),e.restore(),s)?s:(s=!1!==t.interactive&&(l.fill||l.stroke)&&0<=d&&d<=l.width&&0<=p&&p<=l.height,s?l:null)})},background:function(e,t){var n=t.stroke?ET:0;e("class","background"),e("d",Zi(null,t,n,n))},foreground:function(e,t,n){var a=t.clip?kT(n,t,t):null;e("clip-path",a)}},image:NT,line:LT,path:AT,rect:wT,rule:CT,shape:OT,symbol:DT,text:BT,trail:zT},UT=function(e,t,n){var a=jT[e.mark.marktype],i=t||a.bound;return a.nested&&(e=e.mark),i(e.bounds||(e.bounds=new za),e,n)},$T={mark:null},WT=function(e,t,a){var o=jT[e.marktype],r=o.bound,l=e.items,s=l&&l.length,d,i,n,p;if(o.nested)return s?n=l[0]:($T.mark=e,n=$T),p=UT(n,r,a),t=t&&t.union(p)||p,t;if(t=t||e.bounds&&e.bounds.clear()||new za,s)for(d=0,i=l.length;d<i;++d)t.union(UT(l[d],r,a));return e.bounds=t},qT=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],HT=Oo.prototype;HT.toJSON=function(e){return Ao(this.root,e||0)},HT.mark=function(e,t,n){t=t||this.root.items[0];var a=Do(e,t);return t.items[n]=a,a.zindex&&(a.group.zdirty=!0),a};var YT=Po.prototype;YT.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},YT.element=function(){return this._el},YT.origin=function(e){return this._origin=e||[0,0],this},YT.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},YT.on=function(){},YT.off=function(){},YT.handlers=function(){var e=this._handlers,t=[],n;for(n in e)t.push.apply(t,e[n]);return t},YT.eventName=function(e){var t=e.indexOf(".");return 0>t?e:e.slice(0,t)},YT.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(function(n){var i=new MouseEvent(t.type,t),e=$a(null,"a");for(var a in n)e.setAttribute(a,n[a]);e.dispatchEvent(i)}).catch(function(){})},YT.handleTooltip=function(e,t,n){this._el.setAttribute("title",n||"")};var VT=Ro.prototype;VT.initialize=function(e,t,n,a){return this._el=e,this.resize(t,n,a)},VT.element=function(){return this._el},VT.scene=function(){return this._el&&this._el.firstChild},VT.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},VT.resize=function(e,t,n){return this._width=e,this._height=t,this._origin=n||[0,0],this},VT.dirty=function(){},VT.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},VT._render=function(){},VT.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},VT._load=function(e,t){var n=this,a=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return a},VT.sanitizeURL=function(e){return this._load("sanitizeURL",e)},VT.loadImage=function(e){return this._load("loadImage",e)};var ZT=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]},XT=Fh(Io,Po);XT.initialize=function(e,t,n){var a=this._canvas=e&&Wa(e,"canvas");if(a){var i=this;this.events.forEach(function(e){a.addEventListener(e,function(t){XT[e]?XT[e].call(i,t):i.fire(e,t)})})}return Po.prototype.initialize.call(this,e,t,n)},XT.canvas=function(){return this._canvas},XT.context=function(){return this._canvas.getContext("2d")},XT.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],XT.DOMMouseScroll=function(e){this.fire("mousewheel",e)},XT.mousemove=Mo("mousemove","mouseover","mouseout"),XT.dragover=Mo("dragover","dragenter","dragleave"),XT.mouseout=Fo("mouseout"),XT.dragleave=Fo("dragleave"),XT.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},XT.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},XT.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},XT.touchmove=function(e){this.fire("touchmove",e,!0)},XT.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},XT.fire=function(e,t,n){var o=n?this._touch:this._active,a=this._handlers[e],r,i;if("click"===e&&o&&o.href?this.handleHref(t,o,o.href):("mouseover"===e||"mouseout"===e)&&o&&o.tooltip&&this.handleTooltip(t,o,"mouseover"===e?o.tooltip:null),a)for(t.vegaType=e,r=0,i=a.length;r<i;++r)a[r].handler.call(this._obj,t,o)},XT.on=function(e,t){var n=this.eventName(e),a=this._handlers;return(a[n]||(a[n]=[])).push({type:e,handler:t}),this},XT.off=function(e,t){var n=this.eventName(e),a=this._handlers[n],o;if(a){for(o=a.length;0<=--o;)a[o].type===e&&(t&&a[o].handler!==t||a.splice(o,1));return this}},XT.pickEvent=function(e){var t=ZT(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},XT.pick=function(e,t,n,a,i){var o=this.context(),r=jT[e.marktype];return r.pick.call(this,o,e,t,n,a,i)};var KT=function(e,t){var n=t.group;e.save(),e.beginPath(),e.rect(0,0,n.width||0,n.height||0),e.clip()},JT="undefined"==typeof window?1:window.devicePixelRatio||1,QT=function(e,t,n,a){var i="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,o=e.getContext("2d"),r=i?JT:1;return e.width=t*r,e.height=n*r,1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=r,o.setTransform(r,0,0,r,r*a[0],r*a[1]),e},ek=Fh(Bo,Ro),tk=Ro.prototype,nk=new za;ek.initialize=function(e,t,n,a){return this._canvas=pS(1,1),e&&(Ha(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),tk.initialize.call(this,e,t,n,a)},ek.resize=function(e,t,n){return tk.resize.call(this,e,t,n),QT(this._canvas,this._width,this._height,this._origin),this._redraw=!0,this},ek.canvas=function(){return this._canvas},ek.context=function(){return this._canvas?this._canvas.getContext("2d"):null},ek.dirty=function(e){var t=jo(e.bounds,e.mark.group);this._dirty.union(t)},ek._render=function(e){var t=this.context(),n=this._origin,a=this._width,i=this._height,o=this._dirty;return t.save(),this._redraw||o.empty()?(this._redraw=!1,o=null):o=zo(t,o,n),this.clear(-n[0],-n[1],a,i),this.draw(t,e,o),t.restore(),this._dirty.clear(),this},ek.draw=function(e,t,n){var a=jT[t.marktype];t.clip&&KT(e,t),a.draw.call(this,e,t,n),t.clip&&e.restore()},ek.clear=function(e,t,n,a){var i=this.context();i.clearRect(e,t,n,a),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,a))};var ak=Fh(Uo,Po);ak.initialize=function(e,t,n){var a=this._svg;return a&&(a.removeEventListener("click",this._hrefHandler),a.removeEventListener("mouseover",this._tooltipHandler),a.removeEventListener("mouseout",this._tooltipHandler)),this._svg=a=e&&Wa(e,"svg"),a&&(a.addEventListener("click",this._hrefHandler),a.addEventListener("mouseover",this._tooltipHandler),a.addEventListener("mouseout",this._tooltipHandler)),Po.prototype.initialize.call(this,e,t,n)},ak.svg=function(){return this._svg},ak.on=function(e,t){var n=this.eventName(e),a=this._handlers,i={type:e,handler:t,listener:$o(this,t)};return(a[n]||(a[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener),this},ak.off=function(e,t){var n=this.eventName(e),a=this._svg,o=this._handlers[n],r;if(o){for(r=o.length;0<=--r;)(o[r].type!==e||t)&&o[r].handler!==t||(this._svg&&a.removeEventListener(n,o[r].listener),o.splice(r,1));return this}};var ik={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},ok={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},rk=Object.keys(ok),lk=ik.xmlns,ns=Fh(Ho,Ro),sk=Ro.prototype;ns.initialize=function(e,t,n,a){return e&&(this._svg=qa(e,0,"svg",lk),this._svg.setAttribute("class","marks"),Ha(e,1),this._root=qa(this._svg,0,"g",lk),Ha(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),sk.initialize.call(this,e,t,n,a)},ns.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),sk.background.apply(this,arguments)},ns.resize=function(e,t,n){return sk.resize.call(this,e,t,n),this._svg&&(this._svg.setAttribute("width",this._width),this._svg.setAttribute("height",this._height),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},ns.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width,height:this._height,viewBox:"0 0 "+this._width+" "+this._height};for(var t in ik)e[t]=ik[t];var n=this._bgcolor?Wo("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+qo("rect"):"";return Wo("svg",e)+n+this._svg.innerHTML+qo("svg")},ns._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),Ha(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},ns.updateDefs=function(){var e=this._svg,t=this._defs,n=t.el,a=0,i;for(i in t.gradient)n||(t.el=n=qa(e,0,"defs",lk)),Yo(n,t.gradient[i],a++);for(i in t.clipping)n||(t.el=n=qa(e,0,"defs",lk)),Vo(n,t.clipping[i],a++);n&&(0==a?(e.removeChild(n),t.el=null):Ha(n,a))},ns._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},ns.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},ns.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},ns._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t=++this._dirtyID,a,r,l,s,d,i,n;for(d=0,i=e.length;d<i;++d){if(a=e[d],r=a.mark,r.marktype!==l&&(l=r.marktype,s=jT[l]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,r.dirty=t,Go(r.group,t)),a.exit){s.nested&&r.items.length?(n=r.items[0],n._svg&&this._update(s,n._svg,n)):a._svg&&(n=a._svg.parentNode,n&&n.removeChild(a._svg)),a._svg=null;continue}a=s.nested?r.items[0]:a,a._update===t||(a._svg&&a._svg.ownerSVGElement?this._update(s,a._svg,a):(this._dirtyAll=!1,Go(a,t)),a._update=t)}return!this._dirtyAll},ns.draw=function(e,t,n){function a(e){var t=o.isDirty(e),n=Xo(e,i,d,r.tag);t&&(o._update(r,n,e),s&&Zo(o,n,e)),d=n,++p}if(!this.isDirty(t))return t._svg;var o=this,r=jT[t.marktype],l=!1===t.interactive?"none":null,s="g"===r.tag,d=null,p=0,i;return i=Xo(t,e,n,"g"),i.setAttribute("class",Ya(t)),!s&&l&&i.style.setProperty("pointer-events",l),t.clip&&i.setAttribute("clip-path",kT(o,t,t.group)),r.nested?t.items.length&&a(t.items[0]):to(t,a),Ha(i,p),i};var dk=null,pk=null,ck={group:function(e,t,n){pk=t.__values__,dk=t.childNodes[1],e.foreground(Ko,n,this),dk=t.childNodes[0],e.background(Ko,n,this);var a=!1===n.mark.interactive?"none":null;a!==pk.events&&(dk.style.setProperty("pointer-events",a),pk.events=a)},text:function(e,t,n){var a=To(n);a!==pk.text&&(t.textContent=a,pk.text=a),a=Eo(n),a!==pk.font&&(t.style.setProperty("font",a),pk.font=a)}};ns._update=function(e,t,n){dk=t,pk=t.__values__,e.attr(Ko,n,this);var a=ck[e.type];a&&a.call(this,e,t,n),this.style(dk,n)},ns.style=function(e,t){if(null!=t){var a,i,n,o,r;for(a=0,i=rk.length;a<i;++a)n=rk[a],r=t[n],r===pk[n]||(o=ok[n],null==r?"fill"===o?e.style.setProperty(o,"none"):e.style.removeProperty(o):(r.id&&(this._defs.gradient[r.id]=r,r="url("+Jo()+"#"+r.id+")"),e.style.setProperty(o,r+"")),pk[n]=r)}};var uk=Fh(Qo,Ro),fk=Ro.prototype;uk.resize=function(e,n,a){fk.resize.call(this,e,n,a);var i=this._origin,o=this._text,t={class:"marks",width:this._width,height:this._height,viewBox:"0 0 "+this._width+" "+this._height};for(var r in ik)t[r]=ik[r];return o.head=Wo("svg",t),o.bg=this._bgcolor?Wo("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+qo("rect"):"",o.root=Wo("g",{transform:"translate("+i+")"}),o.foot=qo("g")+qo("svg"),this},uk.background=function(){var e=fk.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin),e},uk.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},uk._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},uk.buildDefs=function(){var e=this._defs,t="",n,a,i,o;for(a in e.gradient){for(i=e.gradient[a],o=i.stops,t+=Wo("linearGradient",{id:a,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2}),n=0;n<o.length;++n)t+=Wo("stop",{offset:o[n].offset,"stop-color":o[n].color})+qo("stop");t+=qo("linearGradient")}for(a in e.clipping)i=e.clipping[a],t+=Wo("clipPath",{id:a}),t+=Wo("rect",{x:0,y:0,width:i.width,height:i.height})+qo("rect"),t+=qo("clipPath");return 0<t.length?Wo("defs")+t+qo("defs"):""};var mk;uk.attributes=function(e,t){return mk={},e(er,t,this),mk},uk.href=function(e){var t=this,n=e.href,a;if(n){if(a=t._hrefs&&t._hrefs[n])return a;t.sanitizeURL(n).then(function(e){e["xlink:href"]=e.href,e.href=null,(t._hrefs||(t._hrefs={}))[n]=e})}return null},uk.mark=function(e){function t(t){var s=n.href(t);s&&(r+=Wo("a",s)),l="g"===i?null:tr(t,e,i,o),r+=Wo(i,n.attributes(a.attr,t),l),"text"===i?r+=nr(To(t)):"g"===i&&(r+=Wo("path",n.attributes(a.background,t),tr(t,e,"bgrect",o))+qo("path"),r+=Wo("g",n.attributes(a.foreground,t))+n.markGroup(t)+qo("g")),r+=qo(i),s&&(r+=qo("a"))}var n=this,a=jT[e.marktype],i=a.tag,o=this._defs,r="",l;return"g"!==i&&!1===e.interactive&&(l="style=\"pointer-events: none;\""),r+=Wo("g",{class:Ya(e),"clip-path":e.clip?kT(n,e,e.group):null},l),a.nested?e.items&&e.items.length&&t(e.items[0]):to(e,t),r+qo("g")},uk.markGroup=function(e){var t=this,n="";return to(e,function(e){n+=t.mark(e)}),n};var gk="canvas",_k="png",yk="svg",hk="none",bk={Canvas:gk,PNG:_k,SVG:yk,None:hk},xk={};xk[gk]=xk[_k]={renderer:Bo,headless:Bo,handler:Io},xk[yk]={renderer:Ho,headless:Qo,handler:Uo},xk[hk]={};var vk=1e-9,Sk=Fh(lr,bn),Tk=new za;Sk.transform=function(e,t){var n=t.dataflow,a=e.mark,i=a.marktype,o=jT[i],r=o.bound,l=a.clip,s=a.bounds,d;return o.nested?(a.items.length&&n.dirty(a.items[0]),s=sr(a,r),a.items.forEach(function(e){e.bounds.clear().union(s)})):"group"===i||e.modified()?(t.visit(t.MOD,function(e){n.dirty(e)}),s.clear(),a.items.forEach(function(e){s.union(sr(e,r))})):(d=t.changed(t.REM),t.visit(t.ADD,function(e){s.union(sr(e,r))}),t.visit(t.MOD,function(e){d=d||s.alignsWith(e.bounds),n.dirty(e),s.union(sr(e,r))}),d&&!l&&(s.clear(),a.items.forEach(function(e){s.union(e.bounds)}))),l&&s.intersect(Tk.set(0,0,a.group.width,a.group.height)),t.modifies("bounds")};var kk=":vega_identifier:";dr.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};var Ek=Fh(dr,bn);Ek.transform=function(e,t){var n=pr(t.dataflow),a=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++a)}),n.set(this.value=a),t};var Nk=Fh(cr,bn);Nk.transform=function(e,t){var n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,ur(e),e.index),n.group.context=e.context,!e.context.group&&(e.context.group=n.group),n.source=this,this.value=n);var a="group"===n.marktype?Ua:ja;return t.visit(t.ADD,function(e){a.call(e,n)}),n.items=t.source,t};var Lk="top",Ak="left",wk="right",Ck="bottom",Ok=Fh(fr,bn),Dk={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&mr(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};Ok.transform=function(e,t){var n=Dk[e.method]||Dk.parity,a=t.materialize(t.SOURCE).source;if(a){e.sort&&(a=a.slice().sort(e.sort)),"greedy"===e.method&&(a=a.filter(_r)),a.forEach(function(e){e.opacity=1});var i=a;if(3<=i.length&&gr(i)){t=t.reflow(e.modified()).modifies("opacity");do i=n(i);while(3<=i.length&&gr(i));3>i.length&&!Nh(a).opacity&&(1<i.length&&(Nh(i).opacity=0),Nh(a).opacity=1)}if(e.boundScale){var o=yr(e.boundScale,e.boundOrient,e.boundTolerance);a.forEach(function(e){o(e)||(e.opacity=0)})}return t}};var Pk=Fh(hr,bn);Pk.transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var a=t.source&&t.source[0];a&&(a.mark.zdirty=!0)}};var Rk="axis",Ik="legend",Mk="row-header",Fk="row-footer",Bk="row-title",zk="column-header",jk="column-footer",Uk="column-title",$k="fit",Wk="pad",qk="none",Hk="padding",Yk="axis",Vk="title",Gk="frame",Zk="legend",Xk="scope",Kk="row-header",Jk="row-footer",Qk="column-header",eE="column-footer",tE=0.5,nE=new za,aE=Fh(Cr,bn);aE.transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&Lr(n,t,e.layout),Or(n,t,e)}),t};var iE=Object.freeze({bound:lr,identifier:dr,mark:cr,overlap:fr,render:hr,viewlayout:Cr}),oE="log",rE="pow",lE="sqrt",sE="band",dE="point",pE="linear",cE="ordinal",uE="quantile",fE="quantize",mE="threshold",gE="bin-ordinal",_E="sequential",yE=function(e){return function(n){var a=n[0],i=n[1],o;return i<a&&(o=a,a=i,i=o),[e.invert(a),e.invert(i)]}},hE=function(e){return function(a){var o=e.range(),r=a[0],l=a[1],s=-1,d,p,t,i;for(l<r&&(p=r,r=l,l=p),t=0,i=o.length;t<i;++t)o[t]>=r&&o[t]<=l&&(0>s&&(s=t),d=t);if(!(0>s))return r=e.invertExtent(o[s]),l=e.invertExtent(o[d]),[void 0===r[0]?r[1]:r[0],void 0===l[1]?l[0]:l[1]]}},bE=function(e,t,n){var a=e-t+2*n;return e?0<a?a:1:0},xE=Array.prototype,vE=xE.map,SE=xE.slice,TE={name:"implicit"},kE=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e},EE=0.7,NE=1/EE,LE=/^#([0-9a-f]{3})$/,AE=/^#([0-9a-f]{6})$/,wE=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,CE=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,OE=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,DE=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,PE=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,RE=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,IE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kE(Ur,$r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),kE(Vr,Yr,jr(Ur,{brighter:function(e){return e=null==e?NE:g(NE,e),new Vr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?EE:g(EE,e),new Vr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var e=this.opacity;return e=isNaN(e)?1:N(0,S(1,e)),(1===e?"rgb(":"rgba(")+N(0,S(255,l(this.r)||0))+", "+N(0,S(255,l(this.g)||0))+", "+N(0,S(255,l(this.b)||0))+(1===e?")":", "+e+")")}})),kE(Kr,Xr,jr(Ur,{brighter:function(e){return e=null==e?NE:g(NE,e),new Kr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?EE:g(EE,e),new Kr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(0>this.h),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(0.5>n?n:1-n)*t,i=2*n-a;return new Vr(Jr(240<=e?e-240:e+120,i,a),Jr(e,i,a),Jr(120>e?e+240:e-120,i,a),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var ME=o/180,FE=180/o,BE=18,Kn=0.95047,Xn=1,Yn=1.08883,Zn=4/29,zE=6/29,jE=3*zE*zE,UE=zE*zE*zE;kE(tl,el,jr(Ur,{brighter:function(e){return new tl(this.l+BE*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new tl(this.l-BE*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=Xn*al(e),t=Kn*al(t),n=Yn*al(n),new Vr(il(3.2404542*t-1.5371385*e-0.4985314*n),il(-0.969266*t+1.8760108*e+0.041556*n),il(0.0556434*t-0.2040259*e+1.0572252*n),this.opacity)}})),kE(sl,ll,jr(Ur,{brighter:function(e){return new sl(this.h,this.c,this.l+BE*(null==e?1:e),this.opacity)},darker:function(e){return new sl(this.h,this.c,this.l-BE*(null==e?1:e),this.opacity)},rgb:function(){return Qr(this).rgb()}}));var $E=-0.14861,A=+1.78277,B=-0.29227,C=-0.90649,D=+1.97294,WE=D*C,qE=D*A,HE=A*B-C*$E;kE(cl,pl,jr(Ur,{brighter:function(e){return e=null==e?NE:g(NE,e),new cl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?EE:g(EE,e),new cl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*ME,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),a=c(e),i=s(e);return new Vr(255*(t+n*($E*a+A*i)),255*(t+n*(B*a+C*i)),255*(t+n*(D*a)),this.opacity)}}));var YE=function(e){var a=e.length-1;return function(n){var t=0>=n?n=0:1<=n?(n=1,a-1):E(n*a),i=e[t],o=e[t+1],r=0<t?e[t-1]:2*i-o,l=t<a-1?e[t+2]:2*o-i;return ul((n-t/a)*a,r,i,o,l)}},VE=function(e){var a=e.length;return function(n){var t=E((0>(n%=1)?++n:n)*a),i=e[(t+a-1)%a],o=e[t%a],r=e[(t+1)%a],l=e[(t+2)%a];return ul((n-t/a)*a,i,o,r,l)}},GE=function(e){return function(){return e}},ZE=function e(t){function n(e,t){var n=a((e=Yr(e)).r,(t=Yr(t)).r),i=a(e.g,t.g),o=a(e.b,t.b),r=yl(e.opacity,t.opacity);return function(a){return e.r=n(a),e.g=i(a),e.b=o(a),e.opacity=r(a),e+""}}var a=_l(t);return n.gamma=e,n}(1),XE=hl(YE),KE=hl(VE),JE=function(e,t){var n=t?t.length:0,a=e?S(n,e.length):0,o=Array(a),r=Array(n),l;for(l=0;l<a;++l)o[l]=oN(e[l],t[l]);for(;l<n;++l)r[l]=t[l];return function(e){for(l=0;l<a;++l)r[l]=o[l](e);return r}},QE=function(e,n){var i=new Date;return e=+e,n-=e,function(a){return i.setTime(e+n*a),i}},eN=function(e,n){return e=+e,n-=e,function(a){return e+n*a}},tN=function(e,t){var n={},i={},o;for(o in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)o in e?n[o]=oN(e[o],t[o]):i[o]=t[o];return function(e){for(o in n)i[o]=n[o](e);return i}},nN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aN=new RegExp(nN.source,"g"),iN=function(e,n){var t=nN.lastIndex=aN.lastIndex=0,a=-1,r=[],l=[],o,s,d;for(e+="",n+="";(o=nN.exec(e))&&(s=aN.exec(n));)(d=s.index)>t&&(d=n.slice(t,d),r[a]?r[a]+=d:r[++a]=d),(o=o[0])===(s=s[0])?r[a]?r[a]+=s:r[++a]=s:(r[++a]=null,l.push({i:a,x:eN(o,s)})),t=aN.lastIndex;return t<n.length&&(d=n.slice(t),r[a]?r[a]+=d:r[++a]=d),2>r.length?l[0]?xl(l[0].x):bl(n):(n=l.length,function(e){for(var t=0,a;t<n;++t)r[(a=l[t]).i]=a.x(e);return r.join("")})},oN=function(e,n){var a=typeof n,t;return null==n||"boolean"==a?GE(n):("number"==a?eN:"string"==a?(t=$r(n))?(n=t,ZE):iN:n instanceof $r?ZE:n instanceof Date?QE:Array.isArray(n)?JE:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?tN:eN)(e,n)},rN=function(e,n){return e=+e,n-=e,function(a){return l(e+n*a)}},lN=180/o,sN={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},dN=function(t,i,o,r,l,s){var d,p,c;return(d=u(t*t+i*i))&&(t/=d,i/=d),(c=t*o+i*r)&&(o-=t*c,r-=i*c),(p=u(o*o+r*r))&&(o/=p,r/=p,c/=p),t*r<i*o&&(t=-t,i=-i,c=-c,d=-d),{translateX:l,translateY:s,rotate:nh(i,t)*lN,skewX:n(c)*lN,scaleX:d,scaleY:p}},pN=vl(function(e){return"none"===e?sN:(re||(re=document.createElement("DIV"),DN=document.documentElement,PN=document.defaultView),re.style.transform=e,e=PN.getComputedStyle(DN.appendChild(re),null).getPropertyValue("transform"),DN.removeChild(re),e=e.slice(7,-1).split(","),dN(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),cN=vl(function(e){return null==e?sN:(RN||(RN=document.createElementNS("http://www.w3.org/2000/svg","g")),RN.setAttribute("transform",e),!(e=RN.transform.baseVal.consolidate()))?sN:(e=e.matrix,dN(e.a,e.b,e.c,e.d,e.e,e.f))},", ",")",")"),uN=ih,fN=2,mN=4,gN=El(gl),_N=El(yl),yN=Nl(gl),hN=Nl(yl),bN=Ll(gl),xN=Ll(yl),vN=Object.freeze({interpolate:oN,interpolateArray:JE,interpolateBasis:YE,interpolateBasisClosed:VE,interpolateDate:QE,interpolateNumber:eN,interpolateObject:tN,interpolateRound:rN,interpolateString:iN,interpolateTransformCss:pN,interpolateTransformSvg:cN,interpolateZoom:function(e,t){var n=e[0],o=e[1],r=e[2],l=t[0],s=t[1],d=t[2],p=l-n,c=s-o,m=p*p+c*c,g,i;if(m<1e-12)i=f(d/r)/uN,g=function(e){return[n+e*p,o+e*c,r*a(uN*e*i)]};else{var _=u(m),y=(d*d-r*r+mN*m)/(2*r*fN*_),h=(d*d-r*r-mN*m)/(2*d*fN*_),b=f(u(y*y+1)-y),x=f(u(h*h+1)-h);i=(x-b)/uN,g=function(e){var t=e*i,a=Sl(b),l=r/(fN*_)*(a*kl(uN*t+b)-Tl(b));return[n+l*p,o+l*c,r*a/Sl(uN*t+b)]}}return g.duration=1e3*i,g},interpolateRgb:ZE,interpolateRgbBasis:XE,interpolateRgbBasisClosed:KE,interpolateHsl:gN,interpolateHslLong:_N,interpolateLab:function(e,t){var n=yl((e=el(e)).l,(t=el(t)).l),i=yl(e.a,t.a),a=yl(e.b,t.b),o=yl(e.opacity,t.opacity);return function(r){return e.l=n(r),e.a=i(r),e.b=a(r),e.opacity=o(r),e+""}},interpolateHcl:yN,interpolateHclLong:hN,interpolateCubehelix:bN,interpolateCubehelixLong:xN,quantize:function(e,t){for(var n=Array(t),a=0;a<t;++a)n[a]=e(a/(t-1));return n}}),SN=function(e){return function(){return e}},TN=function(e){return+e},kN=[0,1],EN=function(e,t){if(0>(a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e")))return null;var n=e.slice(0,a),a;return[1<n.length?n[0]+n.slice(2):n,+e.slice(a+1)]},NN=function(e){return e=EN(T(e)),e?e[1]:NaN},LN=function(e,n){return function(a,o){for(var r=a.length,i=[],t=0,l=e[0],s=0;0<r&&0<l&&(s+l+1>o&&(l=N(1,o-s)),i.push(a.substring(r-=l,r+l)),!((s+=l+1)>o));)l=e[t=(t+1)%e.length];return i.reverse().join(n)}},AN=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},wN=function(e,t){var n=EN(e,t);if(!n)return e+"";var a=n[0],i=n[1];return 0>i?"0."+Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+Array(i-a.length+2).join("0")},CN={"":function(e,t){e=e.toPrecision(t);out:for(var a=e.length,n=1,i=-1,o;n<a;++n)switch(e[n]){case".":i=o=n;break;case"0":0===i&&(i=n),o=n;break;case"e":break out;default:0<i&&(i=0);}return 0<i?e.slice(0,i)+e.slice(o+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return l(e).toString(2)},c:function(e){return e+""},d:function(e){return l(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return l(e).toString(8)},p:function(e,t){return wN(100*e,t)},r:wN,s:function(e,t){var a=EN(e,t);if(!a)return e+"";var o=a[0],r=a[1],l=r-(IN=3*N(-8,S(8,E(r/3))))+1,i=o.length;return l===i?o:l>i?o+Array(l-i+1).join("0"):0<l?o.slice(0,l)+"."+o.slice(l):"0."+Array(1-l).join("0")+EN(e,N(0,t+l-1))[0]},X:function(e){return l(e).toString(16).toUpperCase()},x:function(e){return l(e).toString(16)}},ON=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,re,DN,PN,RN,IN;Il.prototype=Ml.prototype,Ml.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":N(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+N(0,0|this.precision))+this.type};var MN=function(e){return e},FN=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],BN=function(e){function t(e){function t(e){var t=y,p=h,v,i,n;if("c"===_)p=b(e)+p,e="";else{e=+e;var c=0>e;if(e=b(T(e),g),c&&0==+e&&(c=!1),t=(c?"("===d?d:"-":"-"===d||"("===d?"":d)+t,p=p+("s"===_?FN[8+IN/3]:"")+(c&&"("===d?")":""),x)for(v=-1,i=e.length;++v<i;)if(n=e.charCodeAt(v),48>n||57<n){p=(46===n?o+e.slice(v+1):e.slice(v))+p,e=e.slice(0,v);break}}m&&!u&&(e=a(e,Infinity));var S=t.length+e.length+p.length,k=S<f?Array(f-S+1).join(l):"";switch(m&&u&&(e=a(k+e,k.length?f-p.length:Infinity),k=""),s){case"<":e=t+e+p+k;break;case"=":e=t+k+e+p;break;case"^":e=k.slice(0,S=k.length>>1)+t+e+p+k.slice(S);break;default:e=k+t+e+p;}return r(e)}e=Il(e);var l=e.fill,s=e.align,d=e.sign,p=e.symbol,u=e.zero,f=e.width,m=e.comma,g=e.precision,_=e.type,y="$"===p?n[0]:"#"===p&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",h="$"===p?n[1]:/[%p]/.test(_)?i:"",b=CN[_],x=!_||/[defgprs%]/.test(_);return g=null==g?_?6:12:/[gprs]/.test(_)?N(1,S(21,g)):N(0,S(20,g)),t.toString=function(){return e+""},t}var a=e.grouping&&e.thousands?LN(e.grouping,e.thousands):MN,n=e.currency,o=e.decimal,r=e.numerals?AN(e.numerals):MN,i=e.percent||"%";return{format:t,formatPrefix:function(n,a){var i=t((n=Il(n),n.type="f",n)),o=3*N(-8,S(8,E(NN(a)/3))),r=g(10,-o),l=FN[8+o/3];return function(e){return i(r*e)+l}}}},zN,jN,UN;Fl({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var $N=function(e){return N(0,-NN(T(e)))},WN=function(e,t){return N(0,3*N(-8,S(8,E(NN(t)/3)))-NN(T(e)))},qN=function(e,t){return e=T(e),t=T(t)-e,N(0,NN(t)-NN(e))+1},HN=function(e,t,n){var a=e[0],i=e[e.length-1],o=Pn(a,i,null==t?10:t),r;switch(n=Il(null==n?",f":n),n.type){case"s":{var l=N(T(a),T(i));return null!=n.precision||isNaN(r=WN(o,l))||(n.precision=r),UN(n,l)}case"":case"e":case"g":case"p":case"r":{null!=n.precision||isNaN(r=qN(o,N(T(a),T(i))))||(n.precision=r-("e"===n.type));break}case"f":case"%":{null!=n.precision||isNaN(r=$N(o))||(n.precision=r-2*("%"===n.type));break}}return jN(n)},YN=function(e,n){e=e.slice();var a=0,i=e.length-1,o=e[a],r=e[i],l;return r<o&&(l=a,a=i,i=l,l=o,o=r,r=l),e[a]=n.floor(o),e[i]=n.ceil(r),e},VN=1e3,GN=60*VN,ZN=60*GN,XN=24*ZN,KN=7*XN,JN=30*XN,QN=365*XN,eL=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})},tL=eL("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),nL=eL("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),aL=eL("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),iL=eL("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");xN(pl(300,0.5,0),pl(-240,0.5,1));var oL=xN(pl(-100,0.75,0.35),pl(80,1.5,0.8)),rL=xN(pl(260,0.75,0.35),pl(80,1.5,0.8)),lL=pl(),sL=as(eL("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),dL=as(eL("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),pL=as(eL("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),cL=as(eL("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),uL=Array.prototype.map,fL=Array.prototype.slice,mL={identity:jl,linear:zl,log:Vl,ordinal:zr,pow:Zl,sqrt:function(){return Zl().exponent(0.5)},quantile:Xl,quantize:Kl,threshold:Jl,time:function(){return ts(ax,nx,Gb,Vb,Yb,Hb,qb,Bb,vx).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return ts(gx,mx,lx,rx,ox,ix,qb,Bb,Tx).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:is,point:function(){return os(is().paddingInner(1))},sequential:ds,"bin-linear":ls,"bin-ordinal":ss};for(var gL in mL)cs(gL,mL[gL]);var _L=us("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),yL=us("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),hL=[,,,].concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(us),bL=function(e){for(var t=0|e.length/6,n=Array(t),a=0;a<t;)n[a]="#"+e.slice(6*a,6*++a);return n},xL=bL("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),vL=bL("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),SL=bL("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),TL=bL("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),kL=bL("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),EL=bL("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),NL=bL("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),LL=bL("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),AL=function(e){return XE(e[e.length-1])},wL=[,,,].concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(bL),CL=AL(wL),OL=[,,,].concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(bL),DL=AL(OL),PL=[,,,].concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(bL),RL=AL(PL),IL=[,,,].concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(bL),ML=AL(IL),FL=[,,,].concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(bL),BL=AL(FL),zL=[,,,].concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(bL),jL=AL(zL),UL=[,,,].concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(bL),$L=AL(UL),WL=[,,,].concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(bL),qL=AL(WL),HL=[,,,].concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(bL),YL=AL(HL),VL=[,,,].concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(bL),GL=AL(VL),ZL=[,,,].concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(bL),XL=AL(ZL),KL=[,,,].concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(bL),JL=AL(KL),QL=[,,,].concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(bL),eA=AL(QL),tA=[,,,].concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(bL),nA=AL(tA),aA=[,,,].concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(bL),iA=AL(aA),oA=[,,,].concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(bL),rA=AL(oA),lA=[,,,].concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(bL),sA=AL(lA),dA=[,,,].concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(bL),pA=AL(dA),cA=[,,,].concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(bL),uA=AL(cA),fA=[,,,].concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(bL),mA=AL(fA),gA=[,,,].concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(bL),_A=AL(gA),yA=[,,,].concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(bL),hA=AL(yA),bA=[,,,].concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(bL),xA=AL(bA),vA=[,,,].concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(bL),SA=AL(vA),TA=[,,,].concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(bL),kA=AL(TA),EA=[,,,].concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(bL),NA=AL(EA),LA=[,,,].concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(bL),AA=AL(LA),wA=Object.freeze({schemeAccent:xL,schemeDark2:vL,schemePaired:SL,schemePastel1:TL,schemePastel2:kL,schemeSet1:EL,schemeSet2:NL,schemeSet3:LL,interpolateBrBG:CL,schemeBrBG:wL,interpolatePRGn:DL,schemePRGn:OL,interpolatePiYG:RL,schemePiYG:PL,interpolatePuOr:ML,schemePuOr:IL,interpolateRdBu:BL,schemeRdBu:FL,interpolateRdGy:jL,schemeRdGy:zL,interpolateRdYlBu:$L,schemeRdYlBu:UL,interpolateRdYlGn:qL,schemeRdYlGn:WL,interpolateSpectral:YL,schemeSpectral:HL,interpolateBuGn:GL,schemeBuGn:VL,interpolateBuPu:XL,schemeBuPu:ZL,interpolateGnBu:JL,schemeGnBu:KL,interpolateOrRd:eA,schemeOrRd:QL,interpolatePuBuGn:nA,schemePuBuGn:tA,interpolatePuBu:iA,schemePuBu:aA,interpolatePuRd:rA,schemePuRd:oA,interpolateRdPu:sA,schemeRdPu:lA,interpolateYlGnBu:pA,schemeYlGnBu:dA,interpolateYlGn:uA,schemeYlGn:cA,interpolateYlOrBr:mA,schemeYlOrBr:fA,interpolateYlOrRd:_A,schemeYlOrRd:gA,interpolateBlues:hA,schemeBlues:yA,interpolateGreens:xA,schemeGreens:bA,interpolateGreys:SA,schemeGreys:vA,interpolatePurples:kA,schemePurples:TA,interpolateReds:NA,schemeReds:EA,interpolateOranges:AA,schemeOranges:LA}),CA={blueorange:hL},OA={category10:tL,category20:iL,category20b:nL,category20c:aL,accent:xL,dark2:vL,paired:SL,pastel1:TL,pastel2:kL,set1:EL,set2:NL,set3:LL,tableau10:_L,tableau20:yL,viridis:sL,magma:dL,inferno:pL,plasma:cL,blueorange:XE(Nh(hL))};fs("blues","Blues"),fs("greens","Greens"),fs("greys","Greys"),fs("purples","Purples"),fs("reds","Reds"),fs("oranges","Oranges"),fs("brownbluegreen","BrBG"),fs("purplegreen","PRGn"),fs("pinkyellowgreen","PiYG"),fs("purpleorange","PuOr"),fs("redblue","RdBu"),fs("redgrey","RdGy"),fs("redyellowblue","RdYlBu"),fs("redyellowgreen","RdYlGn"),fs("spectral","Spectral"),fs("bluegreen","BuGn"),fs("bluepurple","BuPu"),fs("greenblue","GnBu"),fs("orangered","OrRd"),fs("purplebluegreen","PuBuGn"),fs("purpleblue","PuBu"),fs("purplered","PuRd"),fs("redpurple","RdPu"),fs("yellowgreenblue","YlGnBu"),fs("yellowgreen","YlGn"),fs("yelloworangebrown","YlOrBr"),fs("yelloworangered","YlOrRd");var DA=function(e,t){if(1<arguments.length)return OA[e]=t,this;var n=e.split("-");return e=n[0],n=+n[1]+1,n&&CA.hasOwnProperty(e)?CA[e][n-1]:!n&&OA.hasOwnProperty(e)?OA[e]:void 0},PA={millisecond:Bb,second:qb,minute:Hb,hour:Yb,day:Vb,week:Gb,month:nx,year:ax},RA={millisecond:Bb,second:qb,minute:ix,hour:ox,day:rx,week:lx,month:mx,year:gx},IA=Fh(ws,bn);IA.transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=this.value,i=e.scale,o=null==e.count?e.values?e.values.length:10:vs(i,e.count),r=e.format||ks(i,o,e.formatSpecifier),l=e.values?Ss(i,e.values,o):Ts(i,o);return a&&(n.rem=a),a=l.map(function(e,t){return Z({index:t/(l.length-1),value:e,label:r(e)})}),e.extra&&a.push(Z({index:-1,extra:{value:a[0].value},label:""})),n.source=a,n.add=a,this.value=a,n};var MA=Fh(Cs,bn);MA.transform=function(e,t){var n=t.dataflow,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Os,o=e.key||V,r=this.value;return dh(a.encode)&&(a.encode=null),r&&(e.modified("key")||t.modified(o))&&lh("DataJoin does not support modified key function or fields."),r||(t=t.addAll(),this.value=r=Mh().test(Ds),r.lookup=function(e){return r.get(o(e))}),t.visit(t.ADD,function(e){var t=o(e),n=r.get(t);n?n.exit?(r.empty--,a.add.push(n)):a.mod.push(n):(r.set(t,n=i(e)),a.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=o(e),n=r.get(t);n&&(n.datum=e,a.mod.push(n))}),t.visit(t.REM,function(e){var t=o(e),n=r.get(t);e!==n.datum||n.exit||(a.rem.push(n),n.exit=!0,++r.empty)}),t.changed(t.ADD_MOD)&&a.modifies("datum"),e.clean&&r.empty>n.cleanThreshold&&n.runAfter(r.clean),a};var FA=Fh(Ps,bn);FA.transform=function(e,t){var n=t.fork(t.ADD_REM),a=e.encoders,i=t.encode;if(dh(i))if(n.changed()||i.every(function(t){return a[t]}))i=i[0];else return t.StopPropagation;var o="enter"===i,r=a.update||bh,l=a.enter||bh,s=a.exit||bh,d=(i&&!o?a[i]:r)||bh;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(n){l(n,e),r(n,e),d!==bh&&d!==r&&d(n,e)}),n.modifies(l.output),n.modifies(r.output),d!==bh&&d!==r&&n.modifies(d.output)),t.changed(t.REM)&&s!==bh&&(t.visit(t.REM,function(n){s(n,e)}),n.modifies(s.output)),o||d!==bh){var p=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(p,function(a){var t=l(a,e);(d(a,e)||t)&&n.mod.push(a)}),n.mod.length&&n.modifies(l.output)):t.visit(p,function(a){d(a,e)&&n.mod.push(a)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation};var BA={};BA[uE]=function(e){var t=[-Infinity].concat(e.quantiles());return t.max=+Infinity,t},BA[fE]=function(e){var t=e.domain(),a=t[0],o=Nh(t),r=e.range().length,n=Array(r),l=0;for(n[0]=-Infinity;++l<r;)n[l]=(l*o-(l-r)*a)/r;return n.max=+Infinity,n},BA[mE]=function(e){var t=[-Infinity].concat(e.domain());return t.max=+Infinity,t},BA["bin-linear"]=Is,BA[gE]=Is;var zA=Fh(js,bn);zA.transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=0,i=this.value,o="gradient"===e.type,r=e.scale,s=null==e.count?5:vs(r,e.count),d=e.format||ks(r,s,e.formatSpecifier),p=e.values||Rs(r,s,o);if(d=Ms(r,d),i&&(n.rem=i),o)var c=e.values?r.domain():p,u=gs(r,c[0],Nh(c));else{var f=e.size,m;wh(f)?(!e.values&&0===r(p[0])&&(p=p.slice(1)),m=p.reduce(function(t,n){return N(t,f(n,e))},0)):f=Oh(m=f||8)}return i=p.map(function(n,i){var r=Z({index:i,label:d(n,i,p),value:n});return o?r.perc=u(n):(r.offset=m,r.size=f(n,e),r.total=l(a),a+=r.size),r}),n.source=i,n.add=i,this.value=i,n};var jA=Mh({line:Ys,"line-radial":function(e,t,n,a){return Ys(t*c(e),t*s(e),a*c(n),a*s(n))},arc:Vs,"arc-radial":function(e,t,n,a){return Vs(t*c(e),t*s(e),a*c(n),a*s(n))},curve:Gs,"curve-radial":function(e,t,n,a){return Gs(t*c(e),t*s(e),a*c(n),a*s(n))},"orthogonal-horizontal":function(e,t,n,a){return"M"+e+","+t+"V"+a+"H"+n},"orthogonal-vertical":function(e,t,n,a){return"M"+e+","+t+"H"+n+"V"+a},"orthogonal-radial":function(e,t,n,a){var i=c(e),r=s(e),l=c(n),d=s(n),p=T(n-e)>o?n<=e:n>e;return"M"+t*i+","+t*r+"A"+t+","+t+" 0 0,"+(p?1:0)+" "+t*l+","+t*d+"L"+a*l+","+a*d},"diagonal-horizontal":function(e,t,n,a){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+a+" "+n+","+a},"diagonal-vertical":function(e,t,n,a){var i=(t+a)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+a},"diagonal-radial":function(e,t,n,a){var i=c(e),o=s(e),r=c(n),l=s(n),d=(t+a)/2;return"M"+t*i+","+t*o+"C"+d*i+","+d*o+" "+d*r+","+d*l+" "+a*r+","+a*l}});Hs.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]};var UA=Fh(Hs,bn);UA.transform=function(e,t){var n=e.sourceX||Us,a=e.sourceY||$s,i=e.targetX||Ws,o=e.targetY||qs,r=e.as||"path",l=e.orient||"vertical",s=e.shape||"line",d=jA.get(s+"-"+l)||jA.get(s);return d||lh("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[r]=d(n(e),a(e),i(e),o(e))}),t.reflow(e.modified()).modifies(r)},Zs.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};var $A=Fh(Zs,bn);$A.transform=function(e,r){var l=e.as||["startAngle","endAngle"],s=l[0],d=l[1],p=e.field||yh,c=e.startAngle||0,u=null==e.endAngle?2*o:e.endAngle,f=r.source,m=f.map(p),g=m.length,n=c,a=(u-c)/gv(m),_=ov(g),y,i,t;for(e.sort&&_.sort(function(e,t){return m[e]-m[t]}),y=0;y<g;++y)t=m[_[y]],i=f[_[y]],i[s]=n,i[d]=n+=t*a;return this.value=m,r.reflow(e.modified()).modifies(l)};var WA=5,qA=Zh([pE,rE,lE]),HA=Zh([pE,oE,rE,lE,"time","utc"]),YA=Zh(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]),VA=Fh(Xs,bn);VA.transform=function(e,t){var n=t.dataflow,a=this.value,i;for(i in(!a||e.modified("type"))&&(this.value=a=cs((e.type||pE).toLowerCase())()),e)if(!YA[i]){if("padding"===i&&HA[a.type])continue;wh(a[i])?a[i](e[i]):n.warn("Unsupported scale property: "+i)}return ed(a,e,Ks(a,e,n)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var GA=Fh(ld,bn);GA.transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};sd.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]};var ZA=Fh(sd,bn);ZA.transform=function(e,t){var a=e.as||["y0","y1"],o=a[0],r=a[1],l=e.field||yh,s=e.offset==="center"?dd:e.offset==="normalize"?pd:cd,d,p,i,n;for(d=ud(t.source,e.groupby,e.sort,l),p=0,i=d.length,n=d.max;p<i;++p)s(d[p],n,l,o,r);return t.reflow(e.modified()).modifies(a)};var XA=Object.freeze({axisticks:ws,datajoin:Cs,encode:Ps,legendentries:js,linkpath:Hs,pie:Zs,scale:Xs,sortitems:ld,stack:sd,validTicks:Ss}),KA=Array.prototype,JA=KA.slice,QA=function(e,t){return e-t},ew=function(e){for(var t=0,a=e.length,n=e[a-1][1]*e[0][0]-e[a-1][0]*e[0][1];++t<a;)n+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return n},tw=function(e){return function(){return e}},nw=function(e,t){for(var a=-1,i=t.length,n;++a<i;)if(n=fd(e,t[a]))return n;return 0},aw=function(){},iw=[[],[[[1,1.5],[0.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[0.5,1]]],[[[1,0.5],[1.5,1]]],[[[1,0.5],[0.5,1]],[[1,1.5],[1.5,1]]],[[[1,0.5],[1,1.5]]],[[[1,0.5],[0.5,1]]],[[[0.5,1],[1,0.5]]],[[[1,1.5],[1,0.5]]],[[[0.5,1],[1,1.5]],[[1.5,1],[1,0.5]]],[[[1.5,1],[1,0.5]]],[[[0.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[0.5,1],[1,1.5]]],[]],ow=function(){function e(e){var n=r(e);if(!Array.isArray(n)){var a=iv(e),i=a[0],o=a[1];n=Pn(i,o,n),n=ov(E(i/n)*n,E(o/n)*n,n)}else n=n.slice().sort(QA);var s=n.map(function(n){var a=[],i=[];return t(e,n,function(t){l(t,e,n),0<ew(t)?a.push([t]):i.push(t)}),i.forEach(function(e){for(var t=0,i=a.length,n;t<i;++t)if(-1!==nw((n=a[t])[0],e))return void n.push(e)}),a});return s.map(function(e,t){return{type:"MultiPolygon",value:n[t],coordinates:e}})}function t(e,t,a){function r(e){var t=[e[0][0]+d,e[0][1]+p],i=[e[1][0]+d,e[1][1]+p],o=n(t),r=n(i),c,u;(c=s[o])?(u=l[r])?(delete s[c.end],delete l[u.start],c==u?(c.ring.push(i),a(c.ring)):l[c.start]=s[u.end]={start:c.start,end:u.end,ring:c.ring.concat(u.ring)}):(delete s[c.end],c.ring.push(i),s[c.end=r]=c):(c=l[r])?(u=s[o])?(delete l[c.start],delete s[u.end],c===u?(c.ring.push(i),a(c.ring)):l[u.start]=s[c.end]={start:u.start,end:c.end,ring:u.ring.concat(c.ring)}):(delete l[c.start],c.ring.unshift(t),l[c.start=o]=c):l[o]=s[r]={start:o,end:r,ring:[t,i]}}var l=[],s=[],d,p,c,u,f,m;for(d=p=-1,u=e[0]>=t,iw[u<<1].forEach(r);++d<i-1;)c=u,u=e[d+1]>=t,iw[c|u<<1].forEach(r);for(iw[u<<0].forEach(r);++p<o-1;){for(d=-1,u=e[p*i+i]>=t,f=e[p*i]>=t,iw[u<<1|f<<2].forEach(r);++d<i-1;)c=u,u=e[p*i+i+d+1]>=t,m=f,f=e[p*i+d+1]>=t,iw[c|u<<1|f<<2|m<<3].forEach(r);iw[u|f<<3].forEach(r)}for(d=-1,f=e[p*i]>=t,iw[f<<2].forEach(r);++d<i-1;)m=f,f=e[p*i+d+1]>=t,iw[f<<2|m<<3].forEach(r);iw[f<<3].forEach(r)}function n(e){return 2*e[0]+4*(e[1]*(i+1))}function a(e,t,n){e.forEach(function(e){var a=e[0],r=e[1],l=0|a,s=0|r,d=t[s*i+l],p;0<a&&a<i&&l===a&&(p=t[s*i+l-1],e[0]=a+(n-p)/(d-p)-0.5),0<r&&r<o&&s===r&&(p=t[(s-1)*i+l],e[1]=r+(n-p)/(d-p)-0.5)})}var i=1,o=1,r=pv,l=a;return e.size=function(t){if(!arguments.length)return[i,o];var n=p(t[0]),a=p(t[1]);if(!(0<n)||!(0<a))throw new Error("invalid size");return i=n,o=a,e},e.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:Array.isArray(t)?tw(JA.call(t)):tw(t),e):r},e.smooth=function(t){return arguments.length?(l=t?a:aw,e):l===a},e},rw=function(){function e(e){var a=new Float32Array(o*S),i=new Float32Array(o*S);e.forEach(function(e,t,n){var i=c(e,t,n)+_>>v,r=h(e,t,n)+_>>v;0<=i&&i<o&&0<=r&&r<S&&++a[i+r*o]}),yd({width:o,height:S,data:a},{width:o,height:S,data:i},x>>v),hd({width:o,height:S,data:i},{width:o,height:S,data:a},x>>v),yd({width:o,height:S,data:a},{width:o,height:S,data:i},x>>v),hd({width:o,height:S,data:i},{width:o,height:S,data:a},x>>v),yd({width:o,height:S,data:a},{width:o,height:S,data:i},x>>v),hd({width:o,height:S,data:i},{width:o,height:S,data:a},x>>v);var r=T(a);if(!Array.isArray(r)){var l=uv(a);r=Pn(0,l,r),r=ov(0,E(l/r)*r,r),r.shift()}return ow().thresholds(r).size([o,S])(a).map(t)}function t(e){return e.value*=g(2,-2*v),e.coordinates.forEach(a),e}function a(e){e.forEach(i)}function i(e){e.forEach(s)}function s(e){e[0]=e[0]*g(2,v)-_,e[1]=e[1]*g(2,v)-_}function d(){return _=3*x,o=y+2*_>>v,S=b+2*_>>v,e}var c=bd,h=xd,y=960,b=500,x=20,v=2,_=3*x,o=y+2*_>>v,S=b+2*_>>v,T=tw(20);return e.x=function(t){return arguments.length?(c="function"==typeof t?t:tw(+t),e):c},e.y=function(t){return arguments.length?(h="function"==typeof t?t:tw(+t),e):h},e.size=function(e){if(!arguments.length)return[y,b];var t=p(e[0]),n=p(e[1]);if(!(0<=t)&&!(0<=t))throw new Error("invalid size");return y=t,b=n,d()},e.cellSize=function(e){if(!arguments.length)return 1<<v;if(!(1<=(e=+e)))throw new Error("invalid cell size");return v=E(f(e)/r),d()},e.thresholds=function(t){return arguments.length?(T="function"==typeof t?t:Array.isArray(t)?tw(JA.call(t)):tw(t),e):T},e.bandwidth=function(e){if(!arguments.length)return u(x*(x+1));if(!(0<=(e=+e)))throw new Error("invalid bandwidth");return x=l((u(4*e*e+1)-1)/2),d()},e},lw=["values","size"],sw=["x","y","size","cellSize","bandwidth"];vd.Definition={type:"Contour",metadata:{generates:!0,source:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"number",default:!1},{name:"thresholds",type:"number",array:!0}]};var dw=Fh(vd,bn);dw.transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=e.count||10,i,o,r;return e.values?(i=ow(),o=lw,r=e.values):(i=rw(),o=sw,r=t.materialize(t.SOURCE).source),i.thresholds(e.thresholds||(e.nice?a:Sd(a))),o.forEach(function(t){null!=e[t]&&i[t](e[t])}),this.value&&(n.rem=this.value),this.value=n.source=n.add=i(r).map(Z),n};var pw="FeatureCollection";Td.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};var uw=Fh(Td,bn);uw.transform=function(e,t){var n=this._features,a=this._points,i=e.fields,o=i&&i[0],r=i&&i[1],l=e.geojson,s=t.ADD,d;d=e.modified()||t.changed(t.REM)||t.modified(m(l))||o&&t.modified(m(o))||r&&t.modified(m(r)),(!this.value||d)&&(s=t.SOURCE,this._features=n=[],this._points=a=[]),l&&t.visit(s,function(e){n.push(l(e))}),o&&r&&(t.visit(s,function(e){var t=o(e),n=r(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&a.push([t,n])}),n=n.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:a}})),this.value={type:pw,features:n}};var fw=function(){return new kd};kd.prototype={constructor:kd,reset:function(){this.s=this.t=0},add:function(e){Ed(mw,e,this.t),Ed(this,mw.s,this.s),this.s?this.t+=mw.t:this.s=mw.t},valueOf:function(){return this.s}};var mw=new kd,gw=1e-6,_w=o,yw=_w/2,hw=_w/4,bw=2*_w,xw=180/_w,vw=_w/180,Sw=T,Tw=n,kw=nh,Ew=c,Nw=p,Lw=a,Aw=f,ww=g,Cw=s,Ow=e||function(e){return 0<e?1:0>e?-1:0},Dw=u,Pw=t,Rw={Feature:function(e,t){wd(e.geometry,t)},FeatureCollection:function(e,t){for(var a=e.features,o=-1,i=a.length;++o<i;)wd(a[o].geometry,t)}},Iw={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)e=a[o],t.point(e[0],e[1],e[2])},LineString:function(e,t){Cd(e.coordinates,t,0)},MultiLineString:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)Cd(a[o],t,0)},Polygon:function(e,t){Od(e.coordinates,t)},MultiPolygon:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)Od(a[o],t)},GeometryCollection:function(e,t){for(var a=e.geometries,o=-1,i=a.length;++o<i;)wd(a[o],t)}},Mw=function(e,t){e&&Rw.hasOwnProperty(e.type)?Rw[e.type](e,t):wd(e,t)},Fw=fw(),Bw=fw(),zw=fw(),jw=function(e,t){function n(n,a){return n=e(n,a),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,a){return n=t.invert(n,a),n&&e.invert(n[0],n[1])}),n};zd.invert=zd;var Uw=function(e){function t(t){return t=e(t[0]*vw,t[1]*vw),t[0]*=xw,t[1]*=xw,t}return e=jd(e[0]*vw,e[1]*vw,2<e.length?e[2]*vw:0),t.invert=function(t){return t=e.invert(t[0]*vw,t[1]*vw),t[0]*=xw,t[1]*=xw,t},t},$w=function(){var e=[],t;return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Ad,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Ww=function(e,t){return Sw(e[0]-t[0])<gw&&Sw(e[1]-t[1])<gw},qw=function(e,t,a,o,r){var l=[],s=[],d,i;if(e.forEach(function(e){if(!(0>=(i=e.length-1))){var t=e[0],a=e[i],i,n;if(Ww(t,a)){for(r.lineStart(),d=0;d<i;++d)r.point((t=e[d])[0],t[1]);return void r.lineEnd()}l.push(n=new Yd(t,e,null,!0)),s.push(n.o=new Yd(t,null,n,!1)),l.push(n=new Yd(a,e,null,!1)),s.push(n.o=new Yd(a,null,n,!0))}}),!!l.length){for(s.sort(t),Vd(l),Vd(s),(d=0,i=s.length);d<i;++d)s[d].e=a=!a;for(var n=l[0],p,c;;){for(var u=n,f=!0;u.v;)if((u=u.n)===n)return;p=u.z,r.lineStart();do{if(u.v=u.o.v=!0,u.e){if(f)for(d=0,i=p.length;d<i;++d)r.point((c=p[d])[0],c[1]);else o(u.x,u.n.x,1,r);u=u.n}else{if(f)for(p=u.p.z,d=p.length-1;0<=d;--d)r.point((c=p[d])[0],c[1]);else o(u.x,u.p.x,-1,r);u=u.p}u=u.o,p=u.z,f=!f}while(!u.v);r.lineEnd()}}},Hw=fw(),Yw=function(e,t){var a=t[0],o=t[1],r=[Cw(a),-Ew(a),0],l=0,s=0;Hw.reset();for(var d=0,i=e.length;d<i;++d)if(y=(_=e[d]).length)for(var n=_[y-1],p=n[0],c=n[1]/2+hw,u=Cw(c),f=Ew(c),g=0,_,y;g<y;++g,p=h,u=x,f=v,n=m){var m=_[g],h=m[0],b=m[1]/2+hw,x=Cw(b),v=Ew(b),S=h-p,T=0<=S?1:-1,E=T*S,N=E>_w,A=u*x;if(Hw.add(kw(A*T*Cw(E),f*v+A*Ew(E))),l+=N?S+T*bw:S,N^p>=a^h>=a){var k=Id(Pd(n),Pd(m));Bd(k);var w=Id(r,k);Bd(w);var C=(N^0<=S?-1:1)*Ld(w[2]);(o>C||o===C&&(k[0]||k[1]))&&(s+=N^0<=S?1:-1)}}return(l<-gw||l<gw&&Hw<-gw)^1&s},Vw=function(e,t,n,a){return function(o){function i(t,n){e(t,n)&&o.point(t,n)}function r(e,t){u.point(e,t)}function l(){m.point=r,u.lineStart()}function s(){m.point=i,u.lineEnd()}function d(e,t){b.push([e,t]),g.point(e,t)}function p(){g.lineStart(),b=[]}function c(){d(b[0][0],b[0][1]),g.lineEnd();var e=g.clean(),t=f.result(),a=t.length,r,i,l,s;if(b.pop(),y.push(b),b=null,!!a){if(1&e){if(l=t[0],0<(i=l.length-1)){for(_||(o.polygonStart(),_=!0),o.lineStart(),r=0;r<i;++r)o.point((s=l[r])[0],s[1]);o.lineEnd()}return}1<a&&2&e&&t.push(t.pop().concat(t.shift())),h.push(t.filter(Gd))}}var u=t(o),f=$w(),g=t(f),_=!1,m={point:i,lineStart:l,lineEnd:s,polygonStart:function(){m.point=d,m.lineStart=p,m.lineEnd=c,h=[],y=[]},polygonEnd:function(){m.point=i,m.lineStart=l,m.lineEnd=s,h=fv(h);var e=Yw(y,a);h.length?(!_&&(o.polygonStart(),_=!0),qw(h,Zd,e,n,o)):e&&(!_&&(o.polygonStart(),_=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),h=y=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},y,h,b;return m}},Gw=Vw(function(){return!0},function(e){var t=NaN,n=NaN,a=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,r){var l=0<o?_w:-_w,s=Sw(o-t);Sw(s-_w)<gw?(e.point(t,n=0<(n+r)/2?yw:-yw),e.point(a,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(o,n),i=0):a!==l&&s>=_w&&(Sw(t-a)<gw&&(t-=a*gw),Sw(o-l)<gw&&(o-=l*gw),n=Xd(t,n,o,r),e.point(a,n),e.lineEnd(),e.lineStart(),e.point(l,n),i=0),e.point(t=o,n=r),a=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}},function(e,t,n,a){var i;if(null==e)i=n*yw,a.point(-_w,i),a.point(0,i),a.point(_w,i),a.point(_w,0),a.point(_w,-i),a.point(0,-i),a.point(-_w,-i),a.point(-_w,0),a.point(-_w,i);else if(Sw(e[0]-t[0])>gw){var o=e[0]<t[0]?_w:-_w;i=n*o/2,a.point(-o,i),a.point(0,i),a.point(o,i)}else a.point(t[0],t[1])},[-_w,-yw]),Zw=function(e){function n(e,t){return Ew(e)*Ew(t)>o}function a(e,n,a){var i=Pd(e),r=Pd(n),l=[1,0,0],s=Id(i,r),d=Rd(s,s),p=s[0],c=d-p*p;if(!c)return!a&&e;var f=Id(l,s),m=Fd(l,o*d/c),g=Fd(s,-o*p/c);Md(m,g);var _=f,u=Rd(m,_),y=Rd(_,_),h=u*u-y*(Rd(m,m)-1);if(!(0>h)){var b=Dw(h),t=Fd(_,(-u-b)/y);if(Md(t,m),t=Dd(t),!a)return t;var x=e[0],v=n[0],S=e[1],T=n[1],k;v<x&&(k=x,x=v,v=k);var E=v-x,N=Sw(E-_w)<gw;if(!N&&T<S&&(k=S,S=T,T=k),N||E<gw?N?0<S+T^t[1]<(Sw(t[0]-x)<gw?S:T):S<=t[1]&&t[1]<=T:E>_w^(x<=t[0]&&t[0]<=v)){var A=Fd(_,(-u+b)/y);return Md(A,m),[t,Dd(A)]}}}function i(t,n){var a=l?e:_w-e,i=0;return t<-a?i|=1:t>a&&(i|=2),n<-a?i|=4:n>a&&(i|=8),i}var o=Ew(e),l=0<o,r=Sw(o)>gw;return Vw(n,function(e){var o,s,d,p,u;return{lineStart:function(){p=d=!1,u=1},point:function(f,m){var g=[f,m],_=n(f,m),y=l?_?0:i(f,m):_?i(f+(0>f?_w:-_w),m):0,c;if(!o&&(p=d=_)&&e.lineStart(),_!==d&&(c=a(o,g),(!c||Ww(o,c)||Ww(g,c))&&(g[0]+=gw,g[1]+=gw,_=n(g[0],g[1]))),_!==d)u=0,_?(e.lineStart(),c=a(g,o),e.point(c[0],c[1])):(c=a(o,g),e.point(c[0],c[1]),e.lineEnd()),o=c;else if(r&&o&&l^_){var h;!(y&s)&&(h=a(g,o,!0))&&(u=0,l?(e.lineStart(),e.point(h[0][0],h[0][1]),e.point(h[1][0],h[1][1]),e.lineEnd()):(e.point(h[1][0],h[1][1]),e.lineEnd(),e.lineStart(),e.point(h[0][0],h[0][1])))}!_||o&&Ww(o,g)||e.point(g[0],g[1]),o=g,d=_,s=y},lineEnd:function(){d&&e.lineEnd(),o=null},clean:function(){return u|(p&&d)<<1}}},function(t,n,a,i){qd(i,e,6*vw,a,t,n)},l?[0,-e]:[-_w,e-_w])},Xw=function(e,t,n,a,i,o){var l=e[0],s=e[1],d=t[0],p=t[1],c=0,u=1,f=d-l,m=p-s,g;if(g=n-l,f||!(0<g)){if(g/=f,0>f){if(g<c)return;g<u&&(u=g)}else if(0<f){if(g>u)return;g>c&&(c=g)}if(g=i-l,f||!(0>g)){if(g/=f,0>f){if(g>u)return;g>c&&(c=g)}else if(0<f){if(g<c)return;g<u&&(u=g)}if(g=a-s,m||!(0<g)){if(g/=m,0>m){if(g<c)return;g<u&&(u=g)}else if(0<m){if(g>u)return;g>c&&(c=g)}if(g=o-s,m||!(0>g)){if(g/=m,0>m){if(g>u)return;g>c&&(c=g)}else if(0<m){if(g<c)return;g<u&&(u=g)}return 0<c&&(e[0]=l+c*f,e[1]=s+c*m),1>u&&(t[0]=l+u*f,t[1]=s+u*m),!0}}}}},Kw=1e9,Jw=-Kw,Qw=fw(),eC={sphere:Ad,point:Ad,lineStart:function(){eC.point=Qd,eC.lineEnd=Jd},lineEnd:Ad,polygonStart:Ad,polygonEnd:Ad},tC=function(e){return Qw.reset(),Mw(e,eC),+Qw},nC=[null,null],aC={type:"LineString",coordinates:nC},iC=function(e,t){return nC[0]=e,nC[1]=t,tC(aC)},oC={Sphere:function(){return!0},Point:function(e,t){return np(e.coordinates,t)},MultiPoint:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)if(np(a[o],t))return!0;return!1},LineString:function(e,t){return ap(e.coordinates,t)},MultiLineString:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)if(ap(a[o],t))return!0;return!1},Polygon:function(e,t){return ip(e.coordinates,t)},MultiPolygon:function(e,t){for(var a=e.coordinates,o=-1,i=a.length;++o<i;)if(ip(a[o],t))return!0;return!1},GeometryCollection:function(e,t){for(var a=e.geometries,o=-1,i=a.length;++o<i;)if(tp(a[o],t))return!0;return!1}},rC=function(e){return e},lC=fw(),sC=fw(),dC={point:Ad,lineStart:Ad,lineEnd:Ad,polygonStart:function(){dC.lineStart=pp,dC.lineEnd=fp},polygonEnd:function(){dC.lineStart=dC.lineEnd=dC.point=Ad,lC.add(Sw(sC)),sC.reset()},result:function(){return lC.reset(),lC/2}},pC=Infinity,cC=pC,uC=-pC,fC=uC,mC={point:function(e,t){e<pC&&(pC=e),e>uC&&(uC=e),t<cC&&(cC=t),t>fC&&(fC=t)},lineStart:Ad,lineEnd:Ad,polygonStart:Ad,polygonEnd:Ad,result:function(){var e=[[pC,cC],[uC,fC]];return uC=fC=-(cC=pC=Infinity),e}},gC=0,_C=0,yC=0,hC=0,bC=0,xC=0,vC=0,SC=0,TC=0,kC={point:mp,lineStart:gp,lineEnd:hp,polygonStart:function(){kC.lineStart=bp,kC.lineEnd=xp},polygonEnd:function(){kC.point=mp,kC.lineStart=gp,kC.lineEnd=hp},result:function(){var e=TC?[vC/TC,SC/TC]:xC?[hC/xC,bC/xC]:yC?[gC/yC,_C/yC]:[NaN,NaN];return gC=_C=yC=hC=bC=xC=vC=SC=TC=0,e}},EC,NC,LC,AC,wC,CC,OC,DC,PC,RC,IC;Tp.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,bw);break}}},result:Ad};var MC=fw(),FC={point:Ad,lineStart:function(){FC.point=kp},lineEnd:function(){BC&&Ep(zC,jC),FC.point=Ad},polygonStart:function(){BC=!0},polygonEnd:function(){BC=null},result:function(){return MC.reset(),+MC}},BC,zC,jC,UC,$C;Np.prototype={_radius:4.5,_circle:Lp(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{null==this._circle&&(this._circle=Lp(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var WC=function(e,t){function n(e){return e&&("function"==typeof a&&o.pointRadius(+a.apply(this,arguments)),Mw(e,i(o))),o.result()}var a=4.5,i,o;return n.area=function(e){return Mw(e,i(dC)),dC.result()},n.measure=function(e){return Mw(e,i(FC)),FC.result()},n.bounds=function(e){return Mw(e,i(mC)),mC.result()},n.centroid=function(e){return Mw(e,i(kC)),kC.result()},n.projection=function(t){return arguments.length?(i=null==t?(e=null,rC):(e=t).stream,n):e},n.context=function(e){return arguments.length?(o=null==e?(t=null,new Np):new Tp(t=e),"function"!=typeof a&&o.pointRadius(a),n):t},n.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(o.pointRadius(+e),+e),n):a},n.projection(e).context(t)};wp.prototype={constructor:wp,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var qC=16,HC=Ew(30*vw),YC=function(e,t){return+t?Mp(e,t):Ip(e)},VC=Ap({point:function(e,t){this.stream.point(e*vw,t*vw)}}),GC=function(){return jp($p).scale(155.424).center([0,33.6442])},ZC=function(){return GC().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-0.6,38.7])},XC=qp(function(e){return Dw(2/(1+e))});XC.invert=Hp(function(e){return 2*Ld(e/2)});var KC=qp(function(e){return(e=Nd(e))&&e/Cw(e)});KC.invert=Hp(function(e){return e});Yp.invert=function(e,t){return[e,2*Tw(Lw(t))-yw]};Xp.invert=Xp;Jp.invert=Hp(Tw);Qp.invert=Hp(Ld);ec.invert=Hp(function(e){return 2*Tw(e)});tc.invert=function(e,t){return[-t,2*Tw(Lw(e))-yw]};var JC=WC(),QC=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],eO={albers:ZC,albersusa:function(){function e(e){var t=e[0],n=e[1];return c=null,(s.point(t,n),c)||(d.point(t,n),c)||(p.point(t,n),c)}function t(){return r=l=null,e}var n=ZC(),a=GC().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i=GC().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o={point:function(e,t){c=[e,t]}},r,l,s,d,p,c;return e.invert=function(e){var o=n.scale(),r=n.translate(),t=(e[0]-r[0])/o,l=(e[1]-r[1])/o;return(0.12<=l&&0.234>l&&-0.425<=t&&-0.214>t?a:0.166<=l&&0.234>l&&-0.214<=t&&-0.115>t?i:n).invert(e)},e.stream=function(e){return r&&l===e?r:r=Wp([n.stream(l=e),a.stream(e),i.stream(e)])},e.precision=function(e){return arguments.length?(n.precision(e),a.precision(e),i.precision(e),t()):n.precision()},e.scale=function(t){return arguments.length?(n.scale(t),a.scale(0.35*t),i.scale(t),e.translate(n.translate())):n.scale()},e.translate=function(e){if(!arguments.length)return n.translate();var r=n.scale(),l=+e[0],c=+e[1];return s=n.translate(e).clipExtent([[l-0.455*r,c-0.238*r],[l+0.455*r,c+0.238*r]]).stream(o),d=a.translate([l-0.307*r,c+0.201*r]).clipExtent([[l-0.425*r+gw,c+0.12*r+gw],[l-0.214*r-gw,c+0.234*r-gw]]).stream(o),p=i.translate([l-0.205*r,c+0.212*r]).clipExtent([[l-0.214*r+gw,c+0.166*r+gw],[l-0.115*r-gw,c+0.234*r-gw]]).stream(o),t()},e.fitExtent=function(t,n){return Op(e,t,n)},e.fitSize=function(t,n){return Dp(e,t,n)},e.fitWidth=function(t,n){return Pp(e,t,n)},e.fitHeight=function(t,n){return Rp(e,t,n)},e.scale(1070)},azimuthalequalarea:function(){return Bp(XC).scale(124.75).clipAngle(180-1e-3)},azimuthalequidistant:function(){return Bp(KC).scale(79.4188).clipAngle(180-1e-3)},conicconformal:function(){return jp(Zp).scale(109.5).parallels([30,30])},conicequalarea:GC,conicequidistant:function(){return jp(Kp).scale(131.154).center([0,13.9389])},equirectangular:function(){return Bp(Xp).scale(152.63)},gnomonic:function(){return Bp(Jp).scale(144.049).clipAngle(60)},mercator:function(){return Vp(Yp).scale(961/bw)},orthographic:function(){return Bp(Qp).scale(249.5).clipAngle(90+gw)},stereographic:function(){return Bp(ec).scale(250).clipAngle(142)},transversemercator:function(){var e=Vp(tc),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],2<e.length?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)}};for(var tO in eO)ac(tO,eO[tO]);oc.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"as",type:"string",default:"path"}]};var nO=Fh(oc,bn);nO.transform=function(e,t){function n(e){e[r]=i(o(e))}var a=t.fork(t.ALL),i=this.value,o=e.field||id,r=e.as||"path",l;return!i||e.modified()?(this.value=i=ic(e.projection).context(null),a.materialize().reflow().visit(a.SOURCE,n)):(i.context(null),l=o===id||t.modified(o.fields),a.visit(l?a.ADD_MOD:a.ADD,n)),a.modifies(r)},rc.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};var aO=Fh(rc,bn);aO.transform=function(e,t){function n(e){var t=a([i(e),o(e)]);t?(e[l]=t[0],e[s]=t[1]):(e[l]=void 0,e[s]=void 0)}var a=e.projection,i=e.fields[0],o=e.fields[1],r=e.as||["x","y"],l=r[0],s=r[1],d;return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(d=t.modified(i.fields)||t.modified(o.fields),t.visit(d?t.ADD_MOD:t.ADD,n)),t.modifies(r)},lc.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"as",type:"string",default:"shape"}]};var iO=Fh(lc,bn);iO.transform=function(e,t){var n=t.fork(t.ALL),a=this.value,i=e.field||fh("datum"),o=e.as||"shape",r=n.ADD_MOD;return(!a||e.modified())&&(this.value=a=sc(ic(e.projection),i),n.materialize().reflow(),r=n.SOURCE),n.visit(r,function(e){e[o]=a}),n.modifies(o)},dc.Definition={type:"Graticule",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};var oO=Fh(dc,bn);oO.transform=function(e,n){var a=n.fork(),i=this.value,o=this.generator,r;if(!i.length||e.modified())for(var t in e)wh(o[t])&&o[t](e[t]);return r=o(),i.length?a.mod.push(J(i[0],r)):a.add.push(Z(r)),i[0]=r,a.source=i,a};var rO=Fh(pc,bn);rO.transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=uc(e.type),QC.forEach(function(t){null!=e[t]&&fc(n,t,e[t])})):QC.forEach(function(t){e.modified(t)&&fc(n,t,e[t])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&cc(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var lO=Object.freeze({contour:vd,geojson:Td,geopath:oc,geopoint:rc,geoshape:lc,graticule:dc,projection:pc}),sO=function(e){return function(){return e}},dO=function(){return 1e-6*(Math.random()-0.5)},pO=function(e,t,n,a,i){this.node=e,this.x0=t,this.y0=n,this.x1=a,this.y1=i},cO=hc.prototype=bc.prototype;cO.copy=function(){var e=new bc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,a;if(!t)return e;if(!t.length)return e._root=xc(t),e;for(n=[{source:t,target:e._root=[,,,,]}];t=n.pop();)for(var o=0;4>o;++o)(a=t.source[o])&&(a.length?n.push({source:a,target:t.target[o]=[,,,,]}):t.target[o]=xc(a));return e},cO.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return gc(this.cover(t,n),t,n,e)},cO.addAll=function(e){var t=e.length,n=Array(t),a=Array(t),o=Infinity,r=Infinity,l=-Infinity,s=-Infinity,p,d,i,c;for(d=0;d<t;++d)isNaN(i=+this._x.call(null,p=e[d]))||isNaN(c=+this._y.call(null,p))||(n[d]=i,a[d]=c,i<o&&(o=i),i>l&&(l=i),c<r&&(r=c),c>s&&(s=c));for(l<o&&(o=this._x0,l=this._x1),s<r&&(r=this._y0,s=this._y1),this.cover(o,r).cover(l,s),d=0;d<t;++d)gc(this,n[d],a[d],e[d]);return this},cO.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,a=this._y0,o=this._x1,r=this._y1;if(isNaN(n))o=(n=E(e))+1,r=(a=E(t))+1;else if(n>e||e>o||a>t||t>r){var l=o-n,s=this._root,d,p;switch(p=(t<(a+r)/2)<<1|e<(n+o)/2){case 0:{do d=[,,,,],d[p]=s,s=d;while((l*=2,o=n+l,r=a+l,e>o||t>r));break}case 1:{do d=[,,,,],d[p]=s,s=d;while((l*=2,n=o-l,r=a+l,n>e||t>r));break}case 2:{do d=[,,,,],d[p]=s,s=d;while((l*=2,o=n+l,a=r-l,e>o||a>t));break}case 3:{do d=[,,,,],d[p]=s,s=d;while((l*=2,n=o-l,a=r-l,n>e||a>t));break}}this._root&&this._root.length&&(this._root=s)}else return this;return this._x0=n,this._y0=a,this._x1=o,this._y1=r,this},cO.data=function(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e},cO.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},cO.find=function(e,t,n){var a=this._x0,o=this._y0,r=this._x1,l=this._y1,s=[],p=this._root,c,f,m,g,_,y,h;for(p&&s.push(new pO(p,a,o,r,l)),null==n?n=Infinity:(a=e-n,o=t-n,r=e+n,l=t+n,n*=n);y=s.pop();)if(!(!(p=y.node)||(f=y.x0)>r||(m=y.y0)>l||(g=y.x1)<a||(_=y.y1)<o))if(p.length){var i=(f+g)/2,b=(m+_)/2;s.push(new pO(p[3],i,b,g,_),new pO(p[2],f,b,i,_),new pO(p[1],i,m,g,b),new pO(p[0],f,m,i,b)),(h=(t>=b)<<1|e>=i)&&(y=s[s.length-1],s[s.length-1]=s[s.length-1-h],s[s.length-1-h]=y)}else{var x=e-+this._x.call(null,p.data),v=t-+this._y.call(null,p.data),S=x*x+v*v;if(S<n){var T=u(n=S);a=e-T,o=t-T,r=e+T,l=t+T,c=p.data}}return c},cO.remove=function(e){if(isNaN(c=+this._x.call(null,e))||isNaN(u=+this._y.call(null,e)))return this;var t=this._root,n=this._x0,a=this._y0,o=this._x1,r=this._y1,l,s,d,p,c,u,f,m,g,_,y,i;if(!t)return this;if(t.length)for(;;){if((g=c>=(f=(n+o)/2))?n=f:o=f,(_=u>=(m=(a+r)/2))?a=m:r=m,(l=t,!(t=t[y=_<<1|g])))return this;if(!t.length)break;(l[3&y+1]||l[3&y+2]||l[3&y+3])&&(s=l,i=y)}for(;t.data!==e;)if(d=t,!(t=t.next))return this;return((p=t.next)&&delete t.next,d)?(p?d.next=p:delete d.next,this):l?(p?l[y]=p:delete l[y],(t=l[0]||l[1]||l[2]||l[3])&&t===(l[3]||l[2]||l[1]||l[0])&&!t.length&&(s?s[i]=t:this._root=t),this):(this._root=p,this)},cO.removeAll=function(e){for(var t=0,a=e.length;t<a;++t)this.remove(e[t]);return this},cO.root=function(){return this._root},cO.size=function(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e},cO.visit=function(e){var t=[],n=this._root,a,i,o,r,l,s;for(n&&t.push(new pO(n,this._x0,this._y0,this._x1,this._y1));a=t.pop();)if(!e(n=a.node,o=a.x0,r=a.y0,l=a.x1,s=a.y1)&&n.length){var d=(o+l)/2,p=(r+s)/2;(i=n[3])&&t.push(new pO(i,d,p,l,s)),(i=n[2])&&t.push(new pO(i,o,p,d,s)),(i=n[1])&&t.push(new pO(i,d,r,l,p)),(i=n[0])&&t.push(new pO(i,o,r,d,p))}return this},cO.visitAfter=function(e){var t=[],n=[],a;for(this._root&&t.push(new pO(this._root,this._x0,this._y0,this._x1,this._y1));a=t.pop();){var i=a.node;if(i.length){var o=a.x0,r=a.y0,l=a.x1,s=a.y1,d=(o+l)/2,p=(r+s)/2,c;(c=i[0])&&t.push(new pO(c,o,r,d,p)),(c=i[1])&&t.push(new pO(c,d,r,l,p)),(c=i[2])&&t.push(new pO(c,o,p,d,s)),(c=i[3])&&t.push(new pO(c,d,p,l,s))}n.push(a)}for(;a=n.pop();)e(a.node,a.x0,a.y0,a.x1,a.y1);return this},cO.x=function(e){return arguments.length?(this._x=e,this):this._x},cO.y=function(e){return arguments.length?(this._y=e,this):this._y};var uO=0,fO=0,mO=0,gO=1e3,_O=0,yO=0,hO=0,bO="object"==typeof performance&&performance.now?performance:Date,xO="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)},vO,SO;Lc.prototype=Ac.prototype={constructor:Lc,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Ec():+n)+(null==t?0:+t),this._next||SO===this||(SO?SO._next=this:vO=this,SO=this),this._call=e,this._time=n,Pc()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Pc())}};var TO=function(e){function t(){n(),y.call("tick",h),r<l&&(_.stop(),y.call("end",h))}function n(){var t=e.length,n,a;for(r+=(p-r)*d,m.each(function(e){e(r)}),n=0;n<t;++n)a=e[n],null==a.fx?a.x+=a.vx*=f:(a.x=a.fx,a.vx=0),null==a.fy?a.y+=a.vy*=f:(a.y=a.fy,a.vy=0)}function a(){for(var t=0,a=e.length,n;t<a;++t){if(n=e[t],n.index=t,isNaN(n.x)||isNaN(n.y)){var i=10*u(t),r=t*(o*(3-2.23606797749979));n.x=i*c(r),n.y=i*s(r)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function i(t){return t.initialize&&t.initialize(e),t}var r=1,l=1e-3,d=1-g(l,1/300),p=0,f=0.6,m=se(),_=Ac(t),y=ge("tick","end"),h;return null==e&&(e=[]),a(),h={tick:n,restart:function(){return _.restart(t),h},stop:function(){return _.stop(),h},nodes:function(t){return arguments.length?(e=t,a(),m.each(i),h):e},alpha:function(e){return arguments.length?(r=+e,h):r},alphaMin:function(e){return arguments.length?(l=+e,h):l},alphaDecay:function(e){return arguments.length?(d=+e,h):+d},alphaTarget:function(e){return arguments.length?(p=+e,h):p},velocityDecay:function(e){return arguments.length?(f=1-e,h):1-f},force:function(e,t){return 1<arguments.length?(null==t?m.remove(e):m.set(e,i(t)),h):m.get(e)},find:function(t,a,o){var r=0,i=e.length,n,l,s,d,p;for(null==o?o=Infinity:o*=o,r=0;r<i;++r)d=e[r],n=t-d.x,l=a-d.y,s=n*n+l*l,s<o&&(p=d,o=s);return p},on:function(e,t){return 1<arguments.length?(y.on(e,t),h):y.on(e)}}},kO={center:function(e,t){function n(){var o=a.length,n=0,r=0,l,i;for(l=0;l<o;++l)i=a[l],n+=i.x,r+=i.y;for(n=n/o-e,r=r/o-t,l=0;l<o;++l)i=a[l],i.x-=n,i.y-=r}var a;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){a=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n},collide:function(e){function t(){function e(e,t,n,a,o){var s=e.data,d=e.r,_=m+d;if(s){if(s.index>p.index){var r=c-s.x-s.vx,h=f-s.y-s.vy,y=r*r+h*h;y<_*_&&(0==r&&(r=dO(),y+=r*r),0==h&&(h=dO(),y+=h*h),y=(_-(y=u(y)))/y*i,p.vx+=(r*=y)*(_=(d*=d)/(g+d)),p.vy+=(h*=y)*_,s.vx-=r*(_=1-_),s.vy-=h*_)}return}return t>c+_||a<c-_||n>f+_||o<f-_}for(var t=r.length,n=0,s,d,p,c,f,m,g;n<o;++n)for(d=hc(r,vc,Sc).visitAfter(a),s=0;s<t;++s)p=r[s],m=l[p.index],g=m*m,c=p.x+p.vx,f=p.y+p.vy,d.visit(e)}function a(e){if(e.data)return e.r=l[e.data.index];for(var t=e.r=0;4>t;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function n(){if(r){var t=r.length,n,a;for(l=Array(t),n=0;n<t;++n)a=r[n],l[a.index]=+e(a,n,r)}}var i=1,o=1,r,l;return"function"!=typeof e&&(e=sO(null==e?1:+e)),t.initialize=function(e){r=e,n()},t.iterations=function(e){return arguments.length?(o=+e,t):o},t.strength=function(e){return arguments.length?(i=+e,t):i},t.radius=function(a){return arguments.length?(e="function"==typeof a?a:sO(+a),n(),t):e},t},nbody:function(){function e(e){var t=l.length,n=hc(l,Rc,Ic).visitAfter(a),r;for(p=e,r=0;r<t;++r)d=l[r],n.visit(o)}function t(){if(l){var e=l.length,t,n;for(c=Array(e),t=0;t<e;++t)n=l[t],c[n.index]=+r(n,t,l)}}function a(e){var t=0,n=0,a,o,r,l,s;if(e.length){for(r=l=s=0;4>s;++s)(a=e[s])&&(o=T(a.value))&&(t+=a.value,n+=o,r+=o*a.x,l+=o*a.y);e.x=r/n,e.y=l/n}else{a=e,a.x=a.data.x,a.y=a.data.y;do t+=c[a.data.index];while(a=a.next)}e.value=t}function o(e,t,a,o){if(!e.value)return!0;var r=e.x-d.x,f=e.y-d.y,m=o-t,g=r*r+f*f;if(m*m/s<g)return g<i&&(0==r&&(r=dO(),g+=r*r),0==f&&(f=dO(),g+=f*f),g<n&&(g=u(n*g)),d.vx+=r*e.value*p/g,d.vy+=f*e.value*p/g),!0;if(!(e.length||g>=i)){(e.data!==d||e.next)&&(0===r&&(r=dO(),g+=r*r),0===f&&(f=dO(),g+=f*f),g<n&&(g=u(n*g)));do e.data!==d&&(m=c[e.data.index]*p/g,d.vx+=r*m,d.vy+=f*m);while(e=e.next)}}var r=sO(-30),n=1,i=Infinity,s=0.81,l,d,p,c;return e.initialize=function(e){l=e,t()},e.strength=function(n){return arguments.length?(r="function"==typeof n?n:sO(+n),t(),e):r},e.distanceMin=function(t){return arguments.length?(n=t*t,e):u(n)},e.distanceMax=function(t){return arguments.length?(i=t*t,e):u(i)},e.theta=function(t){return arguments.length?(s=t*t,e):u(s)},e},link:function(e){function t(t){for(var a=0,o=e.length;a<d;++a)for(var n=0,i,r,s,f,m,g,l;n<o;++n)i=e[n],r=i.source,s=i.target,f=s.x+s.vx-r.x-r.vx||dO(),m=s.y+s.vy-r.y-r.vy||dO(),g=u(f*f+m*m),g=(g-c[n])/g*t*p[n],f*=g,m*=g,s.vx-=f*(l=_[n]),s.vy-=m*l,r.vx+=f*(l=1-l),r.vy+=m*l}function n(){if(f){var t=f.length,n=e.length,l=se(f,r),s,i;for(s=0,g=Array(t);s<n;++s)i=e[s],i.index=s,"object"!=typeof i.source&&(i.source=kc(l,i.source)),"object"!=typeof i.target&&(i.target=kc(l,i.target)),g[i.source.index]=(g[i.source.index]||0)+1,g[i.target.index]=(g[i.target.index]||0)+1;for(s=0,_=Array(n);s<n;++s)i=e[s],_[s]=g[i.source.index]/(g[i.source.index]+g[i.target.index]);p=Array(n),a(),c=Array(n),o()}}function a(){if(f)for(var t=0,a=e.length;t<a;++t)p[t]=+l(e[t],t,e)}function o(){if(f)for(var t=0,a=e.length;t<a;++t)c[t]=+s(e[t],t,e)}var r=Tc,l=function(e){return 1/S(g[e.source.index],g[e.target.index])},s=sO(30),d=1,p,c,f,g,_;return null==e&&(e=[]),t.initialize=function(e){f=e,n()},t.links=function(a){return arguments.length?(e=a,n(),t):e},t.id=function(e){return arguments.length?(r=e,t):r},t.iterations=function(e){return arguments.length?(d=+e,t):d},t.strength=function(e){return arguments.length?(l="function"==typeof e?e:sO(+e),a(),t):l},t.distance=function(e){return arguments.length?(s="function"==typeof e?e:sO(+e),o(),t):s},t},x:function(e){function t(e){for(var t=0,a=o.length,n;t<a;++t)n=o[t],n.vx+=(l[t]-n.x)*r[t]*e}function n(){if(o){var t=o.length,n;for(r=Array(t),l=Array(t),n=0;n<t;++n)r[n]=isNaN(l[n]=+e(o[n],n,o))?0:+a(o[n],n,o)}}var a=sO(0.1),o,r,l;return"function"!=typeof e&&(e=sO(null==e?0:+e)),t.initialize=function(e){o=e,n()},t.strength=function(e){return arguments.length?(a="function"==typeof e?e:sO(+e),n(),t):a},t.x=function(a){return arguments.length?(e="function"==typeof a?a:sO(+a),n(),t):e},t},y:function(e){function t(e){for(var t=0,a=o.length,n;t<a;++t)n=o[t],n.vy+=(l[t]-n.y)*r[t]*e}function n(){if(o){var t=o.length,n;for(r=Array(t),l=Array(t),n=0;n<t;++n)r[n]=isNaN(l[n]=+e(o[n],n,o))?0:+a(o[n],n,o)}}var a=sO(0.1),o,r,l;return"function"!=typeof e&&(e=sO(null==e?0:+e)),t.initialize=function(e){o=e,n()},t.strength=function(e){return arguments.length?(a="function"==typeof e?e:sO(+e),n(),t):a},t.y=function(a){return arguments.length?(e="function"==typeof a?a:sO(+a),n(),t):e},t}},EO="forces",NO=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],LO=["static","iterations"],AO=["x","y","vx","vy"];Mc.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:0.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:0.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:0.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:0.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:0.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:0.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:AO}]};var wO=Fh(Mc,bn);wO.transform=function(e,t){var n=this.value,a=t.changed(t.ADD_REM),i=e.modified(NO),o=e.iterations||300;if(n?(a&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&zc(n,e,0,t)):(this.value=n=Bc(t.source,e),n.on("tick",Fc(t.dataflow,this)),!e.static&&(a=!0,n.tick()),t.modifies("index")),i||a||e.modified(LO)||t.changed()&&e.restart)if(n.alpha(N(n.alpha(),e.alpha||1)).alphaDecay(1-g(n.alphaMin(),1/o)),e.static)for(n.stop();0<=--o;)n.tick();else if(n.stopped()&&n.restart(),!a)return t.StopPropagation;return this.finish(e,t)},wO.finish=function(e,t){for(var a=t.dataflow,o=this._argops,r=0,l=o.length,s;r<l;++r)if(s=o[r],s.name===EO&&"link"===s.op._argval.force)for(var d=s.op._argops,p=0,i=d.length,n;p<i;++p)if("links"===d[p].name&&(n=d[p].op.source)){a.pulse(n,a.changeset().reflow());break}return t.reflow(e.modified()).modifies(AO)};var CO=Object.freeze({force:Mc});nu.prototype=Jc.prototype={constructor:nu,count:function(){return this.eachAfter(Xc)},each:function(e){var t=this,a=[t],o,r,l,i;do for(o=a.reverse(),a=[];t=o.pop();)if(e(t),r=t.children,r)for(l=0,i=r.length;l<i;++l)a.push(r[l]);while(a.length);return this},eachAfter:function(e){for(var t=this,a=[t],o=[],r,l,i;t=a.pop();)if(o.push(t),r=t.children,r)for(l=0,i=r.length;l<i;++l)a.push(r[l]);for(;t=o.pop();)e(t);return this},eachBefore:function(e){for(var t=this,n=[t],a,o;t=n.pop();)if(e(t),a=t.children,a)for(o=a.length-1;0<=o;--o)n.push(a[o]);return this},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,a=t.children,o=a&&a.length;0<=--o;)n+=a[o].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=Kc(t,e),a=[t];t!==n;)t=t.parent,a.push(t);for(var i=a.length;e!==n;)a.splice(i,0,e),e=e.parent;return a},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return Jc(this).eachBefore(eu)}};var OO=Array.prototype.slice,DO=function(t){for(var a=0,i=(t=au(OO.call(t))).length,n=[],o,r;a<i;)o=t[a],r&&ru(r,o)?++a:(r=su(n=iu(n,o)),a=0);return r},PO=function(e){return function(){return e}},RO=function(e){e.x0=l(e.x0),e.y0=l(e.y0),e.x1=l(e.x1),e.y1=l(e.y1)},IO=function(e,t,a,o,r){for(var l=e.children,s=-1,i=l.length,n=e.value&&(o-t)/e.value,d;++s<i;)d=l[s],d.y0=a,d.y1=r,d.x0=t,d.x1=t+=d.value*n},MO="$",FO={depth:-1},BO={},zO=function(){function e(e){var o=e.length,n=Array(o),r={},l,s,i,d,p,c,u;for(s=0;s<o;++s)l=e[s],p=n[s]=new nu(l),null!=(c=t(l,s,e))&&(c+="")&&(u=MO+(p.id=c),r[u]=u in r?BO:p);for(s=0;s<o;++s)if(p=n[s],c=a(e[s],s,e),null==c||!(c+="")){if(i)throw new Error("multiple roots");i=p}else{if(d=r[MO+c],!d)throw new Error("missing: "+c);if(d===BO)throw new Error("ambiguous: "+c);d.children?d.children.push(p):d.children=[p],p.parent=d}if(!i)throw new Error("no root");if(i.parent=FO,i.eachBefore(function(e){e.depth=e.parent.depth+1,--o}).eachBefore(tu),i.parent=null,0<o)throw new Error("cycle");return i}var t=ku,a=Eu;return e.id=function(n){return arguments.length?(t=hu(n),e):t},e.parentId=function(t){return arguments.length?(a=hu(t),e):a},e};Du.prototype=Object.create(nu.prototype);var jO=function(e,t,a,o,r){for(var l=e.children,s=-1,i=l.length,n=e.value&&(r-a)/e.value,d;++s<i;)d=l[s],d.x0=t,d.x1=o,d.y0=a,d.y1=a+=d.value*n},UO=(1+2.23606797749979)/2,$O=function e(t){function n(e,n,a,i,o){Ru(t,e,n,a,i,o)}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(UO),WO=function(){function e(e){return e.x0=e.y0=0,e.x1=i,e.y1=o,e.eachBefore(t),r=[0],a&&e.eachBefore(RO),e}function t(e){var t=r[e.depth],a=e.x0+t,i=e.y0+t,o=e.x1-t,p=e.y1-t;o<a&&(a=o=(a+o)/2),p<i&&(i=p=(i+p)/2),e.x0=a,e.y0=i,e.x1=o,e.y1=p,e.children&&(t=r[e.depth+1]=l(e)/2,a+=u(e)-t,i+=s(e)-t,o-=d(e)-t,p-=c(e)-t,o<a&&(a=o=(a+o)/2),p<i&&(i=p=(i+p)/2),n(e,a,i,o,p))}var n=$O,a=!1,i=1,o=1,r=[0],l=bu,s=bu,d=bu,c=bu,u=bu;return e.round=function(t){return arguments.length?(a=!!t,e):a},e.size=function(t){return arguments.length?(i=+t[0],o=+t[1],e):[i,o]},e.tile=function(t){return arguments.length?(n=hu(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(l="function"==typeof t?t:PO(+t),e):l},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:PO(+t),e):s},e.paddingRight=function(t){return arguments.length?(d="function"==typeof t?t:PO(+t),e):d},e.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:PO(+t),e):c},e.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:PO(+t),e):u},e},qO=function e(t){function n(e,a,o,r,l){if((c=e._squarify)&&c.ratio===t)for(var s=-1,d=c.length,p=e.value,c,u,f,m,i;++s<d;){for(u=c[s],f=u.children,(m=u.value=0,i=f.length);m<i;++m)u.value+=f[m].value;u.dice?IO(u,a,o,r,o+=(l-o)*u.value/p):jO(u,a,o,a+=(r-a)*u.value/p,l),p-=u.value}else e._squarify=c=Ru(t,e,a,o,r,l),c.ratio=t}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(UO);Iu.Definition={type:"Nest",metadata:{treesource:!0,source:!0,generates:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"key",type:"field"},{name:"generate",type:"boolean"}]};var HO=Fh(Iu,bn);HO.transform=function(e,t){t.source||lh("Nest transform requires an upstream data source.");var n=e.key||V,a=e.generate,i=e.modified(),o=a||i?t.fork(t.ALL):t,r,l,s;return(!this.value||i||t.changed())&&(a&&this.value&&(o.materialize(o.REM),this.value.each(function(e){e.children&&o.rem.push(e)})),r=Ah(e.keys).reduce(function(e,t){return e.key(t),e},sb()).entries(t.source),this.value=l=Jc({values:r},Mu),a&&(o.materialize(o.ADD),o.source=o.source.slice(),l.each(function(e){e.children&&(e=Z(e.data),o.add.push(e),o.source.push(e))})),s=l.lookup={},l.each(function(e){null!=V(e.data)&&(s[n(e.data)]=e)})),o.source.root=this.value,o};var YO=Fh(Fu,bn);YO.transform=function(e,t){t.source&&t.source.root||lh(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),a=this.fields,i=t.source.root,o=e.as||a;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),Bu(n,this.params,e);try{this.value=n(i)}catch(e){lh(e)}return i.each(function(e){zu(e,a,o)}),t.reflow(e.modified()).modifies(o).modifies("leaf")};var VO=["x","y","r","depth","children"];ju.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:VO}]};var GO=Fh(ju,Fu);GO.layout=function(){function e(e){return e.x=n/2,e.y=a/2,t?e.eachBefore(vu(t)).eachAfter(Su(i,0.5)).eachBefore(Tu(1)):e.eachBefore(vu(xu)).eachAfter(Su(bu,1)).eachAfter(Su(i,e.r/S(n,a))).eachBefore(Tu(S(n,a)/(2*e.r))),e}var t=null,n=1,a=1,i=bu;return e.radius=function(n){return arguments.length?(t=yu(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],a=+t[1],e):[n,a]},e.padding=function(t){return arguments.length?(i="function"==typeof t?t:PO(+t),e):i},e},GO.params=["size","padding"],GO.fields=VO;var ZO=["x0","y0","x1","y1","depth","children"];Uu.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:ZO}]};var XO=Fh(Uu,Fu);XO.layout=function(){function e(e){var l=e.height+1;return e.x0=e.y0=o,e.x1=a,e.y1=i/l,e.eachBefore(t(i,l)),r&&e.eachBefore(RO),e}function t(e,t){return function(n){n.children&&IO(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var a=n.x0,i=n.y0,r=n.x1-o,l=n.y1-o;r<a&&(a=r=(a+r)/2),l<i&&(i=l=(i+l)/2),n.x0=a,n.y0=i,n.x1=r,n.y1=l}}var a=1,i=1,o=0,r=!1;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(a=+t[0],i=+t[1],e):[a,i]},e.padding=function(t){return arguments.length?(o=+t,e):o},e},XO.params=["size","round","padding"],XO.fields=ZO,$u.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};var KO=Fh($u,bn);KO.transform=function(e,t){t.source||lh("Stratify transform requires an upstream data source.");var n=e.modified(),a=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields),i,o;return a&&(i=zO().id(e.key).parentId(e.parentKey)(t.source),o=i.lookup={},i.each(function(t){o[e.key(t.data)]=t}),this.value=i),t.source.root=this.value,n?t.fork(t.ALL):t};var JO={tidy:function(){function e(e){var p=Pu(e);if(p.eachAfter(n),p.parent.m=-p.z,p.eachBefore(a),d)e.eachBefore(i);else{var t=e,c=e,u=e;e.eachBefore(function(e){e.x<t.x&&(t=e),e.x>c.x&&(c=e),e.depth>u.depth&&(u=e)});var f=t===c?1:o(t,c)/2,s=f-t.x,m=r/(c.x+f+s),g=l/(u.depth||1);e.eachBefore(function(e){e.x=(e.x+s)*m,e.y=e.depth*g})}return e}function n(e){var n=e.children,a=e.parent.children,i=e.i?a[e.i-1]:null;if(n){Cu(e);var r=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+o(e._,i._),e.m=e.z-r):e.z=r}else i&&(e.z=i.z+o(e._,i._));e.parent.A=t(e,i,e.parent.A||a[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function t(e,t,n){if(t){for(var a=e,i=e,r=t,l=a.parent.children[0],s=a.m,d=i.m,p=r.m,c=l.m,u;r=Au(r),a=Lu(a),r&&a;)l=Lu(l),i=Au(i),i.a=e,u=r.z+p-a.z-s+o(r._,a._),0<u&&(wu(Ou(r,e,n),e,u),s+=u,d+=u),p+=r.m,s+=a.m,c+=l.m,d+=i.m;r&&!Au(i)&&(i.t=r,i.m+=p-d),a&&!Lu(l)&&(l.t=a,l.m+=s-c,n=e)}return n}function i(e){e.x*=r,e.y=e.depth*l}var o=Nu,r=1,l=1,d=null;return e.separation=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(d=!1,r=+t[0],l=+t[1],e):d?null:[r,l]},e.nodeSize=function(t){return arguments.length?(d=!0,r=+t[0],l=+t[1],e):d?[r,l]:null},e},cluster:function(){function e(e){var o=0,r;e.eachAfter(function(e){var n=e.children;n?(e.x=qc(n),e.y=Yc(n)):(e.x=r?o+=t(e,r):0,e.y=0,r=e)});var l=Gc(e),s=Zc(e),d=l.x-t(l,s)/2,p=s.x+t(s,l)/2;return e.eachAfter(i?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*a}:function(t){t.x=(t.x-d)/(p-d)*n,t.y=(1-(e.y?t.y/e.y:1))*a})}var t=Wc,n=1,a=1,i=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(i=!1,n=+t[0],a=+t[1],e):i?null:[n,a]},e.nodeSize=function(t){return arguments.length?(i=!0,n=+t[0],a=+t[1],e):i?[n,a]:null},e}},QO=["x","y","depth","children"];Wu.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:QO}]};var eD=Fh(Wu,Fu);eD.layout=function(e){var t=e||"tidy";return JO.hasOwnProperty(t)?JO[t]():void lh("Unrecognized Tree layout method: "+t)},eD.params=["size","nodeSize","separation"],eD.fields=QO,qu.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[{name:"key",type:"field"}]};var tD=Fh(qu,bn);tD.transform=function(e,t){function a(e){var t=i[e];t&&(l[e]=1,s.mod.push(t))}t.source&&t.source.root||lh("TreeLinks transform requires a backing tree data source.");var n=t.source.root,o=n.lookup,i=this.value,r=e.key||V,l={},s=t.fork();return t.visit(t.REM,function(e){var t=r(e),n=i[t];n&&(delete i[t],s.rem.push(n))}),t.visit(t.ADD,function(e){var n=r(e),a;(a=Hu(o[n]))&&(s.add.push(i[n]=Z({source:a,target:e})),l[n]=1)}),t.visit(t.MOD,function(e){var t=r(e),s=o[t],d=s.children;if(a(t),d)for(var p=0,i=d.length;p<i;++p)l[t=r(d[p].data)]||a(t)}),s};var nD={binary:function(e,t,a,o,r){function l(e,t,a,i,o,r,d){if(e>=t-1){var p=s[e];return p.x0=i,p.y0=o,p.x1=r,void(p.y1=d)}for(var c=n[e],u=a/2+c,f=e+1,m=t-1;f<m;){var g=f+m>>>1;n[g]<u?f=g+1:m=g}u-n[f-1]<n[f]-u&&e+1<f&&--f;var _=n[f]-c,y=a-_;if(r-i>d-o){var h=(i*y+r*_)/a;l(e,f,_,i,o,h,d),l(f,t,y,h,o,r,d)}else{var b=(o*y+d*_)/a;l(e,f,_,i,o,r,b),l(f,t,y,i,b,r,d)}}var s=e.children,d=s.length,n=Array(d+1),p,i;for(n[0]=i=p=0;p<d;++p)n[p+1]=i+=s[p].value;l(0,d,e.value,t,a,o,r)},dice:IO,slice:jO,slicedice:function(e,t,n,a,i){(1&e.depth?jO:IO)(e,t,n,a,i)},squarify:$O,resquarify:qO},aD=["x0","y0","x1","y1","depth","children"];Yu.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:aD}]};var iD=Fh(Yu,Fu);iD.layout=function(){var e=WO();return e.ratio=function(n){var a=e.tile();a.ratio&&e.tile(a.ratio(n))},e.method=function(t){nD.hasOwnProperty(t)?e.tile(nD[t]):lh("Unrecognized Treemap layout method: "+t)},e},iD.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],iD.fields=aD;var oD=Object.freeze({nest:Iu,pack:ju,partition:Uu,stratify:$u,tree:Wu,treelinks:qu,treemap:Yu}),rD=function(e){return function(){return e}};Zu.prototype={constructor:Zu,insert:function(e,t){var n,a,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Qu(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)a=n.U,n===a.L?(i=a.R,i&&i.C?(n.C=i.C=!1,a.C=!0,e=a):(e===n.R&&(Ku(this,n),e=n,n=e.U),n.C=!1,a.C=!0,Ju(this,a))):(i=a.L,i&&i.C?(n.C=i.C=!1,a.C=!0,e=a):(e===n.L&&(Ju(this,n),e=n,n=e.U),n.C=!1,a.C=!0,Ku(this,a))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n=e.L,a=e.R,i,o,r;if(o=n?a?Qu(a):n:a,t?t.L===e?t.L=o:t.R=o:this._=o,n&&a?(r=o.C,o.C=e.C,o.L=n,n.U=o,o===a?(o.U=t,t=o,e=o.R):(t=o.U,o.U=e.U,e=o.R,t.L=e,o.R=a,a.U=o)):(r=e.C,e=o),e&&(e.U=t),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===t.L){if(i=t.R,i.C&&(i.C=!1,t.C=!0,Ku(this,t),i=t.R),i.L&&i.L.C||i.R&&i.R.C){i.R&&i.R.C||(i.L.C=!1,i.C=!0,Ju(this,i),i=t.R),i.C=t.C,t.C=i.R.C=!1,Ku(this,t),e=this._;break}}else if(i=t.L,i.C&&(i.C=!1,t.C=!0,Ju(this,t),i=t.L),i.L&&i.L.C||i.R&&i.R.C){i.L&&i.L.C||(i.R.C=!1,i.C=!0,Ku(this,i),i=t.L),i.C=t.C,t.C=i.L.C=!1,Ju(this,t),e=this._;break}i.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};var lD=[],sD=[],dD=1e-6,pD=1e-12,cD,uD,fD,mD,gD;Nf.prototype={constructor:Nf,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return df(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,a){if(d=(s=n.halfedges).length)for(var i=n.site,o=-1,r=t[s[d-1]],l=r.left===i?r.right:r.left,s,d,p;++o<d;)p=l,r=t[s[o]],l=r.left===i?r.right:r.left,p&&l&&a<p.index&&a<l.index&&0>kf(i,p,l)&&e.push([i.data,p.data,l.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,a){for(var i=this,o=i._found||0,r=i.cells.length,n,l;!(l=i.cells[o]);)if(++o>=r)return null;var s=e-l.site[0],d=t-l.site[1],p=s*s+d*d;do l=i.cells[n=o],o=null,l.halfedges.forEach(function(n){var a=i.edges[n],r=a.left;if(r!==l.site&&r||(r=a.right)){var s=e-r[0],d=t-r[1],c=s*s+d*d;c<p&&(p=c,o=r.index)}});while(null!==o);return i._found=n,null==a||p<=a*a?l.site:null}};var _D=function(){function e(e){return new Nf(e.map(function(a,o){var i=[l(t(a,o,e)/dD)*dD,l(n(a,o,e)/dD)*dD];return i.index=o,i.data=a,i}),a)}var t=Vu,n=Gu,a=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(n){return arguments.length?(t="function"==typeof n?n:rD(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:rD(+t),e):n},e.extent=function(t){return arguments.length?(a=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):a&&[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},e.size=function(t){return arguments.length?(a=null==t?null:[[0,0],[+t[0],+t[1]]],e):a&&[a[1][0]-a[0][0],a[1][1]-a[0][1]]},e};Lf.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-100000,-100000],[100000,100000]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var yD=Fh(Lf,bn),hD=[[-100000,-100000],[100000,100000]];yD.transform=function(e,t){var a=e.as||"path",o=t.source,r,l,s,i;for(r=_D().x(e.x).y(e.y),e.size?r.size(e.size):r.extent(e.extent||hD),this.value=r=r(o),l=r.polygons(),(s=0,i=o.length);s<i;++s)o[s][a]=l[s]?"M"+l[s].join("L")+"Z":null;return t.reflow(e.modified()).modifies(a)};var bD=Object.freeze({voronoi:Lf}),xD=o/180,vD=64,cw=2048,ch=function(){function e(e){e.width=e.height=1;var t=u(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(vD<<5)/t,e.height=cw/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function t(e,o,l){for(var d=o.x,p=o.y,c=u(a[0]*a[0]+a[1]*a[1]),f=n(a),s=.5>r()?1:-1,m=-s,t,g,_;(t=f(m+=s))&&(g=~~t[0],_=~~t[1],!(S(T(g),T(_))>=c));)if(o.x=d+g,o.y=p+_,!(0>o.x+o.x0||0>o.y+o.y0||o.x+o.x1>a[0]||o.y+o.y1>a[1])&&(!l||!wf(o,e,a[0]))&&(!l||Of(o,l))){for(var y=o.sprite,b=o.width>>5,v=a[0]>>5,k=o.x-(b<<4),E=127&k,N=o.y1-o.y0,h=(o.y+o.y0)*v+(k>>5),x=0,A;x<N;x++){A=0;for(var w=0;w<=b;w++)e[h+w]|=A<<32-E|(w<b?(A=y[x*b+w])>>>E:0);h+=v}return o.sprite=null,!0}return!1}var a=[256,256],n=Df,o=[],r=Math.random,i={},l,s,p,c,f,m,g;return i.layout=function(){for(var u=e(Rf()),_=Pf((a[0]>>5)*a[1]),y=null,h=o.length,n=-1,i=[],b=o.map(function(e){return{text:l(e),font:s(e),style:c(e),weight:f(e),rotate:m(e),size:~~p(e),padding:g(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size}),x;++n<h;)x=b[n],x.x=a[0]*(r()+.5)>>1,x.y=a[1]*(r()+.5)>>1,Af(u,x,b,n),x.hasText&&t(_,x,y)&&(i.push(x),y?Cf(y,x):y=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=a[0]>>1,x.y-=a[1]>>1);return i},i.words=function(e){return arguments.length?(o=e,i):o},i.size=function(e){return arguments.length?(a=[+e[0],+e[1]],i):a},i.font=function(e){return arguments.length?(s=If(e),i):s},i.fontStyle=function(e){return arguments.length?(c=If(e),i):c},i.fontWeight=function(e){return arguments.length?(f=If(e),i):f},i.rotate=function(e){return arguments.length?(m=If(e),i):m},i.text=function(e){return arguments.length?(l=If(e),i):l},i.spiral=function(e){return arguments.length?(n=SD[e]||e,i):n},i.fontSize=function(e){return arguments.length?(p=If(e),i):p},i.padding=function(e){return arguments.length?(g=If(e),i):g},i.random=function(e){return arguments.length?(r=e,i):r},i},SD={archimedean:Df,rectangular:function(e){var n=4,a=n*e[0]/e[1],i=0,o=0;return function(e){var t=0>e?-1:1;switch(3&u(1+4*t*e)-t){case 0:i+=a;break;case 1:o+=n;break;case 2:i-=a;break;default:o-=n;}return[i,o]}}},TD=["x","y","font","fontSize","fontStyle","fontWeight","angle"],kD=["text","font","rotate","fontSize","fontStyle","fontWeight"];Mf.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:TD}]};var ED=Fh(Mf,bn);ED.transform=function(e,a){var o=e.modified();if(o||a.changed(a.ADD_REM)||kD.some(function(t){var n=e[t];return wh(n)&&a.modified(n.fields)})){var r=a.materialize(a.SOURCE).source,l=this.value,s=e.as||TD,d=e.fontSize||14,p;if(wh(d)?p=e.fontSizeRange:d=Oh(d),p){var c=d,u=cs("sqrt")().domain(Ff(c,r)).range(p);d=function(e){return u(c(e))}}r.forEach(function(e){e[s[0]]=NaN,e[s[1]]=NaN,e[s[3]]=0});for(var f=l.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(d).random(h.random).layout(),m=l.size(),g=m[0]>>1,_=m[1]>>1,y=0,i=f.length,n,b;y<i;++y)n=f[y],b=n.datum,b[s[0]]=n.x+g,b[s[1]]=n.y+_,b[s[2]]=n.font,b[s[3]]=n.size,b[s[4]]=n.style,b[s[5]]=n.weight,b[s[6]]=n.rotate;return a.reflow(o).modifies(s)}};var ND=Object.freeze({wordcloud:Mf}),LD=function(e,t,n){var a=1<<t;return{one:a,zero:~a,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n=this,o=n.bisect(n.range,e.value),r=e.index,l=o[0],s=o[1],d=r.length,p;for(p=0;p<l;++p)t[r[p]]|=a;for(p=s;p<d;++p)t[r[p]]|=a;return n}}};Vf.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var AD=Fh(Vf,bn);AD.transform=function(e,t){if(!this._dims)return this.init(e,t);var n=e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)});return n?this.reinit(e,t):this.eval(e,t)},AD.init=function(e,t){for(var n=e.fields,a=e.query,o=this._indices={},r=this._dims=[],l=a.length,s=0,i,d;s<l;++s)i=n[s].fname,d=o[i]||(o[i]=qf()),r.push(LD(d,s,a[s]));return this.eval(e,t)},AD.reinit=function(e,t){var a=t.materialize().fork(),o=e.fields,r=e.query,l=this._indices,s=this._dims,d=this.value,p=d.curr(),c=d.prev(),u=d.all(),g=a.rem=a.add,_=a.mod,y=r.length,m={},h,b,x,v,S,T,k,i,n;if(c.set(p),t.rem.length&&(S=this.remove(e,t,a)),t.add.length&&d.add(t.add),t.mod.length)for(T={},v=t.mod,k=0,i=v.length;k<i;++k)T[v[k]._index]=1;for(k=0;k<y;++k)n=o[k],(!s[k]||e.modified("fields",k)||t.modified(n.fields))&&(x=n.fname,!(h=m[x])&&(l[x]=b=qf(),m[x]=h=b.insert(n,t.source,0)),s[k]=LD(b,k,r[k]).onAdd(h,p));for(k=0,i=d.data().length;k<i;++k)if(S[k])continue;else c[k]===p[k]?T[k]&&p[k]!==u&&_.push(k):g.push(k);return d.mask=(1<<y)-1,a},AD.eval=function(e,t){var n=t.materialize().fork(),a=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<a)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<a)-1),t.mod.length&&(this.modify(t,n),i|=(1<<a)-1),this.value.mask=i,n},AD.insert=function(e,t,a){var i=t.add,o=this.value,r=this._dims,l=this._indices,s=e.fields,d={},p=a.add,c=o.size(),u=c+i.length,n=r.length,f,m,g;o.resize(u,n),o.add(i);var _=o.curr(),y=o.prev(),h=o.all();for(f=0;f<n;++f)m=s[f].fname,g=d[m]||(d[m]=l[m].insert(s[f],i,c)),r[f].onAdd(g,_);for(;c<u;++c)y[c]=h,_[c]!==h&&p.push(c)},AD.modify=function(e,t){var a=t.mod,o=this.value,r=o.curr(),l=o.all(),s=e.mod,d,i,n;for(d=0,i=s.length;d<i;++d)n=s[d]._index,r[n]!==l&&a.push(n)},AD.remove=function(e,t,a){var o=this._indices,r=this.value,l=r.curr(),s=r.prev(),d=r.all(),p={},c=a.rem,u=t.rem,m,i,n,g;for(m=0,i=u.length;m<i;++m)n=u[m]._index,p[n]=1,s[n]=g=l[n],l[n]=d,g!==d&&c.push(n);for(n in o)o[n].remove(i,p);return this.reindex(t,i,p),p},AD.reindex=function(e,t,n){var a=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var o in a)a[o].reindex(e)})},AD.update=function(e,t,n){var a=this._dims,o=e.query,r=t.stamp,l=a.length,s=0,d,i;for(n.filters=0,i=0;i<l;++i)e.modified("query",i)&&(d=i,++s);if(1==s)s=a[d].one,this.incrementOne(a[d],o[d],n.add,n.rem);else for(i=0,s=0;i<l;++i)e.modified("query",i)&&(s|=a[i].one,this.incrementAll(a[i],o[i],r,n.add),n.rem=n.add);return s},AD.incrementAll=function(e,t,n,a){var o=this.value,r=o.seen(),l=o.curr(),s=o.prev(),d=e.index(),p=e.bisect(e.range),c=e.bisect(t),u=c[0],f=c[1],m=p[0],g=p[1],_=e.one,y,i,h;if(u<m)for(y=u,i=S(m,f);y<i;++y)h=d[y],r[h]!==n&&(s[h]=l[h],r[h]=n,a.push(h)),l[h]^=_;else if(u>m)for(y=m,i=S(u,g);y<i;++y)h=d[y],r[h]!==n&&(s[h]=l[h],r[h]=n,a.push(h)),l[h]^=_;if(f>g)for(y=N(u,g),i=f;y<i;++y)h=d[y],r[h]!==n&&(s[h]=l[h],r[h]=n,a.push(h)),l[h]^=_;else if(f<g)for(y=N(m,f),i=g;y<i;++y)h=d[y],r[h]!==n&&(s[h]=l[h],r[h]=n,a.push(h)),l[h]^=_;e.range=t.slice()},AD.incrementOne=function(e,t,n,a){var o=this.value,r=o.curr(),l=e.index(),s=e.bisect(e.range),d=e.bisect(t),p=d[0],c=d[1],u=s[0],f=s[1],m=e.one,g,i,_;if(p<u)for(g=p,i=S(u,c);g<i;++g)_=l[g],r[_]^=m,n.push(_);else if(p>u)for(g=u,i=S(p,f);g<i;++g)_=l[g],r[_]^=m,a.push(_);if(c>f)for(g=N(p,f),i=c;g<i;++g)_=l[g],r[_]^=m,n.push(_);else if(c<f)for(g=N(u,c),i=f;g<i;++g)_=l[g],r[_]^=m,a.push(_);e.range=t.slice()},Gf.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};var wD=Fh(Gf,bn);wD.transform=function(e,t){var n=~(e.ignore||0),a=e.filter,i=a.mask;if(0==(i&n))return t.StopPropagation;var o=t.fork(t.ALL),r=a.data(),l=a.curr(),s=a.prev(),d=function(e){return l[e]&n?null:r[e]};return o.filter(o.MOD,d),i&i-1?(o.filter(o.ADD,function(e){var t=l[e]&n,a=!t&&t^s[e]&n;return a?r[e]:null}),o.filter(o.REM,function(e){var t=l[e]&n,a=t&&!(t^(t^s[e]&n));return a?r[e]:null})):(o.filter(o.ADD,d),o.filter(o.REM,function(e){return(l[e]&n)===i?r[e]:null})),o.filter(o.SOURCE,function(e){return d(e._index)})};var CD=Object.freeze({crossfilter:Vf,resolvefilter:Gf}),xf="default",OD=function(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:xf,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var a=t.value,i=a?uh(a)?a:a.user:xf,o=n.item&&n.item.cursor||null;return a&&i===a.user&&o==a.item?a:{user:i,item:o}}),e.add(null,function(e){var t=e.cursor,n=this.value;return uh(t)||(n=t.item,t=t.user),Zf(t&&t!==xf?t:n||t),n},{cursor:t})},DD=function(t,n,a){var i=t._renderer.scene(),o,r,e;return i&&(e=em(t),r=n.changedTouches?n.changedTouches[0]:n,o=ZT(r,i),o[0]-=e[0],o[1]-=e[1]),n.dataflow=t,n.vega=nm(t,a,o),n.item=a,n},PD="view",RD=function(e,t,n){var a=document.createElement(e);for(var i in t)a.setAttribute(i,t[i]);return null!=n&&(a.textContent=n),a},ID="vega-bind",MD="vega-bind-name",FD="vega-bind-radio",BD="vega-option-",zD=function(e,t,n){if(t){var a=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){i.source=!0,e.signal(a.signal,t).run()}},a.debounce&&(i.update=Dh(a.debounce,i.update))),sm(i,t,a,e.signal(a.signal)),i.active||(e.on(e._signals[a.signal],null,function(){i.source?i.source=!1:i.set(e.signal(a.signal))}),i.active=!0),i}},jD=function(e,t,n,a){return t=t||new a(e.loader()),t.initialize(n,Jf(e),Qf(e),em(e)).background(e._background)},UD=function(e,t,n,a){var i=new a().scene(e.scenegraph().root).initialize(n,em(e),e);return t&&(i.handleTooltip=t.handleTooltip,t.handlers().forEach(function(e){i.on(e.type,e.handler)})),i},$D=function(e,t){var n=ar(t);return n&&n.headless?e.runAsync().then(function(){return jD(e,null,null,n.headless).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)},WD=function(e,t){return e=e||t.autosize,ph(e)?e:(e=e||"pad",{type:e})},qD=function(e,t){return e=e||t.padding,ph(e)?{top:ym(e.top),bottom:ym(e.bottom),left:ym(e.left),right:ym(e.right)}:hm(ym(e))},HD=["value","update","react","bind"],YD=function(e,t){var n=e.name;if(e.push==="outer")t.signals[n]||bm("No prior signal definition",n),HD.forEach(function(t){void 0!==e[t]&&bm("Invalid property ",t)});else{var a=t.addSignal(n,e.value);!1===e.react&&(a.react=!1),e.bind&&t.addBinding(n,e.bind)}};xm.prototype.visit=function(e){var t=this,a,o,i;if(e(t))return 1;for(a=vm(t),o=0,i=a.length;o<i;++o)if(a[o].visit(e))return 1};var VD=1,GD=2,ZD=3,XD=4,KD=5,JD=6,QD=7,eP=8,tP="ArrayExpression",nP="BinaryExpression",aP="CallExpression",iP="ConditionalExpression",oP="Identifier",rP="Literal",lP="LogicalExpression",sP="MemberExpression",dP="ObjectExpression",pP="Property",cP="UnaryExpression",uP="Unexpected token %0",fP="Unexpected number",mP="Unexpected string",gP="Unexpected identifier",_P="Unexpected reserved word",yP="Unexpected end of input",hP="Invalid regular expression",bP="Invalid regular expression: missing /",xP="Octal literals are not allowed in strict mode.",vP="Duplicate data property in object literal not allowed in strict mode",SP="ILLEGAL",TP="Disabled.",kP=/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/,EP=/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/,NP={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},LP={if:1,this:1},AP=function(e){JP=e,QP=0,eR=JP.length,tR=null,Gm();var t=Ng();if(tR.type!==GD)throw new Error("Unexpect token after expression.");return t},wP={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},CP=function(e){function t(t,n,a,i){var o=e(n[0]);return a&&(o=a+"("+o+")",0===a.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(0>i?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,a){return function(i){return t(e,i,n,a)}}var a="new Date",i="String",o="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){3>t.length&&lh("Missing arguments to clamp function."),3<t.length&&lh("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:a,date:n("getDate",a,0),day:n("getDay",a,0),year:n("getFullYear",a,0),month:n("getMonth",a,0),hours:n("getHours",a,0),minutes:n("getMinutes",a,0),seconds:n("getSeconds",a,0),milliseconds:n("getMilliseconds",a,0),time:n("getTime",a,0),timezoneoffset:n("getTimezoneOffset",a,0),utcdate:n("getUTCDate",a,0),utcday:n("getUTCDay",a,0),utcyear:n("getUTCFullYear",a,0),utcmonth:n("getUTCMonth",a,0),utchours:n("getUTCHours",a,0),utcminutes:n("getUTCMinutes",a,0),utcseconds:n("getUTCSeconds",a,0),utcmilliseconds:n("getUTCMilliseconds",a,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),replace:n("replace",i),regexp:o,test:n("test",o),if:function(t){3>t.length&&lh("Missing arguments to if function."),3<t.length&&lh("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}},OP={},DP=new Date(2e3,0,1),PP="undefined"!=typeof window&&window||null,RP="Literal",IP="Identifier",MP="@",FP="%",BP=":",zP=Rg("area"),jP=Rg("bounds"),UP=Rg("centroid"),$P={},WP=function(e,n,a,i){var o=n[0],r=n[n.length-1],l;return o>r&&(l=o,o=r,r=l),a=void 0===a||a,i=void 0===i||i,(a?o<=e:o<e)&&(i?e<=r:e<r)},qP="bin_",HP="intersect",YP="union",VP="index:unit",GP={random:function(){return h.random()},isArray:dh,isBoolean:Bh,isDate:zh,isNumber:jh,isObject:ph,isRegExp:Uh,isString:uh,isTuple:Y,toBoolean:Yh,toDate:Vh,toNumber:Lh,toString:Gh,pad:Hh,peek:Nh,truncate:Xh,rgb:Yr,lab:el,hcl:ll,hsl:Xr,sequence:ov,format:function(e,t){return Lg("format",jN,t)(e)},utcFormat:function(e,t){return Lg("utcFormat",Tx,t)(e)},utcParse:function(e,t){return Lg("utcParse",kx,t)(e)},timeFormat:Ag,timeParse:function(e,t){return Lg("timeParse",Sx,t)(e)},monthFormat:function(e){return wg(e,1,"%B")},monthAbbrevFormat:function(e){return wg(e,1,"%b")},dayFormat:function(e){return wg(0,2+e,"%A")},dayAbbrevFormat:function(e){return wg(0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},warn:function(){return Cg(this.context.dataflow,"warn",arguments)},info:function(){return Cg(this.context.dataflow,"info",arguments)},debug:function(){return Cg(this.context.dataflow,"debug",arguments)},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},clampRange:function(e,t,n){var a=e[0],i=e[1],o;return i<a&&(o=i,i=a,a=o),o=i-a,o>=n-t?[t,n]:[S(N(a,t),n-o),S(N(i,o),n)]},pinchDistance:function(e){var n=e.touches,t=n[0].clientX-n[1].clientX,a=n[0].clientY-n[1].clientY;return u(t*t+a*a)},pinchAngle:function(e){var n=e.touches;return nh(n[0].clientY-n[1].clientY,n[0].clientX-n[1].clientX)},screen:function(){return PP?PP.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){return PP?[PP.innerWidth,PP.innerHeight]:[void 0,void 0]},span:function(e){return e[e.length-1]-e[0]||0},flush:function(e,t,n,a,i,o){var s=T(t-e[0]),l=T(Nh(e)-t);return s<l&&s<=n?a:l<=n?i:o},bandspace:function(e,t,n){return bE(e||0,t||0,n||0)},inrange:WP,setdata:function(e,t){var n=this.context.dataflow,a=this.context.data[e],i=a.input;return n.pulse(i,n.changeset().remove(hh).insert(t)),1},panLinear:M,panLog:F,panPow:z,zoomLinear:U,zoomLog:$,zoomPow:W,encode:function(e,t,n){if(e){var a=this.context.dataflow,i=e.mark.source;a.pulse(i,a.changeset().encode(e,t))}return n===void 0?e:n},modify:function(e,t,n,a,i,o){var r=this.context.dataflow,l=this.context.data[e],s=l.input,d=l.changes,p=r.stamp(),c,u;if(!1===r._trigger||!(s.value.length||t||a))return 0;if((!d||d.stamp<p)&&(l.changes=d=r.changeset(),d.stamp=p,r.runAfter(function(){l.modified=!0,r.pulse(s,d).run()},!0)),n&&(c=!0===n?hh:dh(n)||Y(n)?n:Ug(n),d.remove(c)),t&&d.insert(t),a&&(c=Ug(a),s.value.some(c)?d.remove(c):d.insert(a)),i)for(u in o)d.modify(i,u,o[u]);return 1}},ZP=["view","item","group","xy","x","y"],XP="this.",KP={},JP,QP,eR,tR;/**
 * Span-preserving range clamp. If the span of the input range is less
 * than (max - min) and an endpoint exceeds either the min or max value,
 * the range is translated such that the span is preserved and one
 * endpoint touches the boundary of the min/max range.
 * If the span exceeds (max - min), the range [min, max] is returned.
 */Jg("bandwidth",function(e,t){var n=Og(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},Pg),Jg("copy",function(e,t){var n=Og(e,(t||this).context);return n?n.copy():void 0},Pg),Jg("domain",function(e,t){var n=Og(e,(t||this).context);return n?n.domain():[]},Pg),Jg("range",function(e,t){var n=Og(e,(t||this).context);return n&&n.range?n.range():[]},Pg),Jg("invert",function(e,t,n){var a=Og(e,(n||this).context);return a?dh(t)?(a.invertRange||a.invert)(t):(a.invert||a.invertExtent)(t):void 0},Pg),Jg("scale",function(e,t,n){var a=Og(e,(n||this).context);return a?a(t):void 0},Pg),Jg("gradient",function(e,t,a,o){var r=sS(t,a),l=e.domain(),s=l[0],d=l[l.length-1],p=gs(e,s,d);e.ticks&&(l=e.ticks(+o||15),s!==l[0]&&l.unshift(s),d!==l[l.length-1]&&l.push(d));for(var c=0,i=l.length;c<i;++c)r.stop(p(l[c]),e(l[c]));return r},Pg),Jg("geoArea",zP,Pg),Jg("geoBounds",jP,Pg),Jg("geoCentroid",UP,Pg),Jg("indata",function(e,t,n){var a=this.context.data[e]["index:"+t],i=a?a.value.get(n):void 0;return i?i.count:i},function(e,t,n,a){t[0].type!==RP&&lh("First argument to indata must be a string literal."),t[1].type!==RP&&lh("Second argument to indata must be a string literal.");var i=t[0].value,o=t[1].value,r=MP+o;a.hasOwnProperty(r)||(a[r]=n.getData(i).indataRef(n,o))}),Jg("data",Ig,Mg),Jg("vlSingle",Hg,Mg),Jg("vlSingleDomain",Vg,Mg),Jg("vlMulti",Hg,Yg),Jg("vlMultiDomain",Vg,Yg),Jg("vlInterval",function(e,t,n){return qg.call(this,e,t,n,Wg)},Mg),Jg("vlIntervalDomain",function(e,t,a,o){var r=this.context.data[e],l=r?r.values.value:[],s=l[0],d=0,i,n,p,c,u;if(s){for(i=s.intervals.length;d<i;++d)if(n=s.intervals[d],t&&n.encoding===t||a&&n.field===a){if(!n.extent)return;p=d,u=2<n.extent.length;break}return c=l.reduce(function(e,t){var n=t.intervals[p].extent,a=u?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return u?e.push.apply(e,a):e.push(a),e},[]),u?Gg(c,o):Zg(c,o)}},Mg),Jg("treePath",function(e,n,a){var i=Bg(e,this),o=i[n],r=i[a];return o&&r?o.path(r).map(Fg):void 0},Mg),Jg("treeAncestors",function(e,t){var a=Bg(e,this)[t];return a?a.ancestors().map(Fg):void 0},Mg);var nR={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+w("$"+e)+"]"},functions:function(e){var t=CP(e);for(var n in ZP.forEach(function(e){t[e]="event.vega."+e}),GP)t[n]=XP+n;return t},constants:wP,visitors:KP},aR=function(e){function t(e){if(uh(e))return e;var t=f[e.type];return null==t&&lh("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(d),fields:Object.keys(c)};return d={},c={},n}e=e||{};var a=e.whitelist?Zh(e.whitelist):{},i=e.blacklist?Zh(e.blacklist):{},o=e.constants||wP,r=(e.functions||CP)(t),l=e.globalvar,s=e.fieldvar,d={},c={},u=0,p=wh(l)?l:function(e){return l+"[\""+e+"\"]"},f={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return 0<u?t:i.hasOwnProperty(t)?lh("Illegal identifier: "+t):o.hasOwnProperty(t)?o[t]:a.hasOwnProperty(t)?t:(d[t]=1,p(t))},MemberExpression:function(e){var n=!e.computed,a=t(e.object);n&&(u+=1);var i=t(e.property);return a===s&&(c[i]=1),n&&(u-=1),a+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&lh("Illegal callee type: "+e.callee.type);var n=e.callee.name,a=e.arguments,i=r.hasOwnProperty(n)&&r[n];return i||lh("Unrecognized function: "+n),wh(i)?i(a):i+"("+a.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){u+=1;var n=t(e.key);return u-=1,n+":"+t(e.value)}};return n.functions=r,n.constants=o,n}(nR),iR=function(e,t,n){var a={},i,o;try{i=AP(e)}catch(t){lh("Expression parse error: "+w(e))}return i.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,i=nR.visitors[n];i&&i(n,e.arguments,t,a)}}),o=aR(i),o.globals.forEach(function(e){var n="$"+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))}),{$expr:n?n+"return("+o.code+");":o.code,$fields:o.fields,$params:a}},oR="view",rR="scope",lR=function(e,t){return e.signal?t.getSignal(e.signal).id:e.scale?t.getScale(e.scale).id:e_(e,t)},sR=function(e,t,n){return VI=t||"view",GI=n||yR,s_(e.trim()).map(d_)},dR="[",pR="]",cR="{",uR="}",fR=":",mR=",",gR="@",_R=">",GT=/[[\]{}]/,yR={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},hR="var datum=event.item&&event.item.datum;",bR=function(e,t,n){var a=e.events,i=e.update,o=e.encode,r=[],l="",s;a||lh("Signal update missing events specification."),uh(a)&&(a=sR(a)),a=Ah(a).filter(function(e){return e.signal||e.scale?(r.push(e),0):1}),a.length&&r.push(1<a.length?{merge:a}:a[0]),null!=o&&(i&&lh("Signal encode and update are mutually exclusive."),i="encode(item(),"+w(o)+")"),l=uh(i)?iR(i,t,hR):null==i.expr?null==i.value?null==i.signal?lh("Invalid signal update specification."):{$expr:"_.value",$params:{value:t.signalRef(i.signal)}}:i.value:iR(i.expr,t,hR),s={target:n,update:l},e.force&&(s.options={force:!0}),r.forEach(function(e){e={source:lR(e,t)},t.addUpdate(Ph(e,s))})},xR=function(e,t){var n=t.getSignal(e.name);if(e.update){var a=iR(e.update,t);n.update=a.$expr,n.params=a.$params}e.on&&e.on.forEach(function(e){bR(e,t,n.id)})},vR={$tupleid:1,toString:function(){return":_tupleid_:"}},SR=y_("key"),TR="descending",kR=k_("aggregate"),ER=k_("axisticks"),NR=k_("bound"),LR=k_("collect"),AR=k_("compare"),wR=k_("datajoin"),CR=k_("encode"),OR=k_("facet"),DR=k_("field"),PR=k_("key"),RR=k_("legendentries"),IR=k_("mark"),MR=k_("multiextent"),FR=k_("multivalues"),BR=k_("overlap"),zR=k_("params"),jR=k_("prefacet"),UR=k_("projection"),$R=k_("proxy"),WR=k_("relay"),qR=k_("render"),HR=k_("scale"),YR=k_("sieve"),VR=k_("sortitems"),GR=k_("viewlayout"),ZR=k_("values"),XR=0,KR=["identity","ordinal","band","point","bin-linear","bin-ordinal","linear","pow","sqrt","log","sequential","time","utc","quantize","quantile","threshold"],JR=Zh(KR),QR=Zh(KR.slice(1,6)),eI=function(e,t){var n={};for(var a in e)"name"!=a&&(n[a]=q_(e[a],t));t.addProjection(e.name,n)},tI="top",nI="left",aI="bottom",iI="index",oI="label",rI="offset",lI="perc",sI="size",dI="total",pI="value",cI="guide-label",uI="guide-title",fI="group-title",mI=["shape","size","fill","stroke","strokeDash","opacity"],gI={name:1,interactive:1},_I=Zh(["rule"]),yI=Zh(["group","image","rect"]),hI=function(e,t){var n="";return _I[t]?n:(e.x2&&(e.x?(yI[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(yI[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)},bI=function(e,t,n,i){function a(e,o,r,l){var s=EI(null,o,t,n,i),a=EI(null,r,t,n,i),d=EI(null,l,t,n,i);return"this."+e+"("+[s,a,d].join(",")+").toString()"}return e.c?a("hcl",e.h,e.c,e.l):e.h||e.s?a("hsl",e.h,e.s,e.l):e.l||e.a?a("lab",e.l,e.a,e.b):e.r||e.g||e.b?a("rgb",e.r,e.g,e.b):null},xI=function(e,t,n,a){var i=iR(e,t);return i.$fields.forEach(function(e){a[e]=1}),Ph(n,i.$params),i.$expr},vI=function(e,t,n,a){return H_(ph(e)?e:{datum:e},t,n,a)},SI=function(e,t,n,a,i){var o=V_(e.scale,n,a,i),r,l,s;return null==e.range?(void 0!==t&&(t=o+"("+t+")"),e.band&&(s=Y_(e.scale,n))&&(l=o+".bandwidth",r=+e.band,r=l+"()"+(1===r?"":"*"+r),0>s&&(r="("+l+"?"+r+":0)"),t=(t?t+"+":"")+r,e.extra&&(t="(datum.extra?"+o+"(datum.extra.value):"+t+")")),null==t&&(t="0")):(r=+e.range,l=o+".range()",t=0===r?l+"[0]":"($="+l+","+(1===r?"$[$.length-1]":"$[0]+"+r+"*($[$.length-1]-$[0])")+")"),t},TI=function(e,t,n,a){return"this.gradient("+V_(e.gradient,t,n,a)+","+w(e.start)+","+w(e.stop)+","+w(e.count)+")"},kI=function(e,t,n,a){return ph(e)?"("+EI(null,e,t,n,a)+")":e},EI=function(e,t,n,a,i){if(null!=t.gradient)return TI(t,n,a,i);var o=t.signal?xI(t.signal,n,a,i):t.color?bI(t.color,n,a,i):null==t.field?void 0===t.value?void 0:w(t.value):vI(t.field,n,a,i);return null!=t.scale&&(o=SI(t,o,n,a,i)),void 0===o&&(o=null),null!=t.exponent&&(o="Math.pow("+o+","+kI(t.exponent,n,a,i)+")"),null!=t.mult&&(o+="*"+kI(t.mult,n,a,i)),null!=t.offset&&(o+="+"+kI(t.offset,n,a,i)),t.round&&(o="Math.round("+o+")"),o},NI=function(e,t,n){return e+"["+w(t)+"]="+n+";"},LI=function(e,t,n,a,i){var o="";return t.forEach(function(t){var r=EI(e,t,n,a,i);o+=t.test?xI(t.test,n,a,i)+"?"+r+":":r}),NI("o",e,o)},AI="mark",wI="frame",CI="scope",OI="legend-label",DI="title",PI=function(e,t,n,a,i,o,r){return{type:e,name:r?r.name:void 0,role:t,style:r&&r.style||n,key:a,from:i,interactive:!!(r&&r.interactive),encode:K_(o,r,gI)}},RI="group",II="rule",MI="text",FI=function(e,t,n,a){var i={value:0},o={},r,l;return o.enter=r={opacity:i,x:i,y:i},X_(r,"width",n.gradientWidth),X_(r,"height",n.gradientHeight),X_(r,"stroke",n.gradientStrokeColor),X_(r,"strokeWidth",n.gradientStrokeWidth),o.exit={opacity:i},o.update=l={x:i,y:i,fill:{gradient:t},opacity:{value:1}},X_(l,"width",n.gradientWidth),X_(l,"height",n.gradientHeight),PI("rect","legend-gradient",null,void 0,void 0,o,a)},BI=function(e,t,n,a){var i={value:0},o={},r,l;return o.enter=r={opacity:i},X_(r,"fill",t.labelColor),X_(r,"font",t.labelFont),X_(r,"fontSize",t.labelFontSize),X_(r,"baseline",t.gradientLabelBaseline),X_(r,"limit",t.gradientLabelLimit),o.exit={opacity:i},o.update=l={opacity:{value:1},text:{field:oI}},r.x=l.x={field:lI,mult:t.gradientWidth},r.y=l.y={value:t.gradientHeight,offset:t.gradientLabelOffset},r.align=l.align={signal:"datum."+lI+"<=0?\"left\":datum."+lI+">=1?\"right\":\"center\""},PI(MI,OI,cI,lI,a,o,n)},zI=function(e,t,n,a){var i={value:0},o={},r,l;return o.enter=r={opacity:i},X_(r,"align",t.labelAlign),X_(r,"baseline",t.labelBaseline),X_(r,"fill",t.labelColor),X_(r,"font",t.labelFont),X_(r,"fontSize",t.labelFontSize),X_(r,"limit",t.labelLimit),o.exit={opacity:i},o.update=l={opacity:{value:1},text:{field:oI}},r.x=l.x={field:rI,offset:t.labelOffset},r.y=l.y={field:sI,mult:0.5,offset:{field:dI,offset:{field:{group:"entryPadding"},mult:{field:iI}}}},PI(MI,OI,cI,pI,a,o,n)},jI=function(e,t,n,a){var i={value:0},o={},r,l;return o.enter=r={opacity:i},X_(r,"shape",t.symbolType),X_(r,"size",t.symbolSize),X_(r,"strokeWidth",t.symbolStrokeWidth),e.fill||(X_(r,"fill",t.symbolFillColor),X_(r,"stroke",t.symbolStrokeColor)),o.exit={opacity:i},o.update=l={opacity:{value:1}},r.x=l.x={field:rI,mult:0.5},r.y=l.y={field:sI,mult:0.5,offset:{field:dI,offset:{field:{group:"entryPadding"},mult:{field:iI}}}},mI.forEach(function(t){e[t]&&(l[t]=r[t]={scale:e[t],field:pI})}),PI("symbol","legend-symbol",null,pI,a,o,n)},UI=function(e,t,n,a){var i={value:0},o=e.title,r={},l;return r.enter=l={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:i},X_(l,"align",t.titleAlign),X_(l,"baseline",t.titleBaseline),X_(l,"fill",t.titleColor),X_(l,"font",t.titleFont),X_(l,"fontSize",t.titleFontSize),X_(l,"fontWeight",t.titleFontWeight),X_(l,"limit",t.titleLimit),r.exit={opacity:i},r.update={opacity:{value:1},text:o&&o.signal?{signal:o.signal}:{value:o+""}},PI(MI,"legend-title",uI,null,a,r,n)},$I=function(e,t,n,a,i,o,r){return{type:RI,name:n,role:e,style:t,from:a,interactive:i,encode:o,marks:r}},WI=function(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===RI?CI:t||AI:t},qI=function(e){return{clip:e.clip||!1,interactive:!1!==e.interactive,marktype:e.type,name:e.name||void 0,role:e.role||WI(e),zindex:+e.zindex||void 0}},HI=function(e,n){var a=xn(e.type);a||lh("Unrecognized transform type: "+w(e.type));var i=m_(a.type.toLowerCase(),null,ty(a,e,n));return e.signal&&n.addSignal(e.signal,n.proxy(i)),i.metadata=a.metadata||{},i},YI=function(e,t,n){var a,i,o,r,l;return e?(a=e.facet)&&(!t&&lh("Only group marks can be faceted."),null==a.field?(e.data?l=__(n.getData(e.data).aggregate):(o=HI(Ph({type:"aggregate",groupby:Ah(a.groupby)},a.aggregate),n),o.params.key=n.keyRef(a.groupby),o.params.pulse=__(n.getData(a.data).output),r=l=__(n.add(o))),i=n.keyRef(a.groupby,!0)):r=l=__(n.getData(a.data).output)):r=__(n.add(LR(null,[{}]))),r||(r=e.$ref?e:__(n.getData(e.data).output)),{key:i,pulse:r,parent:l}},VI,GI;fy.fromEntries=function(e,t){var a=t.length,n=1,i=t[0],o=t[a-1],r=t[a-2],l=null;for(e.add(t[0]);n<a;++n)t[n].params.pulse=__(t[n-1]),e.add(t[n]),"aggregate"===t[n].type&&(l=t[n]);return new fy(e,i,r,o,l)};var ZI=fy.prototype;ZI.countsRef=function(e,t,n){var i=this,o=i.counts||(i.counts={}),r=my(t),l,s,d;return null!=r&&(e=i.scope,l=o[r]),l?n&&n.field&&gy(e,l.agg.params,n):(d={groupby:e.fieldRef(t,"key"),pulse:__(i.output)},n&&n.field&&gy(e,d,n),s=e.add(kR(d)),l=e.add(LR({pulse:__(s)})),l={agg:s,ref:__(l)},null!=r&&(o[r]=l)),l.ref},ZI.tuplesRef=function(){return __(this.values)},ZI.extentRef=function(e,t){return _y(e,this,"extent","extent",t,!1)},ZI.domainRef=function(e,t){return _y(e,this,"domain","values",t,!1)},ZI.valuesRef=function(e,t,n){return _y(e,this,"vals","values",t,n||!0)},ZI.lookupRef=function(e,t){return _y(e,this,"lookup","tupleindex",t,!1)},ZI.indataRef=function(e,t){return _y(e,this,"indata","tupleindex",t,!0,!0)};var XI=function(e,t,n){var a=e.from.facet,i=a.name,o=__(t.getData(a.data).output),r,l,s,d;a.name||lh("Facet must have a name: "+w(a)),a.data||lh("Facet must reference a data set: "+w(a)),a.field?d=t.add(jR({field:t.fieldRef(a.field),pulse:o})):a.groupby?d=t.add(OR({key:t.keyRef(a.groupby),group:__(t.proxy(n.parent)),pulse:o})):lh("Facet must specify groupby or field: "+w(a)),r=t.fork(),l=r.add(LR()),s=r.add(YR({pulse:__(l)})),r.addData(i,new fy(r,l,l,s)),r.addSignal("parent",null),d.params.subflow={$subflow:dM(e,r).toRuntime()}},KI=function(e,t,n){var a=t.add(jR({pulse:n.pulse})),i=t.fork();i.add(YR()),i.addSignal("parent",null),a.params.subflow={$subflow:dM(e,i).toRuntime()}},JI=function(e,t,n){var a=e.remove,i=e.insert,o=e.toggle,r=e.modify,l=e.values,s=t.add(g_()),d,p;d="if("+e.trigger+",modify(\""+n+"\","+[i,a,o,r,l].map(function(e){return null==e?"null":e}).join(",")+"),0)",p=iR(d,t),s.update=p.$expr,s.params=p.$params},QI=function(e,t){var n=WI(e),a=e.type===RI,i=e.from&&e.from.facet,o=e.layout||n===CI||n===wI,r=n===AI||o||i,l=e.overlap,s,d,p,c,u,f,m,g,_,y,h,b,x;p=YI(e.from,a,t),d=t.add(wR({key:p.key||(e.key?y_(e.key):void 0),pulse:p.pulse,clean:!a})),_=__(d),d=c=t.add(LR({pulse:_})),d=t.add(IR({markdef:qI(e),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:__(d)})),y=__(d),d=t.add(CR(J_(e.encode,e.type,n,e.style,t,{pulse:y}))),d.params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=HI(e,t);(n.metadata.generates||n.metadata.changes)&&lh("Mark transforms should not generate new data."),n.params.pulse=__(d),t.add(d=n)}),e.sort&&(d=t.add(VR({sort:t.compareRef(e.sort),pulse:__(d)}))),h=__(d),(i||o)&&(o=t.add(GR({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:y,pulse:h})),b=__(o)),u=t.add(NR({mark:y,pulse:b||h})),x=__(u),a&&(r&&(s=t.operators,s.pop(),o&&s.pop()),t.pushState(h,b||x,_),i?XI(e,t,p):r?KI(e,t,p):dM(e,t),t.popState(),r&&(o&&s.push(o),s.push(u))),l&&(d={method:!0===l.method?"parity":l.method,pulse:x},l.order&&(d.sort=t.compareRef({field:l.order})),l.bound&&(d.boundScale=t.scaleRef(l.bound.scale),d.boundOrient=l.bound.orient,d.boundTolerance=l.bound.tolerance),x=__(t.add(BR(d)))),f=t.add(qR({pulse:x})),m=t.add(YR({pulse:__(f)},void 0,t.parent())),null!=e.name&&(g=e.name,t.addData(g,new fy(t,c,f,m)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&lh("Marks only support modify triggers."),JI(e,t,g)}))},eM=function(e,t){var n=e.type||"symbol",a=t.config.legend,i=e.encode||{},o=i.legend||{},r=o.name||void 0,l=!!o.interactive,s=o.style,d=e.size||e.shape||e.fill||e.stroke||e.strokeDash||e.opacity,p,c,u,f,m,g,_,y;return d||lh("Missing valid scale for legend."),p={orient:T_(e.orient,a.orient),title:null!=e.title},c=__(t.add(LR(null,[p]))),o=K_({enter:hy(a),update:{offset:Z_(T_(e.offset,a.offset)),padding:Z_(T_(e.padding,a.padding)),titlePadding:Z_(T_(e.titlePadding,a.titlePadding))}},o,gI),g={update:{x:{field:{group:"padding"}},y:{field:{group:"padding"}},entryPadding:Z_(T_(e.entryPadding,a.entryPadding))}},"gradient"===n?(u=__(t.add(RR({type:"gradient",scale:t.scaleRef(d),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),y=[FI(e,d,a,i.gradient),BI(e,a,i.labels,u)]):(u=__(t.add(RR(_={scale:t.scaleRef(d),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),y=[jI(e,a,i.symbols,u),zI(e,a,i.labels,u)],_.size=yy(e,t,y)),y=[$I("legend-entry",null,null,c,l,g,y)],p.title&&(m=UI(e,a,i.title,c),g.update.y.offset={field:{group:"titlePadding"},offset:by(t,m.encode,"fontSize",uI)},y.push(m)),f=$I("legend",s,r,c,l,o,y),e.zindex&&(f.zindex=e.zindex),QI(f,t)},tM=function(e,t){e=uh(e)?{text:e}:e;var n=t.config.title,a=Ph({},e.encode),i,o,r;return i={orient:null==e.orient?n.orient:e.orient},o=__(t.add(LR(null,[i]))),a.name=e.name,a.interactive=e.interactive,r=xy(e,n,a,o),e.zindex&&(r.zindex=e.zindex),QI(r,t)},nM=function(e,t){var n=t.config,a=e.orient,i=a===tI||a===aI?n.axisX:n.axisY,o=n["axis"+a[0].toUpperCase()+a.slice(1)],r="band"===t.scaleType(e.scale)&&n.axisBand;return i||o||r?Ph({},n.axis,i,o,r):n.axis},aM=function(e,t,n,a){var i=e.orient,o={value:0},r={},l,s,d,p,c;return r.enter=l={opacity:o},X_(l,"stroke",t.domainColor),X_(l,"strokeWidth",t.domainWidth),r.exit={opacity:o},r.update=s={opacity:{value:1}},i===tI||i===aI?(d="x",c="y"):(d="y",c="x"),p=d+"2",l[c]=o,s[d]=l[d]=ky(e,0),s[p]=l[p]=ky(e,1),PI(II,"axis-domain",null,null,a,r,n)},iM=function(e,t,n,a){var i=e.orient,o=e.gridScale,r=i===nI||i===tI?1:-1,l=r*e.offset||0,d={value:0},p={},c,f,m,g,_,u,y,h;return p.enter=c={opacity:d},X_(c,"stroke",t.gridColor),X_(c,"strokeWidth",t.gridWidth),X_(c,"strokeDash",t.gridDash),p.exit=f={opacity:d},p.update=m={},X_(m,"opacity",t.gridOpacity),g={scale:e.scale,field:pI,band:t.bandPosition,round:t.tickRound,extra:t.tickExtra,offset:t.tickOffset},i===tI||i===aI?(_="x",u="y",h="height"):(_="y",u="x",h="width"),y=u+"2",m[_]=c[_]=f[_]=g,o?(c[u]={scale:o,range:0,mult:r,offset:l},m[y]=c[y]={scale:o,range:1,mult:r,offset:l}):(c[u]={value:l},m[y]=c[y]={signal:h,mult:r,offset:l}),PI(II,"axis-grid",null,pI,a,p,n)},oM=function(e,t,n,a,i){var o=e.orient,r=o===nI||o===tI?-1:1,l={value:0},s={},d,p,c,u,f;return s.enter=d={opacity:l},X_(d,"stroke",t.tickColor),X_(d,"strokeWidth",t.tickWidth),s.exit=p={opacity:l},s.update=c={opacity:{value:1}},u=Z_(i),u.mult=r,f={scale:e.scale,field:pI,band:t.bandPosition,round:t.tickRound,extra:t.tickExtra,offset:t.tickOffset},o===tI||o===aI?(c.y=d.y=l,c.y2=d.y2=u,c.x=d.x=p.x=f):(c.x=d.x=l,c.x2=d.x2=u,c.y=d.y=p.y=f),PI(II,"axis-tick",null,pI,a,s,n)},rM=function(e,t,n,a,i){var o=e.orient,r=o===nI||o===tI?-1:1,l=e.scale,s=T_(e.labelPadding,t.labelPadding),d=T_(e.labelBound,t.labelBound),p=T_(e.labelFlush,t.labelFlush),c=null!=p&&!1!==p&&(p=+p)===p,u=+T_(e.labelFlushOffset,t.labelFlushOffset),f=T_(e.labelOverlap,t.labelOverlap),m={value:0},g={},_,y,h,b,x;return g.enter=_={opacity:m},X_(_,"angle",t.labelAngle),X_(_,"fill",t.labelColor),X_(_,"font",t.labelFont),X_(_,"fontSize",t.labelFontSize),X_(_,"limit",t.labelLimit),g.exit=y={opacity:m},g.update=h={opacity:{value:1},text:{field:oI}},b=Z_(i),b.mult=r,b.offset=Z_(s),b.offset.mult=r,x={scale:l,field:pI,band:0.5,offset:t.tickOffset},o===tI||o===aI?(h.y=_.y=b,h.x=_.x=y.x=x,X_(h,"align",c?Ey(l,p,"\"left\"","\"right\"","\"center\""):"center"),c&&u&&X_(h,"dx",Ey(l,p,-u,u,0)),X_(h,"baseline",o===tI?"bottom":"top")):(h.x=_.x=b,h.y=_.y=y.y=x,X_(h,"align",o==="right"?"left":"right"),X_(h,"baseline",c?Ey(l,p,"\"bottom\"","\"top\"","\"middle\""):"middle"),c&&u&&X_(h,"dy",Ey(l,p,u,-u,0))),e=PI(MI,"axis-label",cI,pI,a,g,n),(f||d)&&(e.overlap={method:f,order:"datum.index",bound:d?{scale:l,orient:o,tolerance:+d}:null}),e},lM=function(e,t,n,a){var i=e.orient,o=e.title,r=i===nI||i===tI?-1:1,l=i===tI||i===aI,s={},d,p,c;return s.enter=d={opacity:{value:0}},X_(d,"align",t.titleAlign),X_(d,"fill",t.titleColor),X_(d,"font",t.titleFont),X_(d,"fontSize",t.titleFontSize),X_(d,"fontWeight",t.titleFontWeight),X_(d,"limit",t.titleLimit),s.exit={opacity:{value:0}},s.update=p={opacity:{value:1},text:o&&o.signal?{signal:o.signal}:{value:o+""}},c={scale:e.scale,range:0.5},l?(p.x=c,p.angle={value:0},p.baseline={value:i===tI?"bottom":"top"}):(p.y=c,p.angle={value:90*r},p.baseline={value:"bottom"}),X_(p,"angle",t.titleAngle),X_(p,"baseline",t.titleBaseline),X_(p,"x",t.titleX)||!l||ey("x",n)||(s.enter.auto={value:!0}),X_(p,"y",t.titleY)||l||ey("y",n)||(s.enter.auto={value:!0}),PI(MI,"axis-title",uI,null,a,s,n)},sM=function(e,t){var n=nM(e,t),a=e.encode||{},i=a.axis||{},o=i.name||void 0,r=!!i.interactive,l=i.style,s,d,p,c,u,f;return s={orient:e.orient,ticks:!!T_(e.ticks,n.ticks),labels:!!T_(e.labels,n.labels),grid:!!T_(e.grid,n.grid),domain:!!T_(e.domain,n.domain),title:!!T_(e.title,!1)},d=__(t.add(LR({},[s]))),i=K_({update:{range:{signal:"abs(span(range(\""+e.scale+"\")))"},offset:Z_(T_(e.offset,0)),position:Z_(T_(e.position,0)),titlePadding:Z_(T_(e.titlePadding,n.titlePadding)),minExtent:Z_(T_(e.minExtent,n.minExtent)),maxExtent:Z_(T_(e.maxExtent,n.maxExtent))}},a.axis,gI),p=__(t.add(ER({scale:t.scaleRef(e.scale),extra:n.tickExtra,count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),f=[],s.grid&&f.push(iM(e,n,a.grid,p)),s.ticks&&(c=T_(e.tickSize,n.tickSize),f.push(oM(e,n,a.ticks,p,c))),s.labels&&(c=s.ticks?c:0,f.push(rM(e,n,a.labels,p,c))),s.domain&&f.push(aM(e,n,a.domain,d)),s.title&&f.push(lM(e,n,a.title,d)),u=$I("axis",l,o,d,r,i,f),e.zindex&&(u.zindex=e.zindex),QI(u,t)},dM=function(e,t,n){var a=Ah(e.signals),i=Ah(e.scales);return n||a.forEach(function(e){YD(e,t)}),Ah(e.projections).forEach(function(e){eI(e,t)}),i.forEach(function(e){L_(e,t)}),Ah(e.data).forEach(function(e){vy(e,t)}),i.forEach(function(e){A_(e,t)}),a.forEach(function(e){xR(e,t)}),Ah(e.axes).forEach(function(e){sM(e,t)}),Ah(e.marks).forEach(function(e){QI(e,t)}),Ah(e.legends).forEach(function(e){eM(e,t)}),e.title&&tM(e.title,t),t.parseLambdas(),t},pM=Zh(["width","height","padding","autosize"]),cM=Ly.prototype=Ay.prototype;cM.fork=function(){return new Ay(this)},cM.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},cM.id=function(){return(this._subid?this._subid+":":0)+this._id++},cM.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},cM.proxy=function(e){var t=e instanceof f_?__(e):e;return this.add($R({value:t}))},cM.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},cM.addUpdate=function(e){return this.updates.push(e),e},cM.finish=function(){function e(e,t,n){var a,i;e&&(a=e.data||(e.data={}),i=a[t]||(a[t]=[]),i.push(n))}var t,n;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data)for(var a in n=this.data[t],e(n.input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values"),n.index)e(n.index[a],t,"index:"+a);return this},cM.pushState=function(e,t,n){this._encode.push(__(this.add(YR({pulse:e})))),this._parent.push(t),this._lookup.push(n?__(this.proxy(n)):null),this._markpath.push(-1)},cM.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},cM.parent=function(){return Nh(this._parent)},cM.encode=function(){return Nh(this._encode)},cM.lookup=function(){return Nh(this._lookup)},cM.markpath=function(){var e=this._markpath;return++e[e.length-1]},cM.fieldRef=function(e,t){if(uh(e))return y_(e,t);e.signal||lh("Unsupported field reference: "+w(e));var n=e.signal,a=this.field[n],i;return a||(i={name:this.signalRef(n)},t&&(i.as=t),this.field[n]=a=__(this.add(DR(i)))),a},cM.compareRef=function(e){function t(e){return S_(e)?(a=!0,__(n[e.signal])):e}var n=this.signals,a=!1,i=Ah(e.field).map(t),o=Ah(e.order).map(t);return a?__(this.add(AR({fields:i,orders:o}))):h_(i,o)},cM.keyRef=function(e,t){var n=this.signals,a=!1;return e=Ah(e).map(function(e){return S_(e)?(a=!0,__(n[e.signal])):e}),a?__(this.add(PR({fields:e,flat:t}))):b_(e,t)},cM.sortRef=function(e){if(!e)return e;var t=[v_(e.op,e.field),vR],n=e.order||"ascending";return n.signal?__(this.add(AR({fields:t,orders:[n=this.signalRef(n.signal),n]}))):h_(t,[n,n])},cM.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var a=this.id();this.streams.push({id:a,source:e,type:t}),this.events[n]=a}return this.events[n]},cM.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&lh("Duplicate signal name: "+w(e));var n=t instanceof f_?t:this.add(g_(t));return this.signals[e]=n},cM.getSignal=function(e){return this.signals[e]||lh("Unrecognized signal name: "+w(e)),this.signals[e]},cM.signalRef=function(e){return this.signals[e]?__(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(g_(null))),__(this.lambdas[e]))},cM.parseLambdas=function(){for(var t=Object.keys(this.lambdas),a=0,i=t.length;a<i;++a){var n=t[a],o=iR(n,this),e=this.lambdas[n];e.params=o.$params,e.update=o.$expr}},cM.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},cM.objectProperty=function(e){return e&&ph(e)?this.signalRef(e.signal||wy(e)):e},cM.addBinding=function(e,t){this.bindings||lh("Nested signals do not support binding: "+w(e)),this.bindings.push(Ph({signal:e},t))},cM.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&lh("Duplicate scale or projection name: "+w(e)),this.scales[e]=this.add(t)},cM.addScale=function(e,t){this.addScaleProj(e,HR(t))},cM.addProjection=function(e,t){this.addScaleProj(e,UR(t))},cM.getScale=function(e){return this.scales[e]||lh("Unrecognized scale name: "+w(e)),this.scales[e]},cM.projectionRef=cM.scaleRef=function(e){return __(this.getScale(e))},cM.projectionType=cM.scaleType=function(e){return this.getScale(e).params.type},cM.addData=function(e,t){return this.data.hasOwnProperty(e)&&lh("Duplicate data set name: "+w(e)),this.data[e]=t},cM.getData=function(e){return this.data[e]||lh("Undefined data set name: "+w(e)),this.data[e]},cM.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&lh("Duplicate data set name: "+w(e)),this.addData(e,fy.fromEntries(this,t))};var uM=function(e){var t=Dy();return(e||[]).forEach(function(e){var n,a;if(e)for(n in e)if("style"===n)for(n in a=t.style||(t.style={}),e.style)a[n]=Ph(a[n]||{},e.style[n]);else t[n]=ph(e[n])?Ph(t[n]||{},e[n]):e[n]}),t},fM="sans-serif",mM=30,gM=2,_M="#4c78a8",yM="#000",hM="#888",bM="#ddd",xM=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||lh("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=$h(e.$key,e.$flat))}},{key:"$expr",parse:function(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=rh(Iy(e.$expr,t),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=fh(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n=e.$encode,a={},i,o;for(i in n)o=n[i],a[i]=rh(By(o.$expr,t),o.$fields),a[i].output=o.$output;return a}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,a=Ah(e.$compare).map(function(e){return e&&e.$tupleid?V:e});return t.fn[n]||(t.fn[n]=Ch(a,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,a,i){var o=kM(n,t.fork()),r=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(i),r}}},{key:"$tupleid",parse:function(){return V}}],vM=function(e,t){$y(e.type)||!e.type?t.operator(e,e.update?Ry(e.update,t):null):t.transform(e,e.type)},SM=function(e,t){var n=null==e.filter?void 0:My(e.filter,t),a=null==e.stream?void 0:t.get(e.stream),i;e.source?a=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(t.get.bind(t)),a=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(t.get.bind(t)),a=a.between(i[0],i[1])),e.filter&&(a=a.filter(n)),null!=e.throttle&&(a=a.throttle(+e.throttle)),null!=e.debounce&&(a=a.debounce(+e.debounce)),null==a&&lh("Invalid stream definition: "+JSON.stringify(e)),e.consume&&a.consume(!0),t.stream(e,a)},TM=function(e,t){var n=t.get(e.source),a=null,i=e.update,o;n||lh("Source not defined: "+e.source),a=e.target&&e.target.$expr?My(e.target.$expr,t):t.get(e.target),i&&i.$expr&&(i.$params&&(o=zy(i.$params,t)),i=Fy(i.$expr,t)),t.update(e,n,a,i,o)},kM=function(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){vM(e,t)}),n.forEach(function(e){qy(e,t)}),(e.streams||[]).forEach(function(e){SM(e,t)}),(e.updates||[]).forEach(function(e){TM(e,t)}),t.resolve()},EM={skip:!0},NM=function(e,t,n){return new Hy(e,t,n)};Hy.prototype=Yy.prototype={fork:function(){var e=new Yy(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n=this,a=n.dataflow,i;if(n.set(e.id,t),Wy(e.type)&&(i=e.value)&&(i.$ingest?a.ingest(t,i.$ingest,i.$format):i.$request?a.request(t,i.$request,i.$format):a.pulse(t,a.changeset().insert(i))),e.root&&(n.root=t),e.parent){var o=n.get(e.parent.$ref);o?(a.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(function(){o=n.get(e.parent.$ref),a.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(var r in e.data)i=n.data[r]||(n.data[r]={}),e.data[r].forEach(function(e){i[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[Uy(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,a,i){this.dataflow.on(t,n,a,i,e.options)},getState:function(e){var t=this,n={};if(e.signals){var a=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(a[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var a=t.data[n];e.data(n,a)&&(i[n]=a.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n},setState:function(e){var t=this,n=t.dataflow,a=e.data,i=e.signals;Object.keys(i||{}).forEach(function(e){n.update(t.signals[e],i[e],EM)}),Object.keys(a||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(hh).insert(a[e]))}),(e.subcontext||[]).forEach(function(e,n){var a=t.subcontext[n];a&&a.setState(e)})}};var LM=function(e,t,n){return kM(t,NM(e,Yx,n||GP))},AM="padding",wM=Fh(Jy,yn);wM.run=function(e){if(yn.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(t){this.error(t)}return this},wM.render=function(){return this._renderer&&(this._resize&&(this._resize=0,tm(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},wM.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},wM.container=function(){return this._el},wM.scenegraph=function(){return this._scenegraph},wM.signal=function(e,t,n){var a=Qy(this,e);return 1===arguments.length?a.value:this.update(a,t,n)},wM.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},wM.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},wM.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},wM.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},wM.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},wM.renderer=function(e){return arguments.length?(ar(e)||lh("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._renderType},wM.loader=function(e){return arguments.length?(e!==this._loader&&(yn.prototype.loader.call(this,e),this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._loader},wM.resize=function(){return this._autosize=1,this},wM._resizeView=function(e,t,n,a,i,o){this.runAfter(function(r){var l=0;r._autosize=0,r.width()!==n&&(l=1,r.width(n),r._resizeWidth.skip(!0)),r.height()!==a&&(l=1,r.height(a),r._resizeHeight.skip(!0)),r._viewWidth!==e&&(r._resize=1,r._viewWidth=e),r._viewHeight!==t&&(r._resize=1,r._viewHeight=t),(r._origin[0]!==i[0]||r._origin[1]!==i[1])&&(r._resize=1,r._origin=i),l&&r.run("enter"),o&&r.runAfter(function(){r.resize()})})},wM.addEventListener=function(e,t){return this._handler.on(e,t),this},wM.removeEventListener=function(e,t){return this._handler.off(e,t),this},wM.addSignalListener=function(e,t){var n=Qy(this,e),a=function(){t(e,n.value)};return a.handler=t,this.on(n,null,a),this},wM.removeSignalListener=function(e,n){var a=Qy(this,e),i=a._targets||[],t=i.filter(function(e){var t=e._update;return t&&t.handler===n});return t.length&&i.remove(t[0]),this},wM.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},wM.tooltipHandler=function(e){var t=this._handler;return arguments.length?(t.handleTooltip=e||Po.prototype.handleTooltip,this):t.handleTooltip},wM.events=function(t,a,e){var o=this,r=new ie(e),l=function(n,e){t===PD&&im(o,a)&&n.preventDefault();try{r.receive(DD(o,n,e))}catch(e){o.error(e)}finally{o.run()}},s;if(t===PD)return o.addEventListener(a,l),r;if(t==="window"?"undefined"!=typeof window&&(s=[window]):"undefined"!=typeof document&&(s=document.querySelectorAll(t)),!s)return o.warn("Can not resolve event source: "+t),r;for(var d=0,i=s.length;d<i;++d)s[d].addEventListener(a,l);return o._eventListeners.push({type:a,sources:s,handler:l}),r},wM.finalize=function(){for(var t=this._eventListeners,a=t.length,n,i;0<=--a;)for(i=t[a],n=i.sources.length;0<=--n;)i.sources[n].removeEventListener(i.type,i.handler)},wM.hover=function(e,t){return e=[e||"hover"],t=[t||"update",e],this.on(this.events("view","mouseover",om),rm,lm(e)),this.on(this.events("view","mouseout",om),rm,lm(t)),this},wM.data=function(e){return Xf(this,e).values.value},wM.change=Kf,wM.insert=function(e,t){return Kf.call(this,e,ee().insert(t))},wM.remove=function(e,t){return Kf.call(this,e,ee().remove(t))},wM.initialize=function(e,t){var n=this,a=n._renderType,i=ar(a),o,r;return e=n._el=e?gm(n,e):null,i||n.error("Unrecognized renderer type: "+a),o=i.handler||Io,r=e?i.renderer:i.headless,n._renderer=r?jD(n,n._renderer,e,r):null,n._handler=UD(n,n._handler,e,o),n._redraw=!0,e&&(t=t?gm(n,t):e.appendChild(RD("div",{class:"vega-bindings"})),n._bind.forEach(function(e){e.param.element&&(e.element=gm(n,e.param.element))}),n._bind.forEach(function(e){zD(n,e.element||t,e)})),n},wM.toImageURL=function(e){return e!==bk.Canvas&&e!==bk.SVG&&e!==bk.PNG?Promise.reject("Unrecognized image type: "+e):$D(this,e).then(function(t){return e===bk.SVG?_m(t.svg(),"image/svg+xml"):t.canvas().toDataURL("image/png")})},wM.toCanvas=function(){return $D(this,bk.Canvas).then(function(e){return e.canvas()})},wM.toSVG=function(){return $D(this,bk.SVG).then(function(e){return e.svg()})},wM.getState=function(e){return this._runtime.getState(e||{data:Xy,signals:Ky,recurse:!0})},wM.setState=function(e){var t=this;return t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0}),this},Ph(Yx,rS,iE,XA,lO,CO,oD,bD,ND,CD),h.version="3.0.8",h.Dataflow=yn,h.EventStream=ie,h.Parameters=te,h.Pulse=dn,h.MultiPulse=fn,h.Operator=ne,h.Transform=bn,h.changeset=ee,h.ingest=Z,h.isTuple=Y,h.definition=xn,h.transform=vn,h.transforms=Yx,h.tupleid=V,h.scale=cs,h.scheme=DA,h.interpolate=ys,h.interpolateRange=ms,h.timeInterval=bs,h.utcInterval=xs,h.projection=ac,h.View=Jy,h.parse=function(e,t){return ph(e)||lh("Input Vega specification must be an object."),Ny(e,new Ly(uM([t,e.config]))).toRuntime()},h.expressionFunction=Jg,h.formatLocale=Fl,h.timeFormatLocale=an,h.runtime=kM,h.runtimeContext=NM,h.bin=Zx,h.bootstrapCI=_v,h.quartiles=yv,h.setRandom=function(e){h.random=e},h.randomInteger=function(e,t){null==t&&(t=e,e=0);var n={},i,a,o;return n.min=function(e){return arguments.length?(i=e||0,o=a-i,n):i},n.max=function(e){return arguments.length?(a=e||0,o=a-i,n):a},n.sample=function(){return i+E(o*h.random())},n.pdf=function(e){return e===E(e)&&e>=i&&e<a?1/o:0},n.cdf=function(e){var t=E(e);return t<i?0:t>=a?1:(t-i+1)/o},n.icdf=function(e){return 0<=e&&1>=e?i-1+E(e*o):NaN},n.min(e).max(t)},h.randomKDE=bv,h.randomMixture=xv,h.randomNormal=hv,h.randomUniform=vv,h.accessor=rh,h.accessorName=v,h.accessorFields=m,h.id=gh,h.identity=id,h.zero=_h,h.one=yh,h.truthy=hh,h.falsy=bh,h.logger=Eh,h.None=xh,h.Error=vh,h.Warn=Sh,h.Info=Th,h.Debug=kh,h.panLinear=M,h.panLog=F,h.panPow=z,h.zoomLinear=U,h.zoomLog=$,h.zoomPow=W,h.array=Ah,h.compare=Ch,h.constant=Oh,h.debounce=Dh,h.error=lh,h.extend=Ph,h.extentIndex=Rh,h.fastmap=Mh,h.field=fh,h.inherits=Fh,h.isArray=dh,h.isBoolean=Bh,h.isDate=zh,h.isFunction=wh,h.isNumber=jh,h.isObject=ph,h.isRegExp=Uh,h.isString=uh,h.key=$h,h.merge=Wh,h.pad=Hh,h.peek=Nh,h.repeat=qh,h.splitAccessPath=sh,h.stringValue=w,h.toBoolean=Yh,h.toDate=Vh,h.toNumber=Lh,h.toString=Gh,h.toSet=Zh,h.truncate=Xh,h.visitArray=Kh,h.loader=Tb,h.read=Ax,h.inferType=De,h.inferTypes=Pe,h.typeParsers=kb,h.formats=Ib,h.Bounds=za,h.Gradient=sS,h.GroupItem=Ua,h.ResourceLoader=Va,h.Item=ja,h.Scenegraph=Oo,h.Handler=Po,h.Renderer=Ro,h.CanvasHandler=Io,h.CanvasRenderer=Bo,h.SVGHandler=Uo,h.SVGRenderer=Ho,h.SVGStringRenderer=Qo,h.RenderType=bk,h.renderModule=ar,h.Marks=jT,h.boundContext=Xi,h.boundStroke=lT,h.boundItem=UT,h.boundMark=WT,h.pathCurves=Ii,h.pathSymbols=ji,h.pathRectangle=KS,h.pathTrail=QS,h.pathParse=$S,h.pathRender=VS,h.point=ZT,h.canvas=pS,h.domCreate=$a,h.domFind=Wa,h.domChild=qa,h.domClear=Ha,h.openTag=Wo,h.closeTag=qo,h.font=Eo,h.textMetrics=PT,h.resetSVGClipId=function(){TT=1},h.sceneEqual=ir,h.pathEqual=or,h.sceneToJSON=Ao,h.sceneFromJSON=wo,h.sceneZOrder=eo,h.sceneVisit=to,h.scenePickVisit=no,Object.defineProperty(h,"__esModule",{value:!0})})}).call(this,_("buffer").Buffer)},{buffer:18,canvas:18,"canvas-prebuilt":18,fs:18}],593:[function(e,t,n){function a(){}var i=e("indexof"),o=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},r=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},l=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(e,t,n){e[t]=n}}}(),s=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];a.prototype={};var d=n.Script=function(e){return this instanceof d?void(this.code=e):new d(e)};d.prototype.runInContext=function(e){if(!(e instanceof a))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,d=n.eval,p=n.execScript;!d&&p&&(p.call(n,"null"),d=n.eval),r(o(e),function(t){n[t]=e[t]}),r(s,function(t){e[t]&&(n[t]=e[t])});var c=o(n),u=d.call(n,this.code);return r(o(n),function(t){(t in e||-1===i(c,t))&&(e[t]=n[t])}),r(s,function(t){t in e||l(e,t,n[t])}),document.body.removeChild(t),u},d.prototype.runInThisContext=function(){return eval(this.code)},d.prototype.runInNewContext=function(e){var t=d.createContext(e),n=this.runInContext(t);return r(o(t),function(n){e[n]=t[n]}),n},r(o(d.prototype),function(e){n[e]=d[e]=function(t){var n=d(t);return n[e].apply(n,[].slice.call(arguments,1))}}),n.createScript=function(e){return n.Script(e)},n.createContext=d.createContext=function(e){var t=new a;return"object"==typeof e&&r(o(e),function(n){t[n]=e[n]}),t}},{indexof:146}],594:[function(e,t,n){"use strict";function a(){}function o(e){for(var t=e.length,n=Array(t),a=0;a<t;++a)n[a]=e[a];return n}function i(e,n){return function(a){return e(a)&&n(a)}}function l(e,n,t){try{return e.f(n)}catch(n){return t._e(n),c}}function r(e){e._start=function(e){e.next=e._n,e.error=e._e,e.complete=e._c,this.start(e)},e._stop=e.stop}var s=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},d=e("symbol-observable"),c={};n.NO=c;var p={_n:a,_e:a,_c:a};n.NO_IL=p;var u=function(){function e(e,t){this._stream=e,this._listener=t}return e.prototype.unsubscribe=function(){this._stream.removeListener(this._listener)},e}(),f=function(){function e(e){this._listener=e}return e.prototype.next=function(e){this._listener._n(e)},e.prototype.error=function(e){this._listener._e(e)},e.prototype.complete=function(){this._listener._c()},e}(),m=function(){function e(e){this.type="fromObservable",this.ins=e,this.active=!1}return e.prototype._start=function(e){this.out=e,this.active=!0,this._sub=this.ins.subscribe(new f(e)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),g=function(){function e(e){this.type="merge",this.insArr=e,this.out=c,this.ac=0}return e.prototype._start=function(e){this.out=e;var t=this.insArr,n=t.length;this.ac=n;for(var a=0;a<n;a++)t[a]._add(this)},e.prototype._stop=function(){for(var e=this.insArr,t=e.length,n=0;n<t;n++)e[n]._remove(this);this.out=c},e.prototype._n=function(e){var t=this.out;t===c||t._n(e)},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){if(0>=--this.ac){var e=this.out;if(e===c)return;e._c()}},e}(),_=function(){function e(e,t,n){this.i=e,this.out=t,this.p=n,n.ils.push(this)}return e.prototype._n=function(e){var t=this.p,n=this.out;if(n!==c&&t.up(e,this.i)){for(var o=t.vals,a=o.length,r=Array(a),l=0;l<a;++l)r[l]=o[l];n._n(r)}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.p;e.out===c||0==--e.Nc&&e.out._c()},e}(),y=function(){function e(e){this.type="combine",this.insArr=e,this.out=c,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(e,t){var n=this.vals[t],a=this.Nn?n===c?--this.Nn:this.Nn:0;return this.vals[t]=e,0===a},e.prototype._start=function(e){this.out=e;var t=this.insArr,a=this.Nc=this.Nn=t.length,n=this.vals=Array(a);if(0===a)e._n([]),e._c();else for(var o=0;o<a;o++)n[o]=c,t[o]._add(new _(o,e,this))},e.prototype._stop=function(){for(var e=this.insArr,t=e.length,n=this.ils,a=0;a<t;a++)e[a]._remove(n[a]);this.out=c,this.ils=[],this.vals=[]},e}(),h=function(){function e(e){this.type="fromArray",this.a=e}return e.prototype._start=function(e){for(var t=this.a,a=0,i=t.length;a<i;a++)e._n(t[a]);e._c()},e.prototype._stop=function(){},e}(),b=function(){function e(e){this.type="fromPromise",this.on=!1,this.p=e}return e.prototype._start=function(t){var e=this;this.on=!0,this.p.then(function(n){e.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(a,function(e){setTimeout(function(){throw e})})},e.prototype._stop=function(){this.on=!1},e}(),x=function(){function e(e){this.type="periodic",this.period=e,this.intervalID=-1,this.i=0}return e.prototype._start=function(e){var t=this;this.intervalID=setInterval(function(){e._n(t.i++)},this.period)},e.prototype._stop=function(){-1!==this.intervalID&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),v=function(){function e(e,t){this.type="debug",this.ins=e,this.out=c,this.s=a,this.l="","string"==typeof t?this.l=t:"function"==typeof t&&(this.s=t)}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=this.s,i=this.l;if(n!==a)try{n(e)}catch(n){t._e(n)}else i?console.log(i+":",e):console.log(e);t._n(e)}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),S=function(){function e(e,t){this.type="drop",this.ins=t,this.out=c,this.max=e,this.dropped=0}return e.prototype._start=function(e){this.out=e,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;t===c||this.dropped++>=this.max&&t._n(e)},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),T=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.end()},e}(),k=function(){function e(e,t){this.type="endWhen",this.ins=t,this.out=c,this.o=e,this.oil=p}return e.prototype._start=function(e){this.out=e,this.o._add(this.oil=new T(e,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=c,this.oil=p},e.prototype.end=function(){var e=this.out;e===c||e._c()},e.prototype._n=function(e){var t=this.out;t===c||t._n(e)},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){this.end()},e}(),E=function(){function e(e,t){this.type="filter",this.ins=t,this.out=c,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=l(this,e,t);n!==c&&n&&t._n(e)}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),N=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(e){this.out._n(e)},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.inner=c,this.op.less()},e}(),A=function(){function e(e){this.type="flatten",this.ins=e,this.out=c,this.open=!0,this.inner=c,this.il=p}return e.prototype._start=function(e){this.out=e,this.open=!0,this.inner=c,this.il=p,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==c&&this.inner._remove(this.il),this.out=c,this.open=!0,this.inner=c,this.il=p},e.prototype.less=function(){var e=this.out;e!==c&&(this.open||this.inner!==c||e._c())},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=this,a=n.inner,i=n.il;a!==c&&i!==p&&a._remove(i),(this.inner=e)._add(this.il=new N(t,this))}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){this.open=!1,this.less()},e}(),w=function(){function e(e,t,n){var a=this;this.type="fold",this.ins=n,this.out=c,this.f=function(n){return e(a.acc,n)},this.acc=this.seed=t}return e.prototype._start=function(e){this.out=e,this.acc=this.seed,e._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c,this.acc=this.seed},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=l(this,e,t);n===c||t._n(this.acc=n)}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),C=function(){function e(e){this.type="last",this.ins=e,this.out=c,this.has=!1,this.val=c}return e.prototype._start=function(e){this.out=e,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c,this.val=c},e.prototype._n=function(e){this.has=!0,this.val=e},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||(this.has?(e._n(this.val),e._c()):e._e(new Error("last() failed because input stream completed")))},e}(),O=function(){function e(e,t){this.type="map",this.ins=t,this.out=c,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=l(this,e,t);n===c||t._n(n)}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),D=function(){function e(e){this.type="remember",this.ins=e,this.out=c}return e.prototype._start=function(e){this.out=e,this.ins._add(e)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=c},e}(),P=function(){function e(e,t){this.type="replaceError",this.ins=t,this.out=c,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;t===c||t._n(e)},e.prototype._e=function(e){var t=this.out;if(t!==c)try{this.ins._remove(this),(this.ins=this.f(e))._add(this)}catch(n){t._e(n)}},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),R=function(){function e(e,t){this.type="startWith",this.ins=e,this.out=c,this.val=t}return e.prototype._start=function(e){this.out=e,this.out._n(this.val),this.ins._add(e)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=c},e}(),I=function(){function e(e,t){this.type="take",this.ins=t,this.out=c,this.max=e,this.taken=0}return e.prototype._start=function(e){this.out=e,this.taken=0,0>=this.max?e._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=c},e.prototype._n=function(e){var t=this.out;if(t!==c){var n=++this.taken;n<this.max?t._n(e):n===this.max&&(t._n(e),t._c())}},e.prototype._e=function(e){var t=this.out;t===c||t._e(e)},e.prototype._c=function(){var e=this.out;e===c||e._c()},e}(),M=function(){function e(e){this._prod=e||c,this._ils=[],this._stopID=c,this._dl=c,this._d=!1,this._target=c,this._err=c}return e.prototype._n=function(e){var t=this._ils,n=t.length;if(this._d&&this._dl._n(e),1==n)t[0]._n(e);else{if(0==n)return;for(var a=o(t),r=0;r<n;r++)a[r]._n(e)}},e.prototype._e=function(e){if(this._err===c){this._err=e;var t=this._ils,n=t.length;if(this._x(),this._d&&this._dl._e(e),1==n)t[0]._e(e);else{if(0==n)return;for(var a=o(t),r=0;r<n;r++)a[r]._e(e)}if(!this._d&&0==n)throw this._err}},e.prototype._c=function(){var e=this._ils,t=e.length;if(this._x(),this._d&&this._dl._c(),1==t)e[0]._c();else{if(0==t)return;for(var n=o(e),a=0;a<t;a++)n[a]._c()}},e.prototype._x=function(){0===this._ils.length||(this._prod!==c&&this._prod._stop(),this._err=c,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=c,this._stopID=c},e.prototype._add=function(e){var t=this._target;if(t!==c)return t._add(e);var n=this._ils;if(n.push(e),!(1<n.length))if(this._stopID!==c)clearTimeout(this._stopID),this._stopID=c;else{var a=this._prod;a!==c&&a._start(this)}},e.prototype._remove=function(e){var t=this,n=this._target;if(n!==c)return n._remove(e);var o=this._ils,a=o.indexOf(e);-1<a&&(o.splice(a,1),this._prod!==c&&0>=o.length?(this._err=c,this._stopID=setTimeout(function(){return t._stopNow()})):1===o.length&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(e,t){if(-1!==t.indexOf(e))return!0;if(e.out===this)return!0;if(e.out&&e.out!==c)return this._hasNoSinks(e.out,t.concat(e));if(e._ils){for(var n=0,a=e._ils.length;n<a;n++)if(!this._hasNoSinks(e._ils[n],t.concat(e)))return!1;return!0}return!1},e.prototype.ctor=function(){return this instanceof F?F:e},e.prototype.addListener=function(e){e._n=e.next||a,e._e=e.error||a,e._c=e.complete||a,this._add(e)},e.prototype.removeListener=function(e){this._remove(e)},e.prototype.subscribe=function(e){return this.addListener(e),new u(this,e)},e.prototype[d.default]=function(){return this},e.create=function(t){if(t){if("function"!=typeof t.start||"function"!=typeof t.stop)throw new Error("producer requires both start and stop functions");r(t)}return new e(t)},e.createWithMemory=function(e){return e&&r(e),new F(e)},e.never=function(){return new e({_start:a,_stop:a})},e.empty=function(){return new e({_start:function(e){e._c()},_stop:a})},e.throw=function(t){return new e({_start:function(e){e._e(t)},_stop:a})},e.from=function(t){if("function"==typeof t[d.default])return e.fromObservable(t);if("function"==typeof t.then)return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.fromArray(t)},e.fromArray=function(t){return new e(new h(t))},e.fromPromise=function(t){return new e(new b(t))},e.fromObservable=function(t){return t.endWhen?t:new e(new m(t))},e.periodic=function(t){return new e(new x(t))},e.prototype._map=function(e){return new(this.ctor())(new O(e,this))},e.prototype.map=function(e){return this._map(e)},e.prototype.mapTo=function(e){var t=this.map(function(){return e}),n=t._prod;return n.type="mapTo",t},e.prototype.filter=function(t){var n=this._prod;return n instanceof E?new e(new E(i(n.f,t),n.ins)):new e(new E(t,this))},e.prototype.take=function(e){return new(this.ctor())(new I(e,this))},e.prototype.drop=function(t){return new e(new S(t,this))},e.prototype.last=function(){return new e(new C(this))},e.prototype.startWith=function(e){return new F(new R(this,e))},e.prototype.endWhen=function(e){return new(this.ctor())(new k(e,this))},e.prototype.fold=function(e,t){return new F(new w(e,t,this))},e.prototype.replaceError=function(e){return new(this.ctor())(new P(e,this))},e.prototype.flatten=function(){this._prod;return new e(new A(this))},e.prototype.compose=function(e){return e(this)},e.prototype.remember=function(){return new F(new D(this))},e.prototype.debug=function(e){return new(this.ctor())(new v(this,e))},e.prototype.imitate=function(e){if(e instanceof F)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=e;for(var t=this._ils,n=t.length,a=0;a<n;a++)e._add(t[a]);this._ils=[]},e.prototype.shamefullySendNext=function(e){this._n(e)},e.prototype.shamefullySendError=function(e){this._e(e)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(e){e?(this._d=!0,e._n=e.next||a,e._e=e.error||a,e._c=e.complete||a,this._dl=e):(this._d=!1,this._dl=c)},e}();M.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new M(new g(e))},M.combine=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new M(new y(e))},n.Stream=M;var F=function(e){function t(t){var n=e.call(this,t)||this;return n._has=!1,n}return s(t,e),t.prototype._n=function(t){this._v=t,this._has=!0,e.prototype._n.call(this,t)},t.prototype._add=function(e){var t=this._target;if(t!==c)return t._add(e);var n=this._ils;if(n.push(e),1<n.length)return void(this._has&&e._n(this._v));if(this._stopID!==c)this._has&&e._n(this._v),clearTimeout(this._stopID),this._stopID=c;else if(this._has)e._n(this._v);else{var a=this._prod;a!==c&&a._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(e){return this._map(e)},t.prototype.mapTo=function(t){return e.prototype.mapTo.call(this,t)},t.prototype.take=function(t){return e.prototype.take.call(this,t)},t.prototype.endWhen=function(t){return e.prototype.endWhen.call(this,t)},t.prototype.replaceError=function(t){return e.prototype.replaceError.call(this,t)},t.prototype.remember=function(){return this},t.prototype.debug=function(t){return e.prototype.debug.call(this,t)},t}(M);n.MemoryStream=F,Object.defineProperty(n,"__esModule",{value:!0}),n.default=M},{"symbol-observable":463}],595:[function(e,t){var n,a,o;o=e("./Utils"),a=e("./Inline"),n=function(){function e(){}return e.indentation=4,e.prototype.dump=function(e,t,n,r,l){var s,i,d,p,c,u,f;if(null==t&&(t=0),null==n&&(n=0),null==r&&(r=!1),null==l&&(l=null),p="",c=n?o.strRepeat(" ",n):"",0>=t||"object"!=typeof e||e instanceof Date||o.isEmpty(e))p+=c+a.dump(e,r,l);else if(e instanceof Array)for(s=0,d=e.length;s<d;s++)u=e[s],f=0>=t-1||"object"!=typeof u||o.isEmpty(u),p+=c+"-"+(f?" ":"\n")+this.dump(u,t-1,f?0:n+this.indentation,r,l)+(f?"\n":"");else for(i in e)u=e[i],f=0>=t-1||"object"!=typeof u||o.isEmpty(u),p+=c+a.dump(i,r,l)+":"+(f?" ":"\n")+this.dump(u,t-1,f?0:n+this.indentation,r,l)+(f?"\n":"");return p},e}(),t.exports=n},{"./Inline":600,"./Utils":604}],596:[function(e,t){var n,a;a=e("./Pattern"),n=function(){function e(){}var t;return e.LIST_ESCAPEES=["\\","\\\\","\\\"","\"","\0","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\x0B","\f","\r","\x0E","\x0F","\x10","\x11","\x12","\x13","\x14","\x15","\x16","\x17","\x18","\x19","\x1A","\x1B","\x1C","\x1D","\x1E","\x1F",(t=d)(133),t(160),t(8232),t(8233)],e.LIST_ESCAPED=["\\\\","\\\"","\\\"","\\\"","\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],e.MAPPING_ESCAPEES_TO_ESCAPED=function(){var t,n,a,i;for(a={},t=n=0,i=e.LIST_ESCAPEES.length;0<=i?n<i:n>i;t=0<=i?++n:--n)a[e.LIST_ESCAPEES[t]]=e.LIST_ESCAPED[t];return a}(),e.PATTERN_CHARACTERS_TO_ESCAPE=new a("[\\x00-\\x1f]|\xC2\x85|\xC2\xA0|\xE2\x80\xA8|\xE2\x80\xA9"),e.PATTERN_MAPPING_ESCAPEES=new a(e.LIST_ESCAPEES.join("|").split("\\").join("\\\\")),e.PATTERN_SINGLE_QUOTING=new a("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),e.requiresDoubleQuoting=function(e){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(e)},e.escapeWithDoubleQuotes=function(e){var t;return t=this.PATTERN_MAPPING_ESCAPEES.replace(e,function(e){return function(t){return e.MAPPING_ESCAPEES_TO_ESCAPED[t]}}(this)),"\""+t+"\""},e.requiresSingleQuoting=function(e){return this.PATTERN_SINGLE_QUOTING.test(e)},e.escapeWithSingleQuotes=function(e){return"'"+e.replace(/'/g,"''")+"'"},e}(),t.exports=n},{"./Pattern":602}],597:[function(e,t){var n=function(e,t){function n(){this.constructor=e}for(var i in t)a.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,i;i=function(e){function t(e,t,n){this.message=e,this.parsedLine=t,this.snippet=n}return n(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<DumpException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<DumpException> "+this.message},t}(Error),t.exports=i},{}],598:[function(e,t){var n=function(e,t){function n(){this.constructor=e}for(var i in t)a.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,i;i=function(e){function t(e,t,n){this.message=e,this.parsedLine=t,this.snippet=n}return n(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseException> "+this.message},t}(Error),t.exports=i},{}],599:[function(e,t){var n=function(e,t){function n(){this.constructor=e}for(var i in t)a.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,i;i=function(e){function t(e,t,n){this.message=e,this.parsedLine=t,this.snippet=n}return n(t,e),t.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseMore> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseMore> "+this.message},t}(Error),t.exports=i},{}],600:[function(e,t){var n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},a,i,o,r,l,s,d,p;s=e("./Pattern"),d=e("./Unescaper"),i=e("./Escaper"),p=e("./Utils"),r=e("./Exception/ParseException"),l=e("./Exception/ParseMore"),a=e("./Exception/DumpException"),o=function(){function e(){}return e.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')",e.PATTERN_TRAILING_COMMENTS=new s("^\\s*#.*$"),e.PATTERN_QUOTED_SCALAR=new s("^"+e.REGEX_QUOTED_STRING),e.PATTERN_THOUSAND_NUMERIC_SCALAR=new s("^(-|\\+)?[0-9,]+(\\.[0-9]+)?$"),e.PATTERN_SCALAR_BY_DELIMITERS={},e.settings={},e.configure=function(e,t){null==e&&(e=null),null==t&&(t=null),this.settings.exceptionOnInvalidType=e,this.settings.objectDecoder=t},e.parse=function(e,t,n){var a,i;if(null==t&&(t=!1),null==n&&(n=null),this.settings.exceptionOnInvalidType=t,this.settings.objectDecoder=n,null==e)return"";if(e=p.trim(e),0===e.length)return"";switch(a={exceptionOnInvalidType:t,objectDecoder:n,i:0},e.charAt(0)){case"[":i=this.parseSequence(e,a),++a.i;break;case"{":i=this.parseMapping(e,a),++a.i;break;default:i=this.parseScalar(e,null,["\"","'"],a);}if(""!==this.PATTERN_TRAILING_COMMENTS.replace(e.slice(a.i),""))throw new r("Unexpected characters near \""+e.slice(a.i)+"\".");return i},e.dump=function(e,t,n){var a,o,r;return(null==t&&(t=!1),null==n&&(n=null),null==e)?"null":(r=typeof e,"object"===r)?e instanceof Date?e.toISOString():null!=n&&(o=n(e),"string"==typeof o||null!=o)?o:this.dumpObject(e):"boolean"===r?e?"true":"false":p.isDigits(e)?"string"===r?"'"+e+"'":parseInt(e)+"":p.isNumeric(e)?"string"===r?"'"+e+"'":parseFloat(e)+"":"number"===r?2e308===e?".Inf":-2e308===e?"-.Inf":isNaN(e)?".NaN":e:i.requiresDoubleQuoting(e)?i.escapeWithDoubleQuotes(e):i.requiresSingleQuoting(e)?i.escapeWithSingleQuotes(e):""===e?"\"\"":p.PATTERN_DATE.test(e)?"'"+e+"'":"null"===(a=e.toLowerCase())||"~"===a||"true"===a||"false"===a?"'"+e+"'":e},e.dumpObject=function(e,t,n){var a,i,o,r,l;if(null==n&&(n=null),e instanceof Array){for(r=[],a=0,o=e.length;a<o;a++)l=e[a],r.push(this.dump(l));return"["+r.join(", ")+"]"}for(i in r=[],e)l=e[i],r.push(this.dump(i)+": "+this.dump(l));return"{"+r.join(", ")+"}"},e.parseScalar=function(e,t,a,o,l){var d,i,c,u,f,m,g,_,y;if(null==t&&(t=null),null==a&&(a=["\"","'"]),null==o&&(o=null),null==l&&(l=!0),null==o&&(o={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),d=o.i,(m=e.charAt(d),!(0<=n.call(a,m)))){if(!t)u=e.slice(d),d+=u.length,_=u.indexOf(" #"),-1!==_&&(u=p.rtrim(u.slice(0,_)));else if(i=t.join("|"),f=this.PATTERN_SCALAR_BY_DELIMITERS[i],null==f&&(f=new s("^(.+?)("+i+")"),this.PATTERN_SCALAR_BY_DELIMITERS[i]=f),c=f.exec(e.slice(d)))u=c[1],d+=u.length;else throw new r("Malformed inline YAML string ("+e+").");l&&(u=this.evaluateScalar(u,o))}else if(u=this.parseQuotedScalar(e,o),d=o.i,null!=t&&(y=p.ltrim(e.slice(d)," "),g=y.charAt(0),!(0<=n.call(t,g))))throw new r("Unexpected characters ("+e.slice(d)+").");return o.i=d,u},e.parseQuotedScalar=function(e,t){var n,a,i;if(n=t.i,!(a=this.PATTERN_QUOTED_SCALAR.exec(e.slice(n))))throw new l("Malformed inline YAML string ("+e.slice(n)+").");return i=a[0].substr(1,a[0].length-2),i="\""===e.charAt(n)?d.unescapeDoubleQuotedString(i):d.unescapeSingleQuotedString(i),n+=a[0].length,t.i=n,i},e.parseSequence=function(e,t){var n,a,i,o,r,s;for(o=[],i=e.length,n=t.i,n+=1;n<i;){switch(t.i=n,e.charAt(n)){case"[":o.push(this.parseSequence(e,t)),n=t.i;break;case"{":o.push(this.parseMapping(e,t)),n=t.i;break;case"]":return o;case",":case" ":case"\n":break;default:if(a="\""===(r=e.charAt(n))||"'"===r,s=this.parseScalar(e,[",","]"],["\"","'"],t),n=t.i,!a&&"string"==typeof s&&(-1!==s.indexOf(": ")||-1!==s.indexOf(":\n")))try{s=this.parseMapping("{"+s+"}")}catch(e){}o.push(s),--n;}++n}throw new l("Malformed inline YAML string "+e)},e.parseMapping=function(e,t){var n,a,i,o,r,s,d;for(r={},o=e.length,a=t.i,a+=1,s=!1;a<o;){switch(t.i=a,e.charAt(a)){case" ":case",":case"\n":++a,t.i=a,s=!0;break;case"}":return r;}if(s){s=!1;continue}for(i=this.parseScalar(e,[":"," ","\n"],["\"","'"],t,!1),a=t.i,n=!1;a<o;){switch(t.i=a,e.charAt(a)){case"[":d=this.parseSequence(e,t),a=t.i,void 0===r[i]&&(r[i]=d),n=!0;break;case"{":d=this.parseMapping(e,t),a=t.i,void 0===r[i]&&(r[i]=d),n=!0;break;case":":case" ":case"\n":break;default:d=this.parseScalar(e,[",","}"],["\"","'"],t),a=t.i,void 0===r[i]&&(r[i]=d),n=!0,--a;}if(++a,n)break}}throw new l("Malformed inline YAML string "+e)},e.evaluateScalar=function(e,t){var n,a,i,o,l,s,d,c,u,f,m;switch(e=p.trim(e),u=e.toLowerCase(),u){case"null":case"":case"~":return null;case"true":return!0;case"false":return!1;case".inf":return 2e308;case".nan":return 0/0;case"-.inf":return 2e308;default:switch(o=u.charAt(0),o){case"!":switch(l=e.indexOf(" "),s=-1===l?u:u.slice(0,l),s){case"!":return-1===l?null:parseInt(this.parseScalar(e.slice(2)));case"!str":return p.ltrim(e.slice(4));case"!!str":return p.ltrim(e.slice(5));case"!!int":return parseInt(this.parseScalar(e.slice(5)));case"!!bool":return p.parseBoolean(this.parseScalar(e.slice(6)),!1);case"!!float":return parseFloat(this.parseScalar(e.slice(7)));case"!!timestamp":return p.stringToDate(p.ltrim(e.slice(11)));default:if(null==t&&(t={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),d=t.objectDecoder,i=t.exceptionOnInvalidType,d)return m=p.rtrim(e),l=m.indexOf(" "),-1===l?d(m,null):(f=p.ltrim(m.slice(l+1)),0<f.length||(f=null),d(m.slice(0,l),f));if(i)throw new r("Custom object support when parsing a YAML file has been disabled.");return null;}break;case"0":return"0x"===e.slice(0,2)?p.hexDec(e):p.isDigits(e)?p.octDec(e):p.isNumeric(e)?parseFloat(e):e;break;case"+":return p.isDigits(e)?(c=e,n=parseInt(c),c===n+""?n:c):p.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;case"-":return p.isDigits(e.slice(1))?"0"===e.charAt(1)?-p.octDec(e.slice(1)):(c=e.slice(1),n=parseInt(c),c===n+""?-n:-c):p.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;default:return(a=p.stringToDate(e))?a:p.isNumeric(e)?parseFloat(e):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(e)?parseFloat(e.replace(",","")):e;}}},e}(),t.exports=o},{"./Escaper":596,"./Exception/DumpException":597,"./Exception/ParseException":598,"./Exception/ParseMore":599,"./Pattern":602,"./Unescaper":603,"./Utils":604}],601:[function(e,t){var n,a,i,o,r,s;n=e("./Inline"),r=e("./Pattern"),s=e("./Utils"),a=e("./Exception/ParseException"),i=e("./Exception/ParseMore"),o=function(){function t(e){this.offset=null==e?0:e,this.lines=[],this.currentLineNb=-1,this.currentLine="",this.refs={}}return t.prototype.PATTERN_FOLDED_SCALAR_ALL=new r("^(?:(?<type>![^\\|>]*)\\s+)?(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),t.prototype.PATTERN_FOLDED_SCALAR_END=new r("(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),t.prototype.PATTERN_SEQUENCE_ITEM=new r("^\\-((?<leadspaces>\\s+)(?<value>.+?))?\\s*$"),t.prototype.PATTERN_ANCHOR_VALUE=new r("^&(?<ref>[^ ]+) *(?<value>.*)"),t.prototype.PATTERN_COMPACT_NOTATION=new r("^(?<key>"+n.REGEX_QUOTED_STRING+"|[^ '\"\\{\\[].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),t.prototype.PATTERN_MAPPING_ITEM=new r("^(?<key>"+n.REGEX_QUOTED_STRING+"|[^ '\"\\[\\{].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),t.prototype.PATTERN_DECIMAL=new r("\\d+"),t.prototype.PATTERN_INDENT_SPACES=new r("^ +"),t.prototype.PATTERN_TRAILING_LINES=new r("(\n*)$"),t.prototype.PATTERN_YAML_HEADER=new r("^\\%YAML[: ][\\d\\.]+.*\n","m"),t.prototype.PATTERN_LEADING_COMMENTS=new r("^(\\#.*?\n)+","m"),t.prototype.PATTERN_DOCUMENT_MARKER_START=new r("^\\-\\-\\-.*?\n","m"),t.prototype.PATTERN_DOCUMENT_MARKER_END=new r("^\\.\\.\\.\\s*$","m"),t.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION={},t.prototype.CONTEXT_NONE=0,t.prototype.CONTEXT_SEQUENCE=1,t.prototype.CONTEXT_MAPPING=2,t.prototype.parse=function(o,r,d){var p,u,f,g,c,_,y,e,h,i,b,x,v,S,T,l,k,E,N,A,w,C,m,O,D,P,R,I,M,F,B,z,j,U,$,W;for(null==r&&(r=!1),null==d&&(d=null),this.currentLineNb=-1,this.currentLine="",this.lines=this.cleanup(o).split("\n"),_=null,c=this.CONTEXT_NONE,u=!1;this.moveToNextLine();)if(!this.isCurrentLineEmpty()){if("\t"===this.currentLine[0])throw new a("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine);if(b=O=!1,W=this.PATTERN_SEQUENCE_ITEM.exec(this.currentLine)){if(this.CONTEXT_MAPPING===c)throw new a("You cannot define a sequence item when in a mapping");c=this.CONTEXT_SEQUENCE,null==_&&(_=[]),null!=W.value&&(m=this.PATTERN_ANCHOR_VALUE.exec(W.value))&&(b=m.ref,W.value=m.value),null!=W.value&&""!==s.trim(W.value," ")&&0!==s.ltrim(W.value," ").indexOf("#")?(null==(F=W.leadspaces)?void 0:F.length)&&(m=this.PATTERN_COMPACT_NOTATION.exec(W.value))?(g=this.getRealCurrentLineNb(),M=new t(g),M.refs=this.refs,f=W.value,i=this.getCurrentLineIndentation(),this.isNextLineIndented(!1)&&(f+="\n"+this.getNextEmbedBlock(i+W.leadspaces.length+1,!0)),_.push(M.parse(f,r,d))):_.push(this.parseValue(W.value,r,d)):this.currentLineNb<this.lines.length-1&&!this.isNextLineUnIndentedCollection()?(g=this.getRealCurrentLineNb()+1,M=new t(g),M.refs=this.refs,_.push(M.parse(this.getNextEmbedBlock(null,!0),r,d))):_.push(null)}else if((W=this.PATTERN_MAPPING_ITEM.exec(this.currentLine))&&-1===W.key.indexOf(" #")){if(this.CONTEXT_SEQUENCE===c)throw new a("You cannot define a mapping item when in a sequence");c=this.CONTEXT_MAPPING,null==_&&(_={}),n.configure(r,d);try{S=n.parseScalar(W.key)}catch(e){throw y=e,y.parsedLine=this.getRealCurrentLineNb()+1,y.snippet=this.currentLine,y}if("<<"!==S)null!=W.value&&(m=this.PATTERN_ANCHOR_VALUE.exec(W.value))&&(b=m.ref,W.value=m.value);else if(O=!0,u=!0,0===(null==(B=W.value)?void 0:B.indexOf("*"))){if(j=W.value.slice(1),null==this.refs[j])throw new a("Reference \""+j+"\" does not exist.",this.getRealCurrentLineNb()+1,this.currentLine);if(U=this.refs[j],"object"!=typeof U)throw new a("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(U instanceof Array)for(h=x=0,k=U.length;x<k;h=++x)o=U[h],null==_[P=h+""]&&(_[P]=o);else for(S in U)o=U[S],null==_[S]&&(_[S]=o)}else{if(o=null!=W.value&&""!==W.value?W.value:this.getNextEmbedBlock(),g=this.getRealCurrentLineNb()+1,M=new t(g),M.refs=this.refs,R=M.parse(o,r),"object"!=typeof R)throw new a("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(R instanceof Array)for(T=0,E=R.length;T<E;T++){if(I=R[T],"object"!=typeof I)throw new a("Merge items must be objects.",this.getRealCurrentLineNb()+1,I);if(I instanceof Array)for(h=C=0,N=I.length;C<N;h=++C)o=I[h],v=h+"",_.hasOwnProperty(v)||(_[v]=o);else for(S in I)o=I[S],_.hasOwnProperty(S)||(_[S]=o)}else for(S in R)o=R[S],_.hasOwnProperty(S)||(_[S]=o)}O||(null!=W.value&&""!==s.trim(W.value," ")&&0!==s.ltrim(W.value," ").indexOf("#")?($=this.parseValue(W.value,r,d),(u||void 0===_[S])&&(_[S]=$)):this.isNextLineIndented()||this.isNextLineUnIndentedCollection()?(g=this.getRealCurrentLineNb()+1,M=new t(g),M.refs=this.refs,$=M.parse(this.getNextEmbedBlock(),r,d),(u||void 0===_[S])&&(_[S]=$)):(u||void 0===_[S])&&(_[S]=null))}else{if(w=this.lines.length,1===w||2===w&&s.isEmpty(this.lines[1])){try{o=n.parse(this.lines[0],r,d)}catch(e){throw y=e,y.parsedLine=this.getRealCurrentLineNb()+1,y.snippet=this.currentLine,y}if("object"==typeof o){if(o instanceof Array)e=o[0];else for(S in o){e=o[S];break}if("string"==typeof e&&0===e.indexOf("*")){for(_=[],D=0,A=o.length;D<A;D++)p=o[D],_.push(this.refs[p.slice(1)]);o=_}}return o}if("["===(z=s.ltrim(o).charAt(0))||"{"===z)try{return n.parse(o,r,d)}catch(e){throw y=e,y.parsedLine=this.getRealCurrentLineNb()+1,y.snippet=this.currentLine,y}throw new a("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(b)if(_ instanceof Array)this.refs[b]=_[_.length-1];else{for(S in l=null,_)l=S;this.refs[b]=_[l]}}return s.isEmpty(_)?null:_},t.prototype.getRealCurrentLineNb=function(){return this.currentLineNb+this.offset},t.prototype.getCurrentLineIndentation=function(){return this.currentLine.length-s.ltrim(this.currentLine," ").length},t.prototype.getNextEmbedBlock=function(e,t){var n,i,o,r,l,d,p;if(null==e&&(e=null),null==t&&(t=!1),this.moveToNextLine(),null!=e)r=e;else if(r=this.getCurrentLineIndentation(),p=this.isStringUnIndentedCollectionItem(this.currentLine),!this.isCurrentLineEmpty()&&0===r&&!p)throw new a("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine);for(n=[this.currentLine.slice(r)],t||(o=this.isStringUnIndentedCollectionItem(this.currentLine)),d=this.PATTERN_FOLDED_SCALAR_END,l=!d.test(this.currentLine);this.moveToNextLine();)if(i=this.getCurrentLineIndentation(),i===r&&(l=!d.test(this.currentLine)),!(l&&this.isCurrentLineComment())){if(this.isCurrentLineBlank()){n.push(this.currentLine.slice(r));continue}if(o&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&i===r){this.moveToPreviousLine();break}if(i>=r)n.push(this.currentLine.slice(r));else if("#"===s.ltrim(this.currentLine).charAt(0));else if(0===i){this.moveToPreviousLine();break}else throw new a("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}return n.join("\n")},t.prototype.moveToNextLine=function(){return!(this.currentLineNb>=this.lines.length-1)&&(this.currentLine=this.lines[++this.currentLineNb],!0)},t.prototype.moveToPreviousLine=function(){this.currentLine=this.lines[--this.currentLineNb]},t.prototype.parseValue=function(t,o,r){var l,e,d,p,c,u,f,m;if(0===t.indexOf("*")){if(c=t.indexOf("#"),t=-1===c?t.slice(1):t.substr(1,c-2),void 0===this.refs[t])throw new a("Reference \""+t+"\" does not exist.",this.currentLine);return this.refs[t]}if(d=this.PATTERN_FOLDED_SCALAR_ALL.exec(t))return p=null==(u=d.modifiers)?"":u,e=T(parseInt(p)),isNaN(e)&&(e=0),m=this.parseFoldedScalar(d.separator,this.PATTERN_DECIMAL.replace(p,""),e),null==d.type?m:(n.configure(o,r),n.parseScalar(d.type+" "+m));if("["===(f=t.charAt(0))||"{"===f||"\""===f||"'"===f)for(;;)try{return n.parse(t,o,r)}catch(e){if(l=e,l instanceof i&&this.moveToNextLine())t+="\n"+s.trim(this.currentLine," ");else throw l.parsedLine=this.getRealCurrentLineNb()+1,l.snippet=this.currentLine,l}else return this.isNextLineIndented()&&(t+="\n"+this.getNextEmbedBlock()),n.parse(t,o,r)},t.prototype.parseFoldedScalar=function(e,n,a){var i,o,l,d,p,c,u,f,m,g;if(null==n&&(n=""),null==a&&(a=0),u=this.moveToNextLine(),!u)return"";for(i=this.isCurrentLineBlank(),g="";u&&i;)(u=this.moveToNextLine())&&(g+="\n",i=this.isCurrentLineBlank());if(0===a&&(p=this.PATTERN_INDENT_SPACES.exec(this.currentLine))&&(a=p[0].length),0<a)for(f=this.PATTERN_FOLDED_SCALAR_BY_INDENTATION[a],null==f&&(f=new r("^ {"+a+"}(.*)$"),t.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION[a]=f);u&&(i||(p=f.exec(this.currentLine)));)g+=i?this.currentLine.slice(a):p[1],(u=this.moveToNextLine())&&(g+="\n",i=this.isCurrentLineBlank());else u&&(g+="\n");if(u&&this.moveToPreviousLine(),">"===e){for(c="",m=g.split("\n"),(o=0,l=m.length);o<l;o++)d=m[o],0===d.length||" "===d.charAt(0)?c=s.rtrim(c," ")+d+"\n":c+=d+" ";g=c}return"+"!==n&&(g=s.rtrim(g)),""===n?g=this.PATTERN_TRAILING_LINES.replace(g,"\n"):"-"===n&&(g=this.PATTERN_TRAILING_LINES.replace(g,"")),g},t.prototype.isNextLineIndented=function(e){var t,n,a;if(null==e&&(e=!0),n=this.getCurrentLineIndentation(),t=!this.moveToNextLine(),e)for(;!t&&this.isCurrentLineEmpty();)t=!this.moveToNextLine();else for(;!t&&this.isCurrentLineBlank();)t=!this.moveToNextLine();return!t&&(a=!1,this.getCurrentLineIndentation()>n&&(a=!0),this.moveToPreviousLine(),a)},t.prototype.isCurrentLineEmpty=function(){var e;return e=s.trim(this.currentLine," "),0===e.length||"#"===e.charAt(0)},t.prototype.isCurrentLineBlank=function(){return""===s.trim(this.currentLine," ")},t.prototype.isCurrentLineComment=function(){var e;return e=s.ltrim(this.currentLine," "),"#"===e.charAt(0)},t.prototype.cleanup=function(e){var t,n,a,i,o,r,l,d,p,c,u,f,m,g;for(-1!==e.indexOf("\r")&&(e=e.split("\r\n").join("\n").split("\r").join("\n")),t=0,c=this.PATTERN_YAML_HEADER.replaceAll(e,""),e=c[0],t=c[1],this.offset+=t,u=this.PATTERN_LEADING_COMMENTS.replaceAll(e,"",1),g=u[0],t=u[1],1===t&&(this.offset+=s.subStrCount(e,"\n")-s.subStrCount(g,"\n"),e=g),f=this.PATTERN_DOCUMENT_MARKER_START.replaceAll(e,"",1),g=f[0],t=f[1],1===t&&(this.offset+=s.subStrCount(e,"\n")-s.subStrCount(g,"\n"),e=g,e=this.PATTERN_DOCUMENT_MARKER_END.replace(e,"")),p=e.split("\n"),m=-1,(i=0,r=p.length);i<r;i++)(d=p[i],0!==s.trim(d," ").length)&&(a=d.length-s.ltrim(d).length,(-1===m||a<m)&&(m=a));if(0<m){for(n=o=0,l=p.length;o<l;n=++o)d=p[n],p[n]=d.slice(m);e=p.join("\n")}return e},t.prototype.isNextLineUnIndentedCollection=function(e){var t,n;for(null==e&&(e=null),null==e&&(e=this.getCurrentLineIndentation()),t=this.moveToNextLine();t&&this.isCurrentLineEmpty();)t=this.moveToNextLine();return!1!==t&&(n=!1,this.getCurrentLineIndentation()===e&&this.isStringUnIndentedCollectionItem(this.currentLine)&&(n=!0),this.moveToPreviousLine(),n)},t.prototype.isStringUnIndentedCollectionItem=function(){return"-"===this.currentLine||"- "===this.currentLine.slice(0,2)},t}(),t.exports=o},{"./Exception/ParseException":598,"./Exception/ParseMore":599,"./Inline":600,"./Pattern":602,"./Utils":604}],602:[function(e,t){var n;n=function(){function e(e,t){var n,a,o,r,i,l,s,d,p;for(null==t&&(t=""),o="",i=e.length,l=null,a=0,r=0;r<i;){if(n=e.charAt(r),"\\"===n)o+=e.slice(r,+(r+1)+1||9e9),r++;else if("("!==n)o+=n;else if(!(r<i-2))o+=n;else if(d=e.slice(r,+(r+2)+1||9e9),"(?:"===d)r+=2,o+=d;else if("(?<"===d)for(a++,r+=2,s="";r+1<i;){if(p=e.charAt(r+1),">"===p){o+="(",r++,0<s.length&&(null==l&&(l={}),l[s]=a);break}else s+=p;r++}else o+=n,a++;r++}this.rawRegex=e,this.cleanedRegex=o,this.regex=new RegExp(this.cleanedRegex,"g"+t.replace("g","")),this.mapping=l}return e.prototype.regex=null,e.prototype.rawRegex=null,e.prototype.cleanedRegex=null,e.prototype.mapping=null,e.prototype.exec=function(e){var t,n,a,i;if(this.regex.lastIndex=0,n=this.regex.exec(e),null==n)return null;if(null!=this.mapping)for(a in i=this.mapping,i)t=i[a],n[a]=n[t];return n},e.prototype.test=function(e){return this.regex.lastIndex=0,this.regex.test(e)},e.prototype.replace=function(e,t){return this.regex.lastIndex=0,e.replace(this.regex,t)},e.prototype.replaceAll=function(e,t,n){var a;for(null==n&&(n=0),this.regex.lastIndex=0,a=0;this.regex.test(e)&&(0===n||a<n);)this.regex.lastIndex=0,e=e.replace(this.regex,t),a++;return[e,a]},e}(),t.exports=n},{}],603:[function(e,t){var n,a,i;i=e("./Utils"),n=e("./Pattern"),a=function(){function e(){}return e.PATTERN_ESCAPED_CHARACTER=new n("\\\\([0abt\tnvfre \"\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})"),e.unescapeSingleQuotedString=function(e){return e.replace(/\'\'/g,"'")},e.unescapeDoubleQuotedString=function(e){return null==this._unescapeCallback&&(this._unescapeCallback=function(e){return function(t){return e.unescapeCharacter(t)}}(this)),this.PATTERN_ESCAPED_CHARACTER.replace(e,this._unescapeCallback)},e.unescapeCharacter=function(e){var t;switch(t=d,e.charAt(1)){case"0":return t(0);case"a":return t(7);case"b":return t(8);case"t":return"\t";case"\t":return"\t";case"n":return"\n";case"v":return t(11);case"f":return t(12);case"r":return t(13);case"e":return t(27);case" ":return" ";case"\"":return"\"";case"/":return"/";case"\\":return"\\";case"N":return t(133);case"_":return t(160);case"L":return t(8232);case"P":return t(8233);case"x":return i.utf8chr(i.hexDec(e.substr(2,2)));case"u":return i.utf8chr(i.hexDec(e.substr(2,4)));case"U":return i.utf8chr(i.hexDec(e.substr(2,8)));default:return"";}},e}(),t.exports=a},{"./Pattern":602,"./Utils":604}],604:[function(e,t){var n={}.hasOwnProperty,a,i;a=e("./Pattern"),i=function(){function t(){}return t.REGEX_LEFT_TRIM_BY_CHAR={},t.REGEX_RIGHT_TRIM_BY_CHAR={},t.REGEX_SPACES=/\s+/g,t.REGEX_DIGITS=/^\d+$/,t.REGEX_OCTAL=/[^0-7]/gi,t.REGEX_HEXADECIMAL=/[^a-f0-9]/gi,t.PATTERN_DATE=new a("^(?<year>[0-9][0-9][0-9][0-9])-(?<month>[0-9][0-9]?)-(?<day>[0-9][0-9]?)(?:(?:[Tt]|[ \t]+)(?<hour>[0-9][0-9]?):(?<minute>[0-9][0-9]):(?<second>[0-9][0-9])(?:.(?<fraction>[0-9]*))?(?:[ \t]*(?<tz>Z|(?<tz_sign>[-+])(?<tz_hour>[0-9][0-9]?)(?::(?<tz_minute>[0-9][0-9]))?))?)?$","i"),t.LOCAL_TIMEZONE_OFFSET=1e3*(60*new Date().getTimezoneOffset()),t.trim=function(e,t){var n,a;return null==t&&(t="\\s"),n=this.REGEX_LEFT_TRIM_BY_CHAR[t],null==n&&(this.REGEX_LEFT_TRIM_BY_CHAR[t]=n=new RegExp("^"+t+""+t+"*")),n.lastIndex=0,a=this.REGEX_RIGHT_TRIM_BY_CHAR[t],null==a&&(this.REGEX_RIGHT_TRIM_BY_CHAR[t]=a=new RegExp(t+""+t+"*$")),a.lastIndex=0,e.replace(n,"").replace(a,"")},t.ltrim=function(e,t){var n;return null==t&&(t="\\s"),n=this.REGEX_LEFT_TRIM_BY_CHAR[t],null==n&&(this.REGEX_LEFT_TRIM_BY_CHAR[t]=n=new RegExp("^"+t+""+t+"*")),n.lastIndex=0,e.replace(n,"")},t.rtrim=function(e,t){var n;return null==t&&(t="\\s"),n=this.REGEX_RIGHT_TRIM_BY_CHAR[t],null==n&&(this.REGEX_RIGHT_TRIM_BY_CHAR[t]=n=new RegExp(t+""+t+"*$")),n.lastIndex=0,e.replace(n,"")},t.isEmpty=function(e){return!e||""===e||"0"===e||e instanceof Array&&0===e.length||this.isEmptyObject(e)},t.isEmptyObject=function(e){var t;return e instanceof Object&&0===function(){var a;for(t in a=[],e)n.call(e,t)&&a.push(t);return a}().length},t.subStrCount=function(e,t,n,a){var o,r,i,l,s,d;for(o=0,e=""+e,t=""+t,null!=n&&(e=e.slice(n)),null!=a&&(e=e.slice(0,a)),l=e.length,d=t.length,(r=i=0,s=l);0<=s?i<s:i>s;r=0<=s?++i:--i)t===e.slice(r,d)&&(o++,r+=d-1);return o},t.isDigits=function(e){return this.REGEX_DIGITS.lastIndex=0,this.REGEX_DIGITS.test(e)},t.octDec=function(e){return this.REGEX_OCTAL.lastIndex=0,parseInt((e+"").replace(this.REGEX_OCTAL,""),8)},t.hexDec=function(e){return this.REGEX_HEXADECIMAL.lastIndex=0,e=this.trim(e),"0x"===(e+"").slice(0,2)&&(e=(e+"").slice(2)),parseInt((e+"").replace(this.REGEX_HEXADECIMAL,""),16)},t.utf8chr=function(e){var t;return t=d,128>(e%=2097152)?t(e):2048>e?t(192|e>>6)+t(128|63&e):65536>e?t(224|e>>12)+t(128|63&e>>6)+t(128|63&e):t(240|e>>18)+t(128|63&e>>12)+t(128|63&e>>6)+t(128|63&e)},t.parseBoolean=function(e,t){var n;return null==t&&(t=!0),"string"==typeof e?(n=e.toLowerCase(),(t||"no"!==n)&&"0"!==n&&"false"!==n&&""!==n):!!e},t.isNumeric=function(e){return this.REGEX_SPACES.lastIndex=0,"number"==typeof e||"string"==typeof e&&!isNaN(e)&&""!==e.replace(this.REGEX_SPACES,"")},t.stringToDate=function(e){var t,n,a,i,o,r,l,s,d,p,c,u;if(null==e||!e.length)return null;if(o=this.PATTERN_DATE.exec(e),!o)return null;if(u=parseInt(o.year,10),l=parseInt(o.month,10)-1,n=parseInt(o.day,10),null==o.hour)return t=new Date(Date.UTC(u,l,n)),t;if(i=parseInt(o.hour,10),r=parseInt(o.minute,10),s=parseInt(o.second,10),null!=o.fraction){for(a=o.fraction.slice(0,3);3>a.length;)a+="0";a=parseInt(a,10)}else a=0;return null!=o.tz&&(d=parseInt(o.tz_hour,10),p=null==o.tz_minute?0:parseInt(o.tz_minute,10),c=6e4*(60*d+p),"-"===o.tz_sign&&(c*=-1)),t=new Date(Date.UTC(u,l,n,i,r,s,a)),c&&t.setTime(t.getTime()-c),t},t.strRepeat=function(e,t){var n,a;for(a="",n=0;n<t;)a+=e,n++;return a},t.getStringFromFile=function(t,n){var a,i,o,r,l,s,d,p;if(null==n&&(n=null),p=null,"undefined"!=typeof window&&null!==window)if(window.XMLHttpRequest)p=new XMLHttpRequest;else if(window.ActiveXObject)for(s=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],o=0,r=s.length;o<r;o++){l=s[o];try{p=new ActiveXObject(l)}catch(e){}}return null==p?(d=e,i=d("fs"),null==n?(a=i.readFileSync(t),null==a?null:a+""):i.readFile(t,function(e,t){return e?n(null):n(t+"")})):null==n?(p.open("GET",t,!1),p.send(null),200===p.status||0===p.status?p.responseText:null):(p.onreadystatechange=function(){if(4===p.readyState)return 200===p.status||0===p.status?n(p.responseText):n(null)},p.open("GET",t,!0),p.send(null))},t}(),t.exports=i},{"./Pattern":602}],605:[function(e,t){var n,a,i,o;a=e("./Parser"),n=e("./Dumper"),i=e("./Utils"),o=function(){function e(){}return e.parse=function(e,t,n){return null==t&&(t=!1),null==n&&(n=null),new a().parse(e,t,n)},e.parseFile=function(e,t,n,a){var o;return null==t&&(t=null),null==n&&(n=!1),null==a&&(a=null),null==t?(o=i.getStringFromFile(e),null==o?null:this.parse(o,n,a)):i.getStringFromFile(e,function(e){return function(i){var o;o=null,null!=i&&(o=e.parse(i,n,a)),t(o)}}(this))},e.dump=function(e,t,a,i,o){var r;return null==t&&(t=2),null==a&&(a=4),null==i&&(i=!1),null==o&&(o=null),r=new n,r.indentation=a,r.dump(e,t,0,i,o)},e.stringify=function(e,t,n,a,i){return this.dump(e,t,n,a,i)},e.load=function(e,t,n,a){return this.parseFile(e,t,n,a)},e}(),"undefined"!=typeof window&&null!==window&&(window.YAML=o),("undefined"==typeof window||null===window)&&(this.YAML=o),t.exports=o},{"./Dumper":595,"./Parser":601,"./Utils":604}],606:[function(e,t){t.exports={name:"vega-multi-view",version:"1.1.6",description:"Add multiple separate Vega views to a page and connect the signals of these views",license:"MIT",author:"abudaan",main:"dist/index.js",browser:"dist/index.js",module:"index.js",repository:"git://github.com/abudaan/vega-multi-view.git",bugs:{url:"https://github.com/abudaan/vega-multi-view/issues"},keywords:["vega","leaflet","tile maps","signals"],scripts:{prebuild:"rm -rf build && mkdir build","gulp:build":"gulp build",compile:"babel ./src --out-dir ./dist",update:"npm run compile && npm run gulp:build",postpublish:"git push && git push --tags"},dependencies:{"fetch-helpers":"git+https://github.com/abudaan/fetch-helpers.git",ramda:"^0.23.0",vega:"^3.0.8","vega-as-leaflet-layer":"^1.1.6","vega-tooltip":"^0.4.4",xstream:"^10.9.0"},devDependencies:{"babel-cli":"^6.26.0","babel-core":"^6.26.0","babel-eslint":"^7.2.3","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.0","babel-preset-flow":"^6.23.0","babel-preset-stage-0":"^6.24.1","babel-register":"^6.26.0",babelify:"^7.3.0",browserify:"^14.4.0",eslint:"^4.6.1","eslint-config-airbnb-base":"^12.0.0","eslint-plugin-flowtype":"^2.35.1","eslint-plugin-import":"^2.7.0","flow-bin":"0.42.0",gulp:"github:gulpjs/gulp#4.0.0","gulp-autoprefixer":"^4.0.0","gulp-babel-minify":"^0.2.0","gulp-concat":"^2.6.1","gulp-copy":"^1.0.1","gulp-filter":"^5.0.1","gulp-sass":"^3.1.0","gulp-sourcemaps":"^2.6.1","gulp-util":"^3.0.8","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^2.0.0"}}},{}],607:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.version=n.showSpecInTab=n.addMultipleConfigs=n.addViews=n.removeViews=void 0;var i=e("babel-runtime/core-js/json/stringify"),o=a(i),r=e("babel-runtime/helpers/toConsumableArray"),l=a(r),s=e("babel-runtime/helpers/slicedToArray"),d=a(s),p=e("babel-runtime/regenerator"),c=a(p),u=e("babel-runtime/helpers/extends"),f=a(u),m=e("babel-runtime/core-js/promise"),g=a(m),_=e("babel-runtime/helpers/asyncToGenerator"),y=a(_),h=e("ramda"),b=a(h),x=e("vega"),S=e("vega-as-leaflet-layer/dist"),T=a(S),k=e("fetch-helpers"),E=e("./util/debug"),N=a(E),A=e("./util/add-tooltips"),w=a(A),C=e("./util/signals"),O=a(C),D=e("./util/add-elements"),P=a(D),R=e("./util/add-styling"),I=a(R),M=e("./util/load-specs"),F=e("../package.json"),B=b.default.addIndex(b.default.map),z={},j=function(e,t,n){e.forEach(function(e){var a=e.view,i=e.vmvConfig,o=e.element;if(null!==a)if(!0===i.leaflet){var r={view:e.view,renderer:e.renderer||t,container:n,mapElement:o};(0,T.default)(r)}else a.renderer(i.renderer||t).initialize(o)})},U=function(e,n){var t=B(function(){var e=(0,y.default)(c.default.mark(function e(a){var i,o,t,r,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,e.prev=1,o=a.spec.type||n,e.next=5,(0,M.loadSpec)(a.spec,o);case 5:i=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error(e.t0);case 11:if(null!==i){e.next=13;break}return e.abrupt("return",g.default.resolve({id:a.id,spec:"Vega spec "+a.spec+" could not be loaded",view:null,vmvConfig:null}));case 13:return t=(0,f.default)({},i),r=a.vmvConfig||{styling:{}},!1===b.default.isNil(t.vmvConfig)&&(r=(0,f.default)({},t.vmvConfig),delete t.vmvConfig),b.default.isNil(r.styling)&&(r.styling={}),l=new x.View((0,x.parse)(t)),e.abrupt("return",new g.default(function(e){e({id:a.id,spec:t,view:l,vmvConfig:r})}));case 19:case"end":return e.stop();}},e,void 0,[[1,8]])}));return function(){return e.apply(this,arguments)}}(),e);return g.default.all(t)},$=n.removeViews=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=b.default.flatten(t);return a.forEach(function(e){var t=z[e];if(!1===b.default.isNil(t)){var n=t.element;null!==n&&n.parentNode.removeChild(n),delete z[e]}}),z},W=n.addViews=function(){var e=(0,y.default)(c.default.mark(function e(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,a,i,o,r,l,s,p,u,f,m,_,y,h,x,v,S,T,E,A,C,D,R,M;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,"string"!=typeof a){e.next=13;break}if(0!==a.length){e.next=4;break}return e.abrupt("return",g.default.reject(new Error("You have passed an empty string!")));case 4:return e.prev=4,e.next=7,(0,k.load)(a,n).catch(function(t){return g.default.reject(t)});case 7:a=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e["catch"](4),e.abrupt("return",g.default.reject(e.t0));case 13:return i=a,o=i.run,r=void 0===o||o,l=i.hover,s=void 0!==l&&l,p=i.specs,u=i.element,f=i.renderer,m=void 0===f?"canvas":f,_=i.debug,y=void 0!==_&&_,h=i.overwrite,x=void 0!==h&&h,v=i.styling,S=void 0===v?{}:v,(0,I.default)("global",S,document.body),T=void 0,E=b.default.splitWhen(function(e){return b.default.isNil(z[e])},b.default.keys(p)),A=(0,d.default)(E,2),C=A[0],D=A[1],x?($(C),1===C.length?console.info("view with id \""+C[0]+"\" is overwritten"):1<C.length&&console.info("views with ids \""+C.join("\", \"")+"\" are overwritten"),T=b.default.keys(p)):(1===C.length?console.warn("view with id \""+C[0]+"\" already exist!"):1<C.length&&console.warn("views with ids \""+C.join("\", \"")+"\" already exist!"),T=D),T=b.default.map(function(e){var t=p[e],n={spec:t,id:e};if(Array.isArray(t))if(2===t.length){var a=(0,d.default)(t,2);n.spec=a[0],n.vmvConfig=a[1]}else if(1===t.length){var i=(0,d.default)(t,1);n.spec=i[0]}return n},T),R=document.body,"string"==typeof u?(R=document.getElementById(u),b.default.isNil(R)&&(R=document.createElement("div"),R.id=u,document.body.appendChild(R))):u instanceof HTMLElement?(R=u,null===document.getElementById(u)&&document.body.appendChild(R)):"undefined"!=typeof u&&console.warn("invalid element, using document.body instead"),e.next=23,U(T,n);case 23:if(M=e.sent,M=(0,P.default)(M,R),(0,w.default)(M),(0,O.default)(M,y),!y){e.next=30;break}return e.next=30,(0,N.default)(M);case 30:return e.abrupt("return",new g.default(function(e){setTimeout(function(){j(M,m,R),M.forEach(function(e){null!==e.view&&((!0===e.vmvConfig.run||!0===r&&!1!==e.vmvConfig.run)&&e.view.run(),(!0===e.vmvConfig.hover||!0===s&&!1!==e.vmvConfig.hover)&&e.view.hover(),(0,I.default)(e.id,e.vmvConfig.styling,e.element,S)),z[e.id]=e}),e(z)},0)}));case 31:case"end":return e.stop();}},e,void 0,[[4,10]])}));return function(){return e.apply(this,arguments)}}(),q=function(e){return new g.default(function(t,n){var a=0,i=e.length,o=[],r=[],s=function(e,t){var n=e.func,a=e.args;n.apply(void 0,(0,l.default)(a)).then(function(e){r.push(e),t()}).catch(function(e){o.push(e),t()})};s(e[a],function l(){a+=1,a<i?s(e[a],l):o.length===i?n(new Error("None of the config files could be loaded")):0===o.length?t(r[0]):t({errors:o,result:r[0]})})})},H=n.addMultipleConfigs=function(){var e=(0,y.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==Array.isArray(t)){e.next=2;break}return e.abrupt("return",g.default.reject(new Error("Please pass an array with urls to config files!")));case 2:return n=[],t.forEach(function(e){n.push({func:W,args:[e]})}),e.abrupt("return",q(n));case 5:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Y=n.showSpecInTab=function(e){var t=(0,o.default)(e,null,4),n=window.open();n.document.open(),n.document.write("< html > <body><pre>"+t+"</pre></body></html > "),n.document.close()},V="vega-multi-view "+F.version;n.version=V},{"../package.json":606,"./util/add-elements":608,"./util/add-styling":609,"./util/add-tooltips":610,"./util/debug":611,"./util/load-specs":612,"./util/signals":614,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/promise":8,"babel-runtime/helpers/asyncToGenerator":9,"babel-runtime/helpers/extends":11,"babel-runtime/helpers/slicedToArray":12,"babel-runtime/helpers/toConsumableArray":13,"babel-runtime/regenerator":16,"fetch-helpers":144,ramda:154,vega:592,"vega-as-leaflet-layer/dist":469}],608:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/helpers/extends"),o=a(i),r=e("ramda"),l=a(r);n.default=function(e,t){return l.default.map(function(e){if(null===e.view)return(0,o.default)({},e,{element:null});var n=e.vmvConfig.element,a=null;if("string"==typeof n)a=document.getElementById(n),null===a&&(a=document.createElement("div"),a.id=n,t.appendChild(a));else if(n instanceof HTMLElement)null===document.getElementById(n.id)&&t.appendChild(n),a=n;else{if("undefined"!=typeof n)return console.error("element \""+n+"\" is not an id or a valid HTMLElement"),(0,o.default)({},e,{element:null});a=document.createElement("div"),a.id=e.id,t.appendChild(a)}return(0,o.default)({},e,{element:a})},e)}},{"babel-runtime/helpers/extends":11,ramda:154}],609:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/helpers/toConsumableArray"),o=a(i),r=e("ramda"),l=a(r),s=document.getElementsByTagName("head").item(0),d=0;n.default=function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=t.url,r=void 0===i?null:i,l=t.css,p=void 0===l?null:l,c=t.cssAppend,u=void 0===c||c,f=t.addToHead,m=t.classes,g=void 0===m?null:m,_=t.classesAppend,y=[],h=[];if("string"==typeof g?y=[g]:Array.isArray(g)&&(y=g),"string"==typeof a.classes?h=[a.classes]:Array.isArray(a.classes)&&(h=a.classes),n.className=!0===(void 0===_||_)?[].concat((0,o.default)(h),(0,o.default)(y)).join(" "):0<y.length?y.join(" "):0<h.length?h.join(" "):"",!0===(void 0!==f&&f))if("string"==typeof p){var b=document.getElementById("style-"+e);null===b&&(b=document.createElement("style"),b.id="style-"+e,b.type="text/css",s.appendChild(b));var x=document.createTextNode(p);!1===u&&(b.innerHTML=""),b.appendChild(x)}else if("string"==typeof r){var v=document.querySelectorAll("id^="+e);!1===u&&v.forEach(function(e){s.removeChild(e)});var S=document.createElement("link");S.id="id-"+d,S.type="text/css",S.setAttribute("rel","stylesheet"),S.setAttribute("href",r),s.appendChild(S),d+=1}}},{"babel-runtime/helpers/toConsumableArray":13,ramda:154}],610:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("vega-tooltip");n.default=function(e){e.forEach(function(e){null!==e.view&&"undefined"!=typeof e.vmvConfig.tooltipOptions&&(0,a.vega)(e.view,e.vmvConfig.tooltipOptions)})}},{"vega-tooltip":586}],611:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/core-js/promise"),o=a(i),r=e("ramda"),l=a(r);n.default=function(e){console.log(e),l.default.forEach(function(e){var t=e.spec,n=e.view;l.default.forEach(function(e){n.addSignalListener(e.name,function(e,n){console.log("[SIGNAL] %s %s %O",t.description||" - ",e,n)})},t.signals||[])},e);var t=l.default.map(function(e){return new o.default(function(t){var n=e.spec,a=e.view;(l.default.isNil(n.data)||0===n.data.length)&&t();var i=n.data.length,o=0,r=setInterval(function(){l.default.forEach(function(e){var l=a.data(e.name);null!==l&&(console.log("[DATA] %s %s %O",n.description||" - ",e.name,l),o+=1),o===i&&(clearInterval(r),t())},n.data)},10)})},e);return o.default.all(t)}},{"babel-runtime/core-js/promise":8,ramda:154}],612:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.loadSpecs=n.loadSpec=void 0;var i=e("babel-runtime/regenerator"),o=a(i),r=e("babel-runtime/core-js/promise"),l=a(r),s=e("babel-runtime/helpers/asyncToGenerator"),d=a(s),p=e("fetch-helpers"),c=n.loadSpec=function(e,t){return(0,p.load)(e,t)},u=n.loadSpecs=function(){var e=(0,d.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,l.default.all(t.map(function(){var e=(0,d.default)(o.default.mark(function e(t){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.fetchJSON)(t);case 2:a=e.sent,n.push(a);case 4:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},{"babel-runtime/core-js/promise":8,"babel-runtime/helpers/asyncToGenerator":9,"babel-runtime/regenerator":16,"fetch-helpers":144}],613:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.removeDataset=n.replaceDataset=n.remove=n.insert=n.change=void 0;var i=e("babel-runtime/helpers/defineProperty"),o=a(i),r=e("babel-runtime/helpers/extends"),l=a(r),s=e("ramda"),d=a(s),p=e("vega");n.change=function(e,t,n){if("undefined"!=typeof n&&Array.isArray(n)){var a=t.dataset,o=t.select,r=t.update,l=(0,p.changeset)();n.forEach(function(e){var t=0;d.default.tail(e).forEach(function(n){var a=r.fields[t];t+=1,null!==n&&("=="===o.test?l.modify(function(t){return t[o.field]===e[0]},a,n):"!="===o.test?l.modify(function(t){return t[o.field]!==e[0]},a,n):"<"===o.test?l.modify(function(t){return t[o.field]<e[0]},a,n):">"===o.test&&l.modify(function(t){return t[o.field]>e[0]},a,n))})}),e.change(a,l).run()}},n.insert=function(e,t,n){if("undefined"!=typeof n&&Array.isArray(n)){var a=t.dataset;e.insert(a,n).run()}},n.remove=function(e,t,n){if("undefined"!=typeof n&&Array.isArray(n)){var a=t.dataset,i=t.select,o=(0,p.changeset)();n.forEach(function(e){"=="===i.test?o.remove(function(t){return t[i.field]===e[0]}):"!="===i.test?o.remove(function(t){return t[i.field]!==e[0]}):"<"===i.test?o.remove(function(t){return t[i.field]<e[0]}):">"===i.test&&o.remove(function(t){return t[i.field]>e[0]})}),e.change(a,o).run()}},n.replaceDataset=function(e,t,n){if("undefined"!=typeof n&&"undefined"!=typeof n.data){var a=t.dataset,i=d.default.map(function(e){return d.default.reduce(function(t,n){return(0,l.default)({},t,(0,o.default)({},n,e[n]))},{},d.default.keys(e))},n.data);e.remove(a,function(){return!0}).run(),e.insert(a,i).run()}},n.removeDataset=function(e,t,n){if(!0===n){var a=t.dataset;e.remove(a,function(){return!0}).run()}}},{"babel-runtime/helpers/defineProperty":10,"babel-runtime/helpers/extends":11,ramda:154,vega:592}],614:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("babel-runtime/helpers/extends"),o=a(i),r=e("ramda"),l=a(r),s=e("xstream"),d=a(s),p=e("./process"),c=0,u={},f=!1,m=function(e){var t=e.vmvConfig,n=e.view;if(l.default.isNil(t.publish))return u;var a=t.publish;return!1===Array.isArray(a)&&(a=[a]),l.default.forEach(function(e){var t=e.as||e.signal;if(!1===l.default.isNil(u[t]))console.error("There is already a stream published as \""+t+"\", skipping this one. Please use another name or unpublish this signal first");else try{var a=d.default.create({start:function(t){n.addSignalListener(e.signal,function(n,a){t.next({query:e.query,value:a})})},stop:function(){n.removeSignalListener(e.signal)},id:c});c+=1,f&&console.log("publishing signal "+e.signal+" as "+t+" with stream id "+c),u[t]=a}catch(t){console.error(t.message)}},a),u},g=function(e){var t=e.view,n=e.spec,a=e.vmvConfig;if(!l.default.isNil(a.subscribe)){var i=a.subscribe;!1===Array.isArray(i)&&(i=[i]),l.default.forEach(function(e){var a=u[e.signal];return l.default.isNil(a)?void console.error("no stream for signal \""+e.signal+"\""):void a.addListener({next:function(a){var i=a.query,o=a.value,r=null;if(i&&(r=i.action),"replace_all"===r||"replaceAll"===r)(0,p.replaceDataset)(t,i,o);else if("remove_all"===r||"removeAll"===r)(0,p.removeDataset)(t,i,o);else if("change"===r)(0,p.change)(t,i,o);else if("remove"===r)(0,p.remove)(t,i,o);else if("insert"===r)(0,p.insert)(t,i,o);else{var s=e.as||e.signal;l.default.isNil(l.default.find(l.default.propEq("name",s))(n.signals))?console.error("no signal \""+s+"\" found in spec"):t.signal(s,o).run()}},error:function(e){console.error("Stream "+a.id+" error: "+e)},complete:function(){console.log("Stream "+a.id+" is done")}})},i)}};n.default=function(e,t){f=t,l.default.forEach(function(e){null!==e.view&&(u=(0,o.default)({},u,m(e)))},l.default.values(e)),l.default.forEach(function(e){null!==e.view&&g(e,u)},l.default.values(e))}},{"./process":613,"babel-runtime/helpers/extends":11,ramda:154,xstream:594}]},{},[607])(607)});